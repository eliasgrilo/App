(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function R1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D1={exports:{}},gu={},M1={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ja=Symbol.for("react.element"),wN=Symbol.for("react.portal"),kN=Symbol.for("react.fragment"),jN=Symbol.for("react.strict_mode"),NN=Symbol.for("react.profiler"),_N=Symbol.for("react.provider"),zN=Symbol.for("react.context"),CN=Symbol.for("react.forward_ref"),SN=Symbol.for("react.suspense"),EN=Symbol.for("react.memo"),TN=Symbol.for("react.lazy"),Ng=Symbol.iterator;function IN(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var V1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L1=Object.assign,O1={};function co(t,e,n){this.props=t,this.context=e,this.refs=O1,this.updater=n||V1}co.prototype.isReactComponent={};co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function F1(){}F1.prototype=co.prototype;function xf(t,e,n){this.props=t,this.context=e,this.refs=O1,this.updater=n||V1}var yf=xf.prototype=new F1;yf.constructor=xf;L1(yf,co.prototype);yf.isPureReactComponent=!0;var _g=Array.isArray,B1=Object.prototype.hasOwnProperty,vf={current:null},U1={key:!0,ref:!0,__self:!0,__source:!0};function $1(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)B1.call(e,r)&&!U1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ja,type:t,key:o,ref:a,props:i,_owner:vf.current}}function AN(t,e){return{$$typeof:Ja,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ja}function PN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zg=/\/+/g;function gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PN(""+t.key):e.toString(36)}function Jl(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ja:case wN:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+gd(a,0):r,_g(i)?(n="",t!=null&&(n=t.replace(zg,"$&/")+"/"),Jl(i,e,n,"",function(d){return d})):i!=null&&(bf(i)&&(i=AN(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(zg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",_g(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+gd(o,l);a+=Jl(o,e,n,c,i)}else if(c=IN(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+gd(o,l++),a+=Jl(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Nl(t,e,n){if(t==null)return t;var r=[],i=0;return Jl(t,r,"","",function(o){return e.call(n,o,i++)}),r}function RN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Jt={current:null},Zl={transition:null},DN={ReactCurrentDispatcher:Jt,ReactCurrentBatchConfig:Zl,ReactCurrentOwner:vf};function W1(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Nl,forEach:function(t,e,n){Nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nl(t,function(){e++}),e},toArray:function(t){return Nl(t,function(e){return e})||[]},only:function(t){if(!bf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=co;Te.Fragment=kN;Te.Profiler=NN;Te.PureComponent=xf;Te.StrictMode=jN;Te.Suspense=SN;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DN;Te.act=W1;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=L1({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=vf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)B1.call(e,c)&&!U1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ja,type:t.type,key:i,ref:o,props:r,_owner:a}};Te.createContext=function(t){return t={$$typeof:zN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:_N,_context:t},t.Consumer=t};Te.createElement=$1;Te.createFactory=function(t){var e=$1.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:CN,render:t}};Te.isValidElement=bf;Te.lazy=function(t){return{$$typeof:TN,_payload:{_status:-1,_result:t},_init:RN}};Te.memo=function(t,e){return{$$typeof:EN,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Zl.transition;Zl.transition={};try{t()}finally{Zl.transition=e}};Te.unstable_act=W1;Te.useCallback=function(t,e){return Jt.current.useCallback(t,e)};Te.useContext=function(t){return Jt.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Jt.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Jt.current.useEffect(t,e)};Te.useId=function(){return Jt.current.useId()};Te.useImperativeHandle=function(t,e,n){return Jt.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Jt.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Jt.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Jt.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Jt.current.useReducer(t,e,n)};Te.useRef=function(t){return Jt.current.useRef(t)};Te.useState=function(t){return Jt.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Jt.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Jt.current.useTransition()};Te.version="18.3.1";M1.exports=Te;var j=M1.exports;const Sn=R1(j);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MN=j,VN=Symbol.for("react.element"),LN=Symbol.for("react.fragment"),ON=Object.prototype.hasOwnProperty,FN=MN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,BN={key:!0,ref:!0,__self:!0,__source:!0};function q1(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)ON.call(e,r)&&!BN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:VN,type:t,key:o,ref:a,props:i,_owner:FN.current}}gu.Fragment=LN;gu.jsx=q1;gu.jsxs=q1;D1.exports=gu;var s=D1.exports,jh={},H1={exports:{}},gn={},G1={exports:{}},K1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,X){var H=Y.length;Y.push(X);e:for(;0<H;){var te=H-1>>>1,se=Y[te];if(0<i(se,X))Y[te]=X,Y[H]=se,H=te;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var X=Y[0],H=Y.pop();if(H!==X){Y[0]=H;e:for(var te=0,se=Y.length,pe=se>>>1;te<pe;){var D=2*(te+1)-1,U=Y[D],$=D+1,oe=Y[$];if(0>i(U,H))$<se&&0>i(oe,U)?(Y[te]=oe,Y[$]=H,te=$):(Y[te]=U,Y[D]=H,te=D);else if($<se&&0>i(oe,H))Y[te]=oe,Y[$]=H,te=$;else break e}}return X}function i(Y,X){var H=Y.sortIndex-X.sortIndex;return H!==0?H:Y.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,m=null,f=3,y=!1,N=!1,I=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(Y){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=Y)r(d),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(d)}}function R(Y){if(I=!1,k(Y),!N)if(n(c)!==null)N=!0,me(M);else{var X=n(d);X!==null&&xe(R,X.startTime-Y)}}function M(Y,X){N=!1,I&&(I=!1,w(x),x=-1),y=!0;var H=f;try{for(k(X),m=n(c);m!==null&&(!(m.expirationTime>X)||Y&&!z());){var te=m.callback;if(typeof te=="function"){m.callback=null,f=m.priorityLevel;var se=te(m.expirationTime<=X);X=t.unstable_now(),typeof se=="function"?m.callback=se:m===n(c)&&r(c),k(X)}else r(c);m=n(c)}if(m!==null)var pe=!0;else{var D=n(d);D!==null&&xe(R,D.startTime-X),pe=!1}return pe}finally{m=null,f=H,y=!1}}var L=!1,v=null,x=-1,_=5,C=-1;function z(){return!(t.unstable_now()-C<_)}function A(){if(v!==null){var Y=t.unstable_now();C=Y;var X=!0;try{X=v(!0,Y)}finally{X?E():(L=!1,v=null)}}else L=!1}var E;if(typeof b=="function")E=function(){b(A)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,le=ge.port2;ge.port1.onmessage=A,E=function(){le.postMessage(null)}}else E=function(){P(A,0)};function me(Y){v=Y,L||(L=!0,E())}function xe(Y,X){x=P(function(){Y(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){N||y||(N=!0,me(M))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Y){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var H=f;f=X;try{return Y()}finally{f=H}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,X){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var H=f;f=Y;try{return X()}finally{f=H}},t.unstable_scheduleCallback=function(Y,X,H){var te=t.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?te+H:te):H=te,Y){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=H+se,Y={id:h++,callback:X,priorityLevel:Y,startTime:H,expirationTime:se,sortIndex:-1},H>te?(Y.sortIndex=H,e(d,Y),n(c)===null&&Y===n(d)&&(I?(w(x),x=-1):I=!0,xe(R,H-te))):(Y.sortIndex=se,e(c,Y),N||y||(N=!0,me(M))),Y},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Y){var X=f;return function(){var H=f;f=X;try{return Y.apply(this,arguments)}finally{f=H}}}})(K1);G1.exports=K1;var UN=G1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $N=j,pn=UN;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q1=new Set,wa={};function ns(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(wa[t]=e,t=0;t<e.length;t++)Q1.add(e[t])}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nh=Object.prototype.hasOwnProperty,WN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cg={},Sg={};function qN(t){return Nh.call(Sg,t)?!0:Nh.call(Cg,t)?!1:WN.test(t)?Sg[t]=!0:(Cg[t]=!0,!1)}function HN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function GN(t,e,n,r){if(e===null||typeof e>"u"||HN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zt(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new Zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new Zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new Zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new Zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new Zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new Zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new Zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new Zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new Zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wf=/[\-:]([a-z])/g;function kf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wf,kf);Mt[e]=new Zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wf,kf);Mt[e]=new Zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wf,kf);Mt[e]=new Zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new Zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new Zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function jf(t,e,n,r){var i=Mt.hasOwnProperty(e)?Mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(GN(e,n,i,r)&&(n=null),r||i===null?qN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Tr=$N.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_l=Symbol.for("react.element"),bs=Symbol.for("react.portal"),ws=Symbol.for("react.fragment"),Nf=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),Y1=Symbol.for("react.provider"),X1=Symbol.for("react.context"),_f=Symbol.for("react.forward_ref"),zh=Symbol.for("react.suspense"),Ch=Symbol.for("react.suspense_list"),zf=Symbol.for("react.memo"),Br=Symbol.for("react.lazy"),J1=Symbol.for("react.offscreen"),Eg=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=Eg&&t[Eg]||t["@@iterator"],typeof t=="function"?t:null)}var st=Object.assign,xd;function Go(t){if(xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xd=e&&e[1]||""}return`
`+xd+t}var yd=!1;function vd(t,e){if(!t||yd)return"";yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,l=o.length-1;1<=a&&0<=l&&i[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==o[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Go(t):""}function KN(t){switch(t.tag){case 5:return Go(t.type);case 16:return Go("Lazy");case 13:return Go("Suspense");case 19:return Go("SuspenseList");case 0:case 2:case 15:return t=vd(t.type,!1),t;case 11:return t=vd(t.type.render,!1),t;case 1:return t=vd(t.type,!0),t;default:return""}}function Sh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ws:return"Fragment";case bs:return"Portal";case _h:return"Profiler";case Nf:return"StrictMode";case zh:return"Suspense";case Ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X1:return(t.displayName||"Context")+".Consumer";case Y1:return(t._context.displayName||"Context")+".Provider";case _f:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zf:return e=t.displayName||null,e!==null?e:Sh(t.type)||"Memo";case Br:e=t._payload,t=t._init;try{return Sh(t(e))}catch{}}return null}function QN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sh(e);case 8:return e===Nf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Z1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function YN(t){var e=Z1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function zl(t){t._valueTracker||(t._valueTracker=YN(t))}function eb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Z1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eh(t,e){var n=e.checked;return st({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function tb(t,e){e=e.checked,e!=null&&jf(t,"checked",e,!1)}function Th(t,e){tb(t,e);var n=oi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ih(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ih(t,e.type,oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ig(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ih(t,e,n){(e!=="number"||Nc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ko=Array.isArray;function Vs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ah(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return st({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ag(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Ko(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oi(n)}}function nb(t,e){var n=oi(e.value),r=oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Pg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ph(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,ib=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ka(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var na={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XN=["Webkit","ms","Moz","O"];Object.keys(na).forEach(function(t){XN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),na[e]=na[t]})});function sb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||na.hasOwnProperty(t)&&na[t]?(""+e).trim():e+"px"}function ob(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=sb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var JN=st({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rh(t,e){if(e){if(JN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function Dh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mh=null;function Cf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Vh=null,Ls=null,Os=null;function Rg(t){if(t=tl(t)){if(typeof Vh!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=wu(e),Vh(t.stateNode,t.type,e))}}function ab(t){Ls?Os?Os.push(t):Os=[t]:Ls=t}function lb(){if(Ls){var t=Ls,e=Os;if(Os=Ls=null,Rg(t),e)for(t=0;t<e.length;t++)Rg(e[t])}}function cb(t,e){return t(e)}function ub(){}var bd=!1;function db(t,e,n){if(bd)return t(e,n);bd=!0;try{return cb(t,e,n)}finally{bd=!1,(Ls!==null||Os!==null)&&(ub(),lb())}}function ja(t,e){var n=t.stateNode;if(n===null)return null;var r=wu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var Lh=!1;if(yr)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Lh=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Lh=!1}function ZN(t,e,n,r,i,o,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ra=!1,_c=null,zc=!1,Oh=null,e4={onError:function(t){ra=!0,_c=t}};function t4(t,e,n,r,i,o,a,l,c){ra=!1,_c=null,ZN.apply(e4,arguments)}function n4(t,e,n,r,i,o,a,l,c){if(t4.apply(this,arguments),ra){if(ra){var d=_c;ra=!1,_c=null}else throw Error(ie(198));zc||(zc=!0,Oh=d)}}function rs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dg(t){if(rs(t)!==t)throw Error(ie(188))}function r4(t){var e=t.alternate;if(!e){if(e=rs(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Dg(i),t;if(o===r)return Dg(i),e;o=o.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function fb(t){return t=r4(t),t!==null?mb(t):null}function mb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mb(t);if(e!==null)return e;t=t.sibling}return null}var pb=pn.unstable_scheduleCallback,Mg=pn.unstable_cancelCallback,i4=pn.unstable_shouldYield,s4=pn.unstable_requestPaint,ht=pn.unstable_now,o4=pn.unstable_getCurrentPriorityLevel,Sf=pn.unstable_ImmediatePriority,gb=pn.unstable_UserBlockingPriority,Cc=pn.unstable_NormalPriority,a4=pn.unstable_LowPriority,xb=pn.unstable_IdlePriority,xu=null,Jn=null;function l4(t){if(Jn&&typeof Jn.onCommitFiberRoot=="function")try{Jn.onCommitFiberRoot(xu,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:d4,c4=Math.log,u4=Math.LN2;function d4(t){return t>>>=0,t===0?32:31-(c4(t)/u4|0)|0}var Sl=64,El=4194304;function Qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Sc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Qo(l):(o&=a,o!==0&&(r=Qo(o)))}else a=n&~i,a!==0?r=Qo(a):o!==0&&(r=Qo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fn(e),i=1<<n,r|=t[n],e&=~i;return r}function h4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function f4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Fn(o),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=h4(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function Fh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yb(){var t=Sl;return Sl<<=1,!(Sl&4194240)&&(Sl=64),t}function wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function m4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Ef(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Oe=0;function vb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bb,Tf,wb,kb,jb,Bh=!1,Tl=[],Kr=null,Qr=null,Yr=null,Na=new Map,_a=new Map,$r=[],p4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vg(t,e){switch(t){case"focusin":case"focusout":Kr=null;break;case"dragenter":case"dragleave":Qr=null;break;case"mouseover":case"mouseout":Yr=null;break;case"pointerover":case"pointerout":Na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_a.delete(e.pointerId)}}function Vo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=tl(e),e!==null&&Tf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function g4(t,e,n,r,i){switch(e){case"focusin":return Kr=Vo(Kr,t,e,n,r,i),!0;case"dragenter":return Qr=Vo(Qr,t,e,n,r,i),!0;case"mouseover":return Yr=Vo(Yr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Na.set(o,Vo(Na.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,_a.set(o,Vo(_a.get(o)||null,t,e,n,r,i)),!0}return!1}function Nb(t){var e=Ri(t.target);if(e!==null){var n=rs(e);if(n!==null){if(e=n.tag,e===13){if(e=hb(n),e!==null){t.blockedOn=e,jb(t.priority,function(){wb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ec(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mh=r,n.target.dispatchEvent(r),Mh=null}else return e=tl(n),e!==null&&Tf(e),t.blockedOn=n,!1;e.shift()}return!0}function Lg(t,e,n){ec(t)&&n.delete(e)}function x4(){Bh=!1,Kr!==null&&ec(Kr)&&(Kr=null),Qr!==null&&ec(Qr)&&(Qr=null),Yr!==null&&ec(Yr)&&(Yr=null),Na.forEach(Lg),_a.forEach(Lg)}function Lo(t,e){t.blockedOn===e&&(t.blockedOn=null,Bh||(Bh=!0,pn.unstable_scheduleCallback(pn.unstable_NormalPriority,x4)))}function za(t){function e(i){return Lo(i,t)}if(0<Tl.length){Lo(Tl[0],t);for(var n=1;n<Tl.length;n++){var r=Tl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kr!==null&&Lo(Kr,t),Qr!==null&&Lo(Qr,t),Yr!==null&&Lo(Yr,t),Na.forEach(e),_a.forEach(e),n=0;n<$r.length;n++)r=$r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<$r.length&&(n=$r[0],n.blockedOn===null);)Nb(n),n.blockedOn===null&&$r.shift()}var Fs=Tr.ReactCurrentBatchConfig,Ec=!0;function y4(t,e,n,r){var i=Oe,o=Fs.transition;Fs.transition=null;try{Oe=1,If(t,e,n,r)}finally{Oe=i,Fs.transition=o}}function v4(t,e,n,r){var i=Oe,o=Fs.transition;Fs.transition=null;try{Oe=4,If(t,e,n,r)}finally{Oe=i,Fs.transition=o}}function If(t,e,n,r){if(Ec){var i=Uh(t,e,n,r);if(i===null)Id(t,e,r,Tc,n),Vg(t,r);else if(g4(i,t,e,n,r))r.stopPropagation();else if(Vg(t,r),e&4&&-1<p4.indexOf(t)){for(;i!==null;){var o=tl(i);if(o!==null&&bb(o),o=Uh(t,e,n,r),o===null&&Id(t,e,r,Tc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Id(t,e,r,null,n)}}var Tc=null;function Uh(t,e,n,r){if(Tc=null,t=Cf(r),t=Ri(t),t!==null)if(e=rs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Tc=t,null}function _b(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(o4()){case Sf:return 1;case gb:return 4;case Cc:case a4:return 16;case xb:return 536870912;default:return 16}default:return 16}}var qr=null,Af=null,tc=null;function zb(){if(tc)return tc;var t,e=Af,n=e.length,r,i="value"in qr?qr.value:qr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return tc=i.slice(t,1<r?1-r:void 0)}function nc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Il(){return!0}function Og(){return!1}function xn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Il:Og,this.isPropagationStopped=Og,this}return st(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pf=xn(uo),el=st({},uo,{view:0,detail:0}),b4=xn(el),kd,jd,Oo,yu=st({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(kd=t.screenX-Oo.screenX,jd=t.screenY-Oo.screenY):jd=kd=0,Oo=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:jd}}),Fg=xn(yu),w4=st({},yu,{dataTransfer:0}),k4=xn(w4),j4=st({},el,{relatedTarget:0}),Nd=xn(j4),N4=st({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),_4=xn(N4),z4=st({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),C4=xn(z4),S4=st({},uo,{data:0}),Bg=xn(S4),E4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},T4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},I4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function A4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=I4[t])?!!e[t]:!1}function Rf(){return A4}var P4=st({},el,{key:function(t){if(t.key){var e=E4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?T4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(t){return t.type==="keypress"?nc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),R4=xn(P4),D4=st({},yu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ug=xn(D4),M4=st({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),V4=xn(M4),L4=st({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),O4=xn(L4),F4=st({},yu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),B4=xn(F4),U4=[9,13,27,32],Df=yr&&"CompositionEvent"in window,ia=null;yr&&"documentMode"in document&&(ia=document.documentMode);var $4=yr&&"TextEvent"in window&&!ia,Cb=yr&&(!Df||ia&&8<ia&&11>=ia),$g=" ",Wg=!1;function Sb(t,e){switch(t){case"keyup":return U4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Eb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function W4(t,e){switch(t){case"compositionend":return Eb(e);case"keypress":return e.which!==32?null:(Wg=!0,$g);case"textInput":return t=e.data,t===$g&&Wg?null:t;default:return null}}function q4(t,e){if(ks)return t==="compositionend"||!Df&&Sb(t,e)?(t=zb(),tc=Af=qr=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Cb&&e.locale!=="ko"?null:e.data;default:return null}}var H4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!H4[t.type]:e==="textarea"}function Tb(t,e,n,r){ab(r),e=Ic(e,"onChange"),0<e.length&&(n=new Pf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var sa=null,Ca=null;function G4(t){Bb(t,0)}function vu(t){var e=_s(t);if(eb(e))return t}function K4(t,e){if(t==="change")return e}var Ib=!1;if(yr){var _d;if(yr){var zd="oninput"in document;if(!zd){var Hg=document.createElement("div");Hg.setAttribute("oninput","return;"),zd=typeof Hg.oninput=="function"}_d=zd}else _d=!1;Ib=_d&&(!document.documentMode||9<document.documentMode)}function Gg(){sa&&(sa.detachEvent("onpropertychange",Ab),Ca=sa=null)}function Ab(t){if(t.propertyName==="value"&&vu(Ca)){var e=[];Tb(e,Ca,t,Cf(t)),db(G4,e)}}function Q4(t,e,n){t==="focusin"?(Gg(),sa=e,Ca=n,sa.attachEvent("onpropertychange",Ab)):t==="focusout"&&Gg()}function Y4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vu(Ca)}function X4(t,e){if(t==="click")return vu(e)}function J4(t,e){if(t==="input"||t==="change")return vu(e)}function Z4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Un=typeof Object.is=="function"?Object.is:Z4;function Sa(t,e){if(Un(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Nh.call(e,i)||!Un(t[i],e[i]))return!1}return!0}function Kg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Qg(t,e){var n=Kg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kg(n)}}function Pb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rb(){for(var t=window,e=Nc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nc(t.document)}return e}function Mf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function e_(t){var e=Rb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pb(n.ownerDocument.documentElement,n)){if(r!==null&&Mf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Qg(n,o);var a=Qg(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var t_=yr&&"documentMode"in document&&11>=document.documentMode,js=null,$h=null,oa=null,Wh=!1;function Yg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wh||js==null||js!==Nc(r)||(r=js,"selectionStart"in r&&Mf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oa&&Sa(oa,r)||(oa=r,r=Ic($h,"onSelect"),0<r.length&&(e=new Pf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=js)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Cd={},Db={};yr&&(Db=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function bu(t){if(Cd[t])return Cd[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Db)return Cd[t]=e[n];return t}var Mb=bu("animationend"),Vb=bu("animationiteration"),Lb=bu("animationstart"),Ob=bu("transitionend"),Fb=new Map,Xg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(t,e){Fb.set(t,e),ns(e,[t])}for(var Sd=0;Sd<Xg.length;Sd++){var Ed=Xg[Sd],n_=Ed.toLowerCase(),r_=Ed[0].toUpperCase()+Ed.slice(1);xi(n_,"on"+r_)}xi(Mb,"onAnimationEnd");xi(Vb,"onAnimationIteration");xi(Lb,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(Ob,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ns("onBeforeInput",["compositionend","keypress","textInput","paste"]);ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function Jg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,n4(r,e,void 0,t),t.currentTarget=null}function Bb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&i.isPropagationStopped())break e;Jg(i,l,d),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&i.isPropagationStopped())break e;Jg(i,l,d),o=c}}}if(zc)throw t=Oh,zc=!1,Oh=null,t}function Qe(t,e){var n=e[Qh];n===void 0&&(n=e[Qh]=new Set);var r=t+"__bubble";n.has(r)||(Ub(e,t,2,!1),n.add(r))}function Td(t,e,n){var r=0;e&&(r|=4),Ub(n,t,r,e)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function Ea(t){if(!t[Pl]){t[Pl]=!0,Q1.forEach(function(n){n!=="selectionchange"&&(i_.has(n)||Td(n,!1,t),Td(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pl]||(e[Pl]=!0,Td("selectionchange",!1,e))}}function Ub(t,e,n,r){switch(_b(e)){case 1:var i=y4;break;case 4:i=v4;break;default:i=If}n=i.bind(null,e,n,t),i=void 0,!Lh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Id(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Ri(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}db(function(){var d=o,h=Cf(n),m=[];e:{var f=Fb.get(t);if(f!==void 0){var y=Pf,N=t;switch(t){case"keypress":if(nc(n)===0)break e;case"keydown":case"keyup":y=R4;break;case"focusin":N="focus",y=Nd;break;case"focusout":N="blur",y=Nd;break;case"beforeblur":case"afterblur":y=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Fg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=k4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=V4;break;case Mb:case Vb:case Lb:y=_4;break;case Ob:y=O4;break;case"scroll":y=b4;break;case"wheel":y=B4;break;case"copy":case"cut":case"paste":y=C4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ug}var I=(e&4)!==0,P=!I&&t==="scroll",w=I?f!==null?f+"Capture":null:f;I=[];for(var b=d,k;b!==null;){k=b;var R=k.stateNode;if(k.tag===5&&R!==null&&(k=R,w!==null&&(R=ja(b,w),R!=null&&I.push(Ta(b,R,k)))),P)break;b=b.return}0<I.length&&(f=new y(f,N,null,n,h),m.push({event:f,listeners:I}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==Mh&&(N=n.relatedTarget||n.fromElement)&&(Ri(N)||N[vr]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(N=n.relatedTarget||n.toElement,y=d,N=N?Ri(N):null,N!==null&&(P=rs(N),N!==P||N.tag!==5&&N.tag!==6)&&(N=null)):(y=null,N=d),y!==N)){if(I=Fg,R="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(I=Ug,R="onPointerLeave",w="onPointerEnter",b="pointer"),P=y==null?f:_s(y),k=N==null?f:_s(N),f=new I(R,b+"leave",y,n,h),f.target=P,f.relatedTarget=k,R=null,Ri(h)===d&&(I=new I(w,b+"enter",N,n,h),I.target=k,I.relatedTarget=P,R=I),P=R,y&&N)t:{for(I=y,w=N,b=0,k=I;k;k=ms(k))b++;for(k=0,R=w;R;R=ms(R))k++;for(;0<b-k;)I=ms(I),b--;for(;0<k-b;)w=ms(w),k--;for(;b--;){if(I===w||w!==null&&I===w.alternate)break t;I=ms(I),w=ms(w)}I=null}else I=null;y!==null&&Zg(m,f,y,I,!1),N!==null&&P!==null&&Zg(m,P,N,I,!0)}}e:{if(f=d?_s(d):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var M=K4;else if(qg(f))if(Ib)M=J4;else{M=Y4;var L=Q4}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=X4);if(M&&(M=M(t,d))){Tb(m,M,n,h);break e}L&&L(t,f,d),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&Ih(f,"number",f.value)}switch(L=d?_s(d):window,t){case"focusin":(qg(L)||L.contentEditable==="true")&&(js=L,$h=d,oa=null);break;case"focusout":oa=$h=js=null;break;case"mousedown":Wh=!0;break;case"contextmenu":case"mouseup":case"dragend":Wh=!1,Yg(m,n,h);break;case"selectionchange":if(t_)break;case"keydown":case"keyup":Yg(m,n,h)}var v;if(Df)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ks?Sb(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Cb&&n.locale!=="ko"&&(ks||x!=="onCompositionStart"?x==="onCompositionEnd"&&ks&&(v=zb()):(qr=h,Af="value"in qr?qr.value:qr.textContent,ks=!0)),L=Ic(d,x),0<L.length&&(x=new Bg(x,t,null,n,h),m.push({event:x,listeners:L}),v?x.data=v:(v=Eb(n),v!==null&&(x.data=v)))),(v=$4?W4(t,n):q4(t,n))&&(d=Ic(d,"onBeforeInput"),0<d.length&&(h=new Bg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=v))}Bb(m,e)})}function Ta(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ic(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ja(t,n),o!=null&&r.unshift(Ta(t,o,i)),o=ja(t,e),o!=null&&r.push(Ta(t,o,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Zg(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=ja(n,o),c!=null&&a.unshift(Ta(n,c,l))):i||(c=ja(n,o),c!=null&&a.push(Ta(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var s_=/\r\n?/g,o_=/\u0000|\uFFFD/g;function ex(t){return(typeof t=="string"?t:""+t).replace(s_,`
`).replace(o_,"")}function Rl(t,e,n){if(e=ex(e),ex(t)!==e&&n)throw Error(ie(425))}function Ac(){}var qh=null,Hh=null;function Gh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kh=typeof setTimeout=="function"?setTimeout:void 0,a_=typeof clearTimeout=="function"?clearTimeout:void 0,tx=typeof Promise=="function"?Promise:void 0,l_=typeof queueMicrotask=="function"?queueMicrotask:typeof tx<"u"?function(t){return tx.resolve(null).then(t).catch(c_)}:Kh;function c_(t){setTimeout(function(){throw t})}function Ad(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),za(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);za(e)}function Xr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function nx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Xn="__reactFiber$"+ho,Ia="__reactProps$"+ho,vr="__reactContainer$"+ho,Qh="__reactEvents$"+ho,u_="__reactListeners$"+ho,d_="__reactHandles$"+ho;function Ri(t){var e=t[Xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vr]||n[Xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=nx(t);t!==null;){if(n=t[Xn])return n;t=nx(t)}return e}t=n,n=t.parentNode}return null}function tl(t){return t=t[Xn]||t[vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function wu(t){return t[Ia]||null}var Yh=[],zs=-1;function yi(t){return{current:t}}function Xe(t){0>zs||(t.current=Yh[zs],Yh[zs]=null,zs--)}function Ge(t,e){zs++,Yh[zs]=t.current,t.current=e}var ai={},Wt=yi(ai),an=yi(!1),Hi=ai;function Qs(t,e){var n=t.type.contextTypes;if(!n)return ai;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function Pc(){Xe(an),Xe(Wt)}function rx(t,e,n){if(Wt.current!==ai)throw Error(ie(168));Ge(Wt,e),Ge(an,n)}function $b(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ie(108,QN(t)||"Unknown",i));return st({},n,r)}function Rc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ai,Hi=Wt.current,Ge(Wt,t),Ge(an,an.current),!0}function ix(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=$b(t,e,Hi),r.__reactInternalMemoizedMergedChildContext=t,Xe(an),Xe(Wt),Ge(Wt,t)):Xe(an),Ge(an,n)}var fr=null,ku=!1,Pd=!1;function Wb(t){fr===null?fr=[t]:fr.push(t)}function h_(t){ku=!0,Wb(t)}function vi(){if(!Pd&&fr!==null){Pd=!0;var t=0,e=Oe;try{var n=fr;for(Oe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fr=null,ku=!1}catch(i){throw fr!==null&&(fr=fr.slice(t+1)),pb(Sf,vi),i}finally{Oe=e,Pd=!1}}return null}var Cs=[],Ss=0,Dc=null,Mc=0,bn=[],wn=0,Gi=null,mr=1,pr="";function Ei(t,e){Cs[Ss++]=Mc,Cs[Ss++]=Dc,Dc=t,Mc=e}function qb(t,e,n){bn[wn++]=mr,bn[wn++]=pr,bn[wn++]=Gi,Gi=t;var r=mr;t=pr;var i=32-Fn(r)-1;r&=~(1<<i),n+=1;var o=32-Fn(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,mr=1<<32-Fn(e)+i|n<<i|r,pr=o+t}else mr=1<<o|n<<i|r,pr=t}function Vf(t){t.return!==null&&(Ei(t,1),qb(t,1,0))}function Lf(t){for(;t===Dc;)Dc=Cs[--Ss],Cs[Ss]=null,Mc=Cs[--Ss],Cs[Ss]=null;for(;t===Gi;)Gi=bn[--wn],bn[wn]=null,pr=bn[--wn],bn[wn]=null,mr=bn[--wn],bn[wn]=null}var fn=null,hn=null,et=!1,Ln=null;function Hb(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function sx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,hn=Xr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gi!==null?{id:mr,overflow:pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,hn=null,!0):!1;default:return!1}}function Xh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Jh(t){if(et){var e=hn;if(e){var n=e;if(!sx(t,e)){if(Xh(t))throw Error(ie(418));e=Xr(n.nextSibling);var r=fn;e&&sx(t,e)?Hb(r,n):(t.flags=t.flags&-4097|2,et=!1,fn=t)}}else{if(Xh(t))throw Error(ie(418));t.flags=t.flags&-4097|2,et=!1,fn=t}}}function ox(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Dl(t){if(t!==fn)return!1;if(!et)return ox(t),et=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gh(t.type,t.memoizedProps)),e&&(e=hn)){if(Xh(t))throw Gb(),Error(ie(418));for(;e;)Hb(t,e),e=Xr(e.nextSibling)}if(ox(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){hn=Xr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}hn=null}}else hn=fn?Xr(t.stateNode.nextSibling):null;return!0}function Gb(){for(var t=hn;t;)t=Xr(t.nextSibling)}function Ys(){hn=fn=null,et=!1}function Of(t){Ln===null?Ln=[t]:Ln.push(t)}var f_=Tr.ReactCurrentBatchConfig;function Fo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=i.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Ml(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ax(t){var e=t._init;return e(t._payload)}function Kb(t){function e(w,b){if(t){var k=w.deletions;k===null?(w.deletions=[b],w.flags|=16):k.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=ti(w,b),w.index=0,w.sibling=null,w}function o(w,b,k){return w.index=k,t?(k=w.alternate,k!==null?(k=k.index,k<b?(w.flags|=2,b):k):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,b,k,R){return b===null||b.tag!==6?(b=Fd(k,w.mode,R),b.return=w,b):(b=i(b,k),b.return=w,b)}function c(w,b,k,R){var M=k.type;return M===ws?h(w,b,k.props.children,R,k.key):b!==null&&(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Br&&ax(M)===b.type)?(R=i(b,k.props),R.ref=Fo(w,b,k),R.return=w,R):(R=cc(k.type,k.key,k.props,null,w.mode,R),R.ref=Fo(w,b,k),R.return=w,R)}function d(w,b,k,R){return b===null||b.tag!==4||b.stateNode.containerInfo!==k.containerInfo||b.stateNode.implementation!==k.implementation?(b=Bd(k,w.mode,R),b.return=w,b):(b=i(b,k.children||[]),b.return=w,b)}function h(w,b,k,R,M){return b===null||b.tag!==7?(b=Ui(k,w.mode,R,M),b.return=w,b):(b=i(b,k),b.return=w,b)}function m(w,b,k){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Fd(""+b,w.mode,k),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _l:return k=cc(b.type,b.key,b.props,null,w.mode,k),k.ref=Fo(w,null,b),k.return=w,k;case bs:return b=Bd(b,w.mode,k),b.return=w,b;case Br:var R=b._init;return m(w,R(b._payload),k)}if(Ko(b)||Do(b))return b=Ui(b,w.mode,k,null),b.return=w,b;Ml(w,b)}return null}function f(w,b,k,R){var M=b!==null?b.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return M!==null?null:l(w,b,""+k,R);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _l:return k.key===M?c(w,b,k,R):null;case bs:return k.key===M?d(w,b,k,R):null;case Br:return M=k._init,f(w,b,M(k._payload),R)}if(Ko(k)||Do(k))return M!==null?null:h(w,b,k,R,null);Ml(w,k)}return null}function y(w,b,k,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(k)||null,l(b,w,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case _l:return w=w.get(R.key===null?k:R.key)||null,c(b,w,R,M);case bs:return w=w.get(R.key===null?k:R.key)||null,d(b,w,R,M);case Br:var L=R._init;return y(w,b,k,L(R._payload),M)}if(Ko(R)||Do(R))return w=w.get(k)||null,h(b,w,R,M,null);Ml(b,R)}return null}function N(w,b,k,R){for(var M=null,L=null,v=b,x=b=0,_=null;v!==null&&x<k.length;x++){v.index>x?(_=v,v=null):_=v.sibling;var C=f(w,v,k[x],R);if(C===null){v===null&&(v=_);break}t&&v&&C.alternate===null&&e(w,v),b=o(C,b,x),L===null?M=C:L.sibling=C,L=C,v=_}if(x===k.length)return n(w,v),et&&Ei(w,x),M;if(v===null){for(;x<k.length;x++)v=m(w,k[x],R),v!==null&&(b=o(v,b,x),L===null?M=v:L.sibling=v,L=v);return et&&Ei(w,x),M}for(v=r(w,v);x<k.length;x++)_=y(v,w,x,k[x],R),_!==null&&(t&&_.alternate!==null&&v.delete(_.key===null?x:_.key),b=o(_,b,x),L===null?M=_:L.sibling=_,L=_);return t&&v.forEach(function(z){return e(w,z)}),et&&Ei(w,x),M}function I(w,b,k,R){var M=Do(k);if(typeof M!="function")throw Error(ie(150));if(k=M.call(k),k==null)throw Error(ie(151));for(var L=M=null,v=b,x=b=0,_=null,C=k.next();v!==null&&!C.done;x++,C=k.next()){v.index>x?(_=v,v=null):_=v.sibling;var z=f(w,v,C.value,R);if(z===null){v===null&&(v=_);break}t&&v&&z.alternate===null&&e(w,v),b=o(z,b,x),L===null?M=z:L.sibling=z,L=z,v=_}if(C.done)return n(w,v),et&&Ei(w,x),M;if(v===null){for(;!C.done;x++,C=k.next())C=m(w,C.value,R),C!==null&&(b=o(C,b,x),L===null?M=C:L.sibling=C,L=C);return et&&Ei(w,x),M}for(v=r(w,v);!C.done;x++,C=k.next())C=y(v,w,x,C.value,R),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?x:C.key),b=o(C,b,x),L===null?M=C:L.sibling=C,L=C);return t&&v.forEach(function(A){return e(w,A)}),et&&Ei(w,x),M}function P(w,b,k,R){if(typeof k=="object"&&k!==null&&k.type===ws&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case _l:e:{for(var M=k.key,L=b;L!==null;){if(L.key===M){if(M=k.type,M===ws){if(L.tag===7){n(w,L.sibling),b=i(L,k.props.children),b.return=w,w=b;break e}}else if(L.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Br&&ax(M)===L.type){n(w,L.sibling),b=i(L,k.props),b.ref=Fo(w,L,k),b.return=w,w=b;break e}n(w,L);break}else e(w,L);L=L.sibling}k.type===ws?(b=Ui(k.props.children,w.mode,R,k.key),b.return=w,w=b):(R=cc(k.type,k.key,k.props,null,w.mode,R),R.ref=Fo(w,b,k),R.return=w,w=R)}return a(w);case bs:e:{for(L=k.key;b!==null;){if(b.key===L)if(b.tag===4&&b.stateNode.containerInfo===k.containerInfo&&b.stateNode.implementation===k.implementation){n(w,b.sibling),b=i(b,k.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=Bd(k,w.mode,R),b.return=w,w=b}return a(w);case Br:return L=k._init,P(w,b,L(k._payload),R)}if(Ko(k))return N(w,b,k,R);if(Do(k))return I(w,b,k,R);Ml(w,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,k),b.return=w,w=b):(n(w,b),b=Fd(k,w.mode,R),b.return=w,w=b),a(w)):n(w,b)}return P}var Xs=Kb(!0),Qb=Kb(!1),Vc=yi(null),Lc=null,Es=null,Ff=null;function Bf(){Ff=Es=Lc=null}function Uf(t){var e=Vc.current;Xe(Vc),t._currentValue=e}function Zh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){Lc=t,Ff=Es=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(sn=!0),t.firstContext=null)}function En(t){var e=t._currentValue;if(Ff!==t)if(t={context:t,memoizedValue:e,next:null},Es===null){if(Lc===null)throw Error(ie(308));Es=t,Lc.dependencies={lanes:0,firstContext:t}}else Es=Es.next=t;return e}var Di=null;function $f(t){Di===null?Di=[t]:Di.push(t)}function Yb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$f(e)):(n.next=i.next,i.next=n),e.interleaved=n,br(t,r)}function br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ur=!1;function Wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,br(t,n)}return i=r.interleaved,i===null?(e.next=e,$f(r)):(e.next=i.next,i.next=e),r.interleaved=e,br(t,n)}function rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ef(t,n)}}function lx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,r){var i=t.updateQueue;Ur=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(o!==null){var m=i.baseState;a=0,h=d=c=null,l=o;do{var f=l.lane,y=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,I=l;switch(f=e,y=n,I.tag){case 1:if(N=I.payload,typeof N=="function"){m=N.call(y,m,f);break e}m=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=I.payload,f=typeof N=="function"?N.call(y,m,f):N,f==null)break e;m=st({},m,f);break e;case 2:Ur=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=m):h=h.next=y,a|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Qi|=a,t.lanes=a,t.memoizedState=m}}function cx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var nl={},Zn=yi(nl),Aa=yi(nl),Pa=yi(nl);function Mi(t){if(t===nl)throw Error(ie(174));return t}function qf(t,e){switch(Ge(Pa,e),Ge(Aa,t),Ge(Zn,nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ph(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ph(e,t)}Xe(Zn),Ge(Zn,e)}function Js(){Xe(Zn),Xe(Aa),Xe(Pa)}function Jb(t){Mi(Pa.current);var e=Mi(Zn.current),n=Ph(e,t.type);e!==n&&(Ge(Aa,t),Ge(Zn,n))}function Hf(t){Aa.current===t&&(Xe(Zn),Xe(Aa))}var rt=yi(0);function Fc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rd=[];function Gf(){for(var t=0;t<Rd.length;t++)Rd[t]._workInProgressVersionPrimary=null;Rd.length=0}var ic=Tr.ReactCurrentDispatcher,Dd=Tr.ReactCurrentBatchConfig,Ki=0,it=null,kt=null,St=null,Bc=!1,aa=!1,Ra=0,m_=0;function Lt(){throw Error(ie(321))}function Kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Un(t[n],e[n]))return!1;return!0}function Qf(t,e,n,r,i,o){if(Ki=o,it=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ic.current=t===null||t.memoizedState===null?y_:v_,t=n(r,i),aa){o=0;do{if(aa=!1,Ra=0,25<=o)throw Error(ie(301));o+=1,St=kt=null,e.updateQueue=null,ic.current=b_,t=n(r,i)}while(aa)}if(ic.current=Uc,e=kt!==null&&kt.next!==null,Ki=0,St=kt=it=null,Bc=!1,e)throw Error(ie(300));return t}function Yf(){var t=Ra!==0;return Ra=0,t}function Qn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?it.memoizedState=St=t:St=St.next=t,St}function Tn(){if(kt===null){var t=it.alternate;t=t!==null?t.memoizedState:null}else t=kt.next;var e=St===null?it.memoizedState:St.next;if(e!==null)St=e,kt=t;else{if(t===null)throw Error(ie(310));kt=t,t={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},St===null?it.memoizedState=St=t:St=St.next=t}return St}function Da(t,e){return typeof e=="function"?e(t):e}function Md(t){var e=Tn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=kt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=a=null,c=null,d=o;do{var h=d.lane;if((Ki&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=m,a=r):c=c.next=m,it.lanes|=h,Qi|=h}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=l,Un(r,e.memoizedState)||(sn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,it.lanes|=o,Qi|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Vd(t){var e=Tn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Un(o,e.memoizedState)||(sn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Zb(){}function ew(t,e){var n=it,r=Tn(),i=e(),o=!Un(r.memoizedState,i);if(o&&(r.memoizedState=i,sn=!0),r=r.queue,Xf(rw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||St!==null&&St.memoizedState.tag&1){if(n.flags|=2048,Ma(9,nw.bind(null,n,r,i,e),void 0,null),Et===null)throw Error(ie(349));Ki&30||tw(n,e,i)}return i}function tw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function nw(t,e,n,r){e.value=n,e.getSnapshot=r,iw(e)&&sw(t)}function rw(t,e,n){return n(function(){iw(e)&&sw(t)})}function iw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Un(t,n)}catch{return!0}}function sw(t){var e=br(t,1);e!==null&&Bn(e,t,1,-1)}function ux(t){var e=Qn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Da,lastRenderedState:t},e.queue=t,t=t.dispatch=x_.bind(null,it,t),[e.memoizedState,t]}function Ma(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=it.updateQueue,e===null?(e={lastEffect:null,stores:null},it.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ow(){return Tn().memoizedState}function sc(t,e,n,r){var i=Qn();it.flags|=t,i.memoizedState=Ma(1|e,n,void 0,r===void 0?null:r)}function ju(t,e,n,r){var i=Tn();r=r===void 0?null:r;var o=void 0;if(kt!==null){var a=kt.memoizedState;if(o=a.destroy,r!==null&&Kf(r,a.deps)){i.memoizedState=Ma(e,n,o,r);return}}it.flags|=t,i.memoizedState=Ma(1|e,n,o,r)}function dx(t,e){return sc(8390656,8,t,e)}function Xf(t,e){return ju(2048,8,t,e)}function aw(t,e){return ju(4,2,t,e)}function lw(t,e){return ju(4,4,t,e)}function cw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uw(t,e,n){return n=n!=null?n.concat([t]):null,ju(4,4,cw.bind(null,e,t),n)}function Jf(){}function dw(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hw(t,e){var n=Tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function fw(t,e,n){return Ki&21?(Un(n,e)||(n=yb(),it.lanes|=n,Qi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,sn=!0),t.memoizedState=n)}function p_(t,e){var n=Oe;Oe=n!==0&&4>n?n:4,t(!0);var r=Dd.transition;Dd.transition={};try{t(!1),e()}finally{Oe=n,Dd.transition=r}}function mw(){return Tn().memoizedState}function g_(t,e,n){var r=ei(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pw(t))gw(e,n);else if(n=Yb(t,e,n,r),n!==null){var i=Yt();Bn(n,t,r,i),xw(n,e,r)}}function x_(t,e,n){var r=ei(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pw(t))gw(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(i.hasEagerState=!0,i.eagerState=l,Un(l,a)){var c=e.interleaved;c===null?(i.next=i,$f(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Yb(t,e,i,r),n!==null&&(i=Yt(),Bn(n,t,r,i),xw(n,e,r))}}function pw(t){var e=t.alternate;return t===it||e!==null&&e===it}function gw(t,e){aa=Bc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ef(t,n)}}var Uc={readContext:En,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},y_={readContext:En,useCallback:function(t,e){return Qn().memoizedState=[t,e===void 0?null:e],t},useContext:En,useEffect:dx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sc(4194308,4,cw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sc(4194308,4,t,e)},useInsertionEffect:function(t,e){return sc(4,2,t,e)},useMemo:function(t,e){var n=Qn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=g_.bind(null,it,t),[r.memoizedState,t]},useRef:function(t){var e=Qn();return t={current:t},e.memoizedState=t},useState:ux,useDebugValue:Jf,useDeferredValue:function(t){return Qn().memoizedState=t},useTransition:function(){var t=ux(!1),e=t[0];return t=p_.bind(null,t[1]),Qn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=it,i=Qn();if(et){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),Et===null)throw Error(ie(349));Ki&30||tw(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,dx(rw.bind(null,r,o,t),[t]),r.flags|=2048,Ma(9,nw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Qn(),e=Et.identifierPrefix;if(et){var n=pr,r=mr;n=(r&~(1<<32-Fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ra++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=m_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},v_={readContext:En,useCallback:dw,useContext:En,useEffect:Xf,useImperativeHandle:uw,useInsertionEffect:aw,useLayoutEffect:lw,useMemo:hw,useReducer:Md,useRef:ow,useState:function(){return Md(Da)},useDebugValue:Jf,useDeferredValue:function(t){var e=Tn();return fw(e,kt.memoizedState,t)},useTransition:function(){var t=Md(Da)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Zb,useSyncExternalStore:ew,useId:mw,unstable_isNewReconciler:!1},b_={readContext:En,useCallback:dw,useContext:En,useEffect:Xf,useImperativeHandle:uw,useInsertionEffect:aw,useLayoutEffect:lw,useMemo:hw,useReducer:Vd,useRef:ow,useState:function(){return Vd(Da)},useDebugValue:Jf,useDeferredValue:function(t){var e=Tn();return kt===null?e.memoizedState=t:fw(e,kt.memoizedState,t)},useTransition:function(){var t=Vd(Da)[0],e=Tn().memoizedState;return[t,e]},useMutableSource:Zb,useSyncExternalStore:ew,useId:mw,unstable_isNewReconciler:!1};function Mn(t,e){if(t&&t.defaultProps){e=st({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function e0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:st({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nu={isMounted:function(t){return(t=t._reactInternals)?rs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ei(t),o=gr(r,i);o.payload=e,n!=null&&(o.callback=n),e=Jr(t,o,i),e!==null&&(Bn(e,t,i,r),rc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),i=ei(t),o=gr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Jr(t,o,i),e!==null&&(Bn(e,t,i,r),rc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=ei(t),i=gr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jr(t,i,r),e!==null&&(Bn(e,t,r,n),rc(e,t,r))}};function hx(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Sa(n,r)||!Sa(i,o):!0}function yw(t,e,n){var r=!1,i=ai,o=e.contextType;return typeof o=="object"&&o!==null?o=En(o):(i=ln(e)?Hi:Wt.current,r=e.contextTypes,o=(r=r!=null)?Qs(t,i):ai),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function fx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nu.enqueueReplaceState(e,e.state,null)}function t0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Wf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=En(o):(o=ln(e)?Hi:Wt.current,i.context=Qs(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(e0(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Nu.enqueueReplaceState(i,i.state,null),Oc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=KN(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Ld(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function n0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var w_=typeof WeakMap=="function"?WeakMap:Map;function vw(t,e,n){n=gr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wc||(Wc=!0,h0=r),n0(t,e)},n}function bw(t,e,n){n=gr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){n0(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){n0(t,e),typeof r!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function mx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new w_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=D_.bind(null,t,e,n),e.then(t,t))}function px(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function gx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=gr(-1,1),e.tag=2,Jr(n,e,1))),n.lanes|=1),t)}var k_=Tr.ReactCurrentOwner,sn=!1;function Gt(t,e,n,r){e.child=t===null?Qb(e,null,n,r):Xs(e,t.child,n,r)}function xx(t,e,n,r,i){n=n.render;var o=e.ref;return Bs(e,i),r=Qf(t,e,n,r,o,i),n=Yf(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(et&&n&&Vf(e),e.flags|=1,Gt(t,e,r,i),e.child)}function yx(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!om(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,ww(t,e,o,r,i)):(t=cc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Sa,n(a,r)&&t.ref===e.ref)return wr(t,e,i)}return e.flags|=1,t=ti(o,r),t.ref=e.ref,t.return=e,e.child=t}function ww(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Sa(o,r)&&t.ref===e.ref)if(sn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(sn=!0);else return e.lanes=t.lanes,wr(t,e,i)}return r0(t,e,n,r,i)}function kw(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Is,dn),dn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ge(Is,dn),dn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Ge(Is,dn),dn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Ge(Is,dn),dn|=r;return Gt(t,e,i,n),e.child}function jw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function r0(t,e,n,r,i){var o=ln(n)?Hi:Wt.current;return o=Qs(e,o),Bs(e,i),n=Qf(t,e,n,r,o,i),r=Yf(),t!==null&&!sn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,wr(t,e,i)):(et&&r&&Vf(e),e.flags|=1,Gt(t,e,n,i),e.child)}function vx(t,e,n,r,i){if(ln(n)){var o=!0;Rc(e)}else o=!1;if(Bs(e,i),e.stateNode===null)oc(t,e),yw(e,n,r),t0(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=En(d):(d=ln(n)?Hi:Wt.current,d=Qs(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&fx(e,a,r,d),Ur=!1;var f=e.memoizedState;a.state=f,Oc(e,r,a,i),c=e.memoizedState,l!==r||f!==c||an.current||Ur?(typeof h=="function"&&(e0(e,n,h,r),c=e.memoizedState),(l=Ur||hx(e,n,l,r,f,c,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Xb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Mn(e.type,l),a.props=d,m=e.pendingProps,f=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=En(c):(c=ln(n)?Hi:Wt.current,c=Qs(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==m||f!==c)&&fx(e,a,r,c),Ur=!1,f=e.memoizedState,a.state=f,Oc(e,r,a,i);var N=e.memoizedState;l!==m||f!==N||an.current||Ur?(typeof y=="function"&&(e0(e,n,y,r),N=e.memoizedState),(d=Ur||hx(e,n,d,r,f,N,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return i0(t,e,n,r,o,i)}function i0(t,e,n,r,i,o){jw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&ix(e,n,!1),wr(t,e,o);r=e.stateNode,k_.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Xs(e,t.child,null,o),e.child=Xs(e,null,l,o)):Gt(t,e,l,o),e.memoizedState=r.state,i&&ix(e,n,!0),e.child}function Nw(t){var e=t.stateNode;e.pendingContext?rx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&rx(t,e.context,!1),qf(t,e.containerInfo)}function bx(t,e,n,r,i){return Ys(),Of(i),e.flags|=256,Gt(t,e,n,r),e.child}var s0={dehydrated:null,treeContext:null,retryLane:0};function o0(t){return{baseLanes:t,cachePool:null,transitions:null}}function _w(t,e,n){var r=e.pendingProps,i=rt.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ge(rt,i&1),t===null)return Jh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Cu(a,r,0,null),t=Ui(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=o0(n),e.memoizedState=s0,t):Zf(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return j_(t,e,a,r,l,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ti(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=ti(l,o):(o=Ui(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?o0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=s0,r}return o=t.child,t=o.sibling,r=ti(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zf(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&Of(r),Xs(e,t.child,null,n),t=Zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function j_(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Ld(Error(ie(422))),Vl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Cu({mode:"visible",children:r.children},i,0,null),o=Ui(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Xs(e,t.child,null,a),e.child.memoizedState=o0(a),e.memoizedState=s0,o);if(!(e.mode&1))return Vl(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ie(419)),r=Ld(o,r,void 0),Vl(t,e,a,r)}if(l=(a&t.childLanes)!==0,sn||l){if(r=Et,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,br(t,i),Bn(r,t,i,-1))}return sm(),r=Ld(Error(ie(421))),Vl(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=M_.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,hn=Xr(i.nextSibling),fn=e,et=!0,Ln=null,t!==null&&(bn[wn++]=mr,bn[wn++]=pr,bn[wn++]=Gi,mr=t.id,pr=t.overflow,Gi=e),e=Zf(e,r.children),e.flags|=4096,e)}function wx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zh(t.return,e,n)}function Od(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Gt(t,e,r.children,n),r=rt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&wx(t,n,e);else if(t.tag===19)wx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ge(rt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Fc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Od(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Fc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Od(e,!0,n,null,o);break;case"together":Od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function wr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=ti(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ti(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function N_(t,e,n){switch(e.tag){case 3:Nw(e),Ys();break;case 5:Jb(e);break;case 1:ln(e.type)&&Rc(e);break;case 4:qf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ge(Vc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ge(rt,rt.current&1),e.flags|=128,null):n&e.child.childLanes?_w(t,e,n):(Ge(rt,rt.current&1),t=wr(t,e,n),t!==null?t.sibling:null);Ge(rt,rt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return zw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ge(rt,rt.current),r)break;return null;case 22:case 23:return e.lanes=0,kw(t,e,n)}return wr(t,e,n)}var Cw,a0,Sw,Ew;Cw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};a0=function(){};Sw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Mi(Zn.current);var o=null;switch(n){case"input":i=Eh(t,i),r=Eh(t,r),o=[];break;case"select":i=st({},i,{value:void 0}),r=st({},r,{value:void 0}),o=[];break;case"textarea":i=Ah(t,i),r=Ah(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ac)}Rh(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(wa.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(wa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Qe("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Ew=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bo(t,e){if(!et)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function __(t,e,n){var r=e.pendingProps;switch(Lf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return ln(e.type)&&Pc(),Ot(e),null;case 3:return r=e.stateNode,Js(),Xe(an),Xe(Wt),Gf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Dl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ln!==null&&(p0(Ln),Ln=null))),a0(t,e),Ot(e),null;case 5:Hf(e);var i=Mi(Pa.current);if(n=e.type,t!==null&&e.stateNode!=null)Sw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Ot(e),null}if(t=Mi(Zn.current),Dl(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Xn]=e,r[Ia]=o,t=(e.mode&1)!==0,n){case"dialog":Qe("cancel",r),Qe("close",r);break;case"iframe":case"object":case"embed":Qe("load",r);break;case"video":case"audio":for(i=0;i<Yo.length;i++)Qe(Yo[i],r);break;case"source":Qe("error",r);break;case"img":case"image":case"link":Qe("error",r),Qe("load",r);break;case"details":Qe("toggle",r);break;case"input":Tg(r,o),Qe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Qe("invalid",r);break;case"textarea":Ag(r,o),Qe("invalid",r)}Rh(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Rl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Rl(r.textContent,l,t),i=["children",""+l]):wa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Qe("scroll",r)}switch(n){case"input":zl(r),Ig(r,o,!0);break;case"textarea":zl(r),Pg(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Ac)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Xn]=e,t[Ia]=r,Cw(t,e,!1,!1),e.stateNode=t;e:{switch(a=Dh(n,r),n){case"dialog":Qe("cancel",t),Qe("close",t),i=r;break;case"iframe":case"object":case"embed":Qe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Yo.length;i++)Qe(Yo[i],t);i=r;break;case"source":Qe("error",t),i=r;break;case"img":case"image":case"link":Qe("error",t),Qe("load",t),i=r;break;case"details":Qe("toggle",t),i=r;break;case"input":Tg(t,r),i=Eh(t,r),Qe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=st({},r,{value:void 0}),Qe("invalid",t);break;case"textarea":Ag(t,r),i=Ah(t,r),Qe("invalid",t);break;default:i=r}Rh(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?ob(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ib(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ka(t,c):typeof c=="number"&&ka(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(wa.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Qe("scroll",t):c!=null&&jf(t,o,c,a))}switch(n){case"input":zl(t),Ig(t,r,!1);break;case"textarea":zl(t),Pg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vs(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ac)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)Ew(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Mi(Pa.current),Mi(Zn.current),Dl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Xn]=e,(o=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:Rl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Xn]=e,e.stateNode=r}return Ot(e),null;case 13:if(Xe(rt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(et&&hn!==null&&e.mode&1&&!(e.flags&128))Gb(),Ys(),e.flags|=98560,o=!1;else if(o=Dl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ie(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ie(317));o[Xn]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),o=!1}else Ln!==null&&(p0(Ln),Ln=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||rt.current&1?jt===0&&(jt=3):sm())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Js(),a0(t,e),t===null&&Ea(e.stateNode.containerInfo),Ot(e),null;case 10:return Uf(e.type._context),Ot(e),null;case 17:return ln(e.type)&&Pc(),Ot(e),null;case 19:if(Xe(rt),o=e.memoizedState,o===null)return Ot(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Bo(o,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Fc(t),a!==null){for(e.flags|=128,Bo(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ge(rt,rt.current&1|2),e.child}t=t.sibling}o.tail!==null&&ht()>eo&&(e.flags|=128,r=!0,Bo(o,!1),e.lanes=4194304)}else{if(!r)if(t=Fc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!et)return Ot(e),null}else 2*ht()-o.renderingStartTime>eo&&n!==1073741824&&(e.flags|=128,r=!0,Bo(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ht(),e.sibling=null,n=rt.current,Ge(rt,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return im(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?dn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function z_(t,e){switch(Lf(e),e.tag){case 1:return ln(e.type)&&Pc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),Xe(an),Xe(Wt),Gf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hf(e),null;case 13:if(Xe(rt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(rt),null;case 4:return Js(),null;case 10:return Uf(e.type._context),null;case 22:case 23:return im(),null;case 24:return null;default:return null}}var Ll=!1,Ut=!1,C_=typeof WeakSet=="function"?WeakSet:Set,fe=null;function Ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ct(t,e,r)}else n.current=null}function l0(t,e,n){try{n()}catch(r){ct(t,e,r)}}var kx=!1;function S_(t,e){if(qh=Ec,t=Rb(),Mf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,m=t,f=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(l=a+i),m!==o||r!==0&&m.nodeType!==3||(c=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(y=m.firstChild)!==null;)f=m,m=y;for(;;){if(m===t)break t;if(f===n&&++d===i&&(l=a),f===o&&++h===r&&(c=a),(y=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hh={focusedElem:t,selectionRange:n},Ec=!1,fe=e;fe!==null;)if(e=fe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,fe=t;else for(;fe!==null;){e=fe;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var I=N.memoizedProps,P=N.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?I:Mn(e.type,I),P);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(R){ct(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,fe=t;break}fe=e.return}return N=kx,kx=!1,N}function la(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&l0(e,n,o)}i=i.next}while(i!==r)}}function _u(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function c0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Tw(t){var e=t.alternate;e!==null&&(t.alternate=null,Tw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xn],delete e[Ia],delete e[Qh],delete e[u_],delete e[d_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Iw(t){return t.tag===5||t.tag===3||t.tag===4}function jx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Iw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function u0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ac));else if(r!==4&&(t=t.child,t!==null))for(u0(t,e,n),t=t.sibling;t!==null;)u0(t,e,n),t=t.sibling}function d0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(d0(t,e,n),t=t.sibling;t!==null;)d0(t,e,n),t=t.sibling}var Tt=null,Vn=!1;function Or(t,e,n){for(n=n.child;n!==null;)Aw(t,e,n),n=n.sibling}function Aw(t,e,n){if(Jn&&typeof Jn.onCommitFiberUnmount=="function")try{Jn.onCommitFiberUnmount(xu,n)}catch{}switch(n.tag){case 5:Ut||Ts(n,e);case 6:var r=Tt,i=Vn;Tt=null,Or(t,e,n),Tt=r,Vn=i,Tt!==null&&(Vn?(t=Tt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Tt.removeChild(n.stateNode));break;case 18:Tt!==null&&(Vn?(t=Tt,n=n.stateNode,t.nodeType===8?Ad(t.parentNode,n):t.nodeType===1&&Ad(t,n),za(t)):Ad(Tt,n.stateNode));break;case 4:r=Tt,i=Vn,Tt=n.stateNode.containerInfo,Vn=!0,Or(t,e,n),Tt=r,Vn=i;break;case 0:case 11:case 14:case 15:if(!Ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&l0(n,e,a),i=i.next}while(i!==r)}Or(t,e,n);break;case 1:if(!Ut&&(Ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ct(n,e,l)}Or(t,e,n);break;case 21:Or(t,e,n);break;case 22:n.mode&1?(Ut=(r=Ut)||n.memoizedState!==null,Or(t,e,n),Ut=r):Or(t,e,n);break;default:Or(t,e,n)}}function Nx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new C_),e.forEach(function(r){var i=V_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function In(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Tt=l.stateNode,Vn=!1;break e;case 3:Tt=l.stateNode.containerInfo,Vn=!0;break e;case 4:Tt=l.stateNode.containerInfo,Vn=!0;break e}l=l.return}if(Tt===null)throw Error(ie(160));Aw(o,a,i),Tt=null,Vn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){ct(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Pw(e,t),e=e.sibling}function Pw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(In(e,t),Gn(t),r&4){try{la(3,t,t.return),_u(3,t)}catch(I){ct(t,t.return,I)}try{la(5,t,t.return)}catch(I){ct(t,t.return,I)}}break;case 1:In(e,t),Gn(t),r&512&&n!==null&&Ts(n,n.return);break;case 5:if(In(e,t),Gn(t),r&512&&n!==null&&Ts(n,n.return),t.flags&32){var i=t.stateNode;try{ka(i,"")}catch(I){ct(t,t.return,I)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&tb(i,o),Dh(l,a);var d=Dh(l,o);for(a=0;a<c.length;a+=2){var h=c[a],m=c[a+1];h==="style"?ob(i,m):h==="dangerouslySetInnerHTML"?ib(i,m):h==="children"?ka(i,m):jf(i,h,m,d)}switch(l){case"input":Th(i,o);break;case"textarea":nb(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?Vs(i,!!o.multiple,y,!1):f!==!!o.multiple&&(o.defaultValue!=null?Vs(i,!!o.multiple,o.defaultValue,!0):Vs(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ia]=o}catch(I){ct(t,t.return,I)}}break;case 6:if(In(e,t),Gn(t),r&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(I){ct(t,t.return,I)}}break;case 3:if(In(e,t),Gn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{za(e.containerInfo)}catch(I){ct(t,t.return,I)}break;case 4:In(e,t),Gn(t);break;case 13:In(e,t),Gn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(nm=ht())),r&4&&Nx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ut=(d=Ut)||h,In(e,t),Ut=d):In(e,t),Gn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(fe=t,h=t.child;h!==null;){for(m=fe=h;fe!==null;){switch(f=fe,y=f.child,f.tag){case 0:case 11:case 14:case 15:la(4,f,f.return);break;case 1:Ts(f,f.return);var N=f.stateNode;if(typeof N.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(I){ct(r,n,I)}}break;case 5:Ts(f,f.return);break;case 22:if(f.memoizedState!==null){zx(m);continue}}y!==null?(y.return=f,fe=y):zx(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=m.stateNode,c=m.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=sb("display",a))}catch(I){ct(t,t.return,I)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(I){ct(t,t.return,I)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:In(e,t),Gn(t),r&4&&Nx(t);break;case 21:break;default:In(e,t),Gn(t)}}function Gn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Iw(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ka(i,""),r.flags&=-33);var o=jx(t);d0(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=jx(t);u0(t,l,a);break;default:throw Error(ie(161))}}catch(c){ct(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function E_(t,e,n){fe=t,Rw(t)}function Rw(t,e,n){for(var r=(t.mode&1)!==0;fe!==null;){var i=fe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ll;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ut;l=Ll;var d=Ut;if(Ll=a,(Ut=c)&&!d)for(fe=i;fe!==null;)a=fe,c=a.child,a.tag===22&&a.memoizedState!==null?Cx(i):c!==null?(c.return=a,fe=c):Cx(i);for(;o!==null;)fe=o,Rw(o),o=o.sibling;fe=i,Ll=l,Ut=d}_x(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,fe=o):_x(t)}}function _x(t){for(;fe!==null;){var e=fe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ut||_u(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ut)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Mn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&cx(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}cx(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&za(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Ut||e.flags&512&&c0(e)}catch(f){ct(e,e.return,f)}}if(e===t){fe=null;break}if(n=e.sibling,n!==null){n.return=e.return,fe=n;break}fe=e.return}}function zx(t){for(;fe!==null;){var e=fe;if(e===t){fe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,fe=n;break}fe=e.return}}function Cx(t){for(;fe!==null;){var e=fe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_u(4,e)}catch(c){ct(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ct(e,i,c)}}var o=e.return;try{c0(e)}catch(c){ct(e,o,c)}break;case 5:var a=e.return;try{c0(e)}catch(c){ct(e,a,c)}}}catch(c){ct(e,e.return,c)}if(e===t){fe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,fe=l;break}fe=e.return}}var T_=Math.ceil,$c=Tr.ReactCurrentDispatcher,em=Tr.ReactCurrentOwner,zn=Tr.ReactCurrentBatchConfig,Me=0,Et=null,gt=null,Dt=0,dn=0,Is=yi(0),jt=0,Va=null,Qi=0,zu=0,tm=0,ca=null,rn=null,nm=0,eo=1/0,dr=null,Wc=!1,h0=null,Zr=null,Ol=!1,Hr=null,qc=0,ua=0,f0=null,ac=-1,lc=0;function Yt(){return Me&6?ht():ac!==-1?ac:ac=ht()}function ei(t){return t.mode&1?Me&2&&Dt!==0?Dt&-Dt:f_.transition!==null?(lc===0&&(lc=yb()),lc):(t=Oe,t!==0||(t=window.event,t=t===void 0?16:_b(t.type)),t):1}function Bn(t,e,n,r){if(50<ua)throw ua=0,f0=null,Error(ie(185));Za(t,n,r),(!(Me&2)||t!==Et)&&(t===Et&&(!(Me&2)&&(zu|=n),jt===4&&Wr(t,Dt)),cn(t,r),n===1&&Me===0&&!(e.mode&1)&&(eo=ht()+500,ku&&vi()))}function cn(t,e){var n=t.callbackNode;f4(t,e);var r=Sc(t,t===Et?Dt:0);if(r===0)n!==null&&Mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Mg(n),e===1)t.tag===0?h_(Sx.bind(null,t)):Wb(Sx.bind(null,t)),l_(function(){!(Me&6)&&vi()}),n=null;else{switch(vb(r)){case 1:n=Sf;break;case 4:n=gb;break;case 16:n=Cc;break;case 536870912:n=xb;break;default:n=Cc}n=Uw(n,Dw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Dw(t,e){if(ac=-1,lc=0,Me&6)throw Error(ie(327));var n=t.callbackNode;if(Us()&&t.callbackNode!==n)return null;var r=Sc(t,t===Et?Dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Hc(t,r);else{e=r;var i=Me;Me|=2;var o=Vw();(Et!==t||Dt!==e)&&(dr=null,eo=ht()+500,Bi(t,e));do try{P_();break}catch(l){Mw(t,l)}while(!0);Bf(),$c.current=o,Me=i,gt!==null?e=0:(Et=null,Dt=0,e=jt)}if(e!==0){if(e===2&&(i=Fh(t),i!==0&&(r=i,e=m0(t,i))),e===1)throw n=Va,Bi(t,0),Wr(t,r),cn(t,ht()),n;if(e===6)Wr(t,r);else{if(i=t.current.alternate,!(r&30)&&!I_(i)&&(e=Hc(t,r),e===2&&(o=Fh(t),o!==0&&(r=o,e=m0(t,o))),e===1))throw n=Va,Bi(t,0),Wr(t,r),cn(t,ht()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Ti(t,rn,dr);break;case 3:if(Wr(t,r),(r&130023424)===r&&(e=nm+500-ht(),10<e)){if(Sc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Kh(Ti.bind(null,t,rn,dr),e);break}Ti(t,rn,dr);break;case 4:if(Wr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Fn(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=ht()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T_(r/1960))-r,10<r){t.timeoutHandle=Kh(Ti.bind(null,t,rn,dr),r);break}Ti(t,rn,dr);break;case 5:Ti(t,rn,dr);break;default:throw Error(ie(329))}}}return cn(t,ht()),t.callbackNode===n?Dw.bind(null,t):null}function m0(t,e){var n=ca;return t.current.memoizedState.isDehydrated&&(Bi(t,e).flags|=256),t=Hc(t,e),t!==2&&(e=rn,rn=n,e!==null&&p0(e)),t}function p0(t){rn===null?rn=t:rn.push.apply(rn,t)}function I_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Un(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Wr(t,e){for(e&=~tm,e&=~zu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),r=1<<n;t[n]=-1,e&=~r}}function Sx(t){if(Me&6)throw Error(ie(327));Us();var e=Sc(t,0);if(!(e&1))return cn(t,ht()),null;var n=Hc(t,e);if(t.tag!==0&&n===2){var r=Fh(t);r!==0&&(e=r,n=m0(t,r))}if(n===1)throw n=Va,Bi(t,0),Wr(t,e),cn(t,ht()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ti(t,rn,dr),cn(t,ht()),null}function rm(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(eo=ht()+500,ku&&vi())}}function Yi(t){Hr!==null&&Hr.tag===0&&!(Me&6)&&Us();var e=Me;Me|=1;var n=zn.transition,r=Oe;try{if(zn.transition=null,Oe=1,t)return t()}finally{Oe=r,zn.transition=n,Me=e,!(Me&6)&&vi()}}function im(){dn=Is.current,Xe(Is)}function Bi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,a_(n)),gt!==null)for(n=gt.return;n!==null;){var r=n;switch(Lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pc();break;case 3:Js(),Xe(an),Xe(Wt),Gf();break;case 5:Hf(r);break;case 4:Js();break;case 13:Xe(rt);break;case 19:Xe(rt);break;case 10:Uf(r.type._context);break;case 22:case 23:im()}n=n.return}if(Et=t,gt=t=ti(t.current,null),Dt=dn=e,jt=0,Va=null,tm=zu=Qi=0,rn=ca=null,Di!==null){for(e=0;e<Di.length;e++)if(n=Di[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Di=null}return t}function Mw(t,e){do{var n=gt;try{if(Bf(),ic.current=Uc,Bc){for(var r=it.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Bc=!1}if(Ki=0,St=kt=it=null,aa=!1,Ra=0,em.current=null,n===null||n.return===null){jt=1,Va=e,gt=null;break}e:{var o=t,a=n.return,l=n,c=e;if(e=Dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=px(a);if(y!==null){y.flags&=-257,gx(y,a,l,o,e),y.mode&1&&mx(o,d,e),e=y,c=d;var N=e.updateQueue;if(N===null){var I=new Set;I.add(c),e.updateQueue=I}else N.add(c);break e}else{if(!(e&1)){mx(o,d,e),sm();break e}c=Error(ie(426))}}else if(et&&l.mode&1){var P=px(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),gx(P,a,l,o,e),Of(Zs(c,l));break e}}o=c=Zs(c,l),jt!==4&&(jt=2),ca===null?ca=[o]:ca.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=vw(o,c,e);lx(o,w);break e;case 1:l=c;var b=o.type,k=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Zr===null||!Zr.has(k)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=bw(o,l,e);lx(o,R);break e}}o=o.return}while(o!==null)}Ow(n)}catch(M){e=M,gt===n&&n!==null&&(gt=n=n.return);continue}break}while(!0)}function Vw(){var t=$c.current;return $c.current=Uc,t===null?Uc:t}function sm(){(jt===0||jt===3||jt===2)&&(jt=4),Et===null||!(Qi&268435455)&&!(zu&268435455)||Wr(Et,Dt)}function Hc(t,e){var n=Me;Me|=2;var r=Vw();(Et!==t||Dt!==e)&&(dr=null,Bi(t,e));do try{A_();break}catch(i){Mw(t,i)}while(!0);if(Bf(),Me=n,$c.current=r,gt!==null)throw Error(ie(261));return Et=null,Dt=0,jt}function A_(){for(;gt!==null;)Lw(gt)}function P_(){for(;gt!==null&&!i4();)Lw(gt)}function Lw(t){var e=Bw(t.alternate,t,dn);t.memoizedProps=t.pendingProps,e===null?Ow(t):gt=e,em.current=null}function Ow(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z_(n,e),n!==null){n.flags&=32767,gt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,gt=null;return}}else if(n=__(n,e,dn),n!==null){gt=n;return}if(e=e.sibling,e!==null){gt=e;return}gt=e=t}while(e!==null);jt===0&&(jt=5)}function Ti(t,e,n){var r=Oe,i=zn.transition;try{zn.transition=null,Oe=1,R_(t,e,n,r)}finally{zn.transition=i,Oe=r}return null}function R_(t,e,n,r){do Us();while(Hr!==null);if(Me&6)throw Error(ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(m4(t,o),t===Et&&(gt=Et=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ol||(Ol=!0,Uw(Cc,function(){return Us(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=zn.transition,zn.transition=null;var a=Oe;Oe=1;var l=Me;Me|=4,em.current=null,S_(t,n),Pw(n,t),e_(Hh),Ec=!!qh,Hh=qh=null,t.current=n,E_(n),s4(),Me=l,Oe=a,zn.transition=o}else t.current=n;if(Ol&&(Ol=!1,Hr=t,qc=i),o=t.pendingLanes,o===0&&(Zr=null),l4(n.stateNode),cn(t,ht()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wc)throw Wc=!1,t=h0,h0=null,t;return qc&1&&t.tag!==0&&Us(),o=t.pendingLanes,o&1?t===f0?ua++:(ua=0,f0=t):ua=0,vi(),null}function Us(){if(Hr!==null){var t=vb(qc),e=zn.transition,n=Oe;try{if(zn.transition=null,Oe=16>t?16:t,Hr===null)var r=!1;else{if(t=Hr,Hr=null,qc=0,Me&6)throw Error(ie(331));var i=Me;for(Me|=4,fe=t.current;fe!==null;){var o=fe,a=o.child;if(fe.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(fe=d;fe!==null;){var h=fe;switch(h.tag){case 0:case 11:case 15:la(8,h,o)}var m=h.child;if(m!==null)m.return=h,fe=m;else for(;fe!==null;){h=fe;var f=h.sibling,y=h.return;if(Tw(h),h===d){fe=null;break}if(f!==null){f.return=y,fe=f;break}fe=y}}}var N=o.alternate;if(N!==null){var I=N.child;if(I!==null){N.child=null;do{var P=I.sibling;I.sibling=null,I=P}while(I!==null)}}fe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,fe=a;else e:for(;fe!==null;){if(o=fe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:la(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,fe=w;break e}fe=o.return}}var b=t.current;for(fe=b;fe!==null;){a=fe;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,fe=k;else e:for(a=b;fe!==null;){if(l=fe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_u(9,l)}}catch(M){ct(l,l.return,M)}if(l===a){fe=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,fe=R;break e}fe=l.return}}if(Me=i,vi(),Jn&&typeof Jn.onPostCommitFiberRoot=="function")try{Jn.onPostCommitFiberRoot(xu,t)}catch{}r=!0}return r}finally{Oe=n,zn.transition=e}}return!1}function Ex(t,e,n){e=Zs(n,e),e=vw(t,e,1),t=Jr(t,e,1),e=Yt(),t!==null&&(Za(t,1,e),cn(t,e))}function ct(t,e,n){if(t.tag===3)Ex(t,t,n);else for(;e!==null;){if(e.tag===3){Ex(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zr===null||!Zr.has(r))){t=Zs(n,t),t=bw(e,t,1),e=Jr(e,t,1),t=Yt(),e!==null&&(Za(e,1,t),cn(e,t));break}}e=e.return}}function D_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,Et===t&&(Dt&n)===n&&(jt===4||jt===3&&(Dt&130023424)===Dt&&500>ht()-nm?Bi(t,0):tm|=n),cn(t,e)}function Fw(t,e){e===0&&(t.mode&1?(e=El,El<<=1,!(El&130023424)&&(El=4194304)):e=1);var n=Yt();t=br(t,e),t!==null&&(Za(t,e,n),cn(t,n))}function M_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fw(t,n)}function V_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),Fw(t,n)}var Bw;Bw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)sn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return sn=!1,N_(t,e,n);sn=!!(t.flags&131072)}else sn=!1,et&&e.flags&1048576&&qb(e,Mc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oc(t,e),t=e.pendingProps;var i=Qs(e,Wt.current);Bs(e,n),i=Qf(null,e,r,t,i,n);var o=Yf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(o=!0,Rc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Wf(e),i.updater=Nu,e.stateNode=i,i._reactInternals=e,t0(e,r,t,n),e=i0(null,e,r,!0,o,n)):(e.tag=0,et&&o&&Vf(e),Gt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=O_(r),t=Mn(r,t),i){case 0:e=r0(null,e,r,t,n);break e;case 1:e=vx(null,e,r,t,n);break e;case 11:e=xx(null,e,r,t,n);break e;case 14:e=yx(null,e,r,Mn(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),r0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),vx(t,e,r,i,n);case 3:e:{if(Nw(e),t===null)throw Error(ie(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Xb(t,e),Oc(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Zs(Error(ie(423)),e),e=bx(t,e,r,n,i);break e}else if(r!==i){i=Zs(Error(ie(424)),e),e=bx(t,e,r,n,i);break e}else for(hn=Xr(e.stateNode.containerInfo.firstChild),fn=e,et=!0,Ln=null,n=Qb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===i){e=wr(t,e,n);break e}Gt(t,e,r,n)}e=e.child}return e;case 5:return Jb(e),t===null&&Jh(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Gh(r,i)?a=null:o!==null&&Gh(r,o)&&(e.flags|=32),jw(t,e),Gt(t,e,a,n),e.child;case 6:return t===null&&Jh(e),null;case 13:return _w(t,e,n);case 4:return qf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):Gt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),xx(t,e,r,i,n);case 7:return Gt(t,e,e.pendingProps,n),e.child;case 8:return Gt(t,e,e.pendingProps.children,n),e.child;case 12:return Gt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Ge(Vc,r._currentValue),r._currentValue=a,o!==null)if(Un(o.value,a)){if(o.children===i.children&&!an.current){e=wr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=gr(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Zh(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ie(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Zh(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Gt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bs(e,n),i=En(i),r=r(i),e.flags|=1,Gt(t,e,r,n),e.child;case 14:return r=e.type,i=Mn(r,e.pendingProps),i=Mn(r.type,i),yx(t,e,r,i,n);case 15:return ww(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Mn(r,i),oc(t,e),e.tag=1,ln(r)?(t=!0,Rc(e)):t=!1,Bs(e,n),yw(e,r,i),t0(e,r,i,n),i0(null,e,r,!0,t,n);case 19:return zw(t,e,n);case 22:return kw(t,e,n)}throw Error(ie(156,e.tag))};function Uw(t,e){return pb(t,e)}function L_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new L_(t,e,n,r)}function om(t){return t=t.prototype,!(!t||!t.isReactComponent)}function O_(t){if(typeof t=="function")return om(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_f)return 11;if(t===zf)return 14}return 2}function ti(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cc(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")om(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ws:return Ui(n.children,i,o,e);case Nf:a=8,i|=8;break;case _h:return t=Nn(12,n,e,i|2),t.elementType=_h,t.lanes=o,t;case zh:return t=Nn(13,n,e,i),t.elementType=zh,t.lanes=o,t;case Ch:return t=Nn(19,n,e,i),t.elementType=Ch,t.lanes=o,t;case J1:return Cu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Y1:a=10;break e;case X1:a=9;break e;case _f:a=11;break e;case zf:a=14;break e;case Br:a=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=Nn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ui(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=J1,t.lanes=n,t.stateNode={isHidden:!1},t}function Fd(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function Bd(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function am(t,e,n,r,i,o,a,l,c){return t=new F_(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Nn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wf(o),t}function B_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function $w(t){if(!t)return ai;t=t._reactInternals;e:{if(rs(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(ln(n))return $b(t,n,e)}return e}function Ww(t,e,n,r,i,o,a,l,c){return t=am(n,r,!0,t,i,o,a,l,c),t.context=$w(null),n=t.current,r=Yt(),i=ei(n),o=gr(r,i),o.callback=e??null,Jr(n,o,i),t.current.lanes=i,Za(t,i,r),cn(t,r),t}function Su(t,e,n,r){var i=e.current,o=Yt(),a=ei(i);return n=$w(n),e.context===null?e.context=n:e.pendingContext=n,e=gr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jr(i,e,a),t!==null&&(Bn(t,i,a,o),rc(t,i,a)),a}function Gc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lm(t,e){Tx(t,e),(t=t.alternate)&&Tx(t,e)}function U_(){return null}var qw=typeof reportError=="function"?reportError:function(t){console.error(t)};function cm(t){this._internalRoot=t}Eu.prototype.render=cm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));Su(t,e,null,null)};Eu.prototype.unmount=cm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Yi(function(){Su(null,t,null,null)}),e[vr]=null}};function Eu(t){this._internalRoot=t}Eu.prototype.unstable_scheduleHydration=function(t){if(t){var e=kb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<$r.length&&e!==0&&e<$r[n].priority;n++);$r.splice(n,0,t),n===0&&Nb(t)}};function um(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Tu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ix(){}function $_(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Gc(a);o.call(d)}}var a=Ww(e,r,t,0,null,!1,!1,"",Ix);return t._reactRootContainer=a,t[vr]=a.current,Ea(t.nodeType===8?t.parentNode:t),Yi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Gc(c);l.call(d)}}var c=am(t,0,!1,null,null,!1,!1,"",Ix);return t._reactRootContainer=c,t[vr]=c.current,Ea(t.nodeType===8?t.parentNode:t),Yi(function(){Su(e,c,n,r)}),c}function Iu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var l=i;i=function(){var c=Gc(a);l.call(c)}}Su(e,a,t,i)}else a=$_(n,e,t,i,r);return Gc(a)}bb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qo(e.pendingLanes);n!==0&&(Ef(e,n|1),cn(e,ht()),!(Me&6)&&(eo=ht()+500,vi()))}break;case 13:Yi(function(){var r=br(t,1);if(r!==null){var i=Yt();Bn(r,t,1,i)}}),lm(t,1)}};Tf=function(t){if(t.tag===13){var e=br(t,134217728);if(e!==null){var n=Yt();Bn(e,t,134217728,n)}lm(t,134217728)}};wb=function(t){if(t.tag===13){var e=ei(t),n=br(t,e);if(n!==null){var r=Yt();Bn(n,t,e,r)}lm(t,e)}};kb=function(){return Oe};jb=function(t,e){var n=Oe;try{return Oe=t,e()}finally{Oe=n}};Vh=function(t,e,n){switch(e){case"input":if(Th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wu(r);if(!i)throw Error(ie(90));eb(r),Th(r,i)}}}break;case"textarea":nb(t,n);break;case"select":e=n.value,e!=null&&Vs(t,!!n.multiple,e,!1)}};cb=rm;ub=Yi;var W_={usingClientEntryPoint:!1,Events:[tl,_s,wu,ab,lb,rm]},Uo={findFiberByHostInstance:Ri,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},q_={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=fb(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||U_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{xu=Fl.inject(q_),Jn=Fl}catch{}}gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W_;gn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!um(e))throw Error(ie(200));return B_(t,e,null,n)};gn.createRoot=function(t,e){if(!um(t))throw Error(ie(299));var n=!1,r="",i=qw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=am(t,1,!1,null,null,n,!1,r,i),t[vr]=e.current,Ea(t.nodeType===8?t.parentNode:t),new cm(e)};gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=fb(e),t=t===null?null:t.stateNode,t};gn.flushSync=function(t){return Yi(t)};gn.hydrate=function(t,e,n){if(!Tu(e))throw Error(ie(200));return Iu(null,t,e,!0,n)};gn.hydrateRoot=function(t,e,n){if(!um(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=qw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Ww(e,null,t,1,n??null,i,!1,o,a),t[vr]=e.current,Ea(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Eu(e)};gn.render=function(t,e,n){if(!Tu(e))throw Error(ie(200));return Iu(null,t,e,!1,n)};gn.unmountComponentAtNode=function(t){if(!Tu(t))throw Error(ie(40));return t._reactRootContainer?(Yi(function(){Iu(null,null,t,!1,function(){t._reactRootContainer=null,t[vr]=null})}),!0):!1};gn.unstable_batchedUpdates=rm;gn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Tu(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Iu(t,e,n,!1,r)};gn.version="18.3.1-next-f1338f8080-20240426";function Hw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hw)}catch(t){console.error(t)}}Hw(),H1.exports=gn;var Ze=H1.exports,Ax=Ze;jh.createRoot=Ax.createRoot,jh.hydrateRoot=Ax.hydrateRoot;const dm=j.createContext({});function bi(t){const e=j.useRef(null);return e.current===null&&(e.current=t()),e.current}const hm=typeof window<"u",fm=hm?j.useLayoutEffect:j.useEffect,Au=j.createContext(null);function mm(t,e){t.indexOf(e)===-1&&t.push(e)}function pm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function H_([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(i,0,o)}return t}const kr=(t,e,n)=>n>e?e:n<t?t:n;let gm=()=>{};const jr={},Gw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Kw(t){return typeof t=="object"&&t!==null}const Qw=t=>/^0[^.\s]+$/u.test(t);function xm(t){let e;return()=>(e===void 0&&(e=t()),e)}const Cn=t=>t,G_=(t,e)=>n=>e(t(n)),rl=(...t)=>t.reduce(G_),La=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class ym{constructor(){this.subscriptions=[]}add(e){return mm(this.subscriptions,e),()=>pm(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const er=t=>t*1e3,_n=t=>t/1e3;function Yw(t,e){return e?t*(1e3/e):0}const Xw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,K_=1e-7,Q_=12;function Y_(t,e,n,r,i){let o,a,l=0;do a=e+(n-e)/2,o=Xw(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>K_&&++l<Q_);return a}function il(t,e,n,r){if(t===e&&n===r)return Cn;const i=o=>Y_(o,0,1,t,n);return o=>o===0||o===1?o:Xw(i(o),e,r)}const Jw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Zw=t=>e=>1-t(1-e),e2=il(.33,1.53,.69,.99),vm=Zw(e2),t2=Jw(vm),n2=t=>(t*=2)<1?.5*vm(t):.5*(2-Math.pow(2,-10*(t-1))),bm=t=>1-Math.sin(Math.acos(t)),r2=Zw(bm),i2=Jw(bm),X_=il(.42,0,1,1),J_=il(0,0,.58,1),s2=il(.42,0,.58,1),Z_=t=>Array.isArray(t)&&typeof t[0]!="number",o2=t=>Array.isArray(t)&&typeof t[0]=="number",ez={linear:Cn,easeIn:X_,easeInOut:s2,easeOut:J_,circIn:bm,circInOut:i2,circOut:r2,backIn:vm,backInOut:t2,backOut:e2,anticipate:n2},tz=t=>typeof t=="string",Px=t=>{if(o2(t)){gm(t.length===4);const[e,n,r,i]=t;return il(e,n,r,i)}else if(tz(t))return ez[t];return t},Bl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function nz(t,e){let n=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,m=!1,f=!1)=>{const N=f&&i?n:r;return m&&a.add(h),N.has(h)||N.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(l=h,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,o&&(o=!1,d.process(h))}};return d}const rz=40;function a2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Bl.reduce((k,R)=>(k[R]=nz(o),k),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:m,preRender:f,render:y,postRender:N}=a,I=()=>{const k=jr.useManualTiming?i.timestamp:performance.now();n=!1,jr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,rz),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),m.process(i),f.process(i),y.process(i),N.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(I))},P=()=>{n=!0,r=!0,i.isProcessing||t(I)};return{schedule:Bl.reduce((k,R)=>{const M=a[R];return k[R]=(L,v=!1,x=!1)=>(n||P(),M.schedule(L,v,x)),k},{}),cancel:k=>{for(let R=0;R<Bl.length;R++)a[Bl[R]].cancel(k)},state:i,steps:a}}const{schedule:Je,cancel:Nr,state:It,steps:Ud}=a2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cn,!0);let uc;function iz(){uc=void 0}const on={now:()=>(uc===void 0&&on.set(It.isProcessing||jr.useManualTiming?It.timestamp:performance.now()),uc),set:t=>{uc=t,queueMicrotask(iz)}},l2=t=>e=>typeof e=="string"&&e.startsWith(t),c2=l2("--"),sz=l2("var(--"),wm=t=>sz(t)?oz.test(t.split("/*")[0].trim()):!1,oz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Oa={...fo,transform:t=>kr(0,1,t)},Ul={...fo,default:1},da=t=>Math.round(t*1e5)/1e5,km=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function az(t){return t==null}const lz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jm=(t,e)=>n=>!!(typeof n=="string"&&lz.test(n)&&n.startsWith(t)||e&&!az(n)&&Object.prototype.hasOwnProperty.call(n,e)),u2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,l]=r.match(km);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},cz=t=>kr(0,255,t),$d={...fo,transform:t=>Math.round(cz(t))},Vi={test:jm("rgb","red"),parse:u2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+$d.transform(t)+", "+$d.transform(e)+", "+$d.transform(n)+", "+da(Oa.transform(r))+")"};function uz(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const g0={test:jm("#"),parse:uz,transform:Vi.transform},sl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Fr=sl("deg"),tr=sl("%"),ke=sl("px"),dz=sl("vh"),hz=sl("vw"),Rx={...tr,parse:t=>tr.parse(t)/100,transform:t=>tr.transform(t*100)},As={test:jm("hsl","hue"),parse:u2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+tr.transform(da(e))+", "+tr.transform(da(n))+", "+da(Oa.transform(r))+")"},pt={test:t=>Vi.test(t)||g0.test(t)||As.test(t),parse:t=>Vi.test(t)?Vi.parse(t):As.test(t)?As.parse(t):g0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Vi.transform(t):As.transform(t),getAnimatableNone:t=>{const e=pt.parse(t);return e.alpha=0,pt.transform(e)}},fz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function mz(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(km))==null?void 0:e.length)||0)+(((n=t.match(fz))==null?void 0:n.length)||0)>0}const d2="number",h2="color",pz="var",gz="var(",Dx="${}",xz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Fa(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const l=e.replace(xz,c=>(pt.test(c)?(r.color.push(o),i.push(h2),n.push(pt.parse(c))):c.startsWith(gz)?(r.var.push(o),i.push(pz),n.push(c)):(r.number.push(o),i.push(d2),n.push(parseFloat(c))),++o,Dx)).split(Dx);return{values:n,split:l,indexes:r,types:i}}function f2(t){return Fa(t).values}function m2(t){const{split:e,types:n}=Fa(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const l=n[a];l===d2?o+=da(i[a]):l===h2?o+=pt.transform(i[a]):o+=i[a]}return o}}const yz=t=>typeof t=="number"?0:pt.test(t)?pt.getAnimatableNone(t):t;function vz(t){const e=f2(t);return m2(t)(e.map(yz))}const li={test:mz,parse:f2,createTransformer:m2,getAnimatableNone:vz};function Wd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function bz({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=Wd(c,l,t+1/3),o=Wd(c,l,t),a=Wd(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Kc(t,e){return n=>n>0?e:t}const tt=(t,e,n)=>t+(e-t)*n,qd=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},wz=[g0,Vi,As],kz=t=>wz.find(e=>e.test(t));function Mx(t){const e=kz(t);if(!e)return!1;let n=e.parse(t);return e===As&&(n=bz(n)),n}const Vx=(t,e)=>{const n=Mx(t),r=Mx(e);if(!n||!r)return Kc(t,e);const i={...n};return o=>(i.red=qd(n.red,r.red,o),i.green=qd(n.green,r.green,o),i.blue=qd(n.blue,r.blue,o),i.alpha=tt(n.alpha,r.alpha,o),Vi.transform(i))},x0=new Set(["none","hidden"]);function jz(t,e){return x0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Nz(t,e){return n=>tt(t,e,n)}function Nm(t){return typeof t=="number"?Nz:typeof t=="string"?wm(t)?Kc:pt.test(t)?Vx:Cz:Array.isArray(t)?p2:typeof t=="object"?pt.test(t)?Vx:_z:Kc}function p2(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>Nm(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function _z(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Nm(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function zz(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][r[o]],l=t.values[a]??0;n[i]=l,r[o]++}return n}const Cz=(t,e)=>{const n=li.createTransformer(e),r=Fa(t),i=Fa(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?x0.has(t)&&!i.values.length||x0.has(e)&&!r.values.length?jz(t,e):rl(p2(zz(r,i),i.values),n):Kc(t,e)};function g2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?tt(t,e,n):Nm(t)(t,e)}const Sz=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Je.update(e,n),stop:()=>Nr(e),now:()=>It.isProcessing?It.timestamp:on.now()}},x2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Qc=2e4;function _m(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Qc;)e+=n,r=t.next(e);return e>=Qc?1/0:e}function Ez(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(_m(r),Qc);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:_n(i)}}const Tz=5;function y2(t,e,n){const r=Math.max(e-Tz,0);return Yw(n-t(r),e-r)}const lt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hd=.001;function Iz({duration:t=lt.duration,bounce:e=lt.bounce,velocity:n=lt.velocity,mass:r=lt.mass}){let i,o,a=1-e;a=kr(lt.minDamping,lt.maxDamping,a),t=kr(lt.minDuration,lt.maxDuration,_n(t)),a<1?(i=d=>{const h=d*a,m=h*t,f=h-n,y=y0(d,a),N=Math.exp(-m);return Hd-f/y*N},o=d=>{const m=d*a*t,f=m*n+n,y=Math.pow(a,2)*Math.pow(d,2)*t,N=Math.exp(-m),I=y0(Math.pow(d,2),a);return(-i(d)+Hd>0?-1:1)*((f-y)*N)/I}):(i=d=>{const h=Math.exp(-d*t),m=(d-n)*t+1;return-Hd+h*m},o=d=>{const h=Math.exp(-d*t),m=(n-d)*(t*t);return h*m});const l=5/t,c=Pz(i,o,l);if(t=er(t),isNaN(c))return{stiffness:lt.stiffness,damping:lt.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const Az=12;function Pz(t,e,n){let r=n;for(let i=1;i<Az;i++)r=r-t(r)/e(r);return r}function y0(t,e){return t*Math.sqrt(1-e*e)}const Rz=["duration","bounce"],Dz=["stiffness","damping","mass"];function Lx(t,e){return e.some(n=>t[n]!==void 0)}function Mz(t){let e={velocity:lt.velocity,stiffness:lt.stiffness,damping:lt.damping,mass:lt.mass,isResolvedFromDuration:!1,...t};if(!Lx(t,Dz)&&Lx(t,Rz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*kr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:lt.mass,stiffness:i,damping:o}}else{const n=Iz(t);e={...e,...n,mass:lt.mass},e.isResolvedFromDuration=!0}return e}function Yc(t=lt.visualDuration,e=lt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:d,mass:h,duration:m,velocity:f,isResolvedFromDuration:y}=Mz({...n,velocity:-_n(n.velocity||0)}),N=f||0,I=d/(2*Math.sqrt(c*h)),P=a-o,w=_n(Math.sqrt(c/h)),b=Math.abs(P)<5;r||(r=b?lt.restSpeed.granular:lt.restSpeed.default),i||(i=b?lt.restDelta.granular:lt.restDelta.default);let k;if(I<1){const M=y0(w,I);k=L=>{const v=Math.exp(-I*w*L);return a-v*((N+I*w*P)/M*Math.sin(M*L)+P*Math.cos(M*L))}}else if(I===1)k=M=>a-Math.exp(-w*M)*(P+(N+w*P)*M);else{const M=w*Math.sqrt(I*I-1);k=L=>{const v=Math.exp(-I*w*L),x=Math.min(M*L,300);return a-v*((N+I*w*P)*Math.sinh(x)+M*P*Math.cosh(x))/M}}const R={calculatedDuration:y&&m||null,next:M=>{const L=k(M);if(y)l.done=M>=m;else{let v=M===0?N:0;I<1&&(v=M===0?er(N):y2(k,M,L));const x=Math.abs(v)<=r,_=Math.abs(a-L)<=i;l.done=x&&_}return l.value=l.done?a:L,l},toString:()=>{const M=Math.min(_m(R),Qc),L=x2(v=>R.next(M*v).value,M,30);return M+"ms "+L},toTransition:()=>{}};return R}Yc.applyToOptions=t=>{const e=Ez(t,100,Yc);return t.ease=e.ease,t.duration=er(e.duration),t.type="keyframes",t};function v0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:h}){const m=t[0],f={done:!1,value:m},y=x=>l!==void 0&&x<l||c!==void 0&&x>c,N=x=>l===void 0?c:c===void 0||Math.abs(l-x)<Math.abs(c-x)?l:c;let I=n*e;const P=m+I,w=a===void 0?P:a(P);w!==P&&(I=w-m);const b=x=>-I*Math.exp(-x/r),k=x=>w+b(x),R=x=>{const _=b(x),C=k(x);f.done=Math.abs(_)<=d,f.value=f.done?w:C};let M,L;const v=x=>{y(f.value)&&(M=x,L=Yc({keyframes:[f.value,N(f.value)],velocity:y2(k,x,f.value),damping:i,stiffness:o,restDelta:d,restSpeed:h}))};return v(0),{calculatedDuration:null,next:x=>{let _=!1;return!L&&M===void 0&&(_=!0,R(x),v(x)),M!==void 0&&x>=M?L.next(x-M):(!_&&R(x),f)}}}function Vz(t,e,n){const r=[],i=n||jr.mix||g2,o=t.length-1;for(let a=0;a<o;a++){let l=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Cn:e;l=rl(c,l)}r.push(l)}return r}function v2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(gm(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Vz(e,r,i),c=l.length,d=h=>{if(a&&h<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const f=La(t[m],t[m+1],h);return l[m](f)};return n?h=>d(kr(t[0],t[o-1],h)):d}function Lz(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=La(0,e,r);t.push(tt(n,1,i))}}function Oz(t){const e=[0];return Lz(e,t.length-1),e}function Fz(t,e){return t.map(n=>n*e)}function Bz(t,e){return t.map(()=>e||s2).splice(0,t.length-1)}function ha({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Z_(r)?r.map(Px):Px(r),o={done:!1,value:e[0]},a=Fz(n&&n.length===e.length?n:Oz(e),t),l=v2(a,e,{ease:Array.isArray(i)?i:Bz(e,i)});return{calculatedDuration:t,next:c=>(o.value=l(c),o.done=c>=t,o)}}const Uz=t=>t!==null;function zm(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(Uz),l=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const $z={decay:v0,inertia:v0,tween:ha,keyframes:ha,spring:Yc};function b2(t){typeof t.type=="string"&&(t.type=$z[t.type])}class Cm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Wz=t=>t/100;class Sm extends Cm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==on.now()&&this.tick(on.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;b2(e);const{type:n=ha,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=e;let{keyframes:l}=e;const c=n||ha;c!==ha&&typeof l[0]!="number"&&(this.mixKeyframes=rl(Wz,g2(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=_m(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:m,repeatType:f,repeatDelay:y,type:N,onUpdate:I,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-d*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,R=r;if(m){const x=Math.min(this.currentTime,i)/l;let _=Math.floor(x),C=x%1;!C&&x>=1&&(C=1),C===1&&_--,_=Math.min(_,m+1),!!(_%2)&&(f==="reverse"?(C=1-C,y&&(C-=y/l)):f==="mirror"&&(R=a)),k=kr(0,1,C)*l}const M=b?{done:!1,value:h[0]}:R.next(k);o&&(M.value=o(M.value));let{done:L}=M;!b&&c!==null&&(L=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const v=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return v&&N!==v0&&(M.value=zm(h,this.options,P,this.speed)),I&&I(M.value),v&&this.finish(),M}then(e,n){return this.finished.then(e,n)}get duration(){return _n(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_n(e)}get time(){return _n(this.currentTime)}set time(e){var n;e=er(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(on.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=_n(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=Sz,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(on.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function qz(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Li=t=>t*180/Math.PI,b0=t=>{const e=Li(Math.atan2(t[1],t[0]));return w0(e)},Hz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:b0,rotateZ:b0,skewX:t=>Li(Math.atan(t[1])),skewY:t=>Li(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},w0=t=>(t=t%360,t<0&&(t+=360),t),Ox=b0,Fx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Bx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Gz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Fx,scaleY:Bx,scale:t=>(Fx(t)+Bx(t))/2,rotateX:t=>w0(Li(Math.atan2(t[6],t[5]))),rotateY:t=>w0(Li(Math.atan2(-t[2],t[0]))),rotateZ:Ox,rotate:Ox,skewX:t=>Li(Math.atan(t[4])),skewY:t=>Li(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function k0(t){return t.includes("scale")?1:0}function j0(t,e){if(!t||t==="none")return k0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Gz,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Hz,i=l}if(!i)return k0(e);const o=r[e],a=i[1].split(",").map(Qz);return typeof o=="function"?o(a):a[o]}const Kz=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return j0(n,e)};function Qz(t){return parseFloat(t.trim())}const mo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=new Set(mo),Ux=t=>t===fo||t===ke,Yz=new Set(["x","y","z"]),Xz=mo.filter(t=>!Yz.has(t));function Jz(t){const e=[];return Xz.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const $i={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>j0(e,"x"),y:(t,{transform:e})=>j0(e,"y")};$i.translateX=$i.x;$i.translateY=$i.y;const Wi=new Set;let N0=!1,_0=!1,z0=!1;function w2(){if(_0){const t=Array.from(Wi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Jz(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var l;(l=r.getValue(o))==null||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_0=!1,N0=!1,Wi.forEach(t=>t.complete(z0)),Wi.clear()}function k2(){Wi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_0=!0)})}function Zz(){z0=!0,k2(),w2(),z0=!1}class Em{constructor(e,n,r,i,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Wi.add(this),N0||(N0=!0,Je.read(k2),Je.resolveKeyframes(w2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}qz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Wi.delete(this)}cancel(){this.state==="scheduled"&&(Wi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const eC=t=>t.startsWith("--");function tC(t,e,n){eC(e)?t.style.setProperty(e,n):t.style[e]=n}const nC=xm(()=>window.ScrollTimeline!==void 0),rC={};function iC(t,e){const n=xm(t);return()=>rC[e]??n()}const j2=iC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Xo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,$x={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Xo([0,.65,.55,1]),circOut:Xo([.55,0,1,.45]),backIn:Xo([.31,.01,.66,-.59]),backOut:Xo([.33,1.53,.69,.99])};function N2(t,e){if(t)return typeof t=="function"?j2()?x2(t,e):"ease-out":o2(t)?Xo(t):Array.isArray(t)?t.map(n=>N2(n,e)||$x.easeOut):$x[t]}function sC(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const m=N2(l,i);Array.isArray(m)&&(h.easing=m);const f={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return d&&(f.pseudoElement=d),t.animate(h,f)}function _2(t){return typeof t=="function"&&"applyToOptions"in t}function oC({type:t,...e}){return _2(t)&&j2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class aC extends Cm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,gm(typeof e.type!="string");const d=oC(e);this.animation=sC(n,r,i,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=zm(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):tC(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return _n(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+_n(e)}get time(){return _n(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=er(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&nC()?(this.animation.timeline=e,Cn):n(this)}}const z2={anticipate:n2,backInOut:t2,circInOut:i2};function lC(t){return t in z2}function cC(t){typeof t.ease=="string"&&lC(t.ease)&&(t.ease=z2[t.ease])}const Wx=10;class uC extends aC{constructor(e){cC(e),b2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Sm({...a,autoplay:!1}),c=er(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Wx).value,l.sample(c).value,Wx),l.stop()}}const qx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(li.test(t)||t==="0")&&!t.startsWith("url("));function dC(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function hC(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=qx(i,e),l=qx(o,e);return!a||!l?!1:dC(t)||(n==="spring"||_2(n))&&r}function C0(t){t.duration=0,t.type="keyframes"}const fC=new Set(["opacity","clipPath","filter","transform"]),mC=xm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function pC(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return mC()&&n&&fC.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}const gC=40;class xC extends Cm{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:d,element:h,...m}){var N;super(),this.stop=()=>{var I,P;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=on.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,name:c,motionValue:d,element:h,...m},y=(h==null?void 0:h.KeyframeResolver)||Em;this.keyframeResolver=new y(l,(I,P,w)=>this.onKeyframesResolved(I,P,f,!w),c,d,h),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=on.now(),hC(e,o,a,l)||((jr.instantAnimations||!c)&&(h==null||h(zm(e,r,n))),e[0]=e[e.length-1],C0(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>gC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!d&&pC(f)?new uC({...f,element:f.motionValue.owner.current}):new Sm(f);y.finished.then(()=>this.notifyFinished()).catch(Cn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Zz()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const yC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vC(t){const e=yC.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function C2(t,e,n=1){const[r,i]=vC(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return Gw(a)?parseFloat(a):a}return wm(i)?C2(i,e,n+1):i}function Tm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const S2=new Set(["width","height","top","left","right","bottom",...mo]),bC={test:t=>t==="auto",parse:t=>t},E2=t=>e=>e.test(t),T2=[fo,ke,tr,Fr,hz,dz,bC],Hx=t=>T2.find(E2(t));function wC(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Qw(t):!0}const kC=new Set(["brightness","contrast","saturate","opacity"]);function jC(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(km)||[];if(!r)return t;const i=n.replace(r,"");let o=kC.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const NC=/\b([a-z-]*)\(.*?\)/gu,S0={...li,getAnimatableNone:t=>{const e=t.match(NC);return e?e.map(jC).join(" "):t}},Gx={...fo,transform:Math.round},_C={rotate:Fr,rotateX:Fr,rotateY:Fr,rotateZ:Fr,scale:Ul,scaleX:Ul,scaleY:Ul,scaleZ:Ul,skew:Fr,skewX:Fr,skewY:Fr,distance:ke,translateX:ke,translateY:ke,translateZ:ke,x:ke,y:ke,z:ke,perspective:ke,transformPerspective:ke,opacity:Oa,originX:Rx,originY:Rx,originZ:ke},Im={borderWidth:ke,borderTopWidth:ke,borderRightWidth:ke,borderBottomWidth:ke,borderLeftWidth:ke,borderRadius:ke,radius:ke,borderTopLeftRadius:ke,borderTopRightRadius:ke,borderBottomRightRadius:ke,borderBottomLeftRadius:ke,width:ke,maxWidth:ke,height:ke,maxHeight:ke,top:ke,right:ke,bottom:ke,left:ke,padding:ke,paddingTop:ke,paddingRight:ke,paddingBottom:ke,paddingLeft:ke,margin:ke,marginTop:ke,marginRight:ke,marginBottom:ke,marginLeft:ke,backgroundPositionX:ke,backgroundPositionY:ke,..._C,zIndex:Gx,fillOpacity:Oa,strokeOpacity:Oa,numOctaves:Gx},zC={...Im,color:pt,backgroundColor:pt,outlineColor:pt,fill:pt,stroke:pt,borderColor:pt,borderTopColor:pt,borderRightColor:pt,borderBottomColor:pt,borderLeftColor:pt,filter:S0,WebkitFilter:S0},I2=t=>zC[t];function A2(t,e){let n=I2(t);return n!==S0&&(n=li),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const CC=new Set(["auto","none","0"]);function SC(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!CC.has(o)&&Fa(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=A2(n,i)}class EC extends Em{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),wm(d))){const h=C2(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!S2.has(r)||e.length!==2)return;const[i,o]=e,a=Hx(i),l=Hx(o);if(a!==l)if(Ux(a)&&Ux(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else $i[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||wC(e[i]))&&r.push(i);r.length&&SC(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$i[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=$i[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function TC(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const P2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function R2(t){return Kw(t)&&"offsetHeight"in t}const Kx=30,IC=t=>!isNaN(parseFloat(t)),fa={current:void 0};class AC{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=on.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=on.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=IC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ym);const r=this.events[e].add(n);return e==="change"?()=>{r(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return fa.current&&fa.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=on.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Kx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Kx);return Yw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Xi(t,e){return new AC(t,e)}const{schedule:Am}=a2(queueMicrotask,!1),Dn={x:!1,y:!1};function D2(){return Dn.x||Dn.y}function PC(t){return t==="x"||t==="y"?Dn[t]?null:(Dn[t]=!0,()=>{Dn[t]=!1}):Dn.x||Dn.y?null:(Dn.x=Dn.y=!0,()=>{Dn.x=Dn.y=!1})}function M2(t,e){const n=TC(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Qx(t){return!(t.pointerType==="touch"||D2())}function RC(t,e,n={}){const[r,i,o]=M2(t,n),a=l=>{if(!Qx(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=m=>{Qx(m)&&(d(m),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",a,i)}),o}const V2=(t,e)=>e?t===e?!0:V2(t,e.parentElement):!1,Pm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,DC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function MC(t){return DC.has(t.tagName)||t.tabIndex!==-1}const dc=new WeakSet;function Yx(t){return e=>{e.key==="Enter"&&t(e)}}function Gd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const VC=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Yx(()=>{if(dc.has(n))return;Gd(n,"down");const i=Yx(()=>{Gd(n,"up")}),o=()=>Gd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Xx(t){return Pm(t)&&!D2()}function LC(t,e,n={}){const[r,i,o]=M2(t,n),a=l=>{const c=l.currentTarget;if(!Xx(l))return;dc.add(c);const d=e(c,l),h=(y,N)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",f),dc.has(c)&&dc.delete(c),Xx(y)&&typeof d=="function"&&d(y,{success:N})},m=y=>{h(y,c===window||c===document||n.useGlobalTarget||V2(c,y.target))},f=y=>{h(y,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",f,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,i),R2(l)&&(l.addEventListener("focus",d=>VC(d,i)),!MC(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function L2(t){return Kw(t)&&"ownerSVGElement"in t}function OC(t){return L2(t)&&t.tagName==="svg"}function FC(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],o=t[2+n],a=t[3+n],l=v2(i,o,a);return e?l(r):l}const Rt=t=>!!(t&&t.getVelocity),BC=[...T2,pt,li],UC=t=>BC.find(E2(t)),Pu=j.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Jx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function $C(...t){return e=>{let n=!1;const r=t.map(i=>{const o=Jx(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():Jx(t[i],null)}}}}function WC(...t){return j.useCallback($C(...t),t)}class qC extends j.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=R2(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function HC({children:t,isPresent:e,anchorX:n,root:r}){const i=j.useId(),o=j.useRef(null),a=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=j.useContext(Pu),c=WC(o,t==null?void 0:t.ref);return j.useInsertionEffect(()=>{const{width:d,height:h,top:m,left:f,right:y}=a.current;if(e||!o.current||!d||!h)return;const N=n==="left"?`left: ${f}`:`right: ${y}`;o.current.dataset.motionPopId=i;const I=document.createElement("style");l&&(I.nonce=l);const P=r??document.head;return P.appendChild(I),I.sheet&&I.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${N}px !important;
            top: ${m}px !important;
          }
        `),()=>{P.contains(I)&&P.removeChild(I)}},[e]),s.jsx(qC,{isPresent:e,childRef:o,sizeRef:a,children:j.cloneElement(t,{ref:c})})}const GC=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:l,root:c})=>{const d=bi(KC),h=j.useId();let m=!0,f=j.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const N of d.values())if(!N)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return o&&m&&(f={...f}),j.useMemo(()=>{d.forEach((y,N)=>d.set(N,!1))},[n]),j.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),a==="popLayout"&&(t=s.jsx(HC,{isPresent:n,anchorX:l,root:c,children:t})),s.jsx(Au.Provider,{value:f,children:t})};function KC(){return new Map}function O2(t=!0){const e=j.useContext(Au);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=j.useId();j.useEffect(()=>{if(t)return i(o)},[t]);const a=j.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const $l=t=>t.key||"";function Zx(t){const e=[];return j.Children.forEach(t,n=>{j.isValidElement(n)&&e.push(n)}),e}const Ne=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[d,h]=O2(a),m=j.useMemo(()=>Zx(t),[t]),f=a&&!d?[]:m.map($l),y=j.useRef(!0),N=j.useRef(m),I=bi(()=>new Map),[P,w]=j.useState(m),[b,k]=j.useState(m);fm(()=>{y.current=!1,N.current=m;for(let L=0;L<b.length;L++){const v=$l(b[L]);f.includes(v)?I.delete(v):I.get(v)!==!0&&I.set(v,!1)}},[b,f.length,f.join("-")]);const R=[];if(m!==P){let L=[...m];for(let v=0;v<b.length;v++){const x=b[v],_=$l(x);f.includes(_)||(L.splice(v,0,x),R.push(x))}return o==="wait"&&R.length&&(L=R),k(Zx(L)),w(m),null}const{forceRender:M}=j.useContext(dm);return s.jsx(s.Fragment,{children:b.map(L=>{const v=$l(L),x=a&&!d?!1:m===b||f.includes(v),_=()=>{if(I.has(v))I.set(v,!0);else return;let C=!0;I.forEach(z=>{z||(C=!1)}),C&&(M==null||M(),k(N.current),a&&(h==null||h()),r&&r())};return s.jsx(GC,{isPresent:x,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:c,onExitComplete:x?void 0:_,anchorX:l,children:L},v)})})},F2=j.createContext({strict:!1}),ey={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},to={};for(const t in ey)to[t]={isEnabled:e=>ey[t].some(n=>!!e[n])};function QC(t){for(const e in t)to[e]={...to[e],...t[e]}}const YC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Xc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||YC.has(t)}let B2=t=>!Xc(t);function XC(t){typeof t=="function"&&(B2=e=>e.startsWith("on")?!Xc(e):t(e))}try{XC(require("@emotion/is-prop-valid").default)}catch{}function JC(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(B2(i)||n===!0&&Xc(i)||!e&&!Xc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Ru=j.createContext({});function Du(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ba(t){return typeof t=="string"||Array.isArray(t)}const Rm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Dm=["initial",...Rm];function Mu(t){return Du(t.animate)||Dm.some(e=>Ba(t[e]))}function U2(t){return!!(Mu(t)||t.variants)}function ZC(t,e){if(Mu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ba(n)?n:void 0,animate:Ba(r)?r:void 0}}return t.inherit!==!1?e:{}}function eS(t){const{initial:e,animate:n}=ZC(t,j.useContext(Ru));return j.useMemo(()=>({initial:e,animate:n}),[ty(e),ty(n)])}function ty(t){return Array.isArray(t)?t.join(" "):t}function ny(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $o={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ke.test(t))t=parseFloat(t);else return t;const n=ny(t,e.target.x),r=ny(t,e.target.y);return`${n}% ${r}%`}},tS={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=li.parse(t);if(i.length>5)return r;const o=li.createTransformer(t),a=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=l,i[1+a]/=c;const d=tt(l,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),o(i)}},E0={borderRadius:{...$o,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$o,borderTopRightRadius:$o,borderBottomLeftRadius:$o,borderBottomRightRadius:$o,boxShadow:tS};function $2(t,{layout:e,layoutId:n}){return po.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!E0[t]||t==="opacity")}const nS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rS=mo.length;function iS(t,e,n){let r="",i=!0;for(let o=0;o<rS;o++){const a=mo[o],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=P2(l,Im[a]);if(!c){i=!1;const h=nS[a]||a;r+=`${h}(${d}) `}n&&(e[a]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Mm(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,l=!1;for(const c in e){const d=e[c];if(po.has(c)){a=!0;continue}else if(c2(c)){i[c]=d;continue}else{const h=P2(d,Im[c]);c.startsWith("origin")?(l=!0,o[c]=h):r[c]=h}}if(e.transform||(a||n?r.transform=iS(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=o;r.transformOrigin=`${c} ${d} ${h}`}}const Vm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function W2(t,e,n){for(const r in e)!Rt(e[r])&&!$2(r,n)&&(t[r]=e[r])}function sS({transformTemplate:t},e){return j.useMemo(()=>{const n=Vm();return Mm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function oS(t,e){const n=t.style||{},r={};return W2(r,n,t),Object.assign(r,sS(t,e)),r}function aS(t,e){const n={},r=oS(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const lS={offset:"stroke-dashoffset",array:"stroke-dasharray"},cS={offset:"strokeDashoffset",array:"strokeDasharray"};function uS(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?lS:cS;t[o.offset]=ke.transform(-r);const a=ke.transform(e),l=ke.transform(n);t[o.array]=`${a} ${l}`}function q2(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...l},c,d,h){if(Mm(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:f}=t;m.transform&&(f.transform=m.transform,delete m.transform),(f.transform||m.transformOrigin)&&(f.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),f.transform&&(f.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&uS(m,i,o,a,!1)}const H2=()=>({...Vm(),attrs:{}}),G2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function dS(t,e,n,r){const i=j.useMemo(()=>{const o=H2();return q2(o,e,G2(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};W2(o,t.style,t),i.style={...o,...i.style}}return i}const hS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Lm(t){return typeof t!="string"||t.includes("-")?!1:!!(hS.indexOf(t)>-1||/[A-Z]/u.test(t))}function fS(t,e,n,{latestValues:r},i,o=!1){const l=(Lm(t)?dS:aS)(e,r,i,t),c=JC(e,typeof t=="string",o),d=t!==j.Fragment?{...c,...l,ref:n}:{},{children:h}=e,m=j.useMemo(()=>Rt(h)?h.get():h,[h]);return j.createElement(t,{...d,children:m})}function ry(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Om(t,e,n,r){if(typeof e=="function"){const[i,o]=ry(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=ry(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function hc(t){return Rt(t)?t.get():t}function mS({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:pS(n,r,i,t),renderState:e()}}function pS(t,e,n,r){const i={},o=r(t,{});for(const f in o)i[f]=hc(o[f]);let{initial:a,animate:l}=t;const c=Mu(t),d=U2(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const m=h?l:a;if(m&&typeof m!="boolean"&&!Du(m)){const f=Array.isArray(m)?m:[m];for(let y=0;y<f.length;y++){const N=Om(t,f[y]);if(N){const{transitionEnd:I,transition:P,...w}=N;for(const b in w){let k=w[b];if(Array.isArray(k)){const R=h?k.length-1:0;k=k[R]}k!==null&&(i[b]=k)}for(const b in I)i[b]=I[b]}}}return i}const K2=t=>(e,n)=>{const r=j.useContext(Ru),i=j.useContext(Au),o=()=>mS(t,e,r,i);return n?o():bi(o)};function Fm(t,e,n){var o;const{style:r}=t,i={};for(const a in r)(Rt(r[a])||e.style&&Rt(e.style[a])||$2(a,t)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const gS=K2({scrapeMotionValuesFromProps:Fm,createRenderState:Vm});function Q2(t,e,n){const r=Fm(t,e,n);for(const i in t)if(Rt(t[i])||Rt(e[i])){const o=mo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const xS=K2({scrapeMotionValuesFromProps:Q2,createRenderState:H2}),yS=Symbol.for("motionComponentSymbol");function Ps(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function vS(t,e,n){return j.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ps(n)&&(n.current=r))},[e])}const Bm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),bS="framerAppearId",Y2="data-"+Bm(bS),X2=j.createContext({});function wS(t,e,n,r,i){var I,P;const{visualElement:o}=j.useContext(Ru),a=j.useContext(F2),l=j.useContext(Au),c=j.useContext(Pu).reducedMotion,d=j.useRef(null);r=r||a.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,m=j.useContext(X2);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&kS(d.current,n,i,m);const f=j.useRef(!1);j.useInsertionEffect(()=>{h&&f.current&&h.update(n,l)});const y=n[Y2],N=j.useRef(!!y&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,y))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,y)));return fm(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),N.current&&h.animationState&&h.animationState.animateChanges())}),j.useEffect(()=>{h&&(!N.current&&h.animationState&&h.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,y)}),N.current=!1),h.enteringChildren=void 0)}),h}function kS(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:J2(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||l&&Ps(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function J2(t){if(t)return t.options.allowProjection!==!1?t.projection:J2(t.parent)}function Kd(t,{forwardMotionProps:e=!1}={},n,r){n&&QC(n);const i=Lm(t)?xS:gS;function o(l,c){let d;const h={...j.useContext(Pu),...l,layoutId:jS(l)},{isStatic:m}=h,f=eS(l),y=i(l,m);if(!m&&hm){NS();const N=_S(h);d=N.MeasureLayout,f.visualElement=wS(t,y,h,r,N.ProjectionNode)}return s.jsxs(Ru.Provider,{value:f,children:[d&&f.visualElement?s.jsx(d,{visualElement:f.visualElement,...h}):null,fS(t,l,vS(y,f.visualElement,c),y,m,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=j.forwardRef(o);return a[yS]=t,a}function jS({layoutId:t}){const e=j.useContext(dm).id;return e&&t!==void 0?e+"-"+t:t}function NS(t,e){j.useContext(F2).strict}function _S(t){const{drag:e,layout:n}=to;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function zS(t,e){if(typeof Proxy>"u")return Kd;const n=new Map,r=(o,a)=>Kd(o,a,t,e),i=(o,a)=>r(o,a);return new Proxy(i,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,Kd(a,void 0,t,e)),n.get(a))})}function Z2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function CS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function SS(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Qd(t){return t===void 0||t===1}function T0({scale:t,scaleX:e,scaleY:n}){return!Qd(t)||!Qd(e)||!Qd(n)}function Ii(t){return T0(t)||ek(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ek(t){return iy(t.x)||iy(t.y)}function iy(t){return t&&t!=="0%"}function Jc(t,e,n){const r=t-n,i=e*r;return n+i}function sy(t,e,n,r,i){return i!==void 0&&(t=Jc(t,i,r)),Jc(t,n,r)+e}function I0(t,e=0,n=1,r,i){t.min=sy(t.min,e,n,r,i),t.max=sy(t.max,e,n,r,i)}function tk(t,{x:e,y:n}){I0(t.x,e.translate,e.scale,e.originPoint),I0(t.y,n.translate,n.scale,n.originPoint)}const oy=.999999999999,ay=1.0000000000001;function ES(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let l=0;l<i;l++){o=n[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ds(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,tk(t,a)),r&&Ii(o.latestValues)&&Ds(t,o.latestValues))}e.x<ay&&e.x>oy&&(e.x=1),e.y<ay&&e.y>oy&&(e.y=1)}function Rs(t,e){t.min=t.min+e,t.max=t.max+e}function ly(t,e,n,r,i=.5){const o=tt(t.min,t.max,i);I0(t,e,n,o,r)}function Ds(t,e){ly(t.x,e.x,e.scaleX,e.scale,e.originX),ly(t.y,e.y,e.scaleY,e.scale,e.originY)}function nk(t,e){return Z2(SS(t.getBoundingClientRect(),e))}function TS(t,e,n){const r=nk(t,n),{scroll:i}=e;return i&&(Rs(r.x,i.offset.x),Rs(r.y,i.offset.y)),r}const cy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ms=()=>({x:cy(),y:cy()}),uy=()=>({min:0,max:0}),wt=()=>({x:uy(),y:uy()}),A0={current:null},rk={current:!1};function IS(){if(rk.current=!0,!!hm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>A0.current=t.matches;t.addEventListener("change",e),e()}else A0.current=!1}const AS=new WeakMap;function PS(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Rt(i))t.addValue(r,i);else if(Rt(o))t.addValue(r,Xi(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Xi(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const dy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class RS{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Em,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=on.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Je.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Mu(n),this.isVariantNode=U2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in m){const y=m[f];c[f]!==void 0&&Rt(y)&&y.set(c[f])}}mount(e){var n;this.current=e,AS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),rk.current||IS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:A0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Nr(this.notifyUpdate),Nr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=po.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Je.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in to){const n=to[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):wt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dy.length;r++){const i=dy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=PS(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Xi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Gw(r)||Qw(r))?r=parseFloat(r):!UC(r)&&li.test(n)&&(r=A2(e,n)),this.setBaseTarget(e,Rt(r)?r.get():r)),Rt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Om(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Rt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ym),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Am.render(this.render)}}class ik extends RS{constructor(){super(...arguments),this.KeyframeResolver=EC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function sk(t,{style:e,vars:n},r,i){const o=t.style;let a;for(a in e)o[a]=e[a];i==null||i.applyProjectionStyles(o,r);for(a in n)o.setProperty(a,n[a])}function DS(t){return window.getComputedStyle(t)}class MS extends ik{constructor(){super(...arguments),this.type="html",this.renderInstance=sk}readValueFromInstance(e,n){var r;if(po.has(n))return(r=this.projection)!=null&&r.isProjecting?k0(n):Kz(e,n);{const i=DS(e),o=(c2(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return nk(e,n)}build(e,n,r){Mm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Fm(e,n,r)}}const ok=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function VS(t,e,n,r){sk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(ok.has(i)?i:Bm(i),e.attrs[i])}class LS extends ik{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=wt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(po.has(n)){const r=I2(n);return r&&r.default||0}return n=ok.has(n)?n:Bm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return Q2(e,n,r)}build(e,n,r){q2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){VS(e,n,r,i)}mount(e){this.isSVGTag=G2(e.tagName),super.mount(e)}}const OS=(t,e)=>Lm(t)?new LS(e):new MS(e,{allowProjection:t!==j.Fragment});function $s(t,e,n){const r=t.getProps();return Om(r,e,n!==void 0?n:r.custom,t)}const P0=t=>Array.isArray(t);function FS(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Xi(n))}function BS(t){return P0(t)?t[t.length-1]||0:t}function US(t,e){const n=$s(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const l=BS(o[a]);FS(t,a,l)}}function $S(t){return!!(Rt(t)&&t.add)}function R0(t,e){const n=t.getValue("willChange");if($S(n))return n.add(e);if(!n&&jr.WillChange){const r=new jr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function ak(t){return t.props[Y2]}const WS=t=>t!==null;function qS(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(WS),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const HS={type:"spring",stiffness:500,damping:25,restSpeed:10},GS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),KS={type:"keyframes",duration:.8},QS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},YS=(t,{keyframes:e})=>e.length>2?KS:po.has(t)?t.startsWith("scale")?GS(e[1]):HS:QS;function XS({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const Um=(t,e,n,r={},i,o)=>a=>{const l=Tm(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-er(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:i};XS(l)||Object.assign(h,YS(t,h)),h.duration&&(h.duration=er(h.duration)),h.repeatDelay&&(h.repeatDelay=er(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(C0(h),h.delay===0&&(m=!0)),(jr.instantAnimations||jr.skipAnimations)&&(m=!0,C0(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!o&&e.get()!==void 0){const f=qS(h.keyframes,l);if(f!==void 0){Je.update(()=>{h.onUpdate(f),h.onComplete()});return}}return l.isSync?new Sm(h):new xC(h)};function JS({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function lk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const m=t.getValue(h,t.latestValues[h]??null),f=l[h];if(f===void 0||d&&JS(d,h))continue;const y={delay:n,...Tm(o||{},h)},N=m.get();if(N!==void 0&&!m.isAnimating&&!Array.isArray(f)&&f===N&&!y.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const w=ak(t);if(w){const b=window.MotionHandoffAnimation(w,h,Je);b!==null&&(y.startTime=b,I=!0)}}R0(t,h),m.start(Um(h,m,f,t.shouldReduceMotion&&S2.has(h)?{type:!1}:y,t,I));const P=m.animation;P&&c.push(P)}return a&&Promise.all(c).then(()=>{Je.update(()=>{a&&US(t,a)})}),c}function ck(t,e,n,r=0,i=1){const o=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),a=t.size,l=(a-1)*r;return typeof n=="function"?n(o,a):i===1?o*r:l-o*r}function D0(t,e,n={}){var c;const r=$s(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(lk(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=i;return ZS(t,e,d,h,m,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[o,a]:[a,o];return d().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function ZS(t,e,n=0,r=0,i=0,o=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(D0(c,e,{...a,delay:n+(typeof r=="function"?0:r)+ck(t.variantChildren,c,r,i,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function eE(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>D0(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=D0(t,e,n);else{const i=typeof e=="function"?$s(t,e,n.custom):e;r=Promise.all(lk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function uk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const tE=Dm.length;function dk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?dk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<tE;n++){const r=Dm[n],i=t.props[r];(Ba(i)||i===!1)&&(e[r]=i)}return e}const nE=[...Rm].reverse(),rE=Rm.length;function iE(t){return e=>Promise.all(e.map(({animation:n,options:r})=>eE(t,n,r)))}function sE(t){let e=iE(t),n=hy(),r=!0;const i=c=>(d,h)=>{var f;const m=$s(t,h,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(m){const{transition:y,transitionEnd:N,...I}=m;d={...d,...I,...N}}return d};function o(c){e=c(t)}function a(c){const{props:d}=t,h=dk(t.parent)||{},m=[],f=new Set;let y={},N=1/0;for(let P=0;P<rE;P++){const w=nE[P],b=n[w],k=d[w]!==void 0?d[w]:h[w],R=Ba(k),M=w===c?b.isActive:null;M===!1&&(N=P);let L=k===h[w]&&k!==d[w]&&R;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),b.protectedKeys={...y},!b.isActive&&M===null||!k&&!b.prevProp||Du(k)||typeof k=="boolean")continue;const v=oE(b.prevProp,k);let x=v||w===c&&b.isActive&&!L&&R||P>N&&R,_=!1;const C=Array.isArray(k)?k:[k];let z=C.reduce(i(w),{});M===!1&&(z={});const{prevResolvedValues:A={}}=b,E={...A,...z},ge=xe=>{x=!0,f.has(xe)&&(_=!0,f.delete(xe)),b.needsAnimating[xe]=!0;const Y=t.getValue(xe);Y&&(Y.liveStyle=!1)};for(const xe in E){const Y=z[xe],X=A[xe];if(y.hasOwnProperty(xe))continue;let H=!1;P0(Y)&&P0(X)?H=!uk(Y,X):H=Y!==X,H?Y!=null?ge(xe):f.add(xe):Y!==void 0&&f.has(xe)?ge(xe):b.protectedKeys[xe]=!0}b.prevProp=k,b.prevResolvedValues=z,b.isActive&&(y={...y,...z}),r&&t.blockInitialAnimation&&(x=!1);const le=L&&v;x&&(!le||_)&&m.push(...C.map(xe=>{const Y={type:w};if(typeof xe=="string"&&r&&!le&&t.manuallyAnimateOnMount&&t.parent){const{parent:X}=t,H=$s(X,xe);if(X.enteringChildren&&H){const{delayChildren:te}=H.transition||{};Y.delay=ck(X.enteringChildren,t,te)}}return{animation:xe,options:Y}}))}if(f.size){const P={};if(typeof d.initial!="boolean"){const w=$s(t,Array.isArray(d.initial)?d.initial[0]:d.initial);w&&w.transition&&(P.transition=w.transition)}f.forEach(w=>{const b=t.getBaseTarget(w),k=t.getValue(w);k&&(k.liveStyle=!0),P[w]=b??null}),m.push({animation:P})}let I=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(I=!1),r=!1,I?e(m):Promise.resolve()}function l(c,d){var m;if(n[c].isActive===d)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(f=>{var y;return(y=f.animationState)==null?void 0:y.setActive(c,d)}),n[c].isActive=d;const h=a(c);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=hy()}}}function oE(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!uk(e,t):!1}function Si(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hy(){return{animate:Si(!0),whileInView:Si(),whileHover:Si(),whileTap:Si(),whileDrag:Si(),whileFocus:Si(),exit:Si()}}class wi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class aE extends wi{constructor(e){super(e),e.animationState||(e.animationState=sE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Du(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let lE=0;class cE extends wi{constructor(){super(...arguments),this.id=lE++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const uE={animation:{Feature:aE},exit:{Feature:cE}};function Ua(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ol(t){return{point:{x:t.pageX,y:t.pageY}}}const dE=t=>e=>Pm(e)&&t(e,ol(e));function ma(t,e,n,r){return Ua(t,e,dE(n),r)}const hk=1e-4,hE=1-hk,fE=1+hk,fk=.01,mE=0-fk,pE=0+fk;function Qt(t){return t.max-t.min}function gE(t,e,n){return Math.abs(t-e)<=n}function fy(t,e,n,r=.5){t.origin=r,t.originPoint=tt(e.min,e.max,t.origin),t.scale=Qt(n)/Qt(e),t.translate=tt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=hE&&t.scale<=fE||isNaN(t.scale))&&(t.scale=1),(t.translate>=mE&&t.translate<=pE||isNaN(t.translate))&&(t.translate=0)}function pa(t,e,n,r){fy(t.x,e.x,n.x,r?r.originX:void 0),fy(t.y,e.y,n.y,r?r.originY:void 0)}function my(t,e,n){t.min=n.min+e.min,t.max=t.min+Qt(e)}function xE(t,e,n){my(t.x,e.x,n.x),my(t.y,e.y,n.y)}function py(t,e,n){t.min=e.min-n.min,t.max=t.min+Qt(e)}function Zc(t,e,n){py(t.x,e.x,n.x),py(t.y,e.y,n.y)}function vn(t){return[t("x"),t("y")]}const mk=({current:t})=>t?t.ownerDocument.defaultView:null,gy=(t,e)=>Math.abs(t-e);function yE(t,e){const n=gy(t.x,e.x),r=gy(t.y,e.y);return Math.sqrt(n**2+r**2)}class pk{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Xd(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,N=yE(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!N)return;const{point:I}=f,{timestamp:P}=It;this.history.push({...I,timestamp:P});const{onStart:w,onMove:b}=this.handlers;y||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,y)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Yd(y,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(f,y)=>{this.end();const{onEnd:N,onSessionEnd:I,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Xd(f.type==="pointercancel"?this.lastMoveEventInfo:Yd(y,this.transformPagePoint),this.history);this.startEvent&&N&&N(f,w),I&&I(f,w)},!Pm(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const l=ol(e),c=Yd(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=It;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,Xd(c,this.history)),this.removeListeners=rl(ma(this.contextWindow,"pointermove",this.handlePointerMove),ma(this.contextWindow,"pointerup",this.handlePointerUp),ma(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Nr(this.updatePoint)}}function Yd(t,e){return e?{point:e(t.point)}:t}function xy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xd({point:t},e){return{point:t,delta:xy(t,gk(e)),offset:xy(t,vE(e)),velocity:bE(e,.1)}}function vE(t){return t[0]}function gk(t){return t[t.length-1]}function bE(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=gk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>er(e)));)n--;if(!r)return{x:0,y:0};const o=_n(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function wE(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?tt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?tt(n,t,r.max):Math.min(t,n)),t}function yy(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function kE(t,{top:e,left:n,bottom:r,right:i}){return{x:yy(t.x,n,i),y:yy(t.y,e,r)}}function vy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function jE(t,e){return{x:vy(t.x,e.x),y:vy(t.y,e.y)}}function NE(t,e){let n=.5;const r=Qt(t),i=Qt(e);return i>r?n=La(e.min,e.max-r,t.min):r>i&&(n=La(t.min,t.max-i,e.min)),kr(0,1,n)}function _E(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const M0=.35;function zE(t=M0){return t===!1?t=0:t===!0&&(t=M0),{x:by(t,"left","right"),y:by(t,"top","bottom")}}function by(t,e,n){return{min:wy(t,e),max:wy(t,n)}}function wy(t,e){return typeof t=="number"?t:t[e]||0}const CE=new WeakMap;class SE{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=wt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=m=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ol(m).point)},a=(m,f)=>{const{drag:y,dragPropagation:N,onDragStart:I}=this.getProps();if(y&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=PC(y),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vn(w=>{let b=this.getAxisMotionValue(w).get()||0;if(tr.test(b)){const{projection:k}=this.visualElement;if(k&&k.layout){const R=k.layout.layoutBox[w];R&&(b=Qt(R)*(parseFloat(b)/100))}}this.originPoint[w]=b}),I&&Je.postRender(()=>I(m,f)),R0(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(m,f)=>{this.latestPointerEvent=m,this.latestPanInfo=f;const{dragPropagation:y,dragDirectionLock:N,onDirectionLock:I,onDrag:P}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:w}=f;if(N&&this.currentDirection===null){this.currentDirection=EE(w),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),P&&P(m,f)},c=(m,f)=>{this.latestPointerEvent=m,this.latestPanInfo=f,this.stop(m,f),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>vn(m=>{var f;return this.getAnimationState(m)==="paused"&&((f=this.getAxisMotionValue(m).animation)==null?void 0:f.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new pk(e,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:mk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Je.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Wl(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=wE(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Ps(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=kE(r.layoutBox,e):this.constraints=!1,this.elastic=zE(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=_E(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ps(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=TS(r,i.root,this.visualElement.getTransformPagePoint());let a=jE(i.layout.layoutBox,o);if(n){const l=n(CS(a));this.hasMutatedConstraints=!!l,l&&(a=Z2(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=vn(h=>{if(!Wl(h,n,this.currentDirection))return;let m=c&&c[h]||{};a&&(m={min:0,max:0});const f=i?200:1e6,y=i?40:1e7,N={type:"inertia",velocity:r?e[h]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(h,N)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return R0(this.visualElement,e),r.start(Um(e,r,0,n,this.visualElement,!1))}stopAnimation(){vn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){vn(n=>{const{drag:r}=this.getProps();if(!Wl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[n];o.set(e[n]-tt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ps(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};vn(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();i[a]=NE({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vn(a=>{if(!Wl(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];l.set(tt(c,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;CE.set(this.visualElement,this);const e=this.visualElement.current,n=ma(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ps(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Je.read(r);const a=Ua(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(vn(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=M0,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Wl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function EE(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class TE extends wi{constructor(e){super(e),this.removeGroupControls=Cn,this.removeListeners=Cn,this.controls=new SE(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cn}unmount(){this.removeGroupControls(),this.removeListeners()}}const ky=t=>(e,n)=>{t&&Je.postRender(()=>t(e,n))};class IE extends wi{constructor(){super(...arguments),this.removePointerDownListener=Cn}onPointerDown(e){this.session=new pk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:ky(e),onStart:ky(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&Je.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=ma(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Jd=!1;class AE extends j.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),Jd&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),fc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,Jd=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||Je.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Am.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Jd=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xk(t){const[e,n]=O2(),r=j.useContext(dm);return s.jsx(AE,{...t,layoutGroup:r,switchLayoutGroup:j.useContext(X2),isPresent:e,safeToRemove:n})}function PE(t,e,n){const r=Rt(t)?t:Xi(t);return r.start(Um("",r,e,n)),r.animation}const RE=(t,e)=>t.depth-e.depth;class DE{constructor(){this.children=[],this.isDirty=!1}add(e){mm(this.children,e),this.isDirty=!0}remove(e){pm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(RE),this.isDirty=!1,this.children.forEach(e)}}function ME(t,e){const n=on.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Nr(r),t(o-e))};return Je.setup(r,!0),()=>Nr(r)}const yk=["TopLeft","TopRight","BottomLeft","BottomRight"],VE=yk.length,jy=t=>typeof t=="string"?parseFloat(t):t,Ny=t=>typeof t=="number"||ke.test(t);function LE(t,e,n,r,i,o){i?(t.opacity=tt(0,n.opacity??1,OE(r)),t.opacityExit=tt(e.opacity??1,0,FE(r))):o&&(t.opacity=tt(e.opacity??1,n.opacity??1,r));for(let a=0;a<VE;a++){const l=`border${yk[a]}Radius`;let c=_y(e,l),d=_y(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||Ny(c)===Ny(d)?(t[l]=Math.max(tt(jy(c),jy(d),r),0),(tr.test(d)||tr.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=tt(e.rotate||0,n.rotate||0,r))}function _y(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const OE=vk(0,.5,r2),FE=vk(.5,.95,Cn);function vk(t,e,n){return r=>r<t?0:r>e?1:n(La(t,e,r))}function zy(t,e){t.min=e.min,t.max=e.max}function An(t,e){zy(t.x,e.x),zy(t.y,e.y)}function Cy(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Sy(t,e,n,r,i){return t-=e,t=Jc(t,1/n,r),i!==void 0&&(t=Jc(t,1/i,r)),t}function BE(t,e=0,n=1,r=.5,i,o=t,a=t){if(tr.test(e)&&(e=parseFloat(e),e=tt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=tt(o.min,o.max,r);t===o&&(l-=e),t.min=Sy(t.min,e,n,l,i),t.max=Sy(t.max,e,n,l,i)}function Ey(t,e,[n,r,i],o,a){BE(t,e[n],e[r],e[i],e.scale,o,a)}const UE=["x","scaleX","originX"],$E=["y","scaleY","originY"];function Ty(t,e,n,r){Ey(t.x,e,UE,n?n.x:void 0,r?r.x:void 0),Ey(t.y,e,$E,n?n.y:void 0,r?r.y:void 0)}function Iy(t){return t.translate===0&&t.scale===1}function bk(t){return Iy(t.x)&&Iy(t.y)}function Ay(t,e){return t.min===e.min&&t.max===e.max}function WE(t,e){return Ay(t.x,e.x)&&Ay(t.y,e.y)}function Py(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wk(t,e){return Py(t.x,e.x)&&Py(t.y,e.y)}function Ry(t){return Qt(t.x)/Qt(t.y)}function Dy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class qE{constructor(){this.members=[]}add(e){mm(this.members,e),e.scheduleRender()}remove(e){if(pm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function HE(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:f,skewX:y,skewY:N}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),f&&(r+=`rotateY(${f}deg) `),y&&(r+=`skewX(${y}deg) `),N&&(r+=`skewY(${N}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Zd=["","X","Y","Z"],GE=1e3;let KE=0;function eh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function kk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ak(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Je,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&kk(r)}function jk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e==null?void 0:e()){this.id=KE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(XE),this.nodes.forEach(tT),this.nodes.forEach(nT),this.nodes.forEach(JE)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new DE)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ym),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=L2(a)&&!OC(a),this.instance=a;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,m=0;const f=()=>this.root.updateBlockedByResize=!1;Je.read(()=>{m=window.innerWidth}),t(a,()=>{const y=window.innerWidth;y!==m&&(m=y,this.root.updateBlockedByResize=!0,h&&h(),h=ME(f,250),fc.hasAnimatedSinceResize&&(fc.hasAnimatedSinceResize=!1,this.nodes.forEach(Ly)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:f,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||d.getDefaultTransition()||aT,{onLayoutAnimationStart:I,onLayoutAnimationComplete:P}=d.getProps(),w=!this.targetLayout||!wk(this.targetLayout,y),b=!m&&f;if(this.options.layoutRoot||this.resumeFrom||b||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...Tm(N,"layout"),onPlay:I,onComplete:P};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,b)}else m||Ly(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rT),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(My);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Vy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(eT),this.nodes.forEach(QE),this.nodes.forEach(YE)):this.nodes.forEach(Vy),this.clearAllSnapshots();const l=on.now();It.delta=kr(0,1e3/60,l-It.timestamp),It.timestamp=l,It.isProcessing=!0,Ud.update.process(It),Ud.preRender.process(It),Ud.render.process(It),It.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Am.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ZE),this.sharedNodes.forEach(iT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Qt(this.snapshot.measuredBox.x)&&!Qt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=wt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!bk(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&this.instance&&(l||Ii(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),lT(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:a}=this.options;if(!a)return wt();const l=a.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(cT))){const{scroll:h}=this.root;h&&(Rs(l.x,h.offset.x),Rs(l.y,h.offset.y))}return l}removeElementScroll(a){var c;const l=wt();if(An(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&An(l,a),Rs(l.x,m.offset.x),Rs(l.y,m.offset.y))}return l}applyTransform(a,l=!1){const c=wt();An(c,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ds(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ii(h.latestValues)&&Ds(c,h.latestValues)}return Ii(this.latestValues)&&Ds(c,this.latestValues),c}removeTransform(a){const l=wt();An(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Ii(d.latestValues))continue;T0(d.latestValues)&&d.updateSnapshot();const h=wt(),m=d.measurePageBox();An(h,m),Ty(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Ii(this.latestValues)&&Ty(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==It.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!this.layout||!(h||m))return;this.resolvedRelativeTargetAt=It.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=wt(),this.targetWithTransforms=wt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),xE(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):An(this.target,this.layout.layoutBox),tk(this.target,this.targetDelta)):An(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||T0(this.parent.latestValues)||ek(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=wt(),this.relativeTargetOrigin=wt(),Zc(this.relativeTargetOrigin,l,c),An(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var N;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===It.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;An(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;ES(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=wt());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Cy(this.prevProjectionDelta.x,this.projectionDelta.x),Cy(this.prevProjectionDelta.y,this.projectionDelta.y)),pa(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==f||!Dy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Dy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ms(),this.projectionDelta=Ms(),this.projectionDeltaWithTransform=Ms()}setAnimationOrigin(a,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},m=Ms();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=wt(),y=c?c.source:void 0,N=this.layout?this.layout.source:void 0,I=y!==N,P=this.getStack(),w=!P||P.members.length<=1,b=!!(I&&!w&&this.options.crossfade===!0&&!this.path.some(oT));this.animationProgress=0;let k;this.mixTargetDelta=R=>{const M=R/1e3;Oy(m.x,a.x,M),Oy(m.y,a.y,M),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Zc(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sT(this.relativeTarget,this.relativeTargetOrigin,f,M),k&&WE(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=wt()),An(k,this.relativeTarget)),I&&(this.animationValues=h,LE(h,d,this.latestValues,M,b,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{fc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Xi(0)),this.currentAnimation=PE(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),a.onUpdate&&a.onUpdate(h)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(GE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=a;if(!(!l||!c||!d)){if(this!==a&&this.layout&&d&&Nk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||wt();const m=Qt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+m;const f=Qt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}An(l,c),Ds(l,h),pa(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new qE),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&eh("z",a,d,this.animationValues);for(let h=0;h<Zd.length;h++)eh(`rotate${Zd[h]}`,a,d,this.animationValues),eh(`skew${Zd[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=hc(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=hc(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ii(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=HE(this.projectionDeltaWithTransform,this.treeScale,h);c&&(m=c(h,m)),a.transform=m;const{x:f,y}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${y.origin*100}% 0`,d.animationValues?a.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const N in E0){if(h[N]===void 0)continue;const{correct:I,applyTo:P,isCSSVariable:w}=E0[N],b=m==="none"?h[N]:I(h[N],d);if(P){const k=P.length;for(let R=0;R<k;R++)a[P[R]]=b}else w?this.options.visualElement.renderState.vars[N]=b:a[N]=b}this.options.layoutId&&(a.pointerEvents=d===this?hc(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(My),this.root.sharedNodes.clear()}}}function QE(t){t.updateLayout()}function YE(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=e.source!==t.layout.source;o==="size"?vn(m=>{const f=a?e.measuredBox[m]:e.layoutBox[m],y=Qt(f);f.min=r[m].min,f.max=f.min+y}):Nk(o,e.layoutBox,r)&&vn(m=>{const f=a?e.measuredBox[m]:e.layoutBox[m],y=Qt(r[m]);f.max=f.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+y)});const l=Ms();pa(l,r,e.layoutBox);const c=Ms();a?pa(c,t.applyTransform(i,!0),e.measuredBox):pa(c,r,e.layoutBox);const d=!bk(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:y}=m;if(f&&y){const N=wt();Zc(N,e.layoutBox,f.layoutBox);const I=wt();Zc(I,r,y.layoutBox),wk(N,I)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=I,t.relativeTargetOrigin=N,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function XE(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function JE(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function ZE(t){t.clearSnapshot()}function My(t){t.clearMeasurements()}function Vy(t){t.isLayoutDirty=!1}function eT(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ly(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function tT(t){t.resolveTargetDelta()}function nT(t){t.calcProjection()}function rT(t){t.resetSkewAndRotation()}function iT(t){t.removeLeadSnapshot()}function Oy(t,e,n){t.translate=tt(e.translate,0,n),t.scale=tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Fy(t,e,n,r){t.min=tt(e.min,n.min,r),t.max=tt(e.max,n.max,r)}function sT(t,e,n,r){Fy(t.x,e.x,n.x,r),Fy(t.y,e.y,n.y,r)}function oT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const aT={duration:.45,ease:[.4,0,.1,1]},By=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Uy=By("applewebkit/")&&!By("chrome/")?Math.round:Cn;function $y(t){t.min=Uy(t.min),t.max=Uy(t.max)}function lT(t){$y(t.x),$y(t.y)}function Nk(t,e,n){return t==="position"||t==="preserve-aspect"&&!gE(Ry(e),Ry(n),.2)}function cT(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const uT=jk({attachResizeListener:(t,e)=>Ua(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),th={current:void 0},_k=jk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!th.current){const t=new uT({});t.mount(window),t.setOptions({layoutScroll:!0}),th.current=t}return th.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),dT={pan:{Feature:IE},drag:{Feature:TE,ProjectionNode:_k,MeasureLayout:xk}};function Wy(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&Je.postRender(()=>o(e,ol(e)))}class hT extends wi{mount(){const{current:e}=this.node;e&&(this.unmount=RC(e,(n,r)=>(Wy(this.node,r,"Start"),i=>Wy(this.node,i,"End"))))}unmount(){}}class fT extends wi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=rl(Ua(this.node.current,"focus",()=>this.onFocus()),Ua(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function qy(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&Je.postRender(()=>o(e,ol(e)))}class mT extends wi{mount(){const{current:e}=this.node;e&&(this.unmount=LC(e,(n,r)=>(qy(this.node,r,"Start"),(i,{success:o})=>qy(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const V0=new WeakMap,nh=new WeakMap,pT=t=>{const e=V0.get(t.target);e&&e(t)},gT=t=>{t.forEach(pT)};function xT({root:t,...e}){const n=t||document;nh.has(n)||nh.set(n,{});const r=nh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(gT,{root:t,...e})),r[i]}function yT(t,e,n){const r=xT(e);return V0.set(t,n),r.observe(t),()=>{V0.delete(t),r.unobserve(t)}}const vT={some:0,all:1};class bT extends wi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:vT[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),f=d?h:m;f&&f(c)};return yT(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(wT(e,n))&&this.startObserver()}unmount(){}}function wT({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kT={inView:{Feature:bT},tap:{Feature:mT},focus:{Feature:fT},hover:{Feature:hT}},jT={layout:{ProjectionNode:_k,MeasureLayout:xk}},NT={...uE,...kT,...dT,...jT},Q=zS(NT,OS);function eu(t){const e=bi(()=>Xi(t)),{isStatic:n}=j.useContext(Pu);if(n){const[,r]=j.useState(t);j.useEffect(()=>e.on("change",r),[])}return e}function zk(t,e){const n=eu(e()),r=()=>n.set(e());return r(),fm(()=>{const i=()=>Je.preRender(r,!1,!0),o=t.map(a=>a.on("change",i));return()=>{o.forEach(a=>a()),Nr(r)}}),n}function _T(t){fa.current=[],t();const e=zk(fa.current,t);return fa.current=void 0,e}function zT(t,e,n,r){if(typeof t=="function")return _T(t);const i=typeof e=="function"?e:FC(e,n,r);return Array.isArray(t)?Hy(t,i):Hy([t],([o])=>i(o))}function Hy(t,e){const n=bi(()=>[]);return zk(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class CT{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const ST=()=>new CT;function $m(){return bi(ST)}const Ck=j.createContext(null);function ET(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const o=r>0?1:-1,a=t[i+o];if(!a)return t;const l=t[i],c=a.layout,d=tt(c.min,c.max,.5);return o===1&&l.layout.max+n>d||o===-1&&l.layout.min+n<d?H_(t,i,i+o):t}function TT({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...o},a){const l=bi(()=>Q[e]),c=[],d=j.useRef(!1),h={axis:n,registerItem:(m,f)=>{const y=c.findIndex(N=>m===N.value);y!==-1?c[y].layout=f[n]:c.push({value:m,layout:f[n]}),c.sort(AT)},updateOrder:(m,f,y)=>{if(d.current)return;const N=ET(c,m,f,y);c!==N&&(d.current=!0,r(N.map(IT).filter(I=>i.indexOf(I)!==-1)))}};return j.useEffect(()=>{d.current=!1}),s.jsx(l,{...o,ref:a,ignoreStrict:!0,children:s.jsx(Ck.Provider,{value:h,children:t})})}const Vu=j.forwardRef(TT);function IT(t){return t.value}function AT(t,e){return t.layout.min-e.layout.min}function Gy(t,e=0){return Rt(t)?t:eu(e)}function PT({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:o=!0,...a},l){const c=bi(()=>Q[r]),d=j.useContext(Ck),h={x:Gy(e.x),y:Gy(e.y)},m=zT([h.x,h.y],([I,P])=>I||P?1:"unset"),{axis:f,registerItem:y,updateOrder:N}=d;return s.jsx(c,{drag:f,...a,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:m},layout:o,onDrag:(I,P)=>{const{velocity:w}=P;w[f]&&N(n,h[f].get(),w[f]),i&&i(I,P)},onLayoutMeasure:I=>y(n,I),ref:l,ignoreStrict:!0,children:t})}const Lu=j.forwardRef(PT);function Ky({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return s.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>s.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const qt=t=>{j.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth,n=window.getComputedStyle(document.body).overflow,r=window.getComputedStyle(document.body).paddingRight;return document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${parseInt(r||0)+e}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=r}},[t])},RT=()=>{};var Qy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},DT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Ek={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=o>>2,m=(o&3)<<4|l>>4;let f=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(f=64)),r.push(n[h],n[m],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||d==null||m==null)throw new MT;const f=o<<2|l>>4;if(r.push(f),d!==64){const y=l<<4&240|d>>2;if(r.push(y),m!==64){const N=d<<6&192|m;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class MT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const VT=function(t){const e=Sk(t);return Ek.encodeByteArray(e,!0)},tu=function(t){return VT(t).replace(/\./g,"")},LT=function(t){try{return Ek.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FT=()=>OT().__FIREBASE_DEFAULTS__,BT=()=>{if(typeof process>"u"||typeof Qy>"u")return;const t=Qy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},UT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LT(t[1]);return e&&JSON.parse(e)},Wm=()=>{try{return RT()||FT()||BT()||UT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$T=t=>{var e,n;return(n=(e=Wm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},WT=t=>{const e=$T(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Tk=()=>{var t;return(t=Wm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function HT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[tu(JSON.stringify(n)),tu(JSON.stringify(a)),""].join(".")}const ga={};function KT(){const t={prod:[],emulator:[]};for(const e of Object.keys(ga))ga[e]?t.emulator.push(e):t.prod.push(e);return t}function QT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yy=!1;function YT(t,e){if(typeof window>"u"||typeof document>"u"||!qm(window.location.host)||ga[t]===e||ga[t]||Yy)return;ga[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",o=KT().prod.length>0;function a(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function d(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Yy=!0,a()},f}function h(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function m(){const f=QT(r),y=n("text"),N=document.getElementById(y)||document.createElement("span"),I=n("learnmore"),P=document.getElementById(I)||document.createElement("a"),w=n("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const k=f.element;l(k),h(P,I);const R=d();c(b,w),k.append(b,N,P,R),document.body.appendChild(k)}o?(N.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function JT(){var e;const t=(e=Wm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eI(){return!JT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ik(){try{return typeof indexedDB=="object"}catch{return!1}}function Ak(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function tI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="FirebaseError";class ki extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nI,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?rI(o,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new ki(i,l,r)}}function rI(t,e){return t.replace(iI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const iI=/\{\$([^}]+)}/g;function $a(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(Xy(o)&&Xy(a)){if(!$a(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Xy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=1e3,oI=2,aI=4*60*60*1e3,lI=.5;function Jy(t,e=sI,n=oI){const r=e*Math.pow(n,t),i=Math.round(lI*r*(Math.random()-.5)*2);return Math.min(aI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dI(e))try{this.getOrInitializeService({instanceIdentifier:Ai})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ai){return this.instances.has(e)}getOptions(e=Ai){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ai){return this.component?this.component.multipleInstances?e:Ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uI(t){return t===Ai?void 0:t}function dI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Re||(Re={}));const fI={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},mI=Re.INFO,pI={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},gI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=pI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hm{constructor(e){this.name=e,this._logLevel=mI,this._logHandler=gI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}}const xI=(t,e)=>e.some(n=>t instanceof n);let Zy,ev;function yI(){return Zy||(Zy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vI(){return ev||(ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Pk=new WeakMap,L0=new WeakMap,Rk=new WeakMap,rh=new WeakMap,Gm=new WeakMap;function bI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(ni(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Pk.set(n,t)}).catch(()=>{}),Gm.set(e,t),e}function wI(t){if(L0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});L0.set(t,e)}let O0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return L0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Rk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ni(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kI(t){O0=t(O0)}function jI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ih(this),e,...n);return Rk.set(r,e.sort?e.sort():[e]),ni(r)}:vI().includes(t)?function(...e){return t.apply(ih(this),e),ni(Pk.get(this))}:function(...e){return ni(t.apply(ih(this),e))}}function NI(t){return typeof t=="function"?jI(t):(t instanceof IDBTransaction&&wI(t),xI(t,yI())?new Proxy(t,O0):t)}function ni(t){if(t instanceof IDBRequest)return bI(t);if(rh.has(t))return rh.get(t);const e=NI(t);return e!==t&&(rh.set(t,e),Gm.set(e,t)),e}const ih=t=>Gm.get(t);function Dk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),l=ni(a);return r&&a.addEventListener("upgradeneeded",c=>{r(ni(a.result),c.oldVersion,c.newVersion,ni(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const _I=["get","getKey","getAll","getAllKeys","count"],zI=["put","add","delete","clear"],sh=new Map;function tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sh.get(e))return sh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=zI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||_I.includes(n)))return;const o=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return sh.set(e,o),o}kI(t=>({...t,get:(e,n,r)=>tv(e,n)||t.get(e,n,r),has:(e,n)=>!!tv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const F0="@firebase/app",nv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Hm("@firebase/app"),EI="@firebase/app-compat",TI="@firebase/analytics-compat",II="@firebase/analytics",AI="@firebase/app-check-compat",PI="@firebase/app-check",RI="@firebase/auth",DI="@firebase/auth-compat",MI="@firebase/database",VI="@firebase/data-connect",LI="@firebase/database-compat",OI="@firebase/functions",FI="@firebase/functions-compat",BI="@firebase/installations",UI="@firebase/installations-compat",$I="@firebase/messaging",WI="@firebase/messaging-compat",qI="@firebase/performance",HI="@firebase/performance-compat",GI="@firebase/remote-config",KI="@firebase/remote-config-compat",QI="@firebase/storage",YI="@firebase/storage-compat",XI="@firebase/firestore",JI="@firebase/ai",ZI="@firebase/firestore-compat",e3="firebase",t3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="[DEFAULT]",n3={[F0]:"fire-core",[EI]:"fire-core-compat",[II]:"fire-analytics",[TI]:"fire-analytics-compat",[PI]:"fire-app-check",[AI]:"fire-app-check-compat",[RI]:"fire-auth",[DI]:"fire-auth-compat",[MI]:"fire-rtdb",[VI]:"fire-data-connect",[LI]:"fire-rtdb-compat",[OI]:"fire-fn",[FI]:"fire-fn-compat",[BI]:"fire-iid",[UI]:"fire-iid-compat",[$I]:"fire-fcm",[WI]:"fire-fcm-compat",[qI]:"fire-perf",[HI]:"fire-perf-compat",[GI]:"fire-rc",[KI]:"fire-rc-compat",[QI]:"fire-gcs",[YI]:"fire-gcs-compat",[XI]:"fire-fst",[ZI]:"fire-fst-compat",[JI]:"fire-vertex","fire-js":"fire-js",[e3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu=new Map,r3=new Map,U0=new Map;function rv(t,e){try{t.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ci(t){const e=t.name;if(U0.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;U0.set(e,t);for(const n of nu.values())rv(n,t);for(const n of r3.values())rv(n,t);return!0}function al(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function i3(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ri=new Ou("app","Firebase",s3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ri.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3=t3;function Mk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:B0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw ri.create("bad-app-name",{appName:String(i)});if(n||(n=Tk()),!n)throw ri.create("no-options");const o=nu.get(i);if(o){if($a(n,o.options)&&$a(r,o.config))return o;throw ri.create("duplicate-app",{appName:i})}const a=new hI(i);for(const c of U0.values())a.addComponent(c);const l=new o3(n,r,a);return nu.set(i,l),l}function Vk(t=B0){const e=nu.get(t);if(!e&&t===B0&&Tk())return Mk();if(!e)throw ri.create("no-app",{appName:t});return e}function nr(t,e,n){let r=n3[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(a.join(" "));return}ci(new zr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3="firebase-heartbeat-database",c3=1,Wa="firebase-heartbeat-store";let oh=null;function Lk(){return oh||(oh=Dk(l3,c3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wa)}catch(n){console.warn(n)}}}}).catch(t=>{throw ri.create("idb-open",{originalErrorMessage:t.message})})),oh}async function u3(t){try{const n=(await Lk()).transaction(Wa),r=await n.objectStore(Wa).get(Ok(t));return await n.done,r}catch(e){if(e instanceof ki)Cr.warn(e.message);else{const n=ri.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(n.message)}}}async function iv(t,e){try{const r=(await Lk()).transaction(Wa,"readwrite");await r.objectStore(Wa).put(e,Ok(t)),await r.done}catch(n){if(n instanceof ki)Cr.warn(n.message);else{const r=ri.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cr.warn(r.message)}}}function Ok(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=1024,h3=30;class f3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new p3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>h3){const a=g3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Cr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=sv(),{heartbeatsToSend:r,unsentEntries:i}=m3(this._heartbeatsCache.heartbeats),o=tu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Cr.warn(n),""}}}function sv(){return new Date().toISOString().substring(0,10)}function m3(t,e=d3){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),ov(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ov(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class p3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ik()?Ak().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await u3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return iv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ov(t){return tu(JSON.stringify({version:2,heartbeats:t})).length}function g3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x3(t){ci(new zr("platform-logger",e=>new CI(e),"PRIVATE")),ci(new zr("heartbeat",e=>new f3(e),"PRIVATE")),nr(F0,nv,t),nr(F0,nv,"esm2020"),nr("fire-js","")}x3("");var y3="firebase",v3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(y3,v3,"app");const Fk="@firebase/installations",Km="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=1e4,Uk=`w:${Km}`,$k="FIS_v2",b3="https://firebaseinstallations.googleapis.com/v1",w3=60*60*1e3,k3="installations",j3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ji=new Ou(k3,j3,N3);function Wk(t){return t instanceof ki&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk({projectId:t}){return`${b3}/projects/${t}/installations`}function Hk(t){return{token:t.token,requestStatus:2,expiresIn:z3(t.expiresIn),creationTime:Date.now()}}async function Gk(t,e){const r=(await e.json()).error;return Ji.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Kk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _3(t,{refreshToken:e}){const n=Kk(t);return n.append("Authorization",C3(e)),n}async function Qk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function z3(t){return Number(t.replace("s","000"))}function C3(t){return`${$k} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=qk(t),i=Kk(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={fid:n,authVersion:$k,appId:t.appId,sdkVersion:Uk},l={method:"POST",headers:i,body:JSON.stringify(a)},c=await Qk(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Hk(d.authToken)}}else throw await Gk("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3=/^[cdef][\w-]{21}$/,$0="";function I3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=A3(t);return T3.test(n)?n:$0}catch{return $0}}function A3(t){return E3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk=new Map;function Jk(t,e){const n=Fu(t);Zk(n,e),P3(n,e)}function Zk(t,e){const n=Xk.get(t);if(n)for(const r of n)r(e)}function P3(t,e){const n=R3();n&&n.postMessage({key:t,fid:e}),D3()}let Oi=null;function R3(){return!Oi&&"BroadcastChannel"in self&&(Oi=new BroadcastChannel("[Firebase] FID Change"),Oi.onmessage=t=>{Zk(t.data.key,t.data.fid)}),Oi}function D3(){Xk.size===0&&Oi&&(Oi.close(),Oi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3="firebase-installations-database",V3=1,Zi="firebase-installations-store";let ah=null;function Qm(){return ah||(ah=Dk(M3,V3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Zi)}}})),ah}async function ru(t,e){const n=Fu(t),i=(await Qm()).transaction(Zi,"readwrite"),o=i.objectStore(Zi),a=await o.get(n);return await o.put(e,n),await i.done,(!a||a.fid!==e.fid)&&Jk(t,e.fid),e}async function ej(t){const e=Fu(t),r=(await Qm()).transaction(Zi,"readwrite");await r.objectStore(Zi).delete(e),await r.done}async function Bu(t,e){const n=Fu(t),i=(await Qm()).transaction(Zi,"readwrite"),o=i.objectStore(Zi),a=await o.get(n),l=e(a);return l===void 0?await o.delete(n):await o.put(l,n),await i.done,l&&(!a||a.fid!==l.fid)&&Jk(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ym(t){let e;const n=await Bu(t.appConfig,r=>{const i=L3(r),o=O3(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===$0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function L3(t){const e=t||{fid:I3(),registrationStatus:0};return tj(e)}function O3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ji.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=F3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:B3(t)}:{installationEntry:e}}async function F3(t,e){try{const n=await S3(t,e);return ru(t.appConfig,n)}catch(n){throw Wk(n)&&n.customData.serverCode===409?await ej(t.appConfig):await ru(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function B3(t){let e=await av(t.appConfig);for(;e.registrationStatus===1;)await Yk(100),e=await av(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Ym(t);return r||n}return e}function av(t){return Bu(t,e=>{if(!e)throw Ji.create("installation-not-found");return tj(e)})}function tj(t){return U3(t)?{fid:t.fid,registrationStatus:0}:t}function U3(t){return t.registrationStatus===1&&t.registrationTime+Bk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3({appConfig:t,heartbeatServiceProvider:e},n){const r=W3(t,n),i=_3(t,n),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={installation:{sdkVersion:Uk,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(a)},c=await Qk(()=>fetch(r,l));if(c.ok){const d=await c.json();return Hk(d)}else throw await Gk("Generate Auth Token",c)}function W3(t,{fid:e}){return`${qk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xm(t,e=!1){let n;const r=await Bu(t.appConfig,o=>{if(!nj(o))throw Ji.create("not-registered");const a=o.authToken;if(!e&&G3(a))return o;if(a.requestStatus===1)return n=q3(t,e),o;{if(!navigator.onLine)throw Ji.create("app-offline");const l=Q3(o);return n=H3(t,l),l}});return n?await n:r.authToken}async function q3(t,e){let n=await lv(t.appConfig);for(;n.authToken.requestStatus===1;)await Yk(100),n=await lv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Xm(t,e):r}function lv(t){return Bu(t,e=>{if(!nj(e))throw Ji.create("not-registered");const n=e.authToken;return Y3(n)?{...e,authToken:{requestStatus:0}}:e})}async function H3(t,e){try{const n=await $3(t,e),r={...e,authToken:n};return await ru(t.appConfig,r),n}catch(n){if(Wk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ej(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ru(t.appConfig,r)}throw n}}function nj(t){return t!==void 0&&t.registrationStatus===2}function G3(t){return t.requestStatus===2&&!K3(t)}function K3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+w3}function Q3(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Y3(t){return t.requestStatus===1&&t.requestTime+Bk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X3(t){const e=t,{installationEntry:n,registrationPromise:r}=await Ym(e);return r?r.catch(console.error):Xm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J3(t,e=!1){const n=t;return await Z3(n),(await Xm(n,e)).token}async function Z3(t){const{registrationPromise:e}=await Ym(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){if(!t||!t.options)throw lh("App Configuration");if(!t.name)throw lh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw lh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function lh(t){return Ji.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj="installations",tA="installations-internal",nA=t=>{const e=t.getProvider("app").getImmediate(),n=eA(e),r=al(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},rA=t=>{const e=t.getProvider("app").getImmediate(),n=al(e,rj).getImmediate();return{getId:()=>X3(n),getToken:i=>J3(n,i)}};function iA(){ci(new zr(rj,nA,"PUBLIC")),ci(new zr(tA,rA,"PRIVATE"))}iA();nr(Fk,Km);nr(Fk,Km,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iu="analytics",sA="firebase_id",oA="origin",aA=60*1e3,lA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Jm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt=new Hm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},mn=new Ou("analytics","Analytics",cA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){if(!t.startsWith(Jm)){const e=mn.create("invalid-gtag-resource",{gtagURL:t});return Xt.warn(e.message),""}return t}function ij(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function dA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function hA(t,e){const n=dA("firebase-js-sdk-policy",{createScriptURL:uA}),r=document.createElement("script"),i=`${Jm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function fA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function mA(t,e,n,r,i,o){const a=r[i];try{if(a)await e[a];else{const c=(await ij(n)).find(d=>d.measurementId===i);c&&await e[c.appId]}}catch(l){Xt.error(l)}t("config",i,o)}async function pA(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const l=await ij(n);for(const c of a){const d=l.find(m=>m.measurementId===c),h=d&&e[d.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){Xt.error(o)}}function gA(t,e,n,r){async function i(o,...a){try{if(o==="event"){const[l,c]=a;await pA(t,e,n,l,c)}else if(o==="config"){const[l,c]=a;await mA(t,e,n,r,l,c)}else if(o==="consent"){const[l,c]=a;t("consent",l,c)}else if(o==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(o==="set"){const[l]=a;t("set",l)}else t(o,...a)}catch(l){Xt.error(l)}}return i}function xA(t,e,n,r,i){let o=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=gA(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function yA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Jm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA=30,bA=1e3;class wA{constructor(e={},n=bA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const sj=new wA;function kA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function jA(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:kA(n)},i=lA.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw mn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function NA(t,e=sj,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw mn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw mn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new CA;return setTimeout(async()=>{l.abort()},aA),oj({appId:r,apiKey:i,measurementId:o},a,l,e)}async function oj(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=sj){var l;const{appId:o,measurementId:a}=t;try{await _A(r,e)}catch(c){if(a)return Xt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await jA(t);return i.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!zA(d)){if(i.deleteThrottleMetadata(o),a)return Xt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?Jy(n,i.intervalMillis,vA):Jy(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,m),Xt.debug(`Calling attemptFetch again in ${h} millis`),oj(t,m,r,i)}}function _A(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(mn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function zA(t){if(!(t instanceof ki)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class CA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function SA(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const o=await e,a={...r,send_to:o};t("event",n,a)}}async function EA(t,e,n,r){if(r&&r.global){const i={};for(const o of Object.keys(n))i[`user_properties.${o}`]=n[o];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(){if(Ik())try{await Ak()}catch(t){return Xt.warn(mn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Xt.warn(mn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IA(t,e,n,r,i,o,a){const l=NA(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&Xt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Xt.error(f)),e.push(l);const c=TA().then(f=>{if(f)return r.getId()}),[d,h]=await Promise.all([l,c]);yA(o)||hA(o,d.measurementId),i("js",new Date);const m=(a==null?void 0:a.config)??{};return m[oA]="firebase",m.update=!0,h!=null&&(m[sA]=h),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.app=e}_delete(){return delete Ws[this.app.options.appId],Promise.resolve()}}let Ws={},cv=[];const uv={};let ch="dataLayer",PA="gtag",dv,Zm,hv=!1;function RA(){const t=[];if(ZT()&&t.push("This is a browser extension environment."),tI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=mn.create("invalid-analytics-context",{errorInfo:e});Xt.warn(n.message)}}function DA(t,e,n){RA();const r=t.options.appId;if(!r)throw mn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Xt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw mn.create("no-api-key");if(Ws[r]!=null)throw mn.create("already-exists",{id:r});if(!hv){fA(ch);const{wrappedGtag:o,gtagCore:a}=xA(Ws,cv,uv,ch,PA);Zm=o,dv=a,hv=!0}return Ws[r]=IA(t,cv,uv,e,dv,ch,n),new AA(t)}function MA(t=Vk()){t=_r(t);const e=al(t,iu);return e.isInitialized()?e.getImmediate():VA(t)}function VA(t,e={}){const n=al(t,iu);if(n.isInitialized()){const i=n.getImmediate();if($a(e,n.getOptions()))return i;throw mn.create("already-initialized")}return n.initialize({options:e})}function LA(t,e,n){t=_r(t),EA(Zm,Ws[t.app.options.appId],e,n).catch(r=>Xt.error(r))}function OA(t,e,n,r){t=_r(t),SA(Zm,Ws[t.app.options.appId],e,n,r).catch(i=>Xt.error(i))}const fv="@firebase/analytics",mv="0.10.19";function FA(){ci(new zr(iu,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return DA(r,i,n)},"PUBLIC")),ci(new zr("analytics-internal",t,"PRIVATE")),nr(fv,mv),nr(fv,mv,"esm2020");function t(e){try{const n=e.getProvider(iu).getImmediate();return{logEvent:(r,i,o)=>OA(n,r,i,o),setUserProperties:(r,i)=>LA(n,r,i)}}catch(n){throw mn.create("interop-component-reg-failed",{reason:n})}}}FA();var pv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ii,aj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,x){function _(){}_.prototype=x.prototype,v.F=x.prototype,v.prototype=new _,v.prototype.constructor=v,v.D=function(C,z,A){for(var E=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)E[ge-2]=arguments[ge];return x.prototype[z].apply(C,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,x,_){_||(_=0);const C=Array(16);if(typeof x=="string")for(var z=0;z<16;++z)C[z]=x.charCodeAt(_++)|x.charCodeAt(_++)<<8|x.charCodeAt(_++)<<16|x.charCodeAt(_++)<<24;else for(z=0;z<16;++z)C[z]=x[_++]|x[_++]<<8|x[_++]<<16|x[_++]<<24;x=v.g[0],_=v.g[1],z=v.g[2];let A=v.g[3],E;E=x+(A^_&(z^A))+C[0]+3614090360&4294967295,x=_+(E<<7&4294967295|E>>>25),E=A+(z^x&(_^z))+C[1]+3905402710&4294967295,A=x+(E<<12&4294967295|E>>>20),E=z+(_^A&(x^_))+C[2]+606105819&4294967295,z=A+(E<<17&4294967295|E>>>15),E=_+(x^z&(A^x))+C[3]+3250441966&4294967295,_=z+(E<<22&4294967295|E>>>10),E=x+(A^_&(z^A))+C[4]+4118548399&4294967295,x=_+(E<<7&4294967295|E>>>25),E=A+(z^x&(_^z))+C[5]+1200080426&4294967295,A=x+(E<<12&4294967295|E>>>20),E=z+(_^A&(x^_))+C[6]+2821735955&4294967295,z=A+(E<<17&4294967295|E>>>15),E=_+(x^z&(A^x))+C[7]+4249261313&4294967295,_=z+(E<<22&4294967295|E>>>10),E=x+(A^_&(z^A))+C[8]+1770035416&4294967295,x=_+(E<<7&4294967295|E>>>25),E=A+(z^x&(_^z))+C[9]+2336552879&4294967295,A=x+(E<<12&4294967295|E>>>20),E=z+(_^A&(x^_))+C[10]+4294925233&4294967295,z=A+(E<<17&4294967295|E>>>15),E=_+(x^z&(A^x))+C[11]+2304563134&4294967295,_=z+(E<<22&4294967295|E>>>10),E=x+(A^_&(z^A))+C[12]+1804603682&4294967295,x=_+(E<<7&4294967295|E>>>25),E=A+(z^x&(_^z))+C[13]+4254626195&4294967295,A=x+(E<<12&4294967295|E>>>20),E=z+(_^A&(x^_))+C[14]+2792965006&4294967295,z=A+(E<<17&4294967295|E>>>15),E=_+(x^z&(A^x))+C[15]+1236535329&4294967295,_=z+(E<<22&4294967295|E>>>10),E=x+(z^A&(_^z))+C[1]+4129170786&4294967295,x=_+(E<<5&4294967295|E>>>27),E=A+(_^z&(x^_))+C[6]+3225465664&4294967295,A=x+(E<<9&4294967295|E>>>23),E=z+(x^_&(A^x))+C[11]+643717713&4294967295,z=A+(E<<14&4294967295|E>>>18),E=_+(A^x&(z^A))+C[0]+3921069994&4294967295,_=z+(E<<20&4294967295|E>>>12),E=x+(z^A&(_^z))+C[5]+3593408605&4294967295,x=_+(E<<5&4294967295|E>>>27),E=A+(_^z&(x^_))+C[10]+38016083&4294967295,A=x+(E<<9&4294967295|E>>>23),E=z+(x^_&(A^x))+C[15]+3634488961&4294967295,z=A+(E<<14&4294967295|E>>>18),E=_+(A^x&(z^A))+C[4]+3889429448&4294967295,_=z+(E<<20&4294967295|E>>>12),E=x+(z^A&(_^z))+C[9]+568446438&4294967295,x=_+(E<<5&4294967295|E>>>27),E=A+(_^z&(x^_))+C[14]+3275163606&4294967295,A=x+(E<<9&4294967295|E>>>23),E=z+(x^_&(A^x))+C[3]+4107603335&4294967295,z=A+(E<<14&4294967295|E>>>18),E=_+(A^x&(z^A))+C[8]+1163531501&4294967295,_=z+(E<<20&4294967295|E>>>12),E=x+(z^A&(_^z))+C[13]+2850285829&4294967295,x=_+(E<<5&4294967295|E>>>27),E=A+(_^z&(x^_))+C[2]+4243563512&4294967295,A=x+(E<<9&4294967295|E>>>23),E=z+(x^_&(A^x))+C[7]+1735328473&4294967295,z=A+(E<<14&4294967295|E>>>18),E=_+(A^x&(z^A))+C[12]+2368359562&4294967295,_=z+(E<<20&4294967295|E>>>12),E=x+(_^z^A)+C[5]+4294588738&4294967295,x=_+(E<<4&4294967295|E>>>28),E=A+(x^_^z)+C[8]+2272392833&4294967295,A=x+(E<<11&4294967295|E>>>21),E=z+(A^x^_)+C[11]+1839030562&4294967295,z=A+(E<<16&4294967295|E>>>16),E=_+(z^A^x)+C[14]+4259657740&4294967295,_=z+(E<<23&4294967295|E>>>9),E=x+(_^z^A)+C[1]+2763975236&4294967295,x=_+(E<<4&4294967295|E>>>28),E=A+(x^_^z)+C[4]+1272893353&4294967295,A=x+(E<<11&4294967295|E>>>21),E=z+(A^x^_)+C[7]+4139469664&4294967295,z=A+(E<<16&4294967295|E>>>16),E=_+(z^A^x)+C[10]+3200236656&4294967295,_=z+(E<<23&4294967295|E>>>9),E=x+(_^z^A)+C[13]+681279174&4294967295,x=_+(E<<4&4294967295|E>>>28),E=A+(x^_^z)+C[0]+3936430074&4294967295,A=x+(E<<11&4294967295|E>>>21),E=z+(A^x^_)+C[3]+3572445317&4294967295,z=A+(E<<16&4294967295|E>>>16),E=_+(z^A^x)+C[6]+76029189&4294967295,_=z+(E<<23&4294967295|E>>>9),E=x+(_^z^A)+C[9]+3654602809&4294967295,x=_+(E<<4&4294967295|E>>>28),E=A+(x^_^z)+C[12]+3873151461&4294967295,A=x+(E<<11&4294967295|E>>>21),E=z+(A^x^_)+C[15]+530742520&4294967295,z=A+(E<<16&4294967295|E>>>16),E=_+(z^A^x)+C[2]+3299628645&4294967295,_=z+(E<<23&4294967295|E>>>9),E=x+(z^(_|~A))+C[0]+4096336452&4294967295,x=_+(E<<6&4294967295|E>>>26),E=A+(_^(x|~z))+C[7]+1126891415&4294967295,A=x+(E<<10&4294967295|E>>>22),E=z+(x^(A|~_))+C[14]+2878612391&4294967295,z=A+(E<<15&4294967295|E>>>17),E=_+(A^(z|~x))+C[5]+4237533241&4294967295,_=z+(E<<21&4294967295|E>>>11),E=x+(z^(_|~A))+C[12]+1700485571&4294967295,x=_+(E<<6&4294967295|E>>>26),E=A+(_^(x|~z))+C[3]+2399980690&4294967295,A=x+(E<<10&4294967295|E>>>22),E=z+(x^(A|~_))+C[10]+4293915773&4294967295,z=A+(E<<15&4294967295|E>>>17),E=_+(A^(z|~x))+C[1]+2240044497&4294967295,_=z+(E<<21&4294967295|E>>>11),E=x+(z^(_|~A))+C[8]+1873313359&4294967295,x=_+(E<<6&4294967295|E>>>26),E=A+(_^(x|~z))+C[15]+4264355552&4294967295,A=x+(E<<10&4294967295|E>>>22),E=z+(x^(A|~_))+C[6]+2734768916&4294967295,z=A+(E<<15&4294967295|E>>>17),E=_+(A^(z|~x))+C[13]+1309151649&4294967295,_=z+(E<<21&4294967295|E>>>11),E=x+(z^(_|~A))+C[4]+4149444226&4294967295,x=_+(E<<6&4294967295|E>>>26),E=A+(_^(x|~z))+C[11]+3174756917&4294967295,A=x+(E<<10&4294967295|E>>>22),E=z+(x^(A|~_))+C[2]+718787259&4294967295,z=A+(E<<15&4294967295|E>>>17),E=_+(A^(z|~x))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+x&4294967295,v.g[1]=v.g[1]+(z+(E<<21&4294967295|E>>>11))&4294967295,v.g[2]=v.g[2]+z&4294967295,v.g[3]=v.g[3]+A&4294967295}r.prototype.v=function(v,x){x===void 0&&(x=v.length);const _=x-this.blockSize,C=this.C;let z=this.h,A=0;for(;A<x;){if(z==0)for(;A<=_;)i(this,v,A),A+=this.blockSize;if(typeof v=="string"){for(;A<x;)if(C[z++]=v.charCodeAt(A++),z==this.blockSize){i(this,C),z=0;break}}else for(;A<x;)if(C[z++]=v[A++],z==this.blockSize){i(this,C),z=0;break}}this.h=z,this.o+=x},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var x=1;x<v.length-8;++x)v[x]=0;x=this.o*8;for(var _=v.length-8;_<v.length;++_)v[_]=x&255,x/=256;for(this.v(v),v=Array(16),x=0,_=0;_<4;++_)for(let C=0;C<32;C+=8)v[x++]=this.g[_]>>>C&255;return v};function o(v,x){var _=l;return Object.prototype.hasOwnProperty.call(_,v)?_[v]:_[v]=x(v)}function a(v,x){this.h=x;const _=[];let C=!0;for(let z=v.length-1;z>=0;z--){const A=v[z]|0;C&&A==x||(_[z]=A,C=!1)}this.g=_}var l={};function c(v){return-128<=v&&v<128?o(v,function(x){return new a([x|0],x<0?-1:0)}):new a([v|0],v<0?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return m;if(v<0)return P(d(-v));const x=[];let _=1;for(let C=0;v>=_;C++)x[C]=v/_|0,_*=4294967296;return new a(x,0)}function h(v,x){if(v.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(v.charAt(0)=="-")return P(h(v.substring(1),x));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=d(Math.pow(x,8));let C=m;for(let A=0;A<v.length;A+=8){var z=Math.min(8,v.length-A);const E=parseInt(v.substring(A,A+z),x);z<8?(z=d(Math.pow(x,z)),C=C.j(z).add(d(E))):(C=C.j(_),C=C.add(d(E)))}return C}var m=c(0),f=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(I(this))return-P(this).m();let v=0,x=1;for(let _=0;_<this.g.length;_++){const C=this.i(_);v+=(C>=0?C:4294967296+C)*x,x*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(N(this))return"0";if(I(this))return"-"+P(this).toString(v);const x=d(Math.pow(v,6));var _=this;let C="";for(;;){const z=R(_,x).g;_=w(_,z.j(x));let A=((_.g.length>0?_.g[0]:_.h)>>>0).toString(v);if(_=z,N(_))return A+C;for(;A.length<6;)A="0"+A;C=A+C}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function N(v){if(v.h!=0)return!1;for(let x=0;x<v.g.length;x++)if(v.g[x]!=0)return!1;return!0}function I(v){return v.h==-1}t.l=function(v){return v=w(this,v),I(v)?-1:N(v)?0:1};function P(v){const x=v.g.length,_=[];for(let C=0;C<x;C++)_[C]=~v.g[C];return new a(_,~v.h).add(f)}t.abs=function(){return I(this)?P(this):this},t.add=function(v){const x=Math.max(this.g.length,v.g.length),_=[];let C=0;for(let z=0;z<=x;z++){let A=C+(this.i(z)&65535)+(v.i(z)&65535),E=(A>>>16)+(this.i(z)>>>16)+(v.i(z)>>>16);C=E>>>16,A&=65535,E&=65535,_[z]=E<<16|A}return new a(_,_[_.length-1]&-2147483648?-1:0)};function w(v,x){return v.add(P(x))}t.j=function(v){if(N(this)||N(v))return m;if(I(this))return I(v)?P(this).j(P(v)):P(P(this).j(v));if(I(v))return P(this.j(P(v)));if(this.l(y)<0&&v.l(y)<0)return d(this.m()*v.m());const x=this.g.length+v.g.length,_=[];for(var C=0;C<2*x;C++)_[C]=0;for(C=0;C<this.g.length;C++)for(let z=0;z<v.g.length;z++){const A=this.i(C)>>>16,E=this.i(C)&65535,ge=v.i(z)>>>16,le=v.i(z)&65535;_[2*C+2*z]+=E*le,b(_,2*C+2*z),_[2*C+2*z+1]+=A*le,b(_,2*C+2*z+1),_[2*C+2*z+1]+=E*ge,b(_,2*C+2*z+1),_[2*C+2*z+2]+=A*ge,b(_,2*C+2*z+2)}for(v=0;v<x;v++)_[v]=_[2*v+1]<<16|_[2*v];for(v=x;v<2*x;v++)_[v]=0;return new a(_,0)};function b(v,x){for(;(v[x]&65535)!=v[x];)v[x+1]+=v[x]>>>16,v[x]&=65535,x++}function k(v,x){this.g=v,this.h=x}function R(v,x){if(N(x))throw Error("division by zero");if(N(v))return new k(m,m);if(I(v))return x=R(P(v),x),new k(P(x.g),P(x.h));if(I(x))return x=R(v,P(x)),new k(P(x.g),x.h);if(v.g.length>30){if(I(v)||I(x))throw Error("slowDivide_ only works with positive integers.");for(var _=f,C=x;C.l(v)<=0;)_=M(_),C=M(C);var z=L(_,1),A=L(C,1);for(C=L(C,2),_=L(_,2);!N(C);){var E=A.add(C);E.l(v)<=0&&(z=z.add(_),A=E),C=L(C,1),_=L(_,1)}return x=w(v,z.j(x)),new k(z,x)}for(z=m;v.l(x)>=0;){for(_=Math.max(1,Math.floor(v.m()/x.m())),C=Math.ceil(Math.log(_)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),A=d(_),E=A.j(x);I(E)||E.l(v)>0;)_-=C,A=d(_),E=A.j(x);N(A)&&(A=f),z=z.add(A),v=w(v,E)}return new k(z,v)}t.B=function(v){return R(this,v).h},t.and=function(v){const x=Math.max(this.g.length,v.g.length),_=[];for(let C=0;C<x;C++)_[C]=this.i(C)&v.i(C);return new a(_,this.h&v.h)},t.or=function(v){const x=Math.max(this.g.length,v.g.length),_=[];for(let C=0;C<x;C++)_[C]=this.i(C)|v.i(C);return new a(_,this.h|v.h)},t.xor=function(v){const x=Math.max(this.g.length,v.g.length),_=[];for(let C=0;C<x;C++)_[C]=this.i(C)^v.i(C);return new a(_,this.h^v.h)};function M(v){const x=v.g.length+1,_=[];for(let C=0;C<x;C++)_[C]=v.i(C)<<1|v.i(C-1)>>>31;return new a(_,v.h)}function L(v,x){const _=x>>5;x%=32;const C=v.g.length-_,z=[];for(let A=0;A<C;A++)z[A]=x>0?v.i(A+_)>>>x|v.i(A+_+1)<<32-x:v.i(A+_);return new a(z,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,aj=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ii=a}).apply(typeof pv<"u"?pv:typeof self<"u"?self:typeof window<"u"?window:{});var ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lj,Jo,cj,mc,W0,uj,dj,hj;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ql=="object"&&ql];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in g))break e;g=g[B]}u=u[u.length-1],S=g[u],p=p(S),p!=S&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(p){var g=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&g.push([S,p[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){return d=c,d.apply(null,arguments)}function h(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function m(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(S,B,G){for(var ae=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)ae[Ce-2]=arguments[Ce];return p.prototype[B].apply(S,ae)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){const p=u.length;if(p>0){const g=Array(p);for(let S=0;S<p;S++)g[S]=u[S];return g}return[]}function N(u,p){for(let S=1;S<arguments.length;S++){const B=arguments[S];var g=typeof B;if(g=g!="object"?g:B?Array.isArray(B)?"array":g:"null",g=="array"||g=="object"&&typeof B.length=="number"){g=u.length||0;const G=B.length||0;u.length=g+G;for(let ae=0;ae<G;ae++)u[g+ae]=B[ae]}else u.push(B)}}class I{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(u){a.setTimeout(()=>{throw u},0)}function w(){var u=v;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class b{constructor(){this.h=this.g=null}add(p,g){const S=k.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var k=new I(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let M,L=!1,v=new b,x=()=>{const u=Promise.resolve(void 0);M=()=>{u.then(_)}};function _(){for(var u;u=w();){try{u.h.call(u.g)}catch(g){P(g)}var p=k;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function E(u){return/^[\s\xa0]*$/.test(u)}function ge(u,p){z.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}m(ge,z),ge.prototype.init=function(u,p){const g=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var le="closure_listenable_"+(Math.random()*1e6|0),me=0;function xe(u,p,g,S,B){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=B,this.key=++me,this.da=this.fa=!1}function Y(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function X(u,p,g){for(const S in u)p.call(g,u[S],S,u)}function H(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function te(u){const p={};for(const g in u)p[g]=u[g];return p}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(u,p){let g,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(g in S)u[g]=S[g];for(let G=0;G<se.length;G++)g=se[G],Object.prototype.hasOwnProperty.call(S,g)&&(u[g]=S[g])}}function D(u){this.src=u,this.g={},this.h=0}D.prototype.add=function(u,p,g,S,B){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const ae=$(u,p,S,B);return ae>-1?(p=u[ae],g||(p.fa=!1)):(p=new xe(p,this.src,G,!!S,B),p.fa=g,u.push(p)),p};function U(u,p){const g=p.type;if(g in u.g){var S=u.g[g],B=Array.prototype.indexOf.call(S,p,void 0),G;(G=B>=0)&&Array.prototype.splice.call(S,B,1),G&&(Y(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function $(u,p,g,S){for(let B=0;B<u.length;++B){const G=u[B];if(!G.da&&G.listener==p&&G.capture==!!g&&G.ha==S)return B}return-1}var oe="closure_lm_"+(Math.random()*1e6|0),T={};function O(u,p,g,S,B){if(Array.isArray(p)){for(let G=0;G<p.length;G++)O(u,p[G],g,S,B);return null}return g=Ue(g),u&&u[le]?u.J(p,g,l(S)?!!S.capture:!1,B):F(u,p,g,!1,S,B)}function F(u,p,g,S,B,G){if(!p)throw Error("Invalid event type");const ae=l(B)?!!B.capture:!!B;let Ce=ze(u);if(Ce||(u[oe]=Ce=new D(u)),g=Ce.add(p,g,S,ae,G),g.proxy)return g;if(S=ne(),g.proxy=S,S.src=u,S.listener=g,u.addEventListener)A||(B=ae),B===void 0&&(B=!1),u.addEventListener(p.toString(),S,B);else if(u.attachEvent)u.attachEvent(ve(p.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ne(){function u(g){return p.call(u.src,u.listener,g)}const p=We;return u}function ue(u,p,g,S,B){if(Array.isArray(p))for(var G=0;G<p.length;G++)ue(u,p[G],g,S,B);else S=l(S)?!!S.capture:!!S,g=Ue(g),u&&u[le]?(u=u.i,G=String(p).toString(),G in u.g&&(p=u.g[G],g=$(p,g,S,B),g>-1&&(Y(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[G],u.h--)))):u&&(u=ze(u))&&(p=u.g[p.toString()],u=-1,p&&(u=$(p,g,S,B)),(g=u>-1?p[u]:null)&&de(g))}function de(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[le])U(p.i,u);else{var g=u.type,S=u.proxy;p.removeEventListener?p.removeEventListener(g,S,u.capture):p.detachEvent?p.detachEvent(ve(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=ze(p))?(U(g,u),g.h==0&&(g.src=null,p[oe]=null)):Y(u)}}}function ve(u){return u in T?T[u]:T[u]="on"+u}function We(u,p){if(u.da)u=!0;else{p=new ge(p,this);const g=u.listener,S=u.ha||u.src;u.fa&&de(u),u=g.call(S,p)}return u}function ze(u){return u=u[oe],u instanceof D?u:null}var ft="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ue(u){return typeof u=="function"?u:(u[ft]||(u[ft]=function(p){return u.handleEvent(p)}),u[ft])}function Fe(){C.call(this),this.i=new D(this),this.M=this,this.G=null}m(Fe,C),Fe.prototype[le]=!0,Fe.prototype.removeEventListener=function(u,p,g,S){ue(this,u,p,g,S)};function Be(u,p){var g,S=u.G;if(S)for(g=[];S;S=S.G)g.push(S);if(u=u.M,S=p.type||p,typeof p=="string")p=new z(p,u);else if(p instanceof z)p.target=p.target||u;else{var B=p;p=new z(S,u),pe(p,B)}B=!0;let G,ae;if(g)for(ae=g.length-1;ae>=0;ae--)G=p.g=g[ae],B=yn(G,S,!0,p)&&B;if(G=p.g=u,B=yn(G,S,!0,p)&&B,B=yn(G,S,!1,p)&&B,g)for(ae=0;ae<g.length;ae++)G=p.g=g[ae],B=yn(G,S,!1,p)&&B}Fe.prototype.N=function(){if(Fe.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const g=u.g[p];for(let S=0;S<g.length;S++)Y(g[S]);delete u.g[p],u.h--}}this.G=null},Fe.prototype.J=function(u,p,g,S){return this.i.add(String(u),p,!1,g,S)},Fe.prototype.K=function(u,p,g,S){return this.i.add(String(u),p,!0,g,S)};function yn(u,p,g,S){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let B=!0;for(let G=0;G<p.length;++G){const ae=p[G];if(ae&&!ae.da&&ae.capture==g){const Ce=ae.listener,bt=ae.ha||ae.src;ae.fa&&U(u.i,ae),B=Ce.call(bt,S)!==!1&&B}}return B&&!S.defaultPrevented}function en(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(u,p||0)}function ji(u){u.g=en(()=>{u.g=null,u.i&&(u.i=!1,ji(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class cs extends C{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:ji(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wn(u){C.call(this),this.h=u,this.g={}}m(Wn,C);var Ir=[];function Ar(u){X(u.g,function(p,g){this.g.hasOwnProperty(g)&&de(p)},u),u.g={}}Wn.prototype.N=function(){Wn.Z.N.call(this),Ar(this)},Wn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var W=a.JSON.stringify,re=a.JSON.parse,V=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function q(){}function K(){}var ee={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ee(){z.call(this,"d")}m(Ee,z);function be(){z.call(this,"c")}m(be,z);var Se={},cr=null;function us(){return cr=cr||new Fe}Se.Ia="serverreachability";function Mp(u){z.call(this,Se.Ia,u)}m(Mp,z);function wo(u){const p=us();Be(p,new Mp(p))}Se.STAT_EVENT="statevent";function Vp(u,p){z.call(this,Se.STAT_EVENT,u),this.stat=p}m(Vp,z);function Ht(u){const p=us();Be(p,new Vp(p,u))}Se.Ja="timingevent";function Lp(u,p){z.call(this,Se.Ja,u),this.size=p}m(Lp,z);function ko(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function jo(){this.g=!0}jo.prototype.ua=function(){this.g=!1};function Z5(u,p,g,S,B,G){u.info(function(){if(u.g)if(G){var ae="",Ce=G.split("&");for(let $e=0;$e<Ce.length;$e++){var bt=Ce[$e].split("=");if(bt.length>1){const _t=bt[0];bt=bt[1];const Hn=_t.split("_");ae=Hn.length>=2&&Hn[1]=="type"?ae+(_t+"="+bt+"&"):ae+(_t+"=redacted&")}}}else ae=null;else ae=G;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+p+`
`+g+`
`+ae})}function eN(u,p,g,S,B,G,ae){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+p+`
`+g+`
`+G+" "+ae})}function ds(u,p,g,S){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+nN(u,g)+(S?" "+S:"")})}function tN(u,p){u.info(function(){return"TIMEOUT: "+p})}jo.prototype.info=function(){};function nN(u,p){if(!u.g)return p;if(!p)return null;try{const G=JSON.parse(p);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var g=G[u];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ae=1;ae<S.length;ae++)S[ae]=""}}}}return W(G)}catch{return p}}var ml={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Op={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fp;function nd(){}m(nd,q),nd.prototype.g=function(){return new XMLHttpRequest},Fp=new nd;function No(u){return encodeURIComponent(String(u))}function rN(u){var p=1;u=u.split(":");const g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function Pr(u,p,g,S){this.j=u,this.i=p,this.l=g,this.S=S||1,this.V=new Wn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Bp}function Bp(){this.i=null,this.g="",this.h=!1}var Up={},rd={};function id(u,p,g){u.M=1,u.A=gl(qn(p)),u.u=g,u.R=!0,$p(u,null)}function $p(u,p){u.F=Date.now(),pl(u),u.B=qn(u.A);var g=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),ng(g.i,"t",S),u.C=0,g=u.j.L,u.h=new Bp,u.g=bg(u.j,g?p:null,!u.u),u.P>0&&(u.O=new cs(d(u.Y,u,u.g),u.P)),p=u.V,g=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(Ir[0]=B.toString()),B=Ir);for(let G=0;G<B.length;G++){const ae=O(g,B[G],S||p.handleEvent,!1,p.h||p);if(!ae)break;p.g[ae.key]=ae}p=u.J?te(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),wo(),Z5(u.i,u.v,u.B,u.l,u.S,u.u)}Pr.prototype.ba=function(u){u=u.target;const p=this.O;p&&Mr(u)==3?p.j():this.Y(u)},Pr.prototype.Y=function(u){try{if(u==this.g)e:{const Ce=Mr(this.g),bt=this.g.ya(),$e=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||cg(this.g)))){this.K||Ce!=4||bt==7||(bt==8||$e<=0?wo(3):wo(2)),sd(this);var p=this.g.ca();this.X=p;var g=iN(this);if(this.o=p==200,eN(this.i,this.v,this.B,this.l,this.S,Ce,p),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(S)){var G=S;break t}}G=null}if(u=G)ds(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,od(this,u);else{this.o=!1,this.m=3,Ht(12),Ni(this),_o(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<g.length;)if(_t=sN(this,g),_t==rd){Ce==4&&(this.m=4,Ht(14),u=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Up){this.m=4,Ht(15),ds(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else ds(this.i,this.l,_t,null),od(this,_t);if(Wp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||g.length!=0||this.h.h||(this.m=1,Ht(16),u=!1),this.o=this.o&&u,!u)ds(this.i,this.l,g,"[Invalid Chunked Response]"),Ni(this),_o(this);else if(g.length>0&&!this.W){this.W=!0;var ae=this.j;ae.g==this&&ae.aa&&!ae.P&&(ae.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),md(ae),ae.P=!0,Ht(11))}}else ds(this.i,this.l,g,null),od(this,g);Ce==4&&Ni(this),this.o&&!this.K&&(Ce==4?gg(this.j,this):(this.o=!1,pl(this)))}else vN(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ht(12)):(this.m=0,Ht(13)),Ni(this),_o(this)}}}catch{}finally{}};function iN(u){if(!Wp(u))return u.g.la();const p=cg(u.g);if(p==="")return"";let g="";const S=p.length,B=Mr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Ni(u),_o(u),"";u.h.i=new a.TextDecoder}for(let G=0;G<S;G++)u.h.h=!0,g+=u.h.i.decode(p[G],{stream:!(B&&G==S-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function Wp(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function sN(u,p){var g=u.C,S=p.indexOf(`
`,g);return S==-1?rd:(g=Number(p.substring(g,S)),isNaN(g)?Up:(S+=1,S+g>p.length?rd:(p=p.slice(S,S+g),u.C=S+g,p)))}Pr.prototype.cancel=function(){this.K=!0,Ni(this)};function pl(u){u.T=Date.now()+u.H,qp(u,u.H)}function qp(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ko(d(u.aa,u),p)}function sd(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Pr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(tN(this.i,this.B),this.M!=2&&(wo(),Ht(17)),Ni(this),this.m=2,_o(this)):qp(this,this.T-u)};function _o(u){u.j.I==0||u.K||gg(u.j,u)}function Ni(u){sd(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Ar(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function od(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||ad(g.h,u))){if(!u.L&&ad(g.h,u)&&g.I==3){try{var S=g.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)wl(g),vl(g);else break e;fd(g),Ht(18)}}else g.xa=B[1],0<g.xa-g.K&&B[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ko(d(g.Va,g),6e3));Kp(g.h)<=1&&g.ta&&(g.ta=void 0)}else zi(g,11)}else if((u.L||g.g==u)&&wl(g),!E(p))for(B=g.Ba.g.parse(p),p=0;p<B.length;p++){let $e=B[p];const _t=$e[0];if(!(_t<=g.K))if(g.K=_t,$e=$e[1],g.I==2)if($e[0]=="c"){g.M=$e[1],g.ba=$e[2];const Hn=$e[3];Hn!=null&&(g.ka=Hn,g.j.info("VER="+g.ka));const Ci=$e[4];Ci!=null&&(g.za=Ci,g.j.info("SVER="+g.za));const Vr=$e[5];Vr!=null&&typeof Vr=="number"&&Vr>0&&(S=1.5*Vr,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Lr=u.g;if(Lr){const jl=Lr.g?Lr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jl){var G=S.h;G.g||jl.indexOf("spdy")==-1&&jl.indexOf("quic")==-1&&jl.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(ld(G,G.h),G.h=null))}if(S.G){const pd=Lr.g?Lr.g.getResponseHeader("X-HTTP-Session-Id"):null;pd&&(S.wa=pd,Ke(S.J,S.G,pd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var ae=u;if(S.na=vg(S,S.L?S.ba:null,S.W),ae.L){Qp(S.h,ae);var Ce=ae,bt=S.O;bt&&(Ce.H=bt),Ce.D&&(sd(Ce),pl(Ce)),S.g=ae}else mg(S);g.i.length>0&&bl(g)}else $e[0]!="stop"&&$e[0]!="close"||zi(g,7);else g.I==3&&($e[0]=="stop"||$e[0]=="close"?$e[0]=="stop"?zi(g,7):hd(g):$e[0]!="noop"&&g.l&&g.l.qa($e),g.A=0)}}wo(4)}catch{}}var oN=class{constructor(u,p){this.g=u,this.map=p}};function Hp(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Kp(u){return u.h?1:u.g?u.g.size:0}function ad(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function ld(u,p){u.g?u.g.add(p):u.h=p}function Qp(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Hp.prototype.cancel=function(){if(this.i=Yp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yp(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.G);return p}return y(u.i)}var Xp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aN(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const S=u[g].indexOf("=");let B,G=null;S>=0?(B=u[g].substring(0,S),G=u[g].substring(S+1)):B=u[g],p(B,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Rr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Rr?(this.l=u.l,zo(this,u.j),this.o=u.o,this.g=u.g,Co(this,u.u),this.h=u.h,cd(this,rg(u.i)),this.m=u.m):u&&(p=String(u).match(Xp))?(this.l=!1,zo(this,p[1]||"",!0),this.o=So(p[2]||""),this.g=So(p[3]||"",!0),Co(this,p[4]),this.h=So(p[5]||"",!0),cd(this,p[6]||"",!0),this.m=So(p[7]||"")):(this.l=!1,this.i=new To(null,this.l))}Rr.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Eo(p,Jp,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Eo(p,Jp,!0),"@"),u.push(No(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(Eo(g,g.charAt(0)=="/"?uN:cN,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",Eo(g,hN)),u.join("")},Rr.prototype.resolve=function(u){const p=qn(this);let g=!!u.j;g?zo(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var S=u.h;if(g)Co(p,u.u);else if(g=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=p.h.lastIndexOf("/");B!=-1&&(S=p.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const G=[];for(let ae=0;ae<B.length;){const Ce=B[ae++];Ce=="."?S&&ae==B.length&&G.push(""):Ce==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&ae==B.length&&G.push("")):(G.push(Ce),S=!0)}S=G.join("/")}else S=B}return g?p.h=S:g=u.i.toString()!=="",g?cd(p,rg(u.i)):g=!!u.m,g&&(p.m=u.m),p};function qn(u){return new Rr(u)}function zo(u,p,g){u.j=g?So(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Co(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function cd(u,p,g){p instanceof To?(u.i=p,fN(u.i,u.l)):(g||(p=Eo(p,dN)),u.i=new To(p,u.l))}function Ke(u,p,g){u.i.set(p,g)}function gl(u){return Ke(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function So(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Eo(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,lN),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function lN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Jp=/[#\/\?@]/g,cN=/[#\?:]/g,uN=/[#\?]/g,dN=/[#\?@]/g,hN=/#/g;function To(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function _i(u){u.g||(u.g=new Map,u.h=0,u.i&&aN(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=To.prototype,t.add=function(u,p){_i(this),this.i=null,u=hs(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function Zp(u,p){_i(u),p=hs(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function eg(u,p){return _i(u),p=hs(u,p),u.g.has(p)}t.forEach=function(u,p){_i(this),this.g.forEach(function(g,S){g.forEach(function(B){u.call(p,B,S,this)},this)},this)};function tg(u,p){_i(u);let g=[];if(typeof p=="string")eg(u,p)&&(g=g.concat(u.g.get(hs(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}t.set=function(u,p){return _i(this),this.i=null,u=hs(this,u),eg(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=tg(this,u),u.length>0?String(u[0]):p):p};function ng(u,p,g){Zp(u,p),g.length>0&&(u.i=null,u.g.set(hs(u,p),y(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var g=p[S];const B=No(g);g=tg(this,g);for(let G=0;G<g.length;G++){let ae=B;g[G]!==""&&(ae+="="+No(g[G])),u.push(ae)}}return this.i=u.join("&")};function rg(u){const p=new To;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function hs(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function fN(u,p){p&&!u.j&&(_i(u),u.i=null,u.g.forEach(function(g,S){const B=S.toLowerCase();S!=B&&(Zp(this,S),ng(this,B,g))},u)),u.j=p}function mN(u,p){const g=new jo;if(a.Image){const S=new Image;S.onload=h(Dr,g,"TestLoadImage: loaded",!0,p,S),S.onerror=h(Dr,g,"TestLoadImage: error",!1,p,S),S.onabort=h(Dr,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=h(Dr,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else p(!1)}function pN(u,p){const g=new jo,S=new AbortController,B=setTimeout(()=>{S.abort(),Dr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:S.signal}).then(G=>{clearTimeout(B),G.ok?Dr(g,"TestPingServer: ok",!0,p):Dr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),Dr(g,"TestPingServer: error",!1,p)})}function Dr(u,p,g,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(g)}catch{}}function gN(){this.g=new V}function ud(u){this.i=u.Sb||null,this.h=u.ab||!1}m(ud,q),ud.prototype.g=function(){return new xl(this.i,this.h)};function xl(u,p){Fe.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(xl,Fe),t=xl.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ig(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ig(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Io(this):Ao(this),this.readyState==3&&ig(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Io(this))},t.Na=function(u){this.g&&(this.response=u,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ao(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function sg(u){let p="";return X(u,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function dd(u,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=sg(g),typeof u=="string"?g!=null&&No(g):Ke(u,p,g))}function at(u){Fe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(at,Fe);var xN=/^https?$/i,yN=["POST","PUT"];t=at.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fp.g(),this.g.onreadystatechange=f(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(G){og(this,G);return}if(u=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)g.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())g.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(G=>G.toLowerCase()=="content-type"),B=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(yN,p,void 0)>=0)||S||B||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ae]of g)this.g.setRequestHeader(G,ae);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){og(this,G)}};function og(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,ag(u),yl(u)}function ag(u){u.A||(u.A=!0,Be(u,"complete"),Be(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Be(this,"complete"),Be(this,"abort"),yl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),yl(this,!0)),at.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?lg(this):this.Xa())},t.Xa=function(){lg(this)};function lg(u){if(u.h&&typeof o<"u"){if(u.v&&Mr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Be(u,"readystatechange"),Mr(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=G===0){let ae=String(u.D).match(Xp)[1]||null;!ae&&a.self&&a.self.location&&(ae=a.self.location.protocol.slice(0,-1)),S=!xN.test(ae?ae.toLowerCase():"")}g=S}if(g)Be(u,"complete"),Be(u,"success");else{u.o=6;try{var B=Mr(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",ag(u)}}finally{yl(u)}}}}function yl(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,p||Be(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Mr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Mr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),re(p)}};function cg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function vN(u){const p={};u=(u.g&&Mr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(E(u[S]))continue;var g=rN(u[S]);const B=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const G=p[B]||[];p[B]=G,G.push(g)}H(p,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function ug(u){this.za=0,this.i=[],this.j=new jo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Po("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Po("baseRetryDelayMs",5e3,u),this.Za=Po("retryDelaySeedMs",1e4,u),this.Ta=Po("forwardChannelMaxRetries",2,u),this.va=Po("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Hp(u&&u.concurrentRequestLimit),this.Ba=new gN,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ug.prototype,t.ka=8,t.I=1,t.connect=function(u,p,g,S){Ht(0),this.W=u,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=vg(this,null,this.W),bl(this)};function hd(u){if(dg(u),u.I==3){var p=u.V++,g=qn(u.J);if(Ke(g,"SID",u.M),Ke(g,"RID",p),Ke(g,"TYPE","terminate"),Ro(u,g),p=new Pr(u,u.j,p),p.M=2,p.A=gl(qn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.A,g=!0),g||(p.g=bg(p.j,null),p.g.ea(p.A)),p.F=Date.now(),pl(p)}yg(u)}function vl(u){u.g&&(md(u),u.g.cancel(),u.g=null)}function dg(u){vl(u),u.v&&(a.clearTimeout(u.v),u.v=null),wl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function bl(u){if(!Gp(u.h)&&!u.m){u.m=!0;var p=u.Ea;M||x(),L||(M(),L=!0),v.add(p,u),u.D=0}}function bN(u,p){return Kp(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ko(d(u.Ea,u,p),xg(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new Pr(this,this.j,u);let G=this.o;if(this.U&&(G?(G=te(G),pe(G,this.U)):G=this.U),this.u!==null||this.R||(B.J=G,G=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=fg(this,B,p),g=qn(this.J),Ke(g,"RID",u),Ke(g,"CVER",22),this.G&&Ke(g,"X-HTTP-Session-Id",this.G),Ro(this,g),G&&(this.R?p="headers="+No(sg(G))+"&"+p:this.u&&dd(g,this.u,G)),ld(this.h,B),this.Ra&&Ke(g,"TYPE","init"),this.S?(Ke(g,"$req",p),Ke(g,"SID","null"),B.U=!0,id(B,g,null)):id(B,g,p),this.I=2}}else this.I==3&&(u?hg(this,u):this.i.length==0||Gp(this.h)||hg(this))};function hg(u,p){var g;p?g=p.l:g=u.V++;const S=qn(u.J);Ke(S,"SID",u.M),Ke(S,"RID",g),Ke(S,"AID",u.K),Ro(u,S),u.u&&u.o&&dd(S,u.u,u.o),g=new Pr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=fg(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ld(u.h,g),id(g,S,p)}function Ro(u,p){u.H&&X(u.H,function(g,S){Ke(p,S,g)}),u.l&&X({},function(g,S){Ke(p,S,g)})}function fg(u,p,g){g=Math.min(u.i.length,g);const S=u.l?d(u.l.Ka,u.l,u):null;e:{var B=u.i;let Ce=-1;for(;;){const bt=["count="+g];Ce==-1?g>0?(Ce=B[0].g,bt.push("ofs="+Ce)):Ce=0:bt.push("ofs="+Ce);let $e=!0;for(let _t=0;_t<g;_t++){var G=B[_t].g;const Hn=B[_t].map;if(G-=Ce,G<0)Ce=Math.max(0,B[_t].g-100),$e=!1;else try{G="req"+G+"_"||"";try{var ae=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Ci,Vr]of ae){let Lr=Vr;l(Vr)&&(Lr=W(Vr)),bt.push(G+Ci+"="+encodeURIComponent(Lr))}}catch(Ci){throw bt.push(G+"type="+encodeURIComponent("_badmap")),Ci}}catch{S&&S(Hn)}}if($e){ae=bt.join("&");break e}}ae=void 0}return u=u.i.splice(0,g),p.G=u,ae}function mg(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;M||x(),L||(M(),L=!0),v.add(p,u),u.A=0}}function fd(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ko(d(u.Da,u),xg(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,pg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ko(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ht(10),vl(this),pg(this))};function md(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function pg(u){u.g=new Pr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=qn(u.na);Ke(p,"RID","rpc"),Ke(p,"SID",u.M),Ke(p,"AID",u.K),Ke(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ke(p,"TO",u.ia),Ke(p,"TYPE","xmlhttp"),Ro(u,p),u.u&&u.o&&dd(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=gl(qn(p)),g.u=null,g.R=!0,$p(g,u)}t.Va=function(){this.C!=null&&(this.C=null,vl(this),fd(this),Ht(19))};function wl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function gg(u,p){var g=null;if(u.g==p){wl(u),md(u),u.g=null;var S=2}else if(ad(u.h,p))g=p.G,Qp(u.h,p),S=1;else return;if(u.I!=0){if(p.o)if(S==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var B=u.D;S=us(),Be(S,new Lp(S,g)),bl(u)}else mg(u);else if(B=p.m,B==3||B==0&&p.X>0||!(S==1&&bN(u,p)||S==2&&fd(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),B){case 1:zi(u,5);break;case 4:zi(u,10);break;case 3:zi(u,6);break;default:zi(u,2)}}}function xg(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function zi(u,p){if(u.j.info("Error code "+p),p==2){var g=d(u.bb,u),S=u.Ua;const B=!S;S=new Rr(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zo(S,"https"),gl(S),B?mN(S.toString(),g):pN(S.toString(),g)}else Ht(2);u.I=0,u.l&&u.l.pa(p),yg(u),dg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ht(2)):(this.j.info("Failed to ping google.com"),Ht(1))};function yg(u){if(u.I=0,u.ja=[],u.l){const p=Yp(u.h);(p.length!=0||u.i.length!=0)&&(N(u.ja,p),N(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function vg(u,p,g){var S=g instanceof Rr?qn(g):new Rr(g);if(S.g!="")p&&(S.g=p+"."+S.g),Co(S,S.u);else{var B=a.location;S=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;const G=new Rr(null);S&&zo(G,S),p&&(G.g=p),B&&Co(G,B),g&&(G.h=g),S=G}return g=u.G,p=u.wa,g&&p&&Ke(S,g,p),Ke(S,"VER",u.ka),Ro(u,S),S}function bg(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new at(new ud({ab:g})):new at(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wg(){}t=wg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function kl(){}kl.prototype.g=function(u,p){return new un(u,p)};function un(u,p){Fe.call(this),this.g=new ug(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!E(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!E(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new fs(this)}m(un,Fe),un.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},un.prototype.close=function(){hd(this.g)},un.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=W(u),u=g);p.i.push(new oN(p.Ya++,u)),p.I==3&&bl(p)},un.prototype.N=function(){this.g.l=null,delete this.j,hd(this.g),delete this.g,un.Z.N.call(this)};function kg(u){Ee.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}m(kg,Ee);function jg(){be.call(this),this.status=1}m(jg,be);function fs(u){this.g=u}m(fs,wg),fs.prototype.ra=function(){Be(this.g,"a")},fs.prototype.qa=function(u){Be(this.g,new kg(u))},fs.prototype.pa=function(u){Be(this.g,new jg)},fs.prototype.oa=function(){Be(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,un.prototype.send=un.prototype.o,un.prototype.open=un.prototype.m,un.prototype.close=un.prototype.close,hj=function(){return new kl},dj=function(){return us()},uj=Se,W0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ml.NO_ERROR=0,ml.TIMEOUT=8,ml.HTTP_ERROR=6,mc=ml,Op.COMPLETE="complete",cj=Op,K.EventType=ee,ee.OPEN="a",ee.CLOSE="b",ee.ERROR="c",ee.MESSAGE="d",Fe.prototype.listen=Fe.prototype.J,Jo=K,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,lj=at}).apply(typeof ql<"u"?ql:typeof self<"u"?self:typeof window<"u"?window:{});const gv="@firebase/firestore",xv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new Hm("@firebase/firestore");function gs(){return es.logLevel}function he(t,...e){if(es.logLevel<=Re.DEBUG){const n=e.map(ep);es.debug(`Firestore (${go}): ${t}`,...n)}}function Sr(t,...e){if(es.logLevel<=Re.ERROR){const n=e.map(ep);es.error(`Firestore (${go}): ${t}`,...n)}}function no(t,...e){if(es.logLevel<=Re.WARN){const n=e.map(ep);es.warn(`Firestore (${go}): ${t}`,...n)}}function ep(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,fj(t,r,n)}function fj(t,e,n){let r=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Sr(r),new Error(r)}function Le(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||fj(e,i,r)}function _e(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends ki{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class UA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $A{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Le(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new xr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le(typeof r.accessToken=="string",31837,{l:r}),new mj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Le(e===null||typeof e=="string",2055,{h:e}),new Bt(e)}}class WA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,i3(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Le(this.o===void 0,3512);const r=o=>{o.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,he("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Le(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=GA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Ie(t,e){return t<e?-1:t>e?1:0}function q0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return uh(i)===uh(o)?Ie(i,o):uh(i)?1:-1}return Ie(t.length,e.length)}const KA=55296,QA=57343;function uh(t){const e=t.charCodeAt(0);return e>=KA&&e<=QA}function ro(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="__name__";class Yn{constructor(e,n,r){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&we(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=Yn.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Ie(e.length,n.length)}static compareSegments(e,n){const r=Yn.isNumericId(e),i=Yn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Yn.extractNumericId(e).compare(Yn.extractNumericId(n)):q0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ii.fromString(e.substring(4,e.length-2))}}class He extends Yn{construct(e,n,r){return new He(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new He(n)}static emptyPath(){return new He([])}}const YA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Yn{construct(e,n,r){return new Pt(e,n,r)}static isValidIdentifier(e){return YA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vv}static keyField(){return new Pt([vv])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ce(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ce(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(o(),i++)}if(o(),a)throw new ce(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(He.fromString(e))}static fromName(e){return new ye(He.fromString(e).popFirst(5))}static empty(){return new ye(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new He(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t,e,n){if(!n)throw new ce(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function XA(t,e,n,r){if(e===!0&&r===!0)throw new ce(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function bv(t){if(!ye.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wv(t){if(ye.isDocumentKey(t))throw new ce(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function gj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Uu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":we(12329,{type:typeof t})}function ui(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uu(t);throw new ce(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ll(t,e){if(!gj(t))throw new ce(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new ce(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv=-62135596800,jv=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*jv);return new Ye(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<kv)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/jv}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ll(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-kv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:yt("string",Ye._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Ye(0,0))}static max(){return new je(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=-1;function JA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=je.fromTimestamp(r===1e9?new Ye(n+1,0):new Ye(n,r));return new di(i,ye.empty(),e)}function ZA(t){return new di(t.readTime,t.key,qa)}class di{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new di(je.min(),ye.empty(),qa)}static max(){return new di(je.max(),ye.empty(),qa)}}function eP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==tP)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let i=0,o=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++o,a&&o===i&&n()},c=>r(c))}),a=!0,o===i&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(i=>i?Z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,i)=>{const o=e.length,a=new Array(o);let l=0;for(let c=0;c<o;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===o&&r(a)},h=>i(h))}})}static doWhile(e,n){return new Z((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function rP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}$u.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np=-1;function Wu(t){return t==null}function su(t){return t===0&&1/t==-1/0}function iP(t){return typeof t=="number"&&Number.isInteger(t)&&!su(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj="";function sP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nv(e)),e=oP(t.get(n),e);return Nv(e)}function oP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case xj:n+="";break;default:n+=o}}return n}function Nv(t){return t+xj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n){this.comparator=e,this.root=n||At.EMPTY}insert(e,n){return new ot(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))}remove(e){return new ot(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hl(this.root,e,this.comparator,!0)}}class Hl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class At{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??At.RED,this.left=i??At.EMPTY,this.right=o??At.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new At(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return At.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return At.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,At.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,At.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}At.EMPTY=null,At.RED=!0,At.BLACK=!1;At.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new At(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.comparator=e,this.data=new ot(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zv(this.data.getIterator())}getIteratorFrom(e){return new zv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Nt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Nt(this.comparator);return n.data=e,n}}class zv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new On([])}unionWith(e){let n=new Nt(Pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new On(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new vj("Invalid base64 string: "+o):o}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const aP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hi(t){if(Le(!!t,39018),typeof t=="string"){let e=0;const n=aP.exec(t);if(Le(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dt(t.seconds),nanos:dt(t.nanos)}}function dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fi(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="server_timestamp",wj="__type__",kj="__previous_value__",jj="__local_write_time__";function rp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[wj])==null?void 0:r.stringValue)===bj}function qu(t){const e=t.mapValue.fields[kj];return rp(e)?qu(e):e}function Ha(t){const e=hi(t.mapValue.fields[jj].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e,n,r,i,o,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const ou="(default)";class Ga{constructor(e,n){this.projectId=e,this.database=n||ou}static empty(){return new Ga("","")}get isDefaultDatabase(){return this.database===ou}isEqual(e){return e instanceof Ga&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="__type__",cP="__max__",Gl={mapValue:{}},_j="__vector__",au="value";function mi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rp(t)?4:dP(t)?9007199254740991:uP(t)?10:11:we(28295,{value:t})}function lr(t,e){if(t===e)return!0;const n=mi(t);if(n!==mi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=hi(i.timestampValue),l=hi(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return fi(i.bytesValue).isEqual(fi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return dt(i.geoPointValue.latitude)===dt(o.geoPointValue.latitude)&&dt(i.geoPointValue.longitude)===dt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return dt(i.integerValue)===dt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=dt(i.doubleValue),l=dt(o.doubleValue);return a===l?su(a)===su(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],lr);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},l=o.mapValue.fields||{};if(_v(a)!==_v(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!lr(a[c],l[c])))return!1;return!0}(t,e);default:return we(52216,{left:t})}}function Ka(t,e){return(t.values||[]).find(n=>lr(n,e))!==void 0}function io(t,e){if(t===e)return 0;const n=mi(t),r=mi(e);if(n!==r)return Ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=dt(o.integerValue||o.doubleValue),c=dt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Cv(t.timestampValue,e.timestampValue);case 4:return Cv(Ha(t),Ha(e));case 5:return q0(t.stringValue,e.stringValue);case 6:return function(o,a){const l=fi(o),c=fi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ie(l[d],c[d]);if(h!==0)return h}return Ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=Ie(dt(o.latitude),dt(a.latitude));return l!==0?l:Ie(dt(o.longitude),dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Sv(t.arrayValue,e.arrayValue);case 10:return function(o,a){var f,y,N,I;const l=o.fields||{},c=a.fields||{},d=(f=l[au])==null?void 0:f.arrayValue,h=(y=c[au])==null?void 0:y.arrayValue,m=Ie(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((I=h==null?void 0:h.values)==null?void 0:I.length)||0);return m!==0?m:Sv(d,h)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Gl.mapValue&&a===Gl.mapValue)return 0;if(o===Gl.mapValue)return 1;if(a===Gl.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const f=q0(c[m],h[m]);if(f!==0)return f;const y=io(l[c[m]],d[h[m]]);if(y!==0)return y}return Ie(c.length,h.length)}(t.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function Cv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=hi(t),r=hi(e),i=Ie(n.seconds,r.seconds);return i!==0?i:Ie(n.nanos,r.nanos)}function Sv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=io(n[i],r[i]);if(o)return o}return Ie(n.length,r.length)}function so(t){return H0(t)}function H0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=hi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return fi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=H0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${H0(n.fields[a])}`;return i+"}"}(t.mapValue):we(61005,{value:t})}function pc(t){switch(mi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=qu(t);return e?16+pc(e):16;case 5:return 2*t.stringValue.length;case 6:return fi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+pc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return is(r.fields,(o,a)=>{i+=o.length+pc(a)}),i}(t.mapValue);default:throw we(13486,{value:t})}}function Ev(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function G0(t){return!!t&&"integerValue"in t}function ip(t){return!!t&&"arrayValue"in t}function Tv(t){return!!t&&"nullValue"in t}function Iv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gc(t){return!!t&&"mapValue"in t}function uP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Nj])==null?void 0:r.stringValue)===_j}function xa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=xa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=xa(t.arrayValue.values[n]);return e}return{...t}}function dP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e){this.value=e}static empty(){return new kn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=xa(n)}setAll(e){let n=Pt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=xa(a):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());gc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];gc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){is(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new kn(xa(this.value))}}function zj(t){const e=[];return is(t.fields,(n,r)=>{const i=new Pt([n]);if(gc(r)){const o=zj(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,n,r,i,o,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new $t(e,0,je.min(),je.min(),je.min(),kn.empty(),0)}static newFoundDocument(e,n,r,i){return new $t(e,1,n,je.min(),r,i,0)}static newNoDocument(e,n){return new $t(e,2,n,je.min(),je.min(),kn.empty(),0)}static newUnknownDocument(e,n){return new $t(e,3,n,je.min(),je.min(),kn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof $t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new $t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.position=e,this.inclusive=n}}function Av(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=ye.comparator(ye.fromName(a.referenceValue),n.key):r=io(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function hP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cj{}class xt extends Cj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new mP(e,n,r):n==="array-contains"?new xP(e,r):n==="in"?new yP(e,r):n==="not-in"?new vP(e,r):n==="array-contains-any"?new bP(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new pP(e,r):new gP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(io(n,this.value)):n!==null&&mi(this.value)===mi(n)&&this.matchesComparison(io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends Cj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $n(e,n)}matches(e){return Sj(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Sj(t){return t.op==="and"}function Ej(t){return fP(t)&&Sj(t)}function fP(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function K0(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+so(t.value);if(Ej(t))return t.filters.map(e=>K0(e)).join(",");{const e=t.filters.map(n=>K0(n)).join(",");return`${t.op}(${e})`}}function Tj(t,e){return t instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.field.isEqual(i.field)&&lr(r.value,i.value)}(t,e):t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,l)=>o&&Tj(a,i.filters[l]),!0):!1}(t,e):void we(19439)}function Ij(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(Ij).join(" ,")+"}"}(t):"Filter"}class mP extends xt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class pP extends xt{constructor(e,n){super(e,"in",n),this.keys=Aj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gP extends xt{constructor(e,n){super(e,"not-in",n),this.keys=Aj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Aj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class xP extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ip(n)&&Ka(n.arrayValue,this.value)}}class yP extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ka(this.value.arrayValue,n)}}class vP extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ka(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ka(this.value.arrayValue,n)}}class bP extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ka(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n=null,r=[],i=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function Rv(t,e=null,n=[],r=[],i=null,o=null,a=null){return new wP(t,e,n,r,i,o,a)}function sp(t){const e=_e(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>K0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Wu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>so(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>so(r)).join(",")),e.Te=n}return e.Te}function op(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!hP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Tj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pv(t.startAt,e.startAt)&&Pv(t.endAt,e.endAt)}function Q0(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n=null,r=[],i=[],o=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function kP(t,e,n,r,i,o,a,l){return new vo(t,e,n,r,i,o,a,l)}function ap(t){return new vo(t)}function Dv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Pj(t){return t.collectionGroup!==null}function ya(t){const e=_e(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Nt(Pt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Qa(o,r))}),n.has(Pt.keyField().canonicalString())||e.Ie.push(new Qa(Pt.keyField(),r))}return e.Ie}function rr(t){const e=_e(t);return e.Ee||(e.Ee=jP(e,ya(t))),e.Ee}function jP(t,e){if(t.limitType==="F")return Rv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Qa(i.field,o)});const n=t.endAt?new lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lu(t.startAt.position,t.startAt.inclusive):null;return Rv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Y0(t,e){const n=t.filters.concat([e]);return new vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function X0(t,e,n){return new vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Hu(t,e){return op(rr(t),rr(e))&&t.limitType===e.limitType}function Rj(t){return`${sp(rr(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Ij(i)).join(", ")}]`),Wu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>so(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>so(i)).join(",")),`Target(${r})`}(rr(t))}; limitType=${t.limitType})`}function Gu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ye.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ya(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const d=Av(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,ya(r),i)||r.endAt&&!function(a,l,c){const d=Av(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,ya(r),i))}(t,e)}function NP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Dj(t){return(e,n)=>{let r=!1;for(const i of ya(t)){const o=_P(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _P(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(o,a,l){const c=a.data.field(o),d=l.data.field(o);return c!==null&&d!==null?io(c,d):we(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return we(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return yj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP=new ot(ye.comparator);function Er(){return zP}const Mj=new ot(ye.comparator);function Zo(...t){let e=Mj;for(const n of t)e=e.insert(n.key,n);return e}function Vj(t){let e=Mj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Fi(){return va()}function Lj(){return va()}function va(){return new ss(t=>t.toString(),(t,e)=>t.isEqual(e))}const CP=new ot(ye.comparator),SP=new Nt(ye.comparator);function Ae(...t){let e=SP;for(const n of t)e=e.add(n);return e}const EP=new Nt(Ie);function TP(){return EP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(e)?"-0":e}}function Oj(t){return{integerValue:""+t}}function IP(t,e){return iP(e)?Oj(e):lp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(){this._=void 0}}function AP(t,e,n){return t instanceof cu?function(i,o){const a={fields:{[wj]:{stringValue:bj},[jj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&rp(o)&&(o=qu(o)),o&&(a.fields[kj]=o),{mapValue:a}}(n,e):t instanceof Ya?Bj(t,e):t instanceof Xa?Uj(t,e):function(i,o){const a=Fj(i,o),l=Mv(a)+Mv(i.Ae);return G0(a)&&G0(i.Ae)?Oj(l):lp(i.serializer,l)}(t,e)}function PP(t,e,n){return t instanceof Ya?Bj(t,e):t instanceof Xa?Uj(t,e):n}function Fj(t,e){return t instanceof uu?function(r){return G0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class cu extends Ku{}class Ya extends Ku{constructor(e){super(),this.elements=e}}function Bj(t,e){const n=$j(e);for(const r of t.elements)n.some(i=>lr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Xa extends Ku{constructor(e){super(),this.elements=e}}function Uj(t,e){let n=$j(e);for(const r of t.elements)n=n.filter(i=>!lr(i,r));return{arrayValue:{values:n}}}class uu extends Ku{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Mv(t){return dt(t.integerValue||t.doubleValue)}function $j(t){return ip(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function RP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ya&&i instanceof Ya||r instanceof Xa&&i instanceof Xa?ro(r.elements,i.elements,lr):r instanceof uu&&i instanceof uu?lr(r.Ae,i.Ae):r instanceof cu&&i instanceof cu}(t.transform,e.transform)}class DP{constructor(e,n){this.version=e,this.transformResults=n}}class ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Qu{}function Wj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cp(t.key,ir.none()):new cl(t.key,t.data,ir.none());{const n=t.data,r=kn.empty();let i=new Nt(Pt.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new os(t.key,r,new On(i.toArray()),ir.none())}}function MP(t,e,n){t instanceof cl?function(i,o,a){const l=i.value.clone(),c=Lv(i.fieldTransforms,o,a.transformResults);l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof os?function(i,o,a){if(!xc(i.precondition,o))return void o.convertToUnknownDocument(a.version);const l=Lv(i.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(qj(i)),c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ba(t,e,n,r){return t instanceof cl?function(o,a,l,c){if(!xc(o.precondition,a))return l;const d=o.value.clone(),h=Ov(o.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof os?function(o,a,l,c){if(!xc(o.precondition,a))return l;const d=Ov(o.fieldTransforms,c,a),h=a.data;return h.setAll(qj(o)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(o,a,l){return xc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function VP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=Fj(r.transform,i||null);o!=null&&(n===null&&(n=kn.empty()),n.set(r.field,o))}return n||null}function Vv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ro(r,i,(o,a)=>RP(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cl extends Qu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class os extends Qu{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function qj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Lv(t,e,n){const r=new Map;Le(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,l=e.data.field(o.field);r.set(o.field,PP(a,l,n[i]))}return r}function Ov(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,AP(o,a,e))}return r}class cp extends Qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class LP extends Qu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&MP(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ba(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Lj();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=n.has(i.key)?null:l;const c=Wj(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(je.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(n,r)=>Vv(n,r))&&ro(this.baseMutations,e.baseMutations,(n,r)=>Vv(n,r))}}class up{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Le(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return CP}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new up(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Pe;function UP(t){switch(t){case J.OK:return we(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return we(15467,{code:t})}}function Hj(t){if(t===void 0)return Sr("GRPC error has no .code"),J.UNKNOWN;switch(t){case mt.OK:return J.OK;case mt.CANCELLED:return J.CANCELLED;case mt.UNKNOWN:return J.UNKNOWN;case mt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case mt.INTERNAL:return J.INTERNAL;case mt.UNAVAILABLE:return J.UNAVAILABLE;case mt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case mt.NOT_FOUND:return J.NOT_FOUND;case mt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case mt.ABORTED:return J.ABORTED;case mt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case mt.DATA_LOSS:return J.DATA_LOSS;default:return we(39323,{code:t})}}(Pe=mt||(mt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=new ii([4294967295,4294967295],0);function Fv(t){const e=$P().encode(t),n=new aj;return n.update(e),new Uint8Array(n.digest())}function Bv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ii([n,r],0),new ii([i,o],0)]}class dp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ea(`Invalid padding: ${n}`);if(r<0)throw new ea(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ea(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ea(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ii.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ii.fromNumber(r)));return i.compare(WP)===1&&(i=new ii([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Fv(e),[r,i]=Bv(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,i,o);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new dp(o,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Fv(e),[r,i]=Bv(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,i,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ea extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ul.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Yu(je.min(),i,new ot(Ie),Er(),Ae())}}class ul{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ul(r,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Gj{constructor(e,n){this.targetId=e,this.Ce=n}}class Kj{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Uv{constructor(){this.ve=0,this.Fe=$v(),this.Me=Vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),r=Ae();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:we(38017,{changeType:o})}}),new ul(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=$v()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Le(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class qP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Er(),this.Je=Kl(),this.He=Kl(),this.Ye=new ot(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:we(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(Q0(o))if(r===0){const a=new ye(o.path);this.et(n,a,$t.newNoDocument(a,je.min()))}else Le(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,l;try{a=fi(r).toUint8Array()}catch(c){if(c instanceof vj)return no("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new dp(a,i,o)}catch(c){return no(c instanceof ea?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&Q0(l.target)){const c=new ye(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,$t.newNoDocument(c,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let r=Ae();this.He.forEach((o,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const i=new Yu(e,n,this.Ye,this.je,r);return this.je=Er(),this.Je=Kl(),this.He=Kl(),this.Ye=new ot(Ie),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Uv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Nt(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Nt(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Uv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Kl(){return new ot(ye.comparator)}function $v(){return new ot(ye.comparator)}const HP={asc:"ASCENDING",desc:"DESCENDING"},GP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KP={and:"AND",or:"OR"};class QP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function J0(t,e){return t.useProto3Json||Wu(e)?e:{value:e}}function du(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YP(t,e){return du(t,e.toTimestamp())}function sr(t){return Le(!!t,49232),je.fromTimestamp(function(n){const r=hi(n);return new Ye(r.seconds,r.nanos)}(t))}function hp(t,e){return Z0(t,e).canonicalString()}function Z0(t,e){const n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Yj(t){const e=He.fromString(t);return Le(t5(e),10190,{key:e.toString()}),e}function ef(t,e){return hp(t.databaseId,e.path)}function dh(t,e){const n=Yj(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(Jj(n))}function Xj(t,e){return hp(t.databaseId,e)}function XP(t){const e=Yj(t);return e.length===4?He.emptyPath():Jj(e)}function tf(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Jj(t){return Le(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Wv(t,e,n){return{name:ef(t,e),fields:n.value.mapValue.fields}}function JP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:we(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(Le(h===void 0||typeof h=="string",58123),Vt.fromBase64String(h||"")):(Le(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?J.UNKNOWN:Hj(d.code);return new ce(h,d.message||"")}(a);n=new Kj(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(t,r.document.name),o=sr(r.document.updateTime),a=r.document.createTime?sr(r.document.createTime):je.min(),l=new kn({mapValue:{fields:r.document.fields}}),c=$t.newFoundDocument(i,o,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new yc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=dh(t,r.document),o=r.readTime?sr(r.readTime):je.min(),a=$t.newNoDocument(i,o),l=r.removedTargetIds||[];n=new yc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=dh(t,r.document),o=r.removedTargetIds||[];n=new yc([],o,i,null)}else{if(!("filter"in e))return we(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new BP(i,o),l=r.targetId;n=new Gj(l,a)}}return n}function ZP(t,e){let n;if(e instanceof cl)n={update:Wv(t,e.key,e.value)};else if(e instanceof cp)n={delete:ef(t,e.key)};else if(e instanceof os)n={update:Wv(t,e.key,e.data),updateMask:l6(e.fieldMask)};else{if(!(e instanceof LP))return we(16599,{Vt:e.type});n={verify:ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const l=a.transform;if(l instanceof cu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ya)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xa)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof uu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw we(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:YP(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:we(27497)}(t,e.precondition)),n}function e6(t,e){return t&&t.length>0?(Le(e!==void 0,14353),t.map(n=>function(i,o){let a=i.updateTime?sr(i.updateTime):sr(o);return a.isEqual(je.min())&&(a=sr(o)),new DP(a,i.transformResults||[])}(n,e))):[]}function t6(t,e){return{documents:[Xj(t,e.path)]}}function n6(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Xj(t,i);const o=function(d){if(d.length!==0)return e5($n.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(h=>function(f){return{field:ys(f.field),direction:s6(f.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=J0(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function r6(t){let e=XP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Le(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(m){const f=Zj(m);return f instanceof $n&&Ej(f)?f.getFilters():[f]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(f=>function(N){return new Qa(vs(N.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(m){let f;return f=typeof m=="object"?m.value:m,Wu(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(m){const f=!!m.before,y=m.values||[];return new lu(y,f)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const f=!m.before,y=m.values||[];return new lu(y,f)}(n.endAt)),kP(e,i,a,o,l,"F",c,d)}function i6(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vs(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vs(n.unaryFilter.field);return xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=vs(n.unaryFilter.field);return xt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=vs(n.unaryFilter.field);return xt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}}(t):t.fieldFilter!==void 0?function(n){return xt.create(vs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>Zj(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return we(1026)}}(n.compositeFilter.op))}(t):we(30097,{filter:t})}function s6(t){return HP[t]}function o6(t){return GP[t]}function a6(t){return KP[t]}function ys(t){return{fieldPath:t.canonicalString()}}function vs(t){return Pt.fromServerFormat(t.fieldPath)}function e5(t){return t instanceof xt?function(n){if(n.op==="=="){if(Iv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(Tv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Iv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(Tv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:o6(n.op),value:n.value}}}(t):t instanceof $n?function(n){const r=n.getFilters().map(i=>e5(i));return r.length===1?r[0]:{compositeFilter:{op:a6(n.op),filters:r}}}(t):we(54877,{filter:t})}function l6(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function t5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,r,i,o=je.min(),a=je.min(),l=Vt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c6{constructor(e){this.yt=e}}function u6(t){const e=r6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?X0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(){this.Cn=new h6}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(di.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(di.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class h6{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Nt(He.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nt(He.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},n5=41943040;class nn{static withCacheSize(e){return new nn(e,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(n5,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oo(0)}static cr(){return new oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="LruGarbageCollector",f6=1048576;function Gv([t,e],[n,r]){const i=Ie(t,n);return i===0?Ie(e,r):i}class m6{constructor(e){this.Ir=e,this.buffer=new Nt(Gv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Gv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class p6{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(Hv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yo(n)?he(Hv,"Ignoring IndexedDB error during garbage collection: ",n):await xo(n)}await this.Vr(3e5)})}}class g6{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Z.resolve($u.ce);const r=new m6(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(qv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,a=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(o=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),gs()<=Re.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:m})))}}function x6(t,e){return new g6(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{constructor(){this.changes=new ss(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,$t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ba(r.mutation,i,On.empty(),Ye.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ae()){const i=Fi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=Zo();return o.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Fi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let o=Er();const a=va(),l=function(){return va()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof os)?o=o.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),ba(h.mutation,d,h.mutation.getFieldMask(),Ye.now())):a.set(d.key,On.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new v6(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=va();let i=new ot((a,l)=>a-l),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||On.empty();h=l.applyToLocalView(d,h),r.set(c,h);const m=(i.get(l.batchId)||Ae()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,m=Lj();h.forEach(f=>{if(!o.has(f)){const y=Wj(n.get(f),r.get(f));y!==null&&m.set(f,y),o=o.add(f)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Z.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ye.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Pj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Z.resolve(Fi());let l=qa,c=o;return a.next(d=>Z.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),o.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{c=c.insert(h,f)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,Ae())).next(h=>({batchId:l,changes:Vj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let i=Zo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=Zo();return this.indexManager.getCollectionParents(e,o).next(l=>Z.forEach(l,c=>{const d=function(m,f){return new vo(f,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((m,f)=>{a=a.insert(m,f)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,$t.newInvalidDocument(h)))});let l=Zo();return a.forEach((c,d)=>{const h=o.get(c);h!==void 0&&ba(h.mutation,d,On.empty(),Ye.now()),Gu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:sr(i.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:u6(i.bundledQuery),readTime:sr(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this.overlays=new ot(ye.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Fi();return Z.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=Fi(),o=n.length+1,a=new ye(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ot((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Fi(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Fi(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return Z.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new FP(n,r));let o=this.qr.get(n);o===void 0&&(o=Ae(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(){this.Qr=new Nt(Ct.$r),this.Ur=new Nt(Ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Ct(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Ct(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ye(new He([])),r=new Ct(n,e),i=new Ct(n,e+1),o=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ye(new He([])),r=new Ct(n,e),i=new Ct(n,e+1);let o=Ae();return this.Ur.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Ct(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ye.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Nt(Ct.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new OP(o,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new Ct(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?np:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ct(n,0),i=new Ct(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],a=>{const l=this.Xr(a.Yr);o.push(l)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Nt(Ie);return n.forEach(i=>{const o=new Ct(i,0),a=new Ct(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],l=>{r=r.add(l.Yr)})}),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ye.isDocumentKey(o)||(o=o.child(""));const a=new Ct(new ye(o),0);let l=new Nt(Ie);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},a),Z.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Le(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,i=>{const o=new Ct(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Ct(n,0),i=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{constructor(e){this.ri=e,this.docs=function(){return new ot(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():$t.newInvalidDocument(n))}getEntries(e,n){let r=Er();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():$t.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Er();const a=n.path,l=new ye(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||eP(ZA(h),r)<=0||(i.has(h.key)||Gu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,r,i){we(9500)}ii(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new z6(this)}getSize(e){return Z.resolve(this.size)}}class z6 extends y6{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{constructor(e){this.persistence=e,this.si=new ss(n=>sp(n),op),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new fp,this.targetCount=0,this.ai=oo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Z.waitFor(o).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,n){this.ui={},this.overlays={},this.ci=new $u(0),this.li=!1,this.li=!0,this.hi=new j6,this.referenceDelegate=e(this),this.Pi=new C6(this),this.indexManager=new d6,this.remoteDocumentCache=function(i){return new _6(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new c6(n),this.Ii=new w6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new k6,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new N6(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){he("MemoryPersistence","Starting transaction:",e);const i=new S6(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class S6 extends nP{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Ri=new fp,this.Vi=null}static mi(e){return new mp(e)}get fi(){if(this.Vi)return this.Vi;throw we(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,r=>{const i=ye.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,je.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class hu{constructor(e,n){this.persistence=e,this.pi=new ss(r=>sP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=x6(this,n)}static mi(e,n){return new hu(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?Z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,o.removeEntry(a,je.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pc(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Ae(),i=Ae();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new pp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return eI()?8:rP(XT())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new E6;return this.Ss(e,n,a).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(gs()<=Re.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(gs()<=Re.DEBUG&&he("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(gs()<=Re.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):Z.resolve())}ys(e,n){if(Dv(n))return Z.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=X0(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=Ae(...o);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,X0(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,i){return Dv(n)||i.isEqual(je.min())?Z.resolve(null):this.ps.getDocuments(e,r).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,r,i)?Z.resolve(null):(gs()<=Re.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xs(n)),this.vs(e,a,n,JA(i,qa)).next(l=>l))})}Ds(e,n){let r=new Nt(Dj(e));return n.forEach((i,o)=>{Gu(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return gs()<=Re.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",xs(n)),this.ps.getDocumentsMatchingQuery(e,n,di.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="LocalStore",I6=3e8;class A6{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ot(Ie),this.xs=new ss(o=>sp(o),op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b6(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function P6(t,e,n,r){return new A6(t,e,n,r)}async function i5(t,e){const n=_e(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],l=[];let c=Ae();for(const d of i){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of o){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function R6(t,e){const n=_e(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const m=d.batch,f=m.keys();let y=Z.resolve();return f.forEach(N=>{y=y.next(()=>h.getEntry(c,N)).next(I=>{const P=d.docVersions.get(N);Le(P!==null,48541),I.version.compareTo(P)<0&&(m.applyToRemoteDocument(I,d),I.isValidDocument()&&(I.setReadTime(d.commitVersion),h.addEntry(I)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ae();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function s5(t){const e=_e(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function D6(t,e){const n=_e(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const f=i.get(m);if(!f)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,m)));let y=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Vt.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(m,y),function(I,P,w){return I.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=I6?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(f,y,h)&&l.push(n.Pi.updateTargetData(o,y))});let c=Er(),d=Ae();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(M6(o,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(je.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next(m=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(h)}return Z.waitFor(l).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(n.Ms=i,o))}function M6(t,e,n){let r=Ae(),i=Ae();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=Er();return n.forEach((l,c)=>{const d=o.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(je.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):he(gp,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:i}})}function V6(t,e){const n=_e(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=np),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function L6(t,e){const n=_e(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,Z.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new Gr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function nf(t,e,n){const r=_e(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!yo(a))throw a;he(gp,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Kv(t,e,n){const r=_e(t);let i=je.min(),o=Ae();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const m=_e(c),f=m.xs.get(h);return f!==void 0?Z.resolve(m.Ms.get(f)):m.Pi.getTargetData(d,h)}(r,a,rr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:je.min(),n?o:Ae())).next(l=>(O6(r,NP(e),l),{documents:l,Qs:o})))}function O6(t,e,n){let r=t.Os.get(e)||je.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Qv{constructor(){this.activeTargetIds=TP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F6{constructor(){this.Mo=new Qv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Qv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="ConnectivityMonitor";class Xv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(Yv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(Yv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ql=null;function rf(){return Ql===null?Ql=function(){return 268435456+Math.round(2147483648*Math.random())}():Ql++,"0x"+Ql.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="RestConnection",U6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $6{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===ou?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const a=rf(),l=this.zo(e,n.toUriEncodedString());he(hh,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:d}=new URL(l),h=qm(d);return this.Jo(e,l,c,r,h).then(m=>(he(hh,`Received RPC '${e}' ${a}: `,m),m),m=>{throw no(hh,`RPC '${e}' ${a} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,o,a){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=U6[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="WebChannelConnection";class q6 extends $6{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const a=rf();return new Promise((l,c)=>{const d=new lj;d.setWithCredentials(!0),d.listenOnce(cj.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case mc.NO_ERROR:const m=d.getResponseJson();he(Ft,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(m)),l(m);break;case mc.TIMEOUT:he(Ft,`RPC '${e}' ${a} timed out`),c(new ce(J.DEADLINE_EXCEEDED,"Request time out"));break;case mc.HTTP_ERROR:const f=d.getStatus();if(he(Ft,`RPC '${e}' ${a} failed with status:`,f,"response text:",d.getResponseText()),f>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const N=y==null?void 0:y.error;if(N&&N.status&&N.message){const I=function(w){const b=w.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(b)>=0?b:J.UNKNOWN}(N.status);c(new ce(I,N.message))}else c(new ce(J.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ce(J.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{he(Ft,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);he(Ft,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=rf(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=hj(),l=dj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");he(Ft,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=a.createWebChannel(h,c);this.I_(m);let f=!1,y=!1;const N=new W6({Yo:P=>{y?he(Ft,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(he(Ft,`Opening RPC '${e}' stream ${i} transport.`),m.open(),f=!0),he(Ft,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},Zo:()=>m.close()}),I=(P,w,b)=>{P.listen(w,k=>{try{b(k)}catch(R){setTimeout(()=>{throw R},0)}})};return I(m,Jo.EventType.OPEN,()=>{y||(he(Ft,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),I(m,Jo.EventType.CLOSE,()=>{y||(y=!0,he(Ft,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(m))}),I(m,Jo.EventType.ERROR,P=>{y||(y=!0,no(Ft,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),N.a_(new ce(J.UNAVAILABLE,"The operation could not be completed")))}),I(m,Jo.EventType.MESSAGE,P=>{var w;if(!y){const b=P.data[0];Le(!!b,16349);const k=b,R=(k==null?void 0:k.error)||((w=k[0])==null?void 0:w.error);if(R){he(Ft,`RPC '${e}' stream ${i} received error:`,R);const M=R.status;let L=function(_){const C=mt[_];if(C!==void 0)return Hj(C)}(M),v=R.message;L===void 0&&(L=J.INTERNAL,v="Unknown error status: "+M+" with message "+R.message),y=!0,N.a_(new ce(L,v)),m.close()}else he(Ft,`RPC '${e}' stream ${i} received:`,b),N.u_(b)}}),I(l,uj.STAT_EVENT,P=>{P.stat===W0.PROXY?he(Ft,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===W0.NOPROXY&&he(Ft,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t){return new QP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&he("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="PersistentStream";class a5{constructor(e,n,r,i,o,a,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new o5(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Sr(n.toString()),Sr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ce(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return he(Jv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(he(Jv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class H6 extends a5{constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=JP(this.serializer,e),r=function(o){if(!("targetChange"in o))return je.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?je.min():a.readTime?sr(a.readTime):je.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=tf(this.serializer),n.addTarget=function(o,a){let l;const c=a.target;if(l=Q0(c)?{documents:t6(o,c)}:{query:n6(o,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Qj(o,a.resumeToken);const d=J0(o,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(je.min())>0){l.readTime=du(o,a.snapshotVersion.toTimestamp());const d=J0(o,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=i6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=tf(this.serializer),n.removeTarget=e,this.q_(n)}}class G6 extends a5{constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Le(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=e6(e.writeResults,e.commitTime),r=sr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=tf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>ZP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{}class Q6 extends K6{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Z0(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ce(J.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Z0(n,r),i,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(J.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class Y6{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Sr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ts="RemoteStore";class X6{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{as(this)&&(he(ts,"Restarting streams for network reachability change."),await async function(c){const d=_e(c);d.Ea.add(4),await dl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Ju(d)}(this))})}),this.Ra=new Y6(r,i)}}async function Ju(t){if(as(t))for(const e of t.da)await e(!0)}async function dl(t){for(const e of t.da)await e(!1)}function l5(t,e){const n=_e(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),bp(n)?vp(n):bo(n).O_()&&yp(n,e))}function xp(t,e){const n=_e(t),r=bo(n);n.Ia.delete(e),r.O_()&&c5(n,e),n.Ia.size===0&&(r.O_()?r.L_():as(n)&&n.Ra.set("Unknown"))}function yp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).Y_(e)}function c5(t,e){t.Va.Ue(e),bo(t).Z_(e)}function vp(t){t.Va=new qP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.Ra.ua()}function bp(t){return as(t)&&!bo(t).x_()&&t.Ia.size>0}function as(t){return _e(t).Ea.size===0}function u5(t){t.Va=void 0}async function J6(t){t.Ra.set("Online")}async function Z6(t){t.Ia.forEach((e,n)=>{yp(t,e)})}async function eR(t,e){u5(t),bp(t)?(t.Ra.ha(e),vp(t)):t.Ra.set("Unknown")}async function tR(t,e,n){if(t.Ra.set("Online"),e instanceof Kj&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){he(ts,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await fu(t,r)}else if(e instanceof yc?t.Va.Ze(e):e instanceof Gj?t.Va.st(e):t.Va.tt(e),!n.isEqual(je.min()))try{const r=await s5(t.localStore);n.compareTo(r)>=0&&await function(o,a){const l=o.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Vt.EMPTY_BYTE_STRING,h.snapshotVersion)),c5(o,c);const m=new Gr(h.target,c,d,h.sequenceNumber);yp(o,m)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){he(ts,"Failed to raise snapshot:",r),await fu(t,r)}}async function fu(t,e,n){if(!yo(e))throw e;t.Ea.add(1),await dl(t),t.Ra.set("Offline"),n||(n=()=>s5(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he(ts,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ju(t)})}function d5(t,e){return e().catch(n=>fu(t,n,e))}async function Zu(t){const e=_e(t),n=pi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:np;for(;nR(e);)try{const i=await V6(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,rR(e,i)}catch(i){await fu(e,i)}h5(e)&&f5(e)}function nR(t){return as(t)&&t.Ta.length<10}function rR(t,e){t.Ta.push(e);const n=pi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function h5(t){return as(t)&&!pi(t).x_()&&t.Ta.length>0}function f5(t){pi(t).start()}async function iR(t){pi(t).ra()}async function sR(t){const e=pi(t);for(const n of t.Ta)e.ea(n.mutations)}async function oR(t,e,n){const r=t.Ta.shift(),i=up.from(r,e,n);await d5(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Zu(t)}async function aR(t,e){e&&pi(t).X_&&await async function(r,i){if(function(a){return UP(a)&&a!==J.ABORTED}(i.code)){const o=r.Ta.shift();pi(r).B_(),await d5(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Zu(r)}}(t,e),h5(t)&&f5(t)}async function Zv(t,e){const n=_e(t);n.asyncQueue.verifyOperationInProgress(),he(ts,"RemoteStore received new credentials");const r=as(n);n.Ea.add(3),await dl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ju(n)}async function lR(t,e){const n=_e(t);e?(n.Ea.delete(2),await Ju(n)):e||(n.Ea.add(2),await dl(n),n.Ra.set("Unknown"))}function bo(t){return t.ma||(t.ma=function(n,r,i){const o=_e(n);return o.sa(),new H6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:J6.bind(null,t),t_:Z6.bind(null,t),r_:eR.bind(null,t),H_:tR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),bp(t)?vp(t):t.Ra.set("Unknown")):(await t.ma.stop(),u5(t))})),t.ma}function pi(t){return t.fa||(t.fa=function(n,r,i){const o=_e(n);return o.sa(),new G6(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:iR.bind(null,t),r_:aR.bind(null,t),ta:sR.bind(null,t),na:oR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Zu(t)):(await t.fa.stop(),t.Ta.length>0&&(he(ts,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,l=new wp(e,n,a,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function kp(t,e){if(Sr("AsyncQueue",`${e}: ${t}`),yo(t))return new ce(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{static emptySet(e){return new qs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=Zo(),this.sortedSet=new ot(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.ga=new ot(ye.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ao{constructor(e,n,r,i,o,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ao(e,n,qs.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class uR{constructor(){this.queries=t1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=_e(n),o=i.queries;i.queries=t1(),o.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ce(J.ABORTED,"Firestore shutting down"))}}function t1(){return new ss(t=>Rj(t),Hu)}async function m5(t,e){const n=_e(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new cR,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=kp(a,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&jp(n)}async function p5(t,e){const n=_e(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function dR(t,e){const n=_e(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const l of a.Sa)l.Fa(i)&&(r=!0);a.wa=i}}r&&jp(n)}function hR(t,e,n){const r=_e(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function jp(t){t.Ca.forEach(e=>{e.next()})}var sf,n1;(n1=sf||(sf={})).Ma="default",n1.Cache="cache";class g5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.key=e}}class y5{constructor(e){this.key=e}}class fR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=Dj(e),this.tu=new qs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new e1,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const f=i.get(h),y=Gu(this.query,m)?m:null,N=!!f&&this.mutatedKeys.has(f.key),I=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;f&&y?f.data.isEqual(y.data)?N!==I&&(r.track({type:3,doc:y}),P=!0):this.su(f,y)||(r.track({type:2,doc:y}),P=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!f&&y?(r.track({type:0,doc:y}),P=!0):f&&!y&&(r.track({type:1,doc:f}),P=!0,(c||d)&&(l=!0)),P&&(y?(a=a.add(y),o=I?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,m)=>function(y,N){const I=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Rt:P})}};return I(y)-I(N)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new ao(this.query,e.tu,o,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new y5(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new x5(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Np="SyncEngine";class mR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pR{constructor(e){this.key=e,this.hu=!1}}class gR{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ss(l=>Rj(l),Hu),this.Iu=new Map,this.Eu=new Set,this.du=new ot(ye.comparator),this.Au=new Map,this.Ru=new fp,this.Vu={},this.mu=new Map,this.fu=oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function xR(t,e,n=!0){const r=N5(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await v5(r,e,n,!0),i}async function yR(t,e){const n=N5(t);await v5(n,e,!0,!1)}async function v5(t,e,n,r){const i=await L6(t.localStore,rr(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await vR(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&l5(t.remoteStore,i),l}async function vR(t,e,n,r,i){t.pu=(m,f,y)=>async function(I,P,w,b){let k=P.view.ru(w);k.Cs&&(k=await Kv(I.localStore,P.query,!1).then(({documents:v})=>P.view.ru(v,k)));const R=b&&b.targetChanges.get(P.targetId),M=b&&b.targetMismatches.get(P.targetId)!=null,L=P.view.applyChanges(k,I.isPrimaryClient,R,M);return i1(I,P.targetId,L.au),L.snapshot}(t,m,f,y);const o=await Kv(t.localStore,e,!0),a=new fR(e,o.Qs),l=a.ru(o.documents),c=ul.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,c);i1(t,n,d.au);const h=new mR(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function bR(t,e,n){const r=_e(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(a=>!Hu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&xp(r.remoteStore,i.targetId),of(r,i.targetId)}).catch(xo)):(of(r,i.targetId),await nf(r.localStore,i.targetId,!0))}async function wR(t,e){const n=_e(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xp(n.remoteStore,r.targetId))}async function kR(t,e,n){const r=ER(t);try{const i=await function(a,l){const c=_e(a),d=Ye.now(),h=l.reduce((y,N)=>y.add(N.key),Ae());let m,f;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let N=Er(),I=Ae();return c.Ns.getEntries(y,h).next(P=>{N=P,N.forEach((w,b)=>{b.isValidDocument()||(I=I.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,N)).next(P=>{m=P;const w=[];for(const b of l){const k=VP(b,m.get(b.key).overlayedDocument);k!=null&&w.push(new os(b.key,k,zj(k.value.mapValue),ir.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,w,l)}).next(P=>{f=P;const w=P.applyToLocalDocumentSet(m,I);return c.documentOverlayCache.saveOverlays(y,P.batchId,w)})}).then(()=>({batchId:f.batchId,changes:Vj(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new ot(Ie)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,i.batchId,n),await hl(r,i.changes),await Zu(r.remoteStore)}catch(i){const o=kp(i,"Failed to persist write");n.reject(o)}}async function b5(t,e){const n=_e(t);try{const r=await D6(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Au.get(o);a&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Le(a.hu,14607):i.removedDocuments.size>0&&(Le(a.hu,42227),a.hu=!1))}),await hl(n,r,e)}catch(r){await xo(r)}}function r1(t,e,n){const r=_e(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=_e(a);c.onlineState=l;let d=!1;c.queries.forEach((h,m)=>{for(const f of m.Sa)f.va(l)&&(d=!0)}),d&&jp(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function jR(t,e,n){const r=_e(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let a=new ot(ye.comparator);a=a.insert(o,$t.newNoDocument(o,je.min()));const l=Ae().add(o),c=new Yu(je.min(),new Map,new ot(Ie),a,l);await b5(r,c),r.du=r.du.remove(o),r.Au.delete(e),_p(r)}else await nf(r.localStore,e,!1).then(()=>of(r,e,n)).catch(xo)}async function NR(t,e){const n=_e(t),r=e.batch.batchId;try{const i=await R6(n.localStore,e);k5(n,r,null),w5(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await hl(n,i)}catch(i){await xo(i)}}async function _R(t,e,n){const r=_e(t);try{const i=await function(a,l){const c=_e(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(m=>(Le(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(d,m))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);k5(r,e,n),w5(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await hl(r,i)}catch(i){await xo(i)}}function w5(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function k5(t,e,n){const r=_e(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function of(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||j5(t,r)})}function j5(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(xp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),_p(t))}function i1(t,e,n){for(const r of n)r instanceof x5?(t.Ru.addReference(r.key,e),zR(t,r)):r instanceof y5?(he(Np,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||j5(t,r.key)):we(19791,{wu:r})}function zR(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(he(Np,"New document in limbo: "+n),t.Eu.add(r),_p(t))}function _p(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ye(He.fromString(e)),r=t.fu.next();t.Au.set(r,new pR(n)),t.du=t.du.insert(n,r),l5(t.remoteStore,new Gr(rr(ap(n.path)),r,"TargetPurposeLimboResolution",$u.ce))}}async function hl(t,e,n){const r=_e(t),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(d){i.push(d);const m=pp.As(c.targetId,d);o.push(m)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(c,d){const h=_e(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Z.forEach(d,f=>Z.forEach(f.Es,y=>h.persistence.referenceDelegate.addReference(m,f.targetId,y)).next(()=>Z.forEach(f.ds,y=>h.persistence.referenceDelegate.removeReference(m,f.targetId,y)))))}catch(m){if(!yo(m))throw m;he(gp,"Failed to update sequence numbers: "+m)}for(const m of d){const f=m.targetId;if(!m.fromCache){const y=h.Ms.get(f),N=y.snapshotVersion,I=y.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(f,I)}}}(r.localStore,o))}async function CR(t,e){const n=_e(t);if(!n.currentUser.isEqual(e)){he(Np,"User change. New user:",e.toKey());const r=await i5(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(c=>{c.reject(new ce(J.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await hl(n,r.Ls)}}function SR(t,e){const n=_e(t),r=n.Au.get(e);if(r&&r.hu)return Ae().add(r.key);{let i=Ae();const o=n.Iu.get(e);if(!o)return i;for(const a of o){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function N5(t){const e=_e(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jR.bind(null,e),e.Pu.H_=dR.bind(null,e.eventManager),e.Pu.yu=hR.bind(null,e.eventManager),e}function ER(t){const e=_e(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_R.bind(null,e),e}class mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Xu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return P6(this.persistence,new T6,e.initialUser,this.serializer)}Cu(e){return new r5(mp.mi,this.serializer)}Du(e){return new F6}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mu.provider={build:()=>new mu};class TR extends mu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Le(this.persistence.referenceDelegate instanceof hu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new p6(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new r5(r=>hu.mi(r,n),this.serializer)}}class af{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=CR.bind(null,this.syncEngine),await lR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uR}()}createDatastore(e){const n=Xu(e.databaseInfo.databaseId),r=function(o){return new q6(o)}(e.databaseInfo);return function(o,a,l,c){return new Q6(o,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,l){return new X6(r,i,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>r1(this.syncEngine,n,0),function(){return Xv.v()?new Xv:new B6}())}createSyncEngine(e,n){return function(i,o,a,l,c,d,h){const m=new gR(i,o,a,l,c,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=_e(i);he(ts,"RemoteStore shutting down."),o.Ea.add(5),await dl(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}af.provider={build:()=>new af};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Sr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi="FirestoreClient";class IR{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=tp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{he(gi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(he(gi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=kp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function mh(t,e){t.asyncQueue.verifyOperationInProgress(),he(gi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await i5(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function s1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AR(t);he(gi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Zv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Zv(e.remoteStore,i)),t._onlineComponents=e}async function AR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(gi,"Using user provided OfflineComponentProvider");try{await mh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;no("Error using user provided cache. Falling back to memory cache: "+n),await mh(t,new mu)}}else he(gi,"Using default OfflineComponentProvider"),await mh(t,new TR(void 0));return t._offlineComponents}async function z5(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(gi,"Using user provided OnlineComponentProvider"),await s1(t,t._uninitializedComponentsProvider._online)):(he(gi,"Using default OnlineComponentProvider"),await s1(t,new af))),t._onlineComponents}function PR(t){return z5(t).then(e=>e.syncEngine)}async function C5(t){const e=await z5(t),n=e.eventManager;return n.onListen=xR.bind(null,e.syncEngine),n.onUnlisten=bR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wR.bind(null,e.syncEngine),n}function RR(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,d){const h=new _5({next:f=>{h.Nu(),a.enqueueAndForget(()=>p5(o,m));const y=f.docs.has(l);!y&&f.fromCache?d.reject(new ce(J.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&f.fromCache&&c&&c.source==="server"?d.reject(new ce(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(f)},error:f=>d.reject(f)}),m=new g5(ap(l.path),h,{includeMetadataChanges:!0,qa:!0});return m5(o,m)}(await C5(t),t.asyncQueue,e,n,r)),r.promise}function DR(t,e,n={}){const r=new xr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,d){const h=new _5({next:f=>{h.Nu(),a.enqueueAndForget(()=>p5(o,m)),f.fromCache&&c.source==="server"?d.reject(new ce(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(f)},error:f=>d.reject(f)}),m=new g5(l,h,{includeMetadataChanges:!0,qa:!0});return m5(o,m)}(await C5(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5="firestore.googleapis.com",a1=!0;class l1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E5,this.ssl=a1}else this.host=e.host,this.ssl=e.ssl??a1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=n5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<f6)throw new ce(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}XA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S5(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ce(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ed{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BA;switch(r.type){case"firstParty":return new qA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=o1.get(n);r&&(he("ComponentProvider","Removing Datastore"),o1.delete(n),r.terminate())}(this),Promise.resolve()}}function MR(t,e,n,r={}){var d;t=ui(t,ed);const i=qm(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(HT(`https://${l}`),YT("Firestore",!0)),o.host!==E5&&o.host!==l&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:i,emulatorOptions:r};if(!$a(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Bt.MOCK_USER;else{h=GT(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ce(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Bt(f)}t._authCredentials=new UA(new mj(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class vt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ll(n,vt._jsonSchema))return new vt(e,r||null,new ye(He.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:yt("string",vt._jsonSchemaVersion),referencePath:yt("string")};class si extends ls{constructor(e,n,r){super(e,n,ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new ye(e))}withConverter(e){return new si(this.firestore,e,this._path)}}function ph(t,e,...n){if(t=_r(t),pj("collection","path",e),t instanceof ed){const r=He.fromString(e,...n);return wv(r),new si(t,null,r)}{if(!(t instanceof vt||t instanceof si))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return wv(r),new si(t.firestore,null,r)}}function nt(t,e,...n){if(t=_r(t),arguments.length===1&&(e=tp.newId()),pj("doc","path",e),t instanceof ed){const r=He.fromString(e,...n);return bv(r),new vt(t,null,new ye(r))}{if(!(t instanceof vt||t instanceof si))throw new ce(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(He.fromString(e,...n));return bv(r),new vt(t.firestore,t instanceof si?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="AsyncQueue";class u1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new o5(this,"async_queue_retry"),this._c=()=>{const r=fh();r&&he(c1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new xr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yo(e))throw e;he(c1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Sr("INTERNAL UNHANDLED ERROR: ",d1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=wp.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&we(47125,{Pc:d1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function d1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class fl extends ed{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new u1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new u1(e),this._firestoreClient=void 0,await e}}}function VR(t,e){const n=typeof t=="object"?t:Vk(),r=typeof t=="string"?t:ou,i=al(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=WT("firestore");o&&MR(i,...o)}return i}function zp(t){if(t._terminated)throw new ce(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LR(t),t._firestoreClient}function LR(t){var r,i,o;const e=t._freezeSettings(),n=function(l,c,d,h){return new lP(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,S5(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new IR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Vt.fromBase64String(e))}catch(n){throw new ce(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ll(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:yt("string",jn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:or._jsonSchemaVersion}}static fromJSON(e){if(ll(e,or._jsonSchema))return new or(e.latitude,e.longitude)}}or._jsonSchemaVersion="firestore/geoPoint/1.0",or._jsonSchema={type:yt("string",or._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ar._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ll(e,ar._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new ar(e.vectorValues);throw new ce(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ar._jsonSchemaVersion="firestore/vectorValue/1.0",ar._jsonSchema={type:yt("string",ar._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR=/^__.*__$/;class FR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new os(e,this.data,this.fieldMask,n,this.fieldTransforms):new cl(e,this.data,n,this.fieldTransforms)}}function I5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{Ac:t})}}class Sp{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Sp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(I5(this.Ac)&&OR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class BR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Xu(e)}Cc(e,n,r,i=!1){return new Sp({Ac:e,methodName:n,Dc:r,path:Pt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function A5(t){const e=t._freezeSettings(),n=Xu(t._databaseId);return new BR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UR(t,e,n,r,i,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);D5("Data must be an object, but it was:",a,r);const l=P5(r,a);let c,d;if(o.merge)c=new On(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const m of o.mergeFields){const f=WR(e,m,n);if(!a.contains(f))throw new ce(J.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);HR(h,f)||h.push(f)}c=new On(h),d=a.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,d=a.fieldTransforms;return new FR(new kn(l),c,d)}function $R(t,e,n,r=!1){return Ep(n,t.Cc(r?4:3,e))}function Ep(t,e){if(R5(t=_r(t)))return D5("Unsupported field value:",e,t),P5(t,e);if(t instanceof T5)return function(r,i){if(!I5(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const l of r){let c=Ep(l,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=_r(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return IP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ye.fromDate(r);return{timestampValue:du(i.serializer,o)}}if(r instanceof Ye){const o=new Ye(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:du(i.serializer,o)}}if(r instanceof or)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:Qj(i.serializer,r._byteString)};if(r instanceof vt){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:hp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ar)return function(a,l){return{mapValue:{fields:{[Nj]:{stringValue:_j},[au]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return lp(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Uu(r)}`)}(t,e)}function P5(t,e){const n={};return yj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(t,(r,i)=>{const o=Ep(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function R5(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ye||t instanceof or||t instanceof jn||t instanceof vt||t instanceof T5||t instanceof ar)}function D5(t,e,n){if(!R5(n)||!gj(n)){const r=Uu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function WR(t,e,n){if((e=_r(e))instanceof Cp)return e._internalPath;if(typeof e=="string")return M5(t,e);throw pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const qR=new RegExp("[~\\*/\\[\\]]");function M5(t,e,n){if(e.search(qR)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Cp(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pu(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new ce(J.INVALID_ARGUMENT,l+t+c)}function HR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V5{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new GR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class GR extends V5{data(){return super.data()}}function Tp(t,e){return typeof e=="string"?M5(t,e):e instanceof Cp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ip{}class L5 extends Ip{}function h1(t,e,...n){let r=[];e instanceof Ip&&r.push(e),r=r.concat(n),function(o){const a=o.filter(c=>c instanceof Pp).length,l=o.filter(c=>c instanceof Ap).length;if(a>1||a>0&&l>0)throw new ce(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ap extends L5{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ap(e,n,r)}_apply(e){const n=this._parse(e);return O5(e._query,n),new ls(e.firestore,e.converter,Y0(e._query,n))}_parse(e){const n=A5(e.firestore);return function(o,a,l,c,d,h,m){let f;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ce(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){p1(m,h);const N=[];for(const I of m)N.push(m1(c,o,I));f={arrayValue:{values:N}}}else f=m1(c,o,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||p1(m,h),f=$R(l,a,m,h==="in"||h==="not-in");return xt.create(d,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Pp extends Ip{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Pp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const l=o.getFlattenedFilters();for(const c of l)O5(a,c),a=Y0(a,c)}(e._query,n),new ls(e.firestore,e.converter,Y0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Rp extends L5{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Rp(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ce(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Qa(o,a)}(e._query,this._field,this._direction);return new ls(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new vo(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function f1(t,e="asc"){const n=e,r=Tp("orderBy",t);return Rp._create(r,n)}function m1(t,e,n){if(typeof(n=_r(n))=="string"){if(n==="")throw new ce(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pj(e)&&n.indexOf("/")!==-1)throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(He.fromString(n));if(!ye.isDocumentKey(r))throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ev(t,new ye(r))}if(n instanceof vt)return Ev(t,n._key);throw new ce(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uu(n)}.`)}function p1(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function O5(t,e){const n=function(i,o){for(const a of i)for(const l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class QR{convertValue(e,n="none"){switch(mi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return is(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[au].arrayValue)==null?void 0:i.values)==null?void 0:o.map(a=>dt(a.doubleValue));return new ar(n)}convertGeoPoint(e){return new or(dt(e.latitude),dt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=qu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const n=hi(e);return new Ye(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=He.fromString(e);Le(t5(r),9688,{name:e});const i=new Ga(r.get(1),r.get(3)),o=new ye(r.popFirst(5));return i.isEqual(n)||Sr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qi extends V5{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",qi._jsonSchema={type:yt("string",qi._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class vc extends qi{data(e={}){return super.data(e)}}class Hs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ta(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vc(this._firestore,this._userDataWriter,r.key,r,new ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new vc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new vc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ta(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:XR(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t){t=ui(t,vt);const e=ui(t.firestore,fl);return RR(zp(e),t._key).then(n=>JR(e,t,n))}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:yt("string",Hs._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class F5 extends QR{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function gh(t){t=ui(t,ls);const e=ui(t.firestore,fl),n=zp(e),r=new F5(e);return KR(t._query),DR(n,t._query).then(i=>new Hs(e,r,t,i))}function Pn(t,e,n){t=ui(t,vt);const r=ui(t.firestore,fl),i=YR(t.converter,e,n);return B5(r,[UR(A5(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ir.none())])}function g1(t){return B5(ui(t.firestore,fl),[new cp(t._key,ir.none())])}function B5(t,e){return function(r,i){const o=new xr;return r.asyncQueue.enqueueAndForget(async()=>kR(await PR(r),i,o)),o.promise}(zp(t),e)}function JR(t,e,n){const r=n.docs.get(e._key),i=new F5(t);return new qi(t,i,e._key,r,new ta(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){go=i})(a3),ci(new zr("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),l=new fl(new $A(r.getProvider("auth-internal")),new HA(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ce(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ga(d.options.projectId,h)}(a,i),a);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),nr(gv,xv,e),nr(gv,xv,"esm2020")})();const ZR={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},U5=Mk(ZR);MA(U5);const qe=VR(U5),Ve={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},Rn=t=>JSON.parse(JSON.stringify(t)),De={async saveRecipe(t,e){try{return await Pn(nt(qe,Ve.RECIPES,t),Rn({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=h1(ph(qe,Ve.RECIPES),f1("updatedAt","desc")),e=await gh(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await g1(nt(qe,Ve.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Pn(nt(qe,Ve.SETTINGS,"inventory_v2"),Rn({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await Kn(nt(qe,Ve.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await Kn(nt(qe,Ve.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Pn(nt(qe,Ve.SETTINGS,"costs_data"),Rn({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await Kn(nt(qe,Ve.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Pn(nt(qe,Ve.SETTINGS,"ficha_tecnica"),Rn({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await Kn(nt(qe,Ve.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Pn(nt(qe,Ve.SETTINGS,"global_config"),Rn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await Kn(nt(qe,Ve.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Pn(nt(qe,Ve.SETTINGS,Ve.RECIPES_V2),Rn({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await Kn(nt(qe,Ve.SETTINGS,Ve.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Pn(nt(qe,Ve.RECIPES_V3,String(t)),Rn({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=h1(ph(qe,Ve.RECIPES_V3),f1("updatedAt","desc"));t=await gh(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await gh(ph(qe,Ve.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await g1(nt(qe,Ve.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Pn(nt(qe,Ve.SETTINGS,Ve.KANBAN),Rn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await Kn(nt(qe,Ve.SETTINGS,Ve.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Pn(nt(qe,Ve.SETTINGS,"recipe_categories"),Rn({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await Kn(nt(qe,Ve.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}},async syncSuppliers(t){try{return await Pn(nt(qe,Ve.SETTINGS,"suppliers"),Rn({suppliers:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing suppliers:",e),!1}},async getSuppliers(){try{const t=await Kn(nt(qe,Ve.SETTINGS,"suppliers"));return t.exists()?t.data():null}catch(t){return console.error("Error getting suppliers:",t),null}},async syncProducts(t,e){try{return await Pn(nt(qe,Ve.SETTINGS,"products_v1"),Rn({products:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing products:",n),!1}},async getProducts(){try{const t=await Kn(nt(qe,Ve.SETTINGS,"products_v1"));return t.exists()?t.data():null}catch(t){return console.error("Error getting products:",t),null}}};function e9(){const[t,e]=j.useState([]),[n,r]=j.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,o]=j.useState(!1),[a,l]=j.useState(null),[c,d]=j.useState(null),[h,m]=j.useState(!1),[f,y]=j.useState(""),[N,I]=j.useState("Global Investment Matrix"),[P,w]=j.useState(!1),[b,k]=j.useState(.13),[R,M]=j.useState(!1),[L,v]=j.useState(null),x=j.useRef(null),_=j.useCallback((T,O="success")=>{x.current&&clearTimeout(x.current),v({message:T,type:O}),x.current=setTimeout(()=>v(null),3500)},[]),[C,z]=j.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),A=j.useRef(null);j.useEffect(()=>{try{const T=localStorage.getItem("padoca_costs_v1"),O=localStorage.getItem("padoca_costs_categories"),F=localStorage.getItem("padoca_costs_title"),ne=localStorage.getItem("padoca_global_tax");let ue=T?JSON.parse(T):[],de=O?JSON.parse(O):null;F&&I(F),ne&&k(Number(ne)),de&&(de=de.map(ve=>ve==="Pessoal"?"Maquinrio":ve),r(de)),ue&&(ue=ue.map(ve=>({...ve,category:ve.category==="Pessoal"?"Maquinrio":ve.category})),e(ue))}catch(T){console.error("Load failed",T)}},[]);const[E,ge]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const O=await De.getCosts();O&&(O.costs&&e(O.costs),O.categories&&r(O.categories));const F=await De.getGlobalSettings();F&&F.taxRate!==void 0&&(k(F.taxRate),localStorage.setItem("padoca_global_tax",F.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{ge(!0)}})()},[]),j.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),E&&De.syncCosts(t,n)},[t,n,E]),j.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),j.useEffect(()=>{localStorage.setItem("padoca_costs_title",N)},[N]),j.useEffect(()=>{localStorage.setItem("padoca_global_tax",b.toString()),E&&De.syncGlobalSettings({taxRate:b}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:b}}))},[b,E]);const le=T=>(Number(T)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),me=j.useMemo(()=>{const T=t.reduce((F,ne)=>{const ue=Number(ne.quantity)||1,de=(Number(ne.amount)||0)*ue;return F.total+=de,ne.type==="Fixo"?F.fixed+=de:F.variable+=de,F},{total:0,fixed:0,variable:0}),O=T.total*b;return{...T,hst:O,grandTotal:T.total+O}},[t]),xe=j.useMemo(()=>n.reduce((T,O)=>{const F=t.filter(ne=>ne.category===O);return F.length>0&&(T[O]=F),T},{}),[t,n]),Y=T=>{if(T.preventDefault(),!C.description||!C.amount)return;const O=n.includes(C.category)?C.category:n[0],F={...C,category:O,amount:Number(C.amount),quantity:Number(C.quantity)||1};e(a?ne=>ne.map(ue=>ue.id===a?{...F,id:a}:ue):ne=>[...ne,{...F,id:Date.now().toString()}]),H()},X=T=>{d({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(O=>O.filter(F=>F.id!==T)),_("Despesa removida com sucesso."),d(null)},onCancel:()=>d(null)})},H=()=>{o(!1),l(null),z({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},te=T=>{z({description:T.description||"",amount:T.amount||"",quantity:T.quantity||1,category:T.category||n[0],type:T.type||"Varivel",link:T.link||"",date:T.date||new Date().toISOString().split("T")[0]}),l(T.id),o(!0)},se=()=>{f&&(n.includes(f)||(r(T=>[...T,f]),_("Categoria adicionada.")),y(""))},pe=T=>{d({title:"Remover Categoria",message:`A categoria "${T}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(O=>O.filter(F=>F!==T)),_("Categoria removida."),d(null)},onCancel:()=>d(null)})},D=()=>{try{const T=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],O=t.map(ve=>{const We=Number(ve.quantity)||1,ze=Number(ve.amount)||0,ft=We*ze;return[ve.id,ve.date||"-",`"${ve.description.replace(/"/g,'""')}"`,We,ze.toFixed(2).replace(".",","),ft.toFixed(2).replace(".",","),`"${ve.category}"`,ve.type,`"${ve.link||""}"`]}),F="\uFEFF"+[T.join(";"),...O.map(ve=>ve.join(";"))].join(`
`),ne=new Blob([F],{type:"text/csv;charset=utf-8;"}),ue=URL.createObjectURL(ne),de=document.createElement("a");de.href=ue,de.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,de.click(),_("Relatrio Excel exportado!")}catch{_("Erro ao exportar CSV")}},U=()=>{try{const T=JSON.stringify({version:"1",costs:t,categories:n},null,2),O=new Blob([T],{type:"application/json"}),F=URL.createObjectURL(O),ne=document.createElement("a");ne.href=F,ne.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,ne.click(),_("Backup realizado com sucesso!")}catch{_("Erro ao realizar backup")}},$=T=>{var ne;const O=(ne=T.target.files)==null?void 0:ne[0];if(!O)return;const F=new FileReader;F.onload=ue=>{try{const de=JSON.parse(String(ue.target.result||"{}"));if(de.costs&&Array.isArray(de.costs))e(de.costs),de.categories&&r(de.categories),_("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{_("Arquivo de backup invlido")}},F.readAsText(O),T.target.value=""},oe=()=>{d({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),_("Banco de dados limpo."),d(null)},onCancel:()=>d(null)})};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),s.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[P?s.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:N,onChange:T=>I(T.target.value),onBlur:()=>w(!1),onKeyDown:T=>T.key==="Enter"&&w(!1),autoFocus:!0}):s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>w(!0),children:N}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:le(me.grandTotal)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:le(me.total)})]}),s.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[R?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:b*100,onChange:T=>k(Number(T.target.value)/100),onBlur:()=>M(!1),onKeyDown:T=>T.key==="Enter"&&M(!1),autoFocus:!0}),s.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):s.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>M(!0),children:["Tax Impact (",(b*100).toFixed(0),"%)"]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:le(me.hst)})]})]})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:le(me.fixed)})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),s.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(me.fixed/me.total*100||0).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${me.fixed/me.total*100||0}%`}})})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:le(me.variable)})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),s.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(me.variable/me.total*100||0).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${me.variable/me.total*100||0}%`}})})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),s.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[s.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),s.jsx("div",{className:"col-span-2"})]}),s.jsx("div",{className:"space-y-6",children:t.length===0?s.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),s.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(xe).map(([T,O])=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:T}),s.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),s.jsx("div",{className:"space-y-3 md:space-y-1",children:O.map(F=>s.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[s.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[s.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${F.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),s.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[s.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:F.description}),s.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:F.date}),F.link&&s.jsx("a",{href:F.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),s.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:s.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[F.quantity," unit  ",F.type.slice(0,1)]})}),s.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[s.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:le((Number(F.amount)||0)*(Number(F.quantity)||1))}),s.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[le(F.amount)," / item"]})]}),s.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[s.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:le((Number(F.amount)||0)*(Number(F.quantity)||1)*(1+b))}),s.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),s.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[s.jsxs("button",{onClick:()=>te(F),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),s.jsxs("button",{onClick:()=>X(F.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},F.id))})]},T))})]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[s.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),s.jsx("button",{onClick:D,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),s.jsx("button",{onClick:oe,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsx("button",{onClick:U,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),s.jsx("button",{onClick:()=>{var T;return(T=A.current)==null?void 0:T.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),s.jsx("input",{ref:A,type:"file",accept:"application/json",className:"hidden",onChange:$})]})]})]}),s.jsx(Ne,{children:i&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:H}),s.jsxs(Q.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[80vh]",children:[s.jsx(t9,{}),s.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:s.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),s.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:a?"Editar Despesa":"Nova Despesa"}),s.jsx("button",{onClick:H,className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?s.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[s.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((T,O)=>s.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${O!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[s.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:T}),s.jsx("button",{onClick:()=>pe(T),className:"w-11 h-11 flex items-center justify-center text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl touch-manipulation transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},T))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:f,onChange:T=>y(T.target.value)}),s.jsx("button",{className:"h-12 w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold flex items-center justify-center touch-manipulation active:scale-95 transition-transform",onClick:se,children:"+"})]}),s.jsx("button",{onClick:()=>m(!1),className:"w-full py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all touch-manipulation hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl",children:"Pronto"})]}):s.jsxs("form",{onSubmit:Y,className:"space-y-6 px-4 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:C.description,onChange:T=>z({...C,description:T.target.value}),placeholder:"Mixer, Aluguel..."})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:C.link,onChange:T=>z({...C,link:T.target.value}),placeholder:"Opcional..."})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:C.quantity,onChange:T=>z({...C,quantity:T.target.value})})]}),s.jsxs("div",{className:"flex items-center px-4 py-3",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),s.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:C.amount,onChange:T=>z({...C,amount:T.target.value})})]})]})]}),s.jsx("div",{className:"px-1",children:s.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(T=>s.jsx("button",{type:"button",onClick:()=>z({...C,type:T}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${C.type===T?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:T},T))})}),s.jsxs("div",{className:"space-y-3 px-1",children:[s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),s.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(T=>s.jsx("button",{type:"button",onClick:()=>z({...C,category:T}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${C.category===T?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:T},T))})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[s.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),s.jsx("button",{type:"button",onClick:H,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),s.jsx(Ne,{children:L&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${L.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":L.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${L.type==="error"?"bg-white animate-pulse":L.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:L.message})]}),document.body)}),s.jsx(Ne,{children:c&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:c.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${c.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:c.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:c.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:c.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${c.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}function t9(){return qt(!0),null}const hr="padoca_inventory_v2",xh=["Ingredientes","Embalagens","Utenslios","Outros"],yh=["None","Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function n9(){var Ir,Ar,W,re;const[t,e]=j.useState(()=>{try{const V=localStorage.getItem(hr);if(V)return JSON.parse(V);const q=localStorage.getItem("padoca_inventory");return q?JSON.parse(q).map(ee=>({...ee,packageQuantity:ee.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=j.useState(()=>{try{const V=localStorage.getItem(hr+"_categories");return V?JSON.parse(V):xh}catch{return xh}}),[i,o]=j.useState(!1),[a,l]=j.useState("synced");j.useEffect(()=>{(async()=>{try{const q=await De.getInventory();q&&(Array.isArray(q.items)&&e(q.items),Array.isArray(q.categories)&&r(q.categories));const K=await De.getGlobalSettings();K&&K.taxRate!==void 0&&d(K.taxRate)}catch(q){console.warn("Inventory cloud load failed",q)}finally{o(!0)}})()},[]);const[c,d]=j.useState(()=>{const V=localStorage.getItem("padoca_global_tax");return V?Number(V):.13});j.useEffect(()=>{const V=q=>{q.detail&&q.detail.taxRate!==void 0&&d(q.detail.taxRate)};return window.addEventListener("global-settings-updated",V),()=>window.removeEventListener("global-settings-updated",V)},[]);const[h,m]=j.useState(!1),[f,y]=j.useState(null),[N,I]=j.useState(""),[P,w]=j.useState("None"),[b,k]=j.useState(null),[R,M]=j.useState(null),L=j.useRef(null),v=j.useCallback((V,q="success")=>{L.current&&clearTimeout(L.current),M({message:V,type:q}),L.current=setTimeout(()=>M(null),3500)},[]),[x,_]=j.useState(()=>{try{const V=localStorage.getItem(hr+"_subcategories");return V?JSON.parse(V):yh}catch{return yh}}),[C,z]=j.useState(!1),[A,E]=j.useState(""),[ge,le]=j.useState(""),[me,xe]=j.useState("alerts"),[Y,X]=j.useState(""),[H,te]=j.useState(null);j.useEffect(()=>{t.filter(q=>["low","warning","high"].includes(de(q))).length===0&&me==="alerts"&&xe("ok")},[t]);const[se,pe]=j.useState([]),[D,U]=j.useState(""),[$,oe]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const q=await De.getSuppliers();q!=null&&q.suppliers&&pe(q.suppliers)}catch(q){console.error("Error loading suppliers:",q)}})()},[]);const T=j.useCallback((V,q)=>{if(!V||!q)return!1;const K=V.trim().toLowerCase(),ee=q.trim().toLowerCase(),Ee=K.split(/\s+/).filter(Se=>Se.length>0),be=ee.split(/\s+/).filter(Se=>Se.length>0);return K===ee&&Ee.length===be.length},[]),O=j.useMemo(()=>{const V=D.trim().toLowerCase();return V.length<2?[]:se.filter(q=>{var K,ee;return((K=q.name)==null?void 0:K.toLowerCase().includes(V))||((ee=q.company)==null?void 0:ee.toLowerCase().includes(V))}).slice(0,8)},[se,D]),[F,ne]=j.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""});j.useEffect(()=>{if(localStorage.setItem(hr,JSON.stringify(t)),localStorage.setItem(hr+"_categories",JSON.stringify(n)),localStorage.setItem(hr+"_subcategories",JSON.stringify(x)),i){l("syncing");const V=setTimeout(async()=>{try{const q=await De.syncInventory(t,n);l(q?"synced":"error")}catch{l("error")}},1500);return()=>clearTimeout(V)}window.dispatchEvent(new Event("inventory-updated"))},[t,n,x,i]);const ue=V=>(Number(V.packageQuantity)||0)*(Number(V.packageCount)||1),de=V=>{const q=ue(V),K=Number(V.minStock)||0,ee=Number(V.maxStock)||0;return K===0&&ee===0?"noLimit":K>0&&q<K?"low":K>0&&q<=K*1.2?"warning":ee>0&&q>ee?"high":ee>0&&q>=ee*.6&&q<=ee||K>0&&ee===0&&q>K*1.2?"adequate":"ok"},ve=V=>(Number(V.packageCount)||1)*(Number(V.pricePerUnit)||0),We=j.useMemo(()=>{const V=t.reduce((ee,Ee)=>ee+ve(Ee),0),q=t.length,K=t.reduce((ee,Ee)=>{const be=ve(Ee);return ee[Ee.category]=(ee[Ee.category]||0)+be,ee},{});return{totalValue:V,itemCount:q,byCategory:K,taxImpact:V*c,grandTotal:V*(1+c)}},[t,c]),ze=V=>(Number(V)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),ft=()=>{if(!F.name.trim())return;const V={id:Date.now(),name:F.name.trim(),packageQuantity:Number(F.packageQuantity)||0,packageCount:Number(F.packageCount)||1,unit:F.unit,pricePerUnit:Number(F.pricePerUnit)||0,category:F.category,subcategory:F.category==="Ingredientes"?F.subcategory:null,purchaseDate:F.purchaseDate,supplierId:F.supplierId,supplierName:F.supplierName,minStock:Number(F.minStock)||0,maxStock:Number(F.maxStock)||0,createdAt:new Date().toISOString()};e(q=>[...q,V]),ne({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),U(""),m(!1)},Ue=(V,q,K)=>{e(ee=>ee.map(Ee=>Ee.id!==V?Ee:{...Ee,[q]:["name","unit","category","subcategory","purchaseDate"].includes(q)?K:Number(K)||0}))},Fe=V=>{k({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(q=>q.filter(K=>K.id!==V)),y(null),k(null)},onCancel:()=>k(null)})},Be=j.useMemo(()=>{let V=t;if(N.trim()){const q=N.toLowerCase().trim();V=V.filter(K=>K.name.toLowerCase().includes(q)||K.subcategory&&K.subcategory.toLowerCase().includes(q))}return P&&(V=V.filter(q=>q.subcategory===P)),V},[t,N,P]),yn=j.useMemo(()=>n.reduce((V,q)=>{const K=Be.filter(ee=>ee.category===q);return K.length>0&&(V[q]=K),V},{}),[Be,n]),en=Sn.useRef(null),ji=()=>{try{const V=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],q=t.map(Se=>{const cr=(Number(Se.packageQuantity)||0)*(Number(Se.packageCount)||1),us=(Number(Se.packageCount)||1)*(Number(Se.pricePerUnit)||0);return[Se.id,`"${Se.name.replace(/"/g,'""')}"`,`"${Se.category}"`,Se.packageQuantity,Se.unit,Se.packageCount,cr,Number(Se.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),us.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),K="\uFEFF"+[V.join(";"),...q.map(Se=>Se.join(";"))].join(`
`),ee=new Blob([K],{type:"text/csv;charset=utf-8;"}),Ee=URL.createObjectURL(ee),be=document.createElement("a");be.href=Ee,be.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,be.click(),v("Relatrio de Estoque exportado!","success")}catch(V){console.error(V),v("Erro ao exportar CSV","error")}},cs=V=>{var ee;const q=(ee=V.target.files)==null?void 0:ee[0];if(!q)return;const K=new FileReader;K.onload=Ee=>{try{const be=JSON.parse(String(Ee.target.result||"{}"));if(be.items&&Array.isArray(be.items))e(be.items),be.categories&&r(be.categories),v("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{v("Arquivo de backup invlido","error")}},K.readAsText(q),V.target.value=""},Wn=()=>{k({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(hr,"[]"),k(null)},onCancel:()=>k(null)})};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${a==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":a==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${a==="syncing"?"bg-amber-500":a==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:a==="syncing"?"Cloud Syncing":a==="error"?"Sync Error":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),s.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ze(We.grandTotal)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ze(We.totalValue)})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(c*100).toFixed(0),"%)"]}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:ze(We.taxImpact)})]})]})]})}),s.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((V,q)=>{const K={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},ee=K[V]||K.Outros,Ee=We.byCategory[V]||0,be=Ee*(1+c),Se=(Ee/We.totalValue*100||0).toFixed(0);return s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ee.pulse} ${ee.shadow}`}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:V})]}),s.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ze(be)}),s.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",ze(Ee)," + ",(c*100).toFixed(0),"% tax)"]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),s.jsxs("span",{className:`text-[8px] font-bold ${ee.text}`,children:[Se,"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${ee.bg} transition-all duration-1000`,style:{width:`${Se}%`}})})]})]},V)})})]}),s.jsx(Ne,{children:h&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] flex items-end md:items-start justify-center p-0 md:p-4 md:pt-40",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>m(!1)}),s.jsxs(Q.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:30,stiffness:350},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-md rounded-t-[2rem] md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[90vh] md:max-h-[80vh]",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[s.jsx(Yl,{}),s.jsx("div",{className:"md:hidden flex justify-center pt-3 pb-1",children:s.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-100 dark:border-zinc-800",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Novo Item"}),s.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Adicionar ao estoque"})]}),s.jsx("button",{onClick:()=>m(!1),className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Nome do Item"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-500/50 transition-all placeholder:text-zinc-400",placeholder:"Ex: Farinha de Trigo",value:F.name,onChange:V=>ne(q=>({...q,name:V.target.value}))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Qtd/Pacote"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"flex-1 px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"25",value:F.packageQuantity,onChange:V=>ne(q=>({...q,packageQuantity:V.target.value}))}),s.jsxs("select",{className:"w-20 px-2 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:F.unit,onChange:V=>ne(q=>({...q,unit:V.target.value})),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"N Pacotes"}),s.jsx("input",{type:"number",min:"1",inputMode:"numeric",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"1",value:F.packageCount,onChange:V=>ne(q=>({...q,packageCount:V.target.value}))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-2",children:"Preo por Pacote"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 font-bold text-lg",children:"$"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-12 pr-4 py-4 rounded-2xl bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/20 text-zinc-900 dark:text-white text-xl font-bold text-right focus:outline-none focus:ring-2 focus:ring-emerald-500/30 transition-all",placeholder:"0,00",value:F.pricePerUnit,onChange:V=>ne(q=>({...q,pricePerUnit:V.target.value}))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:F.category!=="Ingredientes"?"col-span-2":"",children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Categoria"}),s.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:F.category,onChange:V=>ne(q=>({...q,category:V.target.value,subcategory:V.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(V=>s.jsx("option",{value:V,children:V},V))})]}),F.category==="Ingredientes"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Subcategoria"}),s.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:F.subcategory,onChange:V=>ne(q=>({...q,subcategory:V.target.value})),children:x.map(V=>s.jsx("option",{value:V,children:V},V))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-violet-500 uppercase tracking-widest mb-2",children:"Fornecedor"}),s.jsx("div",{className:"relative",children:F.supplierId?s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl bg-violet-50 dark:bg-violet-500/10 border border-violet-200 dark:border-violet-500/20",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-lg",children:(Ar=(Ir=F.supplierName)==null?void 0:Ir.charAt(0))==null?void 0:Ar.toUpperCase()}),s.jsx("span",{className:"flex-1 font-bold text-violet-700 dark:text-violet-300",children:F.supplierName}),s.jsx("button",{onClick:()=>{ne(V=>({...V,supplierId:null,supplierName:""})),U("")},className:"w-10 h-10 rounded-xl flex items-center justify-center text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/30 transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:D,onChange:V=>{const q=V.target.value;U(q),oe(!0);const K=se.find(ee=>T(q,ee.name));K&&(ne(ee=>({...ee,supplierId:K.id,supplierName:K.name})),U(""),oe(!1))},onFocus:()=>oe(!0)}),$&&O.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-2xl max-h-40 overflow-y-auto z-50",children:O.map(V=>{var q,K;return s.jsxs("button",{onClick:()=>{ne(ee=>({...ee,supplierId:V.id,supplierName:V.name})),U(""),oe(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:(K=(q=V.name)==null?void 0:q.charAt(0))==null?void 0:K.toUpperCase()}),s.jsx("span",{className:"font-bold text-zinc-900 dark:text-white",children:V.name})]},V.id)})})]})})]}),s.jsxs("div",{className:"p-4 rounded-2xl bg-amber-50 dark:bg-amber-500/5 border border-amber-200/50 dark:border-amber-500/10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-widest",children:"Limites de Estoque"}),s.jsxs("select",{className:"px-3 py-1.5 rounded-lg bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 text-xs font-bold uppercase tracking-wider border-none focus:outline-none focus:ring-2 focus:ring-amber-500/30 cursor-pointer appearance-none pr-6 bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2020%2020%22%20fill%3d%22%23d97706%22%3e%3cpath%20fill-rule%3d%22evenodd%22%20d%3d%22M5.293%207.293a1%201%200%20011.414%200L10%2010.586l3.293-3.293a1%201%200%20111.414%201.414l-4%204a1%201%200%2001-1.414%200l-4-4a1%201%200%20010-1.414z%22%20clip-rule%3d%22evenodd%22%2f%3e%3c%2fsvg%3e')] bg-no-repeat bg-[right_0.3rem_center] bg-[length:1rem]",value:F.unit,onChange:V=>ne(q=>({...q,unit:V.target.value})),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mnimo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:F.minStock,onChange:V=>ne(q=>({...q,minStock:V.target.value}))}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:F.unit})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mximo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:F.maxStock,onChange:V=>ne(q=>({...q,maxStock:V.target.value}))}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:F.unit})]})]})]}),s.jsx("p",{className:"text-[10px] text-amber-600/60 mt-2 text-center",children:"Deixe em 0 para desativar alertas"})]}),F.packageQuantity&&F.packageCount&&s.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-zinc-100 to-zinc-50 dark:from-zinc-800 dark:to-zinc-900 border border-zinc-200 dark:border-zinc-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Total"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:[Number(F.packageQuantity)*Number(F.packageCount)," ",F.unit]}),F.pricePerUnit&&s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:ze(Number(F.packageCount)*Number(F.pricePerUnit))})]})]})})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 flex gap-3",children:[s.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-4 rounded-2xl font-bold text-sm text-zinc-600 dark:text-zinc-400 bg-zinc-200 dark:bg-zinc-800 hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:ft,disabled:!F.name.trim(),className:"flex-[2] py-4 rounded-2xl font-bold text-sm text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]})}),s.jsx("section",{className:"relative z-10 mb-6",children:s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:N,onChange:V=>I(V.target.value)}),N&&s.jsx("button",{onClick:()=>I(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.jsx("button",{onClick:()=>w(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),x.map(V=>s.jsx("button",{onClick:()=>w(P===V?null:V),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===V?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:V},V))]}),(N||P)&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[s.jsxs("span",{className:"text-xs text-zinc-500",children:[Be.length," ",Be.length===1?"resultado":"resultados"]}),s.jsx("button",{onClick:()=>{I(""),w(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(yn).length>0&&s.jsx("div",{className:"space-y-8",children:Object.entries(yn).map(([V,q])=>s.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[s.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:V}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:ze((We.byCategory[V]||0)*(1+c))}),s.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:s.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[q.length," ",q.length===1?"item":"itens"]})})]})]}),s.jsxs("div",{className:"hidden md:block",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),s.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),s.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:q.map(K=>s.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:f===K.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:K.name,onChange:ee=>Ue(K.id,"name",ee.target.value)})}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:K.packageQuantity,onChange:ee=>Ue(K.id,"packageQuantity",ee.target.value)}),s.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:K.unit,onChange:ee=>Ue(K.id,"unit",ee.target.value),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]}),s.jsx("div",{className:"col-span-1",children:s.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:K.packageCount,onChange:ee=>Ue(K.id,"packageCount",ee.target.value)})}),K.category==="Ingredientes"&&s.jsx("div",{className:"col-span-2",children:s.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:K.subcategory||"",onChange:ee=>Ue(K.id,"subcategory",ee.target.value),children:x.map(ee=>s.jsx("option",{value:ee,children:ee},ee))})}),K.category!=="Ingredientes"&&s.jsx("div",{className:"col-span-2 text-right",children:s.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[ue(K)," ",K.unit]})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:K.pricePerUnit,onChange:ee=>Ue(K.id,"pricePerUnit",ee.target.value)})}),s.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:()=>Fe(K.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[de(K)==="low"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-rose-500 shadow-[0_0_6px_rgba(244,63,94,0.5)]",title:"Estoque baixo"}),de(K)==="warning"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-amber-500 shadow-[0_0_6px_rgba(245,158,11,0.4)]",title:"Prximo do mnimo"}),de(K)==="high"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_6px_rgba(59,130,246,0.4)]",title:"Acima do mximo"}),s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:K.name})]}),s.jsx("div",{className:"col-span-2 text-center",children:s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[K.packageQuantity," ",K.unit]})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[K.packageCount,""]})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[ue(K)," ",K.unit]})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:ze(K.pricePerUnit)})}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:ze(ve(K)*(1+c))}),s.jsx("button",{onClick:()=>y(K.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},K.id))})]}),s.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:q.map(K=>{const ee=de(K),Ee=ee==="low"?"border-l-4 border-l-rose-500":ee==="warning"?"border-l-4 border-l-amber-500":ee==="high"?"border-l-4 border-l-blue-500":"";return s.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${Ee} ${f===K.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:f===K.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>Fe(K.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:K.name,onChange:be=>Ue(K.id,"name",be.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),s.jsx("div",{className:"flex gap-2",children:s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.packageQuantity,onChange:be=>Ue(K.id,"packageQuantity",be.target.value)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.unit,onChange:be=>Ue(K.id,"unit",be.target.value),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),s.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.packageCount,onChange:be=>Ue(K.id,"packageCount",be.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),s.jsxs("div",{className:"relative group",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.pricePerUnit,onChange:be=>Ue(K.id,"pricePerUnit",be.target.value)})]})]})]}),K.category==="Ingredientes"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),s.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:K.subcategory||"",onChange:be=>Ue(K.id,"subcategory",be.target.value),children:x.map(be=>s.jsx("option",{value:be,children:be},be))})]})]}):s.jsxs("div",{onClick:()=>y(K.id),className:"group cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:K.name}),s.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[ue(K)," ",K.unit," em estoque"]})]}),s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[K.packageCount," pcts"]})]}),s.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),s.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:ze(K.pricePerUnit)})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:ze(ve(K)*(1+c))})})]})]})]})},K.id)})}),s.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",V]}),s.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:ze((We.byCategory[V]||0)*(1+c))})]})]},V))}),Object.keys(yn).length===0&&P!=="None"&&s.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),s.jsx("button",{onClick:()=>m(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),s.jsx("section",{className:"relative z-10 mt-8 mb-8",children:s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.25,.46,.45,.94]},className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-3xl p-6 md:p-8 border border-zinc-200/60 dark:border-white/10 shadow-2xl shadow-zinc-900/5 dark:shadow-black/20",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-zinc-900 dark:text-white tracking-tight",children:"Nveis"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1 font-medium",children:"Monitoramento de estoque"})]})}),s.jsx("div",{className:"relative mb-6",children:s.jsxs("div",{className:"relative flex bg-zinc-100/90 dark:bg-zinc-800/90 backdrop-blur-sm p-1 rounded-[10px] overflow-x-auto scrollbar-hide md:overflow-visible",children:[s.jsx(Q.div,{className:"absolute top-1 bottom-1 bg-white dark:bg-zinc-700 rounded-lg shadow-sm",initial:!1,animate:{width:`calc(${100/4}% - 2px)`,x:`calc(${["alerts","ok","noLimits","all"].indexOf(me)*100}% + 1px)`},transition:{type:"spring",stiffness:400,damping:30}}),[{id:"alerts",label:"Crtico"},{id:"ok",label:"Normal"},{id:"noLimits",label:"S/ Limite"},{id:"all",label:"Todos"}].map(V=>s.jsx("button",{onClick:()=>xe(V.id),className:`
                                        relative flex-1 min-w-[60px] py-2 px-1.5 text-center z-10 transition-colors duration-200
                                        ${me===V.id?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"}
                                    `,children:s.jsx("span",{className:"text-[13px] font-semibold tracking-[-0.01em]",children:V.label})},V.id))]})}),s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Buscar...",value:Y,onChange:V=>X(V.target.value),className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border-0 text-zinc-900 dark:text-white text-sm font-medium placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900/10 dark:focus:ring-white/20 transition-shadow"})]}),s.jsxs("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto overscroll-contain pr-1 -mr-1",children:[t.filter(V=>{const q=de(V);return me==="noLimits"?q==="noLimit":me==="alerts"?["low","warning","high"].includes(q):me==="ok"?q==="ok"||q==="adequate":!0}).filter(V=>Y.trim()?V.name.toLowerCase().includes(Y.toLowerCase()):!0).map(V=>{const q=de(V),K=ue(V),ee=Number(V.minStock)||0,Ee=Number(V.maxStock)||0;let be=0;Ee>0?be=Math.min(K/Ee*100,100):ee>0&&(be=Math.min(K/(ee*2)*100,100));const Se={low:{bg:"bg-rose-50 dark:bg-rose-500/5",accent:"bg-rose-500",text:"text-rose-600 dark:text-rose-400"},warning:{bg:"bg-amber-50 dark:bg-amber-500/5",accent:"bg-amber-500",text:"text-amber-600 dark:text-amber-400"},high:{bg:"bg-violet-50 dark:bg-violet-500/5",accent:"bg-violet-500",text:"text-violet-600 dark:text-violet-400"},ok:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-emerald-500",text:"text-emerald-600 dark:text-emerald-400"},adequate:{bg:"bg-sky-50 dark:bg-sky-500/5",accent:"bg-sky-500",text:"text-sky-600 dark:text-sky-400"},noLimit:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-zinc-300 dark:bg-zinc-600",text:"text-zinc-500 dark:text-zinc-400"}},cr=Se[q]||Se.noLimit;return s.jsx("div",{onClick:()=>te(V),className:`group p-4 rounded-2xl ${cr.bg} cursor-pointer transition-all duration-200 hover:shadow-lg active:scale-[0.98]`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-11 h-11 rounded-xl ${cr.accent} flex items-center justify-center shadow-lg`,children:s.jsx("span",{className:"text-white text-sm font-bold tabular-nums",children:K})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-zinc-900 dark:text-white truncate",children:V.name}),s.jsxs("p",{className:`text-xs font-medium mt-0.5 ${cr.text}`,children:[K," ",V.unit," ",ee>0&&` min ${ee}`," ",Ee>0&&` max ${Ee}`]}),(ee>0||Ee>0)&&s.jsx("div",{className:"mt-2 h-1 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${cr.accent} rounded-full transition-all duration-500`,style:{width:`${be}%`}})})]}),s.jsx("svg",{className:"w-5 h-5 text-zinc-300 group-hover:text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})},V.id)}),t.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-zinc-500 font-medium",children:"Nenhum item"})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6 border-t border-zinc-100 dark:border-zinc-800",children:[s.jsx("button",{onClick:()=>z(!0),className:"text-sm font-medium text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"Categorias"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:ji,className:"text-sm font-medium text-zinc-400 hover:text-zinc-600 transition-colors",children:"Exportar"}),s.jsx("button",{onClick:Wn,className:"text-sm font-medium text-rose-500 hover:text-rose-600 transition-colors",children:"Limpar"})]}),s.jsx("input",{ref:en,type:"file",accept:"application/json",className:"hidden",onChange:cs})]})]})}),H&&Ze.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Yl,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>te(null)}),s.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Configurar Limites"}),s.jsx("button",{onClick:()=>te(null),className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:`inline-flex w-16 h-16 rounded-2xl items-center justify-center text-2xl font-bold text-white mb-4 ${de(H)==="low"?"bg-gradient-to-br from-rose-500 to-rose-600":de(H)==="warning"?"bg-gradient-to-br from-amber-500 to-amber-600":de(H)==="high"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-emerald-500 to-emerald-600"}`,children:((re=(W=H.name)==null?void 0:W.charAt(0))==null?void 0:re.toUpperCase())||"?"}),s.jsx("h4",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:H.name}),s.jsxs("p",{className:"text-sm text-zinc-500 mt-1",children:["Estoque atual: ",s.jsxs("span",{className:"font-bold text-zinc-900 dark:text-white",children:[ue(H)," ",H.unit]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mnimo"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:H.minStock||"",onChange:V=>{Ue(H.id,"minStock",V.target.value),te(q=>({...q,minStock:Number(V.target.value)||0}))}}),s.jsx("p",{className:"text-[10px] text-amber-500 text-center mt-1",children:H.unit})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mximo"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition-all",placeholder:"0",value:H.maxStock||"",onChange:V=>{Ue(H.id,"maxStock",V.target.value),te(q=>({...q,maxStock:Number(V.target.value)||0}))}}),s.jsx("p",{className:"text-[10px] text-blue-500 text-center mt-1",children:H.unit})]})]}),s.jsx("button",{onClick:()=>te(null),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-sm font-bold uppercase tracking-wider shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Salvar Limites"})]})]})]}),document.body),C&&s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(Yl,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>z(!1)}),s.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[s.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:s.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),s.jsx("button",{onClick:()=>z(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),s.jsx("div",{className:"space-y-2",children:n.map((V,q)=>s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[s.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:V}),s.jsx("button",{onClick:()=>{k({title:"Excluir Categoria",message:`Excluir categoria "${V}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(K=>K.filter(ee=>ee!==V)),e(K=>K.map(ee=>ee.category===V?{...ee,category:"Outros"}:ee)),k(null),v("Categoria removida","success")},onCancel:()=>k(null)})},className:"w-11 h-11 flex items-center justify-center rounded-xl text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),s.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[s.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:A,onChange:V=>E(V.target.value),onKeyDown:V=>{V.key==="Enter"&&A.trim()&&(n.includes(A.trim())||(r(q=>[...q,A.trim()]),E("")))}}),s.jsx("button",{onClick:()=>{A.trim()&&!n.includes(A.trim())&&(r(V=>[...V,A.trim()]),E(""))},disabled:!A.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),s.jsx("button",{onClick:()=>{k({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(xh),k(null),v("Categorias restauradas","success")},onCancel:()=>k(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),s.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),s.jsx("div",{className:"space-y-2",children:x.map((V,q)=>s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[s.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:V}),s.jsx("button",{onClick:()=>{k({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${V}"?`,type:"danger",onConfirm:()=>{_(K=>K.filter(ee=>ee!==V)),k(null),v("Subcategoria removida","success")},onCancel:()=>k(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[s.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:ge,onChange:V=>le(V.target.value),onKeyDown:V=>{V.key==="Enter"&&ge.trim()&&(x.includes(ge.trim())||(_(q=>[...q,ge.trim()]),le("")))}}),s.jsx("button",{onClick:()=>{ge.trim()&&!x.includes(ge.trim())&&(_(V=>[...V,ge.trim()]),le(""))},disabled:!ge.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{onClick:()=>{k({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{_(yh),k(null),v("Subcategorias restauradas","success")},onCancel:()=>k(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),s.jsx(Ne,{children:b&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Yl,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:b.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${b.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:b.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:b.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:b.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:b.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${b.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Ne,{children:R&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:R.message})]}),document.body)})]})}function $5(){const[t,e]=j.useState([]),n=()=>{try{const r=localStorage.getItem(hr);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return j.useEffect(()=>{n();const r=o=>{o.key===hr&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}function Yl(){return qt(!0),null}const x1="fichaTecnica_pizzas",bc={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},vh=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,o=n*r;if(i<=0)return 0;const a=o/i,l=bc[t.unit]||1;return a/l};function bh(){return qt(!0),null}function r9({newPizzaName:t,setNewPizzaName:e,setIsCreatingPizza:n,handleCreatePizza:r}){return qt(!0),Ze.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:()=>{n(!1),e("")}}),s.jsxs(Q.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30,mass:.8},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-2xl overflow-hidden mt-16 md:mt-20 mx-4 md:mx-0 rounded-2xl",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[s.jsxs("div",{className:"flex items-center justify-between px-5 pt-4 pb-2",children:[s.jsx("div",{className:"w-12"}),s.jsx("h3",{className:"text-[17px] font-semibold text-zinc-900 dark:text-white",children:"Nova Pizza"}),s.jsx("button",{onClick:()=>{n(!1),e("")},className:"w-12 h-12 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-4"}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-14 h-14 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center shrink-0",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-zinc-400 dark:text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("div",{children:s.jsx("p",{className:"text-[15px] text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})})]}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",className:"w-full h-14 px-5 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[17px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Ex: Margherita",value:t,onChange:i=>e(i.target.value),autoFocus:!0,onKeyDown:i=>i.key==="Enter"&&r()})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{n(!1),e("")},className:"flex-1 h-14 rounded-2xl font-semibold text-[17px] text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),s.jsx("button",{onClick:r,disabled:!t.trim(),className:"flex-[1.5] h-14 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-[17px] hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-lg shadow-zinc-900/20 dark:shadow-white/10 touch-manipulation",children:"Criar"})]})]}),s.jsx("div",{style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"}})]})]}),document.body)}const y1={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function i9(){const[t,e]=j.useState(()=>{try{const D=localStorage.getItem(x1);return D?JSON.parse(D):[y1]}catch{return[y1]}}),[n,r]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const U=await De.getPizzas();U&&U.length>0&&e(U.map($=>({...$,ingredients:Array.isArray($.ingredients)?$.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,o]=j.useState(null),[a,l]=j.useState(null),[c,d]=j.useState(!1),[h,m]=j.useState(!1),[f,y]=j.useState(""),[N,I]=j.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[P,w]=j.useState(null),[b,k]=j.useState(null),[R,M]=j.useState(null),[L,v]=j.useState(null),x=j.useRef(null);j.useCallback((D,U="success")=>{x.current&&clearTimeout(x.current),v({message:D,type:U}),x.current=setTimeout(()=>v(null),3500)},[]);const _=$5();j.useEffect(()=>{localStorage.setItem(x1,JSON.stringify(t)),n&&De.syncPizzas(t)},[t,n]);const C=j.useMemo(()=>t.find(D=>D.id===i)||null,[t,i]),z=(D=[])=>{if(!Array.isArray(D))return{totalCost:0,costPerPizza:0};const U=D.reduce(($,oe)=>$+se(oe),0);return{totalCost:U,costPerPizza:U}},A=D=>(Number(D)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),E=D=>{const U=Number(D)||0;return U<.01&&U>0?U.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):U.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},ge=()=>{if(!f.trim())return;const D={id:Date.now(),name:f.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(U=>[...U,D]),y(""),m(!1),o(D.id)},le=D=>{const U=t.find($=>$.id===D);k({title:"Excluir Pizza",message:`A pizza "${(U==null?void 0:U.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e($=>$.filter(oe=>oe.id!==D)),i===D&&o(null),k(null)},onCancel:()=>k(null)})},me=D=>{const U=t.find($=>$.id===D);U&&M({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:U.name,onConfirm:$=>{$&&$!==U.name&&e(oe=>oe.map(T=>T.id===D?{...T,name:$.trim()}:T)),M(null)},onCancel:()=>M(null)})},xe=D=>{if(I(U=>({...U,name:D})),w(null),!!Array.isArray(_)&&D&&D.trim().length>0){const U=D.toLowerCase().trim(),$=_.find(oe=>!oe||!oe.name?!1:oe.name.toLowerCase()===U);if($){w($);const oe=vh($),T=bc[N.unit]||1,O=oe*T;I(F=>({...F,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:$.id}))}}},Y=D=>{I(U=>{const $={...U,unit:D};if(P){const oe=vh(P),T=bc[D]||1,O=oe*T;$.pricePerUnit=O.toFixed(6),$.isSyncedFromInventory=!0}return $})},X=(D=!1)=>{if(!C||!N.name.trim()||!N.quantity)return;const U={id:Date.now(),name:N.name.trim(),quantity:Number(N.quantity)||0,unit:N.unit,pricePerUnit:Number(N.pricePerUnit)||0,inventoryItemId:N.inventoryItemId};e($=>$.map(oe=>oe.id===i?{...oe,ingredients:[...oe.ingredients||[],U]}:oe)),I({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null),D?setTimeout(()=>{var $;($=document.getElementById("cat-ing-name-input"))==null||$.focus()},50):d(!1)},H=(D,U,$)=>{C&&e(oe=>oe.map(T=>T.id!==i?T:{...T,ingredients:(T.ingredients||[]).map(O=>O.id!==D?O:{...O,[U]:U==="name"||U==="unit"?$:Number($)||0})}))},te=D=>{C&&(e(U=>U.map($=>$.id!==i?$:{...$,ingredients:($.ingredients||[]).filter(oe=>oe.id!==D)})),l(null))},se=D=>(Number(D.quantity)||0)*(Number(D.pricePerUnit)||0),pe=C?z(C.ingredients):{totalCost:0,costPerPizza:0};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),s.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),s.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),s.jsx(Ne,{children:h&&s.jsx(r9,{newPizzaName:f,setNewPizzaName:y,setIsCreatingPizza:m,handleCreatePizza:ge})}),!i&&s.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(D=>{const U=z(D.ingredients);return s.jsxs("div",{onClick:()=>o(D.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:D.name}),s.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[D.ingredients.length," ingrediente",D.ingredients.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:$=>{$.stopPropagation(),me(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),s.jsx("button",{onClick:$=>{$.stopPropagation(),le(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),s.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:A(U.totalCost)})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),s.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:s.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[D.ingredients.length," itens"]})})]})]})]},D.id)}),t.length===0&&s.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),s.jsx("button",{onClick:()=>m(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),C&&s.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>o(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:C.name}),s.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[C.ingredients.length," ingrediente",C.ingredients.length!==1?"s":""," cadastrado",C.ingredients.length!==1?"s":""]})]})]}),s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:A(pe.totalCost)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:C.ingredients.length}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:A(pe.costPerPizza)}),s.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!c&&s.jsxs("button",{onClick:()=>d(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),c&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[s.jsx(bh,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{d(!1),I({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)}}),s.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[s.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:s.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),s.jsx("button",{onClick:()=>{d(!1),I({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"relative mb-5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:D=>{var U;D.key==="Enter"&&(D.preventDefault(),(U=document.getElementById("cat-ing-qty-input"))==null||U.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${P?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:N.name,onChange:D=>{const U=D.target.value;I($=>({...$,name:U})),P&&U!==P.name&&(w(null),I($=>({...$,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),xe(U)},autoFocus:!0}),P&&s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),N.name.length>0&&!P&&s.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const D=_.filter(U=>U.name.toLowerCase().includes(N.name.toLowerCase())).slice(0,6);return D.length===0&&N.name.length>1?s.jsxs("div",{className:"p-5 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),s.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',N.name,'" ao Estoque primeiro']})]}):D.map((U,$)=>s.jsxs("button",{onClick:()=>{w(U);const oe=vh(U),T=bc[N.unit]||1,O=oe*T;I(F=>({...F,name:U.name,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:U.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${$!==D.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:U.name}),s.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[U.packageQuantity*U.packageCount," ",U.unit]})]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},U.id))})()})]}),P&&s.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:P.name}),s.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",P.packageQuantity*P.packageCount," ",P.unit,"  ",A(P.packageCount*P.pricePerUnit)]})]})]})}),!P&&s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),s.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:N.unit,onChange:D=>Y(D.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),s.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),X(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:N.quantity,onChange:D=>I(U=>({...U,quantity:D.target.value}))})]}),P&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),s.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:N.unit})]})]}),P&&N.quantity&&s.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[s.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[N.quantity," ",N.unit,"  ",E(N.pricePerUnit),"/",N.unit]}),s.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:A(Number(N.quantity)*Number(N.pricePerUnit))})]})]}),s.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[s.jsx("button",{onClick:()=>{d(!1),I({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:X,disabled:!N.name||!N.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),C.ingredients.length>0&&s.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[s.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),s.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),s.jsx("div",{className:"col-span-1"})]}),s.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:C.ingredients.map(D=>s.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:a===D.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx("input",{id:`edit-ing-name-${D.id}`,autoFocus:!0,onKeyDown:U=>{var $;U.key==="Enter"&&(U.preventDefault(),($=document.getElementById(`edit-ing-qty-${D.id}`))==null||$.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.name,onChange:U=>H(D.id,"name",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&te(D.id)}})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{id:`edit-ing-qty-${D.id}`,onKeyDown:U=>{var $;U.key==="Enter"&&(U.preventDefault(),($=document.getElementById(`edit-ing-price-${D.id}`))==null||$.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.quantity,onChange:U=>H(D.id,"quantity",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&te(D.id)}})}),s.jsx("div",{className:"col-span-1",children:s.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.unit,onChange:U=>H(D.id,"unit",U.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{id:`edit-ing-price-${D.id}`,onKeyDown:U=>{U.key==="Enter"&&(U.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.pricePerUnit,onChange:U=>H(D.id,"pricePerUnit",U.target.value)})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:A(se(D))})}),s.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[s.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>te(D.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:D.name})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:D.quantity})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:D.unit})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(D.pricePerUnit)||0)})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:A(se(D))})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsx("button",{onClick:()=>l(D.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},D.id))}),s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[s.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:A(pe.totalCost)})}),s.jsx("div",{className:"col-span-1"})]})]}),C.ingredients.length>0&&s.jsxs("div",{className:"md:hidden space-y-4",children:[C.ingredients.map(D=>s.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${a===D.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:a===D.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>te(D.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:D.name,onChange:U=>H(D.id,"name",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&te(D.id)}})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),s.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:D.quantity,onChange:U=>H(D.id,"quantity",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&te(D.id)}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:D.unit,onChange:U=>H(D.id,"unit",U.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:D.pricePerUnit,onChange:U=>H(D.id,"pricePerUnit",U.target.value)})})]})]}):s.jsxs("div",{onClick:()=>l(D.id),className:"group cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:D.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[D.quantity," ",D.unit]}),s.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(D.pricePerUnit)||0),"/",D.unit]})]})]}),s.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:U=>{U.stopPropagation(),l(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),s.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:A(se(D))})]})]})},D.id)),s.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),s.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:A(pe.totalCost)})]})})]}),C.ingredients.length===0&&!c&&s.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),s.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),s.jsx(Ne,{children:b&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(bh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:b.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${b.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:b.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:b.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:b.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:b.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:b.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${b.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Ne,{children:R&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(bh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:R.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:R.title}),s.jsx("input",{autoFocus:!0,defaultValue:R.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:R.placeholder,onKeyDown:D=>{D.key==="Enter"&&R.onConfirm(D.target.value)}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:R.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:D=>{const U=D.target.closest(".relative").querySelector("input");R.onConfirm(U.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),s.jsx(Ne,{children:L&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${L.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":L.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${L.type==="error"?"bg-white animate-pulse":L.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:L.message})]}),document.body)})]})}function ur({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:o="0",pattern:a,inputMode:l}){const c=Number(e)||0,d=r==="g"&&Math.abs(c)>=1e3,h=d?"kg":r,m=()=>d?Math.round(c/1e3).toString():Math.round(c).toString(),[f,y]=j.useState(""),[N,I]=j.useState(!1);j.useEffect(()=>{N||y(e==null?"":m())},[e,N,d]);const P=k=>{const R=k.target.value;y(R);const M=parseFloat(R)||0;n==null||n(M)},w=()=>I(!0),b=()=>{I(!1),e!=null&&y(m())};return s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:t}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:a,value:f,onChange:P,onFocus:w,onBlur:b,placeholder:o}),h&&s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function Gs({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:o,step:a=.1,decimals:l=1,maxPct:c=null}){const d=Math.max(i||0,1),h=v=>d*(Number(v)||0)/100,m=v=>(Number(v)||0)/d*100,f=h(e),y=r==="grams"&&Math.abs(f)>=1e3,N=r==="grams"?y?"kg":"g":"%",I=()=>{const v=Number(e)||0;if(r==="grams"){const x=h(v);return y?x/1e3:x<10?x:Math.round(x)}return v},[P,w]=j.useState(()=>{if(e===""||e===null||e===void 0)return"";const v=I();return y?v.toFixed(2):v.toString()}),[b,k]=j.useState(!1);j.useEffect(()=>{if(!b)if(e===""||e===null||e===void 0)w("");else{const v=I();if(r==="grams"){const x=h(Number(e)||0);w(y?v.toFixed(2):x<10?x.toFixed(2):Math.round(x).toString())}else w(Number(v).toFixed(l))}},[e,r,i,b,y]);const R=v=>{const x=v.target.value;if(w(x),x===""){n==null||n("");return}let _=parseFloat(x);if(!Number.isNaN(_)){_=Math.max(0,_),r==="pct"&&c!==null&&_>c&&(_=c,w(_.toString()));let C=_;r==="grams"&&y&&(C=_*1e3);const z=r==="grams"?m(C):_;n==null||n(z)}},M=()=>{k(!0)},L=()=>{if(k(!1),P===""||P===null){w("");return}const v=parseFloat(P);if(!Number.isNaN(v))if(r==="grams"){const x=h(Number(e)||0);w(y||x<10?v.toFixed(2):Math.round(v).toString())}else w(v.toFixed(l))};return s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:t}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:o,step:r==="grams"?1:a,value:P,onChange:R,onFocus:M,onBlur:L,placeholder:"0"}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:N})]})]})}function s9({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:o=1e3}){const a=["None","ADY","IDY","CY"];function l(c,d,h){r==null||r({...n,[c]:{...n[c],[d]:h}})}return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"label",children:"Tipos de Fermentos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(c=>s.jsxs("label",{className:"button "+(t===c?"primary":""),children:[s.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:c,checked:t===c,onChange:()=>e==null?void 0:e(c)}),c]},c))}),t==="ADY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Gs,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:c=>l("ADY","yeastPct",c),mode:i,flourWeight:o,name:"ADY-yeast",decimals:3})}),t==="IDY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Gs,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:c=>l("IDY","yeastPct",c),mode:i,flourWeight:o,name:"IDY-yeast",decimals:3})}),t==="CY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Gs,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:c=>l("CY","yeastPct",c),mode:i,flourWeight:o,name:"CY-yeast",decimals:3})}),t==="None"&&s.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function o9({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:o=1e3}){const a=["None","Poolish","Biga","Levain"];function l(f,y,N){r==null||r({...n,[f]:{...n[f],[y]:Number.isNaN(N)?"":N}})}const c=i==="grams"?"g":"%",d=f=>o*(Number(f==null?void 0:f.pct)||0)/100,h=(f,y=0,N="")=>{let I=Number(f);if(!Number.isFinite(I))return"";let P=N,w=y;N==="g"&&Math.abs(I)>=1e3&&(I=I/1e3,P="kg",w=2);const b=I.toLocaleString("pt-BR",{minimumFractionDigits:w,maximumFractionDigits:w});return P?`${b} ${P}`:b},m=f=>{const y=n[f];if(!y)return null;const N=d(y),I=N*(Number(y.hydration)||0)/100;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[s.jsx(Gs,{label:`Farinha Pref. (${c})`,value:y.pct,onChange:P=>l(f,"pct",P),mode:i,flourWeight:o,name:`${f}-pct`}),s.jsx(Gs,{label:`gua (${c})`,value:y.hydration,onChange:P=>l(f,"hydration",Math.min(200,Math.max(0,P))),mode:i,flourWeight:N>0?N:o,name:`${f}-hydration`}),typeof y.yeastPct<"u"&&s.jsx(Gs,{label:`Fermento (${c})`,value:y.yeastPct,onChange:P=>l(f,"yeastPct",P),mode:i,flourWeight:N>0?N:o,name:`${f}-yeast`,decimals:2}),typeof y.inoculationPct<"u"&&s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:y.inoculationPct,onChange:P=>l(f,"inoculationPct",parseFloat(P.target.value)),step:1}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Tempo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.time_h,onChange:P=>l(f,"time_h",parseFloat(P.target.value))}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Temp."}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.temp_C,onChange:P=>l(f,"temp_C",parseFloat(P.target.value))}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&s.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(N,0,"g")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(I,0,"g")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(N+I,0,"g")})]})]})]})]})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"label",children:"Tipo de Fermentao"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(f=>s.jsxs("label",{className:"button "+(t===f?"primary":""),children:[s.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:f,checked:t===f,onChange:()=>e==null?void 0:e(f)}),f]},f))}),t==="Poolish"&&m("poolish"),t==="Biga"&&m("biga"),t==="Levain"&&m("levain"),t==="None"&&s.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function a9(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function Wo(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function l9({inputMode:t,setInputMode:e}){const[n,r]=j.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,o]=j.useState({}),a=j.useRef(null),[l,c]=j.useState("synced"),[d,h]=j.useState(null),[m,f]=j.useState(null),[y,N]=j.useState(null),I=j.useRef(null),P=j.useCallback((T,O="success")=>{I.current&&clearTimeout(I.current),N({message:T,type:O}),I.current=setTimeout(()=>N(null),3500)},[]),[w,b]=j.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});j.useEffect(()=>{(async()=>{const O=a9();o(O);try{const F=await De.getAllRecipes();if(Object.keys(F).length>0){const ne={...O,...F};o(ne),Wo(ne)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function k(T,O){r(F=>({...F,[T]:typeof O=="number"&&Number.isNaN(O)?"":O}))}function R(T){r(O=>({...O,preferment:T}))}function M(T){r(O=>({...O,yeastType:T}))}function L(T,O){t==="grams"?b(F=>({...F,[T]:Number(O)||0})):k(T,O)}function v(T){b(O=>({...O,flour:Number(T)||0}))}const x=j.useMemo(()=>{var ne;const T=ue=>Number(ue)||0,O=((ne=n.yeastType)==null?void 0:ne[n.yeastSelection])||{},F=T(O.yeastPct);return 100+T(n.water)+T(n.sugar)+T(n.salt)+T(n.oliveOil)+T(n.oil)+T(n.milk)+T(n.butter)+T(n.diastatic)+F},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),_=j.useMemo(()=>{const T=Number(n.doughBalls)||0,O=Number(n.ballWeight)||0;return T*O},[n.doughBalls,n.ballWeight]),C=j.useMemo(()=>{const T=Number(_)||0,O=Number(x)||100;return O<=0?0:T*100/O},[_,x]),z=j.useMemo(()=>{var ue;const T=C,O=de=>T*(Number(de)||0)/100,F=((ue=n.yeastType)==null?void 0:ue[n.yeastSelection])||{},ne=Number(F.yeastPct)||0;return{flour:T,water:O(n.water),sugar:O(n.sugar),salt:O(n.salt),oliveOil:O(n.oliveOil),oil:O(n.oil),milk:O(n.milk),butter:O(n.butter),diastatic:O(n.diastatic),yeast:T*ne/100,total:T+O(n.water)+O(n.sugar)+O(n.salt)+O(n.oliveOil)+O(n.oil)+O(n.milk)+O(n.butter)+O(n.diastatic)+T*ne/100}},[C,n]),A=j.useMemo(()=>{if(t==="grams"){const T=(Number(w.flour)||0)+(Number(w.water)||0)+(Number(w.sugar)||0)+(Number(w.salt)||0)+(Number(w.oliveOil)||0)+(Number(w.oil)||0)+(Number(w.milk)||0)+(Number(w.butter)||0)+(Number(w.diastatic)||0)+(Number(w.yeast)||0);return{flour:w.flour,water:w.water,sugar:w.sugar,salt:w.salt,oliveOil:w.oliveOil,oil:w.oil,milk:w.milk,butter:w.butter,diastatic:w.diastatic,yeast:w.yeast,total:T}}return z},[t,w,z]),E=j.useMemo(()=>{const T=Number(A.flour)||0;if(T<=0)return 0;const O=Number(A.water)||0,F=Number(A.milk)||0;return(O+F)/T*100},[A.flour,A.water,A.milk]),ge=String(n.prefermentType||"").toLowerCase(),le=n.preferment&&n.preferment[ge]?n.preferment[ge]:null,me=le?C*(Number(le.pct)||0)/100:0,xe=me*(Number(le==null?void 0:le.hydration)||0)/100,Y=me+xe;function X(){f({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:T=>{if(!T)return;const O={...i,[T]:n};o(O),Wo(O),De.saveRecipe(T,n).then(F=>{F&&c("synced")}),f(null)},onCancel:()=>f(null)})}function H(T){const O=i[T];O&&r(O)}function te(T){h({title:"Excluir Receita",message:`A receita "${T}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const O={...i};delete O[T],o(O),Wo(O),De.deleteRecipe(T),h(null)},onCancel:()=>h(null)})}function se(T){f({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:T,onConfirm:O=>{if(!O||O===T)return;const F={...i};F[O]=F[T];const ne=F[T];delete F[T],o(F),Wo(F),De.deleteRecipe(T),De.saveRecipe(O,ne),f(null)},onCancel:()=>f(null)})}function pe(){const T=JSON.stringify({inputs:n,recipes:i},null,2),O=new Blob([T],{type:"application/json"}),F=URL.createObjectURL(O),ne=document.createElement("a");ne.href=F,ne.download="padoca_pizza_recipes.json",ne.click(),URL.revokeObjectURL(F)}function D(T){var ne;const O=(ne=T.target.files)==null?void 0:ne[0];if(!O)return;const F=new FileReader;F.onload=ue=>{try{const de=JSON.parse(String(ue.target.result||"{}"));de.inputs&&r(de.inputs),de.recipes&&(o(de.recipes),Wo(de.recipes)),P("Importao concluda!","success")}catch{P("Arquivo invlido.","error")}},F.readAsText(O),T.target.value=""}function U(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function $(T,O=0,F=""){let ne=Number(T);if(!Number.isFinite(ne))return"";let ue=F,de=O;F==="g"&&Math.abs(ne)>=1e3&&(ne=ne/1e3,ue="kg",de=2);const ve=ne.toLocaleString("pt-BR",{minimumFractionDigits:de,maximumFractionDigits:de});return ue?`${ve} ${ue}`:ve}function oe(T){return(Number(T)||0)>.001}return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:$(A.total,0,"g")})]})]}),s.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:$(_,0,"g")})})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(A.total)||0)-(Number(_)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:$((Number(A.total)||0)-(Number(_)||0),1,"g")})})]})]})]})}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:T=>{const O=parseFloat(T.target.value);k("doughBalls",Math.round(O))}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:T=>{const O=parseFloat(T.target.value);if(t==="grams"){const ne=C*x/100;let ue=O>0?Math.round(ne/O):1;ue<1&&(ue=1);const de=Math.round(ne/ue);r(ve=>({...ve,ballWeight:de,doughBalls:ue}))}else k("ballWeight",Math.round(O))}})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),s.jsx(o9,{value:n.prefermentType,onChange:T=>k("prefermentType",T),data:n.preferment,onDataChange:R,inputMode:t,flourWeight:C})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&s.jsx(ur,{label:"Farinha Total",value:w.flour,onChange:v,unit:"g"}),s.jsx(ur,{label:"gua",value:t==="grams"?w.water:n.water,onChange:T=>L("water",T),unit:t==="grams"?"g":"%"}),s.jsx(ur,{label:"Sal",value:t==="grams"?w.salt:n.salt,onChange:T=>L("salt",T),unit:t==="grams"?"g":"%"}),s.jsx(ur,{label:"Azeite",value:t==="grams"?w.oliveOil:n.oliveOil,onChange:T=>L("oliveOil",T),unit:t==="grams"?"g":"%"}),s.jsx(ur,{label:"Acar",value:t==="grams"?w.sugar:n.sugar,onChange:T=>L("sugar",T),unit:t==="grams"?"g":"%"}),s.jsx(ur,{label:"leo",value:t==="grams"?w.oil:n.oil,onChange:T=>L("oil",T),unit:t==="grams"?"g":"%"}),s.jsx(ur,{label:"Leite",value:t==="grams"?w.milk:n.milk,onChange:T=>L("milk",T),unit:t==="grams"?"g":"%"}),s.jsx(ur,{label:"Manteiga",value:t==="grams"?w.butter:n.butter,onChange:T=>L("butter",T),unit:t==="grams"?"g":"%"}),s.jsx(ur,{label:"Malte",value:t==="grams"?w.diastatic:n.diastatic,onChange:T=>L("diastatic",T),unit:t==="grams"?"g":"%"})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),s.jsx(s9,{value:n.yeastSelection,onChange:T=>k("yeastSelection",T),data:n.yeastType,onDataChange:M,inputMode:t,flourWeight:C})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:T=>k("RT_h",parseFloat(T.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:T=>k("RT_C",parseFloat(T.target.value))})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:T=>k("CT_h",parseFloat(T.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:T=>k("CT_C",parseFloat(T.target.value))})]})]})]}),n.prefermentType!=="None"&&le&&s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),s.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:$(le.pct,1,"%")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(me,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(xe,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(Y,0,"g")})]})]}),(typeof le.yeastPct<"u"||typeof le.inoculationPct<"u"||typeof le.time_h<"u"||typeof le.temp_C<"u")&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof le.yeastPct<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(me*(Number(le.yeastPct)||0)/100,2,"g")})]}),typeof le.inoculationPct<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(le.inoculationPct,1,"%")})]}),typeof le.time_h<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(le.time_h,0,"h")})]}),typeof le.temp_C<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(le.temp_C,0,"C")})]})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),s.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[oe(A.flour)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.flour-me,0,"g")})]}),oe(A.water)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.water-xe,0,"g")})]}),n.prefermentType!=="None"&&le&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(Y,0,"g")})]}),oe(A.salt)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.salt,1,"g")})]}),oe(A.sugar)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.sugar,1,"g")})]}),oe(A.oliveOil)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.oliveOil,1,"g")})]}),oe(A.oil)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.oil,1,"g")})]}),oe(A.milk)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.milk,1,"g")})]}),oe(A.butter)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.butter,1,"g")})]}),oe(A.diastatic)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.diastatic,1,"g")})]}),oe(A.yeast)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.yeast,2,"g")})]})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),s.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:$(A.total,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),s.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:$(E,1,"%")})]})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsx("button",{onClick:X,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),s.jsx("button",{onClick:()=>{var T;return(T=a.current)==null?void 0:T.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),s.jsx("button",{onClick:pe,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),s.jsx("button",{onClick:U,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),s.jsx("input",{ref:a,type:"file",accept:"application/json",className:"hidden",onChange:D})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?s.jsxs("div",{className:"text-center py-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):s.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([T])=>s.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[s.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:T}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>H(T),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),s.jsx("button",{onClick:()=>se(T),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),s.jsx("button",{onClick:()=>te(T),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},T))})]}),s.jsx(Ne,{children:d&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(v1,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:d.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${d.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:d.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:d.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:d.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:d.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${d.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Ne,{children:m&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(v1,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:m.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:m.title}),s.jsx("input",{autoFocus:!0,defaultValue:m.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:m.placeholder,onKeyDown:T=>{T.key==="Enter"&&m.onConfirm(T.target.value)}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:m.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:T=>{const O=T.target.closest(".relative").querySelector("input");m.onConfirm(O.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),s.jsx(Ne,{children:y&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${y.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":y.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${y.type==="error"?"bg-white animate-pulse":y.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:y.message})]}),document.body)})]})}function v1(){return qt(!0),null}const c9=10*1024*1024,u9=15e3,d9=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>c9){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const a=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},u9),l=new Image;l.onload=()=>{clearTimeout(a);try{const c=document.createElement("canvas");let d=l.width,h=l.height;d>e&&(h=e/d*h,d=e),c.width=d,c.height=h;const m=c.getContext("2d");if(!m){i(new Error("Falha ao criar contexto de imagem."));return}m.drawImage(l,0,0,d,h);const f=c.toDataURL("image/jpeg",n);if(!f||f==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(f)}catch(c){i(new Error("Erro ao processar imagem: "+c.message))}},l.onerror=()=>{clearTimeout(a),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t});var lf=function(t,e){return lf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},lf(t,e)};function h9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");lf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var zt=function(){return zt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zt.apply(this,arguments)};var b1=!1,Pi,cf,uf,wc,kc,W5,jc,df,hf,ff,q5,mf,pf,H5,G5;function tn(){if(!b1){b1=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(mf=/\b(iPhone|iP[ao]d)/.exec(t),pf=/\b(iP[ao]d)/.exec(t),ff=/Android/i.exec(t),H5=/FBAN\/\w+;/i.exec(t),G5=/Mobile/i.exec(t),q5=!!/Win64/.exec(t),e){Pi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Pi&&document&&document.documentMode&&(Pi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);W5=r?parseFloat(r[1])+4:Pi,cf=e[2]?parseFloat(e[2]):NaN,uf=e[3]?parseFloat(e[3]):NaN,wc=e[4]?parseFloat(e[4]):NaN,wc?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),kc=e&&e[1]?parseFloat(e[1]):NaN):kc=NaN}else Pi=cf=uf=kc=wc=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);jc=i?parseFloat(i[1].replace("_",".")):!0}else jc=!1;df=!!n[2],hf=!!n[3]}else jc=df=hf=!1}}var gf={ie:function(){return tn()||Pi},ieCompatibilityMode:function(){return tn()||W5>Pi},ie64:function(){return gf.ie()&&q5},firefox:function(){return tn()||cf},opera:function(){return tn()||uf},webkit:function(){return tn()||wc},safari:function(){return gf.webkit()},chrome:function(){return tn()||kc},windows:function(){return tn()||df},osx:function(){return tn()||jc},linux:function(){return tn()||hf},iphone:function(){return tn()||mf},mobile:function(){return tn()||mf||pf||ff||G5},nativeApp:function(){return tn()||H5},android:function(){return tn()||ff},ipad:function(){return tn()||pf}},f9=gf,m9=!!(typeof window<"u"&&window.document&&window.document.createElement),p9={canUseDOM:m9},g9=p9,K5=g9,Q5;K5.canUseDOM&&(Q5=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function x9(t,e){if(!K5.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&Q5&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var y9=x9,v9=f9,b9=y9,w1=10,k1=40,j1=800;function Y5(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*w1,i=n*w1,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=k1,i*=k1):(r*=j1,i*=j1)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}Y5.getEventType=function(){return v9.firefox()?"DOMMouseScroll":b9("wheel")?"wheel":"mousewheel"};var w9=Y5,k9=w9;const j9=R1(k9);function N9(t,e,n,r,i,o){o===void 0&&(o=0);var a=lo(t,e,o),l=a.width,c=a.height,d=Math.min(l,n),h=Math.min(c,r);return d>h*i?{width:h*i,height:h}:{width:d,height:d/i}}function _9(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function qo(t,e,n,r,i){i===void 0&&(i=0);var o=lo(e.width,e.height,i),a=o.width,l=o.height;return{x:N1(t.x,a,n.width,r),y:N1(t.y,l,n.height,r)}}function N1(t,e,n,r){var i=e*r/2-n/2;return td(t,-i,i)}function _1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function z1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function z9(t,e,n,r,i,o,a){o===void 0&&(o=0),a===void 0&&(a=!0);var l=a?C9:S9,c=lo(e.width,e.height,o),d=lo(e.naturalWidth,e.naturalHeight,o),h={x:l(100,((c.width-n.width/i)/2-t.x/i)/c.width*100),y:l(100,((c.height-n.height/i)/2-t.y/i)/c.height*100),width:l(100,n.width/c.width*100/i),height:l(100,n.height/c.height*100/i)},m=Math.round(l(d.width,h.width*d.width/100)),f=Math.round(l(d.height,h.height*d.height/100)),y=d.width>=d.height*r,N=y?{width:Math.round(f*r),height:f}:{width:m,height:Math.round(m/r)},I=zt(zt({},N),{x:Math.round(l(d.width-N.width,h.x*d.width/100)),y:Math.round(l(d.height-N.height,h.y*d.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:I}}function C9(t,e){return Math.min(t,Math.max(0,e))}function S9(t,e){return e}function E9(t,e,n,r,i,o){var a=lo(e.width,e.height,n),l=td(r.width/a.width*(100/t.width),i,o),c={x:l*a.width/2-r.width/2-a.width*l*(t.x/100),y:l*a.height/2-r.height/2-a.height*l*(t.y/100)};return{crop:c,zoom:l}}function T9(t,e,n){var r=_9(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function I9(t,e,n,r,i,o){n===void 0&&(n=0);var a=lo(e.naturalWidth,e.naturalHeight,n),l=td(T9(t,e,r),i,o),c=r.height>r.width?r.height/t.height:r.width/t.width,d={x:((a.width-t.width)/2-t.x)*c,y:((a.height-t.height)/2-t.y)*c};return{crop:d,zoom:l}}function C1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function A9(t){return t*Math.PI/180}function lo(t,e,n){var r=A9(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function td(t,e,n){return Math.min(Math.max(t,e),n)}function Xl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var P9=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,R9=1,D9=3,M9=1,V9=function(t){h9(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=j.createRef(),n.imageRef=j.createRef(),n.videoRef=j.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=E9(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),o=i.crop,a=i.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(a)}else if(n.props.initialCroppedAreaPixels){var l=I9(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),o=l.crop,a=l.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(a)}},n.computeSizes=function(){var r,i,o,a,l,c,d=n.imageRef.current||n.videoRef.current;if(d&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,m=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,f=((o=n.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((a=n.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,y=d.offsetWidth<m||d.offsetHeight<f,N=m/f,I=void 0;if(y)switch(n.state.mediaObjectFit){default:case"contain":I=h>N?{width:n.containerRect.height*N,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/N};break;case"horizontal-cover":I={width:n.containerRect.width,height:n.containerRect.width/N};break;case"vertical-cover":I={width:n.containerRect.height*N,height:n.containerRect.height};break}else I={width:d.offsetWidth,height:d.offsetHeight};n.mediaSize=zt(zt({},I),{naturalWidth:m,naturalHeight:f}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var P=n.props.cropSize?n.props.cropSize:N9(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((l=n.state.cropSize)===null||l===void 0?void 0:l.height)!==P.height||((c=n.state.cropSize)===null||c===void 0?void 0:c.width)!==P.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(P),n.setState({cropSize:P},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(P),P}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),o=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var a=n.gestureRotationStart+r.rotation;n.props.onRotationChange(a)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,o,a=r.x,l=r.y;n.dragStartPosition={x:a,y:l},n.dragStartCrop=zt({},n.props.crop),(o=(i=n.props).onInteractionStart)===null||o===void 0||o.call(i)},n.onDrag=function(r){var i=r.x,o=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||o===void 0)){var a=i-n.dragStartPosition.x,l=o-n.dragStartPosition.y,c={x:n.dragStartCrop.x+a,y:n.dragStartCrop.y+l},d=n.props.restrictPosition?qo(c,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):c;n.props.onCropChange(d)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),o=j9(r).pixelY,a=n.props.zoom-o*n.props.zoomSpeed/200;n.setNewZoom(a,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=n.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=n.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},n.getPointOnContainer=function(r,i){var o=r.x,a=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(o-i.x),y:n.containerRect.height/2-(a-i.y)}},n.getPointOnMedia=function(r){var i=r.x,o=r.y,a=n.props,l=a.crop,c=a.zoom;return{x:(i+l.x)/c,y:(o+l.y)/c}},n.setNewZoom=function(r,i,o){var a=o===void 0?{}:o,l=a.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!n.state.cropSize||!n.props.onZoomChange)){var d=td(r,n.props.minZoom,n.props.maxZoom);if(c){var h=n.getPointOnContainer(i,n.containerPosition),m=n.getPointOnMedia(h),f={x:m.x*d-h.x,y:m.y*d-h.y},y=n.props.restrictPosition?qo(f,n.mediaSize,n.state.cropSize,d,n.props.rotation):f;n.props.onCropChange(y)}n.props.onZoomChange(d)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?qo(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return z9(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,o=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,o),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,o)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,o=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,o)}},n.recomputeCropPosition=function(){var r,i;if(n.state.cropSize){var o=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((i=n.previousCropSize)===null||i===void 0)&&i.height)){var a=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(a){var l=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;o={x:n.props.crop.x*l,y:n.props.crop.y*c}}}var d=n.props.restrictPosition?qo(o,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):o;n.previousCropSize=n.state.cropSize,n.props.onCropChange(d),n.emitCropData()}},n.onKeyDown=function(r){var i,o,a=n.props,l=a.crop,c=a.onCropChange,d=a.keyboardStep,h=a.zoom,m=a.rotation,f=d;if(n.state.cropSize){r.shiftKey&&(f*=.2);var y=zt({},l);switch(r.key){case"ArrowUp":y.y-=f,r.preventDefault();break;case"ArrowDown":y.y+=f,r.preventDefault();break;case"ArrowLeft":y.x-=f,r.preventDefault();break;case"ArrowRight":y.x+=f,r.preventDefault();break;default:return}n.props.restrictPosition&&(y=qo(y,n.mediaSize,n.state.cropSize,h,m)),r.repeat||(o=(i=n.props).onInteractionStart)===null||o===void 0||o.call(i),c(y)}},n.onKeyUp=function(r){var i,o;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(o=(i=n.props).onInteractionEnd)===null||o===void 0||o.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=P9,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,o,a,l,c,d,h,m;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((o=n.cropSize)===null||o===void 0?void 0:o.width)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.width)?this.computeSizes():(((l=n.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=n.crop)===null||d===void 0?void 0:d.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((m=this.videoRef.current)===null||m===void 0||m.load());var f=this.getObjectFit();f!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:f},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,o;if(this.props.objectFit==="cover"){var a=this.imageRef.current||this.videoRef.current;if(a&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,d=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,h=c/d;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=_1(r,i),this.lastPinchRotation=z1(r,i),this.onDragStart(C1(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),o=e.getTouchPoint(n.touches[1]),a=C1(i,o);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=_1(i,o),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,a,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var d=z1(i,o),h=r.props.rotation+(d-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=d})}},e.prototype.render=function(){var n=this,r,i=this.props,o=i.image,a=i.video,l=i.mediaProps,c=i.cropperProps,d=i.transform,h=i.crop,m=h.x,f=h.y,y=i.rotation,N=i.zoom,I=i.cropShape,P=i.showGrid,w=i.roundCropAreaPixels,b=i.style,k=b.containerStyle,R=b.cropAreaStyle,M=b.mediaStyle,L=i.classes,v=L.containerClassName,x=L.cropAreaClassName,_=L.mediaClassName,C=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return j.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(A){return n.containerRef=A},"data-testid":"container",style:k,className:Xl("reactEasyCrop_Container",v)},o?j.createElement("img",zt({alt:"",className:Xl("reactEasyCrop_Image",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{src:o,ref:this.imageRef,style:zt(zt({},M),{transform:d||"translate(".concat(m,"px, ").concat(f,"px) rotate(").concat(y,"deg) scale(").concat(N,")")}),onLoad:this.onMediaLoad})):a&&j.createElement("video",zt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Xl("reactEasyCrop_Video",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:zt(zt({},M),{transform:d||"translate(".concat(m,"px, ").concat(f,"px) rotate(").concat(y,"deg) scale(").concat(N,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(z){return j.createElement("source",zt({key:z.src},z))})),this.state.cropSize&&j.createElement("div",zt({ref:this.cropperRef,style:zt(zt({},R),{width:w?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:w?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Xl("reactEasyCrop_CropArea",I==="round"&&"reactEasyCrop_CropAreaRound",P&&"reactEasyCrop_CropAreaGrid",x)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:D9,minZoom:R9,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:M9},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(j.Component);const L9=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",i=>n(i)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function X5(t){return t*Math.PI/180}function O9(t,e,n){const r=X5(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function F9(t,e,n=0,r={horizontal:!1,vertical:!1}){const i=await L9(t),o=document.createElement("canvas"),a=o.getContext("2d");if(!a)return null;const l=X5(n),{width:c,height:d}=O9(i.width,i.height,n);o.width=c,o.height=d,a.translate(c/2,d/2),a.rotate(l),a.scale(r.horizontal?-1:1,r.vertical?-1:1),a.translate(-i.width/2,-i.height/2),a.drawImage(i,0,0);const h=a.getImageData(e.x,e.y,e.width,e.height);return o.width=e.width,o.height=e.height,a.putImageData(h,0,0),o.toDataURL("image/jpeg",.9)}const B9=()=>{const[t,e]=j.useState(null),n=j.useRef(null),r=j.useCallback((a,l="error")=>{n.current&&clearTimeout(n.current),e({message:a,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),i=j.useMemo(()=>({error:a=>r(a,"error"),success:a=>r(a,"success"),info:a=>r(a,"info")}),[r]),o=t?Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:i,ToastUI:o}},ut={Camera:()=>s.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:t=>s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},U9=({src:t,onClose:e})=>(qt(!0),Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[s.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:s.jsx(ut.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),s.jsx(Q.img,{src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:n=>n.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body)),$9=({imageSrc:t,onCancel:e,onCropComplete:n})=>{const[r,i]=j.useState({x:0,y:0}),[o,a]=j.useState(1),[l,c]=j.useState(null),[d,h]=j.useState(!1);qt(!0);const m=(y,N)=>{c(N)},f=async()=>{try{const y=await F9(t,l);n(y)}catch(y){console.error(y)}};return Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black flex flex-col",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[20001] px-6 py-12 flex justify-between items-center bg-gradient-to-b from-black/80 via-black/40 to-transparent pointer-events-none",children:[s.jsx("button",{onClick:e,className:"pointer-events-auto px-5 py-2.5 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/10 text-white text-sm font-semibold transition-all active:scale-95",children:"Cancelar"}),s.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest opacity-80 mt-1",children:"Redimensionar"}),s.jsx("button",{onClick:f,className:"pointer-events-auto px-6 py-2.5 rounded-full bg-white text-black text-sm font-bold transition-all hover:bg-zinc-100 active:scale-95 shadow-[0_4px_24px_rgba(255,255,255,0.2)]",children:"OK"})]}),s.jsx("div",{className:"relative flex-1 bg-black",children:s.jsx(V9,{image:t,crop:r,zoom:o,aspect:4/5,onCropChange:i,onZoomChange:a,onCropComplete:m,showGrid:d,onInteractionStart:()=>h(!0),onInteractionEnd:()=>h(!1),classes:{containerClassName:"bg-black",mediaClassName:"object-contain",cropAreaClassName:"border border-white/40 shadow-[0_0_0_1000px_rgba(0,0,0,0.7)]"}})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[20001] px-8 py-16 flex flex-col items-center bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none",children:[s.jsxs("div",{className:"w-full max-w-xs flex items-center gap-6 pointer-events-auto",children:[s.jsx("button",{onClick:()=>a(Math.max(1,o-.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:s.jsx(ut.Camera,{className:"w-4 h-4"})}),s.jsx("input",{type:"range",value:o,min:1,max:3,step:.01,onChange:y=>a(parseFloat(y.target.value)),className:"range-slider accent-white"}),s.jsx("button",{onClick:()=>a(Math.min(3,o+.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:s.jsx(ut.Plus,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"mt-8 flex gap-1 items-center opacity-30 select-none",children:[1,1.5,2,2.5,3].map(y=>s.jsx("div",{className:`w-1 h-3 rounded-full transition-all duration-300 ${o>=y?"bg-white h-5 opacity-100":"bg-white/40"}`},y))})]}),s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/20 rounded-full z-[20002]"})]}),document.body)},W9=({id:t,children:e})=>{const n=$m();return s.jsx(Lu,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},q9=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,o]=j.useState(""),[a,l]=j.useState(null),[c,d]=j.useState(""),[h,m]=j.useState(null),[f,y]=j.useState(null),[N,I]=j.useState(!1),P=j.useRef(null);qt(!0);const w=["#FF3B30","#FF9500","#FFCC00","#34C759","#00C7BE","#007AFF","#5856D6","#AF52DE","#FF2D55","#8E8E93"],b=x=>typeof x=="string"?{name:x,color:"#007AFF"}:{name:x.name||"Sem nome",color:x.color||"#007AFF"},k=()=>{const x=i.trim();!x||t.some(C=>Kt(C)===x)||(n([...t,{name:x,color:"#007AFF"}]),o(""))},R=x=>{const _=c.trim(),C=Kt(x);if(!_||_===C){l(null);return}if(t.some(A=>Kt(A)===_)){l(null);return}r(C,_),n(t.map(A=>{const E=b(A);return E.name===C?{...E,name:_}:E})),l(null)},M=(x,_)=>{const C=Kt(x);n(t.map(z=>{const A=b(z);return A.name===C?{...A,color:_}:A})),y(null)},L=x=>{const _=Kt(x);n(t.filter(C=>Kt(C)!==_)),r(_,"Outros"),m(null)},v=(x,_)=>{I(!1),(_.offset.y>100||_.velocity.y>500)&&e()};return Ze.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-stretch md:items-center justify-center",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:e}),s.jsxs(Q.div,{ref:P,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:.8},drag:window.innerWidth>=768?"y":!1,dragConstraints:{top:0,bottom:0},dragElastic:{top:0,bottom:.7},onDragStart:()=>I(!0),onDragEnd:v,className:"relative w-full h-full md:h-auto md:max-w-md md:max-h-[80vh] bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-[0_-10px_60px_rgba(0,0,0,0.25)] dark:shadow-[0_-10px_60px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",style:{paddingTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[s.jsx("div",{className:"flex justify-center pt-3 pb-2 shrink-0 cursor-grab active:cursor-grabbing md:hidden touch-manipulation",children:s.jsx(Q.div,{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600",animate:{scale:N?1.1:1,backgroundColor:N?"#007AFF":void 0},transition:{duration:.15}})}),s.jsxs("div",{className:"flex items-center justify-between px-6 pt-4 md:pt-6 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[22px] font-bold text-zinc-900 dark:text-white tracking-tight leading-tight",children:"Categorias"}),s.jsx("p",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400 mt-0.5",children:"Organize suas receitas"})]}),s.jsx("button",{onClick:e,className:"w-12 h-12 -mr-2 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 pb-5 shrink-0",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),onKeyDown:x=>x.key==="Enter"&&k(),className:"w-full h-12 px-4 rounded-xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[16px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Nova categoria..."})}),s.jsx("button",{onClick:k,disabled:!i.trim(),className:"w-12 h-12 flex items-center justify-center bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation shadow-lg shadow-blue-500/25",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),s.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-6"}),s.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-4 py-4",children:t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),s.jsx("p",{className:"text-[15px] font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhuma categoria ainda"})]}):s.jsx("div",{className:"space-y-2",children:t.map((x,_)=>{const{name:C,color:z}=b(x),A=C+_;return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center gap-3 py-3 px-3 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[s.jsx("button",{onClick:()=>y(f===A?null:A),className:"w-12 h-12 rounded-xl flex items-center justify-center touch-manipulation hover:bg-white dark:hover:bg-zinc-700 transition-colors active:scale-95",children:s.jsx("div",{className:"w-7 h-7 rounded-full shadow-sm transition-transform hover:scale-110",style:{backgroundColor:z}})}),s.jsx("div",{className:"flex-1 min-w-0",children:a===A?s.jsx("input",{autoFocus:!0,value:c,onChange:E=>d(E.target.value),onBlur:()=>R(x),onKeyDown:E=>{E.key==="Enter"&&R(x),E.key==="Escape"&&l(null)},className:"w-full h-10 px-3 -ml-3 bg-white dark:bg-zinc-700 rounded-lg outline-none text-[16px] font-semibold text-zinc-900 dark:text-white ring-2 ring-blue-500"}):s.jsx("button",{onClick:()=>{l(A),d(C)},className:"text-left w-full py-2 text-[16px] font-semibold text-zinc-900 dark:text-white truncate touch-manipulation",children:C})}),s.jsx("button",{onClick:()=>m(x),className:"w-12 h-12 flex items-center justify-center rounded-xl text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all active:scale-95 touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsx(Ne,{children:f===A&&s.jsxs(s.Fragment,{children:[s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:30},className:"md:hidden fixed inset-x-0 bottom-0 z-[80] bg-white dark:bg-zinc-800 rounded-t-3xl shadow-[0_-20px_60px_rgba(0,0,0,0.3)] p-6",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 24px)"},children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600"})}),s.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white text-center mb-5",children:"Escolha uma Cor"}),s.jsx("div",{className:"grid grid-cols-5 gap-4 mb-6",children:w.map(E=>s.jsx("button",{onClick:()=>M(x,E),className:`aspect-square rounded-full transition-all active:scale-90 touch-manipulation ${z===E?"ring-[3px] ring-offset-4 ring-offset-white dark:ring-offset-zinc-800 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:E}},E))}),s.jsx("button",{onClick:()=>y(null),className:"w-full h-14 bg-zinc-100 dark:bg-zinc-700 rounded-2xl text-[17px] font-semibold text-zinc-900 dark:text-white active:bg-zinc-200 dark:active:bg-zinc-600 transition-colors touch-manipulation",children:"Fechar"})]}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 z-[75] bg-black/40",onClick:()=>y(null)}),s.jsx(Q.div,{initial:{opacity:0,scale:.95,y:-8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-8},transition:{duration:.15},className:"hidden md:block absolute left-3 top-full mt-2 z-[80] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:s.jsx("div",{className:"grid grid-cols-5 gap-2",children:w.map(E=>s.jsx("button",{onClick:()=>M(x,E),className:`w-8 h-8 rounded-full transition-all hover:scale-110 active:scale-95 ${z===E?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:E}},E))})})]})})]},A)})})}),s.jsx(Ne,{children:h&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:s.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:"w-full max-w-[280px] bg-white/95 dark:bg-zinc-800/95 backdrop-blur-xl rounded-[20px] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-14 h-14 bg-rose-100 dark:bg-rose-900/40 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4",children:s.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),s.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 leading-relaxed",children:['"',Kt(h),'" ser removida. Receitas sero movidas para "Outros".']})]}),s.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:s.jsx("button",{onClick:()=>m(null),className:"w-full h-12 text-[17px] font-normal text-blue-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors touch-manipulation",children:"Cancelar"})}),s.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:s.jsx("button",{onClick:()=>L(h),className:"w-full h-12 text-[17px] font-semibold text-rose-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors active:bg-rose-50 dark:active:bg-rose-900/20 touch-manipulation",children:"Excluir"})})]})})})]})]}),document.body)},H9=Sn.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:i})=>{const o=$m(),[a,l]=j.useState(!1);return s.jsx(Lu,{value:t,dragListener:i,dragControls:o,className:`group relative mb-2 transition-all duration-300 ease-out ${i?"":"cursor-pointer"}`,onClick:()=>!i&&l(!a),children:s.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${i?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":a?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[i&&s.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:c=>o.start(c),children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[s.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!i&&s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${a?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:a&&s.jsx(ut.Check,{className:"w-3 h-3 text-white"})}),i?s.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:c=>e({...t,name:c.target.value}),onKeyDown:c=>{if(c.key==="Enter"){c.preventDefault();const d=document.getElementById(`ing-qty-${t.id}`);d&&d.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):s.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${a?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:s.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:c=>{const d=c.target.value;(d===""||/^[0-9.,]*$/.test(d))&&e({...t,quantity:d})},onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),s.jsx("select",{value:t.unit,onChange:c=>e({...t,unit:c.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(c=>s.jsx("option",{value:c,children:c},c))})]}):s.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${a?"opacity-50":""}`,children:[s.jsx("span",{children:t.quantity}),s.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),i&&s.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),G9=Sn.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i,isEditing:o})=>{const a=$m(),[l,c]=j.useState(!1);return s.jsx(Lu,{value:t,dragListener:o,dragControls:a,className:`group relative mb-2 transition-all duration-300 ease-out ${o?"":"cursor-pointer"}`,onClick:()=>!o&&c(!l),children:s.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${o?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[o&&s.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:d=>a.start(d),children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[s.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),s.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!o&&l?s.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:s.jsx(ut.Check,{className:"w-3 h-3 text-white"})}):s.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),o?s.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:d=>n({...t,text:d.target.value}),onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:d=>{d.target.style.height="auto",d.target.style.height=d.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):s.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),o&&s.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),Kt=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",S1=(t,e)=>{const n=t.find(r=>Kt(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function K9(){const{toast:t,ToastUI:e}=B9(),[n,r]=j.useState([]),[i,o]=j.useState(["Tradicionais","Especiais","Veganas","Doces"]),[a,l]=j.useState(null),[c,d]=j.useState(!1),[h,m]=j.useState("Todas"),[f,y]=j.useState(!0),[N,I]=j.useState(null),[P,w]=j.useState(null),[b,k]=j.useState(null),[R,M]=j.useState(!1),[L,v]=j.useState(!1),[x,_]=j.useState(!1),[C,z]=j.useState(!1),[A,E]=j.useState(null),ge=j.useRef(null);j.useRef(null);const le=j.useRef({}),me=j.useRef({});j.useEffect(()=>{let D=!0;return(async()=>{try{const $=await De.getRecipesV3();if(!D)return;Array.isArray($)&&$.length>0?r($.map(oe=>{let T=Array.isArray(oe.sections)?oe.sections:[];return T.length===0&&(Array.isArray(oe.ingredientSections)||Array.isArray(oe.instructionSections))&&(T=[...Array.isArray(oe.ingredientSections)?oe.ingredientSections.map(O=>({...O,type:"ingredients"})):[],...Array.isArray(oe.instructionSections)?oe.instructionSections.map(O=>({...O,type:"instructions"})):[]]),T.length>0&&(T=T.map(O=>({...O,items:Array.isArray(O.items)?O.items.filter(F=>{var ne,ue,de;return O.type==="ingredients"?((ne=F.name)==null?void 0:ne.trim())||((ue=F.quantity)==null?void 0:ue.trim()):(de=F.text)==null?void 0:de.trim()}):[]}))),{id:String(oe.id),name:oe.name||"Sem nome",category:oe.category||"Outros",prepTime:oe.prepTime??0,cookTime:oe.cookTime??0,temperature:oe.temperature??180,image:oe.image||null,sections:T,createdAt:oe.createdAt||new Date().toISOString(),updatedAt:oe.updatedAt||new Date().toISOString()}})):r([])}catch{D&&r([])}try{const $=await De.getRecipeCategories();D&&$&&Array.isArray($)&&o($)}catch{}D&&(y(!1),I(null))})(),()=>{D=!1}},[]),j.useEffect(()=>{if(f)return;const D=setTimeout(()=>{De.syncRecipeCategories(i)},1e3);return()=>clearTimeout(D)},[i,f]);const xe=(D,U)=>{const $=String(D);v(!0),_(!1),r(oe=>oe.map(T=>String(T.id)===$?{...T,...U,updatedAt:new Date().toISOString()}:T)),le.current[$]={...le.current[$]||{},...U,updatedAt:new Date().toISOString()},me.current[$]&&clearTimeout(me.current[$]),me.current[$]=setTimeout(async()=>{const oe=le.current[$];if(!oe){v(!1);return}delete le.current[$],delete me.current[$];try{await De.syncRecipeV3($,oe,!0)||_(!0)}catch{_(!0)}finally{Object.keys(le.current).length===0&&v(!1)}},1200)},Y=D=>{const U=D.target.files[0];if(!U)return;if(!a){t.error("Nenhuma receita selecionada.");return}const $=new FileReader;$.onload=()=>{E($.result)},$.readAsDataURL(U),D.target.value=null},X=async D=>{try{z(!0),E(null);const U=await d9(D);xe(a,{image:U}),t.success("Imagem atualizada!")}catch(U){console.error(U),t.error("Erro ao processar imagem.")}finally{z(!1)}},H=async D=>{const U=String(D);k(null),r($=>$.filter(oe=>String(oe.id)!==U)),String(a)===U&&l(null);try{if(!await De.deleteRecipeV3(U))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},te=j.useMemo(()=>n.filter(D=>h==="Todas"||D.category===h),[n,h]),se=j.useMemo(()=>n.find(D=>String(D.id)===String(a)),[n,a]),pe=j.useCallback(()=>{if(se&&se.sections){const D=se.sections.map(U=>U.type==="ingredients"?{...U,items:(U.items||[]).filter($=>$.name.trim()||$.quantity.trim())}:U.type==="instructions"?{...U,items:(U.items||[]).filter($=>$.text.trim())}:U);xe(a,{sections:D})}d(!1)},[se,a,xe]);return f?s.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):N?s.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:s.jsxs("div",{className:"text-center max-w-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:N}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsx(Ne,{children:!a&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${x?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":L?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${x?"bg-rose-500":L?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:x?"Erro de Sync":L?"Sincronizando":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),s.jsxs("button",{onClick:()=>{const D=String(Date.now()),U={id:D,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([U,...n]),l(D),d(!0),De.syncRecipeV3(D,U)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx(ut.Plus,{}),"Criar Nova Receita"]})]}),s.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:s.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...i].map(D=>s.jsx("button",{onClick:()=>m(Kt(D)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===Kt(D)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:Kt(D)},Kt(D))),s.jsx("button",{onClick:()=>M(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[te.map(D=>s.jsxs(Q.div,{onClick:()=>{l(D.id),d(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[s.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[D.image?s.jsx(Q.img,{src:D.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):s.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),s.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/8 via-transparent to-transparent opacity-60"}),s.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/8 via-transparent to-transparent opacity-60"}),s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:s.jsx(ut.Camera,{})})})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),s.jsx("button",{onClick:U=>{U.stopPropagation(),k({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${D.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{H(D.id)},onCancel:()=>k(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:s.jsx(ut.Trash,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"px-2 pb-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${S1(i,D.category)}15`,color:S1(i,D.category)},children:D.category}),s.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(ut.Clock,{}),D.prepTime+D.cookTime,"m"]}),D.temperature>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),D.temperature,""]})]})]})]}),s.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:D.name}),s.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(D.sections||[]).filter(U=>U.type==="ingredients").reduce((U,$)=>{var oe;return U+(((oe=$.items)==null?void 0:oe.length)||0)},0)," ingredientes"]})]})]},D.id)),te.length===0&&s.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),s.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:s.jsx(ut.Book,{})})]}),s.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),s.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",s.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&Ze.createPortal(s.jsx(Ne,{children:a&&se&&s.jsx(Q.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:ge,children:se?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[s.jsx("div",{className:"flex-1 flex justify-start",children:s.jsx("button",{onClick:()=>{const D=(se.sections||[]).map(U=>({...U,items:U.items.filter($=>{var oe,T,O;return U.type==="ingredients"?((oe=$.name)==null?void 0:oe.trim())||((T=$.quantity)==null?void 0:T.trim()):(O=$.text)==null?void 0:O.trim()})}));xe(a,{sections:D}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:s.jsx(ut.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),s.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${x?"text-rose-500":L?"text-zinc-400":"text-zinc-300"}`,children:x?"Falha":L?"Sincronizando...":"Salvo"}),s.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>c?pe():d(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${c?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:c?"Concludo":"Editar"}),s.jsx("button",{onClick:()=>{k({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{H(a)},onCancel:()=>k(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:s.jsx(ut.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[s.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[s.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:se.image?s.jsxs(s.Fragment,{children:[s.jsx(Q.img,{src:se.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>w(se.image)}),s.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y,disabled:C}),C?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsx(ut.Camera,{className:"w-5 h-5"})]})]}):s.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y}),s.jsx(ut.Camera,{}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),s.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(D=>s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:D.label}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("input",{value:se[D.val],onChange:U=>xe(a,{[D.val]:U.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),D.unit&&s.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:D.unit})]})]},D.label))})]}),s.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("select",{value:se.category,onChange:D=>xe(a,{category:D.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:i.map(D=>s.jsx("option",{value:Kt(D),children:Kt(D)},Kt(D)))})}),s.jsx("textarea",{value:se.name,onChange:D=>xe(a,{name:D.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:D=>{D.target.style.height="auto",D.target.style.height=D.target.scrollHeight+"px"}})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[s.jsxs("button",{disabled:!c,onClick:()=>xe(a,{sections:[...se.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),s.jsxs("button",{disabled:!c,onClick:()=>xe(a,{sections:[...se.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),s.jsx(Vu,{axis:"y",values:se.sections||[],onReorder:D=>xe(a,{sections:D}),className:"space-y-6",children:(se.sections||[]).map(D=>s.jsx(W9,{id:D,children:U=>s.jsx(Y9,{section:D,onUpdate:$=>xe(a,{sections:se.sections.map(oe=>oe.id===D.id?$:oe)}),onDelete:()=>xe(a,{sections:se.sections.filter($=>$.id!==D.id)}),dragControls:U,isEditing:c})},D.id))}),s.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:s.jsx("button",{onClick:()=>k({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{H(a)},onCancel:()=>k(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),R&&s.jsx(q9,{categories:i,onClose:()=>M(!1),onUpdate:o,onRenameCategory:(D,U)=>{n.filter($=>$.category===D).forEach($=>{xe($.id,{category:U})})}},"recipe-cat-modal"),s.jsx(Ne,{children:P&&s.jsx(U9,{src:P,onClose:()=>w(null)})}),typeof document<"u"&&Ze.createPortal(s.jsx(Ne,{mode:"wait",children:b&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:b.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx(Q9,{}),s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${b.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx(ut.Trash,{})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:b.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:b.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:b.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:b.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${b.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),s.jsx(Ne,{children:A&&s.jsx($9,{imageSrc:A,onCancel:()=>E(null),onCropComplete:X})}),e]})}function Q9(){return qt(!0),null}function Y9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){return t.type==="ingredients"?s.jsx(X9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):t.type==="instructions"?s.jsx(J9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):null}function X9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const o=Sn.useRef(null),a=Sn.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],c]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const d=document.getElementById(`ing-name-${l}`);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.focus())})})},[t,e]);return s.jsxs("div",{ref:o,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:s.jsx(ut.Bars,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),i?s.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):s.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&s.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:s.jsx(ut.Trash,{})})]}),s.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:s.jsx(Vu,{axis:"y",values:t.items,onReorder:l=>i&&e({...t,items:l}),children:t.items.map(l=>s.jsx(H9,{item:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===l.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==l.id)}),onNext:()=>{l.name.trim()&&a()},isEditing:i},l.id))})}),i&&s.jsxs("button",{type:"button",onClick:a,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[s.jsx(ut.Plus,{})," Adicionar Ingrediente"]})]})}function J9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const o=Sn.useCallback(()=>{const a=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:a,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const c=document.getElementById(`instr-text-${a}`);c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.focus())})})},[t,e]);return s.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:a=>r.start(a),children:s.jsx(ut.Bars,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),i?s.jsx("input",{value:t.title,onChange:a=>e({...t,title:a.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):s.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&s.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:s.jsx(ut.Trash,{})})]}),s.jsx(Vu,{axis:"y",values:t.items,onReorder:a=>i&&e({...t,items:a}),className:"space-y-3",children:t.items.map((a,l)=>s.jsx(G9,{item:a,index:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===a.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==a.id)}),onNext:()=>{a.text.trim()&&o()},isEditing:i},a.id))}),i&&s.jsxs("button",{type:"button",onClick:o,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[s.jsx(ut.Plus,{})," Adicionar Passo"]})]})}const E1="padoca_kanban_pro_max",Ho={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},Z9=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],T1={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},Dp=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function eD(){var oe;const[t,e]=j.useState(()=>{try{const T=localStorage.getItem(E1);return T?JSON.parse(T):T1}catch{return T1}}),[n,r]=j.useState(null),[i,o]=j.useState(!1),[a,l]=j.useState(""),[c,d]=j.useState(0),[h,m]=j.useState(null),[f,y]=j.useState(""),[N,I]=j.useState(null),[P,w]=j.useState(""),[b,k]=j.useState(null),[R,M]=j.useState(!1),[L,v]=j.useState(null),x=j.useRef(null);j.useCallback((T,O="success")=>{x.current&&clearTimeout(x.current),v({message:T,type:O}),x.current=setTimeout(()=>v(null),3500)},[]);const[_,C]=j.useState({active:null,target:null,isDragging:!1}),z=eu(0),A=eu(0),E=j.useRef(null),ge=4,le=j.useRef(null),me=j.useRef(null),xe=j.useRef({colId:null,index:null}),Y=j.useCallback((T="light")=>{navigator.vibrate&&navigator.vibrate(T==="light"?8:T==="medium"?15:25)},[]),X=j.useCallback((T,O,F)=>{const ue=document.elementsFromPoint(T,O).find(ze=>ze.hasAttribute("data-column-id"));if(!ue)return null;const de=ue.getAttribute("data-column-id"),ve=ue.querySelector("[data-cards-container]");if(!ve)return{colId:de,index:0};const We=Array.from(ve.querySelectorAll("[data-card-id]")).filter(ze=>ze.getAttribute("data-card-id")!==F);if(We.length===0)return{colId:de,index:0};for(let ze=0;ze<We.length;ze++){const ft=We[ze].getBoundingClientRect(),Ue=ft.top+ft.height/2;if(O<Ue)return{colId:de,index:ze}}return{colId:de,index:We.length}},[]);j.useEffect(()=>{const T=F=>{const ne=E.current;if(ne&&!_.isDragging){const ue=F.clientX-ne.startX,de=F.clientY-ne.startY;if(Math.sqrt(ue*ue+de*de)>ge){const{card:We,colId:ze,rect:ft,offsetX:Ue,offsetY:Fe,cardIndex:Be}=ne;z.set(ft.left),A.set(ft.top),C({active:{id:We.id,sourceColId:ze,sourceIndex:Be,data:We,rect:ft,offsetX:Ue,offsetY:Fe},target:{colId:ze,index:Be},isDragging:!0}),Y("medium")}return}if(_.isDragging&&_.active){F.preventDefault();const ue=F.clientX-_.active.offsetX,de=F.clientY-_.active.offsetY;if(z.set(ue),A.set(de),me.current)return;me.current=requestAnimationFrame(()=>{const ve=X(F.clientX,F.clientY,_.active.id);if(me.current=null,ve){const We=xe.current;(We.colId!==ve.colId||We.index!==ve.index)&&(xe.current=ve,Y("light"),C(ze=>({...ze,target:ve})))}})}},O=F=>{if(me.current&&(cancelAnimationFrame(me.current),me.current=null),_.isDragging&&_.active){const{active:ne,target:ue}=_;document.body.style.cursor="";const de=ue==null?void 0:ue.colId,ve=ue==null?void 0:ue.index;de&&(ne.sourceColId!==de||ne.sourceIndex!==ve)&&(e(ze=>{const ft=ze.columns.map(en=>({...en,cards:[...en.cards]})),Ue=ft.find(en=>en.id===ne.sourceColId),Fe=ft.find(en=>en.id===de);if(!Ue||!Fe)return ze;const Be=Ue.cards.findIndex(en=>en.id===ne.id);if(Be===-1)return ze;const[yn]=Ue.cards.splice(Be,1);return Fe.cards.splice(ve,0,yn),{...ze,columns:ft}}),Y("medium")),C({active:null,target:null,isDragging:!1}),xe.current={colId:null,index:null}}else if(E.current){const{card:ne,colId:ue}=E.current;r({...ne,columnId:ue})}E.current=null};return window.addEventListener("pointermove",T,{passive:!1}),window.addEventListener("pointerup",O),window.addEventListener("pointercancel",O),()=>{window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",O),window.removeEventListener("pointercancel",O),me.current&&cancelAnimationFrame(me.current)}},[_,X,Y,z,A]);const H=j.useCallback((T,O,F)=>{var de;if(T.target.closest("button, input, textarea, [data-no-drag]")||T.button&&T.button!==0)return;const ne=T.currentTarget,ue=ne.getBoundingClientRect();E.current={card:O,colId:F,element:ne,rect:ue,startX:T.clientX,startY:T.clientY,offsetX:T.clientX-ue.left,offsetY:T.clientY-ue.top,cardIndex:((de=t.columns.find(ve=>ve.id===F))==null?void 0:de.cards.findIndex(ve=>ve.id===O.id))??0}},[t.columns]);j.useEffect(()=>{(async()=>{var O;try{const F=await((O=De.getKanban)==null?void 0:O.call(De));F!=null&&F.columns&&e(F)}catch{}finally{M(!0)}})()},[]),j.useEffect(()=>{if(localStorage.setItem(E1,JSON.stringify(t)),R){const T=setTimeout(()=>{var O;try{(O=De.syncKanban)==null||O.call(De,t)}catch{}},2e3);return()=>clearTimeout(T)}},[t,R]);const te=j.useCallback(T=>{if(!f.trim())return;const O={id:`card - ${Date.now()} -${Math.random().toString(36).substr(2,9)} `,title:f.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(F=>({...F,columns:F.columns.map(ne=>ne.id===T?{...ne,cards:[...ne.cards,O]}:ne)})),y(""),m(null),Y("light")},[f,Y]),se=j.useCallback(T=>{e(O=>({...O,columns:O.columns.map(F=>F.id===T.columnId?{...F,cards:F.cards.map(ne=>ne.id===T.id?T:ne)}:F)}))},[]),pe=j.useCallback((T,O)=>{k({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(F=>({...F,columns:F.columns.map(ne=>ne.id===T?{...ne,cards:ne.cards.filter(ue=>ue.id!==O)}:ne)})),r(null),k(null),Y("medium")},onCancel:()=>k(null)})},[Y]),D=j.useCallback(()=>{a.trim()&&(e(T=>({...T,columns:[...T.columns,{id:`col - ${Date.now()} `,title:a.trim(),cards:[]}]})),l(""),o(!1),Y("light"))},[a,Y]),U=j.useCallback(T=>{if(!P.trim()){I(null);return}e(O=>({...O,columns:O.columns.map(F=>F.id===T?{...F,title:P.trim()}:F)})),I(null)},[P]),$=j.useCallback(T=>{k({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(O=>({...O,columns:O.columns.filter(F=>F.id!==T)})),k(null),Y("medium")},onCancel:()=>k(null)})},[Y]);return s.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[s.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),s.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${R?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:R?"Cloud Active":"Syncing"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[s.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),s.jsxs("div",{ref:le,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[s.jsx(Ne,{mode:"popLayout",children:t.columns.map(T=>s.jsx(tD,{col:T,dragState:_,spring:Ho,zoomLevel:c,renamingColId:N,setRenamingColId:I,renameTitle:P,setRenameTitle:w,renameColumn:U,deleteColumn:$,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:f,setNewCardTitle:y,addCard:te,handleCardPointerDown:H},T.id))}),s.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-lg hover:shadow-xl flex items-center justify-center text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-all",children:s.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),s.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:s.jsx(Q.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Ho.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:Dp.map((T,O)=>s.jsxs("button",{onClick:()=>{d(O),Y("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${c===O?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[c===O&&s.jsx(Q.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),s.jsx("span",{className:"relative z-10",children:T.label})]},O))})}),s.jsx(rD,{dragState:_,ghostX:z,ghostY:A,spring:Ho}),s.jsx(Ne,{children:n&&s.jsx(sD,{card:n,onClose:()=>r(null),onUpdate:se,onDelete:()=>pe(n.columnId,n.id),setConfirmModal:k})}),s.jsx(Ne,{children:b&&s.jsx(iD,{...b})}),Ze.createPortal(s.jsx(Ne,{children:i&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{o(!1),l("")}}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Ho.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 tracking-tight",children:"Nova Lista"}),s.jsx("input",{autoFocus:!0,value:a,onChange:T=>l(T.target.value),onKeyDown:T=>{T.key==="Enter"&&D(),T.key==="Escape"&&(o(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-6"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{o(!1),l("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:D,disabled:!a.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Criar Lista"})]})]})]})}),document.body),Ze.createPortal(s.jsx(Ne,{children:h&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{m(null),y("")}}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Ho.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2 tracking-tight",children:"Novo Carto"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:(oe=t.columns.find(T=>T.id===h))==null?void 0:oe.title}),s.jsx("textarea",{autoFocus:!0,value:f,onChange:T=>y(T.target.value),onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),te(h)),T.key==="Escape"&&(m(null),y(""))},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-6",rows:3}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{m(null),y("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:()=>te(h),disabled:!f.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Adicionar"})]})]})]})}),document.body),s.jsx(Ne,{children:L&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${L.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":L.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${L.type==="error"?"bg-white animate-pulse":L.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:L.message})]}),document.body)})]})}const tD=Sn.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:o,renameTitle:a,setRenameTitle:l,renameColumn:c,deleteColumn:d,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:f,setNewCardTitle:y,addCard:N,handleCardPointerDown:I})=>{var w,b;const P=((w=e.target)==null?void 0:w.colId)===t.id;return s.jsxs(Q.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`flex-shrink-0 flex flex-col snap-center ${Dp[r].width} max-h-full rounded-[2rem] md:rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/60 dark:border-white/[0.06] shadow-xl shadow-black/[0.03] dark:shadow-black/20 transition-all duration-300 ${P?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[s.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?s.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:a,onChange:k=>l(k.target.value),onBlur:()=>c(t.id),onKeyDown:k=>{k.key==="Enter"&&c(t.id),k.key==="Escape"&&o(null)}}):s.jsx("h3",{onClick:()=>{o(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),s.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[s.jsx(Ne,{mode:"popLayout",children:t.cards.map((k,R)=>s.jsx(nD,{card:k,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:I},k.id))}),s.jsx(Ne,{mode:"sync",children:e.isDragging&&P&&e.active&&(()=>{const k=t.cards.filter(R=>R.id!==e.active.id);return e.target.index>=k.length})()&&s.jsx(Q.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((b=e.active.rect)==null?void 0:b.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),s.jsx("button",{onClick:()=>{m(t.id),y("")},className:"w-full min-h-[48px] py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-[0.98] touch-manipulation",children:"+ Carto"})]})]})}),nD=Sn.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:o})=>{var c,d,h,m;const a=((c=n.active)==null?void 0:c.id)===t.id,l=((d=n.target)==null?void 0:d.colId)===e;return n.isDragging&&l&&n.active,s.jsx(Sn.Fragment,{children:!a&&s.jsxs(Q.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:f=>o(f,t,e),className:`relative bg-white dark:bg-zinc-900 border border-zinc-200/60 dark:border-white/[0.06] rounded-2xl ${Dp[i].cardPadding} shadow-sm hover:shadow-xl dark:shadow-black/10 cursor-grab active:cursor-grabbing touch-none select-none hover:border-zinc-300 dark:hover:border-white/10 group/card`,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((f,y)=>s.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:f.color}},y))}),s.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((m=t.checklists)==null?void 0:m.length)>0&&s.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((f,y)=>f+y.items.filter(N=>N.done).length,0),"/",t.checklists.reduce((f,y)=>f+y.items.length,0)]})]})]})})}),rD=Sn.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return s.jsx(Ne,{children:t.isDragging&&t.active&&s.jsx(Q.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),s.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&s.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((o,a)=>s.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:o.color}},a))}),s.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function iD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return qt(!0),s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function sD({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var k;qt(!0);const[o,a]=j.useState(t),[l,c]=j.useState(!1),[d,h]=j.useState(""),m=j.useRef(!0),f=j.useRef(null);j.useEffect(()=>{if(m.current){m.current=!1;return}return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{n(o)},800),()=>{f.current&&clearTimeout(f.current)}},[o]);const y=R=>{var L;const M=(L=o.labels)==null?void 0:L.find(v=>v.id===R.id);a(v=>({...v,labels:M?v.labels.filter(x=>x.id!==R.id):[...v.labels||[],R]}))},N=()=>{d.trim()&&(a(R=>({...R,checklists:[...R.checklists||[],{id:Date.now(),title:d.trim(),items:[]}]})),h(""),c(!1))},I=R=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{a(M=>({...M,checklists:M.checklists.filter(L=>L.id!==R)})),i(null)},onCancel:()=>i(null)})},P=(R,M)=>{a(L=>({...L,checklists:L.checklists.map(v=>v.id===R?{...v,items:v.items.map(x=>x.id===M?{...x,done:!x.done}:x)}:v)}))},w=(R,M)=>{M.trim()&&a(L=>({...L,checklists:L.checklists.map(v=>v.id===R?{...v,items:[...v.items,{id:Date.now(),text:M.trim(),done:!1}]}:v)}))},b=(R,M)=>{a(L=>({...L,checklists:L.checklists.map(v=>v.id===R?{...v,items:v.items.filter(x=>x.id!==M)}:v)}))};return Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md"}),s.jsxs(Q.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:400,damping:35},className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-3xl shadow-2xl max-h-[90vh] md:max-h-[85vh] flex flex-col overflow-hidden border-t md:border border-zinc-200/50 dark:border-white/10",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"w-10 h-1 bg-zinc-300 dark:bg-zinc-700 rounded-full mx-auto mb-4 md:hidden"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:Z9.map(R=>{var M;return s.jsx("button",{onClick:()=>y(R),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(M=o.labels)!=null&&M.find(L=>L.id===R.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:R.color}},R.id)})}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white flex items-center justify-center transition-all hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-95",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("input",{className:"w-full text-xl md:text-2xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:o.title,onChange:R=>a(M=>({...M,title:R.target.value})),placeholder:"Ttulo do carto"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 md:p-6 space-y-6 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),s.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:o.description||"",onChange:R=>a(M=>({...M,description:R.target.value}))})]}),(k=o.checklists)==null?void 0:k.map(R=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:R.title}),s.jsx("button",{onClick:()=>I(R.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),s.jsx(Vu,{axis:"y",values:R.items,onReorder:M=>{a(L=>({...L,checklists:L.checklists.map(v=>v.id===R.id?{...v,items:M}:v)}))},className:"space-y-2",children:R.items.map(M=>s.jsxs(Lu,{value:M,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[s.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),s.jsx("button",{onClick:()=>P(R.id,M.id),className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${M.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:M.done&&s.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`flex-1 text-sm ${M.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:M.text}),s.jsx("button",{onClick:()=>b(R.id,M.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},M.id))}),s.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:M=>{M.key==="Enter"&&M.target.value.trim()&&(w(R.id,M.target.value),M.target.value="")}})]},R.id)),l?s.jsxs(Q.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[s.jsx("input",{autoFocus:!0,value:d,onChange:R=>h(R.target.value),onKeyDown:R=>{R.key==="Enter"&&N(),R.key==="Escape"&&c(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:N,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),s.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):s.jsx("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"+ Nova Checklist"})]}),s.jsx("div",{className:"shrink-0 p-5 md:p-6 border-t border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-zinc-900/50",children:s.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20 active:scale-[0.98]",children:"Excluir Carto"})})]})]}),document.body)}const I1="padoca_suppliers";function wh(){return qt(!0),null}function oD({message:t,type:e,onClose:n}){return j.useEffect(()=>{const r=setTimeout(n,3e3);return()=>clearTimeout(r)},[n]),s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${e==="error"?"bg-rose-500/90 border-rose-400/20 text-white":e==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${e==="error"?"bg-white animate-pulse":e==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t})]})}function aD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return qt(!0),s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-start md:items-center justify-center p-4 pt-24 md:pt-20",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function lD(){var ji,cs,Wn,Ir,Ar;const[t,e]=j.useState(()=>{try{const W=localStorage.getItem(I1);return W?JSON.parse(W):[]}catch{return[]}}),[n,r]=j.useState(!1),[i,o]=j.useState(null),[a,l]=j.useState(null),[c,d]=j.useState(""),[h,m]=j.useState(null),[f,y]=j.useState(null),[N,I]=j.useState("synced"),[P,w]=j.useState(!1),[b,k]=j.useState("suppliers"),R=j.useRef(null),[M,L]=j.useState(null),[v,x]=j.useState({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),_=[{id:"cotacao",label:"Cotao",icon:""},{id:"catalogo",label:"Catlogo",icon:""},{id:"contrato",label:"Contrato",icon:""},{id:"tecnico",label:"Tcnico",icon:""},{id:"outros",label:"Outros",icon:""}],[C,z]=j.useState(!1),[A,E]=j.useState(null),[ge,le]=j.useState(null),[me,xe]=j.useState("cotacao"),Y=j.useRef(null),[X,H]=j.useState([]),[te,se]=j.useState("");j.useEffect(()=>{(async()=>{try{const re=await De.getInventory();re!=null&&re.items&&H(re.items)}catch(re){console.error("Error loading inventory:",re)}})()},[]),j.useEffect(()=>{(async()=>{try{const re=await De.getSuppliers();re!=null&&re.suppliers&&e(re.suppliers)}catch(re){console.error("Error loading suppliers:",re)}finally{w(!0)}})()},[]),j.useEffect(()=>{if(localStorage.setItem(I1,JSON.stringify(t)),P){I("syncing");const W=setTimeout(async()=>{try{const re=await De.syncSuppliers(t);I(re?"synced":"error")}catch{I("error")}},1500);return()=>clearTimeout(W)}},[t,P]);const pe=j.useCallback((W,re="success")=>{y({message:W,type:re})},[]),D=j.useMemo(()=>{if(!c.trim())return t;const W=c.toLowerCase();return t.filter(re=>{var V,q,K;return((V=re.name)==null?void 0:V.toLowerCase().includes(W))||((q=re.company)==null?void 0:q.toLowerCase().includes(W))||((K=re.email)==null?void 0:K.toLowerCase().includes(W))})},[t,c]),U=j.useMemo(()=>{if(!te.trim())return X.slice(0,10);const W=te.toLowerCase();return X.filter(re=>{var V;return(V=re.name)==null?void 0:V.toLowerCase().includes(W)}).slice(0,10)},[X,te]),$=()=>{x({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),o(null),r(!0)},oe=W=>{x({name:W.name||"",company:W.company||"",email:W.email||"",phone:W.phone||"",whatsapp:W.whatsapp||"",address:W.address||"",notes:W.notes||"",linkedItems:W.linkedItems||[],documents:W.documents||[]}),o(W),l(null),r(!0)},T=()=>{if(!v.name.trim()){pe("Nome  obrigatrio","error");return}if(i)e(W=>W.map(re=>re.id===i.id?{...re,...v,updatedAt:new Date().toISOString()}:re)),pe("Fornecedor atualizado!");else{const W={id:Date.now().toString(),...v,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(re=>[W,...re]),pe("Fornecedor adicionado!")}r(!1),o(null)},O=W=>{m({title:"Excluir Fornecedor",message:`Deseja excluir "${W.name}"? Esta ao no pode ser desfeita.`,type:"danger",onConfirm:()=>{e(re=>re.filter(V=>V.id!==W.id)),l(null),m(null),pe("Fornecedor excludo")},onCancel:()=>m(null)})},F=W=>{v.linkedItems.find(re=>re.itemId===W.id)||(x(re=>({...re,linkedItems:[...re.linkedItems,{itemId:W.id,itemName:W.name}]})),se(""))},ne=W=>{x(re=>({...re,linkedItems:re.linkedItems.filter(V=>V.itemId!==W)}))},ue=W=>{if(W===0)return"0 B";const re=1024,V=["B","KB","MB","GB"],q=Math.floor(Math.log(W)/Math.log(re));return parseFloat((W/Math.pow(re,q)).toFixed(1))+" "+V[q]},de=W=>W.startsWith("image/")?"":W==="application/pdf"?"":W.includes("spreadsheet")||W.includes("excel")?"":W.includes("document")||W.includes("word")?"":"",ve=j.useCallback(W=>{const V=["image/jpeg","image/png","image/webp","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];Array.from(W).forEach(q=>{if(q.size>5242880){pe(`${q.name} excede 5MB`,"error");return}if(!V.includes(q.type)&&!q.type.startsWith("image/")){pe("Formato no suportado","error");return}E(q.name);const K=new FileReader;K.onload=ee=>{const Ee={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:q.name,type:q.type,size:q.size,dataUrl:ee.target.result,uploadedAt:new Date().toISOString(),category:me};x(be=>({...be,documents:[...be.documents,Ee]})),E(null),pe("Documento anexado!")},K.onerror=()=>{E(null),pe("Erro ao ler arquivo","error")},K.readAsDataURL(q)})},[me,pe]),We=j.useCallback(W=>{W.preventDefault(),W.stopPropagation(),z(!0)},[]),ze=j.useCallback(W=>{W.preventDefault(),W.stopPropagation(),z(!1)},[]),ft=j.useCallback(W=>{W.preventDefault(),W.stopPropagation(),z(!1);const re=W.dataTransfer.files;re.length>0&&ve(re)},[ve]),Ue=W=>{x(re=>({...re,documents:re.documents.filter(V=>V.id!==W)})),pe("Documento removido")},Fe=W=>{const re=document.createElement("a");re.href=W.dataUrl,re.download=W.name,document.body.appendChild(re),re.click(),document.body.removeChild(re)},Be=W=>{window.open(`tel:${W}`,"_self")},yn=W=>{window.open(`mailto:${W}`,"_self")},en=W=>{const re=W.replace(/\D/g,"");window.open(`https://wa.me/${re}`,"_blank")};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-violet-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-violet-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Fornecedores"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${N==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":N==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${N==="syncing"?"bg-amber-500":N==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:N==="syncing"?"Syncing":N==="error"?"Error":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto de fornecedores e contatos"})]}),s.jsxs("button",{onClick:$,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Fornecedor"]})]}),s.jsx("section",{className:"relative z-10",children:s.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800/50 p-1 rounded-xl inline-flex",children:[s.jsx("button",{onClick:()=>k("suppliers"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${b==="suppliers"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Fornecedores"}),s.jsx("button",{onClick:()=>k("quotes"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${b==="quotes"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Oramentos"})]})}),b==="suppliers"&&s.jsx("section",{className:"relative z-10",children:s.jsx("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:c,onChange:W=>d(W.target.value)})]})})}),b==="suppliers"&&s.jsx("section",{className:"relative z-10",children:D.length===0?s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum fornecedor"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione seu primeiro fornecedor para comear"}),s.jsx("button",{onClick:$,className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Adicionar Fornecedor"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:D.map(W=>{var re,V,q;return s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},onClick:()=>l(W),className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-violet-500/25",children:((V=(re=W.name)==null?void 0:re.charAt(0))==null?void 0:V.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:W.name}),W.company&&s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:W.company})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[W.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"truncate",children:W.phone})]}),W.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"truncate",children:W.email})]})]}),((q=W.linkedItems)==null?void 0:q.length)>0&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[s.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),s.jsxs("span",{className:"text-xs font-bold text-violet-600 dark:text-violet-400",children:[W.linkedItems.length," ",W.linkedItems.length===1?"item":"itens"]})]})]},W.id)})})}),b==="quotes"&&(()=>{const W=t.filter(re=>(re.documents||[]).some(V=>V.category==="cotacao"));return s.jsxs("section",{className:"relative z-10",children:[s.jsx("input",{ref:R,type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:re=>{var V;if((V=re.target.files)!=null&&V.length&&M){const q=re.target.files[0];if(q.size>5*1024*1024){pe("Arquivo muito grande (mx 5MB)","error");return}const K=new FileReader;K.onload=ee=>{const Ee={id:`doc_${Date.now()}`,name:q.name,type:q.type,size:q.size,dataUrl:ee.target.result,uploadedAt:new Date().toISOString(),category:"cotacao"};e(be=>be.map(Se=>Se.id===M?{...Se,documents:[...Se.documents||[],Ee]}:Se)),pe("Cotao adicionada"),L(null)},K.readAsDataURL(q)}re.target.value=""}}),W.length===0?s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center shadow-lg",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-500/10 dark:to-orange-500/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma cotao"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione cotaes aos seus fornecedores"}),s.jsx("button",{onClick:()=>k("suppliers"),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Ver Fornecedores"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:W.map(re=>{var q,K;const V=(re.documents||[]).filter(ee=>ee.category==="cotacao");return s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-amber-500/25",children:((K=(q=re.name)==null?void 0:q.charAt(0))==null?void 0:K.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:re.name}),re.company&&s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:re.company})]}),s.jsx("button",{onClick:()=>{var ee;L(re.id),(ee=R.current)==null||ee.click()},className:"w-10 h-10 rounded-xl bg-amber-50 dark:bg-amber-500/10 flex items-center justify-center text-amber-500 hover:bg-amber-100 dark:hover:bg-amber-500/20 transition-colors touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-amber-50 dark:bg-amber-500/10 rounded-xl border border-amber-100 dark:border-amber-500/20 mb-4",children:[s.jsx("svg",{className:"w-4 h-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:[V.length," ",V.length===1?"cotao":"cotaes"]})]}),s.jsx("div",{className:"space-y-2",children:V.map(ee=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl group hover:bg-zinc-100 dark:hover:bg-zinc-800/50 transition-colors",children:[ee.type.startsWith("image/")?s.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 shadow-sm",style:{backgroundImage:`url(${ee.dataUrl})`}}):s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${ee.type==="application/pdf"?"bg-red-100 dark:bg-red-500/20":"bg-blue-100 dark:bg-blue-500/20"}`,children:ee.type==="application/pdf"?s.jsx("svg",{className:"w-5 h-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4z"})}):s.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate",children:ee.name}),s.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[ue(ee.size),"  ",new Date(ee.uploadedAt).toLocaleDateString("pt-BR")]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>Fe(ee),className:"w-8 h-8 flex items-center justify-center rounded-lg text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-colors touch-manipulation",title:"Baixar",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsx("button",{onClick:()=>{e(Ee=>Ee.map(be=>be.id===re.id?{...be,documents:be.documents.filter(Se=>Se.id!==ee.id)}:be)),pe("Cotao removida")},className:"w-8 h-8 flex items-center justify-center rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors touch-manipulation",title:"Remover",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},ee.id))})]},re.id)})})]})})(),Ze.createPortal(s.jsx(Ne,{children:n&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(wh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>r(!1)}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col",style:{maxHeight:"calc(100vh - 100px)"},children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 px-6 py-5 border-b border-zinc-100 dark:border-white/5 flex items-center justify-between z-10 shrink-0",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:i?"Editar Fornecedor":"Novo Fornecedor"}),s.jsx("button",{onClick:()=>r(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto flex-1",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Informaes"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome do fornecedor",value:v.name,onChange:W=>x(re=>({...re,name:W.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Empresa"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome da empresa",value:v.company,onChange:W=>x(re=>({...re,company:W.target.value}))})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Contato"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Telefone"}),s.jsx("input",{type:"tel",inputMode:"tel",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"(00) 00000-0000",value:v.phone,onChange:W=>x(re=>({...re,phone:W.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Email"}),s.jsx("input",{type:"email",inputMode:"email",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"email@exemplo.com",value:v.email,onChange:W=>x(re=>({...re,email:W.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Endereo"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Endereo completo",value:v.address,onChange:W=>x(re=>({...re,address:W.target.value}))})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Itens Vinculados"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Buscar item do estoque...",value:te,onChange:W=>se(W.target.value)}),te&&U.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-xl max-h-40 overflow-y-auto z-20",children:U.map(W=>s.jsxs("button",{onClick:()=>F(W),className:"w-full px-4 py-3 text-left text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors flex items-center justify-between",children:[s.jsx("span",{children:W.name}),s.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]},W.id))})]}),v.linkedItems.length>0&&s.jsx("div",{className:"space-y-2",children:v.linkedItems.map(W=>s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[s.jsx("span",{className:"text-sm font-medium text-violet-700 dark:text-violet-300",children:W.itemName}),s.jsx("button",{onClick:()=>ne(W.itemId),className:"w-8 h-8 flex items-center justify-center rounded-lg text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},W.itemId))})]}),s.jsxs("div",{className:"pt-5 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("input",{ref:Y,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:W=>ve(W.target.files)}),((ji=v.documents)==null?void 0:ji.length)>0&&s.jsx("div",{className:"mb-4 space-y-3",children:v.documents.map(W=>{const re=W.type.startsWith("image/");return s.jsxs("div",{className:"flex items-center gap-3",children:[re?s.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 cursor-pointer",style:{backgroundImage:`url(${W.dataUrl})`},onClick:()=>le(W)}):s.jsx("div",{className:"w-10 h-10 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center shrink-0 text-zinc-400",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-zinc-900 dark:text-white truncate",children:W.name}),s.jsx("p",{className:"text-xs text-zinc-400",children:ue(W.size)})]}),s.jsx("button",{type:"button",onClick:()=>Ue(W.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-red-500 transition-colors touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},W.id)})}),s.jsxs("button",{type:"button",onDragOver:We,onDragLeave:ze,onDrop:ft,onClick:()=>{var W;return(W=Y.current)==null?void 0:W.click()},disabled:!!A,className:"flex items-center gap-2 text-blue-500 hover:text-blue-600 transition-colors touch-manipulation",children:[A?s.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),s.jsx("span",{className:"text-sm font-medium",children:A?"Enviando...":"Anexar arquivo"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Observaes"}),s.jsx("textarea",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all resize-none",rows:3,placeholder:"Notas adicionais...",value:v.notes,onChange:W=>x(re=>({...re,notes:W.target.value}))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3 shrink-0",children:[s.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),s.jsx("button",{onClick:T,className:"flex-[2] py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg shadow-zinc-900/10 hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:i?"Salvar":"Adicionar"})]})]})]})}),document.body),Ze.createPortal(s.jsx(Ne,{children:a&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(wh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>l(null)}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col overflow-hidden",style:{maxHeight:"calc(100vh - 100px)"},children:[s.jsxs("div",{className:"relative px-6 py-8 text-center border-b border-zinc-100 dark:border-white/5",children:[s.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-xl shadow-violet-500/30 mx-auto mb-4",children:((Wn=(cs=a.name)==null?void 0:cs.charAt(0))==null?void 0:Wn.toUpperCase())||"?"}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-1",children:a.name}),a.company&&s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:a.company})]}),s.jsx("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-white/5",children:s.jsxs("div",{className:"flex gap-3",children:[a.phone&&s.jsxs("button",{onClick:()=>Be(a.phone),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Ligar"})]}),a.email&&s.jsxs("button",{onClick:()=>yn(a.email),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Email"})]}),a.whatsapp&&s.jsxs("button",{onClick:()=>en(a.whatsapp),className:"flex-1 py-4 px-4 bg-emerald-50 dark:bg-emerald-500/10 rounded-2xl flex flex-col items-center gap-2 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),s.jsx("span",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"WhatsApp"})]})]})}),s.jsxs("div",{className:"px-6 py-5 space-y-4",children:[a.address&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Endereo"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:a.address})]}),((Ir=a.linkedItems)==null?void 0:Ir.length)>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Itens Fornecidos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.linkedItems.map(W=>s.jsx("span",{className:"px-3 py-1.5 bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 rounded-lg text-xs font-bold",children:W.itemName},W.itemId))})]}),((Ar=a.documents)==null?void 0:Ar.length)>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Documentos"}),s.jsx("div",{className:"space-y-2",children:a.documents.map(W=>{const re=_.find(V=>V.id===W.category);return s.jsxs("div",{onClick:()=>Fe(W),className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all touch-manipulation active:scale-[0.98]",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-900/30 dark:to-indigo-900/30 flex items-center justify-center text-xl shrink-0",children:de(W.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate mb-0.5",children:W.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] text-zinc-400",children:ue(W.size)}),re&&s.jsxs("span",{className:"text-[10px] font-bold text-violet-500",children:[re.icon," ",re.label]})]})]}),s.jsx("svg",{className:"w-5 h-5 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]},W.id)})})]}),a.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:a.notes})]})]}),s.jsxs("div",{className:"px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[s.jsx("button",{onClick:()=>oe(a),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:"Editar"}),s.jsx("button",{onClick:()=>O(a),className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-all active:scale-[0.98] touch-manipulation",children:"Excluir"})]})]})]})}),document.body),s.jsx(Ne,{children:h&&s.jsx(aD,{...h})}),Ze.createPortal(s.jsx(Ne,{children:ge&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 bg-black/90 backdrop-blur-2xl",onClick:()=>le(null),children:[s.jsx(wh,{}),s.jsx("button",{onClick:()=>le(null),className:"absolute top-6 right-6 w-12 h-12 rounded-full bg-white/10 backdrop-blur-xl flex items-center justify-center text-white hover:bg-white/20 transition-all z-10 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("button",{onClick:W=>{W.stopPropagation(),Fe(ge)},className:"absolute top-6 left-6 px-4 py-3 rounded-xl bg-white/10 backdrop-blur-xl flex items-center gap-2 text-white hover:bg-white/20 transition-all z-10 touch-manipulation",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),s.jsx("span",{className:"text-sm font-bold",children:"Baixar"})]}),s.jsx(Q.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},src:ge.dataUrl,alt:ge.name,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:W=>W.stopPropagation()}),s.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 px-6 py-3 rounded-2xl bg-white/10 backdrop-blur-xl",children:[s.jsx("p",{className:"text-sm font-medium text-white text-center",children:ge.name}),s.jsx("p",{className:"text-xs text-white/60 text-center mt-0.5",children:ue(ge.size)})]})]})}),document.body),s.jsx(Ne,{children:f&&s.jsx(oD,{...f,onClose:()=>y(null)})})]})}const J5={type:"spring",stiffness:400,damping:30},cD=["Ingredientes","Embalagens","Utenslios","Produtos de Limpeza","Outros"],uD={Ingredientes:["Laticnios","Embutidos","Farinceos","Temperos","Vegetais","Carnes","Molhos","Queijos","leos","Outros"],Embalagens:["Caixas","Sacolas","Papis","Plsticos","Outros"],Utenslios:["Cozinha","Mesa","Limpeza","Outros"],"Produtos de Limpeza":["Detergentes","Desinfetantes","Acessrios","Outros"],Outros:["Geral"]};function dD(){const t=$5(),e=j.useMemo(()=>Array.isArray(t)?t.map(z=>{var A;return{id:z.id,name:z.name,sku:(A=z.id)==null?void 0:A.toString(),category:z.category||"Outros",subcategory:z.subcategory||"",supplier:z.supplierName||"",supplierId:z.supplierId,unit:z.unit||"un",unitPrice:z.pricePerUnit||0,currentStock:(Number(z.packageQuantity)||0)*(Number(z.packageCount)||1),packageQuantity:z.packageQuantity,packageCount:z.packageCount,minStock:z.minStock||0,maxStock:z.maxStock||0,notes:"",createdAt:z.createdAt,updatedAt:z.createdAt,purchaseDate:z.purchaseDate}}):[],[t]),[n,r]=j.useState(cD),[i,o]=j.useState([]),[a,l]=j.useState(!1),[c,d]=j.useState(""),[h,m]=j.useState("all"),[f,y]=j.useState("all"),[N,I]=j.useState("recent"),[P,w]=j.useState(null),[b,k]=j.useState(null),[R,M]=j.useState(null),L=j.useRef(null),v=j.useCallback((z,A="info")=>{L.current&&clearTimeout(L.current),M({message:z,type:A}),L.current=setTimeout(()=>M(null),3e3)},[]);j.useEffect(()=>{(async()=>{try{const A=await De.getSuppliers();A!=null&&A.suppliers&&o(A.suppliers)}catch(A){console.warn("Products cloud load failed",A)}finally{l(!0)}})()},[]);const x=j.useMemo(()=>{let z=[...e];if(h!=="all"&&(z=z.filter(A=>A.category===h)),f!=="all"&&(z=z.filter(A=>A.subcategory===f)),c.trim()){const A=c.toLowerCase();z=z.filter(E=>{var ge,le,me;return((ge=E.name)==null?void 0:ge.toLowerCase().includes(A))||((le=E.supplier)==null?void 0:le.toLowerCase().includes(A))||((me=E.sku)==null?void 0:me.toLowerCase().includes(A))})}switch(N){case"name":z.sort((A,E)=>(A.name||"").localeCompare(E.name||""));break;case"quantity":z.sort((A,E)=>(E.currentStock||0)-(A.currentStock||0));break;case"price":z.sort((A,E)=>(E.unitPrice||0)-(A.unitPrice||0));break;case"recent":default:z.sort((A,E)=>new Date(E.updatedAt||E.createdAt||0)-new Date(A.updatedAt||A.createdAt||0))}return z},[e,h,f,c,N]),_=j.useMemo(()=>h==="all"?[...new Set(e.map(z=>z.subcategory).filter(Boolean))]:uD[h]||[],[h,e]),C=j.useMemo(()=>{const z=e.length,A=e.reduce((le,me)=>le+(me.currentStock||0)*(me.unitPrice||0),0),E=e.filter(le=>le.minStock&&le.currentStock<le.minStock).length,ge=[...new Set(e.map(le=>le.category).filter(Boolean))].length;return{totalProducts:z,totalValue:A,lowStock:E,categories:ge}},[e]);return s.jsxs("div",{className:"min-h-screen pb-24 md:pb-8",children:[s.jsxs("header",{className:"mb-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Produtos"}),s.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${a?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:a?"Synced":"Syncing"})]})]}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:"Visualizao sincronizada com Estoque"})]}),s.jsxs("a",{href:"#estoque",onClick:z=>{z.preventDefault(),v("Use a pgina de Estoque para adicionar itens","info")},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 rounded-2xl text-xs font-bold uppercase tracking-widest border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all flex items-center justify-center gap-3",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"Sincronizado com Estoque"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Total Produtos"}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tabular-nums",children:C.totalProducts})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Valor em Estoque"}),s.jsxs("p",{className:"text-2xl md:text-3xl font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:["R$ ",C.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Estoque Baixo"}),s.jsx("p",{className:`text-2xl md:text-3xl font-bold tabular-nums ${C.lowStock>0?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:C.lowStock})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Categorias"}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tabular-nums",children:C.categories})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:c,onChange:z=>d(z.target.value),placeholder:"Buscar produtos...",className:"w-full pl-12 pr-4 py-4 bg-white dark:bg-zinc-900 rounded-2xl text-sm font-medium outline-none border border-zinc-200/50 dark:border-white/5 focus:ring-2 focus:ring-zinc-500/20 transition-all"})]}),s.jsxs("select",{value:N,onChange:z=>I(z.target.value),className:"px-4 py-4 bg-white dark:bg-zinc-900 rounded-2xl text-sm font-medium outline-none border border-zinc-200/50 dark:border-white/5 focus:ring-2 focus:ring-zinc-500/20 appearance-none cursor-pointer min-w-[140px]",children:[s.jsx("option",{value:"recent",children:"Mais Recentes"}),s.jsx("option",{value:"name",children:"Nome A-Z"}),s.jsx("option",{value:"quantity",children:"Maior Estoque"}),s.jsx("option",{value:"price",children:"Maior Preo"})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto scrollbar-hide pb-2",children:[s.jsx("button",{onClick:()=>{m("all"),y("all")},className:`flex-shrink-0 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${h==="all"?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),n.map(z=>s.jsx("button",{onClick:()=>{m(z),y("all")},className:`flex-shrink-0 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${h===z?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:z},z))]}),_.length>0&&s.jsxs("div",{className:"flex gap-2 mt-2 overflow-x-auto scrollbar-hide pb-2",children:[s.jsx("button",{onClick:()=>y("all"),className:`flex-shrink-0 px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${f==="all"?"bg-indigo-500 text-white":"bg-zinc-50 dark:bg-zinc-800/50 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:"Todas"}),_.map(z=>s.jsx("button",{onClick:()=>y(z),className:`flex-shrink-0 px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${f===z?"bg-indigo-500 text-white":"bg-zinc-50 dark:bg-zinc-800/50 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:z},z))]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(z=>{var A;return s.jsxs("div",{onClick:()=>w(z),className:"bg-white dark:bg-zinc-900 rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 hover:shadow-xl hover:border-zinc-300 dark:hover:border-white/10 transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[z.category&&s.jsx("div",{className:"inline-block px-3 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:z.category}),z.subcategory&&s.jsx("div",{className:"inline-block px-3 py-1 bg-indigo-100 dark:bg-indigo-500/20 rounded-full text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:z.subcategory})]}),s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:z.name}),z.sku&&s.jsxs("p",{className:"text-xs text-zinc-400 mb-3 font-mono",children:["SKU: ",z.sku]}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Estoque"}),s.jsxs("p",{className:`text-xl font-bold tabular-nums ${z.minStock&&z.currentStock<z.minStock?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:[z.currentStock||0,s.jsx("span",{className:"text-xs font-medium text-zinc-400 ml-1",children:z.unit||"un"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Preo Unit."}),s.jsxs("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:["R$ ",(z.unitPrice||0).toFixed(2)]})]})]}),z.supplier&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),z.supplier]}),((A=z.history)==null?void 0:A.length)>0&&s.jsx("div",{className:"mt-3 pt-3 border-t border-zinc-100 dark:border-zinc-800",children:s.jsxs("p",{className:"text-[10px] text-zinc-400",children:["ltima movimentao: ",new Date(z.history[z.history.length-1].date).toLocaleDateString("pt-BR")]})})]},z.id)})}),x.length===0&&s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:c?"Nenhum produto encontrado":"Nenhum produto cadastrado"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:c?"Tente uma busca diferente":"Adicione itens no Estoque para v-los aqui"})]}),s.jsx(Ne,{children:P&&s.jsx(hD,{product:P,onClose:()=>w(null),suppliers:i,readOnly:!0})}),s.jsx(Ne,{children:b&&s.jsx(fD,{...b})}),s.jsx(Ne,{children:R&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold",children:R.message})]}),document.body)})]})}function hD({product:t,onClose:e,onEdit:n,onDelete:r,onAddMovement:i,suppliers:o}){var I;qt(!0);const[a,l]=j.useState("info"),[c,d]=j.useState("entry"),[h,m]=j.useState(""),[f,y]=j.useState(""),N=()=>{!h||parseFloat(h)<=0||(i({type:c,quantity:parseFloat(h),notes:f}),m(""),y(""),l("history"))};return Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md"}),s.jsxs(Q.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:J5,className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-3xl shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border-t md:border border-zinc-200/50 dark:border-white/10",onClick:P=>P.stopPropagation(),children:[s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"w-10 h-1 bg-zinc-300 dark:bg-zinc-700 rounded-full mx-auto mb-4 md:hidden"}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[t.category&&s.jsx("div",{className:"inline-block px-3 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-full text-[10px] font-bold text-zinc-500 uppercase tracking-wider",children:t.category}),t.subcategory&&s.jsx("div",{className:"inline-block px-3 py-1 bg-indigo-100 dark:bg-indigo-500/20 rounded-full text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:t.subcategory})]}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:t.name}),t.sku&&s.jsxs("p",{className:"text-xs text-zinc-400 font-mono mt-1",children:["SKU: ",t.sku]})]}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Estoque"}),s.jsx("p",{className:`text-xl font-bold ${t.minStock&&t.currentStock<t.minStock?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:t.currentStock||0})]}),s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Preo Unit."}),s.jsxs("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:["R$ ",(t.unitPrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Valor Total"}),s.jsxs("p",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:["R$ ",((t.currentStock||0)*(t.unitPrice||0)).toFixed(2)]})]})]}),s.jsx("div",{className:"flex gap-1 mt-4 p-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl",children:[{id:"info",label:"Detalhes"},{id:"history",label:"Histrico"},{id:"movement",label:"Movimentar"}].map(P=>s.jsx("button",{onClick:()=>l(P.id),className:`flex-1 py-2.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${a===P.id?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400"}`,children:P.label},P.id))})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 md:p-6",children:[a==="info"&&s.jsxs("div",{className:"space-y-4",children:[t.supplier&&s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("svg",{className:"w-5 h-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Fornecedor"}),s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:t.supplier})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Estoque Mnimo"}),s.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:t.minStock||"-"})]}),s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Estoque Mximo"}),s.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:t.maxStock||"-"})]})]}),t.notes&&s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Observaes"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.notes})]}),s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Cadastrado em"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.createdAt?new Date(t.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"-"})]})]}),a==="history"&&s.jsx("div",{className:"space-y-2",children:((I=t.history)==null?void 0:I.length)>0?[...t.history].reverse().map((P,w)=>s.jsxs("div",{className:`p-4 rounded-xl border ${P.type==="entry"?"bg-emerald-50 dark:bg-emerald-500/10 border-emerald-200 dark:border-emerald-500/20":"bg-rose-50 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/20"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("span",{className:`text-xs font-bold uppercase ${P.type==="entry"?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:P.type==="entry"?"+ Entrada":"- Sada"}),s.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white mt-1",children:[P.quantity," ",t.unit||"un"]})]}),s.jsx("p",{className:"text-xs text-zinc-500",children:new Date(P.date).toLocaleDateString("pt-BR")})]}),P.notes&&s.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:P.notes})]},P.id||w)):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-zinc-400 text-sm",children:"Nenhuma movimentao registrada"})})}),a==="movement"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 p-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl",children:[s.jsx("button",{onClick:()=>d("entry"),className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${c==="entry"?"bg-emerald-500 text-white":"text-zinc-500"}`,children:"+ Entrada"}),s.jsx("button",{onClick:()=>d("exit"),className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${c==="exit"?"bg-rose-500 text-white":"text-zinc-500"}`,children:"- Sada"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Quantidade"}),s.jsx("input",{type:"number",inputMode:"decimal",value:h,onChange:P=>m(P.target.value),placeholder:"0",className:"w-full px-4 py-4 bg-zinc-50 dark:bg-zinc-800 rounded-2xl text-lg font-bold outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 text-center"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),s.jsx("input",{type:"text",value:f,onChange:P=>y(P.target.value),placeholder:"Ex: Compra fornecedor X",className:"w-full px-4 py-4 bg-zinc-50 dark:bg-zinc-800 rounded-2xl text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50"})]}),s.jsxs("button",{onClick:N,disabled:!h||parseFloat(h)<=0,className:`w-full py-4 rounded-2xl text-xs font-bold uppercase tracking-wider transition-all disabled:opacity-50 ${c==="entry"?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-rose-500 text-white hover:bg-rose-600"}`,children:["Registrar ",c==="entry"?"Entrada":"Sada"]})]})]}),s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[s.jsx("button",{onClick:n,className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Editar"}),s.jsx("button",{onClick:r,className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors",children:"Excluir"})]})]})]}),document.body)}function fD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return qt(!0),Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10001] flex items-center justify-center p-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:J5,className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 text-center",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]}),document.body)}const A1="padoca_inventory_v2",P1="padoca_suppliers";function mD(){return qt(!0),null}function pD(){const[t,e]=j.useState([]),[n,r]=j.useState([]),[i,o]=j.useState("synced"),[a,l]=j.useState(!1),[c,d]=j.useState(!1),[h,m]=j.useState(null),[f,y]=j.useState({to:"",subject:"",body:""}),[N,I]=j.useState([]),[P,w]=j.useState(null),b=j.useRef(null),k=j.useCallback((X,H="success")=>{b.current&&clearTimeout(b.current),w({message:X,type:H}),b.current=setTimeout(()=>w(null),3500)},[]);j.useEffect(()=>{(async()=>{o("syncing");try{try{const H=await De.getInventory();if(H!=null&&H.items&&Array.isArray(H.items))e(H.items);else{const te=localStorage.getItem(A1);if(te){const se=JSON.parse(te);e(Array.isArray(se)?se:[])}}}catch(H){console.warn("Inventory load failed:",H);const te=localStorage.getItem(A1);if(te){const se=JSON.parse(te);e(Array.isArray(se)?se:[])}}try{const H=await De.getSuppliers();if(H!=null&&H.suppliers&&Array.isArray(H.suppliers))r(H.suppliers);else{const te=localStorage.getItem(P1);if(te){const se=JSON.parse(te),pe=(se==null?void 0:se.suppliers)||se;r(Array.isArray(pe)?pe:[])}}}catch(H){console.warn("Suppliers load failed:",H);const te=localStorage.getItem(P1);if(te){const se=JSON.parse(te),pe=(se==null?void 0:se.suppliers)||se;r(Array.isArray(pe)?pe:[])}}o("synced")}catch(H){console.error("Error loading data:",H),o("error")}finally{l(!0)}})();try{const H=localStorage.getItem("padoca_sent_emails");if(H){const te=JSON.parse(H);I(Array.isArray(te)?te:[])}}catch(H){console.warn("Sent emails load failed:",H)}},[]);const R=X=>(Number(X.packageQuantity)||0)*(Number(X.packageCount)||1),M=X=>{const H=R(X),te=Number(X.minStock)||0;return te===0?"ok":H<te?"critical":H<=te*1.2?"warning":"ok"},L=j.useMemo(()=>{const X=t.filter(te=>{const se=M(te);return se==="critical"||se==="warning"}).map(te=>({...te,status:M(te),totalQty:R(te)})),H={};return X.forEach(te=>{const se=n.find(D=>{var U;return(U=D.linkedItems)==null?void 0:U.some($=>$.itemId===te.id)}),pe=(se==null?void 0:se.id)||"unlinked";H[pe]||(H[pe]={supplier:se,items:[]}),H[pe].items.push(te)}),Object.values(H).filter(te=>te.supplier)},[t,n]),v=j.useMemo(()=>{const X=t.length,H=t.filter(D=>M(D)==="critical").length,te=t.filter(D=>M(D)==="warning").length,se=L.length,pe=X>0?Math.max(0,Math.round(100-H*20-te*5)):100;return{total:X,critical:H,warning:te,suppliersWithAlerts:se,healthScore:pe}},[t,L]),x=j.useCallback((X,H)=>{const te=new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),se=H.map(pe=>` ${pe.name}: ${pe.totalQty.toFixed(1)}${pe.unit||"g"} (mnimo: ${pe.minStock||0}${pe.unit||"g"})`).join(`
`);return{to:X.email||"",subject:`Solicitao de Cotao - Padoca Pizza - ${new Date().toLocaleDateString("pt-BR")}`,body:`Ol ${X.name},

Espero que esteja bem!

Estamos precisando repor alguns itens do nosso estoque e gostaramos de solicitar uma cotao:

${se}

Poderia nos enviar os preos atualizados e prazo de entrega?

Obrigado!
Equipe Padoca Pizza


${te}`}},[]),_=(X,H)=>{const te=x(X,H);m(X),y(te),d(!0)},[C,z]=j.useState(!1),[A,E]=j.useState(!1),[ge,le]=j.useState(null),me=async()=>{if(!f.to){k("Email do fornecedor no cadastrado","error");return}z(!0),await new Promise(te=>setTimeout(te,1500));const X={id:Date.now().toString(),...f,supplierName:h==null?void 0:h.name,sentAt:new Date().toISOString(),status:"sent"},H=[X,...N];I(H),localStorage.setItem("padoca_sent_emails",JSON.stringify(H)),z(!1),d(!1),le(X),E(!0),m(null),y({to:"",subject:"",body:""})},xe=()=>{const X=`Para: ${f.to}
Assunto: ${f.subject}

${f.body}`;navigator.clipboard.writeText(X),k("Email copiado para rea de transferncia!")},Y=v.healthScore>=80?"emerald":v.healthScore>=60?"amber":"rose";return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Inteligncia"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${i==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":i==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${i==="syncing"?"bg-amber-500":i==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:i==="syncing"?"Cloud Syncing":i==="error"?"Sync Error":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Automao e insights em tempo real"})]}),s.jsxs("button",{onClick:()=>L.length>0&&_(L[0].supplier,L[0].items),disabled:L.length===0,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Notificar Fornecedores"]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Intelligence Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Active Monitoring"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Y==="emerald"?"bg-emerald-500":Y==="amber"?"bg-amber-500":"bg-rose-500"}`}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Analysis"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Health Score"}),s.jsxs("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:[s.jsx("span",{className:Y==="emerald"?"text-emerald-500":Y==="amber"?"text-amber-500":"text-rose-500",children:v.healthScore}),s.jsx("span",{className:"text-2xl md:text-4xl text-zinc-300 dark:text-zinc-600",children:"/ 100"})]})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Itens Monitorados"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:v.total})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-rose-500 dark:text-rose-400 uppercase tracking-widest",children:"Alertas Ativos"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-rose-600 dark:text-rose-400 tracking-tight tabular-nums",children:v.critical+v.warning})]})]})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Crtico"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:v.critical}),s.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens abaixo do mnimo"})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Urgncia"}),s.jsx("span",{className:"text-[8px] font-bold text-rose-500",children:"Alta"})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-rose-500/80 transition-all duration-1000",style:{width:v.total>0?`${v.critical/v.total*100}%`:"0%"}})})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Ateno"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:v.warning}),s.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens prximos do limite"})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Monitorar"}),s.jsx("span",{className:"text-[8px] font-bold text-amber-500",children:"Mdia"})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-amber-500/80 transition-all duration-1000",style:{width:v.total>0?`${v.warning/v.total*100}%`:"0%"}})})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Automation Protocol"}),s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Cotaes Pendentes"})]}),L.length>0&&s.jsx("div",{className:"px-4 py-1.5 bg-rose-50 dark:bg-rose-500/10 rounded-full border border-rose-200 dark:border-rose-500/20",children:s.jsxs("span",{className:"text-[10px] font-bold text-rose-600 dark:text-rose-400 uppercase tracking-widest",children:[L.length," fornecedor",L.length>1?"es":""]})})]}),s.jsx("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:L.length===0?s.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-50 dark:bg-emerald-500/5 flex items-center justify-center border border-emerald-100 dark:border-emerald-500/10",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-[10px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:"Estoque OK  Nenhuma cotao pendente"})]}):s.jsx("div",{className:"space-y-3 md:space-y-1",children:L.map(({supplier:X,items:H})=>{var te,se;return s.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-pointer border border-zinc-100 dark:border-white/5 md:border-transparent",onClick:()=>_(X,H),children:[s.jsxs("div",{className:"md:col-span-5 flex items-start md:items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center text-white text-lg font-bold shadow-lg shadow-indigo-500/25 shrink-0",children:(se=(te=X.name)==null?void 0:te.charAt(0))==null?void 0:se.toUpperCase()}),s.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[s.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:X.name}),s.jsx("div",{className:"flex items-center gap-3 opacity-60",children:s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums",children:X.email||"Sem email"})})]})]}),s.jsxs("div",{className:"md:col-span-4 flex flex-wrap gap-2",children:[H.slice(0,3).map(pe=>s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full border text-[9px] font-bold uppercase tracking-tighter ${pe.status==="critical"?"bg-rose-50 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/20 text-rose-600 dark:text-rose-400":"bg-amber-50 dark:bg-amber-500/10 border-amber-200 dark:border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:pe.name},pe.id)),H.length>3&&s.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-400 uppercase tracking-tighter",children:["+",H.length-3," mais"]})]}),s.jsx("div",{className:"md:col-span-3 flex justify-end",children:s.jsxs("button",{className:"w-full md:w-auto px-5 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-[10px] font-bold uppercase tracking-widest shadow-md hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Solicitar"]})})]},X.id)})})})]}),N.length>0&&s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Histrico de Cotaes"}),s.jsxs("span",{className:"text-[9px] font-medium text-zinc-300",children:[N.length," enviado",N.length>1?"s":""]})]}),s.jsx("div",{className:"space-y-2",children:N.slice(0,5).map((X,H)=>s.jsxs("div",{className:`flex items-center gap-4 py-3 px-4 rounded-xl ${H!==Math.min(N.length,5)-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:X.supplierName||X.to}),s.jsx("p",{className:"text-[10px] text-zinc-400 truncate",children:X.subject})]}),s.jsx("span",{className:"text-[10px] font-medium text-zinc-300 shrink-0",children:new Date(X.sentAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})]},X.id))})]}),s.jsx(Ne,{children:c&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>d(!1)}),s.jsxs(Q.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-lg rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[85vh]",children:[s.jsx(mD,{}),s.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:s.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),s.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:"Compor Email"}),s.jsx("p",{className:"text-xs text-zinc-500",children:h==null?void 0:h.name})]}),s.jsx("button",{onClick:()=>d(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:s.jsxs("div",{className:"space-y-6 px-4 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Para"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:f.to,onChange:X=>y(H=>({...H,to:X.target.value})),placeholder:"email@fornecedor.com"})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Assunto"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:f.subject,onChange:X=>y(H=>({...H,subject:X.target.value})),placeholder:"Assunto do email"})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Mensagem"}),s.jsx("textarea",{className:"w-full bg-transparent border-none py-1 text-sm font-medium text-zinc-700 dark:text-zinc-300 outline-none resize-none leading-relaxed min-h-[200px]",value:f.body,onChange:X=>y(H=>({...H,body:X.target.value})),placeholder:"Contedo do email..."})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[s.jsx("button",{onClick:me,disabled:C||!f.to,className:`w-full py-4 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg transition-all flex items-center justify-center gap-2 ${C?"bg-emerald-500 text-white cursor-wait":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 active:scale-95"} disabled:opacity-50`,children:C?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Enviar Email"]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:xe,className:"py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Copiar"}),s.jsx("button",{onClick:()=>d(!1),className:"py-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-2xl transition-all",children:"Cancelar"})]})]})]})})]})]})}),s.jsx(Ne,{children:A&&ge&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",onClick:()=>E(!1),children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/60 backdrop-blur-sm"}),s.jsxs(Q.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"relative bg-white dark:bg-zinc-900 w-full max-w-sm rounded-3xl shadow-2xl border border-zinc-200/50 dark:border-white/10 overflow-hidden text-center p-8",onClick:X=>X.stopPropagation(),children:[s.jsx(Q.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:500,damping:25},className:"w-20 h-20 mx-auto mb-6 rounded-full bg-emerald-500 flex items-center justify-center shadow-xl shadow-emerald-500/30",children:s.jsx(Q.svg,{initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:1},transition:{delay:.3,duration:.4},className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsx(Q.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Email Enviado!"}),s.jsxs(Q.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:["Cotao enviada para",s.jsx("br",{}),s.jsx("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:ge.supplierName||ge.to})]}),s.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-2",children:s.jsx("button",{onClick:()=>E(!1),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Continuar"})})]})]}),document.body)}),s.jsx(Ne,{children:P&&Ze.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${P.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":P.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${P.type==="error"?"bg-white animate-pulse":P.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:P.message})]}),document.body)})]})}const kh=[{key:"ai",label:"IA",icon:ND},{key:"kanban",label:"Kanban",icon:gD},{key:"recipes",label:"Receitas",icon:xD},{key:"products",label:"Produtos",icon:jD},{key:"inventory",label:"Estoque",icon:yD},{key:"suppliers",label:"Fornecedores",icon:kD},{key:"costs",label:"Financeiro",icon:vD},{key:"ficha",label:"Ficha",icon:bD},{key:"calculator",label:"Produo",icon:wD}];function gD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function xD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function yD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function vD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function bD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function wD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}function kD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}function jD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}function ND({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}const ps={type:"spring",stiffness:500,damping:35,mass:.8},_D={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function zD(){var d;const[t,e]=j.useState("pct"),[n,r]=j.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[i,o]=j.useState(!1),[a,l]=j.useState(!1);j.useEffect(()=>{o(!0)},[]);const c=h=>{if(h===n){l(!1);return}r(h),l(!1),localStorage.setItem("padoca_view",h)};return(d=kh.find(h=>h.key===n))!=null&&d.label,s.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${i?"opacity-100":"opacity-0"}`,children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[s.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),s.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[s.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-3 pb-2 mb-2 md:relative md:pt-8 md:pb-4 md:mb-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),s.jsxs("div",{className:"relative flex flex-col gap-0 md:gap-5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...ps},children:[s.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),s.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),s.jsx("button",{onClick:()=>l(!a),className:"relative w-11 h-11 flex items-center justify-center -mr-2 md:hidden","aria-label":"Menu",children:s.jsxs("div",{className:"relative w-[18px] h-[10px]",children:[s.jsx(Q.span,{animate:a?{rotate:45,y:4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute top-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"}),s.jsx(Q.span,{animate:a?{rotate:-45,y:-4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute bottom-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"})]})}),s.jsx(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...ps},className:"hidden md:flex items-center gap-3",children:s.jsx(Ne,{mode:"wait",children:n==="calculator"&&s.jsx(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:ps,children:s.jsx(Ky,{value:t,onChange:e})})})})]}),s.jsx(Ne,{children:a&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"fixed inset-0 z-[9999] bg-white dark:bg-black md:hidden",style:{top:0},children:[s.jsx("div",{className:"absolute top-3 right-4 z-10",children:s.jsx("button",{onClick:()=>l(!1),className:"w-11 h-11 flex items-center justify-center","aria-label":"Close",children:s.jsxs("div",{className:"relative w-[18px] h-[10px]",children:[s.jsx("span",{className:"absolute top-1/2 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 rotate-45 -translate-y-1/2"}),s.jsx("span",{className:"absolute top-1/2 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 -rotate-45 -translate-y-1/2"})]})})}),s.jsx("div",{className:"flex flex-col justify-center h-full px-8 -mt-16",children:kh.map(({key:h,label:m},f)=>{const y=n===h;return s.jsx(Q.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{delay:f*.05,duration:.3,ease:[.25,.46,.45,.94]},onClick:()=>c(h),className:`text-left py-4 border-b border-zinc-100 dark:border-zinc-800 last:border-0 transition-colors ${y?"text-zinc-900 dark:text-white":"text-zinc-400 dark:text-zinc-500"}`,children:s.jsx("span",{className:"text-[28px] font-semibold tracking-tight",children:m})},h)})}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"absolute bottom-8 left-8 right-8 text-center",children:s.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-600 uppercase tracking-widest font-medium",children:"Padoca Pizza"})})]})}),s.jsxs("nav",{className:"relative hidden md:block",children:[s.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...ps},className:"flex items-center gap-1 p-1.5 bg-zinc-100/90 dark:bg-zinc-900/90 backdrop-blur-xl rounded-2xl border border-zinc-200/50 dark:border-white/5 shadow-sm",children:kh.map(({key:h,label:m,icon:f})=>{const y=n===h;return s.jsxs("button",{onClick:()=>c(h),className:`relative flex items-center justify-center gap-2 px-5 py-3 text-[11px] font-semibold rounded-xl transition-all duration-200 whitespace-nowrap ${y?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}`,children:[y&&s.jsx(Q.div,{layoutId:"nav-active-desktop",className:"absolute inset-0 bg-white dark:bg-zinc-800 rounded-xl shadow-lg shadow-zinc-900/5 dark:shadow-black/20",transition:ps}),s.jsx("span",{className:"relative z-10",children:s.jsx(f,{active:y})}),s.jsx("span",{className:"relative z-10 uppercase tracking-wider",children:m})]},h)})}),s.jsx(Ne,{mode:"wait",children:n==="calculator"&&s.jsx(Q.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:ps,className:"md:hidden flex-shrink-0 mt-3",children:s.jsx(Ky,{value:t,onChange:e})})})]})]})]}),s.jsx(Ne,{mode:"wait",children:s.jsx(Q.main,{initial:"initial",animate:"enter",exit:"exit",variants:_D,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="ai"?s.jsx(pD,{}):n==="kanban"?s.jsx(eD,{}):n==="recipes"?s.jsx(K9,{}):n==="products"?s.jsx(dD,{}):n==="inventory"?s.jsx(n9,{}):n==="suppliers"?s.jsx(lD,{}):n==="costs"?s.jsx(e9,{}):n==="ficha"?s.jsx(i9,{}):s.jsx(l9,{inputMode:t,setInputMode:e})},n)})]})]})}class CD extends Sn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:s.jsxs("div",{className:"max-w-md text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}jh.createRoot(document.getElementById("root")).render(s.jsx(Sn.StrictMode,{children:s.jsx(CD,{children:s.jsx(zD,{})})}));
