(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function V1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L1={exports:{}},bd={},O1={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),zN=Symbol.for("react.portal"),CN=Symbol.for("react.fragment"),SN=Symbol.for("react.strict_mode"),EN=Symbol.for("react.profiler"),TN=Symbol.for("react.provider"),IN=Symbol.for("react.context"),AN=Symbol.for("react.forward_ref"),PN=Symbol.for("react.suspense"),RN=Symbol.for("react.memo"),DN=Symbol.for("react.lazy"),Cg=Symbol.iterator;function MN(t){return t===null||typeof t!="object"?null:(t=Cg&&t[Cg]||t["@@iterator"],typeof t=="function"?t:null)}var F1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B1=Object.assign,U1={};function da(t,e,n){this.props=t,this.context=e,this.refs=U1,this.updater=n||F1}da.prototype.isReactComponent={};da.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};da.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $1(){}$1.prototype=da.prototype;function bm(t,e,n){this.props=t,this.context=e,this.refs=U1,this.updater=n||F1}var wm=bm.prototype=new $1;wm.constructor=bm;B1(wm,da.prototype);wm.isPureReactComponent=!0;var Sg=Array.isArray,W1=Object.prototype.hasOwnProperty,km={current:null},q1={key:!0,ref:!0,__self:!0,__source:!0};function H1(t,e,n){var r,i={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)W1.call(e,r)&&!q1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:el,type:t,key:a,ref:o,props:i,_owner:km.current}}function VN(t,e){return{$$typeof:el,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jm(t){return typeof t=="object"&&t!==null&&t.$$typeof===el}function LN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Eg=/\/+/g;function bu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LN(""+t.key):e.toString(36)}function nc(t,e,n,r,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case el:case zN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+bu(o,0):r,Sg(i)?(n="",t!=null&&(n=t.replace(Eg,"$&/")+"/"),nc(i,e,n,"",function(u){return u})):i!=null&&(jm(i)&&(i=VN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Eg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Sg(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+bu(a,l);o+=nc(a,e,n,c,i)}else if(c=MN(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+bu(a,l++),o+=nc(a,e,n,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Cl(t,e,n){if(t==null)return t;var r=[],i=0;return nc(t,r,"","",function(a){return e.call(n,a,i++)}),r}function ON(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},rc={transition:null},FN={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:rc,ReactCurrentOwner:km};function G1(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Cl,forEach:function(t,e,n){Cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cl(t,function(){e++}),e},toArray:function(t){return Cl(t,function(e){return e})||[]},only:function(t){if(!jm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=da;Me.Fragment=CN;Me.Profiler=EN;Me.PureComponent=bm;Me.StrictMode=SN;Me.Suspense=PN;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FN;Me.act=G1;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=B1({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=km.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)W1.call(e,c)&&!q1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:el,type:t.type,key:i,ref:a,props:r,_owner:o}};Me.createContext=function(t){return t={$$typeof:IN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:TN,_context:t},t.Consumer=t};Me.createElement=H1;Me.createFactory=function(t){var e=H1.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:AN,render:t}};Me.isValidElement=jm;Me.lazy=function(t){return{$$typeof:DN,_payload:{_status:-1,_result:t},_init:ON}};Me.memo=function(t,e){return{$$typeof:RN,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};Me.unstable_act=G1;Me.useCallback=function(t,e){return on.current.useCallback(t,e)};Me.useContext=function(t){return on.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return on.current.useDeferredValue(t)};Me.useEffect=function(t,e){return on.current.useEffect(t,e)};Me.useId=function(){return on.current.useId()};Me.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return on.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};Me.useRef=function(t){return on.current.useRef(t)};Me.useState=function(t){return on.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return on.current.useTransition()};Me.version="18.3.1";O1.exports=Me;var k=O1.exports;const Dn=V1(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN=k,UN=Symbol.for("react.element"),$N=Symbol.for("react.fragment"),WN=Object.prototype.hasOwnProperty,qN=BN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,HN={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var r,i={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)WN.call(e,r)&&!HN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:UN,type:t,key:a,ref:o,props:i,_owner:qN.current}}bd.Fragment=$N;bd.jsx=K1;bd.jsxs=K1;L1.exports=bd;var s=L1.exports,Ch={},Q1={exports:{}},Nn={},Y1={exports:{}},X1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(X,ae){var se=X.length;X.push(ae);e:for(;0<se;){var we=se-1>>>1,ve=X[we];if(0<i(ve,ae))X[we]=ae,X[se]=ve,se=we;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ae=X[0],se=X.pop();if(se!==ae){X[0]=se;e:for(var we=0,ve=X.length,Pe=ve>>>1;we<Pe;){var D=2*(we+1)-1,U=X[D],H=D+1,re=X[H];if(0>i(U,se))H<ve&&0>i(re,U)?(X[we]=re,X[H]=se,we=H):(X[we]=U,X[D]=se,we=D);else if(H<ve&&0>i(re,se))X[we]=re,X[H]=se,we=H;else break e}}return ae}function i(X,ae){var se=X.sortIndex-ae.sortIndex;return se!==0?se:X.id-ae.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,m=null,f=3,y=!1,_=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(X){for(var ae=n(u);ae!==null;){if(ae.callback===null)r(u);else if(ae.startTime<=X)r(u),ae.sortIndex=ae.expirationTime,e(c,ae);else break;ae=n(u)}}function R(X){if(A=!1,j(X),!_)if(n(c)!==null)_=!0,ye(O);else{var ae=n(u);ae!==null&&ke(R,ae.startTime-X)}}function O(X,ae){_=!1,A&&(A=!1,b(x),x=-1),y=!0;var se=f;try{for(j(ae),m=n(c);m!==null&&(!(m.expirationTime>ae)||X&&!z());){var we=m.callback;if(typeof we=="function"){m.callback=null,f=m.priorityLevel;var ve=we(m.expirationTime<=ae);ae=t.unstable_now(),typeof ve=="function"?m.callback=ve:m===n(c)&&r(c),j(ae)}else r(c);m=n(c)}if(m!==null)var Pe=!0;else{var D=n(u);D!==null&&ke(R,D.startTime-ae),Pe=!1}return Pe}finally{m=null,f=se,y=!1}}var L=!1,v=null,x=-1,N=5,C=-1;function z(){return!(t.unstable_now()-C<N)}function I(){if(v!==null){var X=t.unstable_now();C=X;var ae=!0;try{ae=v(!0,X)}finally{ae?T():(L=!1,v=null)}}else L=!1}var T;if(typeof w=="function")T=function(){w(I)};else if(typeof MessageChannel<"u"){var pe=new MessageChannel,de=pe.port2;pe.port1.onmessage=I,T=function(){de.postMessage(null)}}else T=function(){P(I,0)};function ye(X){v=X,L||(L=!0,T())}function ke(X,ae){x=P(function(){X(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,ye(O))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(X){switch(f){case 1:case 2:case 3:var ae=3;break;default:ae=f}var se=f;f=ae;try{return X()}finally{f=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,ae){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var se=f;f=X;try{return ae()}finally{f=se}},t.unstable_scheduleCallback=function(X,ae,se){var we=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?we+se:we):se=we,X){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=se+ve,X={id:h++,callback:ae,priorityLevel:X,startTime:se,expirationTime:ve,sortIndex:-1},se>we?(X.sortIndex=se,e(u,X),n(c)===null&&X===n(u)&&(A?(b(x),x=-1):A=!0,ke(R,se-we))):(X.sortIndex=ve,e(c,X),_||y||(_=!0,ye(O))),X},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(X){var ae=f;return function(){var se=f;f=ae;try{return X.apply(this,arguments)}finally{f=se}}}})(X1);Y1.exports=X1;var GN=Y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN=k,jn=GN;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J1=new Set,jo={};function as(t,e){Qs(t,e),Qs(t+"Capture",e)}function Qs(t,e){for(jo[t]=e,t=0;t<e.length;t++)J1.add(e[t])}var Nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=Object.prototype.hasOwnProperty,QN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tg={},Ig={};function YN(t){return Sh.call(Ig,t)?!0:Sh.call(Tg,t)?!1:QN.test(t)?Ig[t]=!0:(Tg[t]=!0,!1)}function XN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function JN(t,e,n,r){if(e===null||typeof e>"u"||XN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ln(t,e,n,r,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var $t={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$t[t]=new ln(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$t[e]=new ln(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$t[t]=new ln(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$t[t]=new ln(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$t[t]=new ln(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$t[t]=new ln(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$t[t]=new ln(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$t[t]=new ln(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$t[t]=new ln(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nm=/[\-:]([a-z])/g;function _m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nm,_m);$t[e]=new ln(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nm,_m);$t[e]=new ln(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nm,_m);$t[e]=new ln(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$t[t]=new ln(t,1,!1,t.toLowerCase(),null,!1,!1)});$t.xlinkHref=new ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$t[t]=new ln(t,1,!1,t.toLowerCase(),null,!0,!0)});function zm(t,e,n,r){var i=$t.hasOwnProperty(e)?$t[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(JN(e,n,i,r)&&(n=null),r||i===null?YN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mr=KN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),ws=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),Cm=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),Z1=Symbol.for("react.provider"),eb=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),Em=Symbol.for("react.memo"),qr=Symbol.for("react.lazy"),tb=Symbol.for("react.offscreen"),Ag=Symbol.iterator;function Da(t){return t===null||typeof t!="object"?null:(t=Ag&&t[Ag]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,wu;function Ka(t){if(wu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wu=e&&e[1]||""}return`
`+wu+t}var ku=!1;function ju(t,e){if(!t||ku)return"";ku=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{ku=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ka(t):""}function ZN(t){switch(t.tag){case 5:return Ka(t.type);case 16:return Ka("Lazy");case 13:return Ka("Suspense");case 19:return Ka("SuspenseList");case 0:case 2:case 15:return t=ju(t.type,!1),t;case 11:return t=ju(t.type.render,!1),t;case 1:return t=ju(t.type,!0),t;default:return""}}function Ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ks:return"Fragment";case ws:return"Portal";case Eh:return"Profiler";case Cm:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eb:return(t.displayName||"Context")+".Consumer";case Z1:return(t._context.displayName||"Context")+".Provider";case Sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Em:return e=t.displayName||null,e!==null?e:Ah(t.type)||"Memo";case qr:e=t._payload,t=t._init;try{return Ah(t(e))}catch{}}return null}function e4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ah(e);case 8:return e===Cm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function di(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t4(t){var e=nb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function El(t){t._valueTracker||(t._valueTracker=t4(t))}function rb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Sc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ph(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Pg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=di(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ib(t,e){e=e.checked,e!=null&&zm(t,"checked",e,!1)}function Rh(t,e){ib(t,e);var n=di(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dh(t,e.type,di(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dh(t,e,n){(e!=="number"||Sc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Qa=Array.isArray;function Ls(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+di(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Qa(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:di(n)}}function sb(t,e){var n=di(e.value),r=di(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Mg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ab(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Vh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ab(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tl,ob=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function No(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ro={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n4=["Webkit","ms","Moz","O"];Object.keys(ro).forEach(function(t){n4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ro[e]=ro[t]})});function lb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ro.hasOwnProperty(t)&&ro[t]?(""+e).trim():e+"px"}function cb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var r4=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lh(t,e){if(e){if(r4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function Oh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fh=null;function Tm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Bh=null,Os=null,Fs=null;function Vg(t){if(t=rl(t)){if(typeof Bh!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=_d(e),Bh(t.stateNode,t.type,e))}}function db(t){Os?Fs?Fs.push(t):Fs=[t]:Os=t}function ub(){if(Os){var t=Os,e=Fs;if(Fs=Os=null,Vg(t),e)for(t=0;t<e.length;t++)Vg(e[t])}}function hb(t,e){return t(e)}function mb(){}var Nu=!1;function fb(t,e,n){if(Nu)return t(e,n);Nu=!0;try{return hb(t,e,n)}finally{Nu=!1,(Os!==null||Fs!==null)&&(mb(),ub())}}function _o(t,e){var n=t.stateNode;if(n===null)return null;var r=_d(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var Uh=!1;if(Nr)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){Uh=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{Uh=!1}function i4(t,e,n,r,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var io=!1,Ec=null,Tc=!1,$h=null,s4={onError:function(t){io=!0,Ec=t}};function a4(t,e,n,r,i,a,o,l,c){io=!1,Ec=null,i4.apply(s4,arguments)}function o4(t,e,n,r,i,a,o,l,c){if(a4.apply(this,arguments),io){if(io){var u=Ec;io=!1,Ec=null}else throw Error(ie(198));Tc||(Tc=!0,$h=u)}}function os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Lg(t){if(os(t)!==t)throw Error(ie(188))}function l4(t){var e=t.alternate;if(!e){if(e=os(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Lg(i),t;if(a===r)return Lg(i),e;a=a.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function gb(t){return t=l4(t),t!==null?xb(t):null}function xb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xb(t);if(e!==null)return e;t=t.sibling}return null}var yb=jn.unstable_scheduleCallback,Og=jn.unstable_cancelCallback,c4=jn.unstable_shouldYield,d4=jn.unstable_requestPaint,vt=jn.unstable_now,u4=jn.unstable_getCurrentPriorityLevel,Im=jn.unstable_ImmediatePriority,vb=jn.unstable_UserBlockingPriority,Ic=jn.unstable_NormalPriority,h4=jn.unstable_LowPriority,bb=jn.unstable_IdlePriority,wd=null,ir=null;function m4(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(wd,t,void 0,(t.current.flags&128)===128)}catch{}}var Gn=Math.clz32?Math.clz32:g4,f4=Math.log,p4=Math.LN2;function g4(t){return t>>>=0,t===0?32:31-(f4(t)/p4|0)|0}var Il=64,Al=4194304;function Ya(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ac(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ya(l):(a&=o,a!==0&&(r=Ya(a)))}else o=n&~i,o!==0?r=Ya(o):a!==0&&(r=Ya(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Gn(e),i=1<<n,r|=t[n],e&=~i;return r}function x4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Gn(a),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=x4(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Wh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wb(){var t=Il;return Il<<=1,!(Il&4194240)&&(Il=64),t}function _u(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Gn(e),t[e]=n}function v4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Gn(n),a=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~a}}function Am(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ge=0;function kb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jb,Pm,Nb,_b,zb,qh=!1,Pl=[],Jr=null,Zr=null,ei=null,zo=new Map,Co=new Map,Gr=[],b4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Fg(t,e){switch(t){case"focusin":case"focusout":Jr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":ei=null;break;case"pointerover":case"pointerout":zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(e.pointerId)}}function Va(t,e,n,r,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},e!==null&&(e=rl(e),e!==null&&Pm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function w4(t,e,n,r,i){switch(e){case"focusin":return Jr=Va(Jr,t,e,n,r,i),!0;case"dragenter":return Zr=Va(Zr,t,e,n,r,i),!0;case"mouseover":return ei=Va(ei,t,e,n,r,i),!0;case"pointerover":var a=i.pointerId;return zo.set(a,Va(zo.get(a)||null,t,e,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Co.set(a,Va(Co.get(a)||null,t,e,n,r,i)),!0}return!1}function Cb(t){var e=Li(t.target);if(e!==null){var n=os(e);if(n!==null){if(e=n.tag,e===13){if(e=pb(n),e!==null){t.blockedOn=e,zb(t.priority,function(){Nb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ic(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fh=r,n.target.dispatchEvent(r),Fh=null}else return e=rl(n),e!==null&&Pm(e),t.blockedOn=n,!1;e.shift()}return!0}function Bg(t,e,n){ic(t)&&n.delete(e)}function k4(){qh=!1,Jr!==null&&ic(Jr)&&(Jr=null),Zr!==null&&ic(Zr)&&(Zr=null),ei!==null&&ic(ei)&&(ei=null),zo.forEach(Bg),Co.forEach(Bg)}function La(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,jn.unstable_scheduleCallback(jn.unstable_NormalPriority,k4)))}function So(t){function e(i){return La(i,t)}if(0<Pl.length){La(Pl[0],t);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Jr!==null&&La(Jr,t),Zr!==null&&La(Zr,t),ei!==null&&La(ei,t),zo.forEach(e),Co.forEach(e),n=0;n<Gr.length;n++)r=Gr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Gr.length&&(n=Gr[0],n.blockedOn===null);)Cb(n),n.blockedOn===null&&Gr.shift()}var Bs=Mr.ReactCurrentBatchConfig,Pc=!0;function j4(t,e,n,r){var i=Ge,a=Bs.transition;Bs.transition=null;try{Ge=1,Rm(t,e,n,r)}finally{Ge=i,Bs.transition=a}}function N4(t,e,n,r){var i=Ge,a=Bs.transition;Bs.transition=null;try{Ge=4,Rm(t,e,n,r)}finally{Ge=i,Bs.transition=a}}function Rm(t,e,n,r){if(Pc){var i=Hh(t,e,n,r);if(i===null)Du(t,e,r,Rc,n),Fg(t,r);else if(w4(i,t,e,n,r))r.stopPropagation();else if(Fg(t,r),e&4&&-1<b4.indexOf(t)){for(;i!==null;){var a=rl(i);if(a!==null&&jb(a),a=Hh(t,e,n,r),a===null&&Du(t,e,r,Rc,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else Du(t,e,r,null,n)}}var Rc=null;function Hh(t,e,n,r){if(Rc=null,t=Tm(r),t=Li(t),t!==null)if(e=os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Rc=t,null}function Sb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(u4()){case Im:return 1;case vb:return 4;case Ic:case h4:return 16;case bb:return 536870912;default:return 16}default:return 16}}var Qr=null,Dm=null,sc=null;function Eb(){if(sc)return sc;var t,e=Dm,n=e.length,r,i="value"in Qr?Qr.value:Qr.textContent,a=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[a-r];r++);return sc=i.slice(t,1<r?1-r:void 0)}function ac(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function Ug(){return!1}function _n(t){function e(n,r,i,a,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Rl:Ug,this.isPropagationStopped=Ug,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var ua={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mm=_n(ua),nl=ht({},ua,{view:0,detail:0}),_4=_n(nl),zu,Cu,Oa,kd=ht({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oa&&(Oa&&t.type==="mousemove"?(zu=t.screenX-Oa.screenX,Cu=t.screenY-Oa.screenY):Cu=zu=0,Oa=t),zu)},movementY:function(t){return"movementY"in t?t.movementY:Cu}}),$g=_n(kd),z4=ht({},kd,{dataTransfer:0}),C4=_n(z4),S4=ht({},nl,{relatedTarget:0}),Su=_n(S4),E4=ht({},ua,{animationName:0,elapsedTime:0,pseudoElement:0}),T4=_n(E4),I4=ht({},ua,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),A4=_n(I4),P4=ht({},ua,{data:0}),Wg=_n(P4),R4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},D4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},M4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=M4[t])?!!e[t]:!1}function Vm(){return V4}var L4=ht({},nl,{key:function(t){if(t.key){var e=R4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ac(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?D4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vm,charCode:function(t){return t.type==="keypress"?ac(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ac(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),O4=_n(L4),F4=ht({},kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=_n(F4),B4=ht({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vm}),U4=_n(B4),$4=ht({},ua,{propertyName:0,elapsedTime:0,pseudoElement:0}),W4=_n($4),q4=ht({},kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H4=_n(q4),G4=[9,13,27,32],Lm=Nr&&"CompositionEvent"in window,so=null;Nr&&"documentMode"in document&&(so=document.documentMode);var K4=Nr&&"TextEvent"in window&&!so,Tb=Nr&&(!Lm||so&&8<so&&11>=so),Hg=" ",Gg=!1;function Ib(t,e){switch(t){case"keyup":return G4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ab(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var js=!1;function Q4(t,e){switch(t){case"compositionend":return Ab(e);case"keypress":return e.which!==32?null:(Gg=!0,Hg);case"textInput":return t=e.data,t===Hg&&Gg?null:t;default:return null}}function Y4(t,e){if(js)return t==="compositionend"||!Lm&&Ib(t,e)?(t=Eb(),sc=Dm=Qr=null,js=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tb&&e.locale!=="ko"?null:e.data;default:return null}}var X4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!X4[t.type]:e==="textarea"}function Pb(t,e,n,r){db(r),e=Dc(e,"onChange"),0<e.length&&(n=new Mm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ao=null,Eo=null;function J4(t){Wb(t,0)}function jd(t){var e=zs(t);if(rb(e))return t}function Z4(t,e){if(t==="change")return e}var Rb=!1;if(Nr){var Eu;if(Nr){var Tu="oninput"in document;if(!Tu){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),Tu=typeof Qg.oninput=="function"}Eu=Tu}else Eu=!1;Rb=Eu&&(!document.documentMode||9<document.documentMode)}function Yg(){ao&&(ao.detachEvent("onpropertychange",Db),Eo=ao=null)}function Db(t){if(t.propertyName==="value"&&jd(Eo)){var e=[];Pb(e,Eo,t,Tm(t)),fb(J4,e)}}function e_(t,e,n){t==="focusin"?(Yg(),ao=e,Eo=n,ao.attachEvent("onpropertychange",Db)):t==="focusout"&&Yg()}function t_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jd(Eo)}function n_(t,e){if(t==="click")return jd(e)}function r_(t,e){if(t==="input"||t==="change")return jd(e)}function i_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qn=typeof Object.is=="function"?Object.is:i_;function To(t,e){if(Qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Sh.call(e,i)||!Qn(t[i],e[i]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Jg(t,e){var n=Xg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xg(n)}}function Mb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vb(){for(var t=window,e=Sc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Sc(t.document)}return e}function Om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function s_(t){var e=Vb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Mb(n.ownerDocument.documentElement,n)){if(r!==null&&Om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!t.extend&&a>r&&(i=r,r=a,a=i),i=Jg(n,a);var o=Jg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var a_=Nr&&"documentMode"in document&&11>=document.documentMode,Ns=null,Gh=null,oo=null,Kh=!1;function Zg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||Ns==null||Ns!==Sc(r)||(r=Ns,"selectionStart"in r&&Om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),oo&&To(oo,r)||(oo=r,r=Dc(Gh,"onSelect"),0<r.length&&(e=new Mm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ns)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _s={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},Iu={},Lb={};Nr&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function Nd(t){if(Iu[t])return Iu[t];if(!_s[t])return t;var e=_s[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lb)return Iu[t]=e[n];return t}var Ob=Nd("animationend"),Fb=Nd("animationiteration"),Bb=Nd("animationstart"),Ub=Nd("transitionend"),$b=new Map,ex="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wi(t,e){$b.set(t,e),as(e,[t])}for(var Au=0;Au<ex.length;Au++){var Pu=ex[Au],o_=Pu.toLowerCase(),l_=Pu[0].toUpperCase()+Pu.slice(1);wi(o_,"on"+l_)}wi(Ob,"onAnimationEnd");wi(Fb,"onAnimationIteration");wi(Bb,"onAnimationStart");wi("dblclick","onDoubleClick");wi("focusin","onFocus");wi("focusout","onBlur");wi(Ub,"onTransitionEnd");Qs("onMouseEnter",["mouseout","mouseover"]);Qs("onMouseLeave",["mouseout","mouseover"]);Qs("onPointerEnter",["pointerout","pointerover"]);Qs("onPointerLeave",["pointerout","pointerover"]);as("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));as("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));as("onBeforeInput",["compositionend","keypress","textInput","paste"]);as("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));as("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));as("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xa));function tx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,o4(r,e,void 0,t),t.currentTarget=null}function Wb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;tx(i,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;tx(i,l,u),a=c}}}if(Tc)throw t=$h,Tc=!1,$h=null,t}function nt(t,e){var n=e[Zh];n===void 0&&(n=e[Zh]=new Set);var r=t+"__bubble";n.has(r)||(qb(e,t,2,!1),n.add(r))}function Ru(t,e,n){var r=0;e&&(r|=4),qb(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Io(t){if(!t[Ml]){t[Ml]=!0,J1.forEach(function(n){n!=="selectionchange"&&(c_.has(n)||Ru(n,!1,t),Ru(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,Ru("selectionchange",!1,e))}}function qb(t,e,n,r){switch(Sb(e)){case 1:var i=j4;break;case 4:i=N4;break;default:i=Rm}n=i.bind(null,e,n,t),i=void 0,!Uh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Du(t,e,n,r,i){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Li(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}fb(function(){var u=a,h=Tm(n),m=[];e:{var f=$b.get(t);if(f!==void 0){var y=Mm,_=t;switch(t){case"keypress":if(ac(n)===0)break e;case"keydown":case"keyup":y=O4;break;case"focusin":_="focus",y=Su;break;case"focusout":_="blur",y=Su;break;case"beforeblur":case"afterblur":y=Su;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=C4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=U4;break;case Ob:case Fb:case Bb:y=T4;break;case Ub:y=W4;break;case"scroll":y=_4;break;case"wheel":y=H4;break;case"copy":case"cut":case"paste":y=A4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=qg}var A=(e&4)!==0,P=!A&&t==="scroll",b=A?f!==null?f+"Capture":null:f;A=[];for(var w=u,j;w!==null;){j=w;var R=j.stateNode;if(j.tag===5&&R!==null&&(j=R,b!==null&&(R=_o(w,b),R!=null&&A.push(Ao(w,R,j)))),P)break;w=w.return}0<A.length&&(f=new y(f,_,null,n,h),m.push({event:f,listeners:A}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==Fh&&(_=n.relatedTarget||n.fromElement)&&(Li(_)||_[_r]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=u,_=_?Li(_):null,_!==null&&(P=os(_),_!==P||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=u),y!==_)){if(A=$g,R="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=qg,R="onPointerLeave",b="onPointerEnter",w="pointer"),P=y==null?f:zs(y),j=_==null?f:zs(_),f=new A(R,w+"leave",y,n,h),f.target=P,f.relatedTarget=j,R=null,Li(h)===u&&(A=new A(b,w+"enter",_,n,h),A.target=j,A.relatedTarget=P,R=A),P=R,y&&_)t:{for(A=y,b=_,w=0,j=A;j;j=gs(j))w++;for(j=0,R=b;R;R=gs(R))j++;for(;0<w-j;)A=gs(A),w--;for(;0<j-w;)b=gs(b),j--;for(;w--;){if(A===b||b!==null&&A===b.alternate)break t;A=gs(A),b=gs(b)}A=null}else A=null;y!==null&&nx(m,f,y,A,!1),_!==null&&P!==null&&nx(m,P,_,A,!0)}}e:{if(f=u?zs(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var O=Z4;else if(Kg(f))if(Rb)O=r_;else{O=t_;var L=e_}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(O=n_);if(O&&(O=O(t,u))){Pb(m,O,n,h);break e}L&&L(t,f,u),t==="focusout"&&(L=f._wrapperState)&&L.controlled&&f.type==="number"&&Dh(f,"number",f.value)}switch(L=u?zs(u):window,t){case"focusin":(Kg(L)||L.contentEditable==="true")&&(Ns=L,Gh=u,oo=null);break;case"focusout":oo=Gh=Ns=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,Zg(m,n,h);break;case"selectionchange":if(a_)break;case"keydown":case"keyup":Zg(m,n,h)}var v;if(Lm)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else js?Ib(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Tb&&n.locale!=="ko"&&(js||x!=="onCompositionStart"?x==="onCompositionEnd"&&js&&(v=Eb()):(Qr=h,Dm="value"in Qr?Qr.value:Qr.textContent,js=!0)),L=Dc(u,x),0<L.length&&(x=new Wg(x,t,null,n,h),m.push({event:x,listeners:L}),v?x.data=v:(v=Ab(n),v!==null&&(x.data=v)))),(v=K4?Q4(t,n):Y4(t,n))&&(u=Dc(u,"onBeforeInput"),0<u.length&&(h=new Wg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:u}),h.data=v))}Wb(m,e)})}function Ao(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Dc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=_o(t,n),a!=null&&r.unshift(Ao(t,a,i)),a=_o(t,e),a!=null&&r.push(Ao(t,a,i))),t=t.return}return r}function gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nx(t,e,n,r,i){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,i?(c=_o(n,a),c!=null&&o.unshift(Ao(n,c,l))):i||(c=_o(n,a),c!=null&&o.push(Ao(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var d_=/\r\n?/g,u_=/\u0000|\uFFFD/g;function rx(t){return(typeof t=="string"?t:""+t).replace(d_,`
`).replace(u_,"")}function Vl(t,e,n){if(e=rx(e),rx(t)!==e&&n)throw Error(ie(425))}function Mc(){}var Qh=null,Yh=null;function Xh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,h_=typeof clearTimeout=="function"?clearTimeout:void 0,ix=typeof Promise=="function"?Promise:void 0,m_=typeof queueMicrotask=="function"?queueMicrotask:typeof ix<"u"?function(t){return ix.resolve(null).then(t).catch(f_)}:Jh;function f_(t){setTimeout(function(){throw t})}function Mu(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),So(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);So(e)}function ti(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ha=Math.random().toString(36).slice(2),rr="__reactFiber$"+ha,Po="__reactProps$"+ha,_r="__reactContainer$"+ha,Zh="__reactEvents$"+ha,p_="__reactListeners$"+ha,g_="__reactHandles$"+ha;function Li(t){var e=t[rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_r]||n[rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=sx(t);t!==null;){if(n=t[rr])return n;t=sx(t)}return e}t=n,n=t.parentNode}return null}function rl(t){return t=t[rr]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function _d(t){return t[Po]||null}var e0=[],Cs=-1;function ki(t){return{current:t}}function it(t){0>Cs||(t.current=e0[Cs],e0[Cs]=null,Cs--)}function Je(t,e){Cs++,e0[Cs]=t.current,t.current=e}var ui={},Jt=ki(ui),pn=ki(!1),Yi=ui;function Ys(t,e){var n=t.type.contextTypes;if(!n)return ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function gn(t){return t=t.childContextTypes,t!=null}function Vc(){it(pn),it(Jt)}function ax(t,e,n){if(Jt.current!==ui)throw Error(ie(168));Je(Jt,e),Je(pn,n)}function Hb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ie(108,e4(t)||"Unknown",i));return ht({},n,r)}function Lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ui,Yi=Jt.current,Je(Jt,t),Je(pn,pn.current),!0}function ox(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=Hb(t,e,Yi),r.__reactInternalMemoizedMergedChildContext=t,it(pn),it(Jt),Je(Jt,t)):it(pn),Je(pn,n)}var vr=null,zd=!1,Vu=!1;function Gb(t){vr===null?vr=[t]:vr.push(t)}function x_(t){zd=!0,Gb(t)}function ji(){if(!Vu&&vr!==null){Vu=!0;var t=0,e=Ge;try{var n=vr;for(Ge=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}vr=null,zd=!1}catch(i){throw vr!==null&&(vr=vr.slice(t+1)),yb(Im,ji),i}finally{Ge=e,Vu=!1}}return null}var Ss=[],Es=0,Oc=null,Fc=0,Cn=[],Sn=0,Xi=null,br=1,wr="";function Pi(t,e){Ss[Es++]=Fc,Ss[Es++]=Oc,Oc=t,Fc=e}function Kb(t,e,n){Cn[Sn++]=br,Cn[Sn++]=wr,Cn[Sn++]=Xi,Xi=t;var r=br;t=wr;var i=32-Gn(r)-1;r&=~(1<<i),n+=1;var a=32-Gn(e)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,br=1<<32-Gn(e)+i|n<<i|r,wr=a+t}else br=1<<a|n<<i|r,wr=t}function Fm(t){t.return!==null&&(Pi(t,1),Kb(t,1,0))}function Bm(t){for(;t===Oc;)Oc=Ss[--Es],Ss[Es]=null,Fc=Ss[--Es],Ss[Es]=null;for(;t===Xi;)Xi=Cn[--Sn],Cn[Sn]=null,wr=Cn[--Sn],Cn[Sn]=null,br=Cn[--Sn],Cn[Sn]=null}var wn=null,bn=null,at=!1,qn=null;function Qb(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function lx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,bn=ti(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,bn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xi!==null?{id:br,overflow:wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,bn=null,!0):!1;default:return!1}}function t0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function n0(t){if(at){var e=bn;if(e){var n=e;if(!lx(t,e)){if(t0(t))throw Error(ie(418));e=ti(n.nextSibling);var r=wn;e&&lx(t,e)?Qb(r,n):(t.flags=t.flags&-4097|2,at=!1,wn=t)}}else{if(t0(t))throw Error(ie(418));t.flags=t.flags&-4097|2,at=!1,wn=t}}}function cx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Ll(t){if(t!==wn)return!1;if(!at)return cx(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Xh(t.type,t.memoizedProps)),e&&(e=bn)){if(t0(t))throw Yb(),Error(ie(418));for(;e;)Qb(t,e),e=ti(e.nextSibling)}if(cx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){bn=ti(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}bn=null}}else bn=wn?ti(t.stateNode.nextSibling):null;return!0}function Yb(){for(var t=bn;t;)t=ti(t.nextSibling)}function Xs(){bn=wn=null,at=!1}function Um(t){qn===null?qn=[t]:qn.push(t)}var y_=Mr.ReactCurrentBatchConfig;function Fa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var i=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Ol(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dx(t){var e=t._init;return e(t._payload)}function Xb(t){function e(b,w){if(t){var j=b.deletions;j===null?(b.deletions=[w],b.flags|=16):j.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function i(b,w){return b=si(b,w),b.index=0,b.sibling=null,b}function a(b,w,j){return b.index=j,t?(j=b.alternate,j!==null?(j=j.index,j<w?(b.flags|=2,w):j):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,w,j,R){return w===null||w.tag!==6?(w=Wu(j,b.mode,R),w.return=b,w):(w=i(w,j),w.return=b,w)}function c(b,w,j,R){var O=j.type;return O===ks?h(b,w,j.props.children,R,j.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===qr&&dx(O)===w.type)?(R=i(w,j.props),R.ref=Fa(b,w,j),R.return=b,R):(R=mc(j.type,j.key,j.props,null,b.mode,R),R.ref=Fa(b,w,j),R.return=b,R)}function u(b,w,j,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=qu(j,b.mode,R),w.return=b,w):(w=i(w,j.children||[]),w.return=b,w)}function h(b,w,j,R,O){return w===null||w.tag!==7?(w=Hi(j,b.mode,R,O),w.return=b,w):(w=i(w,j),w.return=b,w)}function m(b,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Wu(""+w,b.mode,j),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sl:return j=mc(w.type,w.key,w.props,null,b.mode,j),j.ref=Fa(b,null,w),j.return=b,j;case ws:return w=qu(w,b.mode,j),w.return=b,w;case qr:var R=w._init;return m(b,R(w._payload),j)}if(Qa(w)||Da(w))return w=Hi(w,b.mode,j,null),w.return=b,w;Ol(b,w)}return null}function f(b,w,j,R){var O=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return O!==null?null:l(b,w,""+j,R);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Sl:return j.key===O?c(b,w,j,R):null;case ws:return j.key===O?u(b,w,j,R):null;case qr:return O=j._init,f(b,w,O(j._payload),R)}if(Qa(j)||Da(j))return O!==null?null:h(b,w,j,R,null);Ol(b,j)}return null}function y(b,w,j,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(j)||null,l(w,b,""+R,O);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Sl:return b=b.get(R.key===null?j:R.key)||null,c(w,b,R,O);case ws:return b=b.get(R.key===null?j:R.key)||null,u(w,b,R,O);case qr:var L=R._init;return y(b,w,j,L(R._payload),O)}if(Qa(R)||Da(R))return b=b.get(j)||null,h(w,b,R,O,null);Ol(w,R)}return null}function _(b,w,j,R){for(var O=null,L=null,v=w,x=w=0,N=null;v!==null&&x<j.length;x++){v.index>x?(N=v,v=null):N=v.sibling;var C=f(b,v,j[x],R);if(C===null){v===null&&(v=N);break}t&&v&&C.alternate===null&&e(b,v),w=a(C,w,x),L===null?O=C:L.sibling=C,L=C,v=N}if(x===j.length)return n(b,v),at&&Pi(b,x),O;if(v===null){for(;x<j.length;x++)v=m(b,j[x],R),v!==null&&(w=a(v,w,x),L===null?O=v:L.sibling=v,L=v);return at&&Pi(b,x),O}for(v=r(b,v);x<j.length;x++)N=y(v,b,x,j[x],R),N!==null&&(t&&N.alternate!==null&&v.delete(N.key===null?x:N.key),w=a(N,w,x),L===null?O=N:L.sibling=N,L=N);return t&&v.forEach(function(z){return e(b,z)}),at&&Pi(b,x),O}function A(b,w,j,R){var O=Da(j);if(typeof O!="function")throw Error(ie(150));if(j=O.call(j),j==null)throw Error(ie(151));for(var L=O=null,v=w,x=w=0,N=null,C=j.next();v!==null&&!C.done;x++,C=j.next()){v.index>x?(N=v,v=null):N=v.sibling;var z=f(b,v,C.value,R);if(z===null){v===null&&(v=N);break}t&&v&&z.alternate===null&&e(b,v),w=a(z,w,x),L===null?O=z:L.sibling=z,L=z,v=N}if(C.done)return n(b,v),at&&Pi(b,x),O;if(v===null){for(;!C.done;x++,C=j.next())C=m(b,C.value,R),C!==null&&(w=a(C,w,x),L===null?O=C:L.sibling=C,L=C);return at&&Pi(b,x),O}for(v=r(b,v);!C.done;x++,C=j.next())C=y(v,b,x,C.value,R),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?x:C.key),w=a(C,w,x),L===null?O=C:L.sibling=C,L=C);return t&&v.forEach(function(I){return e(b,I)}),at&&Pi(b,x),O}function P(b,w,j,R){if(typeof j=="object"&&j!==null&&j.type===ks&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Sl:e:{for(var O=j.key,L=w;L!==null;){if(L.key===O){if(O=j.type,O===ks){if(L.tag===7){n(b,L.sibling),w=i(L,j.props.children),w.return=b,b=w;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===qr&&dx(O)===L.type){n(b,L.sibling),w=i(L,j.props),w.ref=Fa(b,L,j),w.return=b,b=w;break e}n(b,L);break}else e(b,L);L=L.sibling}j.type===ks?(w=Hi(j.props.children,b.mode,R,j.key),w.return=b,b=w):(R=mc(j.type,j.key,j.props,null,b.mode,R),R.ref=Fa(b,w,j),R.return=b,b=R)}return o(b);case ws:e:{for(L=j.key;w!==null;){if(w.key===L)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){n(b,w.sibling),w=i(w,j.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=qu(j,b.mode,R),w.return=b,b=w}return o(b);case qr:return L=j._init,P(b,w,L(j._payload),R)}if(Qa(j))return _(b,w,j,R);if(Da(j))return A(b,w,j,R);Ol(b,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(n(b,w.sibling),w=i(w,j),w.return=b,b=w):(n(b,w),w=Wu(j,b.mode,R),w.return=b,b=w),o(b)):n(b,w)}return P}var Js=Xb(!0),Jb=Xb(!1),Bc=ki(null),Uc=null,Ts=null,$m=null;function Wm(){$m=Ts=Uc=null}function qm(t){var e=Bc.current;it(Bc),t._currentValue=e}function r0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Us(t,e){Uc=t,$m=Ts=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if($m!==t)if(t={context:t,memoizedValue:e,next:null},Ts===null){if(Uc===null)throw Error(ie(308));Ts=t,Uc.dependencies={lanes:0,firstContext:t}}else Ts=Ts.next=t;return e}var Oi=null;function Hm(t){Oi===null?Oi=[t]:Oi.push(t)}function Zb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hm(e)):(n.next=i.next,i.next=n),e.interleaved=n,zr(t,r)}function zr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Hr=!1;function Gm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ew(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ni(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,$e&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,zr(t,n)}return i=r.interleaved,i===null?(e.next=e,Hm(r)):(e.next=i.next,i.next=e),r.interleaved=e,zr(t,n)}function oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Am(t,n)}}function ux(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?i=a=e:a=a.next=e}else i=a=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function $c(t,e,n,r){var i=t.updateQueue;Hr=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var m=i.baseState;o=0,h=u=c=null,l=a;do{var f=l.lane,y=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,A=l;switch(f=e,y=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){m=_.call(y,m,f);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,f=typeof _=="function"?_.call(y,m,f):_,f==null)break e;m=ht({},m,f);break e;case 2:Hr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=m):h=h.next=y,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=m),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Zi|=o,t.lanes=o,t.memoizedState=m}}function hx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var il={},sr=ki(il),Ro=ki(il),Do=ki(il);function Fi(t){if(t===il)throw Error(ie(174));return t}function Km(t,e){switch(Je(Do,e),Je(Ro,t),Je(sr,il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Vh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Vh(e,t)}it(sr),Je(sr,e)}function Zs(){it(sr),it(Ro),it(Do)}function tw(t){Fi(Do.current);var e=Fi(sr.current),n=Vh(e,t.type);e!==n&&(Je(Ro,t),Je(sr,n))}function Qm(t){Ro.current===t&&(it(sr),it(Ro))}var dt=ki(0);function Wc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lu=[];function Ym(){for(var t=0;t<Lu.length;t++)Lu[t]._workInProgressVersionPrimary=null;Lu.length=0}var lc=Mr.ReactCurrentDispatcher,Ou=Mr.ReactCurrentBatchConfig,Ji=0,ut=null,Et=null,Dt=null,qc=!1,lo=!1,Mo=0,v_=0;function Ht(){throw Error(ie(321))}function Xm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qn(t[n],e[n]))return!1;return!0}function Jm(t,e,n,r,i,a){if(Ji=a,ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lc.current=t===null||t.memoizedState===null?j_:N_,t=n(r,i),lo){a=0;do{if(lo=!1,Mo=0,25<=a)throw Error(ie(301));a+=1,Dt=Et=null,e.updateQueue=null,lc.current=__,t=n(r,i)}while(lo)}if(lc.current=Hc,e=Et!==null&&Et.next!==null,Ji=0,Dt=Et=ut=null,qc=!1,e)throw Error(ie(300));return t}function Zm(){var t=Mo!==0;return Mo=0,t}function tr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ut.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function Vn(){if(Et===null){var t=ut.alternate;t=t!==null?t.memoizedState:null}else t=Et.next;var e=Dt===null?ut.memoizedState:Dt.next;if(e!==null)Dt=e,Et=t;else{if(t===null)throw Error(ie(310));Et=t,t={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Dt===null?ut.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function Vo(t,e){return typeof e=="function"?e(t):e}function Fu(t){var e=Vn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=Et,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((Ji&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var m={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=m,o=r):c=c.next=m,ut.lanes|=h,Zi|=h}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,Qn(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do a=i.lane,ut.lanes|=a,Zi|=a,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bu(t){var e=Vn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,a=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);Qn(a,e.memoizedState)||(mn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function nw(){}function rw(t,e){var n=ut,r=Vn(),i=e(),a=!Qn(r.memoizedState,i);if(a&&(r.memoizedState=i,mn=!0),r=r.queue,ef(aw.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,Lo(9,sw.bind(null,n,r,i,e),void 0,null),Mt===null)throw Error(ie(349));Ji&30||iw(n,e,i)}return i}function iw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sw(t,e,n,r){e.value=n,e.getSnapshot=r,ow(e)&&lw(t)}function aw(t,e,n){return n(function(){ow(e)&&lw(t)})}function ow(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qn(t,n)}catch{return!0}}function lw(t){var e=zr(t,1);e!==null&&Kn(e,t,1,-1)}function mx(t){var e=tr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:t},e.queue=t,t=t.dispatch=k_.bind(null,ut,t),[e.memoizedState,t]}function Lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ut.updateQueue,e===null?(e={lastEffect:null,stores:null},ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cw(){return Vn().memoizedState}function cc(t,e,n,r){var i=tr();ut.flags|=t,i.memoizedState=Lo(1|e,n,void 0,r===void 0?null:r)}function Cd(t,e,n,r){var i=Vn();r=r===void 0?null:r;var a=void 0;if(Et!==null){var o=Et.memoizedState;if(a=o.destroy,r!==null&&Xm(r,o.deps)){i.memoizedState=Lo(e,n,a,r);return}}ut.flags|=t,i.memoizedState=Lo(1|e,n,a,r)}function fx(t,e){return cc(8390656,8,t,e)}function ef(t,e){return Cd(2048,8,t,e)}function dw(t,e){return Cd(4,2,t,e)}function uw(t,e){return Cd(4,4,t,e)}function hw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function mw(t,e,n){return n=n!=null?n.concat([t]):null,Cd(4,4,hw.bind(null,e,t),n)}function tf(){}function fw(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pw(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gw(t,e,n){return Ji&21?(Qn(n,e)||(n=wb(),ut.lanes|=n,Zi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function b_(t,e){var n=Ge;Ge=n!==0&&4>n?n:4,t(!0);var r=Ou.transition;Ou.transition={};try{t(!1),e()}finally{Ge=n,Ou.transition=r}}function xw(){return Vn().memoizedState}function w_(t,e,n){var r=ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yw(t))vw(e,n);else if(n=Zb(t,e,n,r),n!==null){var i=sn();Kn(n,t,r,i),bw(n,e,r)}}function k_(t,e,n){var r=ii(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yw(t))vw(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(i.hasEagerState=!0,i.eagerState=l,Qn(l,o)){var c=e.interleaved;c===null?(i.next=i,Hm(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Zb(t,e,i,r),n!==null&&(i=sn(),Kn(n,t,r,i),bw(n,e,r))}}function yw(t){var e=t.alternate;return t===ut||e!==null&&e===ut}function vw(t,e){lo=qc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Am(t,n)}}var Hc={readContext:Mn,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},j_={readContext:Mn,useCallback:function(t,e){return tr().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:fx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cc(4194308,4,hw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return cc(4,2,t,e)},useMemo:function(t,e){var n=tr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=tr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=w_.bind(null,ut,t),[r.memoizedState,t]},useRef:function(t){var e=tr();return t={current:t},e.memoizedState=t},useState:mx,useDebugValue:tf,useDeferredValue:function(t){return tr().memoizedState=t},useTransition:function(){var t=mx(!1),e=t[0];return t=b_.bind(null,t[1]),tr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ut,i=tr();if(at){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),Mt===null)throw Error(ie(349));Ji&30||iw(r,e,n)}i.memoizedState=n;var a={value:n,getSnapshot:e};return i.queue=a,fx(aw.bind(null,r,a,t),[t]),r.flags|=2048,Lo(9,sw.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=tr(),e=Mt.identifierPrefix;if(at){var n=wr,r=br;n=(r&~(1<<32-Gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=v_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},N_={readContext:Mn,useCallback:fw,useContext:Mn,useEffect:ef,useImperativeHandle:mw,useInsertionEffect:dw,useLayoutEffect:uw,useMemo:pw,useReducer:Fu,useRef:cw,useState:function(){return Fu(Vo)},useDebugValue:tf,useDeferredValue:function(t){var e=Vn();return gw(e,Et.memoizedState,t)},useTransition:function(){var t=Fu(Vo)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:rw,useId:xw,unstable_isNewReconciler:!1},__={readContext:Mn,useCallback:fw,useContext:Mn,useEffect:ef,useImperativeHandle:mw,useInsertionEffect:dw,useLayoutEffect:uw,useMemo:pw,useReducer:Bu,useRef:cw,useState:function(){return Bu(Vo)},useDebugValue:tf,useDeferredValue:function(t){var e=Vn();return Et===null?e.memoizedState=t:gw(e,Et.memoizedState,t)},useTransition:function(){var t=Bu(Vo)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:rw,useId:xw,unstable_isNewReconciler:!1};function $n(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function i0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sd={isMounted:function(t){return(t=t._reactInternals)?os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=sn(),i=ii(t),a=kr(r,i);a.payload=e,n!=null&&(a.callback=n),e=ni(t,a,i),e!==null&&(Kn(e,t,i,r),oc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=sn(),i=ii(t),a=kr(r,i);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=ni(t,a,i),e!==null&&(Kn(e,t,i,r),oc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),r=ii(t),i=kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=ni(t,i,r),e!==null&&(Kn(e,t,r,n),oc(e,t,r))}};function px(t,e,n,r,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!To(n,r)||!To(i,a):!0}function ww(t,e,n){var r=!1,i=ui,a=e.contextType;return typeof a=="object"&&a!==null?a=Mn(a):(i=gn(e)?Yi:Jt.current,r=e.contextTypes,a=(r=r!=null)?Ys(t,i):ui),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function gx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Sd.enqueueReplaceState(e,e.state,null)}function s0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Gm(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=Mn(a):(a=gn(e)?Yi:Jt.current,i.context=Ys(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(i0(t,e,a,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Sd.enqueueReplaceState(i,i.state,null),$c(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ea(t,e){try{var n="",r=e;do n+=ZN(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function Uu(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function a0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var z_=typeof WeakMap=="function"?WeakMap:Map;function kw(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kc||(Kc=!0,g0=r),a0(t,e)},n}function jw(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){a0(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){a0(t,e),typeof r!="function"&&(ri===null?ri=new Set([this]):ri.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function xx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new z_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=F_.bind(null,t,e,n),e.then(t,t))}function yx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function vx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,ni(n,e,1))),n.lanes|=1),t)}var C_=Mr.ReactCurrentOwner,mn=!1;function tn(t,e,n,r){e.child=t===null?Jb(e,null,n,r):Js(e,t.child,n,r)}function bx(t,e,n,r,i){n=n.render;var a=e.ref;return Us(e,i),r=Jm(t,e,n,r,a,i),n=Zm(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(at&&n&&Fm(e),e.flags|=1,tn(t,e,r,i),e.child)}function wx(t,e,n,r,i){if(t===null){var a=n.type;return typeof a=="function"&&!df(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Nw(t,e,a,r,i)):(t=mc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:To,n(o,r)&&t.ref===e.ref)return Cr(t,e,i)}return e.flags|=1,t=si(a,r),t.ref=e.ref,t.return=e,e.child=t}function Nw(t,e,n,r,i){if(t!==null){var a=t.memoizedProps;if(To(a,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=a,(t.lanes&i)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,Cr(t,e,i)}return o0(t,e,n,r,i)}function _w(t,e,n){var r=e.pendingProps,i=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(As,vn),vn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(As,vn),vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Je(As,vn),vn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Je(As,vn),vn|=r;return tn(t,e,i,n),e.child}function zw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function o0(t,e,n,r,i){var a=gn(n)?Yi:Jt.current;return a=Ys(e,a),Us(e,i),n=Jm(t,e,n,r,a,i),r=Zm(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Cr(t,e,i)):(at&&r&&Fm(e),e.flags|=1,tn(t,e,n,i),e.child)}function kx(t,e,n,r,i){if(gn(n)){var a=!0;Lc(e)}else a=!1;if(Us(e,i),e.stateNode===null)dc(t,e),ww(e,n,r),s0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Mn(u):(u=gn(n)?Yi:Jt.current,u=Ys(e,u));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&gx(e,o,r,u),Hr=!1;var f=e.memoizedState;o.state=f,$c(e,r,o,i),c=e.memoizedState,l!==r||f!==c||pn.current||Hr?(typeof h=="function"&&(i0(e,n,h,r),c=e.memoizedState),(l=Hr||px(e,n,l,r,f,c,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,ew(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:$n(e.type,l),o.props=u,m=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Mn(c):(c=gn(n)?Yi:Jt.current,c=Ys(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||f!==c)&&gx(e,o,r,c),Hr=!1,f=e.memoizedState,o.state=f,$c(e,r,o,i);var _=e.memoizedState;l!==m||f!==_||pn.current||Hr?(typeof y=="function"&&(i0(e,n,y,r),_=e.memoizedState),(u=Hr||px(e,n,u,r,f,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return l0(t,e,n,r,a,i)}function l0(t,e,n,r,i,a){zw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ox(e,n,!1),Cr(t,e,a);r=e.stateNode,C_.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Js(e,t.child,null,a),e.child=Js(e,null,l,a)):tn(t,e,l,a),e.memoizedState=r.state,i&&ox(e,n,!0),e.child}function Cw(t){var e=t.stateNode;e.pendingContext?ax(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ax(t,e.context,!1),Km(t,e.containerInfo)}function jx(t,e,n,r,i){return Xs(),Um(i),e.flags|=256,tn(t,e,n,r),e.child}var c0={dehydrated:null,treeContext:null,retryLane:0};function d0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sw(t,e,n){var r=e.pendingProps,i=dt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Je(dt,i&1),t===null)return n0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Id(o,r,0,null),t=Hi(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=d0(n),e.memoizedState=c0,t):nf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return S_(t,e,o,r,l,i,n);if(a){a=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=si(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=si(l,a):(a=Hi(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?d0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=c0,r}return a=t.child,t=a.sibling,r=si(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nf(t,e){return e=Id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Um(r),Js(e,t.child,null,n),t=nf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function S_(t,e,n,r,i,a,o){if(n)return e.flags&256?(e.flags&=-257,r=Uu(Error(ie(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,i=e.mode,r=Id({mode:"visible",children:r.children},i,0,null),a=Hi(a,i,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&Js(e,t.child,null,o),e.child.memoizedState=d0(o),e.memoizedState=c0,a);if(!(e.mode&1))return Fl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ie(419)),r=Uu(a,r,void 0),Fl(t,e,o,r)}if(l=(o&t.childLanes)!==0,mn||l){if(r=Mt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,zr(t,i),Kn(r,t,i,-1))}return cf(),r=Uu(Error(ie(421))),Fl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=B_.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,bn=ti(i.nextSibling),wn=e,at=!0,qn=null,t!==null&&(Cn[Sn++]=br,Cn[Sn++]=wr,Cn[Sn++]=Xi,br=t.id,wr=t.overflow,Xi=e),e=nf(e,r.children),e.flags|=4096,e)}function Nx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),r0(t.return,e,n)}function $u(t,e,n,r,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Ew(t,e,n){var r=e.pendingProps,i=r.revealOrder,a=r.tail;if(tn(t,e,r.children,n),r=dt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nx(t,n,e);else if(t.tag===19)Nx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Je(dt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$u(e,!1,i,n,a);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$u(e,!0,n,null,a);break;case"together":$u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Zi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=si(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=si(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function E_(t,e,n){switch(e.tag){case 3:Cw(e),Xs();break;case 5:tw(e);break;case 1:gn(e.type)&&Lc(e);break;case 4:Km(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Je(Bc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Je(dt,dt.current&1),e.flags|=128,null):n&e.child.childLanes?Sw(t,e,n):(Je(dt,dt.current&1),t=Cr(t,e,n),t!==null?t.sibling:null);Je(dt,dt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ew(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(dt,dt.current),r)break;return null;case 22:case 23:return e.lanes=0,_w(t,e,n)}return Cr(t,e,n)}var Tw,u0,Iw,Aw;Tw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};u0=function(){};Iw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Fi(sr.current);var a=null;switch(n){case"input":i=Ph(t,i),r=Ph(t,r),a=[];break;case"select":i=ht({},i,{value:void 0}),r=ht({},r,{value:void 0}),a=[];break;case"textarea":i=Mh(t,i),r=Mh(t,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mc)}Lh(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(jo.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(jo.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&nt("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Aw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ba(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function T_(t,e,n){var r=e.pendingProps;switch(Bm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(e),null;case 1:return gn(e.type)&&Vc(),Gt(e),null;case 3:return r=e.stateNode,Zs(),it(pn),it(Jt),Ym(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(v0(qn),qn=null))),u0(t,e),Gt(e),null;case 5:Qm(e);var i=Fi(Do.current);if(n=e.type,t!==null&&e.stateNode!=null)Iw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return Gt(e),null}if(t=Fi(sr.current),Ll(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[rr]=e,r[Po]=a,t=(e.mode&1)!==0,n){case"dialog":nt("cancel",r),nt("close",r);break;case"iframe":case"object":case"embed":nt("load",r);break;case"video":case"audio":for(i=0;i<Xa.length;i++)nt(Xa[i],r);break;case"source":nt("error",r);break;case"img":case"image":case"link":nt("error",r),nt("load",r);break;case"details":nt("toggle",r);break;case"input":Pg(r,a),nt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},nt("invalid",r);break;case"textarea":Dg(r,a),nt("invalid",r)}Lh(n,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Vl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Vl(r.textContent,l,t),i=["children",""+l]):jo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&nt("scroll",r)}switch(n){case"input":El(r),Rg(r,a,!0);break;case"textarea":El(r),Mg(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Mc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ab(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rr]=e,t[Po]=r,Tw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Oh(n,r),n){case"dialog":nt("cancel",t),nt("close",t),i=r;break;case"iframe":case"object":case"embed":nt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Xa.length;i++)nt(Xa[i],t);i=r;break;case"source":nt("error",t),i=r;break;case"img":case"image":case"link":nt("error",t),nt("load",t),i=r;break;case"details":nt("toggle",t),i=r;break;case"input":Pg(t,r),i=Ph(t,r),nt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ht({},r,{value:void 0}),nt("invalid",t);break;case"textarea":Dg(t,r),i=Mh(t,r),nt("invalid",t);break;default:i=r}Lh(n,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?cb(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ob(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&No(t,c):typeof c=="number"&&No(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(jo.hasOwnProperty(a)?c!=null&&a==="onScroll"&&nt("scroll",t):c!=null&&zm(t,a,c,o))}switch(n){case"input":El(t),Rg(t,r,!1);break;case"textarea":El(t),Mg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+di(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ls(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ls(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Gt(e),null;case 6:if(t&&e.stateNode!=null)Aw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Fi(Do.current),Fi(sr.current),Ll(e)){if(r=e.stateNode,n=e.memoizedProps,r[rr]=e,(a=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rr]=e,e.stateNode=r}return Gt(e),null;case 13:if(it(dt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&bn!==null&&e.mode&1&&!(e.flags&128))Yb(),Xs(),e.flags|=98560,a=!1;else if(a=Ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ie(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ie(317));a[rr]=e}else Xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Gt(e),a=!1}else qn!==null&&(v0(qn),qn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||dt.current&1?Tt===0&&(Tt=3):cf())),e.updateQueue!==null&&(e.flags|=4),Gt(e),null);case 4:return Zs(),u0(t,e),t===null&&Io(e.stateNode.containerInfo),Gt(e),null;case 10:return qm(e.type._context),Gt(e),null;case 17:return gn(e.type)&&Vc(),Gt(e),null;case 19:if(it(dt),a=e.memoizedState,a===null)return Gt(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Ba(a,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wc(t),o!==null){for(e.flags|=128,Ba(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(dt,dt.current&1|2),e.child}t=t.sibling}a.tail!==null&&vt()>ta&&(e.flags|=128,r=!0,Ba(a,!1),e.lanes=4194304)}else{if(!r)if(t=Wc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ba(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!at)return Gt(e),null}else 2*vt()-a.renderingStartTime>ta&&n!==1073741824&&(e.flags|=128,r=!0,Ba(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=vt(),e.sibling=null,n=dt.current,Je(dt,r?n&1|2:n&1),e):(Gt(e),null);case 22:case 23:return lf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?vn&1073741824&&(Gt(e),e.subtreeFlags&6&&(e.flags|=8192)):Gt(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function I_(t,e){switch(Bm(e),e.tag){case 1:return gn(e.type)&&Vc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zs(),it(pn),it(Jt),Ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qm(e),null;case 13:if(it(dt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(dt),null;case 4:return Zs(),null;case 10:return qm(e.type._context),null;case 22:case 23:return lf(),null;case 24:return null;default:return null}}var Bl=!1,Yt=!1,A_=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Is(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){gt(t,e,r)}else n.current=null}function h0(t,e,n){try{n()}catch(r){gt(t,e,r)}}var _x=!1;function P_(t,e){if(Qh=Pc,t=Vb(),Om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,m=t,f=null;t:for(;;){for(var y;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==a||r!==0&&m.nodeType!==3||(c=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(y=m.firstChild)!==null;)f=m,m=y;for(;;){if(m===t)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),(y=m.nextSibling)!==null)break;m=f,f=m.parentNode}m=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Yh={focusedElem:t,selectionRange:n},Pc=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,P=_.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?A:$n(e.type,A),P);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(R){gt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return _=_x,_x=!1,_}function co(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&h0(e,n,a)}i=i.next}while(i!==r)}}function Ed(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function m0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pw(t){var e=t.alternate;e!==null&&(t.alternate=null,Pw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rr],delete e[Po],delete e[Zh],delete e[p_],delete e[g_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rw(t){return t.tag===5||t.tag===3||t.tag===4}function zx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function f0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mc));else if(r!==4&&(t=t.child,t!==null))for(f0(t,e,n),t=t.sibling;t!==null;)f0(t,e,n),t=t.sibling}function p0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(p0(t,e,n),t=t.sibling;t!==null;)p0(t,e,n),t=t.sibling}var Vt=null,Wn=!1;function $r(t,e,n){for(n=n.child;n!==null;)Dw(t,e,n),n=n.sibling}function Dw(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(wd,n)}catch{}switch(n.tag){case 5:Yt||Is(n,e);case 6:var r=Vt,i=Wn;Vt=null,$r(t,e,n),Vt=r,Wn=i,Vt!==null&&(Wn?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(Wn?(t=Vt,n=n.stateNode,t.nodeType===8?Mu(t.parentNode,n):t.nodeType===1&&Mu(t,n),So(t)):Mu(Vt,n.stateNode));break;case 4:r=Vt,i=Wn,Vt=n.stateNode.containerInfo,Wn=!0,$r(t,e,n),Vt=r,Wn=i;break;case 0:case 11:case 14:case 15:if(!Yt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&h0(n,e,o),i=i.next}while(i!==r)}$r(t,e,n);break;case 1:if(!Yt&&(Is(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){gt(n,e,l)}$r(t,e,n);break;case 21:$r(t,e,n);break;case 22:n.mode&1?(Yt=(r=Yt)||n.memoizedState!==null,$r(t,e,n),Yt=r):$r(t,e,n);break;default:$r(t,e,n)}}function Cx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new A_),e.forEach(function(r){var i=U_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,Wn=!1;break e;case 3:Vt=l.stateNode.containerInfo,Wn=!0;break e;case 4:Vt=l.stateNode.containerInfo,Wn=!0;break e}l=l.return}if(Vt===null)throw Error(ie(160));Dw(a,o,i),Vt=null,Wn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){gt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mw(e,t),e=e.sibling}function Mw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),Zn(t),r&4){try{co(3,t,t.return),Ed(3,t)}catch(A){gt(t,t.return,A)}try{co(5,t,t.return)}catch(A){gt(t,t.return,A)}}break;case 1:Ln(e,t),Zn(t),r&512&&n!==null&&Is(n,n.return);break;case 5:if(Ln(e,t),Zn(t),r&512&&n!==null&&Is(n,n.return),t.flags&32){var i=t.stateNode;try{No(i,"")}catch(A){gt(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&ib(i,a),Oh(l,o);var u=Oh(l,a);for(o=0;o<c.length;o+=2){var h=c[o],m=c[o+1];h==="style"?cb(i,m):h==="dangerouslySetInnerHTML"?ob(i,m):h==="children"?No(i,m):zm(i,h,m,u)}switch(l){case"input":Rh(i,a);break;case"textarea":sb(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Ls(i,!!a.multiple,y,!1):f!==!!a.multiple&&(a.defaultValue!=null?Ls(i,!!a.multiple,a.defaultValue,!0):Ls(i,!!a.multiple,a.multiple?[]:"",!1))}i[Po]=a}catch(A){gt(t,t.return,A)}}break;case 6:if(Ln(e,t),Zn(t),r&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(A){gt(t,t.return,A)}}break;case 3:if(Ln(e,t),Zn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{So(e.containerInfo)}catch(A){gt(t,t.return,A)}break;case 4:Ln(e,t),Zn(t);break;case 13:Ln(e,t),Zn(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(af=vt())),r&4&&Cx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Yt=(u=Yt)||h,Ln(e,t),Yt=u):Ln(e,t),Zn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(xe=t,h=t.child;h!==null;){for(m=xe=h;xe!==null;){switch(f=xe,y=f.child,f.tag){case 0:case 11:case 14:case 15:co(4,f,f.return);break;case 1:Is(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(A){gt(r,n,A)}}break;case 5:Is(f,f.return);break;case 22:if(f.memoizedState!==null){Ex(m);continue}}y!==null?(y.return=f,xe=y):Ex(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=m.stateNode,c=m.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lb("display",o))}catch(A){gt(t,t.return,A)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(A){gt(t,t.return,A)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Ln(e,t),Zn(t),r&4&&Cx(t);break;case 21:break;default:Ln(e,t),Zn(t)}}function Zn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rw(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(No(i,""),r.flags&=-33);var a=zx(t);p0(t,a,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zx(t);f0(t,l,o);break;default:throw Error(ie(161))}}catch(c){gt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function R_(t,e,n){xe=t,Vw(t)}function Vw(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var i=xe,a=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Bl;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Yt;l=Bl;var u=Yt;if(Bl=o,(Yt=c)&&!u)for(xe=i;xe!==null;)o=xe,c=o.child,o.tag===22&&o.memoizedState!==null?Tx(i):c!==null?(c.return=o,xe=c):Tx(i);for(;a!==null;)xe=a,Vw(a),a=a.sibling;xe=i,Bl=l,Yt=u}Sx(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,xe=a):Sx(t)}}function Sx(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Yt||Ed(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Yt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&hx(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&So(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Yt||e.flags&512&&m0(e)}catch(f){gt(e,e.return,f)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Ex(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Tx(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ed(4,e)}catch(c){gt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){gt(e,i,c)}}var a=e.return;try{m0(e)}catch(c){gt(e,a,c)}break;case 5:var o=e.return;try{m0(e)}catch(c){gt(e,o,c)}}}catch(c){gt(e,e.return,c)}if(e===t){xe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,xe=l;break}xe=e.return}}var D_=Math.ceil,Gc=Mr.ReactCurrentDispatcher,rf=Mr.ReactCurrentOwner,Pn=Mr.ReactCurrentBatchConfig,$e=0,Mt=null,kt=null,Ut=0,vn=0,As=ki(0),Tt=0,Oo=null,Zi=0,Td=0,sf=0,uo=null,hn=null,af=0,ta=1/0,xr=null,Kc=!1,g0=null,ri=null,Ul=!1,Yr=null,Qc=0,ho=0,x0=null,uc=-1,hc=0;function sn(){return $e&6?vt():uc!==-1?uc:uc=vt()}function ii(t){return t.mode&1?$e&2&&Ut!==0?Ut&-Ut:y_.transition!==null?(hc===0&&(hc=wb()),hc):(t=Ge,t!==0||(t=window.event,t=t===void 0?16:Sb(t.type)),t):1}function Kn(t,e,n,r){if(50<ho)throw ho=0,x0=null,Error(ie(185));tl(t,n,r),(!($e&2)||t!==Mt)&&(t===Mt&&(!($e&2)&&(Td|=n),Tt===4&&Kr(t,Ut)),xn(t,r),n===1&&$e===0&&!(e.mode&1)&&(ta=vt()+500,zd&&ji()))}function xn(t,e){var n=t.callbackNode;y4(t,e);var r=Ac(t,t===Mt?Ut:0);if(r===0)n!==null&&Og(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Og(n),e===1)t.tag===0?x_(Ix.bind(null,t)):Gb(Ix.bind(null,t)),m_(function(){!($e&6)&&ji()}),n=null;else{switch(kb(r)){case 1:n=Im;break;case 4:n=vb;break;case 16:n=Ic;break;case 536870912:n=bb;break;default:n=Ic}n=qw(n,Lw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lw(t,e){if(uc=-1,hc=0,$e&6)throw Error(ie(327));var n=t.callbackNode;if($s()&&t.callbackNode!==n)return null;var r=Ac(t,t===Mt?Ut:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Yc(t,r);else{e=r;var i=$e;$e|=2;var a=Fw();(Mt!==t||Ut!==e)&&(xr=null,ta=vt()+500,qi(t,e));do try{L_();break}catch(l){Ow(t,l)}while(!0);Wm(),Gc.current=a,$e=i,kt!==null?e=0:(Mt=null,Ut=0,e=Tt)}if(e!==0){if(e===2&&(i=Wh(t),i!==0&&(r=i,e=y0(t,i))),e===1)throw n=Oo,qi(t,0),Kr(t,r),xn(t,vt()),n;if(e===6)Kr(t,r);else{if(i=t.current.alternate,!(r&30)&&!M_(i)&&(e=Yc(t,r),e===2&&(a=Wh(t),a!==0&&(r=a,e=y0(t,a))),e===1))throw n=Oo,qi(t,0),Kr(t,r),xn(t,vt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Ri(t,hn,xr);break;case 3:if(Kr(t,r),(r&130023424)===r&&(e=af+500-vt(),10<e)){if(Ac(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){sn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Jh(Ri.bind(null,t,hn,xr),e);break}Ri(t,hn,xr);break;case 4:if(Kr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Gn(r);a=1<<o,o=e[o],o>i&&(i=o),r&=~a}if(r=i,r=vt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*D_(r/1960))-r,10<r){t.timeoutHandle=Jh(Ri.bind(null,t,hn,xr),r);break}Ri(t,hn,xr);break;case 5:Ri(t,hn,xr);break;default:throw Error(ie(329))}}}return xn(t,vt()),t.callbackNode===n?Lw.bind(null,t):null}function y0(t,e){var n=uo;return t.current.memoizedState.isDehydrated&&(qi(t,e).flags|=256),t=Yc(t,e),t!==2&&(e=hn,hn=n,e!==null&&v0(e)),t}function v0(t){hn===null?hn=t:hn.push.apply(hn,t)}function M_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!Qn(a(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kr(t,e){for(e&=~sf,e&=~Td,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Gn(e),r=1<<n;t[n]=-1,e&=~r}}function Ix(t){if($e&6)throw Error(ie(327));$s();var e=Ac(t,0);if(!(e&1))return xn(t,vt()),null;var n=Yc(t,e);if(t.tag!==0&&n===2){var r=Wh(t);r!==0&&(e=r,n=y0(t,r))}if(n===1)throw n=Oo,qi(t,0),Kr(t,e),xn(t,vt()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ri(t,hn,xr),xn(t,vt()),null}function of(t,e){var n=$e;$e|=1;try{return t(e)}finally{$e=n,$e===0&&(ta=vt()+500,zd&&ji())}}function es(t){Yr!==null&&Yr.tag===0&&!($e&6)&&$s();var e=$e;$e|=1;var n=Pn.transition,r=Ge;try{if(Pn.transition=null,Ge=1,t)return t()}finally{Ge=r,Pn.transition=n,$e=e,!($e&6)&&ji()}}function lf(){vn=As.current,it(As)}function qi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,h_(n)),kt!==null)for(n=kt.return;n!==null;){var r=n;switch(Bm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Vc();break;case 3:Zs(),it(pn),it(Jt),Ym();break;case 5:Qm(r);break;case 4:Zs();break;case 13:it(dt);break;case 19:it(dt);break;case 10:qm(r.type._context);break;case 22:case 23:lf()}n=n.return}if(Mt=t,kt=t=si(t.current,null),Ut=vn=e,Tt=0,Oo=null,sf=Td=Zi=0,hn=uo=null,Oi!==null){for(e=0;e<Oi.length;e++)if(n=Oi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=i,r.next=o}n.pending=r}Oi=null}return t}function Ow(t,e){do{var n=kt;try{if(Wm(),lc.current=Hc,qc){for(var r=ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}qc=!1}if(Ji=0,Dt=Et=ut=null,lo=!1,Mo=0,rf.current=null,n===null||n.return===null){Tt=1,Oo=e,kt=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=Ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=yx(o);if(y!==null){y.flags&=-257,vx(y,o,l,a,e),y.mode&1&&xx(a,u,e),e=y,c=u;var _=e.updateQueue;if(_===null){var A=new Set;A.add(c),e.updateQueue=A}else _.add(c);break e}else{if(!(e&1)){xx(a,u,e),cf();break e}c=Error(ie(426))}}else if(at&&l.mode&1){var P=yx(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),vx(P,o,l,a,e),Um(ea(c,l));break e}}a=c=ea(c,l),Tt!==4&&(Tt=2),uo===null?uo=[a]:uo.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=kw(a,c,e);ux(a,b);break e;case 1:l=c;var w=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ri===null||!ri.has(j)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=jw(a,l,e);ux(a,R);break e}}a=a.return}while(a!==null)}Uw(n)}catch(O){e=O,kt===n&&n!==null&&(kt=n=n.return);continue}break}while(!0)}function Fw(){var t=Gc.current;return Gc.current=Hc,t===null?Hc:t}function cf(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Mt===null||!(Zi&268435455)&&!(Td&268435455)||Kr(Mt,Ut)}function Yc(t,e){var n=$e;$e|=2;var r=Fw();(Mt!==t||Ut!==e)&&(xr=null,qi(t,e));do try{V_();break}catch(i){Ow(t,i)}while(!0);if(Wm(),$e=n,Gc.current=r,kt!==null)throw Error(ie(261));return Mt=null,Ut=0,Tt}function V_(){for(;kt!==null;)Bw(kt)}function L_(){for(;kt!==null&&!c4();)Bw(kt)}function Bw(t){var e=Ww(t.alternate,t,vn);t.memoizedProps=t.pendingProps,e===null?Uw(t):kt=e,rf.current=null}function Uw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=I_(n,e),n!==null){n.flags&=32767,kt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,kt=null;return}}else if(n=T_(n,e,vn),n!==null){kt=n;return}if(e=e.sibling,e!==null){kt=e;return}kt=e=t}while(e!==null);Tt===0&&(Tt=5)}function Ri(t,e,n){var r=Ge,i=Pn.transition;try{Pn.transition=null,Ge=1,O_(t,e,n,r)}finally{Pn.transition=i,Ge=r}return null}function O_(t,e,n,r){do $s();while(Yr!==null);if($e&6)throw Error(ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(v4(t,a),t===Mt&&(kt=Mt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ul||(Ul=!0,qw(Ic,function(){return $s(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Pn.transition,Pn.transition=null;var o=Ge;Ge=1;var l=$e;$e|=4,rf.current=null,P_(t,n),Mw(n,t),s_(Yh),Pc=!!Qh,Yh=Qh=null,t.current=n,R_(n),d4(),$e=l,Ge=o,Pn.transition=a}else t.current=n;if(Ul&&(Ul=!1,Yr=t,Qc=i),a=t.pendingLanes,a===0&&(ri=null),m4(n.stateNode),xn(t,vt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kc)throw Kc=!1,t=g0,g0=null,t;return Qc&1&&t.tag!==0&&$s(),a=t.pendingLanes,a&1?t===x0?ho++:(ho=0,x0=t):ho=0,ji(),null}function $s(){if(Yr!==null){var t=kb(Qc),e=Pn.transition,n=Ge;try{if(Pn.transition=null,Ge=16>t?16:t,Yr===null)var r=!1;else{if(t=Yr,Yr=null,Qc=0,$e&6)throw Error(ie(331));var i=$e;for($e|=4,xe=t.current;xe!==null;){var a=xe,o=a.child;if(xe.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(xe=u;xe!==null;){var h=xe;switch(h.tag){case 0:case 11:case 15:co(8,h,a)}var m=h.child;if(m!==null)m.return=h,xe=m;else for(;xe!==null;){h=xe;var f=h.sibling,y=h.return;if(Pw(h),h===u){xe=null;break}if(f!==null){f.return=y,xe=f;break}xe=y}}}var _=a.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var P=A.sibling;A.sibling=null,A=P}while(A!==null)}}xe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,xe=o;else e:for(;xe!==null;){if(a=xe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:co(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,xe=b;break e}xe=a.return}}var w=t.current;for(xe=w;xe!==null;){o=xe;var j=o.child;if(o.subtreeFlags&2064&&j!==null)j.return=o,xe=j;else e:for(o=w;xe!==null;){if(l=xe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ed(9,l)}}catch(O){gt(l,l.return,O)}if(l===o){xe=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,xe=R;break e}xe=l.return}}if($e=i,ji(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(wd,t)}catch{}r=!0}return r}finally{Ge=n,Pn.transition=e}}return!1}function Ax(t,e,n){e=ea(n,e),e=kw(t,e,1),t=ni(t,e,1),e=sn(),t!==null&&(tl(t,1,e),xn(t,e))}function gt(t,e,n){if(t.tag===3)Ax(t,t,n);else for(;e!==null;){if(e.tag===3){Ax(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ri===null||!ri.has(r))){t=ea(n,t),t=jw(e,t,1),e=ni(e,t,1),t=sn(),e!==null&&(tl(e,1,t),xn(e,t));break}}e=e.return}}function F_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Mt===t&&(Ut&n)===n&&(Tt===4||Tt===3&&(Ut&130023424)===Ut&&500>vt()-af?qi(t,0):sf|=n),xn(t,e)}function $w(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=sn();t=zr(t,e),t!==null&&(tl(t,e,n),xn(t,n))}function B_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$w(t,n)}function U_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),$w(t,n)}var Ww;Ww=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||pn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,E_(t,e,n);mn=!!(t.flags&131072)}else mn=!1,at&&e.flags&1048576&&Kb(e,Fc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dc(t,e),t=e.pendingProps;var i=Ys(e,Jt.current);Us(e,n),i=Jm(null,e,r,t,i,n);var a=Zm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gn(r)?(a=!0,Lc(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gm(e),i.updater=Sd,e.stateNode=i,i._reactInternals=e,s0(e,r,t,n),e=l0(null,e,r,!0,a,n)):(e.tag=0,at&&a&&Fm(e),tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=W_(r),t=$n(r,t),i){case 0:e=o0(null,e,r,t,n);break e;case 1:e=kx(null,e,r,t,n);break e;case 11:e=bx(null,e,r,t,n);break e;case 14:e=wx(null,e,r,$n(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),o0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),kx(t,e,r,i,n);case 3:e:{if(Cw(e),t===null)throw Error(ie(387));r=e.pendingProps,a=e.memoizedState,i=a.element,ew(t,e),$c(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=ea(Error(ie(423)),e),e=jx(t,e,r,n,i);break e}else if(r!==i){i=ea(Error(ie(424)),e),e=jx(t,e,r,n,i);break e}else for(bn=ti(e.stateNode.containerInfo.firstChild),wn=e,at=!0,qn=null,n=Jb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xs(),r===i){e=Cr(t,e,n);break e}tn(t,e,r,n)}e=e.child}return e;case 5:return tw(e),t===null&&n0(e),r=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Xh(r,i)?o=null:a!==null&&Xh(r,a)&&(e.flags|=32),zw(t,e),tn(t,e,o,n),e.child;case 6:return t===null&&n0(e),null;case 13:return Sw(t,e,n);case 4:return Km(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Js(e,null,r,n):tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),bx(t,e,r,i,n);case 7:return tn(t,e,e.pendingProps,n),e.child;case 8:return tn(t,e,e.pendingProps.children,n),e.child;case 12:return tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Je(Bc,r._currentValue),r._currentValue=o,a!==null)if(Qn(a.value,o)){if(a.children===i.children&&!pn.current){e=Cr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=kr(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),r0(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ie(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),r0(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Us(e,n),i=Mn(i),r=r(i),e.flags|=1,tn(t,e,r,n),e.child;case 14:return r=e.type,i=$n(r,e.pendingProps),i=$n(r.type,i),wx(t,e,r,i,n);case 15:return Nw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$n(r,i),dc(t,e),e.tag=1,gn(r)?(t=!0,Lc(e)):t=!1,Us(e,n),ww(e,r,i),s0(e,r,i,n),l0(null,e,r,!0,t,n);case 19:return Ew(t,e,n);case 22:return _w(t,e,n)}throw Error(ie(156,e.tag))};function qw(t,e){return yb(t,e)}function $_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new $_(t,e,n,r)}function df(t){return t=t.prototype,!(!t||!t.isReactComponent)}function W_(t){if(typeof t=="function")return df(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sm)return 11;if(t===Em)return 14}return 2}function si(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function mc(t,e,n,r,i,a){var o=2;if(r=t,typeof t=="function")df(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ks:return Hi(n.children,i,a,e);case Cm:o=8,i|=8;break;case Eh:return t=In(12,n,e,i|2),t.elementType=Eh,t.lanes=a,t;case Th:return t=In(13,n,e,i),t.elementType=Th,t.lanes=a,t;case Ih:return t=In(19,n,e,i),t.elementType=Ih,t.lanes=a,t;case tb:return Id(n,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z1:o=10;break e;case eb:o=9;break e;case Sm:o=11;break e;case Em:o=14;break e;case qr:o=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=a,e}function Hi(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function Id(t,e,n,r){return t=In(22,t,r,e),t.elementType=tb,t.lanes=n,t.stateNode={isHidden:!1},t}function Wu(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function qu(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function q_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function uf(t,e,n,r,i,a,o,l,c){return t=new q_(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=In(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gm(a),t}function H_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hw(t){if(!t)return ui;t=t._reactInternals;e:{if(os(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(gn(n))return Hb(t,n,e)}return e}function Gw(t,e,n,r,i,a,o,l,c){return t=uf(n,r,!0,t,i,a,o,l,c),t.context=Hw(null),n=t.current,r=sn(),i=ii(n),a=kr(r,i),a.callback=e??null,ni(n,a,i),t.current.lanes=i,tl(t,i,r),xn(t,r),t}function Ad(t,e,n,r){var i=e.current,a=sn(),o=ii(i);return n=Hw(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ni(i,e,o),t!==null&&(Kn(t,i,o,a),oc(t,i,o)),o}function Xc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Px(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function hf(t,e){Px(t,e),(t=t.alternate)&&Px(t,e)}function G_(){return null}var Kw=typeof reportError=="function"?reportError:function(t){console.error(t)};function mf(t){this._internalRoot=t}Pd.prototype.render=mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));Ad(t,e,null,null)};Pd.prototype.unmount=mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;es(function(){Ad(null,t,null,null)}),e[_r]=null}};function Pd(t){this._internalRoot=t}Pd.prototype.unstable_scheduleHydration=function(t){if(t){var e=_b();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Gr.length&&e!==0&&e<Gr[n].priority;n++);Gr.splice(n,0,t),n===0&&Cb(t)}};function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rx(){}function K_(t,e,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Xc(o);a.call(u)}}var o=Gw(e,r,t,0,null,!1,!1,"",Rx);return t._reactRootContainer=o,t[_r]=o.current,Io(t.nodeType===8?t.parentNode:t),es(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=Xc(c);l.call(u)}}var c=uf(t,0,!1,null,null,!1,!1,"",Rx);return t._reactRootContainer=c,t[_r]=c.current,Io(t.nodeType===8?t.parentNode:t),es(function(){Ad(e,c,n,r)}),c}function Dd(t,e,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Xc(o);l.call(c)}}Ad(e,o,t,i)}else o=K_(n,e,t,i,r);return Xc(o)}jb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ya(e.pendingLanes);n!==0&&(Am(e,n|1),xn(e,vt()),!($e&6)&&(ta=vt()+500,ji()))}break;case 13:es(function(){var r=zr(t,1);if(r!==null){var i=sn();Kn(r,t,1,i)}}),hf(t,1)}};Pm=function(t){if(t.tag===13){var e=zr(t,134217728);if(e!==null){var n=sn();Kn(e,t,134217728,n)}hf(t,134217728)}};Nb=function(t){if(t.tag===13){var e=ii(t),n=zr(t,e);if(n!==null){var r=sn();Kn(n,t,e,r)}hf(t,e)}};_b=function(){return Ge};zb=function(t,e){var n=Ge;try{return Ge=t,e()}finally{Ge=n}};Bh=function(t,e,n){switch(e){case"input":if(Rh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=_d(r);if(!i)throw Error(ie(90));rb(r),Rh(r,i)}}}break;case"textarea":sb(t,n);break;case"select":e=n.value,e!=null&&Ls(t,!!n.multiple,e,!1)}};hb=of;mb=es;var Q_={usingClientEntryPoint:!1,Events:[rl,zs,_d,db,ub,of]},Ua={findFiberByHostInstance:Li,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Y_={bundleType:Ua.bundleType,version:Ua.version,rendererPackageName:Ua.rendererPackageName,rendererConfig:Ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ua.findFiberByHostInstance||G_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{wd=$l.inject(Y_),ir=$l}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q_;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ff(e))throw Error(ie(200));return H_(t,e,null,n)};Nn.createRoot=function(t,e){if(!ff(t))throw Error(ie(299));var n=!1,r="",i=Kw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=uf(t,1,!1,null,null,n,!1,r,i),t[_r]=e.current,Io(t.nodeType===8?t.parentNode:t),new mf(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=gb(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return es(t)};Nn.hydrate=function(t,e,n){if(!Rd(e))throw Error(ie(200));return Dd(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!ff(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",o=Kw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Gw(e,null,t,1,n??null,i,!1,a,o),t[_r]=e.current,Io(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pd(e)};Nn.render=function(t,e,n){if(!Rd(e))throw Error(ie(200));return Dd(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Rd(t))throw Error(ie(40));return t._reactRootContainer?(es(function(){Dd(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1};Nn.unstable_batchedUpdates=of;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Rd(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Dd(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function Qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qw)}catch(t){console.error(t)}}Qw(),Q1.exports=Nn;var Ze=Q1.exports,Dx=Ze;Ch.createRoot=Dx.createRoot,Ch.hydrateRoot=Dx.hydrateRoot;const pf=k.createContext({});function Ni(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const gf=typeof window<"u",xf=gf?k.useLayoutEffect:k.useEffect,Md=k.createContext(null);function yf(t,e){t.indexOf(e)===-1&&t.push(e)}function vf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function X_([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[a]=t.splice(e,1);t.splice(i,0,a)}return t}const Sr=(t,e,n)=>n>e?e:n<t?t:n;let bf=()=>{};const Er={},Yw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Xw(t){return typeof t=="object"&&t!==null}const Jw=t=>/^0[^.\s]+$/u.test(t);function wf(t){let e;return()=>(e===void 0&&(e=t()),e)}const Rn=t=>t,J_=(t,e)=>n=>e(t(n)),sl=(...t)=>t.reduce(J_),Fo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class kf{constructor(){this.subscriptions=[]}add(e){return yf(this.subscriptions,e),()=>vf(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ar=t=>t*1e3,An=t=>t/1e3;function Zw(t,e){return e?t*(1e3/e):0}const e2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Z_=1e-7,ez=12;function tz(t,e,n,r,i){let a,o,l=0;do o=e+(n-e)/2,a=e2(o,r,i)-t,a>0?n=o:e=o;while(Math.abs(a)>Z_&&++l<ez);return o}function al(t,e,n,r){if(t===e&&n===r)return Rn;const i=a=>tz(a,0,1,t,n);return a=>a===0||a===1?a:e2(i(a),e,r)}const t2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,n2=t=>e=>1-t(1-e),r2=al(.33,1.53,.69,.99),jf=n2(r2),i2=t2(jf),s2=t=>(t*=2)<1?.5*jf(t):.5*(2-Math.pow(2,-10*(t-1))),Nf=t=>1-Math.sin(Math.acos(t)),a2=n2(Nf),o2=t2(Nf),nz=al(.42,0,1,1),rz=al(0,0,.58,1),l2=al(.42,0,.58,1),iz=t=>Array.isArray(t)&&typeof t[0]!="number",c2=t=>Array.isArray(t)&&typeof t[0]=="number",sz={linear:Rn,easeIn:nz,easeInOut:l2,easeOut:rz,circIn:Nf,circInOut:o2,circOut:a2,backIn:jf,backInOut:i2,backOut:r2,anticipate:s2},az=t=>typeof t=="string",Mx=t=>{if(c2(t)){bf(t.length===4);const[e,n,r,i]=t;return al(e,n,r,i)}else if(az(t))return sz[t];return t},Wl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oz(t,e){let n=new Set,r=new Set,i=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(u.schedule(h),t()),h(l)}const u={schedule:(h,m=!1,f=!1)=>{const _=f&&i?n:r;return m&&o.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,a&&(a=!1,u.process(h))}};return u}const lz=40;function d2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Wl.reduce((j,R)=>(j[R]=oz(a),j),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:h,update:m,preRender:f,render:y,postRender:_}=o,A=()=>{const j=Er.useManualTiming?i.timestamp:performance.now();n=!1,Er.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(j-i.timestamp,lz),1)),i.timestamp=j,i.isProcessing=!0,l.process(i),c.process(i),u.process(i),h.process(i),m.process(i),f.process(i),y.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(A))},P=()=>{n=!0,r=!0,i.isProcessing||t(A)};return{schedule:Wl.reduce((j,R)=>{const O=o[R];return j[R]=(L,v=!1,x=!1)=>(n||P(),O.schedule(L,v,x)),j},{}),cancel:j=>{for(let R=0;R<Wl.length;R++)o[Wl[R]].cancel(j)},state:i,steps:o}}const{schedule:st,cancel:Tr,state:Lt,steps:Hu}=d2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Rn,!0);let fc;function cz(){fc=void 0}const fn={now:()=>(fc===void 0&&fn.set(Lt.isProcessing||Er.useManualTiming?Lt.timestamp:performance.now()),fc),set:t=>{fc=t,queueMicrotask(cz)}},u2=t=>e=>typeof e=="string"&&e.startsWith(t),h2=u2("--"),dz=u2("var(--"),_f=t=>dz(t)?uz.test(t.split("/*")[0].trim()):!1,uz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ma={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bo={...ma,transform:t=>Sr(0,1,t)},ql={...ma,default:1},mo=t=>Math.round(t*1e5)/1e5,zf=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function hz(t){return t==null}const mz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Cf=(t,e)=>n=>!!(typeof n=="string"&&mz.test(n)&&n.startsWith(t)||e&&!hz(n)&&Object.prototype.hasOwnProperty.call(n,e)),m2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,o,l]=r.match(zf);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},fz=t=>Sr(0,255,t),Gu={...ma,transform:t=>Math.round(fz(t))},Bi={test:Cf("rgb","red"),parse:m2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Gu.transform(t)+", "+Gu.transform(e)+", "+Gu.transform(n)+", "+mo(Bo.transform(r))+")"};function pz(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const b0={test:Cf("#"),parse:pz,transform:Bi.transform},ol=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Wr=ol("deg"),or=ol("%"),Se=ol("px"),gz=ol("vh"),xz=ol("vw"),Vx={...or,parse:t=>or.parse(t)/100,transform:t=>or.transform(t*100)},Ps={test:Cf("hsl","hue"),parse:m2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+or.transform(mo(e))+", "+or.transform(mo(n))+", "+mo(Bo.transform(r))+")"},wt={test:t=>Bi.test(t)||b0.test(t)||Ps.test(t),parse:t=>Bi.test(t)?Bi.parse(t):Ps.test(t)?Ps.parse(t):b0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Bi.transform(t):Ps.transform(t),getAnimatableNone:t=>{const e=wt.parse(t);return e.alpha=0,wt.transform(e)}},yz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function vz(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(zf))==null?void 0:e.length)||0)+(((n=t.match(yz))==null?void 0:n.length)||0)>0}const f2="number",p2="color",bz="var",wz="var(",Lx="${}",kz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Uo(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const l=e.replace(kz,c=>(wt.test(c)?(r.color.push(a),i.push(p2),n.push(wt.parse(c))):c.startsWith(wz)?(r.var.push(a),i.push(bz),n.push(c)):(r.number.push(a),i.push(f2),n.push(parseFloat(c))),++a,Lx)).split(Lx);return{values:n,split:l,indexes:r,types:i}}function g2(t){return Uo(t).values}function x2(t){const{split:e,types:n}=Uo(t),r=e.length;return i=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],i[o]!==void 0){const l=n[o];l===f2?a+=mo(i[o]):l===p2?a+=wt.transform(i[o]):a+=i[o]}return a}}const jz=t=>typeof t=="number"?0:wt.test(t)?wt.getAnimatableNone(t):t;function Nz(t){const e=g2(t);return x2(t)(e.map(jz))}const hi={test:vz,parse:g2,createTransformer:x2,getAnimatableNone:Nz};function Ku(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function _z({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,o=0;if(!e)i=a=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=Ku(c,l,t+1/3),a=Ku(c,l,t),o=Ku(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function Jc(t,e){return n=>n>0?e:t}const ot=(t,e,n)=>t+(e-t)*n,Qu=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},zz=[b0,Bi,Ps],Cz=t=>zz.find(e=>e.test(t));function Ox(t){const e=Cz(t);if(!e)return!1;let n=e.parse(t);return e===Ps&&(n=_z(n)),n}const Fx=(t,e)=>{const n=Ox(t),r=Ox(e);if(!n||!r)return Jc(t,e);const i={...n};return a=>(i.red=Qu(n.red,r.red,a),i.green=Qu(n.green,r.green,a),i.blue=Qu(n.blue,r.blue,a),i.alpha=ot(n.alpha,r.alpha,a),Bi.transform(i))},w0=new Set(["none","hidden"]);function Sz(t,e){return w0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Ez(t,e){return n=>ot(t,e,n)}function Sf(t){return typeof t=="number"?Ez:typeof t=="string"?_f(t)?Jc:wt.test(t)?Fx:Az:Array.isArray(t)?y2:typeof t=="object"?wt.test(t)?Fx:Tz:Jc}function y2(t,e){const n=[...t],r=n.length,i=t.map((a,o)=>Sf(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=i[o](a);return n}}function Tz(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Sf(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function Iz(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],o=t.indexes[a][r[a]],l=t.values[o]??0;n[i]=l,r[a]++}return n}const Az=(t,e)=>{const n=hi.createTransformer(e),r=Uo(t),i=Uo(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?w0.has(t)&&!i.values.length||w0.has(e)&&!r.values.length?Sz(t,e):sl(y2(Iz(r,i),i.values),n):Jc(t,e)};function v2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ot(t,e,n):Sf(t)(t,e)}const Pz=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>st.update(e,n),stop:()=>Tr(e),now:()=>Lt.isProcessing?Lt.timestamp:fn.now()}},b2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Zc=2e4;function Ef(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Zc;)e+=n,r=t.next(e);return e>=Zc?1/0:e}function Rz(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Ef(r),Zc);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:An(i)}}const Dz=5;function w2(t,e,n){const r=Math.max(e-Dz,0);return Zw(n-t(r),e-r)}const pt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Yu=.001;function Mz({duration:t=pt.duration,bounce:e=pt.bounce,velocity:n=pt.velocity,mass:r=pt.mass}){let i,a,o=1-e;o=Sr(pt.minDamping,pt.maxDamping,o),t=Sr(pt.minDuration,pt.maxDuration,An(t)),o<1?(i=u=>{const h=u*o,m=h*t,f=h-n,y=k0(u,o),_=Math.exp(-m);return Yu-f/y*_},a=u=>{const m=u*o*t,f=m*n+n,y=Math.pow(o,2)*Math.pow(u,2)*t,_=Math.exp(-m),A=k0(Math.pow(u,2),o);return(-i(u)+Yu>0?-1:1)*((f-y)*_)/A}):(i=u=>{const h=Math.exp(-u*t),m=(u-n)*t+1;return-Yu+h*m},a=u=>{const h=Math.exp(-u*t),m=(n-u)*(t*t);return h*m});const l=5/t,c=Lz(i,a,l);if(t=ar(t),isNaN(c))return{stiffness:pt.stiffness,damping:pt.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const Vz=12;function Lz(t,e,n){let r=n;for(let i=1;i<Vz;i++)r=r-t(r)/e(r);return r}function k0(t,e){return t*Math.sqrt(1-e*e)}const Oz=["duration","bounce"],Fz=["stiffness","damping","mass"];function Bx(t,e){return e.some(n=>t[n]!==void 0)}function Bz(t){let e={velocity:pt.velocity,stiffness:pt.stiffness,damping:pt.damping,mass:pt.mass,isResolvedFromDuration:!1,...t};if(!Bx(t,Fz)&&Bx(t,Oz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*Sr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:pt.mass,stiffness:i,damping:a}}else{const n=Mz(t);e={...e,...n,mass:pt.mass},e.isResolvedFromDuration=!0}return e}function ed(t=pt.visualDuration,e=pt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:h,duration:m,velocity:f,isResolvedFromDuration:y}=Bz({...n,velocity:-An(n.velocity||0)}),_=f||0,A=u/(2*Math.sqrt(c*h)),P=o-a,b=An(Math.sqrt(c/h)),w=Math.abs(P)<5;r||(r=w?pt.restSpeed.granular:pt.restSpeed.default),i||(i=w?pt.restDelta.granular:pt.restDelta.default);let j;if(A<1){const O=k0(b,A);j=L=>{const v=Math.exp(-A*b*L);return o-v*((_+A*b*P)/O*Math.sin(O*L)+P*Math.cos(O*L))}}else if(A===1)j=O=>o-Math.exp(-b*O)*(P+(_+b*P)*O);else{const O=b*Math.sqrt(A*A-1);j=L=>{const v=Math.exp(-A*b*L),x=Math.min(O*L,300);return o-v*((_+A*b*P)*Math.sinh(x)+O*P*Math.cosh(x))/O}}const R={calculatedDuration:y&&m||null,next:O=>{const L=j(O);if(y)l.done=O>=m;else{let v=O===0?_:0;A<1&&(v=O===0?ar(_):w2(j,O,L));const x=Math.abs(v)<=r,N=Math.abs(o-L)<=i;l.done=x&&N}return l.value=l.done?o:L,l},toString:()=>{const O=Math.min(Ef(R),Zc),L=b2(v=>R.next(O*v).value,O,30);return O+"ms "+L},toTransition:()=>{}};return R}ed.applyToOptions=t=>{const e=Rz(t,100,ed);return t.ease=e.ease,t.duration=ar(e.duration),t.type="keyframes",t};function j0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const m=t[0],f={done:!1,value:m},y=x=>l!==void 0&&x<l||c!==void 0&&x>c,_=x=>l===void 0?c:c===void 0||Math.abs(l-x)<Math.abs(c-x)?l:c;let A=n*e;const P=m+A,b=o===void 0?P:o(P);b!==P&&(A=b-m);const w=x=>-A*Math.exp(-x/r),j=x=>b+w(x),R=x=>{const N=w(x),C=j(x);f.done=Math.abs(N)<=u,f.value=f.done?b:C};let O,L;const v=x=>{y(f.value)&&(O=x,L=ed({keyframes:[f.value,_(f.value)],velocity:w2(j,x,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:h}))};return v(0),{calculatedDuration:null,next:x=>{let N=!1;return!L&&O===void 0&&(N=!0,R(x),v(x)),O!==void 0&&x>=O?L.next(x-O):(!N&&R(x),f)}}}function Uz(t,e,n){const r=[],i=n||Er.mix||v2,a=t.length-1;for(let o=0;o<a;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Rn:e;l=sl(c,l)}r.push(l)}return r}function k2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(bf(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Uz(e,r,i),c=l.length,u=h=>{if(o&&h<t[0])return e[0];let m=0;if(c>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const f=Fo(t[m],t[m+1],h);return l[m](f)};return n?h=>u(Sr(t[0],t[a-1],h)):u}function $z(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Fo(0,e,r);t.push(ot(n,1,i))}}function Wz(t){const e=[0];return $z(e,t.length-1),e}function qz(t,e){return t.map(n=>n*e)}function Hz(t,e){return t.map(()=>e||l2).splice(0,t.length-1)}function fo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=iz(r)?r.map(Mx):Mx(r),a={done:!1,value:e[0]},o=qz(n&&n.length===e.length?n:Wz(e),t),l=k2(o,e,{ease:Array.isArray(i)?i:Hz(e,i)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const Gz=t=>t!==null;function Tf(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(Gz),l=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const Kz={decay:j0,inertia:j0,tween:fo,keyframes:fo,spring:ed};function j2(t){typeof t.type=="string"&&(t.type=Kz[t.type])}class If{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Qz=t=>t/100;class Af extends If{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==fn.now()&&this.tick(fn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;j2(e);const{type:n=fo,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:o=0}=e;let{keyframes:l}=e;const c=n||fo;c!==fo&&typeof l[0]!="number"&&(this.mixKeyframes=sl(Qz,v2(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Ef(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:h,repeat:m,repeatType:f,repeatDelay:y,type:_,onUpdate:A,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let j=this.currentTime,R=r;if(m){const x=Math.min(this.currentTime,i)/l;let N=Math.floor(x),C=x%1;!C&&x>=1&&(C=1),C===1&&N--,N=Math.min(N,m+1),!!(N%2)&&(f==="reverse"?(C=1-C,y&&(C-=y/l)):f==="mirror"&&(R=o)),j=Sr(0,1,C)*l}const O=w?{done:!1,value:h[0]}:R.next(j);a&&(O.value=a(O.value));let{done:L}=O;!w&&c!==null&&(L=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const v=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return v&&_!==j0&&(O.value=Tf(h,this.options,P,this.speed)),A&&A(O.value),v&&this.finish(),O}then(e,n){return this.finished.then(e,n)}get duration(){return An(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+An(e)}get time(){return An(this.currentTime)}set time(e){var n;e=ar(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(fn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=An(this.currentTime))}play(){var i,a;if(this.isStopped)return;const{driver:e=Pz,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(i=this.options).onPlay)==null||a.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(fn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Yz(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ui=t=>t*180/Math.PI,N0=t=>{const e=Ui(Math.atan2(t[1],t[0]));return _0(e)},Xz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:N0,rotateZ:N0,skewX:t=>Ui(Math.atan(t[1])),skewY:t=>Ui(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},_0=t=>(t=t%360,t<0&&(t+=360),t),Ux=N0,$x=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Wx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Jz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:$x,scaleY:Wx,scale:t=>($x(t)+Wx(t))/2,rotateX:t=>_0(Ui(Math.atan2(t[6],t[5]))),rotateY:t=>_0(Ui(Math.atan2(-t[2],t[0]))),rotateZ:Ux,rotate:Ux,skewX:t=>Ui(Math.atan(t[4])),skewY:t=>Ui(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function z0(t){return t.includes("scale")?1:0}function C0(t,e){if(!t||t==="none")return z0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Jz,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Xz,i=l}if(!i)return z0(e);const a=r[e],o=i[1].split(",").map(eC);return typeof a=="function"?a(o):o[a]}const Zz=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return C0(n,e)};function eC(t){return parseFloat(t.trim())}const fa=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],pa=new Set(fa),qx=t=>t===ma||t===Se,tC=new Set(["x","y","z"]),nC=fa.filter(t=>!tC.has(t));function rC(t){const e=[];return nC.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Gi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>C0(e,"x"),y:(t,{transform:e})=>C0(e,"y")};Gi.translateX=Gi.x;Gi.translateY=Gi.y;const Ki=new Set;let S0=!1,E0=!1,T0=!1;function N2(){if(E0){const t=Array.from(Ki).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=rC(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,o])=>{var l;(l=r.getValue(a))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}E0=!1,S0=!1,Ki.forEach(t=>t.complete(T0)),Ki.clear()}function _2(){Ki.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(E0=!0)})}function iC(){T0=!0,_2(),N2(),T0=!1}class Pf{constructor(e,n,r,i,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ki.add(this),S0||(S0=!0,st.read(_2),st.resolveKeyframes(N2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i==null?void 0:i.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&a===void 0&&i.set(e[0])}Yz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ki.delete(this)}cancel(){this.state==="scheduled"&&(Ki.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const sC=t=>t.startsWith("--");function aC(t,e,n){sC(e)?t.style.setProperty(e,n):t.style[e]=n}const oC=wf(()=>window.ScrollTimeline!==void 0),lC={};function cC(t,e){const n=wf(t);return()=>lC[e]??n()}const z2=cC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ja=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Hx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ja([0,.65,.55,1]),circOut:Ja([.55,0,1,.45]),backIn:Ja([.31,.01,.66,-.59]),backOut:Ja([.33,1.53,.69,.99])};function C2(t,e){if(t)return typeof t=="function"?z2()?b2(t,e):"ease-out":c2(t)?Ja(t):Array.isArray(t)?t.map(n=>C2(n,e)||Hx.easeOut):Hx[t]}function dC(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const h={[e]:n};c&&(h.offset=c);const m=C2(l,i);Array.isArray(m)&&(h.easing=m);const f={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),t.animate(h,f)}function S2(t){return typeof t=="function"&&"applyToOptions"in t}function uC({type:t,...e}){return S2(t)&&z2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class hC extends If{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,bf(typeof e.type!="string");const u=uC(e);this.animation=dC(n,r,i,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=Tf(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):aC(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return An(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+An(e)}get time(){return An(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ar(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&oC()?(this.animation.timeline=e,Rn):n(this)}}const E2={anticipate:s2,backInOut:i2,circInOut:o2};function mC(t){return t in E2}function fC(t){typeof t.ease=="string"&&mC(t.ease)&&(t.ease=E2[t.ease])}const Gx=10;class pC extends hC{constructor(e){fC(e),j2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Af({...o,autoplay:!1}),c=ar(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Gx).value,l.sample(c).value,Gx),l.stop()}}const Kx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(hi.test(t)||t==="0")&&!t.startsWith("url("));function gC(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function xC(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=Kx(i,e),l=Kx(a,e);return!o||!l?!1:gC(t)||(n==="spring"||S2(n))&&r}function I0(t){t.duration=0,t.type="keyframes"}const yC=new Set(["opacity","clipPath","filter","transform"]),vC=wf(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function bC(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return vC()&&n&&yC.has(n)&&(n!=="transform"||!u)&&!c&&!r&&i!=="mirror"&&a!==0&&o!=="inertia"}const wC=40;class kC extends If{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:h,...m}){var _;super(),this.stop=()=>{var A,P;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=fn.now();const f={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:h,...m},y=(h==null?void 0:h.KeyframeResolver)||Pf;this.keyframeResolver=new y(l,(A,P,b)=>this.onKeyframesResolved(A,P,f,!b),c,u,h),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:h}=r;this.resolvedAt=fn.now(),xC(e,a,o,l)||((Er.instantAnimations||!c)&&(h==null||h(Tf(e,r,n))),e[0]=e[e.length-1],I0(r),r.repeat=0);const f={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>wC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!u&&bC(f)?new pC({...f,element:f.motionValue.owner.current}):new Af(f);y.finished.then(()=>this.notifyFinished()).catch(Rn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),iC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const jC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NC(t){const e=jC.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function T2(t,e,n=1){const[r,i]=NC(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return Yw(o)?parseFloat(o):o}return _f(i)?T2(i,e,n+1):i}function Rf(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const I2=new Set(["width","height","top","left","right","bottom",...fa]),_C={test:t=>t==="auto",parse:t=>t},A2=t=>e=>e.test(t),P2=[ma,Se,or,Wr,xz,gz,_C],Qx=t=>P2.find(A2(t));function zC(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Jw(t):!0}const CC=new Set(["brightness","contrast","saturate","opacity"]);function SC(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(zf)||[];if(!r)return t;const i=n.replace(r,"");let a=CC.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const EC=/\b([a-z-]*)\(.*?\)/gu,A0={...hi,getAnimatableNone:t=>{const e=t.match(EC);return e?e.map(SC).join(" "):t}},Yx={...ma,transform:Math.round},TC={rotate:Wr,rotateX:Wr,rotateY:Wr,rotateZ:Wr,scale:ql,scaleX:ql,scaleY:ql,scaleZ:ql,skew:Wr,skewX:Wr,skewY:Wr,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:Bo,originX:Vx,originY:Vx,originZ:Se},Df={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,radius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,top:Se,right:Se,bottom:Se,left:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,backgroundPositionX:Se,backgroundPositionY:Se,...TC,zIndex:Yx,fillOpacity:Bo,strokeOpacity:Bo,numOctaves:Yx},IC={...Df,color:wt,backgroundColor:wt,outlineColor:wt,fill:wt,stroke:wt,borderColor:wt,borderTopColor:wt,borderRightColor:wt,borderBottomColor:wt,borderLeftColor:wt,filter:A0,WebkitFilter:A0},R2=t=>IC[t];function D2(t,e){let n=R2(t);return n!==A0&&(n=hi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const AC=new Set(["auto","none","0"]);function PC(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!AC.has(a)&&Uo(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=D2(n,i)}class RC extends Pf{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),_f(u))){const h=T2(u,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!I2.has(r)||e.length!==2)return;const[i,a]=e,o=Qx(i),l=Qx(a);if(o!==l)if(qx(o)&&qx(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else Gi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||zC(e[i]))&&r.push(i);r.length&&PC(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Gi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=Gi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function DC(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const M2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function V2(t){return Xw(t)&&"offsetHeight"in t}const Xx=30,MC=t=>!isNaN(parseFloat(t)),po={current:void 0};class VC{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const i=fn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=fn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=MC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new kf);const r=this.events[e].add(n);return e==="change"?()=>{r(),st.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return po.current&&po.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=fn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Xx);return Zw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ts(t,e){return new VC(t,e)}const{schedule:Mf}=d2(queueMicrotask,!1),Un={x:!1,y:!1};function L2(){return Un.x||Un.y}function LC(t){return t==="x"||t==="y"?Un[t]?null:(Un[t]=!0,()=>{Un[t]=!1}):Un.x||Un.y?null:(Un.x=Un.y=!0,()=>{Un.x=Un.y=!1})}function O2(t,e){const n=DC(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Jx(t){return!(t.pointerType==="touch"||L2())}function OC(t,e,n={}){const[r,i,a]=O2(t,n),o=l=>{if(!Jx(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const h=m=>{Jx(m)&&(u(m),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),a}const F2=(t,e)=>e?t===e?!0:F2(t,e.parentElement):!1,Vf=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,FC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function BC(t){return FC.has(t.tagName)||t.tabIndex!==-1}const pc=new WeakSet;function Zx(t){return e=>{e.key==="Enter"&&t(e)}}function Xu(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const UC=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Zx(()=>{if(pc.has(n))return;Xu(n,"down");const i=Zx(()=>{Xu(n,"up")}),a=()=>Xu(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function ey(t){return Vf(t)&&!L2()}function $C(t,e,n={}){const[r,i,a]=O2(t,n),o=l=>{const c=l.currentTarget;if(!ey(l))return;pc.add(c);const u=e(c,l),h=(y,_)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",f),pc.has(c)&&pc.delete(c),ey(y)&&typeof u=="function"&&u(y,{success:_})},m=y=>{h(y,c===window||c===document||n.useGlobalTarget||F2(c,y.target))},f=y=>{h(y,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",f,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),V2(l)&&(l.addEventListener("focus",u=>UC(u,i)),!BC(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function B2(t){return Xw(t)&&"ownerSVGElement"in t}function WC(t){return B2(t)&&t.tagName==="svg"}function qC(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],a=t[2+n],o=t[3+n],l=k2(i,a,o);return e?l(r):l}const Bt=t=>!!(t&&t.getVelocity),HC=[...P2,wt,hi],GC=t=>HC.find(A2(t)),Vd=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ty(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function KC(...t){return e=>{let n=!1;const r=t.map(i=>{const a=ty(i,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let i=0;i<r.length;i++){const a=r[i];typeof a=="function"?a():ty(t[i],null)}}}}function QC(...t){return k.useCallback(KC(...t),t)}class YC extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=V2(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function XC({children:t,isPresent:e,anchorX:n,root:r}){const i=k.useId(),a=k.useRef(null),o=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(Vd),c=QC(a,t==null?void 0:t.ref);return k.useInsertionEffect(()=>{const{width:u,height:h,top:m,left:f,right:y}=o.current;if(e||!a.current||!u||!h)return;const _=n==="left"?`left: ${f}`:`right: ${y}`;a.current.dataset.motionPopId=i;const A=document.createElement("style");l&&(A.nonce=l);const P=r??document.head;return P.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${m}px !important;
          }
        `),()=>{P.contains(A)&&P.removeChild(A)}},[e]),s.jsx(YC,{isPresent:e,childRef:a,sizeRef:o,children:k.cloneElement(t,{ref:c})})}const JC=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:o,anchorX:l,root:c})=>{const u=Ni(ZC),h=k.useId();let m=!0,f=k.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:y=>{u.set(y,!0);for(const _ of u.values())if(!_)return;r&&r()},register:y=>(u.set(y,!1),()=>u.delete(y))}),[n,u,r]);return a&&m&&(f={...f}),k.useMemo(()=>{u.forEach((y,_)=>u.set(_,!1))},[n]),k.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=s.jsx(XC,{isPresent:n,anchorX:l,root:c,children:t})),s.jsx(Md.Provider,{value:f,children:t})};function ZC(){return new Map}function U2(t=!0){const e=k.useContext(Md);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=k.useId();k.useEffect(()=>{if(t)return i(a)},[t]);const o=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const Hl=t=>t.key||"";function ny(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const Te=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,h]=U2(o),m=k.useMemo(()=>ny(t),[t]),f=o&&!u?[]:m.map(Hl),y=k.useRef(!0),_=k.useRef(m),A=Ni(()=>new Map),[P,b]=k.useState(m),[w,j]=k.useState(m);xf(()=>{y.current=!1,_.current=m;for(let L=0;L<w.length;L++){const v=Hl(w[L]);f.includes(v)?A.delete(v):A.get(v)!==!0&&A.set(v,!1)}},[w,f.length,f.join("-")]);const R=[];if(m!==P){let L=[...m];for(let v=0;v<w.length;v++){const x=w[v],N=Hl(x);f.includes(N)||(L.splice(v,0,x),R.push(x))}return a==="wait"&&R.length&&(L=R),j(ny(L)),b(m),null}const{forceRender:O}=k.useContext(pf);return s.jsx(s.Fragment,{children:w.map(L=>{const v=Hl(L),x=o&&!u?!1:m===w||f.includes(v),N=()=>{if(A.has(v))A.set(v,!0);else return;let C=!0;A.forEach(z=>{z||(C=!1)}),C&&(O==null||O(),j(_.current),o&&(h==null||h()),r&&r())};return s.jsx(JC,{isPresent:x,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,root:c,onExitComplete:x?void 0:N,anchorX:l,children:L},v)})})},$2=k.createContext({strict:!1}),ry={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},na={};for(const t in ry)na[t]={isEnabled:e=>ry[t].some(n=>!!e[n])};function eS(t){for(const e in t)na[e]={...na[e],...t[e]}}const tS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function td(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||tS.has(t)}let W2=t=>!td(t);function nS(t){typeof t=="function"&&(W2=e=>e.startsWith("on")?!td(e):t(e))}try{nS(require("@emotion/is-prop-valid").default)}catch{}function rS(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(W2(i)||n===!0&&td(i)||!e&&!td(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Ld=k.createContext({});function Od(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $o(t){return typeof t=="string"||Array.isArray(t)}const Lf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Of=["initial",...Lf];function Fd(t){return Od(t.animate)||Of.some(e=>$o(t[e]))}function q2(t){return!!(Fd(t)||t.variants)}function iS(t,e){if(Fd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$o(n)?n:void 0,animate:$o(r)?r:void 0}}return t.inherit!==!1?e:{}}function sS(t){const{initial:e,animate:n}=iS(t,k.useContext(Ld));return k.useMemo(()=>({initial:e,animate:n}),[iy(e),iy(n)])}function iy(t){return Array.isArray(t)?t.join(" "):t}function sy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $a={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Se.test(t))t=parseFloat(t);else return t;const n=sy(t,e.target.x),r=sy(t,e.target.y);return`${n}% ${r}%`}},aS={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=hi.parse(t);if(i.length>5)return r;const a=hi.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const u=ot(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),a(i)}},P0={borderRadius:{...$a,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$a,borderTopRightRadius:$a,borderBottomLeftRadius:$a,borderBottomRightRadius:$a,boxShadow:aS};function H2(t,{layout:e,layoutId:n}){return pa.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!P0[t]||t==="opacity")}const oS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},lS=fa.length;function cS(t,e,n){let r="",i=!0;for(let a=0;a<lS;a++){const o=fa[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=M2(l,Df[o]);if(!c){i=!1;const h=oS[o]||o;r+=`${h}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Ff(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(pa.has(c)){o=!0;continue}else if(h2(c)){i[c]=u;continue}else{const h=M2(u,Df[c]);c.startsWith("origin")?(l=!0,a[c]=h):r[c]=h}}if(e.transform||(o||n?r.transform=cS(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=a;r.transformOrigin=`${c} ${u} ${h}`}}const Bf=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function G2(t,e,n){for(const r in e)!Bt(e[r])&&!H2(r,n)&&(t[r]=e[r])}function dS({transformTemplate:t},e){return k.useMemo(()=>{const n=Bf();return Ff(n,e,t),Object.assign({},n.vars,n.style)},[e])}function uS(t,e){const n=t.style||{},r={};return G2(r,n,t),Object.assign(r,dS(t,e)),r}function hS(t,e){const n={},r=uS(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const mS={offset:"stroke-dashoffset",array:"stroke-dasharray"},fS={offset:"strokeDashoffset",array:"strokeDasharray"};function pS(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?mS:fS;t[a.offset]=Se.transform(-r);const o=Se.transform(e),l=Se.transform(n);t[a.array]=`${o} ${l}`}function K2(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:o=0,...l},c,u,h){if(Ff(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:f}=t;m.transform&&(f.transform=m.transform,delete m.transform),(f.transform||m.transformOrigin)&&(f.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),f.transform&&(f.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&pS(m,i,a,o,!1)}const Q2=()=>({...Bf(),attrs:{}}),Y2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function gS(t,e,n,r){const i=k.useMemo(()=>{const a=Q2();return K2(a,e,Y2(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};G2(a,t.style,t),i.style={...a,...i.style}}return i}const xS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Uf(t){return typeof t!="string"||t.includes("-")?!1:!!(xS.indexOf(t)>-1||/[A-Z]/u.test(t))}function yS(t,e,n,{latestValues:r},i,a=!1){const l=(Uf(t)?gS:hS)(e,r,i,t),c=rS(e,typeof t=="string",a),u=t!==k.Fragment?{...c,...l,ref:n}:{},{children:h}=e,m=k.useMemo(()=>Bt(h)?h.get():h,[h]);return k.createElement(t,{...u,children:m})}function ay(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function $f(t,e,n,r){if(typeof e=="function"){const[i,a]=ay(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=ay(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function gc(t){return Bt(t)?t.get():t}function vS({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:bS(n,r,i,t),renderState:e()}}function bS(t,e,n,r){const i={},a=r(t,{});for(const f in a)i[f]=gc(a[f]);let{initial:o,animate:l}=t;const c=Fd(t),u=q2(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!Od(m)){const f=Array.isArray(m)?m:[m];for(let y=0;y<f.length;y++){const _=$f(t,f[y]);if(_){const{transitionEnd:A,transition:P,...b}=_;for(const w in b){let j=b[w];if(Array.isArray(j)){const R=h?j.length-1:0;j=j[R]}j!==null&&(i[w]=j)}for(const w in A)i[w]=A[w]}}}return i}const X2=t=>(e,n)=>{const r=k.useContext(Ld),i=k.useContext(Md),a=()=>vS(t,e,r,i);return n?a():Ni(a)};function Wf(t,e,n){var a;const{style:r}=t,i={};for(const o in r)(Bt(r[o])||e.style&&Bt(e.style[o])||H2(o,t)||((a=n==null?void 0:n.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const wS=X2({scrapeMotionValuesFromProps:Wf,createRenderState:Bf});function J2(t,e,n){const r=Wf(t,e,n);for(const i in t)if(Bt(t[i])||Bt(e[i])){const a=fa.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const kS=X2({scrapeMotionValuesFromProps:J2,createRenderState:Q2}),jS=Symbol.for("motionComponentSymbol");function Rs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function NS(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Rs(n)&&(n.current=r))},[e])}const qf=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),_S="framerAppearId",Z2="data-"+qf(_S),ek=k.createContext({});function zS(t,e,n,r,i){var A,P;const{visualElement:a}=k.useContext(Ld),o=k.useContext($2),l=k.useContext(Md),c=k.useContext(Vd).reducedMotion,u=k.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=u.current,m=k.useContext(ek);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&CS(u.current,n,i,m);const f=k.useRef(!1);k.useInsertionEffect(()=>{h&&f.current&&h.update(n,l)});const y=n[Z2],_=k.useRef(!!y&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,y))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,y)));return xf(()=>{h&&(f.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,y)}),_.current=!1),h.enteringChildren=void 0)}),h}function CS(t,e,n,r){const{layoutId:i,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:tk(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!o||l&&Rs(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:u})}function tk(t){if(t)return t.options.allowProjection!==!1?t.projection:tk(t.parent)}function Ju(t,{forwardMotionProps:e=!1}={},n,r){n&&eS(n);const i=Uf(t)?kS:wS;function a(l,c){let u;const h={...k.useContext(Vd),...l,layoutId:SS(l)},{isStatic:m}=h,f=sS(l),y=i(l,m);if(!m&&gf){ES();const _=TS(h);u=_.MeasureLayout,f.visualElement=zS(t,y,h,r,_.ProjectionNode)}return s.jsxs(Ld.Provider,{value:f,children:[u&&f.visualElement?s.jsx(u,{visualElement:f.visualElement,...h}):null,yS(t,l,NS(y,f.visualElement,c),y,m,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=k.forwardRef(a);return o[jS]=t,o}function SS({layoutId:t}){const e=k.useContext(pf).id;return e&&t!==void 0?e+"-"+t:t}function ES(t,e){k.useContext($2).strict}function TS(t){const{drag:e,layout:n}=na;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function IS(t,e){if(typeof Proxy>"u")return Ju;const n=new Map,r=(a,o)=>Ju(a,o,t,e),i=(a,o)=>r(a,o);return new Proxy(i,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,Ju(o,void 0,t,e)),n.get(o))})}function nk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function AS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function PS(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Zu(t){return t===void 0||t===1}function R0({scale:t,scaleX:e,scaleY:n}){return!Zu(t)||!Zu(e)||!Zu(n)}function Di(t){return R0(t)||rk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rk(t){return oy(t.x)||oy(t.y)}function oy(t){return t&&t!=="0%"}function nd(t,e,n){const r=t-n,i=e*r;return n+i}function ly(t,e,n,r,i){return i!==void 0&&(t=nd(t,i,r)),nd(t,n,r)+e}function D0(t,e=0,n=1,r,i){t.min=ly(t.min,e,n,r,i),t.max=ly(t.max,e,n,r,i)}function ik(t,{x:e,y:n}){D0(t.x,e.translate,e.scale,e.originPoint),D0(t.y,n.translate,n.scale,n.originPoint)}const cy=.999999999999,dy=1.0000000000001;function RS(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,o;for(let l=0;l<i;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ms(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,ik(t,o)),r&&Di(a.latestValues)&&Ms(t,a.latestValues))}e.x<dy&&e.x>cy&&(e.x=1),e.y<dy&&e.y>cy&&(e.y=1)}function Ds(t,e){t.min=t.min+e,t.max=t.max+e}function uy(t,e,n,r,i=.5){const a=ot(t.min,t.max,i);D0(t,e,n,a,r)}function Ms(t,e){uy(t.x,e.x,e.scaleX,e.scale,e.originX),uy(t.y,e.y,e.scaleY,e.scale,e.originY)}function sk(t,e){return nk(PS(t.getBoundingClientRect(),e))}function DS(t,e,n){const r=sk(t,n),{scroll:i}=e;return i&&(Ds(r.x,i.offset.x),Ds(r.y,i.offset.y)),r}const hy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vs=()=>({x:hy(),y:hy()}),my=()=>({min:0,max:0}),St=()=>({x:my(),y:my()}),M0={current:null},ak={current:!1};function MS(){if(ak.current=!0,!!gf)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>M0.current=t.matches;t.addEventListener("change",e),e()}else M0.current=!1}const VS=new WeakMap;function LS(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Bt(i))t.addValue(r,i);else if(Bt(a))t.addValue(r,ts(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,ts(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const fy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class OS{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Pf,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=fn.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,st.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Fd(n),this.isVariantNode=q2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in m){const y=m[f];c[f]!==void 0&&Bt(y)&&y.set(c[f])}}mount(e){var n;this.current=e,VS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),ak.current||MS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:M0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Tr(this.notifyUpdate),Tr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=pa.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&st.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in na){const n=na[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fy.length;r++){const i=fy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,o=e[a];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=LS(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ts(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Yw(r)||Jw(r))?r=parseFloat(r):!GC(r)&&hi.test(n)&&(r=D2(e,n)),this.setBaseTarget(e,Bt(r)?r.get():r)),Bt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=$f(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Bt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new kf),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Mf.render(this.render)}}class ok extends OS{constructor(){super(...arguments),this.KeyframeResolver=RC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function lk(t,{style:e,vars:n},r,i){const a=t.style;let o;for(o in e)a[o]=e[o];i==null||i.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function FS(t){return window.getComputedStyle(t)}class BS extends ok{constructor(){super(...arguments),this.type="html",this.renderInstance=lk}readValueFromInstance(e,n){var r;if(pa.has(n))return(r=this.projection)!=null&&r.isProjecting?z0(n):Zz(e,n);{const i=FS(e),a=(h2(n)?i.getPropertyValue(n):i[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sk(e,n)}build(e,n,r){Ff(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Wf(e,n,r)}}const ck=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function US(t,e,n,r){lk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(ck.has(i)?i:qf(i),e.attrs[i])}class $S extends ok{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(pa.has(n)){const r=R2(n);return r&&r.default||0}return n=ck.has(n)?n:qf(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return J2(e,n,r)}build(e,n,r){K2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){US(e,n,r,i)}mount(e){this.isSVGTag=Y2(e.tagName),super.mount(e)}}const WS=(t,e)=>Uf(t)?new $S(e):new BS(e,{allowProjection:t!==k.Fragment});function Ws(t,e,n){const r=t.getProps();return $f(r,e,n!==void 0?n:r.custom,t)}const V0=t=>Array.isArray(t);function qS(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ts(n))}function HS(t){return V0(t)?t[t.length-1]||0:t}function GS(t,e){const n=Ws(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const o in a){const l=HS(a[o]);qS(t,o,l)}}function KS(t){return!!(Bt(t)&&t.add)}function L0(t,e){const n=t.getValue("willChange");if(KS(n))return n.add(e);if(!n&&Er.WillChange){const r=new Er.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function dk(t){return t.props[Z2]}const QS=t=>t!==null;function YS(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(QS),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const XS={type:"spring",stiffness:500,damping:25,restSpeed:10},JS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),ZS={type:"keyframes",duration:.8},eE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tE=(t,{keyframes:e})=>e.length>2?ZS:pa.has(t)?t.startsWith("scale")?JS(e[1]):XS:eE;function nE({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const Hf=(t,e,n,r={},i,a)=>o=>{const l=Rf(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-ar(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:f=>{e.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:i};nE(l)||Object.assign(h,tE(t,h)),h.duration&&(h.duration=ar(h.duration)),h.repeatDelay&&(h.repeatDelay=ar(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(I0(h),h.delay===0&&(m=!0)),(Er.instantAnimations||Er.skipAnimations)&&(m=!0,I0(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!a&&e.get()!==void 0){const f=YS(h.keyframes,l);if(f!==void 0){st.update(()=>{h.onUpdate(f),h.onComplete()});return}}return l.isSync?new Af(h):new kC(h)};function rE({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function uk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const c=[],u=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const m=t.getValue(h,t.latestValues[h]??null),f=l[h];if(f===void 0||u&&rE(u,h))continue;const y={delay:n,...Rf(a||{},h)},_=m.get();if(_!==void 0&&!m.isAnimating&&!Array.isArray(f)&&f===_&&!y.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const b=dk(t);if(b){const w=window.MotionHandoffAnimation(b,h,st);w!==null&&(y.startTime=w,A=!0)}}L0(t,h),m.start(Hf(h,m,f,t.shouldReduceMotion&&I2.has(h)?{type:!1}:y,t,A));const P=m.animation;P&&c.push(P)}return o&&Promise.all(c).then(()=>{st.update(()=>{o&&GS(t,o)})}),c}function hk(t,e,n,r=0,i=1){const a=Array.from(t).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(a,o):i===1?a*r:l-a*r}function O0(t,e,n={}){var c;const r=Ws(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(uk(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:f}=i;return iE(t,e,u,h,m,f,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,h]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function iE(t,e,n=0,r=0,i=0,a=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(O0(c,e,{...o,delay:n+(typeof r=="function"?0:r)+hk(t.variantChildren,c,r,i,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function sE(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>O0(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=O0(t,e,n);else{const i=typeof e=="function"?Ws(t,e,n.custom):e;r=Promise.all(uk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function mk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const aE=Of.length;function fk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<aE;n++){const r=Of[n],i=t.props[r];($o(i)||i===!1)&&(e[r]=i)}return e}const oE=[...Lf].reverse(),lE=Lf.length;function cE(t){return e=>Promise.all(e.map(({animation:n,options:r})=>sE(t,n,r)))}function dE(t){let e=cE(t),n=py(),r=!0;const i=c=>(u,h)=>{var f;const m=Ws(t,h,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(m){const{transition:y,transitionEnd:_,...A}=m;u={...u,...A,..._}}return u};function a(c){e=c(t)}function o(c){const{props:u}=t,h=fk(t.parent)||{},m=[],f=new Set;let y={},_=1/0;for(let P=0;P<lE;P++){const b=oE[P],w=n[b],j=u[b]!==void 0?u[b]:h[b],R=$o(j),O=b===c?w.isActive:null;O===!1&&(_=P);let L=j===h[b]&&j!==u[b]&&R;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),w.protectedKeys={...y},!w.isActive&&O===null||!j&&!w.prevProp||Od(j)||typeof j=="boolean")continue;const v=uE(w.prevProp,j);let x=v||b===c&&w.isActive&&!L&&R||P>_&&R,N=!1;const C=Array.isArray(j)?j:[j];let z=C.reduce(i(b),{});O===!1&&(z={});const{prevResolvedValues:I={}}=w,T={...I,...z},pe=ke=>{x=!0,f.has(ke)&&(N=!0,f.delete(ke)),w.needsAnimating[ke]=!0;const X=t.getValue(ke);X&&(X.liveStyle=!1)};for(const ke in T){const X=z[ke],ae=I[ke];if(y.hasOwnProperty(ke))continue;let se=!1;V0(X)&&V0(ae)?se=!mk(X,ae):se=X!==ae,se?X!=null?pe(ke):f.add(ke):X!==void 0&&f.has(ke)?pe(ke):w.protectedKeys[ke]=!0}w.prevProp=j,w.prevResolvedValues=z,w.isActive&&(y={...y,...z}),r&&t.blockInitialAnimation&&(x=!1);const de=L&&v;x&&(!de||N)&&m.push(...C.map(ke=>{const X={type:b};if(typeof ke=="string"&&r&&!de&&t.manuallyAnimateOnMount&&t.parent){const{parent:ae}=t,se=Ws(ae,ke);if(ae.enteringChildren&&se){const{delayChildren:we}=se.transition||{};X.delay=hk(ae.enteringChildren,t,we)}}return{animation:ke,options:X}}))}if(f.size){const P={};if(typeof u.initial!="boolean"){const b=Ws(t,Array.isArray(u.initial)?u.initial[0]:u.initial);b&&b.transition&&(P.transition=b.transition)}f.forEach(b=>{const w=t.getBaseTarget(b),j=t.getValue(b);j&&(j.liveStyle=!0),P[b]=w??null}),m.push({animation:P})}let A=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(m):Promise.resolve()}function l(c,u){var m;if(n[c].isActive===u)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(f=>{var y;return(y=f.animationState)==null?void 0:y.setActive(c,u)}),n[c].isActive=u;const h=o(c);for(const f in n)n[f].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=py()}}}function uE(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!mk(e,t):!1}function Ii(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function py(){return{animate:Ii(!0),whileInView:Ii(),whileHover:Ii(),whileTap:Ii(),whileDrag:Ii(),whileFocus:Ii(),exit:Ii()}}class _i{constructor(e){this.isMounted=!1,this.node=e}update(){}}class hE extends _i{constructor(e){super(e),e.animationState||(e.animationState=dE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Od(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let mE=0;class fE extends _i{constructor(){super(...arguments),this.id=mE++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const pE={animation:{Feature:hE},exit:{Feature:fE}};function Wo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ll(t){return{point:{x:t.pageX,y:t.pageY}}}const gE=t=>e=>Vf(e)&&t(e,ll(e));function go(t,e,n,r){return Wo(t,e,gE(n),r)}const pk=1e-4,xE=1-pk,yE=1+pk,gk=.01,vE=0-gk,bE=0+gk;function rn(t){return t.max-t.min}function wE(t,e,n){return Math.abs(t-e)<=n}function gy(t,e,n,r=.5){t.origin=r,t.originPoint=ot(e.min,e.max,t.origin),t.scale=rn(n)/rn(e),t.translate=ot(n.min,n.max,t.origin)-t.originPoint,(t.scale>=xE&&t.scale<=yE||isNaN(t.scale))&&(t.scale=1),(t.translate>=vE&&t.translate<=bE||isNaN(t.translate))&&(t.translate=0)}function xo(t,e,n,r){gy(t.x,e.x,n.x,r?r.originX:void 0),gy(t.y,e.y,n.y,r?r.originY:void 0)}function xy(t,e,n){t.min=n.min+e.min,t.max=t.min+rn(e)}function kE(t,e,n){xy(t.x,e.x,n.x),xy(t.y,e.y,n.y)}function yy(t,e,n){t.min=e.min-n.min,t.max=t.min+rn(e)}function rd(t,e,n){yy(t.x,e.x,n.x),yy(t.y,e.y,n.y)}function zn(t){return[t("x"),t("y")]}const xk=({current:t})=>t?t.ownerDocument.defaultView:null,vy=(t,e)=>Math.abs(t-e);function jE(t,e){const n=vy(t.x,e.x),r=vy(t.y,e.y);return Math.sqrt(n**2+r**2)}class yk{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=th(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,_=jE(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!_)return;const{point:A}=f,{timestamp:P}=Lt;this.history.push({...A,timestamp:P});const{onStart:b,onMove:w}=this.handlers;y||(b&&b(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,y)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=eh(y,this.transformPagePoint),st.update(this.updatePoint,!0)},this.handlePointerUp=(f,y)=>{this.end();const{onEnd:_,onSessionEnd:A,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=th(f.type==="pointercancel"?this.lastMoveEventInfo:eh(y,this.transformPagePoint),this.history);this.startEvent&&_&&_(f,b),A&&A(f,b)},!Vf(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=ll(e),c=eh(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=Lt;this.history=[{...u,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,th(c,this.history)),this.removeListeners=sl(go(this.contextWindow,"pointermove",this.handlePointerMove),go(this.contextWindow,"pointerup",this.handlePointerUp),go(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Tr(this.updatePoint)}}function eh(t,e){return e?{point:e(t.point)}:t}function by(t,e){return{x:t.x-e.x,y:t.y-e.y}}function th({point:t},e){return{point:t,delta:by(t,vk(e)),offset:by(t,NE(e)),velocity:_E(e,.1)}}function NE(t){return t[0]}function vk(t){return t[t.length-1]}function _E(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ar(e)));)n--;if(!r)return{x:0,y:0};const a=An(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function zE(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?ot(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?ot(n,t,r.max):Math.min(t,n)),t}function wy(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function CE(t,{top:e,left:n,bottom:r,right:i}){return{x:wy(t.x,n,i),y:wy(t.y,e,r)}}function ky(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function SE(t,e){return{x:ky(t.x,e.x),y:ky(t.y,e.y)}}function EE(t,e){let n=.5;const r=rn(t),i=rn(e);return i>r?n=Fo(e.min,e.max-r,t.min):r>i&&(n=Fo(t.min,t.max-i,e.min)),Sr(0,1,n)}function TE(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const F0=.35;function IE(t=F0){return t===!1?t=0:t===!0&&(t=F0),{x:jy(t,"left","right"),y:jy(t,"top","bottom")}}function jy(t,e,n){return{min:Ny(t,e),max:Ny(t,n)}}function Ny(t,e){return typeof t=="number"?t:t[e]||0}const AE=new WeakMap;class PE{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ll(m).point)},o=(m,f)=>{const{drag:y,dragPropagation:_,onDragStart:A}=this.getProps();if(y&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=LC(y),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),zn(b=>{let w=this.getAxisMotionValue(b).get()||0;if(or.test(w)){const{projection:j}=this.visualElement;if(j&&j.layout){const R=j.layout.layoutBox[b];R&&(w=rn(R)*(parseFloat(w)/100))}}this.originPoint[b]=w}),A&&st.postRender(()=>A(m,f)),L0(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(m,f)=>{this.latestPointerEvent=m,this.latestPanInfo=f;const{dragPropagation:y,dragDirectionLock:_,onDirectionLock:A,onDrag:P}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:b}=f;if(_&&this.currentDirection===null){this.currentDirection=RE(b),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",f.point,b),this.updateAxis("y",f.point,b),this.visualElement.render(),P&&P(m,f)},c=(m,f)=>{this.latestPointerEvent=m,this.latestPanInfo=f,this.stop(m,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>zn(m=>{var f;return this.getAnimationState(m)==="paused"&&((f=this.getAxisMotionValue(m).animation)==null?void 0:f.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new yk(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:xk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&st.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Gl(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=zE(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,i=this.constraints;e&&Rs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=CE(r.layoutBox,e):this.constraints=!1,this.elastic=IE(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&zn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=TE(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Rs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=DS(r,i.root,this.visualElement.getTransformPagePoint());let o=SE(i.layout.layoutBox,a);if(n){const l=n(AS(o));this.hasMutatedConstraints=!!l,l&&(o=nk(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=zn(h=>{if(!Gl(h,n,this.currentDirection))return;let m=c&&c[h]||{};o&&(m={min:0,max:0});const f=i?200:1e6,y=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(h,_)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return L0(this.visualElement,e),r.start(Hf(e,r,0,n,this.visualElement,!1))}stopAnimation(){zn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){zn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){zn(n=>{const{drag:r}=this.getProps();if(!Gl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];a.set(e[n]-ot(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Rs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};zn(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=EE({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),zn(o=>{if(!Gl(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(ot(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;AE.set(this.visualElement,this);const e=this.visualElement.current,n=go(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Rs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),st.read(r);const o=Wo(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(zn(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=c[h].translate,m.set(m.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=F0,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function Gl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function RE(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class DE extends _i{constructor(e){super(e),this.removeGroupControls=Rn,this.removeListeners=Rn,this.controls=new PE(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Rn}unmount(){this.removeGroupControls(),this.removeListeners()}}const _y=t=>(e,n)=>{t&&st.postRender(()=>t(e,n))};class ME extends _i{constructor(){super(...arguments),this.removePointerDownListener=Rn}onPointerDown(e){this.session=new yk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:_y(e),onStart:_y(n),onMove:r,onEnd:(a,o)=>{delete this.session,i&&st.postRender(()=>i(a,o))}}}mount(){this.removePointerDownListener=go(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let nh=!1;class VE extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),nh&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),xc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,nh=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||st.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Mf.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;nh=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bk(t){const[e,n]=U2(),r=k.useContext(pf);return s.jsx(VE,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(ek),isPresent:e,safeToRemove:n})}function LE(t,e,n){const r=Bt(t)?t:ts(t);return r.start(Hf("",r,e,n)),r.animation}const OE=(t,e)=>t.depth-e.depth;class FE{constructor(){this.children=[],this.isDirty=!1}add(e){yf(this.children,e),this.isDirty=!0}remove(e){vf(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(OE),this.isDirty=!1,this.children.forEach(e)}}function BE(t,e){const n=fn.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(Tr(r),t(a-e))};return st.setup(r,!0),()=>Tr(r)}const wk=["TopLeft","TopRight","BottomLeft","BottomRight"],UE=wk.length,zy=t=>typeof t=="string"?parseFloat(t):t,Cy=t=>typeof t=="number"||Se.test(t);function $E(t,e,n,r,i,a){i?(t.opacity=ot(0,n.opacity??1,WE(r)),t.opacityExit=ot(e.opacity??1,0,qE(r))):a&&(t.opacity=ot(e.opacity??1,n.opacity??1,r));for(let o=0;o<UE;o++){const l=`border${wk[o]}Radius`;let c=Sy(e,l),u=Sy(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Cy(c)===Cy(u)?(t[l]=Math.max(ot(zy(c),zy(u),r),0),(or.test(u)||or.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=ot(e.rotate||0,n.rotate||0,r))}function Sy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const WE=kk(0,.5,a2),qE=kk(.5,.95,Rn);function kk(t,e,n){return r=>r<t?0:r>e?1:n(Fo(t,e,r))}function Ey(t,e){t.min=e.min,t.max=e.max}function On(t,e){Ey(t.x,e.x),Ey(t.y,e.y)}function Ty(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Iy(t,e,n,r,i){return t-=e,t=nd(t,1/n,r),i!==void 0&&(t=nd(t,1/i,r)),t}function HE(t,e=0,n=1,r=.5,i,a=t,o=t){if(or.test(e)&&(e=parseFloat(e),e=ot(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=ot(a.min,a.max,r);t===a&&(l-=e),t.min=Iy(t.min,e,n,l,i),t.max=Iy(t.max,e,n,l,i)}function Ay(t,e,[n,r,i],a,o){HE(t,e[n],e[r],e[i],e.scale,a,o)}const GE=["x","scaleX","originX"],KE=["y","scaleY","originY"];function Py(t,e,n,r){Ay(t.x,e,GE,n?n.x:void 0,r?r.x:void 0),Ay(t.y,e,KE,n?n.y:void 0,r?r.y:void 0)}function Ry(t){return t.translate===0&&t.scale===1}function jk(t){return Ry(t.x)&&Ry(t.y)}function Dy(t,e){return t.min===e.min&&t.max===e.max}function QE(t,e){return Dy(t.x,e.x)&&Dy(t.y,e.y)}function My(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Nk(t,e){return My(t.x,e.x)&&My(t.y,e.y)}function Vy(t){return rn(t.x)/rn(t.y)}function Ly(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class YE{constructor(){this.members=[]}add(e){yf(this.members,e),e.scheduleRender()}remove(e){if(vf(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function XE(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||a||o)&&(r=`translate3d(${i}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:m,rotateY:f,skewX:y,skewY:_}=n;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),f&&(r+=`rotateY(${f}deg) `),y&&(r+=`skewX(${y}deg) `),_&&(r+=`skewY(${_}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const rh=["","X","Y","Z"],JE=1e3;let ZE=0;function ih(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function _k(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=dk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",st,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&_k(r)}function zk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=ZE++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(nT),this.nodes.forEach(aT),this.nodes.forEach(oT),this.nodes.forEach(rT)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new FE)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new kf),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=B2(o)&&!WC(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,m=0;const f=()=>this.root.updateBlockedByResize=!1;st.read(()=>{m=window.innerWidth}),t(o,()=>{const y=window.innerWidth;y!==m&&(m=y,this.root.updateBlockedByResize=!0,h&&h(),h=BE(f,250),xc.hasAnimatedSinceResize&&(xc.hasAnimatedSinceResize=!1,this.nodes.forEach(By)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:f,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||u.getDefaultTransition()||hT,{onLayoutAnimationStart:A,onLayoutAnimationComplete:P}=u.getProps(),b=!this.targetLayout||!Nk(this.targetLayout,y),w=!m&&f;if(this.options.layoutRoot||this.resumeFrom||w||m&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Rf(_,"layout"),onPlay:A,onComplete:P};(u.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(h,w)}else m||By(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Tr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(lT),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_k(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Oy);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Fy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(sT),this.nodes.forEach(eT),this.nodes.forEach(tT)):this.nodes.forEach(Fy),this.clearAllSnapshots();const l=fn.now();Lt.delta=Sr(0,1e3/60,l-Lt.timestamp),Lt.timestamp=l,Lt.isProcessing=!0,Hu.update.process(Lt),Hu.preRender.process(Lt),Hu.render.process(Lt),Lt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Mf.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(iT),this.sharedNodes.forEach(cT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,st.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){st.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rn(this.snapshot.measuredBox.x)&&!rn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!jk(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Di(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),mT(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return St();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(fT))){const{scroll:h}=this.root;h&&(Ds(l.x,h.offset.x),Ds(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=St();if(On(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:m,options:f}=h;h!==this.root&&m&&f.layoutScroll&&(m.wasRoot&&On(l,o),Ds(l.x,m.offset.x),Ds(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const c=St();On(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ms(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Di(h.latestValues)&&Ms(c,h.latestValues)}return Di(this.latestValues)&&Ms(c,this.latestValues),c}removeTransform(o){const l=St();On(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Di(u.latestValues))continue;R0(u.latestValues)&&u.updateSnapshot();const h=St(),m=u.measurePageBox();On(h,m),Py(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Di(this.latestValues)&&Py(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Lt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!this.layout||!(h||m))return;this.resolvedRelativeTargetAt=Lt.timestamp;const f=this.getClosestProjectingParent();f&&this.linkedParentVersion!==f.layoutVersion&&!f.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(f&&f.layout?this.createRelativeTarget(f,this.layout.layoutBox,f.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),kE(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):On(this.target,this.layout.layoutBox),ik(this.target,this.targetDelta)):On(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?this.createRelativeTarget(f,this.target,f.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||R0(this.parent.latestValues)||rk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),rd(this.relativeTargetOrigin,l,c),On(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var _;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Lt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;On(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,f=this.treeScale.y;RS(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=St());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ty(this.prevProjectionDelta.x,this.projectionDelta.x),Ty(this.prevProjectionDelta.y,this.projectionDelta.y)),xo(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==f||!Ly(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ly(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vs(),this.projectionDelta=Vs(),this.projectionDeltaWithTransform=Vs()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},m=Vs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=St(),y=c?c.source:void 0,_=this.layout?this.layout.source:void 0,A=y!==_,P=this.getStack(),b=!P||P.members.length<=1,w=!!(A&&!b&&this.options.crossfade===!0&&!this.path.some(uT));this.animationProgress=0;let j;this.mixTargetDelta=R=>{const O=R/1e3;Uy(m.x,o.x,O),Uy(m.y,o.y,O),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rd(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),dT(this.relativeTarget,this.relativeTargetOrigin,f,O),j&&QE(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=St()),On(j,this.relativeTarget)),A&&(this.animationValues=h,$E(h,u,this.latestValues,O,w,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=O},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Tr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=st.update(()=>{xc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ts(0)),this.currentAnimation=LE(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(JE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Ck(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||St();const m=rn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const f=rn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}On(l,c),Ms(l,h),xo(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new YE),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&ih("z",o,u,this.animationValues);for(let h=0;h<rh.length;h++)ih(`rotate${rh[h]}`,o,u,this.animationValues),ih(`skew${rh[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=gc(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=gc(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Di(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=XE(this.projectionDeltaWithTransform,this.treeScale,h);c&&(m=c(h,m)),o.transform=m;const{x:f,y}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${y.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in P0){if(h[_]===void 0)continue;const{correct:A,applyTo:P,isCSSVariable:b}=P0[_],w=m==="none"?h[_]:A(h[_],u);if(P){const j=P.length;for(let R=0;R<j;R++)o[P[R]]=w}else b?this.options.visualElement.renderState.vars[_]=w:o[_]=w}this.options.layoutId&&(o.pointerEvents=u===this?gc(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Oy),this.root.sharedNodes.clear()}}}function eT(t){t.updateLayout()}function tT(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?zn(m=>{const f=o?e.measuredBox[m]:e.layoutBox[m],y=rn(f);f.min=r[m].min,f.max=f.min+y}):Ck(a,e.layoutBox,r)&&zn(m=>{const f=o?e.measuredBox[m]:e.layoutBox[m],y=rn(r[m]);f.max=f.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+y)});const l=Vs();xo(l,r,e.layoutBox);const c=Vs();o?xo(c,t.applyTransform(i,!0),e.measuredBox):xo(c,r,e.layoutBox);const u=!jk(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:f,layout:y}=m;if(f&&y){const _=St();rd(_,e.layoutBox,f.layoutBox);const A=St();rd(A,r,y.layoutBox),Nk(_,A)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=_,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function nT(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function rT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function iT(t){t.clearSnapshot()}function Oy(t){t.clearMeasurements()}function Fy(t){t.isLayoutDirty=!1}function sT(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function By(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function aT(t){t.resolveTargetDelta()}function oT(t){t.calcProjection()}function lT(t){t.resetSkewAndRotation()}function cT(t){t.removeLeadSnapshot()}function Uy(t,e,n){t.translate=ot(e.translate,0,n),t.scale=ot(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function $y(t,e,n,r){t.min=ot(e.min,n.min,r),t.max=ot(e.max,n.max,r)}function dT(t,e,n,r){$y(t.x,e.x,n.x,r),$y(t.y,e.y,n.y,r)}function uT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hT={duration:.45,ease:[.4,0,.1,1]},Wy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),qy=Wy("applewebkit/")&&!Wy("chrome/")?Math.round:Rn;function Hy(t){t.min=qy(t.min),t.max=qy(t.max)}function mT(t){Hy(t.x),Hy(t.y)}function Ck(t,e,n){return t==="position"||t==="preserve-aspect"&&!wE(Vy(e),Vy(n),.2)}function fT(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const pT=zk({attachResizeListener:(t,e)=>Wo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sh={current:void 0},Sk=zk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sh.current){const t=new pT({});t.mount(window),t.setOptions({layoutScroll:!0}),sh.current=t}return sh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),gT={pan:{Feature:ME},drag:{Feature:DE,ProjectionNode:Sk,MeasureLayout:bk}};function Gy(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&st.postRender(()=>a(e,ll(e)))}class xT extends _i{mount(){const{current:e}=this.node;e&&(this.unmount=OC(e,(n,r)=>(Gy(this.node,r,"Start"),i=>Gy(this.node,i,"End"))))}unmount(){}}class yT extends _i{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sl(Wo(this.node.current,"focus",()=>this.onFocus()),Wo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ky(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&st.postRender(()=>a(e,ll(e)))}class vT extends _i{mount(){const{current:e}=this.node;e&&(this.unmount=$C(e,(n,r)=>(Ky(this.node,r,"Start"),(i,{success:a})=>Ky(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const B0=new WeakMap,ah=new WeakMap,bT=t=>{const e=B0.get(t.target);e&&e(t)},wT=t=>{t.forEach(bT)};function kT({root:t,...e}){const n=t||document;ah.has(n)||ah.set(n,{});const r=ah.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(wT,{root:t,...e})),r[i]}function jT(t,e,n){const r=kT(e);return B0.set(t,n),r.observe(t),()=>{B0.delete(t),r.unobserve(t)}}const NT={some:0,all:1};class _T extends _i{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:NT[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),f=u?h:m;f&&f(c)};return jT(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zT(e,n))&&this.startObserver()}unmount(){}}function zT({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const CT={inView:{Feature:_T},tap:{Feature:vT},focus:{Feature:yT},hover:{Feature:xT}},ST={layout:{ProjectionNode:Sk,MeasureLayout:bk}},ET={...pE,...CT,...gT,...ST},G=IS(ET,WS);function id(t){const e=Ni(()=>ts(t)),{isStatic:n}=k.useContext(Vd);if(n){const[,r]=k.useState(t);k.useEffect(()=>e.on("change",r),[])}return e}function Ek(t,e){const n=id(e()),r=()=>n.set(e());return r(),xf(()=>{const i=()=>st.preRender(r,!1,!0),a=t.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),Tr(r)}}),n}function TT(t){po.current=[],t();const e=Ek(po.current,t);return po.current=void 0,e}function IT(t,e,n,r){if(typeof t=="function")return TT(t);const i=typeof e=="function"?e:qC(e,n,r);return Array.isArray(t)?Qy(t,i):Qy([t],([a])=>i(a))}function Qy(t,e){const n=Ni(()=>[]);return Ek(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class AT{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const PT=()=>new AT;function Gf(){return Ni(PT)}const Tk=k.createContext(null);function RT(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const a=r>0?1:-1,o=t[i+a];if(!o)return t;const l=t[i],c=o.layout,u=ot(c.min,c.max,.5);return a===1&&l.layout.max+n>u||a===-1&&l.layout.min+n<u?X_(t,i,i+a):t}function DT({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...a},o){const l=Ni(()=>G[e]),c=[],u=k.useRef(!1),h={axis:n,registerItem:(m,f)=>{const y=c.findIndex(_=>m===_.value);y!==-1?c[y].layout=f[n]:c.push({value:m,layout:f[n]}),c.sort(VT)},updateOrder:(m,f,y)=>{if(u.current)return;const _=RT(c,m,f,y);c!==_&&(u.current=!0,r(_.map(MT).filter(A=>i.indexOf(A)!==-1)))}};return k.useEffect(()=>{u.current=!1}),s.jsx(l,{...a,ref:o,ignoreStrict:!0,children:s.jsx(Tk.Provider,{value:h,children:t})})}const Bd=k.forwardRef(DT);function MT(t){return t.value}function VT(t,e){return t.layout.min-e.layout.min}function Yy(t,e=0){return Bt(t)?t:id(e)}function LT({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:a=!0,...o},l){const c=Ni(()=>G[r]),u=k.useContext(Tk),h={x:Yy(e.x),y:Yy(e.y)},m=IT([h.x,h.y],([A,P])=>A||P?1:"unset"),{axis:f,registerItem:y,updateOrder:_}=u;return s.jsx(c,{drag:f,...o,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:m},layout:a,onDrag:(A,P)=>{const{velocity:b}=P;b[f]&&_(n,h[f].get(),b[f]),i&&i(A,P)},onLayoutMeasure:A=>y(n,A),ref:l,ignoreStrict:!0,children:t})}const Ud=k.forwardRef(LT);function Xy({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return s.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>s.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const Zt=t=>{k.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth,n=window.getComputedStyle(document.body).overflow,r=window.getComputedStyle(document.body).paddingRight;return document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${parseInt(r||0)+e}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=r}},[t])},OT=()=>{};var Jy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},FT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|o&63)}}return e.join("")},Ak={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,h=a>>2,m=(a&3)<<4|l>>4;let f=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(f=64)),r.push(n[h],n[m],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ik(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):FT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||l==null||u==null||m==null)throw new BT;const f=a<<2|l>>4;if(r.push(f),u!==64){const y=l<<4&240|u>>2;if(r.push(y),m!==64){const _=u<<6&192|m;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const UT=function(t){const e=Ik(t);return Ak.encodeByteArray(e,!0)},sd=function(t){return UT(t).replace(/\./g,"")},$T=function(t){try{return Ak.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qT=()=>WT().__FIREBASE_DEFAULTS__,HT=()=>{if(typeof process>"u"||typeof Jy>"u")return;const t=Jy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$T(t[1]);return e&&JSON.parse(e)},Kf=()=>{try{return OT()||qT()||HT()||GT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},KT=t=>{var e,n;return(n=(e=Kf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},QT=t=>{const e=KT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pk=()=>{var t;return(t=Kf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function XT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[sd(JSON.stringify(n)),sd(JSON.stringify(o)),""].join(".")}const yo={};function ZT(){const t={prod:[],emulator:[]};for(const e of Object.keys(yo))yo[e]?t.emulator.push(e):t.prod.push(e);return t}function eI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zy=!1;function tI(t,e){if(typeof window>"u"||typeof document>"u"||!Qf(window.location.host)||yo[t]===e||yo[t]||Zy)return;yo[t]=e;function n(f){return`__firebase__banner__${f}`}const r="__firebase__banner",a=ZT().prod.length>0;function o(){const f=document.getElementById(r);f&&f.remove()}function l(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,y){f.setAttribute("width","24"),f.setAttribute("id",y),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){const f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{Zy=!0,o()},f}function h(f,y){f.setAttribute("id",y),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function m(){const f=eI(r),y=n("text"),_=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),P=document.getElementById(A)||document.createElement("a"),b=n("preprendIcon"),w=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){const j=f.element;l(j),h(P,A);const R=u();c(w,b),j.append(w,_,P,R),document.body.appendChild(j)}a?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function rI(){var e;const t=(e=Kf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function iI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function sI(){return!rI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rk(){try{return typeof indexedDB=="object"}catch{return!1}}function Dk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}function aI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oI="FirebaseError";class zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=oI,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$d.prototype.create)}}class $d{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],o=a?lI(a,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new zi(i,l,r)}}function lI(t,e){return t.replace(cI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const cI=/\{\$([^}]+)}/g;function qo(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],o=e[i];if(ev(a)&&ev(o)){if(!qo(a,o))return!1}else if(a!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ev(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=1e3,uI=2,hI=4*60*60*1e3,mI=.5;function tv(t,e=dI,n=uI){const r=e*Math.pow(n,t),i=Math.round(mI*r*(Math.random()-.5)*2);return Math.min(hI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t){return t&&t._delegate?t._delegate:t}class Ar{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new YT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gI(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pI(t){return t===Mi?void 0:t}function gI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new fI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const yI={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},vI=Fe.INFO,bI={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},wI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=bI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Yf{constructor(e){this.name=e,this._logLevel=vI,this._logHandler=wI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const kI=(t,e)=>e.some(n=>t instanceof n);let nv,rv;function jI(){return nv||(nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NI(){return rv||(rv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mk=new WeakMap,U0=new WeakMap,Vk=new WeakMap,oh=new WeakMap,Xf=new WeakMap;function _I(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(ai(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Mk.set(n,t)}).catch(()=>{}),Xf.set(e,t),e}function zI(t){if(U0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});U0.set(t,e)}let $0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return U0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ai(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function CI(t){$0=t($0)}function SI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(lh(this),e,...n);return Vk.set(r,e.sort?e.sort():[e]),ai(r)}:NI().includes(t)?function(...e){return t.apply(lh(this),e),ai(Mk.get(this))}:function(...e){return ai(t.apply(lh(this),e))}}function EI(t){return typeof t=="function"?SI(t):(t instanceof IDBTransaction&&zI(t),kI(t,jI())?new Proxy(t,$0):t)}function ai(t){if(t instanceof IDBRequest)return _I(t);if(oh.has(t))return oh.get(t);const e=EI(t);return e!==t&&(oh.set(t,e),Xf.set(e,t)),e}const lh=t=>Xf.get(t);function Lk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(t,e),l=ai(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ai(o.result),c.oldVersion,c.newVersion,ai(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const TI=["get","getKey","getAll","getAllKeys","count"],II=["put","add","delete","clear"],ch=new Map;function iv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ch.get(e))return ch.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=II.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TI.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&c.done]))[0]};return ch.set(e,a),a}CI(t=>({...t,get:(e,n,r)=>iv(e,n)||t.get(e,n,r),has:(e,n)=>!!iv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(PI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function PI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const W0="@firebase/app",sv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Yf("@firebase/app"),RI="@firebase/app-compat",DI="@firebase/analytics-compat",MI="@firebase/analytics",VI="@firebase/app-check-compat",LI="@firebase/app-check",OI="@firebase/auth",FI="@firebase/auth-compat",BI="@firebase/database",UI="@firebase/data-connect",$I="@firebase/database-compat",WI="@firebase/functions",qI="@firebase/functions-compat",HI="@firebase/installations",GI="@firebase/installations-compat",KI="@firebase/messaging",QI="@firebase/messaging-compat",YI="@firebase/performance",XI="@firebase/performance-compat",JI="@firebase/remote-config",ZI="@firebase/remote-config-compat",e3="@firebase/storage",t3="@firebase/storage-compat",n3="@firebase/firestore",r3="@firebase/ai",i3="@firebase/firestore-compat",s3="firebase",a3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="[DEFAULT]",o3={[W0]:"fire-core",[RI]:"fire-core-compat",[MI]:"fire-analytics",[DI]:"fire-analytics-compat",[LI]:"fire-app-check",[VI]:"fire-app-check-compat",[OI]:"fire-auth",[FI]:"fire-auth-compat",[BI]:"fire-rtdb",[UI]:"fire-data-connect",[$I]:"fire-rtdb-compat",[WI]:"fire-fn",[qI]:"fire-fn-compat",[HI]:"fire-iid",[GI]:"fire-iid-compat",[KI]:"fire-fcm",[QI]:"fire-fcm-compat",[YI]:"fire-perf",[XI]:"fire-perf-compat",[JI]:"fire-rc",[ZI]:"fire-rc-compat",[e3]:"fire-gcs",[t3]:"fire-gcs-compat",[n3]:"fire-fst",[i3]:"fire-fst-compat",[r3]:"fire-vertex","fire-js":"fire-js",[s3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ad=new Map,l3=new Map,H0=new Map;function av(t,e){try{t.container.addComponent(e)}catch(n){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mi(t){const e=t.name;if(H0.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;H0.set(e,t);for(const n of ad.values())av(n,t);for(const n of l3.values())av(n,t);return!0}function cl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function c3(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new $d("app","Firebase",d3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=a3;function Ok(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:q0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(n||(n=Pk()),!n)throw oi.create("no-options");const a=ad.get(i);if(a){if(qo(n,a.options)&&qo(r,a.config))return a;throw oi.create("duplicate-app",{appName:i})}const o=new xI(i);for(const c of H0.values())o.addComponent(c);const l=new u3(n,r,o);return ad.set(i,l),l}function Fk(t=q0){const e=ad.get(t);if(!e&&t===q0&&Pk())return Ok();if(!e)throw oi.create("no-app",{appName:t});return e}function lr(t,e,n){let r=o3[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(o.join(" "));return}mi(new Ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="firebase-heartbeat-database",f3=1,Ho="firebase-heartbeat-store";let dh=null;function Bk(){return dh||(dh=Lk(m3,f3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ho)}catch(n){console.warn(n)}}}}).catch(t=>{throw oi.create("idb-open",{originalErrorMessage:t.message})})),dh}async function p3(t){try{const n=(await Bk()).transaction(Ho),r=await n.objectStore(Ho).get(Uk(t));return await n.done,r}catch(e){if(e instanceof zi)Pr.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pr.warn(n.message)}}}async function ov(t,e){try{const r=(await Bk()).transaction(Ho,"readwrite");await r.objectStore(Ho).put(e,Uk(t)),await r.done}catch(n){if(n instanceof zi)Pr.warn(n.message);else{const r=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Pr.warn(r.message)}}}function Uk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g3=1024,x3=30;class y3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new b3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=lv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>x3){const o=w3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=lv(),{heartbeatsToSend:r,unsentEntries:i}=v3(this._heartbeatsCache.heartbeats),a=sd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Pr.warn(n),""}}}function lv(){return new Date().toISOString().substring(0,10)}function v3(t,e=g3){const n=[];let r=t.slice();for(const i of t){const a=n.find(o=>o.agent===i.agent);if(a){if(a.dates.push(i.date),cv(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),cv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class b3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rk()?Dk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await p3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ov(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ov(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function cv(t){return sd(JSON.stringify({version:2,heartbeats:t})).length}function w3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){mi(new Ar("platform-logger",e=>new AI(e),"PRIVATE")),mi(new Ar("heartbeat",e=>new y3(e),"PRIVATE")),lr(W0,sv,t),lr(W0,sv,"esm2020"),lr("fire-js","")}k3("");var j3="firebase",N3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr(j3,N3,"app");const $k="@firebase/installations",Jf="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=1e4,qk=`w:${Jf}`,Hk="FIS_v2",_3="https://firebaseinstallations.googleapis.com/v1",z3=60*60*1e3,C3="installations",S3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ns=new $d(C3,S3,E3);function Gk(t){return t instanceof zi&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk({projectId:t}){return`${_3}/projects/${t}/installations`}function Qk(t){return{token:t.token,requestStatus:2,expiresIn:I3(t.expiresIn),creationTime:Date.now()}}async function Yk(t,e){const r=(await e.json()).error;return ns.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Xk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function T3(t,{refreshToken:e}){const n=Xk(t);return n.append("Authorization",A3(e)),n}async function Jk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function I3(t){return Number(t.replace("s","000"))}function A3(t){return`${Hk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Kk(t),i=Xk(t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={fid:n,authVersion:Hk,appId:t.appId,sdkVersion:qk},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await Jk(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Qk(u.authToken)}}else throw await Yk("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=/^[cdef][\w-]{21}$/,G0="";function M3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=V3(t);return D3.test(n)?n:G0}catch{return G0}}function V3(t){return R3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=new Map;function t5(t,e){const n=Wd(t);n5(n,e),L3(n,e)}function n5(t,e){const n=e5.get(t);if(n)for(const r of n)r(e)}function L3(t,e){const n=O3();n&&n.postMessage({key:t,fid:e}),F3()}let $i=null;function O3(){return!$i&&"BroadcastChannel"in self&&($i=new BroadcastChannel("[Firebase] FID Change"),$i.onmessage=t=>{n5(t.data.key,t.data.fid)}),$i}function F3(){e5.size===0&&$i&&($i.close(),$i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="firebase-installations-database",U3=1,rs="firebase-installations-store";let uh=null;function Zf(){return uh||(uh=Lk(B3,U3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(rs)}}})),uh}async function od(t,e){const n=Wd(t),i=(await Zf()).transaction(rs,"readwrite"),a=i.objectStore(rs),o=await a.get(n);return await a.put(e,n),await i.done,(!o||o.fid!==e.fid)&&t5(t,e.fid),e}async function r5(t){const e=Wd(t),r=(await Zf()).transaction(rs,"readwrite");await r.objectStore(rs).delete(e),await r.done}async function qd(t,e){const n=Wd(t),i=(await Zf()).transaction(rs,"readwrite"),a=i.objectStore(rs),o=await a.get(n),l=e(o);return l===void 0?await a.delete(n):await a.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&t5(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t){let e;const n=await qd(t.appConfig,r=>{const i=$3(r),a=W3(t,i);return e=a.registrationPromise,a.installationEntry});return n.fid===G0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function $3(t){const e=t||{fid:M3(),registrationStatus:0};return i5(e)}function W3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ns.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=q3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:H3(t)}:{installationEntry:e}}async function q3(t,e){try{const n=await P3(t,e);return od(t.appConfig,n)}catch(n){throw Gk(n)&&n.customData.serverCode===409?await r5(t.appConfig):await od(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function H3(t){let e=await dv(t.appConfig);for(;e.registrationStatus===1;)await Zk(100),e=await dv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await ep(t);return r||n}return e}function dv(t){return qd(t,e=>{if(!e)throw ns.create("installation-not-found");return i5(e)})}function i5(t){return G3(t)?{fid:t.fid,registrationStatus:0}:t}function G3(t){return t.registrationStatus===1&&t.registrationTime+Wk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K3({appConfig:t,heartbeatServiceProvider:e},n){const r=Q3(t,n),i=T3(t,n),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const o={installation:{sdkVersion:qk,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await Jk(()=>fetch(r,l));if(c.ok){const u=await c.json();return Qk(u)}else throw await Yk("Generate Auth Token",c)}function Q3(t,{fid:e}){return`${Kk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tp(t,e=!1){let n;const r=await qd(t.appConfig,a=>{if(!s5(a))throw ns.create("not-registered");const o=a.authToken;if(!e&&J3(o))return a;if(o.requestStatus===1)return n=Y3(t,e),a;{if(!navigator.onLine)throw ns.create("app-offline");const l=eA(a);return n=X3(t,l),l}});return n?await n:r.authToken}async function Y3(t,e){let n=await uv(t.appConfig);for(;n.authToken.requestStatus===1;)await Zk(100),n=await uv(t.appConfig);const r=n.authToken;return r.requestStatus===0?tp(t,e):r}function uv(t){return qd(t,e=>{if(!s5(e))throw ns.create("not-registered");const n=e.authToken;return tA(n)?{...e,authToken:{requestStatus:0}}:e})}async function X3(t,e){try{const n=await K3(t,e),r={...e,authToken:n};return await od(t.appConfig,r),n}catch(n){if(Gk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await r5(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await od(t.appConfig,r)}throw n}}function s5(t){return t!==void 0&&t.registrationStatus===2}function J3(t){return t.requestStatus===2&&!Z3(t)}function Z3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+z3}function eA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function tA(t){return t.requestStatus===1&&t.requestTime+Wk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(t){const e=t,{installationEntry:n,registrationPromise:r}=await ep(e);return r?r.catch(console.error):tp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rA(t,e=!1){const n=t;return await iA(n),(await tp(n,e)).token}async function iA(t){const{registrationPromise:e}=await ep(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){if(!t||!t.options)throw hh("App Configuration");if(!t.name)throw hh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw hh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function hh(t){return ns.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="installations",aA="installations-internal",oA=t=>{const e=t.getProvider("app").getImmediate(),n=sA(e),r=cl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lA=t=>{const e=t.getProvider("app").getImmediate(),n=cl(e,a5).getImmediate();return{getId:()=>nA(n),getToken:i=>rA(n,i)}};function cA(){mi(new Ar(a5,oA,"PUBLIC")),mi(new Ar(aA,lA,"PRIVATE"))}cA();lr($k,Jf);lr($k,Jf,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="analytics",dA="firebase_id",uA="origin",hA=60*1e3,mA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",np="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new Yf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},kn=new $d("analytics","Analytics",fA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){if(!t.startsWith(np)){const e=kn.create("invalid-gtag-resource",{gtagURL:t});return an.warn(e.message),""}return t}function o5(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function gA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function xA(t,e){const n=gA("firebase-js-sdk-policy",{createScriptURL:pA}),r=document.createElement("script"),i=`${np}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function yA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function vA(t,e,n,r,i,a){const o=r[i];try{if(o)await e[o];else{const c=(await o5(n)).find(u=>u.measurementId===i);c&&await e[c.appId]}}catch(l){an.error(l)}t("config",i,a)}async function bA(t,e,n,r,i){try{let a=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await o5(n);for(const c of o){const u=l.find(m=>m.measurementId===c),h=u&&e[u.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,i||{})}catch(a){an.error(a)}}function wA(t,e,n,r){async function i(a,...o){try{if(a==="event"){const[l,c]=o;await bA(t,e,n,l,c)}else if(a==="config"){const[l,c]=o;await vA(t,e,n,r,l,c)}else if(a==="consent"){const[l,c]=o;t("consent",l,c)}else if(a==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){an.error(l)}}return i}function kA(t,e,n,r,i){let a=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=wA(a,t,e,n),{gtagCore:a,wrappedGtag:window[i]}}function jA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(np)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=30,_A=1e3;class zA{constructor(e={},n=_A){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const l5=new zA;function CA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function SA(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:CA(n)},i=mA.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw kn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function EA(t,e=l5,n){const{appId:r,apiKey:i,measurementId:a}=t.options;if(!r)throw kn.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw kn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new AA;return setTimeout(async()=>{l.abort()},hA),c5({appId:r,apiKey:i,measurementId:a},o,l,e)}async function c5(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=l5){var l;const{appId:a,measurementId:o}=t;try{await TA(r,e)}catch(c){if(o)return an.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:o};throw c}try{const c=await SA(t);return i.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!IA(u)){if(i.deleteThrottleMetadata(a),o)return an.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:o};throw c}const h=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?tv(n,i.intervalMillis,NA):tv(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(a,m),an.debug(`Calling attemptFetch again in ${h} millis`),c5(t,m,r,i)}}function TA(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(a),r(kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function IA(t){if(!(t instanceof zi)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class AA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function PA(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const a=await e,o={...r,send_to:a};t("event",n,o)}}async function RA(t,e,n,r){if(r&&r.global){const i={};for(const a of Object.keys(n))i[`user_properties.${a}`]=n[a];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(){if(Rk())try{await Dk()}catch(t){return an.warn(kn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return an.warn(kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function MA(t,e,n,r,i,a,o){const l=EA(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&an.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>an.error(f)),e.push(l);const c=DA().then(f=>{if(f)return r.getId()}),[u,h]=await Promise.all([l,c]);jA(a)||xA(a,u.measurementId),i("js",new Date);const m=(o==null?void 0:o.config)??{};return m[uA]="firebase",m.update=!0,h!=null&&(m[dA]=h),i("config",u.measurementId,m),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.app=e}_delete(){return delete qs[this.app.options.appId],Promise.resolve()}}let qs={},hv=[];const mv={};let mh="dataLayer",LA="gtag",fv,rp,pv=!1;function OA(){const t=[];if(iI()&&t.push("This is a browser extension environment."),aI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=kn.create("invalid-analytics-context",{errorInfo:e});an.warn(n.message)}}function FA(t,e,n){OA();const r=t.options.appId;if(!r)throw kn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)an.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw kn.create("no-api-key");if(qs[r]!=null)throw kn.create("already-exists",{id:r});if(!pv){yA(mh);const{wrappedGtag:a,gtagCore:o}=kA(qs,hv,mv,mh,LA);rp=a,fv=o,pv=!0}return qs[r]=MA(t,hv,mv,e,fv,mh,n),new VA(t)}function BA(t=Fk()){t=Ir(t);const e=cl(t,ld);return e.isInitialized()?e.getImmediate():UA(t)}function UA(t,e={}){const n=cl(t,ld);if(n.isInitialized()){const i=n.getImmediate();if(qo(e,n.getOptions()))return i;throw kn.create("already-initialized")}return n.initialize({options:e})}function $A(t,e,n){t=Ir(t),RA(rp,qs[t.app.options.appId],e,n).catch(r=>an.error(r))}function WA(t,e,n,r){t=Ir(t),PA(rp,qs[t.app.options.appId],e,n,r).catch(i=>an.error(i))}const gv="@firebase/analytics",xv="0.10.19";function qA(){mi(new Ar(ld,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return FA(r,i,n)},"PUBLIC")),mi(new Ar("analytics-internal",t,"PRIVATE")),lr(gv,xv),lr(gv,xv,"esm2020");function t(e){try{const n=e.getProvider(ld).getImmediate();return{logEvent:(r,i,a)=>WA(n,r,i,a),setUserProperties:(r,i)=>$A(n,r,i)}}catch(n){throw kn.create("interop-component-reg-failed",{reason:n})}}}qA();var yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var li,d5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,x){function N(){}N.prototype=x.prototype,v.F=x.prototype,v.prototype=new N,v.prototype.constructor=v,v.D=function(C,z,I){for(var T=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)T[pe-2]=arguments[pe];return x.prototype[z].apply(C,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,x,N){N||(N=0);const C=Array(16);if(typeof x=="string")for(var z=0;z<16;++z)C[z]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(z=0;z<16;++z)C[z]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=v.g[0],N=v.g[1],z=v.g[2];let I=v.g[3],T;T=x+(I^N&(z^I))+C[0]+3614090360&4294967295,x=N+(T<<7&4294967295|T>>>25),T=I+(z^x&(N^z))+C[1]+3905402710&4294967295,I=x+(T<<12&4294967295|T>>>20),T=z+(N^I&(x^N))+C[2]+606105819&4294967295,z=I+(T<<17&4294967295|T>>>15),T=N+(x^z&(I^x))+C[3]+3250441966&4294967295,N=z+(T<<22&4294967295|T>>>10),T=x+(I^N&(z^I))+C[4]+4118548399&4294967295,x=N+(T<<7&4294967295|T>>>25),T=I+(z^x&(N^z))+C[5]+1200080426&4294967295,I=x+(T<<12&4294967295|T>>>20),T=z+(N^I&(x^N))+C[6]+2821735955&4294967295,z=I+(T<<17&4294967295|T>>>15),T=N+(x^z&(I^x))+C[7]+4249261313&4294967295,N=z+(T<<22&4294967295|T>>>10),T=x+(I^N&(z^I))+C[8]+1770035416&4294967295,x=N+(T<<7&4294967295|T>>>25),T=I+(z^x&(N^z))+C[9]+2336552879&4294967295,I=x+(T<<12&4294967295|T>>>20),T=z+(N^I&(x^N))+C[10]+4294925233&4294967295,z=I+(T<<17&4294967295|T>>>15),T=N+(x^z&(I^x))+C[11]+2304563134&4294967295,N=z+(T<<22&4294967295|T>>>10),T=x+(I^N&(z^I))+C[12]+1804603682&4294967295,x=N+(T<<7&4294967295|T>>>25),T=I+(z^x&(N^z))+C[13]+4254626195&4294967295,I=x+(T<<12&4294967295|T>>>20),T=z+(N^I&(x^N))+C[14]+2792965006&4294967295,z=I+(T<<17&4294967295|T>>>15),T=N+(x^z&(I^x))+C[15]+1236535329&4294967295,N=z+(T<<22&4294967295|T>>>10),T=x+(z^I&(N^z))+C[1]+4129170786&4294967295,x=N+(T<<5&4294967295|T>>>27),T=I+(N^z&(x^N))+C[6]+3225465664&4294967295,I=x+(T<<9&4294967295|T>>>23),T=z+(x^N&(I^x))+C[11]+643717713&4294967295,z=I+(T<<14&4294967295|T>>>18),T=N+(I^x&(z^I))+C[0]+3921069994&4294967295,N=z+(T<<20&4294967295|T>>>12),T=x+(z^I&(N^z))+C[5]+3593408605&4294967295,x=N+(T<<5&4294967295|T>>>27),T=I+(N^z&(x^N))+C[10]+38016083&4294967295,I=x+(T<<9&4294967295|T>>>23),T=z+(x^N&(I^x))+C[15]+3634488961&4294967295,z=I+(T<<14&4294967295|T>>>18),T=N+(I^x&(z^I))+C[4]+3889429448&4294967295,N=z+(T<<20&4294967295|T>>>12),T=x+(z^I&(N^z))+C[9]+568446438&4294967295,x=N+(T<<5&4294967295|T>>>27),T=I+(N^z&(x^N))+C[14]+3275163606&4294967295,I=x+(T<<9&4294967295|T>>>23),T=z+(x^N&(I^x))+C[3]+4107603335&4294967295,z=I+(T<<14&4294967295|T>>>18),T=N+(I^x&(z^I))+C[8]+1163531501&4294967295,N=z+(T<<20&4294967295|T>>>12),T=x+(z^I&(N^z))+C[13]+2850285829&4294967295,x=N+(T<<5&4294967295|T>>>27),T=I+(N^z&(x^N))+C[2]+4243563512&4294967295,I=x+(T<<9&4294967295|T>>>23),T=z+(x^N&(I^x))+C[7]+1735328473&4294967295,z=I+(T<<14&4294967295|T>>>18),T=N+(I^x&(z^I))+C[12]+2368359562&4294967295,N=z+(T<<20&4294967295|T>>>12),T=x+(N^z^I)+C[5]+4294588738&4294967295,x=N+(T<<4&4294967295|T>>>28),T=I+(x^N^z)+C[8]+2272392833&4294967295,I=x+(T<<11&4294967295|T>>>21),T=z+(I^x^N)+C[11]+1839030562&4294967295,z=I+(T<<16&4294967295|T>>>16),T=N+(z^I^x)+C[14]+4259657740&4294967295,N=z+(T<<23&4294967295|T>>>9),T=x+(N^z^I)+C[1]+2763975236&4294967295,x=N+(T<<4&4294967295|T>>>28),T=I+(x^N^z)+C[4]+1272893353&4294967295,I=x+(T<<11&4294967295|T>>>21),T=z+(I^x^N)+C[7]+4139469664&4294967295,z=I+(T<<16&4294967295|T>>>16),T=N+(z^I^x)+C[10]+3200236656&4294967295,N=z+(T<<23&4294967295|T>>>9),T=x+(N^z^I)+C[13]+681279174&4294967295,x=N+(T<<4&4294967295|T>>>28),T=I+(x^N^z)+C[0]+3936430074&4294967295,I=x+(T<<11&4294967295|T>>>21),T=z+(I^x^N)+C[3]+3572445317&4294967295,z=I+(T<<16&4294967295|T>>>16),T=N+(z^I^x)+C[6]+76029189&4294967295,N=z+(T<<23&4294967295|T>>>9),T=x+(N^z^I)+C[9]+3654602809&4294967295,x=N+(T<<4&4294967295|T>>>28),T=I+(x^N^z)+C[12]+3873151461&4294967295,I=x+(T<<11&4294967295|T>>>21),T=z+(I^x^N)+C[15]+530742520&4294967295,z=I+(T<<16&4294967295|T>>>16),T=N+(z^I^x)+C[2]+3299628645&4294967295,N=z+(T<<23&4294967295|T>>>9),T=x+(z^(N|~I))+C[0]+4096336452&4294967295,x=N+(T<<6&4294967295|T>>>26),T=I+(N^(x|~z))+C[7]+1126891415&4294967295,I=x+(T<<10&4294967295|T>>>22),T=z+(x^(I|~N))+C[14]+2878612391&4294967295,z=I+(T<<15&4294967295|T>>>17),T=N+(I^(z|~x))+C[5]+4237533241&4294967295,N=z+(T<<21&4294967295|T>>>11),T=x+(z^(N|~I))+C[12]+1700485571&4294967295,x=N+(T<<6&4294967295|T>>>26),T=I+(N^(x|~z))+C[3]+2399980690&4294967295,I=x+(T<<10&4294967295|T>>>22),T=z+(x^(I|~N))+C[10]+4293915773&4294967295,z=I+(T<<15&4294967295|T>>>17),T=N+(I^(z|~x))+C[1]+2240044497&4294967295,N=z+(T<<21&4294967295|T>>>11),T=x+(z^(N|~I))+C[8]+1873313359&4294967295,x=N+(T<<6&4294967295|T>>>26),T=I+(N^(x|~z))+C[15]+4264355552&4294967295,I=x+(T<<10&4294967295|T>>>22),T=z+(x^(I|~N))+C[6]+2734768916&4294967295,z=I+(T<<15&4294967295|T>>>17),T=N+(I^(z|~x))+C[13]+1309151649&4294967295,N=z+(T<<21&4294967295|T>>>11),T=x+(z^(N|~I))+C[4]+4149444226&4294967295,x=N+(T<<6&4294967295|T>>>26),T=I+(N^(x|~z))+C[11]+3174756917&4294967295,I=x+(T<<10&4294967295|T>>>22),T=z+(x^(I|~N))+C[2]+718787259&4294967295,z=I+(T<<15&4294967295|T>>>17),T=N+(I^(z|~x))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+x&4294967295,v.g[1]=v.g[1]+(z+(T<<21&4294967295|T>>>11))&4294967295,v.g[2]=v.g[2]+z&4294967295,v.g[3]=v.g[3]+I&4294967295}r.prototype.v=function(v,x){x===void 0&&(x=v.length);const N=x-this.blockSize,C=this.C;let z=this.h,I=0;for(;I<x;){if(z==0)for(;I<=N;)i(this,v,I),I+=this.blockSize;if(typeof v=="string"){for(;I<x;)if(C[z++]=v.charCodeAt(I++),z==this.blockSize){i(this,C),z=0;break}}else for(;I<x;)if(C[z++]=v[I++],z==this.blockSize){i(this,C),z=0;break}}this.h=z,this.o+=x},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var x=1;x<v.length-8;++x)v[x]=0;x=this.o*8;for(var N=v.length-8;N<v.length;++N)v[N]=x&255,x/=256;for(this.v(v),v=Array(16),x=0,N=0;N<4;++N)for(let C=0;C<32;C+=8)v[x++]=this.g[N]>>>C&255;return v};function a(v,x){var N=l;return Object.prototype.hasOwnProperty.call(N,v)?N[v]:N[v]=x(v)}function o(v,x){this.h=x;const N=[];let C=!0;for(let z=v.length-1;z>=0;z--){const I=v[z]|0;C&&I==x||(N[z]=I,C=!1)}this.g=N}var l={};function c(v){return-128<=v&&v<128?a(v,function(x){return new o([x|0],x<0?-1:0)}):new o([v|0],v<0?-1:0)}function u(v){if(isNaN(v)||!isFinite(v))return m;if(v<0)return P(u(-v));const x=[];let N=1;for(let C=0;v>=N;C++)x[C]=v/N|0,N*=4294967296;return new o(x,0)}function h(v,x){if(v.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(v.charAt(0)=="-")return P(h(v.substring(1),x));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=u(Math.pow(x,8));let C=m;for(let I=0;I<v.length;I+=8){var z=Math.min(8,v.length-I);const T=parseInt(v.substring(I,I+z),x);z<8?(z=u(Math.pow(x,z)),C=C.j(z).add(u(T))):(C=C.j(N),C=C.add(u(T)))}return C}var m=c(0),f=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(A(this))return-P(this).m();let v=0,x=1;for(let N=0;N<this.g.length;N++){const C=this.i(N);v+=(C>=0?C:4294967296+C)*x,x*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(_(this))return"0";if(A(this))return"-"+P(this).toString(v);const x=u(Math.pow(v,6));var N=this;let C="";for(;;){const z=R(N,x).g;N=b(N,z.j(x));let I=((N.g.length>0?N.g[0]:N.h)>>>0).toString(v);if(N=z,_(N))return I+C;for(;I.length<6;)I="0"+I;C=I+C}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function _(v){if(v.h!=0)return!1;for(let x=0;x<v.g.length;x++)if(v.g[x]!=0)return!1;return!0}function A(v){return v.h==-1}t.l=function(v){return v=b(this,v),A(v)?-1:_(v)?0:1};function P(v){const x=v.g.length,N=[];for(let C=0;C<x;C++)N[C]=~v.g[C];return new o(N,~v.h).add(f)}t.abs=function(){return A(this)?P(this):this},t.add=function(v){const x=Math.max(this.g.length,v.g.length),N=[];let C=0;for(let z=0;z<=x;z++){let I=C+(this.i(z)&65535)+(v.i(z)&65535),T=(I>>>16)+(this.i(z)>>>16)+(v.i(z)>>>16);C=T>>>16,I&=65535,T&=65535,N[z]=T<<16|I}return new o(N,N[N.length-1]&-2147483648?-1:0)};function b(v,x){return v.add(P(x))}t.j=function(v){if(_(this)||_(v))return m;if(A(this))return A(v)?P(this).j(P(v)):P(P(this).j(v));if(A(v))return P(this.j(P(v)));if(this.l(y)<0&&v.l(y)<0)return u(this.m()*v.m());const x=this.g.length+v.g.length,N=[];for(var C=0;C<2*x;C++)N[C]=0;for(C=0;C<this.g.length;C++)for(let z=0;z<v.g.length;z++){const I=this.i(C)>>>16,T=this.i(C)&65535,pe=v.i(z)>>>16,de=v.i(z)&65535;N[2*C+2*z]+=T*de,w(N,2*C+2*z),N[2*C+2*z+1]+=I*de,w(N,2*C+2*z+1),N[2*C+2*z+1]+=T*pe,w(N,2*C+2*z+1),N[2*C+2*z+2]+=I*pe,w(N,2*C+2*z+2)}for(v=0;v<x;v++)N[v]=N[2*v+1]<<16|N[2*v];for(v=x;v<2*x;v++)N[v]=0;return new o(N,0)};function w(v,x){for(;(v[x]&65535)!=v[x];)v[x+1]+=v[x]>>>16,v[x]&=65535,x++}function j(v,x){this.g=v,this.h=x}function R(v,x){if(_(x))throw Error("division by zero");if(_(v))return new j(m,m);if(A(v))return x=R(P(v),x),new j(P(x.g),P(x.h));if(A(x))return x=R(v,P(x)),new j(P(x.g),x.h);if(v.g.length>30){if(A(v)||A(x))throw Error("slowDivide_ only works with positive integers.");for(var N=f,C=x;C.l(v)<=0;)N=O(N),C=O(C);var z=L(N,1),I=L(C,1);for(C=L(C,2),N=L(N,2);!_(C);){var T=I.add(C);T.l(v)<=0&&(z=z.add(N),I=T),C=L(C,1),N=L(N,1)}return x=b(v,z.j(x)),new j(z,x)}for(z=m;v.l(x)>=0;){for(N=Math.max(1,Math.floor(v.m()/x.m())),C=Math.ceil(Math.log(N)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),I=u(N),T=I.j(x);A(T)||T.l(v)>0;)N-=C,I=u(N),T=I.j(x);_(I)&&(I=f),z=z.add(I),v=b(v,T)}return new j(z,v)}t.B=function(v){return R(this,v).h},t.and=function(v){const x=Math.max(this.g.length,v.g.length),N=[];for(let C=0;C<x;C++)N[C]=this.i(C)&v.i(C);return new o(N,this.h&v.h)},t.or=function(v){const x=Math.max(this.g.length,v.g.length),N=[];for(let C=0;C<x;C++)N[C]=this.i(C)|v.i(C);return new o(N,this.h|v.h)},t.xor=function(v){const x=Math.max(this.g.length,v.g.length),N=[];for(let C=0;C<x;C++)N[C]=this.i(C)^v.i(C);return new o(N,this.h^v.h)};function O(v){const x=v.g.length+1,N=[];for(let C=0;C<x;C++)N[C]=v.i(C)<<1|v.i(C-1)>>>31;return new o(N,v.h)}function L(v,x){const N=x>>5;x%=32;const C=v.g.length-N,z=[];for(let I=0;I<C;I++)z[I]=x>0?v.i(I+N)>>>x|v.i(I+N+1)<<32-x:v.i(I+N);return new o(z,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,d5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,li=o}).apply(typeof yv<"u"?yv:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u5,Za,h5,yc,K0,m5,f5,p5;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var p=0;p<d.length;++p){var g=d[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(d,p){if(p)e:{var g=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var W=d[S];if(!(W in g))break e;g=g[W]}d=d[d.length-1],S=g[d],p=p(S),p!=S&&p!=null&&e(g,d,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(d){return d||function(p){var g=[],S;for(S in p)Object.prototype.hasOwnProperty.call(p,S)&&g.push([S,p[S]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(d){var p=typeof d;return p=="object"&&d!=null||p=="function"}function c(d,p,g){return d.call.apply(d.bind,arguments)}function u(d,p,g){return u=c,u.apply(null,arguments)}function h(d,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function m(d,p){function g(){}g.prototype=p.prototype,d.Z=p.prototype,d.prototype=new g,d.prototype.constructor=d,d.Ob=function(S,W,K){for(var oe=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)oe[Re-2]=arguments[Re];return p.prototype[W].apply(S,oe)}}var f=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const p=d.length;if(p>0){const g=Array(p);for(let S=0;S<p;S++)g[S]=d[S];return g}return[]}function _(d,p){for(let S=1;S<arguments.length;S++){const W=arguments[S];var g=typeof W;if(g=g!="object"?g:W?Array.isArray(W)?"array":g:"null",g=="array"||g=="object"&&typeof W.length=="number"){g=d.length||0;const K=W.length||0;d.length=g+K;for(let oe=0;oe<K;oe++)d[g+oe]=W[oe]}else d.push(W)}}class A{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(d){o.setTimeout(()=>{throw d},0)}function b(){var d=v;let p=null;return d.g&&(p=d.g,d.g=d.g.next,d.g||(d.h=null),p.next=null),p}class w{constructor(){this.h=this.g=null}add(p,g){const S=j.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var j=new A(()=>new R,d=>d.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let O,L=!1,v=new w,x=()=>{const d=Promise.resolve(void 0);O=()=>{d.then(N)}};function N(){for(var d;d=b();){try{d.h.call(d.g)}catch(g){P(g)}var p=j;p.j(d),p.h<100&&(p.h++,d.next=p.g,p.g=d)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(d,p){this.type=d,this.g=this.target=p,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,p=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return d}();function T(d){return/^[\s\xa0]*$/.test(d)}function pe(d,p){z.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,p)}m(pe,z),pe.prototype.init=function(d,p){const g=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=p,p=d.relatedTarget,p||(g=="mouseover"?p=d.fromElement:g=="mouseout"&&(p=d.toElement)),this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),ye=0;function ke(d,p,g,S,W){this.listener=d,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=W,this.key=++ye,this.da=this.fa=!1}function X(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ae(d,p,g){for(const S in d)p.call(g,d[S],S,d)}function se(d,p){for(const g in d)p.call(void 0,d[g],g,d)}function we(d){const p={};for(const g in d)p[g]=d[g];return p}const ve="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(d,p){let g,S;for(let W=1;W<arguments.length;W++){S=arguments[W];for(g in S)d[g]=S[g];for(let K=0;K<ve.length;K++)g=ve[K],Object.prototype.hasOwnProperty.call(S,g)&&(d[g]=S[g])}}function D(d){this.src=d,this.g={},this.h=0}D.prototype.add=function(d,p,g,S,W){const K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);const oe=H(d,p,S,W);return oe>-1?(p=d[oe],g||(p.fa=!1)):(p=new ke(p,this.src,K,!!S,W),p.fa=g,d.push(p)),p};function U(d,p){const g=p.type;if(g in d.g){var S=d.g[g],W=Array.prototype.indexOf.call(S,p,void 0),K;(K=W>=0)&&Array.prototype.splice.call(S,W,1),K&&(X(p),d.g[g].length==0&&(delete d.g[g],d.h--))}}function H(d,p,g,S){for(let W=0;W<d.length;++W){const K=d[W];if(!K.da&&K.listener==p&&K.capture==!!g&&K.ha==S)return W}return-1}var re="closure_lm_"+(Math.random()*1e6|0),E={};function B(d,p,g,S,W){if(Array.isArray(p)){for(let K=0;K<p.length;K++)B(d,p[K],g,S,W);return null}return g=lt(g),d&&d[de]?d.J(p,g,l(S)?!!S.capture:!1,W):$(d,p,g,!1,S,W)}function $(d,p,g,S,W,K){if(!p)throw Error("Invalid event type");const oe=l(W)?!!W.capture:!!W;let Re=De(d);if(Re||(d[re]=Re=new D(d)),g=Re.add(p,g,S,oe,K),g.proxy)return g;if(S=te(),g.proxy=S,S.src=d,S.listener=g,d.addEventListener)I||(W=oe),W===void 0&&(W=!1),d.addEventListener(p.toString(),S,W);else if(d.attachEvent)d.attachEvent(be(p.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function te(){function d(g){return p.call(d.src,d.listener,g)}const p=et;return d}function me(d,p,g,S,W){if(Array.isArray(p))for(var K=0;K<p.length;K++)me(d,p[K],g,S,W);else S=l(S)?!!S.capture:!!S,g=lt(g),d&&d[de]?(d=d.i,K=String(p).toString(),K in d.g&&(p=d.g[K],g=H(p,g,S,W),g>-1&&(X(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete d.g[K],d.h--)))):d&&(d=De(d))&&(p=d.g[p.toString()],d=-1,p&&(d=H(p,g,S,W)),(g=d>-1?p[d]:null)&&he(g))}function he(d){if(typeof d!="number"&&d&&!d.da){var p=d.src;if(p&&p[de])U(p.i,d);else{var g=d.type,S=d.proxy;p.removeEventListener?p.removeEventListener(g,S,d.capture):p.detachEvent?p.detachEvent(be(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=De(p))?(U(g,d),g.h==0&&(g.src=null,p[re]=null)):X(d)}}}function be(d){return d in E?E[d]:E[d]="on"+d}function et(d,p){if(d.da)d=!0;else{p=new pe(p,this);const g=d.listener,S=d.ha||d.src;d.fa&&he(d),d=g.call(S,p)}return d}function De(d){return d=d[re],d instanceof D?d:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function lt(d){return typeof d=="function"?d:(d[Be]||(d[Be]=function(p){return d.handleEvent(p)}),d[Be])}function Ee(){C.call(this),this.i=new D(this),this.M=this,this.G=null}m(Ee,C),Ee.prototype[de]=!0,Ee.prototype.removeEventListener=function(d,p,g,S){me(this,d,p,g,S)};function He(d,p){var g,S=d.G;if(S)for(g=[];S;S=S.G)g.push(S);if(d=d.M,S=p.type||p,typeof p=="string")p=new z(p,d);else if(p instanceof z)p.target=p.target||d;else{var W=p;p=new z(S,d),Pe(p,W)}W=!0;let K,oe;if(g)for(oe=g.length-1;oe>=0;oe--)K=p.g=g[oe],W=qt(K,S,!0,p)&&W;if(K=p.g=d,W=qt(K,S,!0,p)&&W,W=qt(K,S,!1,p)&&W,g)for(oe=0;oe<g.length;oe++)K=p.g=g[oe],W=qt(K,S,!1,p)&&W}Ee.prototype.N=function(){if(Ee.Z.N.call(this),this.i){var d=this.i;for(const p in d.g){const g=d.g[p];for(let S=0;S<g.length;S++)X(g[S]);delete d.g[p],d.h--}}this.G=null},Ee.prototype.J=function(d,p,g,S){return this.i.add(String(d),p,!1,g,S)},Ee.prototype.K=function(d,p,g,S){return this.i.add(String(d),p,!0,g,S)};function qt(d,p,g,S){if(p=d.i.g[String(p)],!p)return!0;p=p.concat();let W=!0;for(let K=0;K<p.length;++K){const oe=p[K];if(oe&&!oe.da&&oe.capture==g){const Re=oe.listener,Ct=oe.ha||oe.src;oe.fa&&U(d.i,oe),W=Re.call(Ct,S)!==!1&&W}}return W&&!S.defaultPrevented}function zt(d,p){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(d,p||0)}function V(d){d.g=zt(()=>{d.g=null,d.i&&(d.i=!1,V(d))},d.l);const p=d.h;d.h=null,d.m.apply(null,p)}class ee extends C{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:V(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ce(d){C.call(this),this.h=d,this.g={}}m(ce,C);var ge=[];function le(d){ae(d.g,function(p,g){this.g.hasOwnProperty(g)&&he(p)},d),d.g={}}ce.prototype.N=function(){ce.Z.N.call(this),le(this)},ce.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var F=o.JSON.stringify,Y=o.JSON.parse,je=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function M(){}function Q(){}var q={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ne(){z.call(this,"d")}m(ne,z);function ze(){z.call(this,"c")}m(ze,z);var _e={},Ke=null;function cn(){return Ke=Ke||new Ee}_e.Ia="serverreachability";function gl(d){z.call(this,_e.Ia,d)}m(gl,z);function wa(d){const p=cn();He(p,new gl(p))}_e.STAT_EVENT="statevent";function Fp(d,p){z.call(this,_e.STAT_EVENT,d),this.stat=p}m(Fp,z);function en(d){const p=cn();He(p,new Fp(p,d))}_e.Ja="timingevent";function Bp(d,p){z.call(this,_e.Ja,d),this.size=p}m(Bp,z);function ka(d,p){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},p)}function ja(){this.g=!0}ja.prototype.ua=function(){this.g=!1};function iN(d,p,g,S,W,K){d.info(function(){if(d.g)if(K){var oe="",Re=K.split("&");for(let Qe=0;Qe<Re.length;Qe++){var Ct=Re[Qe].split("=");if(Ct.length>1){const At=Ct[0];Ct=Ct[1];const Jn=At.split("_");oe=Jn.length>=2&&Jn[1]=="type"?oe+(At+"="+Ct+"&"):oe+(At+"=redacted&")}}}else oe=null;else oe=K;return"XMLHTTP REQ ("+S+") [attempt "+W+"]: "+p+`
`+g+`
`+oe})}function sN(d,p,g,S,W,K,oe){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+W+"]: "+p+`
`+g+`
`+K+" "+oe})}function ms(d,p,g,S){d.info(function(){return"XMLHTTP TEXT ("+p+"): "+oN(d,g)+(S?" "+S:"")})}function aN(d,p){d.info(function(){return"TIMEOUT: "+p})}ja.prototype.info=function(){};function oN(d,p){if(!d.g)return p;if(!p)return null;try{const K=JSON.parse(p);if(K){for(d=0;d<K.length;d++)if(Array.isArray(K[d])){var g=K[d];if(!(g.length<2)){var S=g[1];if(Array.isArray(S)&&!(S.length<1)){var W=S[0];if(W!="noop"&&W!="stop"&&W!="close")for(let oe=1;oe<S.length;oe++)S[oe]=""}}}}return F(K)}catch{return p}}var xl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Up={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$p;function au(){}m(au,M),au.prototype.g=function(){return new XMLHttpRequest},$p=new au;function Na(d){return encodeURIComponent(String(d))}function lN(d){var p=1;d=d.split(":");const g=[];for(;p>0&&d.length;)g.push(d.shift()),p--;return d.length&&g.push(d.join(":")),g}function Vr(d,p,g,S){this.j=d,this.i=p,this.l=g,this.S=S||1,this.V=new ce(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wp}function Wp(){this.i=null,this.g="",this.h=!1}var qp={},ou={};function lu(d,p,g){d.M=1,d.A=vl(Xn(p)),d.u=g,d.R=!0,Hp(d,null)}function Hp(d,p){d.F=Date.now(),yl(d),d.B=Xn(d.A);var g=d.B,S=d.S;Array.isArray(S)||(S=[String(S)]),sg(g.i,"t",S),d.C=0,g=d.j.L,d.h=new Wp,d.g=jg(d.j,g?p:null,!d.u),d.P>0&&(d.O=new ee(u(d.Y,d,d.g),d.P)),p=d.V,g=d.g,S=d.ba;var W="readystatechange";Array.isArray(W)||(W&&(ge[0]=W.toString()),W=ge);for(let K=0;K<W.length;K++){const oe=B(g,W[K],S||p.handleEvent,!1,p.h||p);if(!oe)break;p.g[oe.key]=oe}p=d.J?we(d.J):{},d.u?(d.v||(d.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,p)):(d.v="GET",d.g.ea(d.B,d.v,null,p)),wa(),iN(d.i,d.v,d.B,d.l,d.S,d.u)}Vr.prototype.ba=function(d){d=d.target;const p=this.O;p&&Fr(d)==3?p.j():this.Y(d)},Vr.prototype.Y=function(d){try{if(d==this.g)e:{const Re=Fr(this.g),Ct=this.g.ya(),Qe=this.g.ca();if(!(Re<3)&&(Re!=3||this.g&&(this.h.h||this.g.la()||hg(this.g)))){this.K||Re!=4||Ct==7||(Ct==8||Qe<=0?wa(3):wa(2)),cu(this);var p=this.g.ca();this.X=p;var g=cN(this);if(this.o=p==200,sN(this.i,this.v,this.B,this.l,this.S,Re,p),this.o){if(this.U&&!this.L){t:{if(this.g){var S,W=this.g;if((S=W.g?W.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(S)){var K=S;break t}}K=null}if(d=K)ms(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,du(this,d);else{this.o=!1,this.m=3,en(12),Ci(this),_a(this);break e}}if(this.R){d=!0;let At;for(;!this.K&&this.C<g.length;)if(At=dN(this,g),At==ou){Re==4&&(this.m=4,en(14),d=!1),ms(this.i,this.l,null,"[Incomplete Response]");break}else if(At==qp){this.m=4,en(15),ms(this.i,this.l,g,"[Invalid Chunk]"),d=!1;break}else ms(this.i,this.l,At,null),du(this,At);if(Gp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Re!=4||g.length!=0||this.h.h||(this.m=1,en(16),d=!1),this.o=this.o&&d,!d)ms(this.i,this.l,g,"[Invalid Chunked Response]"),Ci(this),_a(this);else if(g.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),yu(oe),oe.P=!0,en(11))}}else ms(this.i,this.l,g,null),du(this,g);Re==4&&Ci(this),this.o&&!this.K&&(Re==4?vg(this.j,this):(this.o=!1,yl(this)))}else NN(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,en(12)):(this.m=0,en(13)),Ci(this),_a(this)}}}catch{}finally{}};function cN(d){if(!Gp(d))return d.g.la();const p=hg(d.g);if(p==="")return"";let g="";const S=p.length,W=Fr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Ci(d),_a(d),"";d.h.i=new o.TextDecoder}for(let K=0;K<S;K++)d.h.h=!0,g+=d.h.i.decode(p[K],{stream:!(W&&K==S-1)});return p.length=0,d.h.g+=g,d.C=0,d.h.g}function Gp(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function dN(d,p){var g=d.C,S=p.indexOf(`
`,g);return S==-1?ou:(g=Number(p.substring(g,S)),isNaN(g)?qp:(S+=1,S+g>p.length?ou:(p=p.slice(S,S+g),d.C=S+g,p)))}Vr.prototype.cancel=function(){this.K=!0,Ci(this)};function yl(d){d.T=Date.now()+d.H,Kp(d,d.H)}function Kp(d,p){if(d.D!=null)throw Error("WatchDog timer not null");d.D=ka(u(d.aa,d),p)}function cu(d){d.D&&(o.clearTimeout(d.D),d.D=null)}Vr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(aN(this.i,this.B),this.M!=2&&(wa(),en(17)),Ci(this),this.m=2,_a(this)):Kp(this,this.T-d)};function _a(d){d.j.I==0||d.K||vg(d.j,d)}function Ci(d){cu(d);var p=d.O;p&&typeof p.dispose=="function"&&p.dispose(),d.O=null,le(d.V),d.g&&(p=d.g,d.g=null,p.abort(),p.dispose())}function du(d,p){try{var g=d.j;if(g.I!=0&&(g.g==d||uu(g.h,d))){if(!d.L&&uu(g.h,d)&&g.I==3){try{var S=g.Ba.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var W=S;if(W[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<d.F)Nl(g),kl(g);else break e;xu(g),en(18)}}else g.xa=W[1],0<g.xa-g.K&&W[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ka(u(g.Va,g),6e3));Xp(g.h)<=1&&g.ta&&(g.ta=void 0)}else Ei(g,11)}else if((d.L||g.g==d)&&Nl(g),!T(p))for(W=g.Ba.g.parse(p),p=0;p<W.length;p++){let Qe=W[p];const At=Qe[0];if(!(At<=g.K))if(g.K=At,Qe=Qe[1],g.I==2)if(Qe[0]=="c"){g.M=Qe[1],g.ba=Qe[2];const Jn=Qe[3];Jn!=null&&(g.ka=Jn,g.j.info("VER="+g.ka));const Ti=Qe[4];Ti!=null&&(g.za=Ti,g.j.info("SVER="+g.za));const Br=Qe[5];Br!=null&&typeof Br=="number"&&Br>0&&(S=1.5*Br,g.O=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Ur=d.g;if(Ur){const zl=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var K=S.h;K.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(hu(K,K.h),K.h=null))}if(S.G){const vu=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;vu&&(S.wa=vu,tt(S.J,S.G,vu))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-d.F,g.j.info("Handshake RTT: "+g.T+"ms")),S=g;var oe=d;if(S.na=kg(S,S.L?S.ba:null,S.W),oe.L){Jp(S.h,oe);var Re=oe,Ct=S.O;Ct&&(Re.H=Ct),Re.D&&(cu(Re),yl(Re)),S.g=oe}else xg(S);g.i.length>0&&jl(g)}else Qe[0]!="stop"&&Qe[0]!="close"||Ei(g,7);else g.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?Ei(g,7):gu(g):Qe[0]!="noop"&&g.l&&g.l.qa(Qe),g.A=0)}}wa(4)}catch{}}var uN=class{constructor(d,p){this.g=d,this.map=p}};function Qp(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Yp(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Xp(d){return d.h?1:d.g?d.g.size:0}function uu(d,p){return d.h?d.h==p:d.g?d.g.has(p):!1}function hu(d,p){d.g?d.g.add(p):d.h=p}function Jp(d,p){d.h&&d.h==p?d.h=null:d.g&&d.g.has(p)&&d.g.delete(p)}Qp.prototype.cancel=function(){if(this.i=Zp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Zp(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let p=d.i;for(const g of d.g.values())p=p.concat(g.G);return p}return y(d.i)}var eg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hN(d,p){if(d){d=d.split("&");for(let g=0;g<d.length;g++){const S=d[g].indexOf("=");let W,K=null;S>=0?(W=d[g].substring(0,S),K=d[g].substring(S+1)):W=d[g],p(W,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Lr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;d instanceof Lr?(this.l=d.l,za(this,d.j),this.o=d.o,this.g=d.g,Ca(this,d.u),this.h=d.h,mu(this,ag(d.i)),this.m=d.m):d&&(p=String(d).match(eg))?(this.l=!1,za(this,p[1]||"",!0),this.o=Sa(p[2]||""),this.g=Sa(p[3]||"",!0),Ca(this,p[4]),this.h=Sa(p[5]||"",!0),mu(this,p[6]||"",!0),this.m=Sa(p[7]||"")):(this.l=!1,this.i=new Ta(null,this.l))}Lr.prototype.toString=function(){const d=[];var p=this.j;p&&d.push(Ea(p,tg,!0),":");var g=this.g;return(g||p=="file")&&(d.push("//"),(p=this.o)&&d.push(Ea(p,tg,!0),"@"),d.push(Na(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&d.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&d.push("/"),d.push(Ea(g,g.charAt(0)=="/"?pN:fN,!0))),(g=this.i.toString())&&d.push("?",g),(g=this.m)&&d.push("#",Ea(g,xN)),d.join("")},Lr.prototype.resolve=function(d){const p=Xn(this);let g=!!d.j;g?za(p,d.j):g=!!d.o,g?p.o=d.o:g=!!d.g,g?p.g=d.g:g=d.u!=null;var S=d.h;if(g)Ca(p,d.u);else if(g=!!d.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var W=p.h.lastIndexOf("/");W!=-1&&(S=p.h.slice(0,W+1)+S)}if(W=S,W==".."||W==".")S="";else if(W.indexOf("./")!=-1||W.indexOf("/.")!=-1){S=W.lastIndexOf("/",0)==0,W=W.split("/");const K=[];for(let oe=0;oe<W.length;){const Re=W[oe++];Re=="."?S&&oe==W.length&&K.push(""):Re==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),S&&oe==W.length&&K.push("")):(K.push(Re),S=!0)}S=K.join("/")}else S=W}return g?p.h=S:g=d.i.toString()!=="",g?mu(p,ag(d.i)):g=!!d.m,g&&(p.m=d.m),p};function Xn(d){return new Lr(d)}function za(d,p,g){d.j=g?Sa(p,!0):p,d.j&&(d.j=d.j.replace(/:$/,""))}function Ca(d,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);d.u=p}else d.u=null}function mu(d,p,g){p instanceof Ta?(d.i=p,yN(d.i,d.l)):(g||(p=Ea(p,gN)),d.i=new Ta(p,d.l))}function tt(d,p,g){d.i.set(p,g)}function vl(d){return tt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Sa(d,p){return d?p?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ea(d,p,g){return typeof d=="string"?(d=encodeURI(d).replace(p,mN),g&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function mN(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var tg=/[#\/\?@]/g,fN=/[#\?:]/g,pN=/[#\?]/g,gN=/[#\?@]/g,xN=/#/g;function Ta(d,p){this.h=this.g=null,this.i=d||null,this.j=!!p}function Si(d){d.g||(d.g=new Map,d.h=0,d.i&&hN(d.i,function(p,g){d.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Ta.prototype,t.add=function(d,p){Si(this),this.i=null,d=fs(this,d);let g=this.g.get(d);return g||this.g.set(d,g=[]),g.push(p),this.h+=1,this};function ng(d,p){Si(d),p=fs(d,p),d.g.has(p)&&(d.i=null,d.h-=d.g.get(p).length,d.g.delete(p))}function rg(d,p){return Si(d),p=fs(d,p),d.g.has(p)}t.forEach=function(d,p){Si(this),this.g.forEach(function(g,S){g.forEach(function(W){d.call(p,W,S,this)},this)},this)};function ig(d,p){Si(d);let g=[];if(typeof p=="string")rg(d,p)&&(g=g.concat(d.g.get(fs(d,p))));else for(d=Array.from(d.g.values()),p=0;p<d.length;p++)g=g.concat(d[p]);return g}t.set=function(d,p){return Si(this),this.i=null,d=fs(this,d),rg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[p]),this.h+=1,this},t.get=function(d,p){return d?(d=ig(this,d),d.length>0?String(d[0]):p):p};function sg(d,p,g){ng(d,p),g.length>0&&(d.i=null,d.g.set(fs(d,p),y(g)),d.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],p=Array.from(this.g.keys());for(let S=0;S<p.length;S++){var g=p[S];const W=Na(g);g=ig(this,g);for(let K=0;K<g.length;K++){let oe=W;g[K]!==""&&(oe+="="+Na(g[K])),d.push(oe)}}return this.i=d.join("&")};function ag(d){const p=new Ta;return p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),p}function fs(d,p){return p=String(p),d.j&&(p=p.toLowerCase()),p}function yN(d,p){p&&!d.j&&(Si(d),d.i=null,d.g.forEach(function(g,S){const W=S.toLowerCase();S!=W&&(ng(this,S),sg(this,W,g))},d)),d.j=p}function vN(d,p){const g=new ja;if(o.Image){const S=new Image;S.onload=h(Or,g,"TestLoadImage: loaded",!0,p,S),S.onerror=h(Or,g,"TestLoadImage: error",!1,p,S),S.onabort=h(Or,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=h(Or,g,"TestLoadImage: timeout",!1,p,S),o.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else p(!1)}function bN(d,p){const g=new ja,S=new AbortController,W=setTimeout(()=>{S.abort(),Or(g,"TestPingServer: timeout",!1,p)},1e4);fetch(d,{signal:S.signal}).then(K=>{clearTimeout(W),K.ok?Or(g,"TestPingServer: ok",!0,p):Or(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(W),Or(g,"TestPingServer: error",!1,p)})}function Or(d,p,g,S,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),S(g)}catch{}}function wN(){this.g=new je}function fu(d){this.i=d.Sb||null,this.h=d.ab||!1}m(fu,M),fu.prototype.g=function(){return new bl(this.i,this.h)};function bl(d,p){Ee.call(this),this.H=d,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(bl,Ee),t=bl.prototype,t.open=function(d,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=p,this.readyState=1,Aa(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(p.body=d),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ia(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Aa(this)),this.g&&(this.readyState=3,Aa(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;og(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function og(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var p=d.value?d.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!d.done}))&&(this.response=this.responseText+=p)}d.done?Ia(this):Aa(this),this.readyState==3&&og(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Ia(this))},t.Na=function(d){this.g&&(this.response=d,Ia(this))},t.ga=function(){this.g&&Ia(this)};function Ia(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Aa(d)}t.setRequestHeader=function(d,p){this.A.append(d,p)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,d.push(g[0]+": "+g[1]),g=p.next();return d.join(`\r
`)};function Aa(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function lg(d){let p="";return ae(d,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function pu(d,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=lg(g),typeof d=="string"?g!=null&&Na(g):tt(d,p,g))}function ft(d){Ee.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(ft,Ee);var kN=/^https?$/i,jN=["POST","PUT"];t=ft.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);p=p?p.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$p.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(p,String(d),!0),this.B=!1}catch(K){cg(this,K);return}if(d=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var W in S)g.set(W,S[W]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const K of S.keys())g.set(K,S.get(K));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(K=>K.toLowerCase()=="content-type"),W=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(jN,p,void 0)>=0)||S||W||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,oe]of g)this.g.setRequestHeader(K,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(K){cg(this,K)}};function cg(d,p){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=p,d.o=5,dg(d),wl(d)}function dg(d){d.A||(d.A=!0,He(d,"complete"),He(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,He(this,"complete"),He(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),ft.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ug(this):this.Xa())},t.Xa=function(){ug(this)};function ug(d){if(d.h&&typeof a<"u"){if(d.v&&Fr(d)==4)setTimeout(d.Ca.bind(d),0);else if(He(d,"readystatechange"),Fr(d)==4){d.h=!1;try{const K=d.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=K===0){let oe=String(d.D).match(eg)[1]||null;!oe&&o.self&&o.self.location&&(oe=o.self.location.protocol.slice(0,-1)),S=!kN.test(oe?oe.toLowerCase():"")}g=S}if(g)He(d,"complete"),He(d,"success");else{d.o=6;try{var W=Fr(d)>2?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.ca()+"]",dg(d)}}finally{wl(d)}}}}function wl(d,p){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const g=d.g;d.g=null,p||He(d,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Fr(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Fr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var p=this.g.responseText;return d&&p.indexOf(d)==0&&(p=p.substring(d.length)),Y(p)}};function hg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function NN(d){const p={};d=(d.g&&Fr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(T(d[S]))continue;var g=lN(d[S]);const W=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const K=p[W]||[];p[W]=K,K.push(g)}se(p,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pa(d,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[d]||p}function mg(d){this.za=0,this.i=[],this.j=new ja,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Pa("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Pa("baseRetryDelayMs",5e3,d),this.Za=Pa("retryDelaySeedMs",1e4,d),this.Ta=Pa("forwardChannelMaxRetries",2,d),this.va=Pa("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Qp(d&&d.concurrentRequestLimit),this.Ba=new wN,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=mg.prototype,t.ka=8,t.I=1,t.connect=function(d,p,g,S){en(0),this.W=d,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.J=kg(this,null,this.W),jl(this)};function gu(d){if(fg(d),d.I==3){var p=d.V++,g=Xn(d.J);if(tt(g,"SID",d.M),tt(g,"RID",p),tt(g,"TYPE","terminate"),Ra(d,g),p=new Vr(d,d.j,p),p.M=2,p.A=vl(Xn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=jg(p.j,null),p.g.ea(p.A)),p.F=Date.now(),yl(p)}wg(d)}function kl(d){d.g&&(yu(d),d.g.cancel(),d.g=null)}function fg(d){kl(d),d.v&&(o.clearTimeout(d.v),d.v=null),Nl(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function jl(d){if(!Yp(d.h)&&!d.m){d.m=!0;var p=d.Ea;O||x(),L||(O(),L=!0),v.add(p,d),d.D=0}}function _N(d,p){return Xp(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=p.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=ka(u(d.Ea,d,p),bg(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const W=new Vr(this,this.j,d);let K=this.o;if(this.U&&(K?(K=we(K),Pe(K,this.U)):K=this.U),this.u!==null||this.R||(W.J=K,K=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=gg(this,W,p),g=Xn(this.J),tt(g,"RID",d),tt(g,"CVER",22),this.G&&tt(g,"X-HTTP-Session-Id",this.G),Ra(this,g),K&&(this.R?p="headers="+Na(lg(K))+"&"+p:this.u&&pu(g,this.u,K)),hu(this.h,W),this.Ra&&tt(g,"TYPE","init"),this.S?(tt(g,"$req",p),tt(g,"SID","null"),W.U=!0,lu(W,g,null)):lu(W,g,p),this.I=2}}else this.I==3&&(d?pg(this,d):this.i.length==0||Yp(this.h)||pg(this))};function pg(d,p){var g;p?g=p.l:g=d.V++;const S=Xn(d.J);tt(S,"SID",d.M),tt(S,"RID",g),tt(S,"AID",d.K),Ra(d,S),d.u&&d.o&&pu(S,d.u,d.o),g=new Vr(d,d.j,g,d.D+1),d.u===null&&(g.J=d.o),p&&(d.i=p.G.concat(d.i)),p=gg(d,g,1e3),g.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),hu(d.h,g),lu(g,S,p)}function Ra(d,p){d.H&&ae(d.H,function(g,S){tt(p,S,g)}),d.l&&ae({},function(g,S){tt(p,S,g)})}function gg(d,p,g){g=Math.min(d.i.length,g);const S=d.l?u(d.l.Ka,d.l,d):null;e:{var W=d.i;let Re=-1;for(;;){const Ct=["count="+g];Re==-1?g>0?(Re=W[0].g,Ct.push("ofs="+Re)):Re=0:Ct.push("ofs="+Re);let Qe=!0;for(let At=0;At<g;At++){var K=W[At].g;const Jn=W[At].map;if(K-=Re,K<0)Re=Math.max(0,W[At].g-100),Qe=!1;else try{K="req"+K+"_"||"";try{var oe=Jn instanceof Map?Jn:Object.entries(Jn);for(const[Ti,Br]of oe){let Ur=Br;l(Br)&&(Ur=F(Br)),Ct.push(K+Ti+"="+encodeURIComponent(Ur))}}catch(Ti){throw Ct.push(K+"type="+encodeURIComponent("_badmap")),Ti}}catch{S&&S(Jn)}}if(Qe){oe=Ct.join("&");break e}}oe=void 0}return d=d.i.splice(0,g),p.G=d,oe}function xg(d){if(!d.g&&!d.v){d.Y=1;var p=d.Da;O||x(),L||(O(),L=!0),v.add(p,d),d.A=0}}function xu(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=ka(u(d.Da,d),bg(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,yg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=ka(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,en(10),kl(this),yg(this))};function yu(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function yg(d){d.g=new Vr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var p=Xn(d.na);tt(p,"RID","rpc"),tt(p,"SID",d.M),tt(p,"AID",d.K),tt(p,"CI",d.F?"0":"1"),!d.F&&d.ia&&tt(p,"TO",d.ia),tt(p,"TYPE","xmlhttp"),Ra(d,p),d.u&&d.o&&pu(p,d.u,d.o),d.O&&(d.g.H=d.O);var g=d.g;d=d.ba,g.M=1,g.A=vl(Xn(p)),g.u=null,g.R=!0,Hp(g,d)}t.Va=function(){this.C!=null&&(this.C=null,kl(this),xu(this),en(19))};function Nl(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function vg(d,p){var g=null;if(d.g==p){Nl(d),yu(d),d.g=null;var S=2}else if(uu(d.h,p))g=p.G,Jp(d.h,p),S=1;else return;if(d.I!=0){if(p.o)if(S==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var W=d.D;S=cn(),He(S,new Bp(S,g)),jl(d)}else xg(d);else if(W=p.m,W==3||W==0&&p.X>0||!(S==1&&_N(d,p)||S==2&&xu(d)))switch(g&&g.length>0&&(p=d.h,p.i=p.i.concat(g)),W){case 1:Ei(d,5);break;case 4:Ei(d,10);break;case 3:Ei(d,6);break;default:Ei(d,2)}}}function bg(d,p){let g=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(g*=2),g*p}function Ei(d,p){if(d.j.info("Error code "+p),p==2){var g=u(d.bb,d),S=d.Ua;const W=!S;S=new Lr(S||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||za(S,"https"),vl(S),W?vN(S.toString(),g):bN(S.toString(),g)}else en(2);d.I=0,d.l&&d.l.pa(p),wg(d),fg(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),en(2)):(this.j.info("Failed to ping google.com"),en(1))};function wg(d){if(d.I=0,d.ja=[],d.l){const p=Zp(d.h);(p.length!=0||d.i.length!=0)&&(_(d.ja,p),_(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function kg(d,p,g){var S=g instanceof Lr?Xn(g):new Lr(g);if(S.g!="")p&&(S.g=p+"."+S.g),Ca(S,S.u);else{var W=o.location;S=W.protocol,p=p?p+"."+W.hostname:W.hostname,W=+W.port;const K=new Lr(null);S&&za(K,S),p&&(K.g=p),W&&Ca(K,W),g&&(K.h=g),S=K}return g=d.G,p=d.wa,g&&p&&tt(S,g,p),tt(S,"VER",d.ka),Ra(d,S),S}function jg(d,p,g){if(p&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=d.Aa&&!d.ma?new ft(new fu({ab:g})):new ft(d.ma),p.Fa(d.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ng(){}t=Ng.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _l(){}_l.prototype.g=function(d,p){return new yn(d,p)};function yn(d,p){Ee.call(this),this.g=new mg(p),this.l=d,this.h=p&&p.messageUrlParams||null,d=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(d?d["X-WebChannel-Content-Type"]=p.messageContentType:d={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(d?d["X-WebChannel-Client-Profile"]=p.sa:d={"X-WebChannel-Client-Profile":p.sa}),this.g.U=d,(d=p&&p.Qb)&&!T(d)&&(this.g.u=d),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!T(p)&&(this.g.G=p,d=this.h,d!==null&&p in d&&(d=this.h,p in d&&delete d[p])),this.j=new ps(this)}m(yn,Ee),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){gu(this.g)},yn.prototype.o=function(d){var p=this.g;if(typeof d=="string"){var g={};g.__data__=d,d=g}else this.v&&(g={},g.__data__=F(d),d=g);p.i.push(new uN(p.Ya++,d)),p.I==3&&jl(p)},yn.prototype.N=function(){this.g.l=null,delete this.j,gu(this.g),delete this.g,yn.Z.N.call(this)};function _g(d){ne.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var p=d.__sm__;if(p){e:{for(const g in p){d=g;break e}d=void 0}(this.i=d)&&(d=this.i,p=p!==null&&d in p?p[d]:void 0),this.data=p}else this.data=d}m(_g,ne);function zg(){ze.call(this),this.status=1}m(zg,ze);function ps(d){this.g=d}m(ps,Ng),ps.prototype.ra=function(){He(this.g,"a")},ps.prototype.qa=function(d){He(this.g,new _g(d))},ps.prototype.pa=function(d){He(this.g,new zg)},ps.prototype.oa=function(){He(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,p5=function(){return new _l},f5=function(){return cn()},m5=_e,K0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xl.NO_ERROR=0,xl.TIMEOUT=8,xl.HTTP_ERROR=6,yc=xl,Up.COMPLETE="complete",h5=Up,Q.EventType=q,q.OPEN="a",q.CLOSE="b",q.ERROR="c",q.MESSAGE="d",Ee.prototype.listen=Ee.prototype.J,Za=Q,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,u5=ft}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const vv="@firebase/firestore",bv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qt.UNAUTHENTICATED=new Qt(null),Qt.GOOGLE_CREDENTIALS=new Qt("google-credentials-uid"),Qt.FIRST_PARTY=new Qt("first-party-uid"),Qt.MOCK_USER=new Qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ga="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Yf("@firebase/firestore");function xs(){return is.logLevel}function fe(t,...e){if(is.logLevel<=Fe.DEBUG){const n=e.map(ip);is.debug(`Firestore (${ga}): ${t}`,...n)}}function Rr(t,...e){if(is.logLevel<=Fe.ERROR){const n=e.map(ip);is.error(`Firestore (${ga}): ${t}`,...n)}}function ra(t,...e){if(is.logLevel<=Fe.WARN){const n=e.map(ip);is.warn(`Firestore (${ga}): ${t}`,...n)}}function ip(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,g5(t,r,n)}function g5(t,e,n){let r=`FIRESTORE (${ga}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Rr(r),new Error(r)}function qe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||g5(e,i,r)}function Ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends zi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Qt.UNAUTHENTICATED))}shutdown(){}}class GA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class KA{constructor(e){this.t=e,this.currentUser=Qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new jr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new jr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new jr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new x5(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Qt(e)}}class QA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new QA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,c3(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const r=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new wv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new wv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=JA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function Ve(t,e){return t<e?-1:t>e?1:0}function Q0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),a=e.charAt(r);if(i!==a)return fh(i)===fh(a)?Ve(i,a):fh(i)?1:-1}return Ve(t.length,e.length)}const ZA=55296,e6=57343;function fh(t){const e=t.charCodeAt(0);return e>=ZA&&e<=e6}function ia(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="__name__";class nr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return nr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof nr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=nr.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return Ve(e.length,n.length)}static compareSegments(e,n){const r=nr.isNumericId(e),i=nr.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?nr.extractNumericId(e).compare(nr.extractNumericId(n)):Q0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return li.fromString(e.substring(4,e.length-2))}}class Xe extends nr{construct(e,n,r){return new Xe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ue(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Xe(n)}static emptyPath(){return new Xe([])}}const t6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends nr{construct(e,n,r){return new Ft(e,n,r)}static isValidIdentifier(e){return t6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kv}static keyField(){return new Ft([kv])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ue(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(a(),i++)}if(a(),o)throw new ue(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(n)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.path=e}static fromPath(e){return new Ne(Xe.fromString(e))}static fromName(e){return new Ne(Xe.fromString(e).popFirst(5))}static empty(){return new Ne(Xe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ne(new Xe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y5(t,e,n){if(!n)throw new ue(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function n6(t,e,n,r){if(e===!0&&r===!0)throw new ue(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jv(t){if(!Ne.isDocumentKey(t))throw new ue(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Nv(t){if(Ne.isDocumentKey(t))throw new ue(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function v5(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Hd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function fi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ue(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hd(t);throw new ue(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t,e){const n={typeString:t};return e&&(n.value=e),n}function dl(t,e){if(!v5(t))throw new ue(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ue(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,zv=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zv);return new rt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ue(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_v)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zv}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(dl(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:Nt("string",rt._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new rt(0,0))}static max(){return new Ie(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=-1;function r6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ie.fromTimestamp(r===1e9?new rt(n+1,0):new rt(n,r));return new pi(i,Ne.empty(),e)}function i6(t){return new pi(t.readTime,t.key,Go)}class pi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new pi(Ie.min(),Ne.empty(),Go)}static max(){return new pi(Ie.max(),Ne.empty(),Go)}}function s6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ne.comparator(t.documentKey,e.documentKey),n!==0?n:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class o6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xa(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==a6)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let i=0,a=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++a,o&&a===i&&n()},c=>r(c))}),o=!0,a===i&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(i=>i?Z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,i)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===a&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Z((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function l6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ya(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Gd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=-1;function Kd(t){return t==null}function cd(t){return t===0&&1/t==-1/0}function c6(t){return typeof t=="number"&&Number.isInteger(t)&&!cd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5="";function d6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Cv(e)),e=u6(t.get(n),e);return Cv(e)}function u6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case b5:n+="";break;default:n+=a}}return n}function Cv(t){return t+b5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ls(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function w5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n){this.comparator=e,this.root=n||Ot.EMPTY}insert(e,n){return new mt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??Ot.RED,this.left=i??Ot.EMPTY,this.right=a??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new Ot(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new Ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ev(this.data.getIterator())}getIteratorFrom(e){return new Ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof It)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new It(this.comparator);return n.data=e,n}}class Ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new It(Ft.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new k5("Invalid base64 string: "+a):a}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let o=0;o<i.length;++o)a+=String.fromCharCode(i[o]);return a}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const h6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gi(t){if(qe(!!t,39018),typeof t=="string"){let e=0;const n=h6.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function xi(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j5="server_timestamp",N5="__type__",_5="__previous_value__",z5="__local_write_time__";function op(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[N5])==null?void 0:r.stringValue)===j5}function Qd(t){const e=t.mapValue.fields[_5];return op(e)?Qd(e):e}function Ko(t){const e=gi(t.mapValue.fields[z5].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m6{constructor(e,n,r,i,a,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const dd="(default)";class Qo{constructor(e,n){this.projectId=e,this.database=n||dd}static empty(){return new Qo("","")}get isDefaultDatabase(){return this.database===dd}isEqual(e){return e instanceof Qo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C5="__type__",f6="__max__",Yl={mapValue:{}},S5="__vector__",ud="value";function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?op(t)?4:g6(t)?9007199254740991:p6(t)?10:11:Ce(28295,{value:t})}function fr(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ko(t).isEqual(Ko(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const o=gi(i.timestampValue),l=gi(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return xi(i.bytesValue).isEqual(xi(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return yt(i.geoPointValue.latitude)===yt(a.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return yt(i.integerValue)===yt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const o=yt(i.doubleValue),l=yt(a.doubleValue);return o===l?cd(o)===cd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ia(t.arrayValue.values||[],e.arrayValue.values||[],fr);case 10:case 11:return function(i,a){const o=i.mapValue.fields||{},l=a.mapValue.fields||{};if(Sv(o)!==Sv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!fr(o[c],l[c])))return!1;return!0}(t,e);default:return Ce(52216,{left:t})}}function Yo(t,e){return(t.values||[]).find(n=>fr(n,e))!==void 0}function sa(t,e){if(t===e)return 0;const n=yi(t),r=yi(e);if(n!==r)return Ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=yt(a.integerValue||a.doubleValue),c=yt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Tv(t.timestampValue,e.timestampValue);case 4:return Tv(Ko(t),Ko(e));case 5:return Q0(t.stringValue,e.stringValue);case 6:return function(a,o){const l=xi(a),c=xi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Ve(l[u],c[u]);if(h!==0)return h}return Ve(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Ve(yt(a.latitude),yt(o.latitude));return l!==0?l:Ve(yt(a.longitude),yt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Iv(t.arrayValue,e.arrayValue);case 10:return function(a,o){var f,y,_,A;const l=a.fields||{},c=o.fields||{},u=(f=l[ud])==null?void 0:f.arrayValue,h=(y=c[ud])==null?void 0:y.arrayValue,m=Ve(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return m!==0?m:Iv(u,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Yl.mapValue&&o===Yl.mapValue)return 0;if(a===Yl.mapValue)return 1;if(o===Yl.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let m=0;m<c.length&&m<h.length;++m){const f=Q0(c[m],h[m]);if(f!==0)return f;const y=sa(l[c[m]],u[h[m]]);if(y!==0)return y}return Ve(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ce(23264,{he:n})}}function Tv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const n=gi(t),r=gi(e),i=Ve(n.seconds,r.seconds);return i!==0?i:Ve(n.nanos,r.nanos)}function Iv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=sa(n[i],r[i]);if(a)return a}return Ve(n.length,r.length)}function aa(t){return Y0(t)}function Y0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return xi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ne.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Y0(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const o of r)a?a=!1:i+=",",i+=`${o}:${Y0(n.fields[o])}`;return i+"}"}(t.mapValue):Ce(61005,{value:t})}function vc(t){switch(yi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Qd(t);return e?16+vc(e):16;case 5:return 2*t.stringValue.length;case 6:return xi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+vc(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return ls(r.fields,(a,o)=>{i+=a.length+vc(o)}),i}(t.mapValue);default:throw Ce(13486,{value:t})}}function Av(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function X0(t){return!!t&&"integerValue"in t}function lp(t){return!!t&&"arrayValue"in t}function Pv(t){return!!t&&"nullValue"in t}function Rv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function bc(t){return!!t&&"mapValue"in t}function p6(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[C5])==null?void 0:r.stringValue)===S5}function vo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return ls(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vo(t.arrayValue.values[n]);return e}return{...t}}function g6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===f6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!bc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vo(n)}setAll(e){let n=Ft.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=vo(o):i.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());bc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return fr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];bc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ls(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new En(vo(this.value))}}function E5(t){const e=[];return ls(t.fields,(n,r)=>{const i=new Ft([n]);if(bc(r)){const a=E5(r.mapValue).fields;if(a.length===0)e.push(i);else for(const o of a)e.push(i.child(o))}else e.push(i)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n,r,i,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Xt(e,0,Ie.min(),Ie.min(),Ie.min(),En.empty(),0)}static newFoundDocument(e,n,r,i){return new Xt(e,1,n,Ie.min(),r,i,0)}static newNoDocument(e,n){return new Xt(e,2,n,Ie.min(),Ie.min(),En.empty(),0)}static newUnknownDocument(e,n){return new Xt(e,3,n,Ie.min(),Ie.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,n){this.position=e,this.inclusive=n}}function Dv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],o=t.position[i];if(a.field.isKeyField()?r=Ne.comparator(Ne.fromName(o.referenceValue),n.key):r=sa(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Mv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!fr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n="asc"){this.field=e,this.dir=n}}function x6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T5{}class jt extends T5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new v6(e,n,r):n==="array-contains"?new k6(e,r):n==="in"?new j6(e,r):n==="not-in"?new N6(e,r):n==="array-contains-any"?new _6(e,r):new jt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new b6(e,r):new w6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(sa(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(sa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends T5{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Yn(e,n)}matches(e){return I5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function I5(t){return t.op==="and"}function A5(t){return y6(t)&&I5(t)}function y6(t){for(const e of t.filters)if(e instanceof Yn)return!1;return!0}function J0(t){if(t instanceof jt)return t.field.canonicalString()+t.op.toString()+aa(t.value);if(A5(t))return t.filters.map(e=>J0(e)).join(",");{const e=t.filters.map(n=>J0(n)).join(",");return`${t.op}(${e})`}}function P5(t,e){return t instanceof jt?function(r,i){return i instanceof jt&&r.op===i.op&&r.field.isEqual(i.field)&&fr(r.value,i.value)}(t,e):t instanceof Yn?function(r,i){return i instanceof Yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,o,l)=>a&&P5(o,i.filters[l]),!0):!1}(t,e):void Ce(19439)}function R5(t){return t instanceof jt?function(n){return`${n.field.canonicalString()} ${n.op} ${aa(n.value)}`}(t):t instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(R5).join(" ,")+"}"}(t):"Filter"}class v6 extends jt{constructor(e,n,r){super(e,n,r),this.key=Ne.fromName(r.referenceValue)}matches(e){const n=Ne.comparator(e.key,this.key);return this.matchesComparison(n)}}class b6 extends jt{constructor(e,n){super(e,"in",n),this.keys=D5("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class w6 extends jt{constructor(e,n){super(e,"not-in",n),this.keys=D5("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function D5(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Ne.fromName(r.referenceValue))}class k6 extends jt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lp(n)&&Yo(n.arrayValue,this.value)}}class j6 extends jt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Yo(this.value.arrayValue,n)}}class N6 extends jt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Yo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Yo(this.value.arrayValue,n)}}class _6 extends jt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Yo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e,n=null,r=[],i=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function Vv(t,e=null,n=[],r=[],i=null,a=null,o=null){return new z6(t,e,n,r,i,a,o)}function cp(t){const e=Ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>J0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Kd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>aa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>aa(r)).join(",")),e.Te=n}return e.Te}function dp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!x6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!P5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mv(t.startAt,e.startAt)&&Mv(t.endAt,e.endAt)}function Z0(t){return Ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,n=null,r=[],i=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function C6(t,e,n,r,i,a,o,l){return new va(t,e,n,r,i,a,o,l)}function up(t){return new va(t)}function Lv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function M5(t){return t.collectionGroup!==null}function bo(t){const e=Ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new It(Ft.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Xo(a,r))}),n.has(Ft.keyField().canonicalString())||e.Ie.push(new Xo(Ft.keyField(),r))}return e.Ie}function cr(t){const e=Ae(t);return e.Ee||(e.Ee=S6(e,bo(t))),e.Ee}function S6(t,e){if(t.limitType==="F")return Vv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Xo(i.field,a)});const n=t.endAt?new hd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new hd(t.startAt.position,t.startAt.inclusive):null;return Vv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function em(t,e){const n=t.filters.concat([e]);return new va(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tm(t,e,n){return new va(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Yd(t,e){return dp(cr(t),cr(e))&&t.limitType===e.limitType}function V5(t){return`${cp(cr(t))}|lt:${t.limitType}`}function ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>R5(i)).join(", ")}]`),Kd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>aa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>aa(i)).join(",")),`Target(${r})`}(cr(t))}; limitType=${t.limitType})`}function Xd(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ne.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of bo(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const u=Dv(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,bo(r),i)||r.endAt&&!function(o,l,c){const u=Dv(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,bo(r),i))}(t,e)}function E6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function L5(t){return(e,n)=>{let r=!1;for(const i of bo(t)){const a=T6(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function T6(t,e,n){const r=t.field.isKeyField()?Ne.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?sa(c,u):Ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ls(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return w5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new mt(Ne.comparator);function Dr(){return I6}const O5=new mt(Ne.comparator);function eo(...t){let e=O5;for(const n of t)e=e.insert(n.key,n);return e}function F5(t){let e=O5;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wi(){return wo()}function B5(){return wo()}function wo(){return new cs(t=>t.toString(),(t,e)=>t.isEqual(e))}const A6=new mt(Ne.comparator),P6=new It(Ne.comparator);function Le(...t){let e=P6;for(const n of t)e=e.add(n);return e}const R6=new It(Ve);function D6(){return R6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function U5(t){return{integerValue:""+t}}function M6(t,e){return c6(e)?U5(e):hp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(){this._=void 0}}function V6(t,e,n){return t instanceof md?function(i,a){const o={fields:{[N5]:{stringValue:j5},[z5]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&op(a)&&(a=Qd(a)),a&&(o.fields[_5]=a),{mapValue:o}}(n,e):t instanceof Jo?W5(t,e):t instanceof Zo?q5(t,e):function(i,a){const o=$5(i,a),l=Ov(o)+Ov(i.Ae);return X0(o)&&X0(i.Ae)?U5(l):hp(i.serializer,l)}(t,e)}function L6(t,e,n){return t instanceof Jo?W5(t,e):t instanceof Zo?q5(t,e):n}function $5(t,e){return t instanceof fd?function(r){return X0(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class md extends Jd{}class Jo extends Jd{constructor(e){super(),this.elements=e}}function W5(t,e){const n=H5(e);for(const r of t.elements)n.some(i=>fr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Zo extends Jd{constructor(e){super(),this.elements=e}}function q5(t,e){let n=H5(e);for(const r of t.elements)n=n.filter(i=>!fr(i,r));return{arrayValue:{values:n}}}class fd extends Jd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Ov(t){return yt(t.integerValue||t.doubleValue)}function H5(t){return lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function O6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Jo&&i instanceof Jo||r instanceof Zo&&i instanceof Zo?ia(r.elements,i.elements,fr):r instanceof fd&&i instanceof fd?fr(r.Ae,i.Ae):r instanceof md&&i instanceof md}(t.transform,e.transform)}class F6{constructor(e,n){this.version=e,this.transformResults=n}}class dr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Zd{}function G5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new mp(t.key,dr.none()):new ul(t.key,t.data,dr.none());{const n=t.data,r=En.empty();let i=new It(Ft.comparator);for(let a of e.fields)if(!i.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),i=i.add(a)}return new ds(t.key,r,new Hn(i.toArray()),dr.none())}}function B6(t,e,n){t instanceof ul?function(i,a,o){const l=i.value.clone(),c=Bv(i.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ds?function(i,a,o){if(!wc(i.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Bv(i.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(K5(i)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ko(t,e,n,r){return t instanceof ul?function(a,o,l,c){if(!wc(a.precondition,o))return l;const u=a.value.clone(),h=Uv(a.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof ds?function(a,o,l,c){if(!wc(a.precondition,o))return l;const u=Uv(a.fieldTransforms,c,o),h=o.data;return h.setAll(K5(a)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,l){return wc(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function U6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=$5(r.transform,i||null);a!=null&&(n===null&&(n=En.empty()),n.set(r.field,a))}return n||null}function Fv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ia(r,i,(a,o)=>O6(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ul extends Zd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ds extends Zd{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function K5(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Bv(t,e,n){const r=new Map;qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const a=t[i],o=a.transform,l=e.data.field(a.field);r.set(a.field,L6(o,l,n[i]))}return r}function Uv(t,e,n){const r=new Map;for(const i of t){const a=i.transform,o=n.data.field(i.field);r.set(i.field,V6(a,o,e))}return r}class mp extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class $6 extends Zd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&B6(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=B5();return this.mutations.forEach(i=>{const a=e.get(i.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(i.key)?null:l;const c=G5(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(Ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Le())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,(n,r)=>Fv(n,r))&&ia(this.baseMutations,e.baseMutations,(n,r)=>Fv(n,r))}}class fp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return A6}();const a=e.mutations;for(let o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new fp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bt,Oe;function G6(t){switch(t){case J.OK:return Ce(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function Q5(t){if(t===void 0)return Rr("GRPC error has no .code"),J.UNKNOWN;switch(t){case bt.OK:return J.OK;case bt.CANCELLED:return J.CANCELLED;case bt.UNKNOWN:return J.UNKNOWN;case bt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case bt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case bt.INTERNAL:return J.INTERNAL;case bt.UNAVAILABLE:return J.UNAVAILABLE;case bt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case bt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case bt.NOT_FOUND:return J.NOT_FOUND;case bt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case bt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case bt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case bt.ABORTED:return J.ABORTED;case bt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case bt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case bt.DATA_LOSS:return J.DATA_LOSS;default:return Ce(39323,{code:t})}}(Oe=bt||(bt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6=new li([4294967295,4294967295],0);function $v(t){const e=K6().encode(t),n=new d5;return n.update(e),new Uint8Array(n.digest())}function Wv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new li([n,r],0),new li([i,a],0)]}class pp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new to(`Invalid padding: ${n}`);if(r<0)throw new to(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new to(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new to(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=li.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(li.fromNumber(r)));return i.compare(Q6)===1&&(i=new li([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=$v(e),[r,i]=Wv(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new pp(a,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=$v(e),[r,i]=Wv(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,i,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class to extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new eu(Ie.min(),i,new mt(Ve),Dr(),Le())}}class hl{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hl(r,n,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Y5{constructor(e,n){this.targetId=e,this.Ce=n}}class X5{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class qv{constructor(){this.ve=0,this.Fe=Hv(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),n=Le(),r=Le();return this.Fe.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ce(38017,{changeType:a})}}),new hl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Hv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Y6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Dr(),this.Je=Xl(),this.He=Xl(),this.Ye=new mt(Ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const a=i.target;if(Z0(a))if(r===0){const o=new Ne(a.path);this.et(n,o,Xt.newNoDocument(o,Ie.min()))}else qe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let o,l;try{o=xi(r).toUint8Array()}catch(c){if(c instanceof k5)return ra("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new pp(o,i,a)}catch(c){return ra(c instanceof to?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&Z0(l.target)){const c=new Ne(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Xt.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=Le();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const i=new eu(e,n,this.Ye,this.je,r);return this.je=Dr(),this.Je=Xl(),this.He=Xl(),this.Ye=new mt(Ve),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new qv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new It(Ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new It(Ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||fe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xl(){return new mt(Ne.comparator)}function Hv(){return new mt(Ne.comparator)}const X6={asc:"ASCENDING",desc:"DESCENDING"},J6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Z6={and:"AND",or:"OR"};class eP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function nm(t,e){return t.useProto3Json||Kd(e)?e:{value:e}}function pd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J5(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function tP(t,e){return pd(t,e.toTimestamp())}function ur(t){return qe(!!t,49232),Ie.fromTimestamp(function(n){const r=gi(n);return new rt(r.seconds,r.nanos)}(t))}function gp(t,e){return rm(t,e).canonicalString()}function rm(t,e){const n=function(i){return new Xe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Z5(t){const e=Xe.fromString(t);return qe(ij(e),10190,{key:e.toString()}),e}function im(t,e){return gp(t.databaseId,e.path)}function ph(t,e){const n=Z5(e);if(n.get(1)!==t.databaseId.projectId)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ue(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ne(tj(n))}function ej(t,e){return gp(t.databaseId,e)}function nP(t){const e=Z5(t);return e.length===4?Xe.emptyPath():tj(e)}function sm(t){return new Xe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function tj(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Gv(t,e,n){return{name:im(t,e),fields:n.value.mapValue.fields}}function rP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ce(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(u,h){return u.useProto3Json?(qe(h===void 0||typeof h=="string",58123),Wt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Wt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?J.UNKNOWN:Q5(u.code);return new ue(h,u.message||"")}(o);n=new X5(r,i,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ph(t,r.document.name),a=ur(r.document.updateTime),o=r.document.createTime?ur(r.document.createTime):Ie.min(),l=new En({mapValue:{fields:r.document.fields}}),c=Xt.newFoundDocument(i,a,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new kc(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ph(t,r.document),a=r.readTime?ur(r.readTime):Ie.min(),o=Xt.newNoDocument(i,a),l=r.removedTargetIds||[];n=new kc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ph(t,r.document),a=r.removedTargetIds||[];n=new kc([],a,i,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,o=new H6(i,a),l=r.targetId;n=new Y5(l,o)}}return n}function iP(t,e){let n;if(e instanceof ul)n={update:Gv(t,e.key,e.value)};else if(e instanceof mp)n={delete:im(t,e.key)};else if(e instanceof ds)n={update:Gv(t,e.key,e.data),updateMask:mP(e.fieldMask)};else{if(!(e instanceof $6))return Ce(16599,{Vt:e.type});n={verify:im(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof md)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Zo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fd)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Ce(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:tP(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ce(27497)}(t,e.precondition)),n}function sP(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map(n=>function(i,a){let o=i.updateTime?ur(i.updateTime):ur(a);return o.isEqual(Ie.min())&&(o=ur(a)),new F6(o,i.transformResults||[])}(n,e))):[]}function aP(t,e){return{documents:[ej(t,e.path)]}}function oP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ej(t,i);const a=function(u){if(u.length!==0)return rj(Yn.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:vs(f.field),direction:dP(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=nm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:i}}function lP(t){let e=nP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const f=nj(m);return f instanceof Yn&&A5(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(f=>function(_){return new Xo(bs(_.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(m){let f;return f=typeof m=="object"?m.value:m,Kd(f)?null:f}(n.limit));let c=null;n.startAt&&(c=function(m){const f=!!m.before,y=m.values||[];return new hd(y,f)}(n.startAt));let u=null;return n.endAt&&(u=function(m){const f=!m.before,y=m.values||[];return new hd(y,f)}(n.endAt)),C6(e,i,o,a,l,"F",c,u)}function cP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function nj(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bs(n.unaryFilter.field);return jt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=bs(n.unaryFilter.field);return jt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bs(n.unaryFilter.field);return jt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bs(n.unaryFilter.field);return jt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return jt.create(bs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(r=>nj(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(t):Ce(30097,{filter:t})}function dP(t){return X6[t]}function uP(t){return J6[t]}function hP(t){return Z6[t]}function vs(t){return{fieldPath:t.canonicalString()}}function bs(t){return Ft.fromServerFormat(t.fieldPath)}function rj(t){return t instanceof jt?function(n){if(n.op==="=="){if(Rv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NAN"}};if(Pv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Rv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NAN"}};if(Pv(n.value))return{unaryFilter:{field:vs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vs(n.field),op:uP(n.op),value:n.value}}}(t):t instanceof Yn?function(n){const r=n.getFilters().map(i=>rj(i));return r.length===1?r[0]:{compositeFilter:{op:hP(n.op),filters:r}}}(t):Ce(54877,{filter:t})}function mP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ij(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r,i,a=Ie.min(),o=Ie.min(),l=Wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fP{constructor(e){this.yt=e}}function pP(t){const e=lP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(){this.Cn=new xP}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(pi.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class xP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new It(Xe.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new It(Xe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sj=41943040;class un{static withCacheSize(e){return new un(e,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */un.DEFAULT_COLLECTION_PERCENTILE=10,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,un.DEFAULT=new un(sj,un.DEFAULT_COLLECTION_PERCENTILE,un.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),un.DISABLED=new un(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oa(0)}static cr(){return new oa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="LruGarbageCollector",yP=1048576;function Yv([t,e],[n,r]){const i=Ve(t,n);return i===0?Ve(e,r):i}class vP{constructor(e){this.Ir=e,this.buffer=new It(Yv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Yv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){fe(Qv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ya(n)?fe(Qv,"Ignoring IndexedDB error during garbage collection: ",n):await xa(n)}await this.Vr(3e5)})}}class wP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(Gd.ce);const r=new vP(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Kv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,a,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(a=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),xs()<=Fe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:m})))}}function kP(t,e){return new wP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(){this.changes=new cs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ko(r.mutation,i,Hn.empty(),rt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Le()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Le()){const i=Wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let o=eo();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Le()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let a=Dr();const o=wo(),l=function(){return wo()}();return n.forEach((c,u)=>{const h=r.get(u.key);i.has(u.key)&&(h===void 0||h.mutation instanceof ds)?a=a.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),ko(h.mutation,u,h.mutation.getFieldMask(),rt.now())):o.set(u.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new NP(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=wo();let i=new mt((o,l)=>o-l),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Hn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const m=(i.get(l.batchId)||Le()).add(c);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,m=B5();h.forEach(f=>{if(!a.has(f)){const y=G5(n.get(f),r.get(f));y!==null&&m.set(f,y),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return Z.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Ne.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):M5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const o=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):Z.resolve(Wi());let l=Go,c=a;return o.next(u=>Z.forEach(u,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),a.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{c=c.insert(h,f)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Le())).next(h=>({batchId:l,changes:F5(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ne(n)).next(r=>{let i=eo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let o=eo();return this.indexManager.getCollectionParents(e,a).next(l=>Z.forEach(l,c=>{const u=function(m,f){return new va(f,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(h=>{h.forEach((m,f)=>{o=o.insert(m,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(o=>{a.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,Xt.newInvalidDocument(h)))});let l=eo();return o.forEach((c,u)=>{const h=a.get(c);h!==void 0&&ko(h.mutation,u,Hn.empty(),rt.now()),Xd(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ur(i.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:pP(i.bundledQuery),readTime:ur(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(){this.overlays=new mt(Ne.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wi();return Z.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.St(e,n,a)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=Wi(),a=n.length+1,o=new Ne(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new mt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=a.get(u.largestBatchId);h===null&&(h=Wi(),a=a.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Wi(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=i)););return Z.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new q6(n,r));let a=this.qr.get(n);a===void 0&&(a=Le(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(){this.Qr=new It(Rt.$r),this.Ur=new It(Rt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Rt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Ne(new Xe([])),r=new Rt(n,e),i=new Rt(n,e+1),a=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ne(new Xe([])),r=new Rt(n,e),i=new Rt(n,e+1);let a=Le();return this.Ur.forEachInRange([r,i],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Rt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ne.comparator(e.key,n.key)||Ve(e.Yr,n.Yr)}static Kr(e,n){return Ve(e.Yr,n.Yr)||Ne.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new It(Rt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new W6(a,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new Rt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),a=i<0?0:i;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?ap:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),i=new Rt(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);a.push(l)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new It(Ve);return n.forEach(i=>{const a=new Rt(i,0),o=new Rt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{r=r.add(l.Yr)})}),Z.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;Ne.isDocumentKey(a)||(a=a.child(""));const o=new Rt(new Ne(a),0);let l=new It(Ve);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(l=l.add(c.Yr)),!0)},o),Z.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Z.forEach(n.mutations,i=>{const a=new Rt(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Rt(n,0),i=this.Zr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.ri=e,this.docs=function(){return new mt(Ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Xt.newInvalidDocument(n))}getEntries(e,n){let r=Dr();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Xt.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=Dr();const o=n.path,l=new Ne(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||s6(i6(h),r)<=0||(i.has(h.key)||Xd(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Ce(9500)}ii(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IP(this)}getSize(e){return Z.resolve(this.size)}}class IP extends jP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e){this.persistence=e,this.si=new cs(n=>cp(n),dp),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new xp,this.targetCount=0,this.ai=oa.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Z.waitFor(a).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(o=>{a.push(i.markPotentiallyOrphaned(e,o))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n){this.ui={},this.overlays={},this.ci=new Gd(0),this.li=!1,this.li=!0,this.hi=new SP,this.referenceDelegate=e(this),this.Pi=new AP(this),this.indexManager=new gP,this.remoteDocumentCache=function(i){return new TP(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new fP(n),this.Ii=new zP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new EP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){fe("MemoryPersistence","Starting transaction:",e);const i=new PP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,n){return Z.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class PP extends o6{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Ri=new xp,this.Vi=null}static mi(e){return new yp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,r=>{const i=Ne.fromPath(r);return this.gi(e,i).next(a=>{a||n.removeEntry(i,Ie.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class gd{constructor(e,n){this.persistence=e,this.pi=new cs(r=>d6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=kP(this,n)}static mi(e,n){return new gd(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(r,i)=>this.br(e,r,i).next(a=>a?Z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,a.removeEntry(o,Ie.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vc(e.data.value)),n}br(e,n,r){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Le(),i=Le();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new vp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return sI()?8:l6(nI())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,i,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new RP;return this.Ss(e,n,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>a.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(xs()<=Fe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(xs()<=Fe.DEBUG&&fe("QueryEngine","Query:",ys(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(xs()<=Fe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,cr(n))):Z.resolve())}ys(e,n){if(Lv(n))return Z.resolve(null);let r=cr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=tm(n,null,"F"),r=cr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Le(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,tm(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,i){return Lv(n)||i.isEqual(Ie.min())?Z.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,i)?Z.resolve(null):(xs()<=Fe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ys(n)),this.vs(e,o,n,r6(i,Go)).next(l=>l))})}Ds(e,n){let r=new It(L5(e));return n.forEach((i,a)=>{Xd(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,n,r){return xs()<=Fe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",ys(n)),this.ps.getDocumentsMatchingQuery(e,n,pi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bp="LocalStore",MP=3e8;class VP{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new mt(Ve),this.xs=new cs(a=>cp(a),dp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _P(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function LP(t,e,n,r){return new VP(t,e,n,r)}async function oj(t,e){const n=Ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Le();for(const u of i){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of a){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function OP(t,e){const n=Ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const m=u.batch,f=m.keys();let y=Z.resolve();return f.forEach(_=>{y=y.next(()=>h.getEntry(c,_)).next(A=>{const P=u.docVersions.get(_);qe(P!==null,48541),A.version.compareTo(P)<0&&(m.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Le();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lj(t){const e=Ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function FP(t,e){const n=Ae(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const f=i.get(m);if(!f)return;l.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(a,h.addedDocuments,m)));let y=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Wt.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(m,y),function(A,P,b){return A.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=MP?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(f,y,h)&&l.push(n.Pi.updateTargetData(a,y))});let c=Dr(),u=Le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(BP(a,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Ie.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next(m=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(h)}return Z.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.Ms=i,a))}function BP(t,e,n){let r=Le(),i=Le();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Dr();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ie.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):fe(bp,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:i}})}function UP(t,e){const n=Ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ap),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $P(t,e){const n=Ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(a=>a?(i=a,Z.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Xr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function am(t,e,n){const r=Ae(t),i=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!ya(o))throw o;fe(bp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Xv(t,e,n){const r=Ae(t);let i=Ie.min(),a=Le();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const m=Ae(c),f=m.xs.get(h);return f!==void 0?Z.resolve(m.Ms.get(f)):m.Pi.getTargetData(u,h)}(r,o,cr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:Ie.min(),n?a:Le())).next(l=>(WP(r,E6(e),l),{documents:l,Qs:a})))}function WP(t,e,n){let r=t.Os.get(e)||Ie.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class Jv{constructor(){this.activeTargetIds=D6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qP{constructor(){this.Mo=new Jv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Jv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="ConnectivityMonitor";class e1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){fe(Zv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){fe(Zv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function om(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh="RestConnection",GP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class KP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===dd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,a){const o=om(),l=this.zo(e,n.toUriEncodedString());fe(gh,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,a);const{host:u}=new URL(l),h=Qf(u);return this.Jo(e,l,c,r,h).then(m=>(fe(gh,`Received RPC '${e}' ${o}: `,m),m),m=>{throw ra(gh,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,a,o){return this.Go(e,n,r,i,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ga}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}zo(e,n){const r=GP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kt="WebChannelConnection";class YP extends KP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,a){const o=om();return new Promise((l,c)=>{const u=new u5;u.setWithCredentials(!0),u.listenOnce(h5.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case yc.NO_ERROR:const m=u.getResponseJson();fe(Kt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case yc.TIMEOUT:fe(Kt,`RPC '${e}' ${o} timed out`),c(new ue(J.DEADLINE_EXCEEDED,"Request time out"));break;case yc.HTTP_ERROR:const f=u.getStatus();if(fe(Kt,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const A=function(b){const w=b.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(w)>=0?w:J.UNKNOWN}(_.status);c(new ue(A,_.message))}else c(new ue(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ue(J.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{fe(Kt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);fe(Kt,`RPC '${e}' ${o} sending request:`,i),u.send(n,"POST",h,r,15)})}T_(e,n,r){const i=om(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=p5(),l=f5(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=a.join("");fe(Kt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const m=o.createWebChannel(h,c);this.I_(m);let f=!1,y=!1;const _=new QP({Yo:P=>{y?fe(Kt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(f||(fe(Kt,`Opening RPC '${e}' stream ${i} transport.`),m.open(),f=!0),fe(Kt,`RPC '${e}' stream ${i} sending:`,P),m.send(P))},Zo:()=>m.close()}),A=(P,b,w)=>{P.listen(b,j=>{try{w(j)}catch(R){setTimeout(()=>{throw R},0)}})};return A(m,Za.EventType.OPEN,()=>{y||(fe(Kt,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),A(m,Za.EventType.CLOSE,()=>{y||(y=!0,fe(Kt,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(m))}),A(m,Za.EventType.ERROR,P=>{y||(y=!0,ra(Kt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),_.a_(new ue(J.UNAVAILABLE,"The operation could not be completed")))}),A(m,Za.EventType.MESSAGE,P=>{var b;if(!y){const w=P.data[0];qe(!!w,16349);const j=w,R=(j==null?void 0:j.error)||((b=j[0])==null?void 0:b.error);if(R){fe(Kt,`RPC '${e}' stream ${i} received error:`,R);const O=R.status;let L=function(N){const C=bt[N];if(C!==void 0)return Q5(C)}(O),v=R.message;L===void 0&&(L=J.INTERNAL,v="Unknown error status: "+O+" with message "+R.message),y=!0,_.a_(new ue(L,v)),m.close()}else fe(Kt,`RPC '${e}' stream ${i} received:`,w),_.u_(w)}}),A(l,m5.STAT_EVENT,P=>{P.stat===K0.PROXY?fe(Kt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===K0.NOPROXY&&fe(Kt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function xh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t){return new eP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1="PersistentStream";class dj{constructor(e,n,r,i,a,o,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new cj(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ue(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return fe(t1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(fe(t1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XP extends dj{constructor(e,n,r,i,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rP(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ie.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ie.min():o.readTime?ur(o.readTime):Ie.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=sm(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=Z0(c)?{documents:aP(a,c)}:{query:oP(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=J5(a,o.resumeToken);const u=nm(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Ie.min())>0){l.readTime=pd(a,o.snapshotVersion.toTimestamp());const u=nm(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=cP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=sm(this.serializer),n.removeTarget=e,this.q_(n)}}class JP extends dj{constructor(e,n,r,i,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=sP(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=sm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>iP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{}class e9 extends ZP{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,rm(n,r),i,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ue(J.UNKNOWN,a.toString())})}Ho(e,n,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,rm(n,r),i,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(J.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class t9{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Rr(n),this.aa=!1):fe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="RemoteStore";class n9{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{us(this)&&(fe(ss,"Restarting streams for network reachability change."),await async function(c){const u=Ae(c);u.Ea.add(4),await ml(u),u.Ra.set("Unknown"),u.Ea.delete(4),await nu(u)}(this))})}),this.Ra=new t9(r,i)}}async function nu(t){if(us(t))for(const e of t.da)await e(!0)}async function ml(t){for(const e of t.da)await e(!1)}function uj(t,e){const n=Ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Np(n)?jp(n):ba(n).O_()&&kp(n,e))}function wp(t,e){const n=Ae(t),r=ba(n);n.Ia.delete(e),r.O_()&&hj(n,e),n.Ia.size===0&&(r.O_()?r.L_():us(n)&&n.Ra.set("Unknown"))}function kp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ba(t).Y_(e)}function hj(t,e){t.Va.Ue(e),ba(t).Z_(e)}function jp(t){t.Va=new Y6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ba(t).start(),t.Ra.ua()}function Np(t){return us(t)&&!ba(t).x_()&&t.Ia.size>0}function us(t){return Ae(t).Ea.size===0}function mj(t){t.Va=void 0}async function r9(t){t.Ra.set("Online")}async function i9(t){t.Ia.forEach((e,n)=>{kp(t,e)})}async function s9(t,e){mj(t),Np(t)?(t.Ra.ha(e),jp(t)):t.Ra.set("Unknown")}async function a9(t,e,n){if(t.Ra.set("Online"),e instanceof X5&&e.state===2&&e.cause)try{await async function(i,a){const o=a.cause;for(const l of a.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){fe(ss,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xd(t,r)}else if(e instanceof kc?t.Va.Ze(e):e instanceof Y5?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ie.min()))try{const r=await lj(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(u);h&&a.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken(Wt.EMPTY_BYTE_STRING,h.snapshotVersion)),hj(a,c);const m=new Xr(h.target,c,u,h.sequenceNumber);kp(a,m)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){fe(ss,"Failed to raise snapshot:",r),await xd(t,r)}}async function xd(t,e,n){if(!ya(e))throw e;t.Ea.add(1),await ml(t),t.Ra.set("Offline"),n||(n=()=>lj(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{fe(ss,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await nu(t)})}function fj(t,e){return e().catch(n=>xd(t,n,e))}async function ru(t){const e=Ae(t),n=vi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ap;for(;o9(e);)try{const i=await UP(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,l9(e,i)}catch(i){await xd(e,i)}pj(e)&&gj(e)}function o9(t){return us(t)&&t.Ta.length<10}function l9(t,e){t.Ta.push(e);const n=vi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function pj(t){return us(t)&&!vi(t).x_()&&t.Ta.length>0}function gj(t){vi(t).start()}async function c9(t){vi(t).ra()}async function d9(t){const e=vi(t);for(const n of t.Ta)e.ea(n.mutations)}async function u9(t,e,n){const r=t.Ta.shift(),i=fp.from(r,e,n);await fj(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await ru(t)}async function h9(t,e){e&&vi(t).X_&&await async function(r,i){if(function(o){return G6(o)&&o!==J.ABORTED}(i.code)){const a=r.Ta.shift();vi(r).B_(),await fj(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await ru(r)}}(t,e),pj(t)&&gj(t)}async function n1(t,e){const n=Ae(t);n.asyncQueue.verifyOperationInProgress(),fe(ss,"RemoteStore received new credentials");const r=us(n);n.Ea.add(3),await ml(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await nu(n)}async function m9(t,e){const n=Ae(t);e?(n.Ea.delete(2),await nu(n)):e||(n.Ea.add(2),await ml(n),n.Ra.set("Unknown"))}function ba(t){return t.ma||(t.ma=function(n,r,i){const a=Ae(n);return a.sa(),new XP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:r9.bind(null,t),t_:i9.bind(null,t),r_:s9.bind(null,t),H_:a9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Np(t)?jp(t):t.Ra.set("Unknown")):(await t.ma.stop(),mj(t))})),t.ma}function vi(t){return t.fa||(t.fa=function(n,r,i){const a=Ae(n);return a.sa(),new JP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:c9.bind(null,t),r_:h9.bind(null,t),ta:d9.bind(null,t),na:u9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await ru(t)):(await t.fa.stop(),t.Ta.length>0&&(fe(ss,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const o=Date.now()+r,l=new _p(e,n,o,i,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zp(t,e){if(Rr("AsyncQueue",`${e}: ${t}`),ya(t))return new ue(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{static emptySet(e){return new Hs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ne.comparator(n.key,r.key):(n,r)=>Ne.comparator(n.key,r.key),this.keyedMap=eo(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Hs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Hs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(){this.ga=new mt(Ne.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class la{constructor(e,n,r,i,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new la(e,n,Hs.emptySet(n),o,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class p9{constructor(){this.queries=i1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Ae(n),a=i.queries;i.queries=i1(),a.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ue(J.ABORTED,"Firestore shutting down"))}}function i1(){return new cs(t=>V5(t),Yd)}async function xj(t,e){const n=Ae(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new f9,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(i,!0);break;case 1:a.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=zp(o,`Initialization of query '${ys(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Cp(n)}async function yj(t,e){const n=Ae(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function g9(t,e){const n=Ae(t);let r=!1;for(const i of e){const a=i.query,o=n.queries.get(a);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&Cp(n)}function x9(t,e,n){const r=Ae(t),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(n);r.queries.delete(e)}function Cp(t){t.Ca.forEach(e=>{e.next()})}var lm,s1;(s1=lm||(lm={})).Ma="default",s1.Cache="cache";class vj{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new la(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e){this.key=e}}class wj{constructor(e){this.key=e}}class y9{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=L5(e),this.tu=new Hs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new r1,i=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const f=i.get(h),y=Xd(this.query,m)?m:null,_=!!f&&this.mutatedKeys.has(f.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;f&&y?f.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),P=!0):this.su(f,y)||(r.track({type:2,doc:y}),P=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!f&&y?(r.track({type:0,doc:y}),P=!0):f&&!y&&(r.track({type:1,doc:f}),P=!0,(c||u)&&(l=!0)),P&&(y?(o=o.add(y),a=A?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(y,_){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:P})}};return A(y)-A(_)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new la(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new r1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new wj(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new bj(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Le();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return la.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Sp="SyncEngine";class v9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class b9{constructor(e){this.key=e,this.hu=!1}}class w9{constructor(e,n,r,i,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new cs(l=>V5(l),Yd),this.Iu=new Map,this.Eu=new Set,this.du=new mt(Ne.comparator),this.Au=new Map,this.Ru=new xp,this.Vu={},this.mu=new Map,this.fu=oa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function k9(t,e,n=!0){const r=Cj(t);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await kj(r,e,n,!0),i}async function j9(t,e){const n=Cj(t);await kj(n,e,!0,!1)}async function kj(t,e,n,r){const i=await $P(t.localStore,cr(e)),a=i.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await N9(t,e,a,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&uj(t.remoteStore,i),l}async function N9(t,e,n,r,i){t.pu=(m,f,y)=>async function(A,P,b,w){let j=P.view.ru(b);j.Cs&&(j=await Xv(A.localStore,P.query,!1).then(({documents:v})=>P.view.ru(v,j)));const R=w&&w.targetChanges.get(P.targetId),O=w&&w.targetMismatches.get(P.targetId)!=null,L=P.view.applyChanges(j,A.isPrimaryClient,R,O);return o1(A,P.targetId,L.au),L.snapshot}(t,m,f,y);const a=await Xv(t.localStore,e,!0),o=new y9(e,a.Qs),l=o.ru(a.documents),c=hl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(l,t.isPrimaryClient,c);o1(t,n,u.au);const h=new v9(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function _9(t,e,n){const r=Ae(t),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter(o=>!Yd(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await am(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wp(r.remoteStore,i.targetId),cm(r,i.targetId)}).catch(xa)):(cm(r,i.targetId),await am(r.localStore,i.targetId,!0))}async function z9(t,e){const n=Ae(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wp(n.remoteStore,r.targetId))}async function C9(t,e,n){const r=R9(t);try{const i=await function(o,l){const c=Ae(o),u=rt.now(),h=l.reduce((y,_)=>y.add(_.key),Le());let m,f;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Dr(),A=Le();return c.Ns.getEntries(y,h).next(P=>{_=P,_.forEach((b,w)=>{w.isValidDocument()||(A=A.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,_)).next(P=>{m=P;const b=[];for(const w of l){const j=U6(w,m.get(w.key).overlayedDocument);j!=null&&b.push(new ds(w.key,j,E5(j.value.mapValue),dr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,b,l)}).next(P=>{f=P;const b=P.applyToLocalDocumentSet(m,A);return c.documentOverlayCache.saveOverlays(y,P.batchId,b)})}).then(()=>({batchId:f.batchId,changes:F5(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new mt(Ve)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,i.batchId,n),await fl(r,i.changes),await ru(r.remoteStore)}catch(i){const a=zp(i,"Failed to persist write");n.reject(a)}}async function jj(t,e){const n=Ae(t);try{const r=await FP(n.localStore,e);e.targetChanges.forEach((i,a)=>{const o=n.Au.get(a);o&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?qe(o.hu,14607):i.removedDocuments.size>0&&(qe(o.hu,42227),o.hu=!1))}),await fl(n,r,e)}catch(r){await xa(r)}}function a1(t,e,n){const r=Ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=Ae(o);c.onlineState=l;let u=!1;c.queries.forEach((h,m)=>{for(const f of m.Sa)f.va(l)&&(u=!0)}),u&&Cp(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function S9(t,e,n){const r=Ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),a=i&&i.key;if(a){let o=new mt(Ne.comparator);o=o.insert(a,Xt.newNoDocument(a,Ie.min()));const l=Le().add(a),c=new eu(Ie.min(),new Map,new mt(Ve),o,l);await jj(r,c),r.du=r.du.remove(a),r.Au.delete(e),Ep(r)}else await am(r.localStore,e,!1).then(()=>cm(r,e,n)).catch(xa)}async function E9(t,e){const n=Ae(t),r=e.batch.batchId;try{const i=await OP(n.localStore,e);_j(n,r,null),Nj(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fl(n,i)}catch(i){await xa(i)}}async function T9(t,e,n){const r=Ae(t);try{const i=await function(o,l){const c=Ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(m=>(qe(m!==null,37113),h=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);_j(r,e,n),Nj(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fl(r,i)}catch(i){await xa(i)}}function Nj(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function _j(t,e,n){const r=Ae(t);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function cm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||zj(t,r)})}function zj(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(wp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ep(t))}function o1(t,e,n){for(const r of n)r instanceof bj?(t.Ru.addReference(r.key,e),I9(t,r)):r instanceof wj?(fe(Sp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||zj(t,r.key)):Ce(19791,{wu:r})}function I9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(fe(Sp,"New document in limbo: "+n),t.Eu.add(r),Ep(t))}function Ep(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ne(Xe.fromString(e)),r=t.fu.next();t.Au.set(r,new b9(n)),t.du=t.du.insert(n,r),uj(t.remoteStore,new Xr(cr(up(n.path)),r,"TargetPurposeLimboResolution",Gd.ce))}}async function fl(t,e,n){const r=Ae(t),i=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const m=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){i.push(u);const m=vp.As(c.targetId,u);a.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,u){const h=Ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Z.forEach(u,f=>Z.forEach(f.Es,y=>h.persistence.referenceDelegate.addReference(m,f.targetId,y)).next(()=>Z.forEach(f.ds,y=>h.persistence.referenceDelegate.removeReference(m,f.targetId,y)))))}catch(m){if(!ya(m))throw m;fe(bp,"Failed to update sequence numbers: "+m)}for(const m of u){const f=m.targetId;if(!m.fromCache){const y=h.Ms.get(f),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(f,A)}}}(r.localStore,a))}async function A9(t,e){const n=Ae(t);if(!n.currentUser.isEqual(e)){fe(Sp,"User change. New user:",e.toKey());const r=await oj(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new ue(J.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fl(n,r.Ls)}}function P9(t,e){const n=Ae(t),r=n.Au.get(e);if(r&&r.hu)return Le().add(r.key);{let i=Le();const a=n.Iu.get(e);if(!a)return i;for(const o of a){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function Cj(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=jj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=P9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=S9.bind(null,e),e.Pu.H_=g9.bind(null,e.eventManager),e.Pu.yu=x9.bind(null,e.eventManager),e}function R9(t){const e=Ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=E9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=T9.bind(null,e),e}class yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=tu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return LP(this.persistence,new DP,e.initialUser,this.serializer)}Cu(e){return new aj(yp.mi,this.serializer)}Du(e){return new qP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yd.provider={build:()=>new yd};class D9 extends yd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof gd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?un.withCacheSize(this.cacheSizeBytes):un.DEFAULT;return new aj(r=>gd.mi(r,n),this.serializer)}}class dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>a1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=A9.bind(null,this.syncEngine),await m9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new p9}()}createDatastore(e){const n=tu(e.databaseInfo.databaseId),r=function(a){return new YP(a)}(e.databaseInfo);return function(a,o,l,c){return new e9(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,o,l){return new n9(r,i,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>a1(this.syncEngine,n,0),function(){return e1.v()?new e1:new HP}())}createSyncEngine(e,n){return function(i,a,o,l,c,u,h){const m=new w9(i,a,o,l,c,u);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Ae(i);fe(ss,"RemoteStore shutting down."),a.Ea.add(5),await ml(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="FirestoreClient";class M9{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Qt.UNAUTHENTICATED,this.clientId=sp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{fe(bi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(fe(bi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yh(t,e){t.asyncQueue.verifyOperationInProgress(),fe(bi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await oj(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function l1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await V9(t);fe(bi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>n1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>n1(e.remoteStore,i)),t._onlineComponents=e}async function V9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(bi,"Using user provided OfflineComponentProvider");try{await yh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ra("Error using user provided cache. Falling back to memory cache: "+n),await yh(t,new yd)}}else fe(bi,"Using default OfflineComponentProvider"),await yh(t,new D9(void 0));return t._offlineComponents}async function Ej(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(bi,"Using user provided OnlineComponentProvider"),await l1(t,t._uninitializedComponentsProvider._online)):(fe(bi,"Using default OnlineComponentProvider"),await l1(t,new dm))),t._onlineComponents}function L9(t){return Ej(t).then(e=>e.syncEngine)}async function Tj(t){const e=await Ej(t),n=e.eventManager;return n.onListen=k9.bind(null,e.syncEngine),n.onUnlisten=_9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=j9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=z9.bind(null,e.syncEngine),n}function O9(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new Sj({next:f=>{h.Nu(),o.enqueueAndForget(()=>yj(a,m));const y=f.docs.has(l);!y&&f.fromCache?u.reject(new ue(J.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&f.fromCache&&c&&c.source==="server"?u.reject(new ue(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),m=new vj(up(l.path),h,{includeMetadataChanges:!0,qa:!0});return xj(a,m)}(await Tj(t),t.asyncQueue,e,n,r)),r.promise}function F9(t,e,n={}){const r=new jr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new Sj({next:f=>{h.Nu(),o.enqueueAndForget(()=>yj(a,m)),f.fromCache&&c.source==="server"?u.reject(new ue(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),m=new vj(l,h,{includeMetadataChanges:!0,qa:!0});return xj(a,m)}(await Tj(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj="firestore.googleapis.com",d1=!0;class u1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Aj,this.ssl=d1}else this.host=e.host,this.ssl=e.ssl??d1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sj;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yP)throw new ue(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ij(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ue(J.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class iu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new HA;switch(r.type){case"firstParty":return new YA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=c1.get(n);r&&(fe("ComponentProvider","Removing Datastore"),c1.delete(n),r.terminate())}(this),Promise.resolve()}}function B9(t,e,n,r={}){var u;t=fi(t,iu);const i=Qf(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(XT(`https://${l}`),tI("Firestore",!0)),a.host!==Aj&&a.host!==l&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:i,emulatorOptions:r};if(!qo(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Qt.MOCK_USER;else{h=JT(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ue(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Qt(f)}t._authCredentials=new GA(new x5(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new hs(this.firestore,e,this._query)}}class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(dl(n,_t._jsonSchema))return new _t(e,r||null,new Ne(Xe.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:Nt("string",_t._jsonSchemaVersion),referencePath:Nt("string")};class ci extends hs{constructor(e,n,r){super(e,n,up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Ne(e))}withConverter(e){return new ci(this.firestore,e,this._path)}}function vh(t,e,...n){if(t=Ir(t),y5("collection","path",e),t instanceof iu){const r=Xe.fromString(e,...n);return Nv(r),new ci(t,null,r)}{if(!(t instanceof _t||t instanceof ci))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return Nv(r),new ci(t.firestore,null,r)}}function ct(t,e,...n){if(t=Ir(t),arguments.length===1&&(e=sp.newId()),y5("doc","path",e),t instanceof iu){const r=Xe.fromString(e,...n);return jv(r),new _t(t,null,new Ne(r))}{if(!(t instanceof _t||t instanceof ci))throw new ue(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Xe.fromString(e,...n));return jv(r),new _t(t.firestore,t instanceof ci?t.converter:null,new Ne(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="AsyncQueue";class m1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new cj(this,"async_queue_retry"),this._c=()=>{const r=xh();r&&fe(h1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=xh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new jr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ya(e))throw e;fe(h1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Rr("INTERNAL UNHANDLED ERROR: ",f1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=_p.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(i),i}uc(){this.nc&&Ce(47125,{Pc:f1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function f1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class pl extends iu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new m1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new m1(e),this._firestoreClient=void 0,await e}}}function U9(t,e){const n=typeof t=="object"?t:Fk(),r=typeof t=="string"?t:dd,i=cl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=QT("firestore");a&&B9(i,...a)}return i}function Tp(t){if(t._terminated)throw new ue(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||$9(t),t._firestoreClient}function $9(t){var r,i,a;const e=t._freezeSettings(),n=function(l,c,u,h){return new m6(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Ij(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new M9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tn(Wt.fromBase64String(e))}catch(n){throw new ue(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(dl(e,Tn._jsonSchema))return Tn.fromBase64String(e.bytes)}}Tn._jsonSchemaVersion="firestore/bytes/1.0",Tn._jsonSchema={type:Nt("string",Tn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ue(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ue(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ue(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:hr._jsonSchemaVersion}}static fromJSON(e){if(dl(e,hr._jsonSchema))return new hr(e.latitude,e.longitude)}}hr._jsonSchemaVersion="firestore/geoPoint/1.0",hr._jsonSchema={type:Nt("string",hr._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(dl(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new mr(e.vectorValues);throw new ue(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:Nt("string",mr._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W9=/^__.*__$/;class q9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ds(e,this.data,this.fieldMask,n,this.fieldTransforms):new ul(e,this.data,n,this.fieldTransforms)}}function Rj(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:t})}}class Ap{constructor(e,n,r,i,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ap({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rj(this.Ac)&&W9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class H9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||tu(e)}Cc(e,n,r,i=!1){return new Ap({Ac:e,methodName:n,Dc:r,path:Ft.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dj(t){const e=t._freezeSettings(),n=tu(t._databaseId);return new H9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function G9(t,e,n,r,i,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,i);Lj("Data must be an object, but it was:",o,r);const l=Mj(r,o);let c,u;if(a.merge)c=new Hn(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const f=Q9(e,m,n);if(!o.contains(f))throw new ue(J.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);X9(h,f)||h.push(f)}c=new Hn(h),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new q9(new En(l),c,u)}function K9(t,e,n,r=!1){return Pp(n,t.Cc(r?4:3,e))}function Pp(t,e){if(Vj(t=Ir(t)))return Lj("Unsupported field value:",e,t),Mj(t,e);if(t instanceof Pj)return function(r,i){if(!Rj(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const a=[];let o=0;for(const l of r){let c=Pp(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=Ir(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return M6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=rt.fromDate(r);return{timestampValue:pd(i.serializer,a)}}if(r instanceof rt){const a=new rt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pd(i.serializer,a)}}if(r instanceof hr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tn)return{bytesValue:J5(i.serializer,r._byteString)};if(r instanceof _t){const a=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:gp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof mr)return function(o,l){return{mapValue:{fields:{[C5]:{stringValue:S5},[ud]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return hp(l.serializer,u)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Hd(r)}`)}(t,e)}function Mj(t,e){const n={};return w5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ls(t,(r,i)=>{const a=Pp(i,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function Vj(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof rt||t instanceof hr||t instanceof Tn||t instanceof _t||t instanceof Pj||t instanceof mr)}function Lj(t,e,n){if(!Vj(n)||!v5(n)){const r=Hd(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Q9(t,e,n){if((e=Ir(e))instanceof Ip)return e._internalPath;if(typeof e=="string")return Oj(t,e);throw vd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Y9=new RegExp("[~\\*/\\[\\]]");function Oj(t,e,n){if(e.search(Y9)>=0)throw vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ip(...e.split("."))._internalPath}catch{throw vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function vd(t,e,n,r,i){const a=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new ue(J.INVALID_ARGUMENT,l+t+c)}function X9(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Rp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J9 extends Fj{data(){return super.data()}}function Rp(t,e){return typeof e=="string"?Oj(t,e):e instanceof Ip?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ue(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dp{}class Bj extends Dp{}function p1(t,e,...n){let r=[];e instanceof Dp&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof Vp).length,l=a.filter(c=>c instanceof Mp).length;if(o>1||o>0&&l>0)throw new ue(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Mp extends Bj{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Mp(e,n,r)}_apply(e){const n=this._parse(e);return Uj(e._query,n),new hs(e.firestore,e.converter,em(e._query,n))}_parse(e){const n=Dj(e.firestore);return function(a,o,l,c,u,h,m){let f;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ue(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){y1(m,h);const _=[];for(const A of m)_.push(x1(c,a,A));f={arrayValue:{values:_}}}else f=x1(c,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||y1(m,h),f=K9(l,o,m,h==="in"||h==="not-in");return jt.create(u,h,f)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Vp extends Dp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let o=i;const l=a.getFlattenedFilters();for(const c of l)Uj(o,c),o=em(o,c)}(e._query,n),new hs(e.firestore,e.converter,em(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lp extends Bj{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lp(e,n)}_apply(e){const n=function(i,a,o){if(i.startAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ue(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xo(a,o)}(e._query,this._field,this._direction);return new hs(e.firestore,e.converter,function(i,a){const o=i.explicitOrderBy.concat([a]);return new va(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function g1(t,e="asc"){const n=e,r=Rp("orderBy",t);return Lp._create(r,n)}function x1(t,e,n){if(typeof(n=Ir(n))=="string"){if(n==="")throw new ue(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!M5(e)&&n.indexOf("/")!==-1)throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Xe.fromString(n));if(!Ne.isDocumentKey(r))throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Av(t,new Ne(r))}if(n instanceof _t)return Av(t,n._key);throw new ue(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(n)}.`)}function y1(t,e){if(!Array.isArray(t)||t.length===0)throw new ue(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Uj(t,e){const n=function(i,a){for(const o of i)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ue(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class eR{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ls(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,i,a;const n=(a=(i=(r=e.fields)==null?void 0:r[ud].arrayValue)==null?void 0:i.values)==null?void 0:a.map(o=>yt(o.doubleValue));return new mr(n)}convertGeoPoint(e){return new hr(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Qd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ko(e));default:return null}}convertTimestamp(e){const n=gi(e);return new rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Xe.fromString(e);qe(ij(r),9688,{name:e});const i=new Qo(r.get(1),r.get(3)),a=new Ne(r.popFirst(5));return i.isEqual(n)||Rr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class no{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qi extends Fj{constructor(e,n,r,i,a,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Qi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Qi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qi._jsonSchema={type:Nt("string",Qi._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class jc extends Qi{data(e={}){return super.data(e)}}class Gs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new no(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jc(this._firestore,this._userDataWriter,r.key,r,new no(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ue(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new jc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new no(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new jc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new no(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:nR(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function er(t){t=fi(t,_t);const e=fi(t.firestore,pl);return O9(Tp(e),t._key).then(n=>rR(e,t,n))}Gs._jsonSchemaVersion="firestore/querySnapshot/1.0",Gs._jsonSchema={type:Nt("string",Gs._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class $j extends eR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function bh(t){t=fi(t,hs);const e=fi(t.firestore,pl),n=Tp(e),r=new $j(e);return Z9(t._query),F9(n,t._query).then(i=>new Gs(e,r,t,i))}function Fn(t,e,n){t=fi(t,_t);const r=fi(t.firestore,pl),i=tR(t.converter,e,n);return Wj(r,[G9(Dj(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,dr.none())])}function v1(t){return Wj(fi(t.firestore,pl),[new mp(t._key,dr.none())])}function Wj(t,e){return function(r,i){const a=new jr;return r.asyncQueue.enqueueAndForget(async()=>C9(await L9(r),i,a)),a.promise}(Tp(t),e)}function rR(t,e,n){const r=n.docs.get(e._key),i=new $j(t);return new Qi(t,i,e._key,r,new no(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){ga=i})(h3),mi(new Ar("firestore",(r,{instanceIdentifier:i,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new pl(new KA(r.getProvider("auth-internal")),new XA(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qo(u.options.projectId,h)}(o,i),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),lr(vv,bv,e),lr(vv,bv,"esm2020")})();const iR={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},qj=Ok(iR);BA(qj);const Ye=U9(qj),We={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},Bn=t=>JSON.parse(JSON.stringify(t)),Ue={async saveRecipe(t,e){try{return await Fn(ct(Ye,We.RECIPES,t),Bn({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=p1(vh(Ye,We.RECIPES),g1("updatedAt","desc")),e=await bh(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await v1(ct(Ye,We.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Fn(ct(Ye,We.SETTINGS,"inventory_v2"),Bn({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await er(ct(Ye,We.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await er(ct(Ye,We.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Fn(ct(Ye,We.SETTINGS,"costs_data"),Bn({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await er(ct(Ye,We.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Fn(ct(Ye,We.SETTINGS,"ficha_tecnica"),Bn({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await er(ct(Ye,We.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Fn(ct(Ye,We.SETTINGS,"global_config"),Bn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await er(ct(Ye,We.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Fn(ct(Ye,We.SETTINGS,We.RECIPES_V2),Bn({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await er(ct(Ye,We.SETTINGS,We.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Fn(ct(Ye,We.RECIPES_V3,String(t)),Bn({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=p1(vh(Ye,We.RECIPES_V3),g1("updatedAt","desc"));t=await bh(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await bh(vh(Ye,We.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await v1(ct(Ye,We.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Fn(ct(Ye,We.SETTINGS,We.KANBAN),Bn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await er(ct(Ye,We.SETTINGS,We.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Fn(ct(Ye,We.SETTINGS,"recipe_categories"),Bn({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await er(ct(Ye,We.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}},async syncSuppliers(t){try{return await Fn(ct(Ye,We.SETTINGS,"suppliers"),Bn({suppliers:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing suppliers:",e),!1}},async getSuppliers(){try{const t=await er(ct(Ye,We.SETTINGS,"suppliers"));return t.exists()?t.data():null}catch(t){return console.error("Error getting suppliers:",t),null}},async syncProducts(t,e){try{return await Fn(ct(Ye,We.SETTINGS,"products_v1"),Bn({products:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing products:",n),!1}},async getProducts(){try{const t=await er(ct(Ye,We.SETTINGS,"products_v1"));return t.exists()?t.data():null}catch(t){return console.error("Error getting products:",t),null}}};function sR(){const[t,e]=k.useState([]),[n,r]=k.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,a]=k.useState(!1),[o,l]=k.useState(null),[c,u]=k.useState(null),[h,m]=k.useState(!1),[f,y]=k.useState(""),[_,A]=k.useState("Global Investment Matrix"),[P,b]=k.useState(!1),[w,j]=k.useState(.13),[R,O]=k.useState(!1),[L,v]=k.useState(null),x=k.useRef(null),N=k.useCallback((E,B="success")=>{x.current&&clearTimeout(x.current),v({message:E,type:B}),x.current=setTimeout(()=>v(null),3500)},[]),[C,z]=k.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),I=k.useRef(null);k.useEffect(()=>{try{const E=localStorage.getItem("padoca_costs_v1"),B=localStorage.getItem("padoca_costs_categories"),$=localStorage.getItem("padoca_costs_title"),te=localStorage.getItem("padoca_global_tax");let me=E?JSON.parse(E):[],he=B?JSON.parse(B):null;$&&A($),te&&j(Number(te)),he&&(he=he.map(be=>be==="Pessoal"?"Maquinrio":be),r(he)),me&&(me=me.map(be=>({...be,category:be.category==="Pessoal"?"Maquinrio":be.category})),e(me))}catch(E){console.error("Load failed",E)}},[]);const[T,pe]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const B=await Ue.getCosts();B&&(B.costs&&e(B.costs),B.categories&&r(B.categories));const $=await Ue.getGlobalSettings();$&&$.taxRate!==void 0&&(j($.taxRate),localStorage.setItem("padoca_global_tax",$.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{pe(!0)}})()},[]),k.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),T&&Ue.syncCosts(t,n)},[t,n,T]),k.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),k.useEffect(()=>{localStorage.setItem("padoca_costs_title",_)},[_]),k.useEffect(()=>{localStorage.setItem("padoca_global_tax",w.toString()),T&&Ue.syncGlobalSettings({taxRate:w}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:w}}))},[w,T]);const de=E=>(Number(E)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),ye=k.useMemo(()=>{const E=t.reduce(($,te)=>{const me=Number(te.quantity)||1,he=(Number(te.amount)||0)*me;return $.total+=he,te.type==="Fixo"?$.fixed+=he:$.variable+=he,$},{total:0,fixed:0,variable:0}),B=E.total*w;return{...E,hst:B,grandTotal:E.total+B}},[t]),ke=k.useMemo(()=>n.reduce((E,B)=>{const $=t.filter(te=>te.category===B);return $.length>0&&(E[B]=$),E},{}),[t,n]),X=E=>{if(E.preventDefault(),!C.description||!C.amount)return;const B=n.includes(C.category)?C.category:n[0],$={...C,category:B,amount:Number(C.amount),quantity:Number(C.quantity)||1};e(o?te=>te.map(me=>me.id===o?{...$,id:o}:me):te=>[...te,{...$,id:Date.now().toString()}]),se()},ae=E=>{u({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(B=>B.filter($=>$.id!==E)),N("Despesa removida com sucesso."),u(null)},onCancel:()=>u(null)})},se=()=>{a(!1),l(null),z({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},we=E=>{z({description:E.description||"",amount:E.amount||"",quantity:E.quantity||1,category:E.category||n[0],type:E.type||"Varivel",link:E.link||"",date:E.date||new Date().toISOString().split("T")[0]}),l(E.id),a(!0)},ve=()=>{f&&(n.includes(f)||(r(E=>[...E,f]),N("Categoria adicionada.")),y(""))},Pe=E=>{u({title:"Remover Categoria",message:`A categoria "${E}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(B=>B.filter($=>$!==E)),N("Categoria removida."),u(null)},onCancel:()=>u(null)})},D=()=>{try{const E=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],B=t.map(be=>{const et=Number(be.quantity)||1,De=Number(be.amount)||0,Be=et*De;return[be.id,be.date||"-",`"${be.description.replace(/"/g,'""')}"`,et,De.toFixed(2).replace(".",","),Be.toFixed(2).replace(".",","),`"${be.category}"`,be.type,`"${be.link||""}"`]}),$="\uFEFF"+[E.join(";"),...B.map(be=>be.join(";"))].join(`
`),te=new Blob([$],{type:"text/csv;charset=utf-8;"}),me=URL.createObjectURL(te),he=document.createElement("a");he.href=me,he.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,he.click(),N("Relatrio Excel exportado!")}catch{N("Erro ao exportar CSV")}},U=()=>{try{const E=JSON.stringify({version:"1",costs:t,categories:n},null,2),B=new Blob([E],{type:"application/json"}),$=URL.createObjectURL(B),te=document.createElement("a");te.href=$,te.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,te.click(),N("Backup realizado com sucesso!")}catch{N("Erro ao realizar backup")}},H=E=>{var te;const B=(te=E.target.files)==null?void 0:te[0];if(!B)return;const $=new FileReader;$.onload=me=>{try{const he=JSON.parse(String(me.target.result||"{}"));if(he.costs&&Array.isArray(he.costs))e(he.costs),he.categories&&r(he.categories),N("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{N("Arquivo de backup invlido")}},$.readAsText(B),E.target.value=""},re=()=>{u({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),N("Banco de dados limpo."),u(null)},onCancel:()=>u(null)})};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),s.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),s.jsxs("button",{onClick:()=>a(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[P?s.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:_,onChange:E=>A(E.target.value),onBlur:()=>b(!1),onKeyDown:E=>E.key==="Enter"&&b(!1),autoFocus:!0}):s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>b(!0),children:_}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:de(ye.grandTotal)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:de(ye.total)})]}),s.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[R?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:w*100,onChange:E=>j(Number(E.target.value)/100),onBlur:()=>O(!1),onKeyDown:E=>E.key==="Enter"&&O(!1),autoFocus:!0}),s.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):s.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>O(!0),children:["Tax Impact (",(w*100).toFixed(0),"%)"]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:de(ye.hst)})]})]})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:de(ye.fixed)})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),s.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(ye.fixed/ye.total*100||0).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${ye.fixed/ye.total*100||0}%`}})})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:de(ye.variable)})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),s.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(ye.variable/ye.total*100||0).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${ye.variable/ye.total*100||0}%`}})})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),s.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[s.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),s.jsx("div",{className:"col-span-2"})]}),s.jsx("div",{className:"space-y-6",children:t.length===0?s.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),s.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(ke).map(([E,B])=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:E}),s.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),s.jsx("div",{className:"space-y-3 md:space-y-1",children:B.map($=>s.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[s.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[s.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${$.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),s.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[s.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:$.description}),s.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:$.date}),$.link&&s.jsx("a",{href:$.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),s.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:s.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[$.quantity," unit  ",$.type.slice(0,1)]})}),s.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[s.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:de((Number($.amount)||0)*(Number($.quantity)||1))}),s.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[de($.amount)," / item"]})]}),s.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[s.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:de((Number($.amount)||0)*(Number($.quantity)||1)*(1+w))}),s.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),s.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[s.jsxs("button",{onClick:()=>we($),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),s.jsxs("button",{onClick:()=>ae($.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},$.id))})]},E))})]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[s.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),s.jsx("button",{onClick:D,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),s.jsx("button",{onClick:re,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsx("button",{onClick:U,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),s.jsx("button",{onClick:()=>{var E;return(E=I.current)==null?void 0:E.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),s.jsx("input",{ref:I,type:"file",accept:"application/json",className:"hidden",onChange:H})]})]})]}),s.jsx(Te,{children:i&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:se}),s.jsxs(G.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[80vh]",children:[s.jsx(aR,{}),s.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:s.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),s.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:o?"Editar Despesa":"Nova Despesa"}),s.jsx("button",{onClick:se,className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?s.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[s.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((E,B)=>s.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${B!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[s.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:E}),s.jsx("button",{onClick:()=>Pe(E),className:"w-11 h-11 flex items-center justify-center text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl touch-manipulation transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},E))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:f,onChange:E=>y(E.target.value)}),s.jsx("button",{className:"h-12 w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold flex items-center justify-center touch-manipulation active:scale-95 transition-transform",onClick:ve,children:"+"})]}),s.jsx("button",{onClick:()=>m(!1),className:"w-full py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all touch-manipulation hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl",children:"Pronto"})]}):s.jsxs("form",{onSubmit:X,className:"space-y-6 px-4 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:C.description,onChange:E=>z({...C,description:E.target.value}),placeholder:"Mixer, Aluguel..."})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:C.link,onChange:E=>z({...C,link:E.target.value}),placeholder:"Opcional..."})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:C.quantity,onChange:E=>z({...C,quantity:E.target.value})})]}),s.jsxs("div",{className:"flex items-center px-4 py-3",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),s.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:C.amount,onChange:E=>z({...C,amount:E.target.value})})]})]})]}),s.jsx("div",{className:"px-1",children:s.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(E=>s.jsx("button",{type:"button",onClick:()=>z({...C,type:E}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${C.type===E?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:E},E))})}),s.jsxs("div",{className:"space-y-3 px-1",children:[s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),s.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(E=>s.jsx("button",{type:"button",onClick:()=>z({...C,category:E}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${C.category===E?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:E},E))})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[s.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),s.jsx("button",{type:"button",onClick:se,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),s.jsx(Te,{children:L&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${L.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":L.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${L.type==="error"?"bg-white animate-pulse":L.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:L.message})]}),document.body)}),s.jsx(Te,{children:c&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:c.onCancel}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${c.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:c.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:c.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:c.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${c.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}function aR(){return Zt(!0),null}const yr="padoca_inventory_v2",wh=["Ingredientes","Embalagens","Utenslios","Outros"],kh=["None","Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function oR(){var le,F,Y,je;const[t,e]=k.useState(()=>{try{const M=localStorage.getItem(yr);if(M)return JSON.parse(M);const Q=localStorage.getItem("padoca_inventory");return Q?JSON.parse(Q).map(ne=>({...ne,packageQuantity:ne.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=k.useState(()=>{try{const M=localStorage.getItem(yr+"_categories");return M?JSON.parse(M):wh}catch{return wh}}),[i,a]=k.useState(!1),[o,l]=k.useState("synced");k.useEffect(()=>{(async()=>{try{const Q=await Ue.getInventory();Q&&(Array.isArray(Q.items)&&e(Q.items),Array.isArray(Q.categories)&&r(Q.categories));const q=await Ue.getGlobalSettings();q&&q.taxRate!==void 0&&u(q.taxRate)}catch(Q){console.warn("Inventory cloud load failed",Q)}finally{a(!0)}})()},[]);const[c,u]=k.useState(()=>{const M=localStorage.getItem("padoca_global_tax");return M?Number(M):.13});k.useEffect(()=>{const M=Q=>{Q.detail&&Q.detail.taxRate!==void 0&&u(Q.detail.taxRate)};return window.addEventListener("global-settings-updated",M),()=>window.removeEventListener("global-settings-updated",M)},[]);const[h,m]=k.useState(!1),[f,y]=k.useState(null),[_,A]=k.useState(""),[P,b]=k.useState("None"),[w,j]=k.useState(null),[R,O]=k.useState(null),L=k.useRef(null),v=k.useCallback((M,Q="success")=>{L.current&&clearTimeout(L.current),O({message:M,type:Q}),L.current=setTimeout(()=>O(null),3500)},[]),[x,N]=k.useState(()=>{try{const M=localStorage.getItem(yr+"_subcategories");return M?JSON.parse(M):kh}catch{return kh}}),[C,z]=k.useState(!1),[I,T]=k.useState(""),[pe,de]=k.useState(""),[ye,ke]=k.useState("alerts"),[X,ae]=k.useState(""),[se,we]=k.useState(null);k.useEffect(()=>{t.filter(Q=>["low","warning","high"].includes(be(Q))).length===0&&ye==="alerts"&&ke("ok")},[t]);const[ve,Pe]=k.useState([]),[D,U]=k.useState(""),[H,re]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const Q=await Ue.getSuppliers();Q!=null&&Q.suppliers&&Pe(Q.suppliers)}catch(Q){console.error("Error loading suppliers:",Q)}})()},[]);const E=k.useCallback((M,Q)=>{if(!M||!Q)return!1;const q=M.trim().toLowerCase(),ne=Q.trim().toLowerCase(),ze=q.split(/\s+/).filter(Ke=>Ke.length>0),_e=ne.split(/\s+/).filter(Ke=>Ke.length>0);return q===ne&&ze.length===_e.length},[]),B=k.useMemo(()=>{const M=D.trim().toLowerCase();return M.length<2?[]:ve.filter(Q=>{var q,ne;return((q=Q.name)==null?void 0:q.toLowerCase().includes(M))||((ne=Q.company)==null?void 0:ne.toLowerCase().includes(M))}).slice(0,8)},[ve,D]),[$,te]=k.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),me=k.useRef(!1);k.useEffect(()=>{if(localStorage.setItem(yr,JSON.stringify(t)),localStorage.setItem(yr+"_categories",JSON.stringify(n)),localStorage.setItem(yr+"_subcategories",JSON.stringify(x)),!me.current){me.current=!0;return}const M=setTimeout(()=>{window.dispatchEvent(new Event("inventory-updated"))},100);if(i){l("syncing");const Q=setTimeout(async()=>{try{const q=await Ue.syncInventory(t,n);l(q?"synced":"error")}catch{l("error")}},1500);return()=>{clearTimeout(Q),clearTimeout(M)}}return()=>clearTimeout(M)},[t,n,x,i]);const he=M=>(Number(M.packageQuantity)||0)*(Number(M.packageCount)||1),be=M=>{const Q=he(M),q=Number(M.minStock)||0,ne=Number(M.maxStock)||0;return q===0&&ne===0?"noLimit":q>0&&Q<q?"low":q>0&&Q<=q*1.2?"warning":ne>0&&Q>ne?"high":ne>0&&Q>=ne*.6&&Q<=ne||q>0&&ne===0&&Q>q*1.2?"adequate":"ok"},et=M=>(Number(M.packageCount)||1)*(Number(M.pricePerUnit)||0),De=k.useMemo(()=>{const M=t.reduce((ne,ze)=>ne+et(ze),0),Q=t.length,q=t.reduce((ne,ze)=>{const _e=et(ze);return ne[ze.category]=(ne[ze.category]||0)+_e,ne},{});return{totalValue:M,itemCount:Q,byCategory:q,taxImpact:M*c,grandTotal:M*(1+c)}},[t,c]),Be=M=>(Number(M)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),lt=()=>{if(!$.name.trim())return;const M={id:Date.now(),name:$.name.trim(),packageQuantity:Number($.packageQuantity)||0,packageCount:Number($.packageCount)||1,unit:$.unit,pricePerUnit:Number($.pricePerUnit)||0,category:$.category,subcategory:$.category==="Ingredientes"?$.subcategory:null,purchaseDate:$.purchaseDate,supplierId:$.supplierId,supplierName:$.supplierName,minStock:Number($.minStock)||0,maxStock:Number($.maxStock)||0,createdAt:new Date().toISOString()};e(Q=>[...Q,M]),te({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),U(""),m(!1)},Ee=(M,Q,q)=>{e(ne=>ne.map(ze=>ze.id!==M?ze:{...ze,[Q]:["name","unit","category","subcategory","purchaseDate"].includes(Q)?q:Number(q)||0}))},He=M=>{j({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(Q=>Q.filter(q=>q.id!==M)),y(null),j(null)},onCancel:()=>j(null)})},qt=k.useMemo(()=>{let M=t;if(_.trim()){const Q=_.toLowerCase().trim();M=M.filter(q=>q.name.toLowerCase().includes(Q)||q.subcategory&&q.subcategory.toLowerCase().includes(Q))}return P&&(M=M.filter(Q=>Q.subcategory===P)),M},[t,_,P]),zt=k.useMemo(()=>n.reduce((M,Q)=>{const q=qt.filter(ne=>ne.category===Q);return q.length>0&&(M[Q]=q),M},{}),[qt,n]),V=Dn.useRef(null),ee=()=>{try{const M=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],Q=t.map(Ke=>{const cn=(Number(Ke.packageQuantity)||0)*(Number(Ke.packageCount)||1),gl=(Number(Ke.packageCount)||1)*(Number(Ke.pricePerUnit)||0);return[Ke.id,`"${Ke.name.replace(/"/g,'""')}"`,`"${Ke.category}"`,Ke.packageQuantity,Ke.unit,Ke.packageCount,cn,Number(Ke.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),gl.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),q="\uFEFF"+[M.join(";"),...Q.map(Ke=>Ke.join(";"))].join(`
`),ne=new Blob([q],{type:"text/csv;charset=utf-8;"}),ze=URL.createObjectURL(ne),_e=document.createElement("a");_e.href=ze,_e.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,_e.click(),v("Relatrio de Estoque exportado!","success")}catch(M){console.error(M),v("Erro ao exportar CSV","error")}},ce=M=>{var ne;const Q=(ne=M.target.files)==null?void 0:ne[0];if(!Q)return;const q=new FileReader;q.onload=ze=>{try{const _e=JSON.parse(String(ze.target.result||"{}"));if(_e.items&&Array.isArray(_e.items))e(_e.items),_e.categories&&r(_e.categories),v("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{v("Arquivo de backup invlido","error")}},q.readAsText(Q),M.target.value=""},ge=()=>{j({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(yr,"[]"),j(null)},onCancel:()=>j(null)})};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${o==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":o==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${o==="syncing"?"bg-amber-500":o==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:o==="syncing"?"Cloud Syncing":o==="error"?"Sync Error":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),s.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:Be(De.grandTotal)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:Be(De.totalValue)})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(c*100).toFixed(0),"%)"]}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:Be(De.taxImpact)})]})]})]})}),s.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((M,Q)=>{const q={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},ne=q[M]||q.Outros,ze=De.byCategory[M]||0,_e=ze*(1+c),Ke=(ze/De.totalValue*100||0).toFixed(0);return s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ne.pulse} ${ne.shadow}`}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:M})]}),s.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:Be(_e)}),s.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",Be(ze)," + ",(c*100).toFixed(0),"% tax)"]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),s.jsxs("span",{className:`text-[8px] font-bold ${ne.text}`,children:[Ke,"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${ne.bg} transition-all duration-1000`,style:{width:`${Ke}%`}})})]})]},M)})})]}),s.jsx(Te,{children:h&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] flex items-end md:items-start justify-center p-0 md:p-4 md:pt-40",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>m(!1)}),s.jsxs(G.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:30,stiffness:350},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-md rounded-t-[2rem] md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[90vh] md:max-h-[80vh]",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[s.jsx(Zl,{}),s.jsx("div",{className:"md:hidden flex justify-center pt-3 pb-1",children:s.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-100 dark:border-zinc-800",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Novo Item"}),s.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Adicionar ao estoque"})]}),s.jsx("button",{onClick:()=>m(!1),className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Nome do Item"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-500/50 transition-all placeholder:text-zinc-400",placeholder:"Ex: Farinha de Trigo",value:$.name,onChange:M=>te(Q=>({...Q,name:M.target.value}))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Qtd/Pacote"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"flex-1 px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"25",value:$.packageQuantity,onChange:M=>te(Q=>({...Q,packageQuantity:M.target.value}))}),s.jsxs("select",{className:"w-20 px-2 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:$.unit,onChange:M=>te(Q=>({...Q,unit:M.target.value})),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"N Pacotes"}),s.jsx("input",{type:"number",min:"1",inputMode:"numeric",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"1",value:$.packageCount,onChange:M=>te(Q=>({...Q,packageCount:M.target.value}))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-2",children:"Preo por Pacote"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 font-bold text-lg",children:"$"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-12 pr-4 py-4 rounded-2xl bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/20 text-zinc-900 dark:text-white text-xl font-bold text-right focus:outline-none focus:ring-2 focus:ring-emerald-500/30 transition-all",placeholder:"0,00",value:$.pricePerUnit,onChange:M=>te(Q=>({...Q,pricePerUnit:M.target.value}))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:$.category!=="Ingredientes"?"col-span-2":"",children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Categoria"}),s.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:$.category,onChange:M=>te(Q=>({...Q,category:M.target.value,subcategory:M.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(M=>s.jsx("option",{value:M,children:M},M))})]}),$.category==="Ingredientes"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Subcategoria"}),s.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:$.subcategory,onChange:M=>te(Q=>({...Q,subcategory:M.target.value})),children:x.map(M=>s.jsx("option",{value:M,children:M},M))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-violet-500 uppercase tracking-widest mb-2",children:"Fornecedor"}),s.jsx("div",{className:"relative",children:$.supplierId?s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl bg-violet-50 dark:bg-violet-500/10 border border-violet-200 dark:border-violet-500/20",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-lg",children:(F=(le=$.supplierName)==null?void 0:le.charAt(0))==null?void 0:F.toUpperCase()}),s.jsx("span",{className:"flex-1 font-bold text-violet-700 dark:text-violet-300",children:$.supplierName}),s.jsx("button",{onClick:()=>{te(M=>({...M,supplierId:null,supplierName:""})),U("")},className:"w-10 h-10 rounded-xl flex items-center justify-center text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/30 transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:D,onChange:M=>{const Q=M.target.value;U(Q),re(!0);const q=ve.find(ne=>E(Q,ne.name));q&&(te(ne=>({...ne,supplierId:q.id,supplierName:q.name})),U(""),re(!1))},onFocus:()=>re(!0)}),H&&B.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-2xl max-h-40 overflow-y-auto z-50",children:B.map(M=>{var Q,q;return s.jsxs("button",{onClick:()=>{te(ne=>({...ne,supplierId:M.id,supplierName:M.name})),U(""),re(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:(q=(Q=M.name)==null?void 0:Q.charAt(0))==null?void 0:q.toUpperCase()}),s.jsx("span",{className:"font-bold text-zinc-900 dark:text-white",children:M.name})]},M.id)})})]})})]}),s.jsxs("div",{className:"p-4 rounded-2xl bg-amber-50 dark:bg-amber-500/5 border border-amber-200/50 dark:border-amber-500/10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-widest",children:"Limites de Estoque"}),s.jsxs("select",{className:"px-3 py-1.5 rounded-lg bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 text-xs font-bold uppercase tracking-wider border-none focus:outline-none focus:ring-2 focus:ring-amber-500/30 cursor-pointer appearance-none pr-6 bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2020%2020%22%20fill%3d%22%23d97706%22%3e%3cpath%20fill-rule%3d%22evenodd%22%20d%3d%22M5.293%207.293a1%201%200%20011.414%200L10%2010.586l3.293-3.293a1%201%200%20111.414%201.414l-4%204a1%201%200%2001-1.414%200l-4-4a1%201%200%20010-1.414z%22%20clip-rule%3d%22evenodd%22%2f%3e%3c%2fsvg%3e')] bg-no-repeat bg-[right_0.3rem_center] bg-[length:1rem]",value:$.unit,onChange:M=>te(Q=>({...Q,unit:M.target.value})),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mnimo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:$.minStock,onChange:M=>te(Q=>({...Q,minStock:M.target.value}))}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:$.unit})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mximo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:$.maxStock,onChange:M=>te(Q=>({...Q,maxStock:M.target.value}))}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:$.unit})]})]})]}),s.jsx("p",{className:"text-[10px] text-amber-600/60 mt-2 text-center",children:"Deixe em 0 para desativar alertas"})]}),$.packageQuantity&&$.packageCount&&s.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-zinc-100 to-zinc-50 dark:from-zinc-800 dark:to-zinc-900 border border-zinc-200 dark:border-zinc-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Total"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:[Number($.packageQuantity)*Number($.packageCount)," ",$.unit]}),$.pricePerUnit&&s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:Be(Number($.packageCount)*Number($.pricePerUnit))})]})]})})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 flex gap-3",children:[s.jsx("button",{onClick:()=>m(!1),className:"flex-1 py-4 rounded-2xl font-bold text-sm text-zinc-600 dark:text-zinc-400 bg-zinc-200 dark:bg-zinc-800 hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:lt,disabled:!$.name.trim(),className:"flex-[2] py-4 rounded-2xl font-bold text-sm text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]})}),s.jsx("section",{className:"relative z-10 mb-6",children:s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:_,onChange:M=>A(M.target.value)}),_&&s.jsx("button",{onClick:()=>A(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.jsx("button",{onClick:()=>b(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),x.map(M=>s.jsx("button",{onClick:()=>b(P===M?null:M),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===M?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:M},M))]}),(_||P)&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[s.jsxs("span",{className:"text-xs text-zinc-500",children:[qt.length," ",qt.length===1?"resultado":"resultados"]}),s.jsx("button",{onClick:()=>{A(""),b(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(zt).length>0&&s.jsx("div",{className:"space-y-8",children:Object.entries(zt).map(([M,Q])=>s.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[s.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:M}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:Be((De.byCategory[M]||0)*(1+c))}),s.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:s.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[Q.length," ",Q.length===1?"item":"itens"]})})]})]}),s.jsxs("div",{className:"hidden md:block",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),s.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),s.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:Q.map(q=>s.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:f===q.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:q.name,onChange:ne=>Ee(q.id,"name",ne.target.value)})}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:q.packageQuantity,onChange:ne=>Ee(q.id,"packageQuantity",ne.target.value)}),s.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:q.unit,onChange:ne=>Ee(q.id,"unit",ne.target.value),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]}),s.jsx("div",{className:"col-span-1",children:s.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:q.packageCount,onChange:ne=>Ee(q.id,"packageCount",ne.target.value)})}),q.category==="Ingredientes"&&s.jsx("div",{className:"col-span-2",children:s.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:q.subcategory||"",onChange:ne=>Ee(q.id,"subcategory",ne.target.value),children:x.map(ne=>s.jsx("option",{value:ne,children:ne},ne))})}),q.category!=="Ingredientes"&&s.jsx("div",{className:"col-span-2 text-right",children:s.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[he(q)," ",q.unit]})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:q.pricePerUnit,onChange:ne=>Ee(q.id,"pricePerUnit",ne.target.value)})}),s.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:()=>He(q.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[be(q)==="low"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-rose-500 shadow-[0_0_6px_rgba(244,63,94,0.5)]",title:"Estoque baixo"}),be(q)==="warning"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-amber-500 shadow-[0_0_6px_rgba(245,158,11,0.4)]",title:"Prximo do mnimo"}),be(q)==="high"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_6px_rgba(59,130,246,0.4)]",title:"Acima do mximo"}),s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:q.name})]}),s.jsx("div",{className:"col-span-2 text-center",children:s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[q.packageQuantity," ",q.unit]})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[q.packageCount,""]})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[he(q)," ",q.unit]})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:Be(q.pricePerUnit)})}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:Be(et(q)*(1+c))}),s.jsx("button",{onClick:()=>y(q.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},q.id))})]}),s.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:Q.map(q=>{const ne=be(q),ze=ne==="low"?"border-l-4 border-l-rose-500":ne==="warning"?"border-l-4 border-l-amber-500":ne==="high"?"border-l-4 border-l-blue-500":"";return s.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${ze} ${f===q.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:f===q.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>He(q.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:q.name,onChange:_e=>Ee(q.id,"name",_e.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),s.jsx("div",{className:"flex gap-2",children:s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:q.packageQuantity,onChange:_e=>Ee(q.id,"packageQuantity",_e.target.value)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:q.unit,onChange:_e=>Ee(q.id,"unit",_e.target.value),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),s.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:q.packageCount,onChange:_e=>Ee(q.id,"packageCount",_e.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),s.jsxs("div",{className:"relative group",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:q.pricePerUnit,onChange:_e=>Ee(q.id,"pricePerUnit",_e.target.value)})]})]})]}),q.category==="Ingredientes"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),s.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:q.subcategory||"",onChange:_e=>Ee(q.id,"subcategory",_e.target.value),children:x.map(_e=>s.jsx("option",{value:_e,children:_e},_e))})]})]}):s.jsxs("div",{onClick:()=>y(q.id),className:"group cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:q.name}),s.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[he(q)," ",q.unit," em estoque"]})]}),s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[q.packageCount," pcts"]})]}),s.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),s.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:Be(q.pricePerUnit)})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:Be(et(q)*(1+c))})})]})]})]})},q.id)})}),s.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",M]}),s.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:Be((De.byCategory[M]||0)*(1+c))})]})]},M))}),Object.keys(zt).length===0&&P!=="None"&&s.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),s.jsx("button",{onClick:()=>m(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),s.jsx("section",{className:"relative z-10 mt-8 mb-8",children:s.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.25,.46,.45,.94]},className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-3xl p-6 md:p-8 border border-zinc-200/60 dark:border-white/10 shadow-2xl shadow-zinc-900/5 dark:shadow-black/20",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-zinc-900 dark:text-white tracking-tight",children:"Nveis"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1 font-medium",children:"Monitoramento de estoque"})]})}),s.jsx("div",{className:"relative mb-6",children:s.jsxs("div",{className:"relative flex bg-zinc-100/90 dark:bg-zinc-800/90 backdrop-blur-sm p-1 rounded-[10px] overflow-x-auto scrollbar-hide md:overflow-visible",children:[s.jsx(G.div,{className:"absolute top-1 bottom-1 bg-white dark:bg-zinc-700 rounded-lg shadow-sm",initial:!1,animate:{width:`calc(${100/4}% - 2px)`,x:`calc(${["alerts","ok","noLimits","all"].indexOf(ye)*100}% + 1px)`},transition:{type:"spring",stiffness:400,damping:30}}),[{id:"alerts",label:"Crtico"},{id:"ok",label:"Normal"},{id:"noLimits",label:"S/ Limite"},{id:"all",label:"Todos"}].map(M=>s.jsx("button",{onClick:()=>ke(M.id),className:`
                                        relative flex-1 min-w-[60px] py-2 px-1.5 text-center z-10 transition-colors duration-200
                                        ${ye===M.id?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"}
                                    `,children:s.jsx("span",{className:"text-[13px] font-semibold tracking-[-0.01em]",children:M.label})},M.id))]})}),s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Buscar...",value:X,onChange:M=>ae(M.target.value),className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border-0 text-zinc-900 dark:text-white text-sm font-medium placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900/10 dark:focus:ring-white/20 transition-shadow"})]}),s.jsxs("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto overscroll-contain pr-1 -mr-1",children:[t.filter(M=>{const Q=be(M);return ye==="noLimits"?Q==="noLimit":ye==="alerts"?["low","warning","high"].includes(Q):ye==="ok"?Q==="ok"||Q==="adequate":!0}).filter(M=>X.trim()?M.name.toLowerCase().includes(X.toLowerCase()):!0).map(M=>{const Q=be(M),q=he(M),ne=Number(M.minStock)||0,ze=Number(M.maxStock)||0;let _e=0;ze>0?_e=Math.min(q/ze*100,100):ne>0&&(_e=Math.min(q/(ne*2)*100,100));const Ke={low:{bg:"bg-rose-50 dark:bg-rose-500/5",accent:"bg-rose-500",text:"text-rose-600 dark:text-rose-400"},warning:{bg:"bg-amber-50 dark:bg-amber-500/5",accent:"bg-amber-500",text:"text-amber-600 dark:text-amber-400"},high:{bg:"bg-violet-50 dark:bg-violet-500/5",accent:"bg-violet-500",text:"text-violet-600 dark:text-violet-400"},ok:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-emerald-500",text:"text-emerald-600 dark:text-emerald-400"},adequate:{bg:"bg-sky-50 dark:bg-sky-500/5",accent:"bg-sky-500",text:"text-sky-600 dark:text-sky-400"},noLimit:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-zinc-300 dark:bg-zinc-600",text:"text-zinc-500 dark:text-zinc-400"}},cn=Ke[Q]||Ke.noLimit;return s.jsx("div",{onClick:()=>we(M),className:`group p-4 rounded-2xl ${cn.bg} cursor-pointer transition-all duration-200 hover:shadow-lg active:scale-[0.98]`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-11 h-11 rounded-xl ${cn.accent} flex items-center justify-center shadow-lg`,children:s.jsx("span",{className:"text-white text-sm font-bold tabular-nums",children:q})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-zinc-900 dark:text-white truncate",children:M.name}),s.jsxs("p",{className:`text-xs font-medium mt-0.5 ${cn.text}`,children:[q," ",M.unit," ",ne>0&&` min ${ne}`," ",ze>0&&` max ${ze}`]}),(ne>0||ze>0)&&s.jsx("div",{className:"mt-2 h-1 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${cn.accent} rounded-full transition-all duration-500`,style:{width:`${_e}%`}})})]}),s.jsx("svg",{className:"w-5 h-5 text-zinc-300 group-hover:text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})},M.id)}),t.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-zinc-500 font-medium",children:"Nenhum item"})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6 border-t border-zinc-100 dark:border-zinc-800",children:[s.jsx("button",{onClick:()=>z(!0),className:"text-sm font-medium text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"Categorias"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:ee,className:"text-sm font-medium text-zinc-400 hover:text-zinc-600 transition-colors",children:"Exportar"}),s.jsx("button",{onClick:ge,className:"text-sm font-medium text-rose-500 hover:text-rose-600 transition-colors",children:"Limpar"})]}),s.jsx("input",{ref:V,type:"file",accept:"application/json",className:"hidden",onChange:ce})]})]})}),se&&Ze.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Zl,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>we(null)}),s.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Configurar Limites"}),s.jsx("button",{onClick:()=>we(null),className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:`inline-flex w-16 h-16 rounded-2xl items-center justify-center text-2xl font-bold text-white mb-4 ${be(se)==="low"?"bg-gradient-to-br from-rose-500 to-rose-600":be(se)==="warning"?"bg-gradient-to-br from-amber-500 to-amber-600":be(se)==="high"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-emerald-500 to-emerald-600"}`,children:((je=(Y=se.name)==null?void 0:Y.charAt(0))==null?void 0:je.toUpperCase())||"?"}),s.jsx("h4",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:se.name}),s.jsxs("p",{className:"text-sm text-zinc-500 mt-1",children:["Estoque atual: ",s.jsxs("span",{className:"font-bold text-zinc-900 dark:text-white",children:[he(se)," ",se.unit]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mnimo"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:se.minStock||"",onChange:M=>{Ee(se.id,"minStock",M.target.value),we(Q=>({...Q,minStock:Number(M.target.value)||0}))}}),s.jsx("p",{className:"text-[10px] text-amber-500 text-center mt-1",children:se.unit})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mximo"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition-all",placeholder:"0",value:se.maxStock||"",onChange:M=>{Ee(se.id,"maxStock",M.target.value),we(Q=>({...Q,maxStock:Number(M.target.value)||0}))}}),s.jsx("p",{className:"text-[10px] text-blue-500 text-center mt-1",children:se.unit})]})]}),s.jsx("button",{onClick:()=>we(null),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-sm font-bold uppercase tracking-wider shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Salvar Limites"})]})]})]}),document.body),C&&s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(Zl,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>z(!1)}),s.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[s.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:s.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),s.jsx("button",{onClick:()=>z(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),s.jsx("div",{className:"space-y-2",children:n.map((M,Q)=>s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[s.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:M}),s.jsx("button",{onClick:()=>{j({title:"Excluir Categoria",message:`Excluir categoria "${M}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(q=>q.filter(ne=>ne!==M)),e(q=>q.map(ne=>ne.category===M?{...ne,category:"Outros"}:ne)),j(null),v("Categoria removida","success")},onCancel:()=>j(null)})},className:"w-11 h-11 flex items-center justify-center rounded-xl text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Q))})]}),s.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[s.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:I,onChange:M=>T(M.target.value),onKeyDown:M=>{M.key==="Enter"&&I.trim()&&(n.includes(I.trim())||(r(Q=>[...Q,I.trim()]),T("")))}}),s.jsx("button",{onClick:()=>{I.trim()&&!n.includes(I.trim())&&(r(M=>[...M,I.trim()]),T(""))},disabled:!I.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),s.jsx("button",{onClick:()=>{j({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(wh),j(null),v("Categorias restauradas","success")},onCancel:()=>j(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),s.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),s.jsx("div",{className:"space-y-2",children:x.map((M,Q)=>s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[s.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:M}),s.jsx("button",{onClick:()=>{j({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${M}"?`,type:"danger",onConfirm:()=>{N(q=>q.filter(ne=>ne!==M)),j(null),v("Subcategoria removida","success")},onCancel:()=>j(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Q))})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[s.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:pe,onChange:M=>de(M.target.value),onKeyDown:M=>{M.key==="Enter"&&pe.trim()&&(x.includes(pe.trim())||(N(Q=>[...Q,pe.trim()]),de("")))}}),s.jsx("button",{onClick:()=>{pe.trim()&&!x.includes(pe.trim())&&(N(M=>[...M,pe.trim()]),de(""))},disabled:!pe.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{onClick:()=>{j({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{N(kh),j(null),v("Subcategorias restauradas","success")},onCancel:()=>j(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),s.jsx(Te,{children:w&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Zl,{}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:w.onCancel}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${w.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:w.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:w.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:w.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:w.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${w.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Te,{children:R&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:R.message})]}),document.body)})]})}function Hj(){const[t,e]=k.useState([]),n=()=>{try{const r=localStorage.getItem(yr);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return k.useEffect(()=>{n();const r=a=>{a.key===yr&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}function Zl(){return Zt(!0),null}const b1="fichaTecnica_pizzas",Nc={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},jh=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,a=n*r;if(i<=0)return 0;const o=a/i,l=Nc[t.unit]||1;return o/l};function Nh(){return Zt(!0),null}function lR({newPizzaName:t,setNewPizzaName:e,setIsCreatingPizza:n,handleCreatePizza:r}){return Zt(!0),Ze.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:()=>{n(!1),e("")}}),s.jsxs(G.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30,mass:.8},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-2xl overflow-hidden mt-16 md:mt-20 mx-4 md:mx-0 rounded-2xl",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[s.jsxs("div",{className:"flex items-center justify-between px-5 pt-4 pb-2",children:[s.jsx("div",{className:"w-12"}),s.jsx("h3",{className:"text-[17px] font-semibold text-zinc-900 dark:text-white",children:"Nova Pizza"}),s.jsx("button",{onClick:()=>{n(!1),e("")},className:"w-12 h-12 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-4"}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-14 h-14 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center shrink-0",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-zinc-400 dark:text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("div",{children:s.jsx("p",{className:"text-[15px] text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})})]}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",className:"w-full h-14 px-5 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[17px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Ex: Margherita",value:t,onChange:i=>e(i.target.value),autoFocus:!0,onKeyDown:i=>i.key==="Enter"&&r()})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{n(!1),e("")},className:"flex-1 h-14 rounded-2xl font-semibold text-[17px] text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),s.jsx("button",{onClick:r,disabled:!t.trim(),className:"flex-[1.5] h-14 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-[17px] hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-lg shadow-zinc-900/20 dark:shadow-white/10 touch-manipulation",children:"Criar"})]})]}),s.jsx("div",{style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"}})]})]}),document.body)}const w1={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function cR(){const[t,e]=k.useState(()=>{try{const D=localStorage.getItem(b1);return D?JSON.parse(D):[w1]}catch{return[w1]}}),[n,r]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const U=await Ue.getPizzas();U&&U.length>0&&e(U.map(H=>({...H,ingredients:Array.isArray(H.ingredients)?H.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,a]=k.useState(null),[o,l]=k.useState(null),[c,u]=k.useState(!1),[h,m]=k.useState(!1),[f,y]=k.useState(""),[_,A]=k.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[P,b]=k.useState(null),[w,j]=k.useState(null),[R,O]=k.useState(null),[L,v]=k.useState(null),x=k.useRef(null);k.useCallback((D,U="success")=>{x.current&&clearTimeout(x.current),v({message:D,type:U}),x.current=setTimeout(()=>v(null),3500)},[]);const N=Hj();k.useEffect(()=>{localStorage.setItem(b1,JSON.stringify(t)),n&&Ue.syncPizzas(t)},[t,n]);const C=k.useMemo(()=>t.find(D=>D.id===i)||null,[t,i]),z=(D=[])=>{if(!Array.isArray(D))return{totalCost:0,costPerPizza:0};const U=D.reduce((H,re)=>H+ve(re),0);return{totalCost:U,costPerPizza:U}},I=D=>(Number(D)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),T=D=>{const U=Number(D)||0;return U<.01&&U>0?U.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):U.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},pe=()=>{if(!f.trim())return;const D={id:Date.now(),name:f.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(U=>[...U,D]),y(""),m(!1),a(D.id)},de=D=>{const U=t.find(H=>H.id===D);j({title:"Excluir Pizza",message:`A pizza "${(U==null?void 0:U.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e(H=>H.filter(re=>re.id!==D)),i===D&&a(null),j(null)},onCancel:()=>j(null)})},ye=D=>{const U=t.find(H=>H.id===D);U&&O({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:U.name,onConfirm:H=>{H&&H!==U.name&&e(re=>re.map(E=>E.id===D?{...E,name:H.trim()}:E)),O(null)},onCancel:()=>O(null)})},ke=D=>{if(A(U=>({...U,name:D})),b(null),!!Array.isArray(N)&&D&&D.trim().length>0){const U=D.toLowerCase().trim(),H=N.find(re=>!re||!re.name?!1:re.name.toLowerCase()===U);if(H){b(H);const re=jh(H),E=Nc[_.unit]||1,B=re*E;A($=>({...$,pricePerUnit:B.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:H.id}))}}},X=D=>{A(U=>{const H={...U,unit:D};if(P){const re=jh(P),E=Nc[D]||1,B=re*E;H.pricePerUnit=B.toFixed(6),H.isSyncedFromInventory=!0}return H})},ae=(D=!1)=>{if(!C||!_.name.trim()||!_.quantity)return;const U={id:Date.now(),name:_.name.trim(),quantity:Number(_.quantity)||0,unit:_.unit,pricePerUnit:Number(_.pricePerUnit)||0,inventoryItemId:_.inventoryItemId};e(H=>H.map(re=>re.id===i?{...re,ingredients:[...re.ingredients||[],U]}:re)),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null),D?setTimeout(()=>{var H;(H=document.getElementById("cat-ing-name-input"))==null||H.focus()},50):u(!1)},se=(D,U,H)=>{C&&e(re=>re.map(E=>E.id!==i?E:{...E,ingredients:(E.ingredients||[]).map(B=>B.id!==D?B:{...B,[U]:U==="name"||U==="unit"?H:Number(H)||0})}))},we=D=>{C&&(e(U=>U.map(H=>H.id!==i?H:{...H,ingredients:(H.ingredients||[]).filter(re=>re.id!==D)})),l(null))},ve=D=>(Number(D.quantity)||0)*(Number(D.pricePerUnit)||0),Pe=C?z(C.ingredients):{totalCost:0,costPerPizza:0};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),s.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),s.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),s.jsx(Te,{children:h&&s.jsx(lR,{newPizzaName:f,setNewPizzaName:y,setIsCreatingPizza:m,handleCreatePizza:pe})}),!i&&s.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(D=>{const U=z(D.ingredients);return s.jsxs("div",{onClick:()=>a(D.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:D.name}),s.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[D.ingredients.length," ingrediente",D.ingredients.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:H=>{H.stopPropagation(),ye(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),s.jsx("button",{onClick:H=>{H.stopPropagation(),de(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),s.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:I(U.totalCost)})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),s.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:s.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[D.ingredients.length," itens"]})})]})]})]},D.id)}),t.length===0&&s.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),s.jsx("button",{onClick:()=>m(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),C&&s.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>a(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:C.name}),s.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[C.ingredients.length," ingrediente",C.ingredients.length!==1?"s":""," cadastrado",C.ingredients.length!==1?"s":""]})]})]}),s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:I(Pe.totalCost)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:C.ingredients.length}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:I(Pe.costPerPizza)}),s.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!c&&s.jsxs("button",{onClick:()=>u(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),c&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[s.jsx(Nh,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{u(!1),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)}}),s.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[s.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:s.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),s.jsx("button",{onClick:()=>{u(!1),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"relative mb-5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:D=>{var U;D.key==="Enter"&&(D.preventDefault(),(U=document.getElementById("cat-ing-qty-input"))==null||U.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${P?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:_.name,onChange:D=>{const U=D.target.value;A(H=>({...H,name:U})),P&&U!==P.name&&(b(null),A(H=>({...H,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),ke(U)},autoFocus:!0}),P&&s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),_.name.length>0&&!P&&s.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const D=N.filter(U=>U.name.toLowerCase().includes(_.name.toLowerCase())).slice(0,6);return D.length===0&&_.name.length>1?s.jsxs("div",{className:"p-5 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),s.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',_.name,'" ao Estoque primeiro']})]}):D.map((U,H)=>s.jsxs("button",{onClick:()=>{b(U);const re=jh(U),E=Nc[_.unit]||1,B=re*E;A($=>({...$,name:U.name,pricePerUnit:B.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:U.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${H!==D.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:U.name}),s.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[U.packageQuantity*U.packageCount," ",U.unit]})]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},U.id))})()})]}),P&&s.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:P.name}),s.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",P.packageQuantity*P.packageCount," ",P.unit,"  ",I(P.packageCount*P.pricePerUnit)]})]})]})}),!P&&s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),s.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:_.unit,onChange:D=>X(D.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),s.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),ae(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:_.quantity,onChange:D=>A(U=>({...U,quantity:D.target.value}))})]}),P&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),s.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:_.unit})]})]}),P&&_.quantity&&s.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[s.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[_.quantity," ",_.unit,"  ",T(_.pricePerUnit),"/",_.unit]}),s.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:I(Number(_.quantity)*Number(_.pricePerUnit))})]})]}),s.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[s.jsx("button",{onClick:()=>{u(!1),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:ae,disabled:!_.name||!_.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),C.ingredients.length>0&&s.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[s.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),s.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),s.jsx("div",{className:"col-span-1"})]}),s.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:C.ingredients.map(D=>s.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:o===D.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx("input",{id:`edit-ing-name-${D.id}`,autoFocus:!0,onKeyDown:U=>{var H;U.key==="Enter"&&(U.preventDefault(),(H=document.getElementById(`edit-ing-qty-${D.id}`))==null||H.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.name,onChange:U=>se(D.id,"name",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&we(D.id)}})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{id:`edit-ing-qty-${D.id}`,onKeyDown:U=>{var H;U.key==="Enter"&&(U.preventDefault(),(H=document.getElementById(`edit-ing-price-${D.id}`))==null||H.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.quantity,onChange:U=>se(D.id,"quantity",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&we(D.id)}})}),s.jsx("div",{className:"col-span-1",children:s.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.unit,onChange:U=>se(D.id,"unit",U.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{id:`edit-ing-price-${D.id}`,onKeyDown:U=>{U.key==="Enter"&&(U.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.pricePerUnit,onChange:U=>se(D.id,"pricePerUnit",U.target.value)})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:I(ve(D))})}),s.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[s.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>we(D.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:D.name})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:D.quantity})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:D.unit})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(D.pricePerUnit)||0)})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:I(ve(D))})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsx("button",{onClick:()=>l(D.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},D.id))}),s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[s.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:I(Pe.totalCost)})}),s.jsx("div",{className:"col-span-1"})]})]}),C.ingredients.length>0&&s.jsxs("div",{className:"md:hidden space-y-4",children:[C.ingredients.map(D=>s.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${o===D.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:o===D.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>we(D.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:D.name,onChange:U=>se(D.id,"name",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&we(D.id)}})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),s.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:D.quantity,onChange:U=>se(D.id,"quantity",U.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&we(D.id)}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:D.unit,onChange:U=>se(D.id,"unit",U.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:D.pricePerUnit,onChange:U=>se(D.id,"pricePerUnit",U.target.value)})})]})]}):s.jsxs("div",{onClick:()=>l(D.id),className:"group cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:D.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[D.quantity," ",D.unit]}),s.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(D.pricePerUnit)||0),"/",D.unit]})]})]}),s.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:U=>{U.stopPropagation(),l(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),s.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:I(ve(D))})]})]})},D.id)),s.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),s.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:I(Pe.totalCost)})]})})]}),C.ingredients.length===0&&!c&&s.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),s.jsx("button",{onClick:()=>u(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),s.jsx(Te,{children:w&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Nh,{}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:w.onCancel}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${w.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:w.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:w.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:w.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:w.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${w.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Te,{children:R&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Nh,{}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:R.onCancel}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:R.title}),s.jsx("input",{autoFocus:!0,defaultValue:R.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:R.placeholder,onKeyDown:D=>{D.key==="Enter"&&R.onConfirm(D.target.value)}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:R.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:D=>{const U=D.target.closest(".relative").querySelector("input");R.onConfirm(U.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),s.jsx(Te,{children:L&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${L.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":L.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${L.type==="error"?"bg-white animate-pulse":L.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:L.message})]}),document.body)})]})}function pr({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:a="0",pattern:o,inputMode:l}){const c=Number(e)||0,u=r==="g"&&Math.abs(c)>=1e3,h=u?"kg":r,m=()=>u?Math.round(c/1e3).toString():Math.round(c).toString(),[f,y]=k.useState(""),[_,A]=k.useState(!1);k.useEffect(()=>{_||y(e==null?"":m())},[e,_,u]);const P=j=>{const R=j.target.value;y(R);const O=parseFloat(R)||0;n==null||n(O)},b=()=>A(!0),w=()=>{A(!1),e!=null&&y(m())};return s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:t}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:o,value:f,onChange:P,onFocus:b,onBlur:w,placeholder:a}),h&&s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function Ks({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:a,step:o=.1,decimals:l=1,maxPct:c=null}){const u=Math.max(i||0,1),h=v=>u*(Number(v)||0)/100,m=v=>(Number(v)||0)/u*100,f=h(e),y=r==="grams"&&Math.abs(f)>=1e3,_=r==="grams"?y?"kg":"g":"%",A=()=>{const v=Number(e)||0;if(r==="grams"){const x=h(v);return y?x/1e3:x<10?x:Math.round(x)}return v},[P,b]=k.useState(()=>{if(e===""||e===null||e===void 0)return"";const v=A();return y?v.toFixed(2):v.toString()}),[w,j]=k.useState(!1);k.useEffect(()=>{if(!w)if(e===""||e===null||e===void 0)b("");else{const v=A();if(r==="grams"){const x=h(Number(e)||0);b(y?v.toFixed(2):x<10?x.toFixed(2):Math.round(x).toString())}else b(Number(v).toFixed(l))}},[e,r,i,w,y]);const R=v=>{const x=v.target.value;if(b(x),x===""){n==null||n("");return}let N=parseFloat(x);if(!Number.isNaN(N)){N=Math.max(0,N),r==="pct"&&c!==null&&N>c&&(N=c,b(N.toString()));let C=N;r==="grams"&&y&&(C=N*1e3);const z=r==="grams"?m(C):N;n==null||n(z)}},O=()=>{j(!0)},L=()=>{if(j(!1),P===""||P===null){b("");return}const v=parseFloat(P);if(!Number.isNaN(v))if(r==="grams"){const x=h(Number(e)||0);b(y||x<10?v.toFixed(2):Math.round(v).toString())}else b(v.toFixed(l))};return s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:t}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:a,step:r==="grams"?1:o,value:P,onChange:R,onFocus:O,onBlur:L,placeholder:"0"}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:_})]})]})}function dR({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:a=1e3}){const o=["None","ADY","IDY","CY"];function l(c,u,h){r==null||r({...n,[c]:{...n[c],[u]:h}})}return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"label",children:"Tipos de Fermentos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>s.jsxs("label",{className:"button "+(t===c?"primary":""),children:[s.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:c,checked:t===c,onChange:()=>e==null?void 0:e(c)}),c]},c))}),t==="ADY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Ks,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:c=>l("ADY","yeastPct",c),mode:i,flourWeight:a,name:"ADY-yeast",decimals:3})}),t==="IDY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Ks,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:c=>l("IDY","yeastPct",c),mode:i,flourWeight:a,name:"IDY-yeast",decimals:3})}),t==="CY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Ks,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:c=>l("CY","yeastPct",c),mode:i,flourWeight:a,name:"CY-yeast",decimals:3})}),t==="None"&&s.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function uR({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:a=1e3}){const o=["None","Poolish","Biga","Levain"];function l(f,y,_){r==null||r({...n,[f]:{...n[f],[y]:Number.isNaN(_)?"":_}})}const c=i==="grams"?"g":"%",u=f=>a*(Number(f==null?void 0:f.pct)||0)/100,h=(f,y=0,_="")=>{let A=Number(f);if(!Number.isFinite(A))return"";let P=_,b=y;_==="g"&&Math.abs(A)>=1e3&&(A=A/1e3,P="kg",b=2);const w=A.toLocaleString("pt-BR",{minimumFractionDigits:b,maximumFractionDigits:b});return P?`${w} ${P}`:w},m=f=>{const y=n[f];if(!y)return null;const _=u(y),A=_*(Number(y.hydration)||0)/100;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[s.jsx(Ks,{label:`Farinha Pref. (${c})`,value:y.pct,onChange:P=>l(f,"pct",P),mode:i,flourWeight:a,name:`${f}-pct`}),s.jsx(Ks,{label:`gua (${c})`,value:y.hydration,onChange:P=>l(f,"hydration",Math.min(200,Math.max(0,P))),mode:i,flourWeight:_>0?_:a,name:`${f}-hydration`}),typeof y.yeastPct<"u"&&s.jsx(Ks,{label:`Fermento (${c})`,value:y.yeastPct,onChange:P=>l(f,"yeastPct",P),mode:i,flourWeight:_>0?_:a,name:`${f}-yeast`,decimals:2}),typeof y.inoculationPct<"u"&&s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:y.inoculationPct,onChange:P=>l(f,"inoculationPct",parseFloat(P.target.value)),step:1}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Tempo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.time_h,onChange:P=>l(f,"time_h",parseFloat(P.target.value))}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Temp."}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.temp_C,onChange:P=>l(f,"temp_C",parseFloat(P.target.value))}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&s.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(_,0,"g")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(A,0,"g")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(_+A,0,"g")})]})]})]})]})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"label",children:"Tipo de Fermentao"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(f=>s.jsxs("label",{className:"button "+(t===f?"primary":""),children:[s.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:f,checked:t===f,onChange:()=>e==null?void 0:e(f)}),f]},f))}),t==="Poolish"&&m("poolish"),t==="Biga"&&m("biga"),t==="Levain"&&m("levain"),t==="None"&&s.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function hR(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function Wa(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function mR({inputMode:t,setInputMode:e}){const[n,r]=k.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,a]=k.useState({}),o=k.useRef(null),[l,c]=k.useState("synced"),[u,h]=k.useState(null),[m,f]=k.useState(null),[y,_]=k.useState(null),A=k.useRef(null),P=k.useCallback((E,B="success")=>{A.current&&clearTimeout(A.current),_({message:E,type:B}),A.current=setTimeout(()=>_(null),3500)},[]),[b,w]=k.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});k.useEffect(()=>{(async()=>{const B=hR();a(B);try{const $=await Ue.getAllRecipes();if(Object.keys($).length>0){const te={...B,...$};a(te),Wa(te)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function j(E,B){r($=>({...$,[E]:typeof B=="number"&&Number.isNaN(B)?"":B}))}function R(E){r(B=>({...B,preferment:E}))}function O(E){r(B=>({...B,yeastType:E}))}function L(E,B){t==="grams"?w($=>({...$,[E]:Number(B)||0})):j(E,B)}function v(E){w(B=>({...B,flour:Number(E)||0}))}const x=k.useMemo(()=>{var te;const E=me=>Number(me)||0,B=((te=n.yeastType)==null?void 0:te[n.yeastSelection])||{},$=E(B.yeastPct);return 100+E(n.water)+E(n.sugar)+E(n.salt)+E(n.oliveOil)+E(n.oil)+E(n.milk)+E(n.butter)+E(n.diastatic)+$},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),N=k.useMemo(()=>{const E=Number(n.doughBalls)||0,B=Number(n.ballWeight)||0;return E*B},[n.doughBalls,n.ballWeight]),C=k.useMemo(()=>{const E=Number(N)||0,B=Number(x)||100;return B<=0?0:E*100/B},[N,x]),z=k.useMemo(()=>{var me;const E=C,B=he=>E*(Number(he)||0)/100,$=((me=n.yeastType)==null?void 0:me[n.yeastSelection])||{},te=Number($.yeastPct)||0;return{flour:E,water:B(n.water),sugar:B(n.sugar),salt:B(n.salt),oliveOil:B(n.oliveOil),oil:B(n.oil),milk:B(n.milk),butter:B(n.butter),diastatic:B(n.diastatic),yeast:E*te/100,total:E+B(n.water)+B(n.sugar)+B(n.salt)+B(n.oliveOil)+B(n.oil)+B(n.milk)+B(n.butter)+B(n.diastatic)+E*te/100}},[C,n]),I=k.useMemo(()=>{if(t==="grams"){const E=(Number(b.flour)||0)+(Number(b.water)||0)+(Number(b.sugar)||0)+(Number(b.salt)||0)+(Number(b.oliveOil)||0)+(Number(b.oil)||0)+(Number(b.milk)||0)+(Number(b.butter)||0)+(Number(b.diastatic)||0)+(Number(b.yeast)||0);return{flour:b.flour,water:b.water,sugar:b.sugar,salt:b.salt,oliveOil:b.oliveOil,oil:b.oil,milk:b.milk,butter:b.butter,diastatic:b.diastatic,yeast:b.yeast,total:E}}return z},[t,b,z]),T=k.useMemo(()=>{const E=Number(I.flour)||0;if(E<=0)return 0;const B=Number(I.water)||0,$=Number(I.milk)||0;return(B+$)/E*100},[I.flour,I.water,I.milk]),pe=String(n.prefermentType||"").toLowerCase(),de=n.preferment&&n.preferment[pe]?n.preferment[pe]:null,ye=de?C*(Number(de.pct)||0)/100:0,ke=ye*(Number(de==null?void 0:de.hydration)||0)/100,X=ye+ke;function ae(){f({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:E=>{if(!E)return;const B={...i,[E]:n};a(B),Wa(B),Ue.saveRecipe(E,n).then($=>{$&&c("synced")}),f(null)},onCancel:()=>f(null)})}function se(E){const B=i[E];B&&r(B)}function we(E){h({title:"Excluir Receita",message:`A receita "${E}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const B={...i};delete B[E],a(B),Wa(B),Ue.deleteRecipe(E),h(null)},onCancel:()=>h(null)})}function ve(E){f({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:E,onConfirm:B=>{if(!B||B===E)return;const $={...i};$[B]=$[E];const te=$[E];delete $[E],a($),Wa($),Ue.deleteRecipe(E),Ue.saveRecipe(B,te),f(null)},onCancel:()=>f(null)})}function Pe(){const E=JSON.stringify({inputs:n,recipes:i},null,2),B=new Blob([E],{type:"application/json"}),$=URL.createObjectURL(B),te=document.createElement("a");te.href=$,te.download="padoca_pizza_recipes.json",te.click(),URL.revokeObjectURL($)}function D(E){var te;const B=(te=E.target.files)==null?void 0:te[0];if(!B)return;const $=new FileReader;$.onload=me=>{try{const he=JSON.parse(String(me.target.result||"{}"));he.inputs&&r(he.inputs),he.recipes&&(a(he.recipes),Wa(he.recipes)),P("Importao concluda!","success")}catch{P("Arquivo invlido.","error")}},$.readAsText(B),E.target.value=""}function U(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function H(E,B=0,$=""){let te=Number(E);if(!Number.isFinite(te))return"";let me=$,he=B;$==="g"&&Math.abs(te)>=1e3&&(te=te/1e3,me="kg",he=2);const be=te.toLocaleString("pt-BR",{minimumFractionDigits:he,maximumFractionDigits:he});return me?`${be} ${me}`:be}function re(E){return(Number(E)||0)>.001}return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:H(I.total,0,"g")})]})]}),s.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:H(N,0,"g")})})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(I.total)||0)-(Number(N)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:H((Number(I.total)||0)-(Number(N)||0),1,"g")})})]})]})]})}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:E=>{const B=parseFloat(E.target.value);j("doughBalls",Math.round(B))}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:E=>{const B=parseFloat(E.target.value);if(t==="grams"){const te=C*x/100;let me=B>0?Math.round(te/B):1;me<1&&(me=1);const he=Math.round(te/me);r(be=>({...be,ballWeight:he,doughBalls:me}))}else j("ballWeight",Math.round(B))}})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),s.jsx(uR,{value:n.prefermentType,onChange:E=>j("prefermentType",E),data:n.preferment,onDataChange:R,inputMode:t,flourWeight:C})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&s.jsx(pr,{label:"Farinha Total",value:b.flour,onChange:v,unit:"g"}),s.jsx(pr,{label:"gua",value:t==="grams"?b.water:n.water,onChange:E=>L("water",E),unit:t==="grams"?"g":"%"}),s.jsx(pr,{label:"Sal",value:t==="grams"?b.salt:n.salt,onChange:E=>L("salt",E),unit:t==="grams"?"g":"%"}),s.jsx(pr,{label:"Azeite",value:t==="grams"?b.oliveOil:n.oliveOil,onChange:E=>L("oliveOil",E),unit:t==="grams"?"g":"%"}),s.jsx(pr,{label:"Acar",value:t==="grams"?b.sugar:n.sugar,onChange:E=>L("sugar",E),unit:t==="grams"?"g":"%"}),s.jsx(pr,{label:"leo",value:t==="grams"?b.oil:n.oil,onChange:E=>L("oil",E),unit:t==="grams"?"g":"%"}),s.jsx(pr,{label:"Leite",value:t==="grams"?b.milk:n.milk,onChange:E=>L("milk",E),unit:t==="grams"?"g":"%"}),s.jsx(pr,{label:"Manteiga",value:t==="grams"?b.butter:n.butter,onChange:E=>L("butter",E),unit:t==="grams"?"g":"%"}),s.jsx(pr,{label:"Malte",value:t==="grams"?b.diastatic:n.diastatic,onChange:E=>L("diastatic",E),unit:t==="grams"?"g":"%"})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),s.jsx(dR,{value:n.yeastSelection,onChange:E=>j("yeastSelection",E),data:n.yeastType,onDataChange:O,inputMode:t,flourWeight:C})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:E=>j("RT_h",parseFloat(E.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:E=>j("RT_C",parseFloat(E.target.value))})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:E=>j("CT_h",parseFloat(E.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:E=>j("CT_C",parseFloat(E.target.value))})]})]})]}),n.prefermentType!=="None"&&de&&s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),s.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:H(de.pct,1,"%")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(ye,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(ke,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(X,0,"g")})]})]}),(typeof de.yeastPct<"u"||typeof de.inoculationPct<"u"||typeof de.time_h<"u"||typeof de.temp_C<"u")&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof de.yeastPct<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:H(ye*(Number(de.yeastPct)||0)/100,2,"g")})]}),typeof de.inoculationPct<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:H(de.inoculationPct,1,"%")})]}),typeof de.time_h<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:H(de.time_h,0,"h")})]}),typeof de.temp_C<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:H(de.temp_C,0,"C")})]})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),s.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[re(I.flour)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.flour-ye,0,"g")})]}),re(I.water)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.water-ke,0,"g")})]}),n.prefermentType!=="None"&&de&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(X,0,"g")})]}),re(I.salt)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.salt,1,"g")})]}),re(I.sugar)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.sugar,1,"g")})]}),re(I.oliveOil)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.oliveOil,1,"g")})]}),re(I.oil)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.oil,1,"g")})]}),re(I.milk)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.milk,1,"g")})]}),re(I.butter)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.butter,1,"g")})]}),re(I.diastatic)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.diastatic,1,"g")})]}),re(I.yeast)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.yeast,2,"g")})]})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),s.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:H(I.total,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),s.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:H(T,1,"%")})]})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsx("button",{onClick:ae,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),s.jsx("button",{onClick:()=>{var E;return(E=o.current)==null?void 0:E.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),s.jsx("button",{onClick:Pe,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),s.jsx("button",{onClick:U,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),s.jsx("input",{ref:o,type:"file",accept:"application/json",className:"hidden",onChange:D})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?s.jsxs("div",{className:"text-center py-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):s.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([E])=>s.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[s.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:E}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>se(E),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),s.jsx("button",{onClick:()=>ve(E),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),s.jsx("button",{onClick:()=>we(E),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},E))})]}),s.jsx(Te,{children:u&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(k1,{}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:u.onCancel}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${u.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:u.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:u.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:u.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:u.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${u.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Te,{children:m&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(k1,{}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:m.onCancel}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:m.title}),s.jsx("input",{autoFocus:!0,defaultValue:m.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:m.placeholder,onKeyDown:E=>{E.key==="Enter"&&m.onConfirm(E.target.value)}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:m.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:E=>{const B=E.target.closest(".relative").querySelector("input");m.onConfirm(B.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),s.jsx(Te,{children:y&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${y.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":y.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${y.type==="error"?"bg-white animate-pulse":y.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:y.message})]}),document.body)})]})}function k1(){return Zt(!0),null}const fR=10*1024*1024,pR=15e3,gR=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>fR){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const o=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},pR),l=new Image;l.onload=()=>{clearTimeout(o);try{const c=document.createElement("canvas");let u=l.width,h=l.height;u>e&&(h=e/u*h,u=e),c.width=u,c.height=h;const m=c.getContext("2d");if(!m){i(new Error("Falha ao criar contexto de imagem."));return}m.drawImage(l,0,0,u,h);const f=c.toDataURL("image/jpeg",n);if(!f||f==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(f)}catch(c){i(new Error("Erro ao processar imagem: "+c.message))}},l.onerror=()=>{clearTimeout(o),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t});var um=function(t,e){return um=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},um(t,e)};function xR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");um(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Pt=function(){return Pt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Pt.apply(this,arguments)};var j1=!1,Vi,hm,mm,_c,zc,Gj,Cc,fm,pm,gm,Kj,xm,ym,Qj,Yj;function dn(){if(!j1){j1=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(xm=/\b(iPhone|iP[ao]d)/.exec(t),ym=/\b(iP[ao]d)/.exec(t),gm=/Android/i.exec(t),Qj=/FBAN\/\w+;/i.exec(t),Yj=/Mobile/i.exec(t),Kj=!!/Win64/.exec(t),e){Vi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Vi&&document&&document.documentMode&&(Vi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);Gj=r?parseFloat(r[1])+4:Vi,hm=e[2]?parseFloat(e[2]):NaN,mm=e[3]?parseFloat(e[3]):NaN,_c=e[4]?parseFloat(e[4]):NaN,_c?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),zc=e&&e[1]?parseFloat(e[1]):NaN):zc=NaN}else Vi=hm=mm=zc=_c=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Cc=i?parseFloat(i[1].replace("_",".")):!0}else Cc=!1;fm=!!n[2],pm=!!n[3]}else Cc=fm=pm=!1}}var vm={ie:function(){return dn()||Vi},ieCompatibilityMode:function(){return dn()||Gj>Vi},ie64:function(){return vm.ie()&&Kj},firefox:function(){return dn()||hm},opera:function(){return dn()||mm},webkit:function(){return dn()||_c},safari:function(){return vm.webkit()},chrome:function(){return dn()||zc},windows:function(){return dn()||fm},osx:function(){return dn()||Cc},linux:function(){return dn()||pm},iphone:function(){return dn()||xm},mobile:function(){return dn()||xm||ym||gm||Yj},nativeApp:function(){return dn()||Qj},android:function(){return dn()||gm},ipad:function(){return dn()||ym}},yR=vm,vR=!!(typeof window<"u"&&window.document&&window.document.createElement),bR={canUseDOM:vR},wR=bR,Xj=wR,Jj;Xj.canUseDOM&&(Jj=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function kR(t,e){if(!Xj.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&Jj&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var jR=kR,NR=yR,_R=jR,N1=10,_1=40,z1=800;function Zj(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*N1,i=n*N1,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=_1,i*=_1):(r*=z1,i*=z1)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}Zj.getEventType=function(){return NR.firefox()?"DOMMouseScroll":_R("wheel")?"wheel":"mousewheel"};var zR=Zj,CR=zR;const SR=V1(CR);function ER(t,e,n,r,i,a){a===void 0&&(a=0);var o=ca(t,e,a),l=o.width,c=o.height,u=Math.min(l,n),h=Math.min(c,r);return u>h*i?{width:h*i,height:h}:{width:u,height:u/i}}function TR(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function qa(t,e,n,r,i){i===void 0&&(i=0);var a=ca(e.width,e.height,i),o=a.width,l=a.height;return{x:C1(t.x,o,n.width,r),y:C1(t.y,l,n.height,r)}}function C1(t,e,n,r){var i=e*r/2-n/2;return su(t,-i,i)}function S1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function E1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function IR(t,e,n,r,i,a,o){a===void 0&&(a=0),o===void 0&&(o=!0);var l=o?AR:PR,c=ca(e.width,e.height,a),u=ca(e.naturalWidth,e.naturalHeight,a),h={x:l(100,((c.width-n.width/i)/2-t.x/i)/c.width*100),y:l(100,((c.height-n.height/i)/2-t.y/i)/c.height*100),width:l(100,n.width/c.width*100/i),height:l(100,n.height/c.height*100/i)},m=Math.round(l(u.width,h.width*u.width/100)),f=Math.round(l(u.height,h.height*u.height/100)),y=u.width>=u.height*r,_=y?{width:Math.round(f*r),height:f}:{width:m,height:Math.round(m/r)},A=Pt(Pt({},_),{x:Math.round(l(u.width-_.width,h.x*u.width/100)),y:Math.round(l(u.height-_.height,h.y*u.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:A}}function AR(t,e){return Math.min(t,Math.max(0,e))}function PR(t,e){return e}function RR(t,e,n,r,i,a){var o=ca(e.width,e.height,n),l=su(r.width/o.width*(100/t.width),i,a),c={x:l*o.width/2-r.width/2-o.width*l*(t.x/100),y:l*o.height/2-r.height/2-o.height*l*(t.y/100)};return{crop:c,zoom:l}}function DR(t,e,n){var r=TR(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function MR(t,e,n,r,i,a){n===void 0&&(n=0);var o=ca(e.naturalWidth,e.naturalHeight,n),l=su(DR(t,e,r),i,a),c=r.height>r.width?r.height/t.height:r.width/t.width,u={x:((o.width-t.width)/2-t.x)*c,y:((o.height-t.height)/2-t.y)*c};return{crop:u,zoom:l}}function T1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function VR(t){return t*Math.PI/180}function ca(t,e,n){var r=VR(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function su(t,e,n){return Math.min(Math.max(t,e),n)}function ec(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var LR=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,OR=1,FR=3,BR=1,UR=function(t){xR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=k.createRef(),n.imageRef=k.createRef(),n.videoRef=k.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=RR(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),a=i.crop,o=i.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var l=MR(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),a=l.crop,o=l.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var r,i,a,o,l,c,u=n.imageRef.current||n.videoRef.current;if(u&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,m=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,f=((a=n.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,y=u.offsetWidth<m||u.offsetHeight<f,_=m/f,A=void 0;if(y)switch(n.state.mediaObjectFit){default:case"contain":A=h>_?{width:n.containerRect.height*_,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/_};break;case"horizontal-cover":A={width:n.containerRect.width,height:n.containerRect.width/_};break;case"vertical-cover":A={width:n.containerRect.height*_,height:n.containerRect.height};break}else A={width:u.offsetWidth,height:u.offsetHeight};n.mediaSize=Pt(Pt({},A),{naturalWidth:m,naturalHeight:f}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var P=n.props.cropSize?n.props.cropSize:ER(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((l=n.state.cropSize)===null||l===void 0?void 0:l.height)!==P.height||((c=n.state.cropSize)===null||c===void 0?void 0:c.width)!==P.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(P),n.setState({cropSize:P},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(P),P}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),a=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(a,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+r.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,a,o=r.x,l=r.y;n.dragStartPosition={x:o,y:l},n.dragStartCrop=Pt({},n.props.crop),(a=(i=n.props).onInteractionStart)===null||a===void 0||a.call(i)},n.onDrag=function(r){var i=r.x,a=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||a===void 0)){var o=i-n.dragStartPosition.x,l=a-n.dragStartPosition.y,c={x:n.dragStartCrop.x+o,y:n.dragStartCrop.y+l},u=n.props.restrictPosition?qa(c,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):c;n.props.onCropChange(u)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),a=SR(r).pixelY,o=n.props.zoom-a*n.props.zoomSpeed/200;n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=n.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=n.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},n.getPointOnContainer=function(r,i){var a=r.x,o=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(a-i.x),y:n.containerRect.height/2-(o-i.y)}},n.getPointOnMedia=function(r){var i=r.x,a=r.y,o=n.props,l=o.crop,c=o.zoom;return{x:(i+l.x)/c,y:(a+l.y)/c}},n.setNewZoom=function(r,i,a){var o=a===void 0?{}:a,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!n.state.cropSize||!n.props.onZoomChange)){var u=su(r,n.props.minZoom,n.props.maxZoom);if(c){var h=n.getPointOnContainer(i,n.containerPosition),m=n.getPointOnMedia(h),f={x:m.x*u-h.x,y:m.y*u-h.y},y=n.props.restrictPosition?qa(f,n.mediaSize,n.state.cropSize,u,n.props.rotation):f;n.props.onCropChange(y)}n.props.onZoomChange(u)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?qa(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return IR(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,a=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,a),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,a)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,a=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,a)}},n.recomputeCropPosition=function(){var r,i;if(n.state.cropSize){var a=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((i=n.previousCropSize)===null||i===void 0)&&i.height)){var o=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(o){var l=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;a={x:n.props.crop.x*l,y:n.props.crop.y*c}}}var u=n.props.restrictPosition?qa(a,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):a;n.previousCropSize=n.state.cropSize,n.props.onCropChange(u),n.emitCropData()}},n.onKeyDown=function(r){var i,a,o=n.props,l=o.crop,c=o.onCropChange,u=o.keyboardStep,h=o.zoom,m=o.rotation,f=u;if(n.state.cropSize){r.shiftKey&&(f*=.2);var y=Pt({},l);switch(r.key){case"ArrowUp":y.y-=f,r.preventDefault();break;case"ArrowDown":y.y+=f,r.preventDefault();break;case"ArrowLeft":y.x-=f,r.preventDefault();break;case"ArrowRight":y.x+=f,r.preventDefault();break;default:return}n.props.restrictPosition&&(y=qa(y,n.mediaSize,n.state.cropSize,h,m)),r.repeat||(a=(i=n.props).onInteractionStart)===null||a===void 0||a.call(i),c(y)}},n.onKeyUp=function(r){var i,a;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(a=(i=n.props).onInteractionEnd)===null||a===void 0||a.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=LR,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,a,o,l,c,u,h,m;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((a=n.cropSize)===null||a===void 0?void 0:a.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=n.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((u=n.crop)===null||u===void 0?void 0:u.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((m=this.videoRef.current)===null||m===void 0||m.load());var f=this.getObjectFit();f!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:f},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,a;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,u=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,h=c/u;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=S1(r,i),this.lastPinchRotation=E1(r,i),this.onDragStart(T1(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),a=e.getTouchPoint(n.touches[1]),o=T1(i,a);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=S1(i,a),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var u=E1(i,a),h=r.props.rotation+(u-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=u})}},e.prototype.render=function(){var n=this,r,i=this.props,a=i.image,o=i.video,l=i.mediaProps,c=i.cropperProps,u=i.transform,h=i.crop,m=h.x,f=h.y,y=i.rotation,_=i.zoom,A=i.cropShape,P=i.showGrid,b=i.roundCropAreaPixels,w=i.style,j=w.containerStyle,R=w.cropAreaStyle,O=w.mediaStyle,L=i.classes,v=L.containerClassName,x=L.cropAreaClassName,N=L.mediaClassName,C=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return k.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(I){return n.containerRef=I},"data-testid":"container",style:j,className:ec("reactEasyCrop_Container",v)},a?k.createElement("img",Pt({alt:"",className:ec("reactEasyCrop_Image",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},l,{src:a,ref:this.imageRef,style:Pt(Pt({},O),{transform:u||"translate(".concat(m,"px, ").concat(f,"px) rotate(").concat(y,"deg) scale(").concat(_,")")}),onLoad:this.onMediaLoad})):o&&k.createElement("video",Pt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:ec("reactEasyCrop_Video",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Pt(Pt({},O),{transform:u||"translate(".concat(m,"px, ").concat(f,"px) rotate(").concat(y,"deg) scale(").concat(_,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(z){return k.createElement("source",Pt({key:z.src},z))})),this.state.cropSize&&k.createElement("div",Pt({ref:this.cropperRef,style:Pt(Pt({},R),{width:b?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:b?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:ec("reactEasyCrop_CropArea",A==="round"&&"reactEasyCrop_CropAreaRound",P&&"reactEasyCrop_CropAreaGrid",x)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:FR,minZoom:OR,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:BR},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(k.Component);const $R=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",i=>n(i)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function eN(t){return t*Math.PI/180}function WR(t,e,n){const r=eN(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function qR(t,e,n=0,r={horizontal:!1,vertical:!1}){const i=await $R(t),a=document.createElement("canvas"),o=a.getContext("2d");if(!o)return null;const l=eN(n),{width:c,height:u}=WR(i.width,i.height,n);a.width=c,a.height=u,o.translate(c/2,u/2),o.rotate(l),o.scale(r.horizontal?-1:1,r.vertical?-1:1),o.translate(-i.width/2,-i.height/2),o.drawImage(i,0,0);const h=o.getImageData(e.x,e.y,e.width,e.height);return a.width=e.width,a.height=e.height,o.putImageData(h,0,0),a.toDataURL("image/jpeg",.9)}const HR=()=>{const[t,e]=k.useState(null),n=k.useRef(null),r=k.useCallback((o,l="error")=>{n.current&&clearTimeout(n.current),e({message:o,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),i=k.useMemo(()=>({error:o=>r(o,"error"),success:o=>r(o,"success"),info:o=>r(o,"info")}),[r]),a=t?Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:i,ToastUI:a}},xt={Camera:()=>s.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:t=>s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},GR=({src:t,onClose:e})=>(Zt(!0),Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[s.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:s.jsx(xt.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),s.jsx(G.img,{src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:n=>n.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body)),KR=({imageSrc:t,onCancel:e,onCropComplete:n})=>{const[r,i]=k.useState({x:0,y:0}),[a,o]=k.useState(1),[l,c]=k.useState(null),[u,h]=k.useState(!1);Zt(!0);const m=(y,_)=>{c(_)},f=async()=>{try{const y=await qR(t,l);n(y)}catch(y){console.error(y)}};return Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black flex flex-col",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[20001] px-6 py-12 flex justify-between items-center bg-gradient-to-b from-black/80 via-black/40 to-transparent pointer-events-none",children:[s.jsx("button",{onClick:e,className:"pointer-events-auto px-5 py-2.5 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/10 text-white text-sm font-semibold transition-all active:scale-95",children:"Cancelar"}),s.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest opacity-80 mt-1",children:"Redimensionar"}),s.jsx("button",{onClick:f,className:"pointer-events-auto px-6 py-2.5 rounded-full bg-white text-black text-sm font-bold transition-all hover:bg-zinc-100 active:scale-95 shadow-[0_4px_24px_rgba(255,255,255,0.2)]",children:"OK"})]}),s.jsx("div",{className:"relative flex-1 bg-black",children:s.jsx(UR,{image:t,crop:r,zoom:a,aspect:4/5,onCropChange:i,onZoomChange:o,onCropComplete:m,showGrid:u,onInteractionStart:()=>h(!0),onInteractionEnd:()=>h(!1),classes:{containerClassName:"bg-black",mediaClassName:"object-contain",cropAreaClassName:"border border-white/40 shadow-[0_0_0_1000px_rgba(0,0,0,0.7)]"}})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[20001] px-8 py-16 flex flex-col items-center bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none",children:[s.jsxs("div",{className:"w-full max-w-xs flex items-center gap-6 pointer-events-auto",children:[s.jsx("button",{onClick:()=>o(Math.max(1,a-.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:s.jsx(xt.Camera,{className:"w-4 h-4"})}),s.jsx("input",{type:"range",value:a,min:1,max:3,step:.01,onChange:y=>o(parseFloat(y.target.value)),className:"range-slider accent-white"}),s.jsx("button",{onClick:()=>o(Math.min(3,a+.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:s.jsx(xt.Plus,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"mt-8 flex gap-1 items-center opacity-30 select-none",children:[1,1.5,2,2.5,3].map(y=>s.jsx("div",{className:`w-1 h-3 rounded-full transition-all duration-300 ${a>=y?"bg-white h-5 opacity-100":"bg-white/40"}`},y))})]}),s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/20 rounded-full z-[20002]"})]}),document.body)},QR=({id:t,children:e})=>{const n=Gf();return s.jsx(Ud,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},YR=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,a]=k.useState(""),[o,l]=k.useState(null),[c,u]=k.useState(""),[h,m]=k.useState(null),[f,y]=k.useState(null),[_,A]=k.useState(!1),P=k.useRef(null);Zt(!0);const b=["#FF3B30","#FF9500","#FFCC00","#34C759","#00C7BE","#007AFF","#5856D6","#AF52DE","#FF2D55","#8E8E93"],w=x=>typeof x=="string"?{name:x,color:"#007AFF"}:{name:x.name||"Sem nome",color:x.color||"#007AFF"},j=()=>{const x=i.trim();!x||t.some(C=>nn(C)===x)||(n([...t,{name:x,color:"#007AFF"}]),a(""))},R=x=>{const N=c.trim(),C=nn(x);if(!N||N===C){l(null);return}if(t.some(I=>nn(I)===N)){l(null);return}r(C,N),n(t.map(I=>{const T=w(I);return T.name===C?{...T,name:N}:T})),l(null)},O=(x,N)=>{const C=nn(x);n(t.map(z=>{const I=w(z);return I.name===C?{...I,color:N}:I})),y(null)},L=x=>{const N=nn(x);n(t.filter(C=>nn(C)!==N)),r(N,"Outros"),m(null)},v=(x,N)=>{A(!1),(N.offset.y>100||N.velocity.y>500)&&e()};return Ze.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-stretch md:items-center justify-center",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:e}),s.jsxs(G.div,{ref:P,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:.8},drag:window.innerWidth>=768?"y":!1,dragConstraints:{top:0,bottom:0},dragElastic:{top:0,bottom:.7},onDragStart:()=>A(!0),onDragEnd:v,className:"relative w-full h-full md:h-auto md:max-w-md md:max-h-[80vh] bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-[0_-10px_60px_rgba(0,0,0,0.25)] dark:shadow-[0_-10px_60px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",style:{paddingTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[s.jsx("div",{className:"flex justify-center pt-3 pb-2 shrink-0 cursor-grab active:cursor-grabbing md:hidden touch-manipulation",children:s.jsx(G.div,{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600",animate:{scale:_?1.1:1,backgroundColor:_?"#007AFF":void 0},transition:{duration:.15}})}),s.jsxs("div",{className:"flex items-center justify-between px-6 pt-4 md:pt-6 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[22px] font-bold text-zinc-900 dark:text-white tracking-tight leading-tight",children:"Categorias"}),s.jsx("p",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400 mt-0.5",children:"Organize suas receitas"})]}),s.jsx("button",{onClick:e,className:"w-12 h-12 -mr-2 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 pb-5 shrink-0",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsx("input",{type:"text",value:i,onChange:x=>a(x.target.value),onKeyDown:x=>x.key==="Enter"&&j(),className:"w-full h-12 px-4 rounded-xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[16px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Nova categoria..."})}),s.jsx("button",{onClick:j,disabled:!i.trim(),className:"w-12 h-12 flex items-center justify-center bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation shadow-lg shadow-blue-500/25",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),s.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-6"}),s.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-4 py-4",children:t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),s.jsx("p",{className:"text-[15px] font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhuma categoria ainda"})]}):s.jsx("div",{className:"space-y-2",children:t.map((x,N)=>{const{name:C,color:z}=w(x),I=C+N;return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center gap-3 py-3 px-3 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[s.jsx("button",{onClick:()=>y(f===I?null:I),className:"w-12 h-12 rounded-xl flex items-center justify-center touch-manipulation hover:bg-white dark:hover:bg-zinc-700 transition-colors active:scale-95",children:s.jsx("div",{className:"w-7 h-7 rounded-full shadow-sm transition-transform hover:scale-110",style:{backgroundColor:z}})}),s.jsx("div",{className:"flex-1 min-w-0",children:o===I?s.jsx("input",{autoFocus:!0,value:c,onChange:T=>u(T.target.value),onBlur:()=>R(x),onKeyDown:T=>{T.key==="Enter"&&R(x),T.key==="Escape"&&l(null)},className:"w-full h-10 px-3 -ml-3 bg-white dark:bg-zinc-700 rounded-lg outline-none text-[16px] font-semibold text-zinc-900 dark:text-white ring-2 ring-blue-500"}):s.jsx("button",{onClick:()=>{l(I),u(C)},className:"text-left w-full py-2 text-[16px] font-semibold text-zinc-900 dark:text-white truncate touch-manipulation",children:C})}),s.jsx("button",{onClick:()=>m(x),className:"w-12 h-12 flex items-center justify-center rounded-xl text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all active:scale-95 touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsx(Te,{children:f===I&&s.jsxs(s.Fragment,{children:[s.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:30},className:"md:hidden fixed inset-x-0 bottom-0 z-[80] bg-white dark:bg-zinc-800 rounded-t-3xl shadow-[0_-20px_60px_rgba(0,0,0,0.3)] p-6",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 24px)"},children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600"})}),s.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white text-center mb-5",children:"Escolha uma Cor"}),s.jsx("div",{className:"grid grid-cols-5 gap-4 mb-6",children:b.map(T=>s.jsx("button",{onClick:()=>O(x,T),className:`aspect-square rounded-full transition-all active:scale-90 touch-manipulation ${z===T?"ring-[3px] ring-offset-4 ring-offset-white dark:ring-offset-zinc-800 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:T}},T))}),s.jsx("button",{onClick:()=>y(null),className:"w-full h-14 bg-zinc-100 dark:bg-zinc-700 rounded-2xl text-[17px] font-semibold text-zinc-900 dark:text-white active:bg-zinc-200 dark:active:bg-zinc-600 transition-colors touch-manipulation",children:"Fechar"})]}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 z-[75] bg-black/40",onClick:()=>y(null)}),s.jsx(G.div,{initial:{opacity:0,scale:.95,y:-8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-8},transition:{duration:.15},className:"hidden md:block absolute left-3 top-full mt-2 z-[80] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:s.jsx("div",{className:"grid grid-cols-5 gap-2",children:b.map(T=>s.jsx("button",{onClick:()=>O(x,T),className:`w-8 h-8 rounded-full transition-all hover:scale-110 active:scale-95 ${z===T?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:T}},T))})})]})})]},I)})})}),s.jsx(Te,{children:h&&s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:s.jsxs(G.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:"w-full max-w-[280px] bg-white/95 dark:bg-zinc-800/95 backdrop-blur-xl rounded-[20px] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-14 h-14 bg-rose-100 dark:bg-rose-900/40 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4",children:s.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),s.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 leading-relaxed",children:['"',nn(h),'" ser removida. Receitas sero movidas para "Outros".']})]}),s.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:s.jsx("button",{onClick:()=>m(null),className:"w-full h-12 text-[17px] font-normal text-blue-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors touch-manipulation",children:"Cancelar"})}),s.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:s.jsx("button",{onClick:()=>L(h),className:"w-full h-12 text-[17px] font-semibold text-rose-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors active:bg-rose-50 dark:active:bg-rose-900/20 touch-manipulation",children:"Excluir"})})]})})})]})]}),document.body)},XR=Dn.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:i})=>{const a=Gf(),[o,l]=k.useState(!1);return s.jsx(Ud,{value:t,dragListener:i,dragControls:a,className:`group relative mb-2 transition-all duration-300 ease-out ${i?"":"cursor-pointer"}`,onClick:()=>!i&&l(!o),children:s.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${i?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":o?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[i&&s.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:c=>a.start(c),children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[s.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!i&&s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${o?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:o&&s.jsx(xt.Check,{className:"w-3 h-3 text-white"})}),i?s.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:c=>e({...t,name:c.target.value}),onKeyDown:c=>{if(c.key==="Enter"){c.preventDefault();const u=document.getElementById(`ing-qty-${t.id}`);u&&u.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):s.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${o?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:s.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:c=>{const u=c.target.value;(u===""||/^[0-9.,]*$/.test(u))&&e({...t,quantity:u})},onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),s.jsx("select",{value:t.unit,onChange:c=>e({...t,unit:c.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(c=>s.jsx("option",{value:c,children:c},c))})]}):s.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${o?"opacity-50":""}`,children:[s.jsx("span",{children:t.quantity}),s.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),i&&s.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),JR=Dn.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i,isEditing:a})=>{const o=Gf(),[l,c]=k.useState(!1);return s.jsx(Ud,{value:t,dragListener:a,dragControls:o,className:`group relative mb-2 transition-all duration-300 ease-out ${a?"":"cursor-pointer"}`,onClick:()=>!a&&c(!l),children:s.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${a?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[a&&s.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:u=>o.start(u),children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[s.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),s.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!a&&l?s.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:s.jsx(xt.Check,{className:"w-3 h-3 text-white"})}):s.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),a?s.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:u=>n({...t,text:u.target.value}),onKeyDown:u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:u=>{u.target.style.height="auto",u.target.style.height=u.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):s.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),a&&s.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),nn=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",I1=(t,e)=>{const n=t.find(r=>nn(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function ZR(){const{toast:t,ToastUI:e}=HR(),[n,r]=k.useState([]),[i,a]=k.useState(["Tradicionais","Especiais","Veganas","Doces"]),[o,l]=k.useState(null),[c,u]=k.useState(!1),[h,m]=k.useState("Todas"),[f,y]=k.useState(!0),[_,A]=k.useState(null),[P,b]=k.useState(null),[w,j]=k.useState(null),[R,O]=k.useState(!1),[L,v]=k.useState(!1),[x,N]=k.useState(!1),[C,z]=k.useState(!1),[I,T]=k.useState(null),pe=k.useRef(null);k.useRef(null);const de=k.useRef({}),ye=k.useRef({});k.useEffect(()=>{let D=!0;return(async()=>{try{const H=await Ue.getRecipesV3();if(!D)return;Array.isArray(H)&&H.length>0?r(H.map(re=>{let E=Array.isArray(re.sections)?re.sections:[];return E.length===0&&(Array.isArray(re.ingredientSections)||Array.isArray(re.instructionSections))&&(E=[...Array.isArray(re.ingredientSections)?re.ingredientSections.map(B=>({...B,type:"ingredients"})):[],...Array.isArray(re.instructionSections)?re.instructionSections.map(B=>({...B,type:"instructions"})):[]]),E.length>0&&(E=E.map(B=>({...B,items:Array.isArray(B.items)?B.items.filter($=>{var te,me,he;return B.type==="ingredients"?((te=$.name)==null?void 0:te.trim())||((me=$.quantity)==null?void 0:me.trim()):(he=$.text)==null?void 0:he.trim()}):[]}))),{id:String(re.id),name:re.name||"Sem nome",category:re.category||"Outros",prepTime:re.prepTime??0,cookTime:re.cookTime??0,temperature:re.temperature??180,image:re.image||null,sections:E,createdAt:re.createdAt||new Date().toISOString(),updatedAt:re.updatedAt||new Date().toISOString()}})):r([])}catch{D&&r([])}try{const H=await Ue.getRecipeCategories();D&&H&&Array.isArray(H)&&a(H)}catch{}D&&(y(!1),A(null))})(),()=>{D=!1}},[]),k.useEffect(()=>{if(f)return;const D=setTimeout(()=>{Ue.syncRecipeCategories(i)},1e3);return()=>clearTimeout(D)},[i,f]);const ke=(D,U)=>{const H=String(D);v(!0),N(!1),r(re=>re.map(E=>String(E.id)===H?{...E,...U,updatedAt:new Date().toISOString()}:E)),de.current[H]={...de.current[H]||{},...U,updatedAt:new Date().toISOString()},ye.current[H]&&clearTimeout(ye.current[H]),ye.current[H]=setTimeout(async()=>{const re=de.current[H];if(!re){v(!1);return}delete de.current[H],delete ye.current[H];try{await Ue.syncRecipeV3(H,re,!0)||N(!0)}catch{N(!0)}finally{Object.keys(de.current).length===0&&v(!1)}},1200)},X=D=>{const U=D.target.files[0];if(!U)return;if(!o){t.error("Nenhuma receita selecionada.");return}const H=new FileReader;H.onload=()=>{T(H.result)},H.readAsDataURL(U),D.target.value=null},ae=async D=>{try{z(!0),T(null);const U=await gR(D);ke(o,{image:U}),t.success("Imagem atualizada!")}catch(U){console.error(U),t.error("Erro ao processar imagem.")}finally{z(!1)}},se=async D=>{const U=String(D);j(null),r(H=>H.filter(re=>String(re.id)!==U)),String(o)===U&&l(null);try{if(!await Ue.deleteRecipeV3(U))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},we=k.useMemo(()=>n.filter(D=>h==="Todas"||D.category===h),[n,h]),ve=k.useMemo(()=>n.find(D=>String(D.id)===String(o)),[n,o]),Pe=k.useCallback(()=>{if(ve&&ve.sections){const D=ve.sections.map(U=>U.type==="ingredients"?{...U,items:(U.items||[]).filter(H=>H.name.trim()||H.quantity.trim())}:U.type==="instructions"?{...U,items:(U.items||[]).filter(H=>H.text.trim())}:U);ke(o,{sections:D})}u(!1)},[ve,o,ke]);return f?s.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):_?s.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:s.jsxs("div",{className:"text-center max-w-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:_}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsx(Te,{children:!o&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${x?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":L?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${x?"bg-rose-500":L?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:x?"Erro de Sync":L?"Sincronizando":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),s.jsxs("button",{onClick:()=>{const D=String(Date.now()),U={id:D,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([U,...n]),l(D),u(!0),Ue.syncRecipeV3(D,U)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx(xt.Plus,{}),"Criar Nova Receita"]})]}),s.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:s.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...i].map(D=>s.jsx("button",{onClick:()=>m(nn(D)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===nn(D)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:nn(D)},nn(D))),s.jsx("button",{onClick:()=>O(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[we.map(D=>s.jsxs(G.div,{onClick:()=>{l(D.id),u(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[s.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[D.image?s.jsx(G.img,{src:D.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):s.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),s.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/8 via-transparent to-transparent opacity-60"}),s.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/8 via-transparent to-transparent opacity-60"}),s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:s.jsx(xt.Camera,{})})})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),s.jsx("button",{onClick:U=>{U.stopPropagation(),j({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${D.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{se(D.id)},onCancel:()=>j(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:s.jsx(xt.Trash,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"px-2 pb-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${I1(i,D.category)}15`,color:I1(i,D.category)},children:D.category}),s.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(xt.Clock,{}),D.prepTime+D.cookTime,"m"]}),D.temperature>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),D.temperature,""]})]})]})]}),s.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:D.name}),s.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(D.sections||[]).filter(U=>U.type==="ingredients").reduce((U,H)=>{var re;return U+(((re=H.items)==null?void 0:re.length)||0)},0)," ingredientes"]})]})]},D.id)),we.length===0&&s.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),s.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:s.jsx(xt.Book,{})})]}),s.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),s.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",s.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&Ze.createPortal(s.jsx(Te,{children:o&&ve&&s.jsx(G.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:pe,children:ve?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[s.jsx("div",{className:"flex-1 flex justify-start",children:s.jsx("button",{onClick:()=>{const D=(ve.sections||[]).map(U=>({...U,items:U.items.filter(H=>{var re,E,B;return U.type==="ingredients"?((re=H.name)==null?void 0:re.trim())||((E=H.quantity)==null?void 0:E.trim()):(B=H.text)==null?void 0:B.trim()})}));ke(o,{sections:D}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:s.jsx(xt.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),s.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${x?"text-rose-500":L?"text-zinc-400":"text-zinc-300"}`,children:x?"Falha":L?"Sincronizando...":"Salvo"}),s.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>c?Pe():u(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${c?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:c?"Concludo":"Editar"}),s.jsx("button",{onClick:()=>{j({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{se(o)},onCancel:()=>j(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:s.jsx(xt.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[s.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[s.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:ve.image?s.jsxs(s.Fragment,{children:[s.jsx(G.img,{src:ve.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>b(ve.image)}),s.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:X,disabled:C}),C?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsx(xt.Camera,{className:"w-5 h-5"})]})]}):s.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:X}),s.jsx(xt.Camera,{}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),s.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(D=>s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:D.label}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("input",{value:ve[D.val],onChange:U=>ke(o,{[D.val]:U.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),D.unit&&s.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:D.unit})]})]},D.label))})]}),s.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("select",{value:ve.category,onChange:D=>ke(o,{category:D.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:i.map(D=>s.jsx("option",{value:nn(D),children:nn(D)},nn(D)))})}),s.jsx("textarea",{value:ve.name,onChange:D=>ke(o,{name:D.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:D=>{D.target.style.height="auto",D.target.style.height=D.target.scrollHeight+"px"}})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[s.jsxs("button",{disabled:!c,onClick:()=>ke(o,{sections:[...ve.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),s.jsxs("button",{disabled:!c,onClick:()=>ke(o,{sections:[...ve.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),s.jsx(Bd,{axis:"y",values:ve.sections||[],onReorder:D=>ke(o,{sections:D}),className:"space-y-6",children:(ve.sections||[]).map(D=>s.jsx(QR,{id:D,children:U=>s.jsx(tD,{section:D,onUpdate:H=>ke(o,{sections:ve.sections.map(re=>re.id===D.id?H:re)}),onDelete:()=>ke(o,{sections:ve.sections.filter(H=>H.id!==D.id)}),dragControls:U,isEditing:c})},D.id))}),s.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:s.jsx("button",{onClick:()=>j({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{se(o)},onCancel:()=>j(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),R&&s.jsx(YR,{categories:i,onClose:()=>O(!1),onUpdate:a,onRenameCategory:(D,U)=>{n.filter(H=>H.category===D).forEach(H=>{ke(H.id,{category:U})})}},"recipe-cat-modal"),s.jsx(Te,{children:P&&s.jsx(GR,{src:P,onClose:()=>b(null)})}),typeof document<"u"&&Ze.createPortal(s.jsx(Te,{mode:"wait",children:w&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:w.onCancel}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx(eD,{}),s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${w.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx(xt.Trash,{})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:w.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:w.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:w.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:w.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${w.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),s.jsx(Te,{children:I&&s.jsx(KR,{imageSrc:I,onCancel:()=>T(null),onCropComplete:ae})}),e]})}function eD(){return Zt(!0),null}function tD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){return t.type==="ingredients"?s.jsx(nD,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):t.type==="instructions"?s.jsx(rD,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):null}function nD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const a=Dn.useRef(null),o=Dn.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],c]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const u=document.getElementById(`ing-name-${l}`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.focus())})})},[t,e]);return s.jsxs("div",{ref:a,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:s.jsx(xt.Bars,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),i?s.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):s.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&s.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:s.jsx(xt.Trash,{})})]}),s.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:s.jsx(Bd,{axis:"y",values:t.items,onReorder:l=>i&&e({...t,items:l}),children:t.items.map(l=>s.jsx(XR,{item:l,onUpdate:c=>e({...t,items:t.items.map(u=>u.id===l.id?c:u)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==l.id)}),onNext:()=>{l.name.trim()&&o()},isEditing:i},l.id))})}),i&&s.jsxs("button",{type:"button",onClick:o,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[s.jsx(xt.Plus,{})," Adicionar Ingrediente"]})]})}function rD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const a=Dn.useCallback(()=>{const o=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:o,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const c=document.getElementById(`instr-text-${o}`);c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.focus())})})},[t,e]);return s.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:o=>r.start(o),children:s.jsx(xt.Bars,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),i?s.jsx("input",{value:t.title,onChange:o=>e({...t,title:o.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):s.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&s.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:s.jsx(xt.Trash,{})})]}),s.jsx(Bd,{axis:"y",values:t.items,onReorder:o=>i&&e({...t,items:o}),className:"space-y-3",children:t.items.map((o,l)=>s.jsx(JR,{item:o,index:l,onUpdate:c=>e({...t,items:t.items.map(u=>u.id===o.id?c:u)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==o.id)}),onNext:()=>{o.text.trim()&&a()},isEditing:i},o.id))}),i&&s.jsxs("button",{type:"button",onClick:a,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[s.jsx(xt.Plus,{})," Adicionar Passo"]})]})}const A1="padoca_kanban_pro_max",Ha={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},iD=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],P1={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},Op=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function sD(){var re;const[t,e]=k.useState(()=>{try{const E=localStorage.getItem(A1);return E?JSON.parse(E):P1}catch{return P1}}),[n,r]=k.useState(null),[i,a]=k.useState(!1),[o,l]=k.useState(""),[c,u]=k.useState(0),[h,m]=k.useState(null),[f,y]=k.useState(""),[_,A]=k.useState(null),[P,b]=k.useState(""),[w,j]=k.useState(null),[R,O]=k.useState(!1),[L,v]=k.useState(null),x=k.useRef(null);k.useCallback((E,B="success")=>{x.current&&clearTimeout(x.current),v({message:E,type:B}),x.current=setTimeout(()=>v(null),3500)},[]);const[N,C]=k.useState({active:null,target:null,isDragging:!1}),z=id(0),I=id(0),T=k.useRef(null),pe=4,de=k.useRef(null),ye=k.useRef(null),ke=k.useRef({colId:null,index:null}),X=k.useCallback((E="light")=>{navigator.vibrate&&navigator.vibrate(E==="light"?8:E==="medium"?15:25)},[]),ae=k.useCallback((E,B,$)=>{const me=document.elementsFromPoint(E,B).find(De=>De.hasAttribute("data-column-id"));if(!me)return null;const he=me.getAttribute("data-column-id"),be=me.querySelector("[data-cards-container]");if(!be)return{colId:he,index:0};const et=Array.from(be.querySelectorAll("[data-card-id]")).filter(De=>De.getAttribute("data-card-id")!==$);if(et.length===0)return{colId:he,index:0};for(let De=0;De<et.length;De++){const Be=et[De].getBoundingClientRect(),lt=Be.top+Be.height/2;if(B<lt)return{colId:he,index:De}}return{colId:he,index:et.length}},[]);k.useEffect(()=>{const E=$=>{const te=T.current;if(te&&!N.isDragging){const me=$.clientX-te.startX,he=$.clientY-te.startY;if(Math.sqrt(me*me+he*he)>pe){const{card:et,colId:De,rect:Be,offsetX:lt,offsetY:Ee,cardIndex:He}=te;z.set(Be.left),I.set(Be.top),C({active:{id:et.id,sourceColId:De,sourceIndex:He,data:et,rect:Be,offsetX:lt,offsetY:Ee},target:{colId:De,index:He},isDragging:!0}),X("medium")}return}if(N.isDragging&&N.active){$.preventDefault();const me=$.clientX-N.active.offsetX,he=$.clientY-N.active.offsetY;if(z.set(me),I.set(he),ye.current)return;ye.current=requestAnimationFrame(()=>{const be=ae($.clientX,$.clientY,N.active.id);if(ye.current=null,be){const et=ke.current;(et.colId!==be.colId||et.index!==be.index)&&(ke.current=be,X("light"),C(De=>({...De,target:be})))}})}},B=$=>{if(ye.current&&(cancelAnimationFrame(ye.current),ye.current=null),N.isDragging&&N.active){const{active:te,target:me}=N;document.body.style.cursor="";const he=me==null?void 0:me.colId,be=me==null?void 0:me.index;he&&(te.sourceColId!==he||te.sourceIndex!==be)&&(e(De=>{const Be=De.columns.map(zt=>({...zt,cards:[...zt.cards]})),lt=Be.find(zt=>zt.id===te.sourceColId),Ee=Be.find(zt=>zt.id===he);if(!lt||!Ee)return De;const He=lt.cards.findIndex(zt=>zt.id===te.id);if(He===-1)return De;const[qt]=lt.cards.splice(He,1);return Ee.cards.splice(be,0,qt),{...De,columns:Be}}),X("medium")),C({active:null,target:null,isDragging:!1}),ke.current={colId:null,index:null}}else if(T.current){const{card:te,colId:me}=T.current;r({...te,columnId:me})}T.current=null};return window.addEventListener("pointermove",E,{passive:!1}),window.addEventListener("pointerup",B),window.addEventListener("pointercancel",B),()=>{window.removeEventListener("pointermove",E),window.removeEventListener("pointerup",B),window.removeEventListener("pointercancel",B),ye.current&&cancelAnimationFrame(ye.current)}},[N,ae,X,z,I]);const se=k.useCallback((E,B,$)=>{var he;if(E.target.closest("button, input, textarea, [data-no-drag]")||E.button&&E.button!==0)return;const te=E.currentTarget,me=te.getBoundingClientRect();T.current={card:B,colId:$,element:te,rect:me,startX:E.clientX,startY:E.clientY,offsetX:E.clientX-me.left,offsetY:E.clientY-me.top,cardIndex:((he=t.columns.find(be=>be.id===$))==null?void 0:he.cards.findIndex(be=>be.id===B.id))??0}},[t.columns]);k.useEffect(()=>{(async()=>{var B;try{const $=await((B=Ue.getKanban)==null?void 0:B.call(Ue));$!=null&&$.columns&&e($)}catch{}finally{O(!0)}})()},[]),k.useEffect(()=>{if(localStorage.setItem(A1,JSON.stringify(t)),R){const E=setTimeout(()=>{var B;try{(B=Ue.syncKanban)==null||B.call(Ue,t)}catch{}},2e3);return()=>clearTimeout(E)}},[t,R]);const we=k.useCallback(E=>{if(!f.trim())return;const B={id:`card - ${Date.now()} -${Math.random().toString(36).substr(2,9)} `,title:f.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e($=>({...$,columns:$.columns.map(te=>te.id===E?{...te,cards:[...te.cards,B]}:te)})),y(""),m(null),X("light")},[f,X]),ve=k.useCallback(E=>{e(B=>({...B,columns:B.columns.map($=>$.id===E.columnId?{...$,cards:$.cards.map(te=>te.id===E.id?E:te)}:$)}))},[]),Pe=k.useCallback((E,B)=>{j({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e($=>({...$,columns:$.columns.map(te=>te.id===E?{...te,cards:te.cards.filter(me=>me.id!==B)}:te)})),r(null),j(null),X("medium")},onCancel:()=>j(null)})},[X]),D=k.useCallback(()=>{o.trim()&&(e(E=>({...E,columns:[...E.columns,{id:`col - ${Date.now()} `,title:o.trim(),cards:[]}]})),l(""),a(!1),X("light"))},[o,X]),U=k.useCallback(E=>{if(!P.trim()){A(null);return}e(B=>({...B,columns:B.columns.map($=>$.id===E?{...$,title:P.trim()}:$)})),A(null)},[P]),H=k.useCallback(E=>{j({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(B=>({...B,columns:B.columns.filter($=>$.id!==E)})),j(null),X("medium")},onCancel:()=>j(null)})},[X]);return s.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[s.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),s.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${R?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:R?"Cloud Active":"Syncing"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),s.jsxs("button",{onClick:()=>a(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[s.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),s.jsxs("div",{ref:de,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[s.jsx(Te,{mode:"popLayout",children:t.columns.map(E=>s.jsx(aD,{col:E,dragState:N,spring:Ha,zoomLevel:c,renamingColId:_,setRenamingColId:A,renameTitle:P,setRenameTitle:b,renameColumn:U,deleteColumn:H,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:f,setNewCardTitle:y,addCard:we,handleCardPointerDown:se},E.id))}),s.jsx(G.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(!0),className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-lg hover:shadow-xl flex items-center justify-center text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-all",children:s.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),s.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:s.jsx(G.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Ha.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:Op.map((E,B)=>s.jsxs("button",{onClick:()=>{u(B),X("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${c===B?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[c===B&&s.jsx(G.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),s.jsx("span",{className:"relative z-10",children:E.label})]},B))})}),s.jsx(lD,{dragState:N,ghostX:z,ghostY:I,spring:Ha}),s.jsx(Te,{children:n&&s.jsx(dD,{card:n,onClose:()=>r(null),onUpdate:ve,onDelete:()=>Pe(n.columnId,n.id),setConfirmModal:j})}),s.jsx(Te,{children:w&&s.jsx(cD,{...w})}),Ze.createPortal(s.jsx(Te,{children:i&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{a(!1),l("")}}),s.jsxs(G.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Ha.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 tracking-tight",children:"Nova Lista"}),s.jsx("input",{autoFocus:!0,value:o,onChange:E=>l(E.target.value),onKeyDown:E=>{E.key==="Enter"&&D(),E.key==="Escape"&&(a(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-6"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{a(!1),l("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:D,disabled:!o.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Criar Lista"})]})]})]})}),document.body),Ze.createPortal(s.jsx(Te,{children:h&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{m(null),y("")}}),s.jsxs(G.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Ha.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2 tracking-tight",children:"Novo Carto"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:(re=t.columns.find(E=>E.id===h))==null?void 0:re.title}),s.jsx("textarea",{autoFocus:!0,value:f,onChange:E=>y(E.target.value),onKeyDown:E=>{E.key==="Enter"&&!E.shiftKey&&(E.preventDefault(),we(h)),E.key==="Escape"&&(m(null),y(""))},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-6",rows:3}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{m(null),y("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:()=>we(h),disabled:!f.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Adicionar"})]})]})]})}),document.body),s.jsx(Te,{children:L&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${L.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":L.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${L.type==="error"?"bg-white animate-pulse":L.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:L.message})]}),document.body)})]})}const aD=Dn.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:a,renameTitle:o,setRenameTitle:l,renameColumn:c,deleteColumn:u,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:f,setNewCardTitle:y,addCard:_,handleCardPointerDown:A})=>{var b,w;const P=((b=e.target)==null?void 0:b.colId)===t.id;return s.jsxs(G.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`flex-shrink-0 flex flex-col snap-center ${Op[r].width} max-h-full rounded-[2rem] md:rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/60 dark:border-white/[0.06] shadow-xl shadow-black/[0.03] dark:shadow-black/20 transition-all duration-300 ${P?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[s.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?s.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:o,onChange:j=>l(j.target.value),onBlur:()=>c(t.id),onKeyDown:j=>{j.key==="Enter"&&c(t.id),j.key==="Escape"&&a(null)}}):s.jsx("h3",{onClick:()=>{a(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),s.jsx("button",{onClick:()=>u(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[s.jsx(Te,{mode:"popLayout",children:t.cards.map((j,R)=>s.jsx(oD,{card:j,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:A},j.id))}),s.jsx(Te,{mode:"sync",children:e.isDragging&&P&&e.active&&(()=>{const j=t.cards.filter(R=>R.id!==e.active.id);return e.target.index>=j.length})()&&s.jsx(G.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((w=e.active.rect)==null?void 0:w.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),s.jsx("button",{onClick:()=>{m(t.id),y("")},className:"w-full min-h-[48px] py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-[0.98] touch-manipulation",children:"+ Carto"})]})]})}),oD=Dn.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:a})=>{var c,u,h,m;const o=((c=n.active)==null?void 0:c.id)===t.id,l=((u=n.target)==null?void 0:u.colId)===e;return n.isDragging&&l&&n.active,s.jsx(Dn.Fragment,{children:!o&&s.jsxs(G.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:f=>a(f,t,e),className:`relative bg-white dark:bg-zinc-900 border border-zinc-200/60 dark:border-white/[0.06] rounded-2xl ${Op[i].cardPadding} shadow-sm hover:shadow-xl dark:shadow-black/10 cursor-grab active:cursor-grabbing touch-none select-none hover:border-zinc-300 dark:hover:border-white/10 group/card`,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((f,y)=>s.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:f.color}},y))}),s.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((m=t.checklists)==null?void 0:m.length)>0&&s.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((f,y)=>f+y.items.filter(_=>_.done).length,0),"/",t.checklists.reduce((f,y)=>f+y.items.length,0)]})]})]})})}),lD=Dn.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return s.jsx(Te,{children:t.isDragging&&t.active&&s.jsx(G.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),s.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&s.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((a,o)=>s.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:a.color}},o))}),s.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function cD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return Zt(!0),s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function dD({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var j;Zt(!0);const[a,o]=k.useState(t),[l,c]=k.useState(!1),[u,h]=k.useState(""),m=k.useRef(!0),f=k.useRef(null);k.useEffect(()=>{if(m.current){m.current=!1;return}return f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{n(a)},800),()=>{f.current&&clearTimeout(f.current)}},[a]);const y=R=>{var L;const O=(L=a.labels)==null?void 0:L.find(v=>v.id===R.id);o(v=>({...v,labels:O?v.labels.filter(x=>x.id!==R.id):[...v.labels||[],R]}))},_=()=>{u.trim()&&(o(R=>({...R,checklists:[...R.checklists||[],{id:Date.now(),title:u.trim(),items:[]}]})),h(""),c(!1))},A=R=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{o(O=>({...O,checklists:O.checklists.filter(L=>L.id!==R)})),i(null)},onCancel:()=>i(null)})},P=(R,O)=>{o(L=>({...L,checklists:L.checklists.map(v=>v.id===R?{...v,items:v.items.map(x=>x.id===O?{...x,done:!x.done}:x)}:v)}))},b=(R,O)=>{O.trim()&&o(L=>({...L,checklists:L.checklists.map(v=>v.id===R?{...v,items:[...v.items,{id:Date.now(),text:O.trim(),done:!1}]}:v)}))},w=(R,O)=>{o(L=>({...L,checklists:L.checklists.map(v=>v.id===R?{...v,items:v.items.filter(x=>x.id!==O)}:v)}))};return Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md"}),s.jsxs(G.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:400,damping:35},className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-3xl shadow-2xl max-h-[90vh] md:max-h-[85vh] flex flex-col overflow-hidden border-t md:border border-zinc-200/50 dark:border-white/10",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"w-10 h-1 bg-zinc-300 dark:bg-zinc-700 rounded-full mx-auto mb-4 md:hidden"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:iD.map(R=>{var O;return s.jsx("button",{onClick:()=>y(R),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(O=a.labels)!=null&&O.find(L=>L.id===R.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:R.color}},R.id)})}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white flex items-center justify-center transition-all hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-95",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("input",{className:"w-full text-xl md:text-2xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:a.title,onChange:R=>o(O=>({...O,title:R.target.value})),placeholder:"Ttulo do carto"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 md:p-6 space-y-6 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),s.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:a.description||"",onChange:R=>o(O=>({...O,description:R.target.value}))})]}),(j=a.checklists)==null?void 0:j.map(R=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:R.title}),s.jsx("button",{onClick:()=>A(R.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),s.jsx(Bd,{axis:"y",values:R.items,onReorder:O=>{o(L=>({...L,checklists:L.checklists.map(v=>v.id===R.id?{...v,items:O}:v)}))},className:"space-y-2",children:R.items.map(O=>s.jsxs(Ud,{value:O,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[s.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),s.jsx("button",{onClick:()=>P(R.id,O.id),className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${O.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:O.done&&s.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`flex-1 text-sm ${O.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:O.text}),s.jsx("button",{onClick:()=>w(R.id,O.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},O.id))}),s.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:O=>{O.key==="Enter"&&O.target.value.trim()&&(b(R.id,O.target.value),O.target.value="")}})]},R.id)),l?s.jsxs(G.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[s.jsx("input",{autoFocus:!0,value:u,onChange:R=>h(R.target.value),onKeyDown:R=>{R.key==="Enter"&&_(),R.key==="Escape"&&c(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:_,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),s.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):s.jsx("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"+ Nova Checklist"})]}),s.jsx("div",{className:"shrink-0 p-5 md:p-6 border-t border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-zinc-900/50",children:s.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20 active:scale-[0.98]",children:"Excluir Carto"})})]})]}),document.body)}const R1="padoca_suppliers";function _h(){return Zt(!0),null}function uD({message:t,type:e,onClose:n}){return k.useEffect(()=>{const r=setTimeout(n,3e3);return()=>clearTimeout(r)},[n]),s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${e==="error"?"bg-rose-500/90 border-rose-400/20 text-white":e==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${e==="error"?"bg-white animate-pulse":e==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t})]})}function hD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return Zt(!0),s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-start md:items-center justify-center p-4 pt-24 md:pt-20",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function mD(){var V,ee,ce,ge,le;const[t,e]=k.useState(()=>{try{const F=localStorage.getItem(R1);return F?JSON.parse(F):[]}catch{return[]}}),[n,r]=k.useState(!1),[i,a]=k.useState(null),[o,l]=k.useState(null),[c,u]=k.useState(""),[h,m]=k.useState(null),[f,y]=k.useState(null),[_,A]=k.useState("synced"),[P,b]=k.useState(!1),[w,j]=k.useState("suppliers"),R=k.useRef(null),[O,L]=k.useState(null),[v,x]=k.useState({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),N=[{id:"cotacao",label:"Cotao",icon:""},{id:"catalogo",label:"Catlogo",icon:""},{id:"contrato",label:"Contrato",icon:""},{id:"tecnico",label:"Tcnico",icon:""},{id:"outros",label:"Outros",icon:""}],[C,z]=k.useState(!1),[I,T]=k.useState(null),[pe,de]=k.useState(null),[ye,ke]=k.useState("cotacao"),X=k.useRef(null),[ae,se]=k.useState([]),[we,ve]=k.useState("");k.useEffect(()=>{(async()=>{try{const Y=await Ue.getInventory();Y!=null&&Y.items&&se(Y.items)}catch(Y){console.error("Error loading inventory:",Y)}})()},[]),k.useEffect(()=>{(async()=>{try{const Y=await Ue.getSuppliers();Y!=null&&Y.suppliers&&e(Y.suppliers)}catch(Y){console.error("Error loading suppliers:",Y)}finally{b(!0)}})()},[]),k.useEffect(()=>{if(localStorage.setItem(R1,JSON.stringify(t)),P){A("syncing");const F=setTimeout(async()=>{try{const Y=await Ue.syncSuppliers(t);A(Y?"synced":"error")}catch{A("error")}},1500);return()=>clearTimeout(F)}},[t,P]);const Pe=k.useCallback((F,Y="success")=>{y({message:F,type:Y})},[]),D=k.useMemo(()=>{if(!c.trim())return t;const F=c.toLowerCase();return t.filter(Y=>{var je,M,Q;return((je=Y.name)==null?void 0:je.toLowerCase().includes(F))||((M=Y.company)==null?void 0:M.toLowerCase().includes(F))||((Q=Y.email)==null?void 0:Q.toLowerCase().includes(F))})},[t,c]),U=k.useMemo(()=>{if(!we.trim())return ae.slice(0,10);const F=we.toLowerCase();return ae.filter(Y=>{var je;return(je=Y.name)==null?void 0:je.toLowerCase().includes(F)}).slice(0,10)},[ae,we]),H=()=>{x({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),a(null),r(!0)},re=F=>{x({name:F.name||"",company:F.company||"",email:F.email||"",phone:F.phone||"",whatsapp:F.whatsapp||"",address:F.address||"",notes:F.notes||"",linkedItems:F.linkedItems||[],documents:F.documents||[]}),a(F),l(null),r(!0)},E=()=>{if(!v.name.trim()){Pe("Nome  obrigatrio","error");return}if(i)e(F=>F.map(Y=>Y.id===i.id?{...Y,...v,updatedAt:new Date().toISOString()}:Y)),Pe("Fornecedor atualizado!");else{const F={id:Date.now().toString(),...v,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(Y=>[F,...Y]),Pe("Fornecedor adicionado!")}r(!1),a(null)},B=F=>{m({title:"Excluir Fornecedor",message:`Deseja excluir "${F.name}"? Esta ao no pode ser desfeita.`,type:"danger",onConfirm:()=>{e(Y=>Y.filter(je=>je.id!==F.id)),l(null),m(null),Pe("Fornecedor excludo")},onCancel:()=>m(null)})},$=F=>{v.linkedItems.find(Y=>Y.itemId===F.id)||(x(Y=>({...Y,linkedItems:[...Y.linkedItems,{itemId:F.id,itemName:F.name}]})),ve(""))},te=F=>{x(Y=>({...Y,linkedItems:Y.linkedItems.filter(je=>je.itemId!==F)}))},me=F=>{if(F===0)return"0 B";const Y=1024,je=["B","KB","MB","GB"],M=Math.floor(Math.log(F)/Math.log(Y));return parseFloat((F/Math.pow(Y,M)).toFixed(1))+" "+je[M]},he=F=>F.startsWith("image/")?"":F==="application/pdf"?"":F.includes("spreadsheet")||F.includes("excel")?"":F.includes("document")||F.includes("word")?"":"",be=k.useCallback(F=>{const je=["image/jpeg","image/png","image/webp","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];Array.from(F).forEach(M=>{if(M.size>5242880){Pe(`${M.name} excede 5MB`,"error");return}if(!je.includes(M.type)&&!M.type.startsWith("image/")){Pe("Formato no suportado","error");return}T(M.name);const Q=new FileReader;Q.onload=q=>{const ne={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:M.name,type:M.type,size:M.size,dataUrl:q.target.result,uploadedAt:new Date().toISOString(),category:ye};x(ze=>({...ze,documents:[...ze.documents,ne]})),T(null),Pe("Documento anexado!")},Q.onerror=()=>{T(null),Pe("Erro ao ler arquivo","error")},Q.readAsDataURL(M)})},[ye,Pe]),et=k.useCallback(F=>{F.preventDefault(),F.stopPropagation(),z(!0)},[]),De=k.useCallback(F=>{F.preventDefault(),F.stopPropagation(),z(!1)},[]),Be=k.useCallback(F=>{F.preventDefault(),F.stopPropagation(),z(!1);const Y=F.dataTransfer.files;Y.length>0&&be(Y)},[be]),lt=F=>{x(Y=>({...Y,documents:Y.documents.filter(je=>je.id!==F)})),Pe("Documento removido")},Ee=F=>{const Y=document.createElement("a");Y.href=F.dataUrl,Y.download=F.name,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)},He=F=>{window.open(`tel:${F}`,"_self")},qt=F=>{window.open(`mailto:${F}`,"_self")},zt=F=>{const Y=F.replace(/\D/g,"");window.open(`https://wa.me/${Y}`,"_blank")};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-violet-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-violet-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Fornecedores"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${_==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":_==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${_==="syncing"?"bg-amber-500":_==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:_==="syncing"?"Syncing":_==="error"?"Error":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto de fornecedores e contatos"})]}),s.jsxs("button",{onClick:H,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Fornecedor"]})]}),s.jsx("section",{className:"relative z-10",children:s.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800/50 p-1 rounded-xl inline-flex",children:[s.jsx("button",{onClick:()=>j("suppliers"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${w==="suppliers"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Fornecedores"}),s.jsx("button",{onClick:()=>j("quotes"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${w==="quotes"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Oramentos"})]})}),w==="suppliers"&&s.jsx("section",{className:"relative z-10",children:s.jsx("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:c,onChange:F=>u(F.target.value)})]})})}),w==="suppliers"&&s.jsx("section",{className:"relative z-10",children:D.length===0?s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum fornecedor"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione seu primeiro fornecedor para comear"}),s.jsx("button",{onClick:H,className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Adicionar Fornecedor"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:D.map(F=>{var Y,je,M;return s.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},onClick:()=>l(F),className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-violet-500/25",children:((je=(Y=F.name)==null?void 0:Y.charAt(0))==null?void 0:je.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:F.name}),F.company&&s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:F.company})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[F.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"truncate",children:F.phone})]}),F.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"truncate",children:F.email})]})]}),((M=F.linkedItems)==null?void 0:M.length)>0&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[s.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),s.jsxs("span",{className:"text-xs font-bold text-violet-600 dark:text-violet-400",children:[F.linkedItems.length," ",F.linkedItems.length===1?"item":"itens"]})]})]},F.id)})})}),w==="quotes"&&(()=>{const F=t.filter(Y=>(Y.documents||[]).some(je=>je.category==="cotacao"));return s.jsxs("section",{className:"relative z-10",children:[s.jsx("input",{ref:R,type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:Y=>{var je;if((je=Y.target.files)!=null&&je.length&&O){const M=Y.target.files[0];if(M.size>5*1024*1024){Pe("Arquivo muito grande (mx 5MB)","error");return}const Q=new FileReader;Q.onload=q=>{const ne={id:`doc_${Date.now()}`,name:M.name,type:M.type,size:M.size,dataUrl:q.target.result,uploadedAt:new Date().toISOString(),category:"cotacao"};e(ze=>ze.map(_e=>_e.id===O?{..._e,documents:[..._e.documents||[],ne]}:_e)),Pe("Cotao adicionada"),L(null)},Q.readAsDataURL(M)}Y.target.value=""}}),F.length===0?s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center shadow-lg",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-500/10 dark:to-orange-500/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma cotao"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione cotaes aos seus fornecedores"}),s.jsx("button",{onClick:()=>j("suppliers"),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Ver Fornecedores"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:F.map(Y=>{var M,Q;const je=(Y.documents||[]).filter(q=>q.category==="cotacao");return s.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-amber-500/25",children:((Q=(M=Y.name)==null?void 0:M.charAt(0))==null?void 0:Q.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:Y.name}),Y.company&&s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:Y.company})]}),s.jsx("button",{onClick:()=>{var q;L(Y.id),(q=R.current)==null||q.click()},className:"w-10 h-10 rounded-xl bg-amber-50 dark:bg-amber-500/10 flex items-center justify-center text-amber-500 hover:bg-amber-100 dark:hover:bg-amber-500/20 transition-colors touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-amber-50 dark:bg-amber-500/10 rounded-xl border border-amber-100 dark:border-amber-500/20 mb-4",children:[s.jsx("svg",{className:"w-4 h-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:[je.length," ",je.length===1?"cotao":"cotaes"]})]}),s.jsx("div",{className:"space-y-2",children:je.map(q=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl group hover:bg-zinc-100 dark:hover:bg-zinc-800/50 transition-colors",children:[q.type.startsWith("image/")?s.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 shadow-sm",style:{backgroundImage:`url(${q.dataUrl})`}}):s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${q.type==="application/pdf"?"bg-red-100 dark:bg-red-500/20":"bg-blue-100 dark:bg-blue-500/20"}`,children:q.type==="application/pdf"?s.jsx("svg",{className:"w-5 h-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4z"})}):s.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate",children:q.name}),s.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[me(q.size),"  ",new Date(q.uploadedAt).toLocaleDateString("pt-BR")]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>Ee(q),className:"w-8 h-8 flex items-center justify-center rounded-lg text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-colors touch-manipulation",title:"Baixar",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsx("button",{onClick:()=>{e(ne=>ne.map(ze=>ze.id===Y.id?{...ze,documents:ze.documents.filter(_e=>_e.id!==q.id)}:ze)),Pe("Cotao removida")},className:"w-8 h-8 flex items-center justify-center rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors touch-manipulation",title:"Remover",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},q.id))})]},Y.id)})})]})})(),Ze.createPortal(s.jsx(Te,{children:n&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(_h,{}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>r(!1)}),s.jsxs(G.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col",style:{maxHeight:"calc(100vh - 100px)"},children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 px-6 py-5 border-b border-zinc-100 dark:border-white/5 flex items-center justify-between z-10 shrink-0",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:i?"Editar Fornecedor":"Novo Fornecedor"}),s.jsx("button",{onClick:()=>r(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto flex-1",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Informaes"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome do fornecedor",value:v.name,onChange:F=>x(Y=>({...Y,name:F.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Empresa"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome da empresa",value:v.company,onChange:F=>x(Y=>({...Y,company:F.target.value}))})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Contato"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Telefone"}),s.jsx("input",{type:"tel",inputMode:"tel",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"(00) 00000-0000",value:v.phone,onChange:F=>x(Y=>({...Y,phone:F.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Email"}),s.jsx("input",{type:"email",inputMode:"email",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"email@exemplo.com",value:v.email,onChange:F=>x(Y=>({...Y,email:F.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Endereo"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Endereo completo",value:v.address,onChange:F=>x(Y=>({...Y,address:F.target.value}))})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Itens Vinculados"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Buscar item do estoque...",value:we,onChange:F=>ve(F.target.value)}),we&&U.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-xl max-h-40 overflow-y-auto z-20",children:U.map(F=>s.jsxs("button",{onClick:()=>$(F),className:"w-full px-4 py-3 text-left text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors flex items-center justify-between",children:[s.jsx("span",{children:F.name}),s.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]},F.id))})]}),v.linkedItems.length>0&&s.jsx("div",{className:"space-y-2",children:v.linkedItems.map(F=>s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[s.jsx("span",{className:"text-sm font-medium text-violet-700 dark:text-violet-300",children:F.itemName}),s.jsx("button",{onClick:()=>te(F.itemId),className:"w-8 h-8 flex items-center justify-center rounded-lg text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},F.itemId))})]}),s.jsxs("div",{className:"pt-5 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("input",{ref:X,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:F=>be(F.target.files)}),((V=v.documents)==null?void 0:V.length)>0&&s.jsx("div",{className:"mb-4 space-y-3",children:v.documents.map(F=>{const Y=F.type.startsWith("image/");return s.jsxs("div",{className:"flex items-center gap-3",children:[Y?s.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 cursor-pointer",style:{backgroundImage:`url(${F.dataUrl})`},onClick:()=>de(F)}):s.jsx("div",{className:"w-10 h-10 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center shrink-0 text-zinc-400",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-zinc-900 dark:text-white truncate",children:F.name}),s.jsx("p",{className:"text-xs text-zinc-400",children:me(F.size)})]}),s.jsx("button",{type:"button",onClick:()=>lt(F.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-red-500 transition-colors touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},F.id)})}),s.jsxs("button",{type:"button",onDragOver:et,onDragLeave:De,onDrop:Be,onClick:()=>{var F;return(F=X.current)==null?void 0:F.click()},disabled:!!I,className:"flex items-center gap-2 text-blue-500 hover:text-blue-600 transition-colors touch-manipulation",children:[I?s.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),s.jsx("span",{className:"text-sm font-medium",children:I?"Enviando...":"Anexar arquivo"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Observaes"}),s.jsx("textarea",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all resize-none",rows:3,placeholder:"Notas adicionais...",value:v.notes,onChange:F=>x(Y=>({...Y,notes:F.target.value}))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3 shrink-0",children:[s.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),s.jsx("button",{onClick:E,className:"flex-[2] py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg shadow-zinc-900/10 hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:i?"Salvar":"Adicionar"})]})]})]})}),document.body),Ze.createPortal(s.jsx(Te,{children:o&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(_h,{}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>l(null)}),s.jsxs(G.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col overflow-hidden",style:{maxHeight:"calc(100vh - 100px)"},children:[s.jsxs("div",{className:"relative px-6 py-8 text-center border-b border-zinc-100 dark:border-white/5",children:[s.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-xl shadow-violet-500/30 mx-auto mb-4",children:((ce=(ee=o.name)==null?void 0:ee.charAt(0))==null?void 0:ce.toUpperCase())||"?"}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-1",children:o.name}),o.company&&s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:o.company})]}),s.jsx("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-white/5",children:s.jsxs("div",{className:"flex gap-3",children:[o.phone&&s.jsxs("button",{onClick:()=>He(o.phone),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Ligar"})]}),o.email&&s.jsxs("button",{onClick:()=>qt(o.email),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Email"})]}),o.whatsapp&&s.jsxs("button",{onClick:()=>zt(o.whatsapp),className:"flex-1 py-4 px-4 bg-emerald-50 dark:bg-emerald-500/10 rounded-2xl flex flex-col items-center gap-2 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),s.jsx("span",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"WhatsApp"})]})]})}),s.jsxs("div",{className:"px-6 py-5 space-y-4",children:[o.address&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Endereo"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:o.address})]}),((ge=o.linkedItems)==null?void 0:ge.length)>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Itens Fornecidos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.linkedItems.map(F=>s.jsx("span",{className:"px-3 py-1.5 bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 rounded-lg text-xs font-bold",children:F.itemName},F.itemId))})]}),((le=o.documents)==null?void 0:le.length)>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Documentos"}),s.jsx("div",{className:"space-y-2",children:o.documents.map(F=>{const Y=N.find(je=>je.id===F.category);return s.jsxs("div",{onClick:()=>Ee(F),className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all touch-manipulation active:scale-[0.98]",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-900/30 dark:to-indigo-900/30 flex items-center justify-center text-xl shrink-0",children:he(F.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate mb-0.5",children:F.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] text-zinc-400",children:me(F.size)}),Y&&s.jsxs("span",{className:"text-[10px] font-bold text-violet-500",children:[Y.icon," ",Y.label]})]})]}),s.jsx("svg",{className:"w-5 h-5 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]},F.id)})})]}),o.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:o.notes})]})]}),s.jsxs("div",{className:"px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[s.jsx("button",{onClick:()=>re(o),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:"Editar"}),s.jsx("button",{onClick:()=>B(o),className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-all active:scale-[0.98] touch-manipulation",children:"Excluir"})]})]})]})}),document.body),s.jsx(Te,{children:h&&s.jsx(hD,{...h})}),Ze.createPortal(s.jsx(Te,{children:pe&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] flex items-center justify-center bg-black/95 backdrop-blur-3xl",onClick:()=>de(null),children:[s.jsx(_h,{}),s.jsxs(G.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"absolute top-0 left-0 right-0 h-16 flex items-center justify-between px-6 bg-gradient-to-b from-black/50 to-transparent z-20",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center",children:pe.type.startsWith("image/")?s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}):s.jsx("svg",{className:"w-5 h-5 text-red-400",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold text-white truncate max-w-[200px] md:max-w-none",children:pe.name}),s.jsx("p",{className:"text-xs text-white/50",children:me(pe.size)})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:F=>{F.stopPropagation(),Ee(pe)},className:"px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-semibold flex items-center gap-2 transition-all touch-manipulation",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),s.jsx("span",{className:"hidden md:inline",children:"Download"})]}),s.jsx("button",{onClick:()=>de(null),className:"w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-all touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsx(G.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative max-w-5xl max-h-[85vh] w-full mx-4 flex items-center justify-center",onClick:F=>F.stopPropagation(),children:pe.type.startsWith("image/")?s.jsx("img",{src:pe.dataUrl,alt:pe.name,className:"max-w-full max-h-[85vh] object-contain rounded-2xl shadow-2xl ring-1 ring-white/10"}):pe.type==="application/pdf"?s.jsx("div",{className:"w-full h-[85vh] bg-white rounded-2xl shadow-2xl overflow-hidden",children:s.jsx("iframe",{src:pe.dataUrl,title:pe.name,className:"w-full h-full"})}):s.jsxs("div",{className:"bg-zinc-900 rounded-3xl p-12 text-center max-w-md",children:[s.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white/10 flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-white/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),s.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:pe.name}),s.jsx("p",{className:"text-sm text-white/50 mb-6",children:"Este tipo de arquivo no pode ser visualizado diretamente."}),s.jsx("button",{onClick:F=>{F.stopPropagation(),Ee(pe)},className:"px-8 py-4 bg-white text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wider hover:scale-105 active:scale-95 transition-all",children:"Baixar Arquivo"})]})}),s.jsx(G.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-xs text-white/30",children:"Pressione ESC ou clique fora para fechar"})]})}),document.body),s.jsx(Te,{children:f&&s.jsx(uD,{...f,onClose:()=>y(null)})})]})}const tN={type:"spring",stiffness:400,damping:30},fD=["Ingredientes","Embalagens","Utenslios","Produtos de Limpeza","Outros"],pD={Ingredientes:["Laticnios","Embutidos","Farinceos","Temperos","Vegetais","Carnes","Molhos","Queijos","leos","Outros"],Embalagens:["Caixas","Sacolas","Papis","Plsticos","Outros"],Utenslios:["Cozinha","Mesa","Limpeza","Outros"],"Produtos de Limpeza":["Detergentes","Desinfetantes","Acessrios","Outros"],Outros:["Geral"]};function gD(){const t=Hj(),e=k.useMemo(()=>Array.isArray(t)?t.map(z=>{var I;return{id:z.id,name:z.name,sku:(I=z.id)==null?void 0:I.toString(),category:z.category||"Outros",subcategory:z.subcategory||"",supplier:z.supplierName||"",supplierId:z.supplierId,unit:z.unit||"un",unitPrice:z.pricePerUnit||0,currentStock:(Number(z.packageQuantity)||0)*(Number(z.packageCount)||1),packageQuantity:z.packageQuantity,packageCount:z.packageCount,minStock:z.minStock||0,maxStock:z.maxStock||0,notes:"",createdAt:z.createdAt,updatedAt:z.createdAt,purchaseDate:z.purchaseDate}}):[],[t]),[n,r]=k.useState(fD),[i,a]=k.useState([]),[o,l]=k.useState(!1),[c,u]=k.useState(""),[h,m]=k.useState("all"),[f,y]=k.useState("all"),[_,A]=k.useState("recent"),[P,b]=k.useState(null),[w,j]=k.useState(null),[R,O]=k.useState(null),L=k.useRef(null),v=k.useCallback((z,I="info")=>{L.current&&clearTimeout(L.current),O({message:z,type:I}),L.current=setTimeout(()=>O(null),3e3)},[]);k.useEffect(()=>{(async()=>{try{const I=await Ue.getSuppliers();I!=null&&I.suppliers&&a(I.suppliers)}catch(I){console.warn("Products cloud load failed",I)}finally{l(!0)}})()},[]);const x=k.useMemo(()=>{let z=[...e];if(h!=="all"&&(z=z.filter(I=>I.category===h)),f!=="all"&&(z=z.filter(I=>I.subcategory===f)),c.trim()){const I=c.toLowerCase();z=z.filter(T=>{var pe,de,ye;return((pe=T.name)==null?void 0:pe.toLowerCase().includes(I))||((de=T.supplier)==null?void 0:de.toLowerCase().includes(I))||((ye=T.sku)==null?void 0:ye.toLowerCase().includes(I))})}switch(_){case"name":z.sort((I,T)=>(I.name||"").localeCompare(T.name||""));break;case"quantity":z.sort((I,T)=>(T.currentStock||0)-(I.currentStock||0));break;case"price":z.sort((I,T)=>(T.unitPrice||0)-(I.unitPrice||0));break;case"recent":default:z.sort((I,T)=>new Date(T.updatedAt||T.createdAt||0)-new Date(I.updatedAt||I.createdAt||0))}return z},[e,h,f,c,_]),N=k.useMemo(()=>h==="all"?[...new Set(e.map(z=>z.subcategory).filter(Boolean))]:pD[h]||[],[h,e]),C=k.useMemo(()=>{const z=e.length,I=e.reduce((de,ye)=>de+(ye.currentStock||0)*(ye.unitPrice||0),0),T=e.filter(de=>de.minStock&&de.currentStock<de.minStock).length,pe=[...new Set(e.map(de=>de.category).filter(Boolean))].length;return{totalProducts:z,totalValue:I,lowStock:T,categories:pe}},[e]);return s.jsxs("div",{className:"min-h-screen pb-24 md:pb-8",children:[s.jsxs("header",{className:"mb-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Produtos"}),s.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${o?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${o?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:o?"Synced":"Syncing"})]})]}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:"Visualizao sincronizada com Estoque"})]}),s.jsxs("a",{href:"#estoque",onClick:z=>{z.preventDefault(),v("Use a pgina de Estoque para adicionar itens","info")},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 rounded-2xl text-xs font-bold uppercase tracking-widest border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all flex items-center justify-center gap-3",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"Sincronizado com Estoque"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Total Produtos"}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tabular-nums",children:C.totalProducts})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Valor em Estoque"}),s.jsxs("p",{className:"text-2xl md:text-3xl font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:["R$ ",C.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Estoque Baixo"}),s.jsx("p",{className:`text-2xl md:text-3xl font-bold tabular-nums ${C.lowStock>0?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:C.lowStock})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Categorias"}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tabular-nums",children:C.categories})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:c,onChange:z=>u(z.target.value),placeholder:"Buscar produtos...",className:"w-full pl-12 pr-4 py-4 bg-white dark:bg-zinc-900 rounded-2xl text-sm font-medium outline-none border border-zinc-200/50 dark:border-white/5 focus:ring-2 focus:ring-zinc-500/20 transition-all"})]}),s.jsxs("select",{value:_,onChange:z=>A(z.target.value),className:"px-4 py-4 bg-white dark:bg-zinc-900 rounded-2xl text-sm font-medium outline-none border border-zinc-200/50 dark:border-white/5 focus:ring-2 focus:ring-zinc-500/20 appearance-none cursor-pointer min-w-[140px]",children:[s.jsx("option",{value:"recent",children:"Mais Recentes"}),s.jsx("option",{value:"name",children:"Nome A-Z"}),s.jsx("option",{value:"quantity",children:"Maior Estoque"}),s.jsx("option",{value:"price",children:"Maior Preo"})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto scrollbar-hide pb-2",children:[s.jsx("button",{onClick:()=>{m("all"),y("all")},className:`flex-shrink-0 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${h==="all"?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),n.map(z=>s.jsx("button",{onClick:()=>{m(z),y("all")},className:`flex-shrink-0 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${h===z?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:z},z))]}),N.length>0&&s.jsxs("div",{className:"flex gap-2 mt-2 overflow-x-auto scrollbar-hide pb-2",children:[s.jsx("button",{onClick:()=>y("all"),className:`flex-shrink-0 px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${f==="all"?"bg-indigo-500 text-white":"bg-zinc-50 dark:bg-zinc-800/50 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:"Todas"}),N.map(z=>s.jsx("button",{onClick:()=>y(z),className:`flex-shrink-0 px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${f===z?"bg-indigo-500 text-white":"bg-zinc-50 dark:bg-zinc-800/50 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:z},z))]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(z=>{var I;return s.jsxs("div",{onClick:()=>b(z),className:"bg-white dark:bg-zinc-900 rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 hover:shadow-xl hover:border-zinc-300 dark:hover:border-white/10 transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[z.category&&s.jsx("div",{className:"inline-block px-3 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:z.category}),z.subcategory&&s.jsx("div",{className:"inline-block px-3 py-1 bg-indigo-100 dark:bg-indigo-500/20 rounded-full text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:z.subcategory})]}),s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:z.name}),z.sku&&s.jsxs("p",{className:"text-xs text-zinc-400 mb-3 font-mono",children:["SKU: ",z.sku]}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Estoque"}),s.jsxs("p",{className:`text-xl font-bold tabular-nums ${z.minStock&&z.currentStock<z.minStock?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:[z.currentStock||0,s.jsx("span",{className:"text-xs font-medium text-zinc-400 ml-1",children:z.unit||"un"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Preo Unit."}),s.jsxs("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:["R$ ",(z.unitPrice||0).toFixed(2)]})]})]}),z.supplier&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),z.supplier]}),((I=z.history)==null?void 0:I.length)>0&&s.jsx("div",{className:"mt-3 pt-3 border-t border-zinc-100 dark:border-zinc-800",children:s.jsxs("p",{className:"text-[10px] text-zinc-400",children:["ltima movimentao: ",new Date(z.history[z.history.length-1].date).toLocaleDateString("pt-BR")]})})]},z.id)})}),x.length===0&&s.jsxs(G.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:c?"Nenhum produto encontrado":"Nenhum produto cadastrado"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:c?"Tente uma busca diferente":"Adicione itens no Estoque para v-los aqui"})]}),s.jsx(Te,{children:P&&s.jsx(xD,{product:P,onClose:()=>b(null),suppliers:i,readOnly:!0})}),s.jsx(Te,{children:w&&s.jsx(yD,{...w})}),s.jsx(Te,{children:R&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold",children:R.message})]}),document.body)})]})}function xD({product:t,onClose:e,onEdit:n,onDelete:r,onAddMovement:i,suppliers:a}){var A;Zt(!0);const[o,l]=k.useState("info"),[c,u]=k.useState("entry"),[h,m]=k.useState(""),[f,y]=k.useState(""),_=()=>{!h||parseFloat(h)<=0||(i({type:c,quantity:parseFloat(h),notes:f}),m(""),y(""),l("history"))};return Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md"}),s.jsxs(G.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:tN,className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-3xl shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border-t md:border border-zinc-200/50 dark:border-white/10",onClick:P=>P.stopPropagation(),children:[s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"w-10 h-1 bg-zinc-300 dark:bg-zinc-700 rounded-full mx-auto mb-4 md:hidden"}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[t.category&&s.jsx("div",{className:"inline-block px-3 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-full text-[10px] font-bold text-zinc-500 uppercase tracking-wider",children:t.category}),t.subcategory&&s.jsx("div",{className:"inline-block px-3 py-1 bg-indigo-100 dark:bg-indigo-500/20 rounded-full text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:t.subcategory})]}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:t.name}),t.sku&&s.jsxs("p",{className:"text-xs text-zinc-400 font-mono mt-1",children:["SKU: ",t.sku]})]}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Estoque"}),s.jsx("p",{className:`text-xl font-bold ${t.minStock&&t.currentStock<t.minStock?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:t.currentStock||0})]}),s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Preo Unit."}),s.jsxs("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:["R$ ",(t.unitPrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Valor Total"}),s.jsxs("p",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:["R$ ",((t.currentStock||0)*(t.unitPrice||0)).toFixed(2)]})]})]}),s.jsx("div",{className:"flex gap-1 mt-4 p-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl",children:[{id:"info",label:"Detalhes"},{id:"history",label:"Histrico"},{id:"movement",label:"Movimentar"}].map(P=>s.jsx("button",{onClick:()=>l(P.id),className:`flex-1 py-2.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${o===P.id?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400"}`,children:P.label},P.id))})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 md:p-6",children:[o==="info"&&s.jsxs("div",{className:"space-y-4",children:[t.supplier&&s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("svg",{className:"w-5 h-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Fornecedor"}),s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:t.supplier})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Estoque Mnimo"}),s.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:t.minStock||"-"})]}),s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Estoque Mximo"}),s.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:t.maxStock||"-"})]})]}),t.notes&&s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Observaes"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.notes})]}),s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Cadastrado em"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.createdAt?new Date(t.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"-"})]})]}),o==="history"&&s.jsx("div",{className:"space-y-2",children:((A=t.history)==null?void 0:A.length)>0?[...t.history].reverse().map((P,b)=>s.jsxs("div",{className:`p-4 rounded-xl border ${P.type==="entry"?"bg-emerald-50 dark:bg-emerald-500/10 border-emerald-200 dark:border-emerald-500/20":"bg-rose-50 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/20"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("span",{className:`text-xs font-bold uppercase ${P.type==="entry"?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:P.type==="entry"?"+ Entrada":"- Sada"}),s.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white mt-1",children:[P.quantity," ",t.unit||"un"]})]}),s.jsx("p",{className:"text-xs text-zinc-500",children:new Date(P.date).toLocaleDateString("pt-BR")})]}),P.notes&&s.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:P.notes})]},P.id||b)):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-zinc-400 text-sm",children:"Nenhuma movimentao registrada"})})}),o==="movement"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 p-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl",children:[s.jsx("button",{onClick:()=>u("entry"),className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${c==="entry"?"bg-emerald-500 text-white":"text-zinc-500"}`,children:"+ Entrada"}),s.jsx("button",{onClick:()=>u("exit"),className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${c==="exit"?"bg-rose-500 text-white":"text-zinc-500"}`,children:"- Sada"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Quantidade"}),s.jsx("input",{type:"number",inputMode:"decimal",value:h,onChange:P=>m(P.target.value),placeholder:"0",className:"w-full px-4 py-4 bg-zinc-50 dark:bg-zinc-800 rounded-2xl text-lg font-bold outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 text-center"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),s.jsx("input",{type:"text",value:f,onChange:P=>y(P.target.value),placeholder:"Ex: Compra fornecedor X",className:"w-full px-4 py-4 bg-zinc-50 dark:bg-zinc-800 rounded-2xl text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50"})]}),s.jsxs("button",{onClick:_,disabled:!h||parseFloat(h)<=0,className:`w-full py-4 rounded-2xl text-xs font-bold uppercase tracking-wider transition-all disabled:opacity-50 ${c==="entry"?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-rose-500 text-white hover:bg-rose-600"}`,children:["Registrar ",c==="entry"?"Entrada":"Sada"]})]})]}),s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[s.jsx("button",{onClick:n,className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Editar"}),s.jsx("button",{onClick:r,className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors",children:"Excluir"})]})]})]}),document.body)}function yD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return Zt(!0),Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10001] flex items-center justify-center p-6",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(G.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:tN,className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 text-center",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]}),document.body)}const vD="689278956648-4e3kpkefevvmu5k60mmtlu4j0vh64chg.apps.googleusercontent.com",bD="https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/gmail.send",wD="service_g2io60e",kD="template_at3fl3s",jD="0CObV7BKHDHwHMDxs",tc="padocainc@gmail.com",ND="Padoca Pizza",_D=3e4;class zD{constructor(){this.accessToken=null,this.tokenClient=null,this.isInitialized=!1,this.userEmail=null,this.gsiLoaded=!1,this.gapiLoaded=!1}async loadGSI(){return this.gsiLoaded?!0:new Promise((e,n)=>{var i;if((i=window.google)!=null&&i.accounts){this.gsiLoaded=!0,e(!0);return}const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{this.gsiLoaded=!0,console.log(" Google Identity Services loaded"),e(!0)},r.onerror=()=>n(new Error("Failed to load GSI")),document.head.appendChild(r)})}async loadGAPI(){return this.gapiLoaded?!0:new Promise((e,n)=>{var i;if((i=window.gapi)!=null&&i.client){this.gapiLoaded=!0,e(!0);return}const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.async=!0,r.defer=!0,r.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({}),this.gapiLoaded=!0,console.log(" GAPI client loaded"),e(!0)})},r.onerror=()=>n(new Error("Failed to load GAPI")),document.head.appendChild(r)})}async init(){if(this.isInitialized&&this.accessToken)return!0;try{await Promise.all([this.loadGSI(),this.loadGAPI()]);const e=localStorage.getItem("gmail_access_token"),n=localStorage.getItem("gmail_token_expiry");return e&&n&&Date.now()<parseInt(n)?(this.accessToken=e,this.userEmail=localStorage.getItem("gmail_user_email")||tc,window.gapi.client.setToken({access_token:e}),this.isInitialized=!0,console.log(" Gmail API initialized with stored token"),!0):(this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:vD,scope:bD,callback:r=>{r.access_token&&(this.accessToken=r.access_token,localStorage.setItem("gmail_access_token",r.access_token),localStorage.setItem("gmail_token_expiry",String(Date.now()+36e5)),window.gapi.client.setToken({access_token:r.access_token}),console.log(" New Gmail token obtained"))}}),this.isInitialized=!0,console.log(" Gmail API service initialized"),!0)}catch(e){return console.error(" Gmail API init failed:",e),!1}}async authorize(){return await this.init(),new Promise((e,n)=>{try{this.tokenClient.callback=async r=>{if(r.error){n(new Error(r.error));return}if(r.access_token){this.accessToken=r.access_token,localStorage.setItem("gmail_access_token",r.access_token),localStorage.setItem("gmail_token_expiry",String(Date.now()+36e5)),window.gapi.client.setToken({access_token:r.access_token});const i=await this.getUserProfile();i&&(this.userEmail=i.emailAddress,localStorage.setItem("gmail_user_email",i.emailAddress)),e({email:this.userEmail,connected:!0})}},this.accessToken&&window.google.accounts.oauth2.revoke(this.accessToken),this.tokenClient.requestAccessToken({prompt:"consent"})}catch(r){n(r)}})}isConnected(){return!!this.accessToken}getConnectedEmail(){return this.userEmail||tc}async getUserProfile(){if(!this.accessToken)return null;try{const e=await fetch("https://gmail.googleapis.com/gmail/v1/users/me/profile",{headers:{Authorization:`Bearer ${this.accessToken}`}});return e.ok?await e.json():null}catch(e){return console.error("Error getting profile:",e),null}}disconnect(){var e,n,r;this.accessToken&&((r=(n=(e=window.google)==null?void 0:e.accounts)==null?void 0:n.oauth2)==null||r.revoke(this.accessToken)),this.accessToken=null,this.userEmail=null,localStorage.removeItem("gmail_access_token"),localStorage.removeItem("gmail_token_expiry"),localStorage.removeItem("gmail_user_email")}async sendEmail({to:e,subject:n,body:r,supplierName:i}){if(console.log(" Enviando email para:",e),!e||!e.includes("@"))throw new Error("Email do destinatrio invlido");window.emailjs||await new Promise((u,h)=>{const m=document.createElement("script");m.src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js",m.onload=()=>{window.emailjs.init(jD),u()},m.onerror=h,document.head.appendChild(m)});const a=r.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'"),o=window.emailjs.send(wD,kD,{to_email:e,to_name:i||e.split("@")[0],from_name:ND,from_email:tc,subject:n,message:a,reply_to:tc}),l=new Promise((u,h)=>{setTimeout(()=>h(new Error("Timeout ao enviar email")),_D)}),c=await Promise.race([o,l]);return console.log(" Email enviado com sucesso!"),{success:!0,method:"emailjs",status:c.status}}async checkReplies(e,n){var r,i,a,o,l;if(!this.accessToken)return console.log(" Gmail no conectado, no  possvel verificar respostas"),[];try{const c=e.map(_=>`from:${_}`).join(" OR "),u=n.toISOString().split("T")[0].replace(/-/g,"/"),h=`(${c}) after:${u}`;console.log(" Buscando respostas:",h);const m=await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages?q=${encodeURIComponent(h)}&maxResults=20`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!m.ok)return m.status===401&&this.disconnect(),console.error("Gmail search failed:",m.status),[];const f=await m.json();if(!f.messages||f.messages.length===0)return console.log(" Nenhuma resposta encontrada"),[];console.log(` ${f.messages.length} mensagens encontradas`);const y=[];for(const _ of f.messages.slice(0,10)){const A=await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${_.id}?format=metadata&metadataHeaders=From&metadataHeaders=Subject&metadataHeaders=Date`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(A.ok){const P=await A.json(),b=((r=P.payload)==null?void 0:r.headers)||[],w=((i=b.find(v=>v.name.toLowerCase()==="from"))==null?void 0:i.value)||"",j=((a=b.find(v=>v.name.toLowerCase()==="subject"))==null?void 0:a.value)||"",R=((o=b.find(v=>v.name.toLowerCase()==="date"))==null?void 0:o.value)||"",L=((l=(w.match(/<(.+?)>/)||[null,w])[1])==null?void 0:l.toLowerCase())||w.toLowerCase();e.some(v=>L.includes(v.toLowerCase().split("@")[0]))&&y.push({id:_.id,supplierEmail:L,from:w,subject:j,date:new Date(R),snippet:P.snippet||""})}}return console.log(` ${y.length} respostas de fornecedores encontradas`),y}catch(c){return console.error(" Erro ao verificar respostas:",c),[]}}async getUnreadCount(){if(!this.accessToken)return 0;try{const e=await fetch("https://gmail.googleapis.com/gmail/v1/users/me/labels/UNREAD",{headers:{Authorization:`Bearer ${this.accessToken}`}});return e.ok&&(await e.json()).messagesUnread||0}catch{return 0}}async connect(){return await this.authorize()}}const Ai=new zD,nN="America/Edmonton",rN="en-CA",gr=(t,e={})=>{if(!t)return"";const n={timeZone:nN,year:"numeric",month:"short",day:"2-digit",...e};try{return new Date(t).toLocaleDateString(rN,n)}catch{return""}},CD=t=>{if(!t)return"";try{const e=new Date,n=new Date(t),r=e-n,i=Math.floor(r/6e4),a=Math.floor(r/36e5),o=Math.floor(r/864e5);return i<1?"agora":i<60?`${i} min atrs`:a<24?`${a}h atrs`:o<7?`${o} dias atrs`:gr(t)}catch{return""}},SD=t=>{if(!t)return"";try{return new Date(t).toLocaleTimeString(rN,{timeZone:nN,hour:"2-digit",minute:"2-digit"})}catch{return""}},D1="padoca_inventory_v2",M1="padoca_suppliers";function ED(){return Zt(!0),null}function TD(){var He,qt,zt;const[t,e]=k.useState([]),[n,r]=k.useState([]),[i,a]=k.useState("synced"),[o,l]=k.useState(!1),[c,u]=k.useState(!1),[h,m]=k.useState(""),[f,y]=k.useState(!1),[_,A]=k.useState([]),[P,b]=k.useState("pending"),[w,j]=k.useState(!1),[R,O]=k.useState(null),[L,v]=k.useState({to:"",subject:"",body:""}),[x,N]=k.useState([]),[C,z]=k.useState(!1),[I,T]=k.useState(null),[pe,de]=k.useState({quotedValue:"",expectedDelivery:""}),[ye,ke]=k.useState(null),X=k.useRef(null),ae=k.useCallback((V,ee="success")=>{X.current&&clearTimeout(X.current),ke({message:V,type:ee}),X.current=setTimeout(()=>ke(null),3500)},[]);k.useEffect(()=>{(async()=>{a("syncing");try{try{const ee=await Ue.getInventory();if(ee!=null&&ee.items&&Array.isArray(ee.items))e(ee.items);else{const ce=localStorage.getItem(D1);if(ce){const ge=JSON.parse(ce);e(Array.isArray(ge)?ge:[])}}}catch(ee){console.warn("Inventory load failed:",ee);const ce=localStorage.getItem(D1);if(ce){const ge=JSON.parse(ce);e(Array.isArray(ge)?ge:[])}}try{const ee=await Ue.getSuppliers();if(ee!=null&&ee.suppliers&&Array.isArray(ee.suppliers))r(ee.suppliers);else{const ce=localStorage.getItem(M1);if(ce){const ge=JSON.parse(ce),le=(ge==null?void 0:ge.suppliers)||ge;r(Array.isArray(le)?le:[])}}}catch(ee){console.warn("Suppliers load failed:",ee);const ce=localStorage.getItem(M1);if(ce){const ge=JSON.parse(ce),le=(ge==null?void 0:ge.suppliers)||ge;r(Array.isArray(le)?le:[])}}a("synced")}catch(ee){console.error("Error loading data:",ee),a("error")}finally{l(!0)}})();try{const ee=localStorage.getItem("padoca_sent_emails");if(ee){const ce=JSON.parse(ee);N(Array.isArray(ce)?ce:[])}}catch(ee){console.warn("Sent emails load failed:",ee)}},[]),k.useEffect(()=>{(async()=>{try{await Ai.init();const ee=Ai.isConnected();u(ee),m(Ai.getConnectedEmail()||"padocainc@gmail.com"),ee?console.log(" Gmail API connected:",Ai.getConnectedEmail()):console.log(" Gmail API not connected - replies won't be detected automatically")}catch(ee){console.warn("Gmail init failed:",ee),u(!1),m("padocainc@gmail.com")}})()},[]);const se=k.useRef(x);se.current=x,k.useEffect(()=>{if(!c)return;let V=!0;const ee=async()=>{if(!V)return;const le=se.current;if(le.length!==0)try{const F=le.filter(ne=>ne.status==="sent");if(F.length===0)return;const je=[...new Set(F.map(ne=>ne.to).filter(Boolean))],M=F.reduce((ne,ze)=>new Date(ze.sentAt)<new Date(ne.sentAt)?ze:ne),Q=new Date(M.sentAt),q=await Ai.checkReplies(je,Q);if(!V)return;if(q.length>0){A(q);const ne=le.map(ze=>q.some(Ke=>{var cn;return Ke.supplierEmail.toLowerCase()===((cn=ze.to)==null?void 0:cn.toLowerCase())})&&ze.status==="sent"?{...ze,status:"replied"}:ze);JSON.stringify(ne)!==JSON.stringify(le)&&(N(ne),localStorage.setItem("padoca_sent_emails",JSON.stringify(ne)),ae(" Nova resposta recebida!","success"))}}catch(F){console.warn("Error checking replies:",F)}},ce=setTimeout(ee,2e3),ge=setInterval(ee,3e4);return()=>{V=!1,clearTimeout(ce),clearInterval(ge)}},[c,ae]);const we=k.useRef(x);we.current=x,k.useEffect(()=>{if(t.length===0)return;const V=we.current;if(V.length===0||V.filter(le=>le.status==="confirmed").length===0)return;let ce=!1;const ge=V.map(le=>{var Y;return le.status!=="confirmed"||!((Y=le.itemIds)!=null&&Y.length)?le:le.itemIds.every(je=>{const M=t.find(ne=>ne.id===je);if(!M)return!0;const Q=(Number(M.packageQuantity)||0)*(Number(M.packageCount)||1),q=Number(M.minStock)||0;return Q>=q})?(ce=!0,{...le,status:"delivered",deliveredAt:new Date().toISOString()}):le});ce&&(N(ge),localStorage.setItem("padoca_sent_emails",JSON.stringify(ge)),ae(" Pedido entregue - estoque atualizado!","success"))},[t,ae]);const ve=V=>(Number(V.packageQuantity)||0)*(Number(V.packageCount)||1),Pe=V=>{const ee=ve(V),ce=Number(V.minStock)||0;return ce===0?"ok":ee<ce?"critical":ee<=ce*1.2?"warning":"ok"},D=k.useMemo(()=>{const V=new Set(x.filter(ge=>ge.status==="sent"||ge.status==="replied").map(ge=>ge.supplierId).filter(Boolean)),ee=t.filter(ge=>{const le=Pe(ge);return le==="critical"||le==="warning"}).map(ge=>({...ge,status:Pe(ge),totalQty:ve(ge)})),ce={};return ee.forEach(ge=>{const le=n.find(Y=>{var je;return(je=Y.linkedItems)==null?void 0:je.some(M=>M.itemId===ge.id)}),F=(le==null?void 0:le.id)||"unlinked";V.has(le==null?void 0:le.id)||(ce[F]||(ce[F]={supplier:le,items:[]}),ce[F].items.push(ge))}),Object.values(ce).filter(ge=>ge.supplier)},[t,n,x]),U=k.useMemo(()=>{const V=t.length,ee=t.filter(F=>Pe(F)==="critical").length,ce=t.filter(F=>Pe(F)==="warning").length,ge=D.length,le=V>0?Math.max(0,Math.round(100-ee*20-ce*5)):100;return{total:V,critical:ee,warning:ce,suppliersWithAlerts:ge,healthScore:le}},[t,D]),H=k.useCallback((V,ee)=>{const ce=new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),ge=ee.map(le=>{const F=le.totalQty||0,Y=le.maxStock||0,je=Math.max(0,Y-F);return` ${le.name}: ${je.toFixed(0)}${le.unit||"kg"}`}).join(`
`);return{to:V.email||"",subject:`Solicitao de Cotao - Padoca Pizza - ${new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")}`,body:`Ol ${V.name},

Espero que esteja bem!

Estamos precisando repor alguns itens do nosso estoque e gostaramos de solicitar uma cotao:

${ge}

Poderia nos enviar os preos atualizados e prazo de entrega?

Obrigado!
Equipe Padoca Pizza


${ce}`}},[]),[re,E]=k.useState([]),B=(V,ee)=>{const ce=H(V,ee);O(V),E(ee),v(ce),j(!0)},[$,te]=k.useState(!1),[me,he]=k.useState(!1),[be,et]=k.useState(null),De=async()=>{if(!L.to){ae("Email do fornecedor no cadastrado","error");return}if(x.find(ee=>ee.supplierId===(R==null?void 0:R.id)&&(ee.status==="sent"||ee.status==="confirmed"))){ae("J existe uma cotao pendente para este fornecedor","error"),j(!1);return}te(!0);try{console.log(" Opening email composer..."),await Ai.sendEmail({to:L.to,subject:L.subject,body:L.body,supplierName:R==null?void 0:R.name}),console.log(" Email service completed!");const ee=re.map(le=>{const F=le.totalQty||0,Y=le.maxStock||0,je=Math.max(0,Y-F);return{id:le.id,name:le.name,currentStock:F,maxStock:Y,quantityToOrder:je,unit:le.unit||"",supplierId:le.supplierId}}),ce={id:Date.now().toString(),...L,supplierName:R==null?void 0:R.name,supplierId:R==null?void 0:R.id,items:ee,itemNames:re.map(le=>le.name),totalItems:re.length,sentAt:new Date().toISOString(),status:"sent",sentViaGmail:c},ge=[ce,...x];N(ge),localStorage.setItem("padoca_sent_emails",JSON.stringify(ge)),te(!1),j(!1),ae(" Email enviado! Gmail aberto para finalizar.","success"),console.log(" Showing success modal..."),et(ce),he(!0),b("awaiting"),O(null),E([]),v({to:"",subject:"",body:""})}catch(ee){console.error(" Send email failed:",ee),te(!1),ae("Erro ao enviar email: "+ee.message,"error")}},Be=()=>{const V=`Para: ${L.to}
Assunto: ${L.subject}

${L.body}`;navigator.clipboard.writeText(V),ae("Email copiado para rea de transferncia!")},lt=V=>{const ee=Number(V)||0;return new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2}).format(ee)},Ee=U.healthScore>=80?"emerald":U.healthScore>=60?"amber":"rose";return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-6 mb-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 mb-1",children:[s.jsx("h1",{className:"text-2xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Inteligncia"}),s.jsxs("div",{className:`px-2 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 shrink-0 ${i==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":i==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${i==="syncing"?"bg-amber-500":i==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest leading-none whitespace-nowrap",children:i==="syncing"?"Sync":i==="error"?"Error":"Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Automao e insights em tempo real"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[c?s.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 bg-emerald-50 dark:bg-emerald-900/20 rounded-2xl border border-emerald-200/50 dark:border-emerald-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),s.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400",children:"Gmail Conectado"}),s.jsx("span",{className:"text-[9px] text-emerald-500/70",children:h})]})]}):s.jsxs("button",{onClick:async()=>{try{setToast({message:"Conectando ao Gmail...",type:"info"});const V=await Ai.connect();V.connected&&(u(!0),m(V.email),setToast({message:" Gmail conectado! Respostas sero detectadas automaticamente.",type:"success"}))}catch(V){setToast({message:"Erro ao conectar: "+V.message,type:"error"})}},className:"flex items-center gap-3 px-4 py-2.5 bg-amber-50 dark:bg-amber-900/20 rounded-2xl border border-amber-200/50 dark:border-amber-500/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),s.jsx("svg",{className:"w-4 h-4 text-amber-600 dark:text-amber-400",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"})})]}),s.jsxs("div",{className:"flex flex-col items-start",children:[s.jsx("span",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 group-hover:underline",children:"Conectar Gmail"}),s.jsx("span",{className:"text-[9px] text-amber-500/70",children:"Para detectar respostas"})]})]}),s.jsxs("button",{onClick:()=>D.length>0&&B(D[0].supplier,D[0].items),disabled:D.length===0,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Notificar Fornecedores"]})]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Intelligence Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Active Monitoring"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Ee==="emerald"?"bg-emerald-500":Ee==="amber"?"bg-amber-500":"bg-rose-500"}`}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Analysis"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Health Score"}),s.jsxs("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:[s.jsx("span",{className:Ee==="emerald"?"text-emerald-500":Ee==="amber"?"text-amber-500":"text-rose-500",children:U.healthScore}),s.jsx("span",{className:"text-2xl md:text-4xl text-zinc-300 dark:text-zinc-600",children:"/ 100"})]})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Itens Monitorados"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:U.total})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-rose-500 dark:text-rose-400 uppercase tracking-widest",children:"Alertas Ativos"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-rose-600 dark:text-rose-400 tracking-tight tabular-nums",children:U.critical+U.warning})]})]})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Crtico"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:U.critical}),s.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens abaixo do mnimo"})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Urgncia"}),s.jsx("span",{className:"text-[8px] font-bold text-rose-500",children:"Alta"})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-rose-500/80 transition-all duration-1000",style:{width:U.total>0?`${U.critical/U.total*100}%`:"0%"}})})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Ateno"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:U.warning}),s.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens prximos do limite"})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Monitorar"}),s.jsx("span",{className:"text-[8px] font-bold text-amber-500",children:"Mdia"})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-amber-500/80 transition-all duration-1000",style:{width:U.total>0?`${U.warning/U.total*100}%`:"0%"}})})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"p-6 md:p-10 pb-0",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Automation Protocol"}),s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none mb-6",children:"Gesto de Cotaes"}),s.jsx("div",{className:"flex p-1.5 bg-zinc-100/80 dark:bg-zinc-800/60 rounded-2xl border border-zinc-200/30 dark:border-white/5 overflow-x-auto scrollbar-hide -mx-2 md:mx-0 backdrop-blur-sm",children:[{key:"pending",label:"Pendente",count:D.length,color:"zinc",icon:""},{key:"awaiting",label:"Aguardando",count:x.filter(V=>V.status==="sent"||V.status==="quoted").length,color:"zinc",icon:""},{key:"ordered",label:"Ordens",count:x.filter(V=>V.status==="confirmed").length,color:"zinc",icon:""},{key:"received",label:"Recebido",count:x.filter(V=>V.status==="delivered").length,color:"zinc",icon:""},{key:"history",label:"Histrico",count:x.length,color:"zinc",icon:""}].map(V=>s.jsxs("button",{onClick:()=>b(V.key),className:`relative flex-shrink-0 flex-1 min-w-[70px] flex items-center justify-center gap-1 py-2.5 md:py-3 px-2.5 md:px-4 rounded-xl text-[9px] md:text-[10px] font-semibold uppercase tracking-wide transition-all duration-300 whitespace-nowrap ${P===V.key?"text-zinc-900 dark:text-white":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-400"}`,children:[P===V.key&&s.jsx(G.div,{layoutId:"protocol-tab-indicator",className:"absolute inset-0 bg-white dark:bg-zinc-700/80 rounded-xl shadow-sm",transition:{type:"spring",stiffness:500,damping:35}}),s.jsx("span",{className:"relative z-10",children:V.label}),V.count>0&&s.jsx("span",{className:`relative z-10 min-w-[18px] h-[18px] px-1 flex items-center justify-center rounded-full text-[8px] font-bold ${P===V.key?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-200/80 dark:bg-zinc-700/80 text-zinc-500 dark:text-zinc-400"}`,children:V.count})]},V.key))})]}),s.jsx("div",{className:"p-6 md:p-10 pt-6",children:s.jsxs(Te,{mode:"wait",children:[P==="pending"&&s.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:D.length===0?s.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800/50 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Estoque em dia"}),s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600",children:"Nenhuma cotao pendente"})]}):s.jsx("div",{className:"space-y-3",children:D.map(({supplier:V,items:ee})=>{var ce,ge;return s.jsxs(G.div,{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 border border-zinc-200/50 dark:border-white/5 overflow-hidden hover:border-zinc-300 dark:hover:border-white/10 transition-all",whileHover:{scale:1.002},children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5 cursor-pointer",onClick:()=>B(V,ee),children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-zinc-900 dark:bg-white flex items-center justify-center text-white dark:text-zinc-900 text-base font-semibold shrink-0",children:(ge=(ce=V.name)==null?void 0:ce.charAt(0))==null?void 0:ge.toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:V.name}),s.jsxs("p",{className:"text-[10px] text-zinc-500 dark:text-zinc-400",children:[ee.length," ",ee.length===1?"item":"itens"," abaixo do mnimo"]})]})]}),s.jsxs("button",{className:"w-full md:w-auto px-5 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Solicitar Cotao"]})]}),s.jsxs("div",{className:"border-t border-zinc-200/50 dark:border-white/5 bg-white/50 dark:bg-zinc-900/20",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-3 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider",children:[s.jsx("span",{children:"Item"}),s.jsx("span",{className:"text-center",children:"Estoque Atual"}),s.jsx("span",{className:"text-right",children:"Quantidade a Pedir"})]}),ee.map(le=>{const F=le.totalQty||0,Y=le.maxStock||0,je=Math.max(0,Y-F);return s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 py-3 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0 hover:bg-zinc-50 dark:hover:bg-white/[0.02] transition-colors",children:[s.jsx("span",{className:"col-span-2 md:col-span-1 text-sm font-medium text-zinc-700 dark:text-zinc-200",children:le.name}),s.jsxs("span",{className:"text-xs text-zinc-400 md:text-center tabular-nums",children:[s.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Atual:"}),F.toFixed(0),le.unit||""]}),s.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white md:text-right tabular-nums",children:[s.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Pedir:"}),"+",je.toFixed(0),le.unit||""]})]},le.id)})]})]},V.id)})})},"pending"),P==="awaiting"&&s.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x.filter(V=>V.status==="sent"||V.status==="quoted").length===0?s.jsxs(G.div,{className:"py-16 md:py-24 text-center flex flex-col items-center gap-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,ease:[.4,0,.2,1]},children:[s.jsxs(G.div,{className:"relative",animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[s.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-amber-100 to-orange-50 dark:from-amber-500/20 dark:to-orange-500/10 flex items-center justify-center shadow-lg shadow-amber-500/10",children:s.jsx("svg",{className:"w-10 h-10 text-amber-500 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})})}),s.jsx("div",{className:"absolute inset-0 rounded-3xl border-2 border-amber-200/30 dark:border-amber-500/10 animate-ping",style:{animationDuration:"3s"}})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-zinc-700 dark:text-zinc-200",children:"Nenhuma cotao em andamento"}),s.jsx("p",{className:"text-sm text-zinc-400 dark:text-zinc-500 max-w-xs mx-auto",children:"Envie uma nova cotao para fornecedores atravs da aba Pendente"})]}),s.jsxs("button",{onClick:()=>b("pending"),className:"mt-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-2xl text-sm font-semibold shadow-lg shadow-amber-500/25 hover:shadow-xl hover:shadow-amber-500/30 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Nova Cotao"]})]}):s.jsxs("div",{className:"space-y-6",children:[x.filter(V=>V.status==="sent").length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 animate-pulse"}),s.jsx("span",{className:"text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:"Aguardando Resposta"}),s.jsx("span",{className:"px-1.5 py-0.5 bg-amber-100 dark:bg-amber-500/20 rounded text-[9px] font-bold text-amber-600 dark:text-amber-400",children:x.filter(V=>V.status==="sent").length})]}),s.jsx("div",{className:"space-y-3",children:x.filter(V=>V.status==="sent").map(V=>{var ee,ce,ge,le;return s.jsxs(G.div,{className:"rounded-2xl bg-amber-50/30 dark:bg-amber-500/5 border border-amber-100 dark:border-amber-500/10 overflow-hidden",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[s.jsxs("div",{className:"p-4 md:p-5 flex flex-col md:flex-row md:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"w-11 h-11 rounded-xl bg-amber-500 flex items-center justify-center text-white text-base font-semibold shrink-0 shadow-lg shadow-amber-500/20",children:((ce=(ee=V.supplierName)==null?void 0:ee.charAt(0))==null?void 0:ce.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100",children:V.supplierName}),s.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[s.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 font-medium",children:((ge=V.items)==null?void 0:ge.length)>0?`${V.items.length} itens solicitados`:((le=V.itemNames)==null?void 0:le.length)>0?`${V.itemNames.length} itens`:"Cotao enviada"}),s.jsx("span",{className:"text-[10px] text-zinc-300",children:""}),s.jsx("span",{className:"text-[10px] text-zinc-400",children:CD(V.sentAt)})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{T(V),de({quotedValue:"",expectedDelivery:""}),z(!0)},className:"px-4 py-2.5 bg-amber-500 text-white rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-amber-600 transition-all shadow-md",children:"Registrar Cotao"}),s.jsx("button",{onClick:()=>B(n.find(F=>F.name===V.supplierName)||{name:V.supplierName,email:V.to},[]),className:"px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all",children:"Reenviar"})]})]}),V.items&&V.items.length>0?s.jsxs("div",{className:"border-t border-amber-100 dark:border-amber-500/10 bg-white/50 dark:bg-zinc-900/30",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-4 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider border-b border-zinc-100 dark:border-white/5",children:[s.jsx("span",{children:"Item"}),s.jsx("span",{className:"text-center",children:"Estoque Atual"}),s.jsx("span",{className:"text-center",children:"Mximo"}),s.jsx("span",{className:"text-right",children:"Qtd. Solicitada"})]}),V.items.slice(0,5).map((F,Y)=>s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 py-2.5 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0",children:[s.jsx("span",{className:"col-span-2 md:col-span-1 text-sm font-medium text-zinc-700 dark:text-zinc-200",children:F.name}),s.jsxs("span",{className:"text-xs text-zinc-400 md:text-center tabular-nums",children:[s.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Atual:"}),F.currentStock,F.unit]}),s.jsxs("span",{className:"text-xs text-zinc-400 md:text-center tabular-nums",children:[s.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Mx:"}),F.maxStock,F.unit]}),s.jsxs("span",{className:"text-sm font-bold text-amber-600 dark:text-amber-400 md:text-right tabular-nums",children:[s.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Pedido:"}),"+",F.quantityToOrder,F.unit]})]},F.id||Y)),V.items.length>5&&s.jsxs("div",{className:"px-5 py-2 text-[10px] text-zinc-400 text-center border-t border-zinc-100 dark:border-white/5",children:["+",V.items.length-5," mais itens"]})]}):V.itemNames&&V.itemNames.length>0?s.jsxs("div",{className:"border-t border-amber-100 dark:border-amber-500/10 bg-white/50 dark:bg-zinc-900/30 p-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[V.itemNames.slice(0,5).map((F,Y)=>s.jsx("span",{className:"px-3 py-1.5 bg-amber-100/80 dark:bg-amber-500/20 rounded-lg text-xs font-medium text-amber-700 dark:text-amber-300",children:F},Y)),V.itemNames.length>5&&s.jsxs("span",{className:"px-3 py-1.5 bg-zinc-100 dark:bg-zinc-800 rounded-lg text-xs text-zinc-500",children:["+",V.itemNames.length-5," mais"]})]}),s.jsx("p",{className:"text-[10px] text-zinc-400 mt-2 italic",children:"* Detalhes de quantidade no disponveis para cotaes antigas"})]}):null]},V.id)})})]}),x.filter(V=>V.status==="quoted").length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),s.jsx("span",{className:"text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:"Cotao Recebida"})]}),s.jsx("div",{className:"space-y-2",children:x.filter(V=>V.status==="quoted").map(V=>{var ee,ce;return s.jsx(G.div,{className:"rounded-2xl bg-blue-50/50 dark:bg-blue-500/5 border border-blue-100 dark:border-blue-500/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center text-white text-sm font-semibold shrink-0",children:((ce=(ee=V.supplierName)==null?void 0:ee.charAt(0))==null?void 0:ce.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:V.supplierName||V.to}),s.jsxs("p",{className:"text-[10px] text-blue-600 dark:text-blue-400",children:[V.quotedValue?s.jsxs(s.Fragment,{children:["Cotao: ",s.jsx("span",{className:"font-bold",children:lt(V.quotedValue)})]}):"Aguardando aprovao",V.expectedDelivery&&s.jsxs("span",{className:"ml-2 text-zinc-400",children:[" Entrega: ",gr(V.expectedDelivery,{month:"short",day:"2-digit"})]})]})]})]}),V.quotedValue&&s.jsxs("div",{className:"hidden md:flex flex-col items-end gap-0.5 shrink-0 px-4",children:[s.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 tabular-nums",children:lt(V.quotedValue)}),V.expectedDelivery&&s.jsxs("span",{className:"text-[9px] text-zinc-400 uppercase tracking-wider",children:["Entrega: ",gr(V.expectedDelivery,{month:"short",day:"2-digit"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>{const ge=x.map(le=>le.id===V.id?{...le,status:"confirmed",confirmedAt:new Date().toISOString()}:le);N(ge),localStorage.setItem("padoca_sent_emails",JSON.stringify(ge)),ae(" Ordem de compra criada!","success")},className:"px-4 py-2 bg-blue-500 text-white rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-blue-600 transition-all flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Aprovar"]}),s.jsx("button",{onClick:()=>{const ge=x.map(le=>le.id===V.id?{...le,status:"sent",quotedValue:null,expectedDelivery:null}:le);N(ge),localStorage.setItem("padoca_sent_emails",JSON.stringify(ge)),ae("Solicitando nova cotao...","info"),B(n.find(le=>le.name===V.supplierName)||{name:V.supplierName,email:V.to},[])},className:"px-4 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all",children:"Nova Cotao"})]})]})},V.id)})})]})]})},"awaiting"),P==="ordered"&&s.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x.filter(V=>V.status==="confirmed").length===0?s.jsxs(G.div,{className:"py-16 md:py-24 text-center flex flex-col items-center gap-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[s.jsx(G.div,{className:"relative",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:s.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-indigo-100 to-purple-50 dark:from-indigo-500/20 dark:to-purple-500/10 flex items-center justify-center shadow-lg shadow-indigo-500/10",children:s.jsx("svg",{className:"w-10 h-10 text-indigo-500 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})})})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("h3",{className:"text-lg font-semibold text-zinc-700 dark:text-zinc-200",children:"Nenhuma ordem de compra"}),s.jsx("p",{className:"text-sm text-zinc-400 dark:text-zinc-500 max-w-xs mx-auto",children:"Aprove cotaes recebidas para criar ordens de compra"})]}),s.jsxs("button",{onClick:()=>b("awaiting"),className:"mt-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-2xl text-sm font-semibold shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ver Cotaes"]})]}):s.jsx("div",{className:"space-y-3",children:x.filter(V=>V.status==="confirmed").map(V=>s.jsxs(G.div,{className:"rounded-2xl bg-indigo-50/50 dark:bg-indigo-500/5 border border-indigo-100 dark:border-indigo-500/10 overflow-hidden",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500 flex items-center justify-center text-white text-sm font-semibold shrink-0",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:V.supplierName||V.to}),s.jsxs("p",{className:"text-[10px] text-indigo-600 dark:text-indigo-400",children:["Ordem criada em ",gr(V.confirmedAt||V.sentAt,{month:"short",day:"2-digit"}),V.expectedDelivery&&s.jsxs("span",{className:"ml-2 text-zinc-400",children:[" Entrega prev.: ",gr(V.expectedDelivery,{month:"short",day:"2-digit"})]})]})]})]}),V.quotedValue&&s.jsx("div",{className:"hidden md:block px-4 py-2 bg-indigo-100 dark:bg-indigo-500/20 rounded-xl",children:s.jsx("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400 tabular-nums",children:lt(V.quotedValue)})}),s.jsxs("button",{onClick:()=>{const ee=x.map(ce=>ce.id===V.id?{...ce,status:"delivered",deliveredAt:new Date().toISOString()}:ce);N(ee),localStorage.setItem("padoca_sent_emails",JSON.stringify(ee)),ae(" Produto recebido!","success")},className:"w-full md:w-auto px-5 py-2.5 bg-indigo-500 text-white rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-indigo-600 transition-all flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"Confirmar Recebimento"]})]}),V.quotedValue&&s.jsxs("div",{className:"md:hidden px-5 pb-4 flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Valor:"}),s.jsx("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400 tabular-nums",children:lt(V.quotedValue)})]}),V.items&&V.items.length>0&&s.jsxs("div",{className:"border-t border-indigo-100 dark:border-indigo-500/10 bg-white/50 dark:bg-zinc-900/30",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-3 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider border-b border-zinc-100 dark:border-white/5",children:[s.jsx("span",{children:"Item"}),s.jsx("span",{className:"text-center",children:"Quantidade Solicitada"}),s.jsx("span",{className:"text-right",children:"Unidade"})]}),V.items.slice(0,4).map((ee,ce)=>s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 py-2.5 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0",children:[s.jsx("span",{className:"col-span-2 md:col-span-1 text-sm font-medium text-zinc-700 dark:text-zinc-200",children:ee.name}),s.jsxs("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400 md:text-center tabular-nums",children:[ee.quantityToOrder,ee.unit]}),s.jsx("span",{className:"text-xs text-zinc-400 md:text-right",children:ee.unit||""})]},ee.id||ce)),V.items.length>4&&s.jsxs("div",{className:"px-5 py-2 text-[10px] text-zinc-400 text-center",children:["+",V.items.length-4," mais itens"]})]})]},V.id))})},"ordered"),P==="received"&&s.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x.filter(V=>V.status==="delivered").length===0?s.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800/50 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum recebimento"}),s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600",children:'Confirme entregas na aba "Ordens"'})]}):s.jsx("div",{className:"space-y-2",children:x.filter(V=>V.status==="delivered").map(V=>s.jsxs(G.div,{className:"rounded-2xl bg-emerald-50/50 dark:bg-emerald-500/5 border border-emerald-100 dark:border-emerald-500/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5",children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500 flex items-center justify-center shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:V.supplierName||V.to}),s.jsxs("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-400",children:["Recebido em ",gr(V.deliveredAt||V.sentAt,{month:"short",day:"2-digit"})]})]})]}),V.quotedValue&&s.jsx("div",{className:"hidden md:block px-4 py-2 bg-emerald-100 dark:bg-emerald-500/20 rounded-xl",children:s.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:lt(V.quotedValue)})}),s.jsx("div",{className:"shrink-0",children:s.jsx("span",{className:"px-3 py-1.5 bg-emerald-500 text-white rounded-lg text-[9px] font-bold uppercase tracking-wider",children:" Recebido"})})]}),V.quotedValue&&s.jsxs("div",{className:"md:hidden px-5 pb-4 flex items-center justify-between border-t border-emerald-100 dark:border-emerald-500/10 pt-3",children:[s.jsx("span",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Valor pago:"}),s.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:lt(V.quotedValue)})]}),V.items&&V.items.length>0&&s.jsxs("div",{className:"border-t border-emerald-100 dark:border-emerald-500/10 bg-white/50 dark:bg-zinc-900/30",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-2 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider border-b border-zinc-100 dark:border-white/5",children:[s.jsx("span",{children:"Item Recebido"}),s.jsx("span",{className:"text-right",children:"Quantidade"})]}),V.items.slice(0,3).map((ee,ce)=>s.jsxs("div",{className:"flex items-center justify-between py-2.5 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0",children:[s.jsxs("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-200 flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),ee.name]}),s.jsxs("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:[ee.quantityToOrder,ee.unit]})]},ee.id||ce)),V.items.length>3&&s.jsxs("div",{className:"px-5 py-2 text-[10px] text-zinc-400 text-center",children:["+",V.items.length-3," mais itens"]})]})]},V.id))})},"received"),P==="history"&&s.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x.length===0?s.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center border border-zinc-200 dark:border-zinc-700",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-sm font-semibold text-zinc-400 dark:text-zinc-500",children:"Nenhum registro"}),s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:"As movimentaes aparecero aqui"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 py-3 mb-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"col-span-1",children:"Status"}),s.jsx("div",{className:"col-span-3",children:"Fornecedor"}),s.jsx("div",{className:"col-span-3",children:"Itens"}),s.jsx("div",{className:"col-span-2",children:"Enviado"}),s.jsx("div",{className:"col-span-2",children:"Atualizado"}),s.jsx("div",{className:"col-span-1 text-right",children:"Ao"})]}),s.jsx("div",{className:"space-y-2",children:x.slice(0,20).map(V=>{var ge,le,F;const ee={sent:{color:"amber",icon:"",label:"Sem Resposta"},quoted:{color:"blue",icon:"",label:"Cotado"},confirmed:{color:"indigo",icon:"",label:"Em Ordem"},delivered:{color:"emerald",icon:"",label:"Recebido"}},ce=ee[V.status]||ee.sent;return s.jsxs(G.div,{className:"grid grid-cols-1 md:grid-cols-12 gap-3 md:gap-4 p-4 rounded-2xl bg-zinc-50/50 dark:bg-white/[0.02] border border-zinc-100/50 dark:border-white/5",initial:{opacity:0},animate:{opacity:1},children:[s.jsxs("div",{className:"md:col-span-1 flex items-center gap-2",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg bg-${ce.color}-100 dark:bg-${ce.color}-500/10 flex items-center justify-center text-sm shrink-0`,children:ce.icon}),s.jsx("span",{className:`md:hidden text-[10px] font-semibold text-${ce.color}-600 dark:text-${ce.color}-400`,children:ce.label})]}),s.jsxs("div",{className:"md:col-span-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-xl bg-zinc-900 dark:bg-white flex items-center justify-center text-white dark:text-zinc-900 text-sm font-semibold shrink-0",children:((le=(ge=V.supplierName)==null?void 0:ge.charAt(0))==null?void 0:le.toUpperCase())||"?"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:V.supplierName||"Fornecedor"}),s.jsx("p",{className:"text-[10px] text-zinc-400 truncate",children:V.to})]})]}),s.jsxs("div",{className:"md:col-span-3 flex flex-col gap-1",children:[V.items&&V.items.length>0?s.jsxs(s.Fragment,{children:[V.items.slice(0,2).map((Y,je)=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[11px] font-medium text-zinc-600 dark:text-zinc-300 truncate max-w-[100px]",children:Y.name}),s.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums ml-2",children:["+",Y.quantityToOrder,Y.unit]})]},Y.id||je)),V.items.length>2&&s.jsxs("span",{className:"text-[9px] text-zinc-400",children:["+",V.items.length-2," mais"]})]}):(V.itemNames||[]).length>0?s.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(V.itemNames||[]).slice(0,2).map((Y,je)=>s.jsx("span",{className:"px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded-md text-[9px] font-medium text-zinc-600 dark:text-zinc-400 truncate max-w-[80px]",children:Y},je)),(((F=V.itemNames)==null?void 0:F.length)||0)>2&&s.jsxs("span",{className:"text-[9px] text-zinc-400",children:["+",V.itemNames.length-2]})]}):s.jsx("span",{className:"text-[10px] text-zinc-300 dark:text-zinc-600",children:""}),V.quotedValue&&s.jsxs("span",{className:"text-[10px] font-bold text-blue-600 dark:text-blue-400 mt-0.5",children:["Total: ",lt(V.quotedValue)]})]}),s.jsx("div",{className:"md:col-span-2 flex items-center",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-medium text-zinc-600 dark:text-zinc-300",children:gr(V.sentAt,{day:"2-digit",month:"short"})}),s.jsx("p",{className:"text-[9px] text-zinc-400",children:SD(V.sentAt)})]})}),s.jsx("div",{className:"md:col-span-2 flex items-center",children:s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] font-medium text-${ce.color}-600 dark:text-${ce.color}-400`,children:ce.label}),s.jsx("p",{className:"text-[9px] text-zinc-400",children:V.deliveredAt?gr(V.deliveredAt,{day:"2-digit",month:"short"}):V.confirmedAt?gr(V.confirmedAt,{day:"2-digit",month:"short"}):""})]})}),s.jsxs("div",{className:"md:col-span-1 flex items-center justify-end",children:[V.status==="sent"&&s.jsx("button",{onClick:()=>{const Y=x.map(je=>je.id===V.id?{...je,status:"confirmed"}:je);N(Y),localStorage.setItem("padoca_sent_emails",JSON.stringify(Y)),ae(" Confirmado!","success")},className:"p-2 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 rounded-lg transition-colors group",title:"Confirmar recebimento",children:s.jsx("svg",{className:"w-4 h-4 text-zinc-400 group-hover:text-emerald-500 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),V.status==="delivered"&&s.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center",children:s.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})]},V.id)})}),x.length>10&&s.jsx("div",{className:"mt-6 pt-4 border-t border-zinc-100 dark:border-white/5 text-center",children:s.jsxs("p",{className:"text-[10px] text-zinc-400",children:["Mostrando 10 de ",x.length," registros"]})})]})},"history")]})})]}),s.jsx(Te,{children:w&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>j(!1)}),s.jsxs(G.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-lg rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[85vh]",children:[s.jsx(ED,{}),s.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:s.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),s.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:"Compor Email"}),s.jsx("p",{className:"text-xs text-zinc-500",children:R==null?void 0:R.name})]}),s.jsx("button",{onClick:()=>j(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:s.jsxs("div",{className:"space-y-6 px-4 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Para"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:L.to,onChange:V=>v(ee=>({...ee,to:V.target.value})),placeholder:"email@fornecedor.com"})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Assunto"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:L.subject,onChange:V=>v(ee=>({...ee,subject:V.target.value})),placeholder:"Assunto do email"})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Mensagem"}),s.jsx("textarea",{className:"w-full bg-transparent border-none py-1 text-sm font-medium text-zinc-700 dark:text-zinc-300 outline-none resize-none leading-relaxed min-h-[200px]",value:L.body,onChange:V=>v(ee=>({...ee,body:V.target.value})),placeholder:"Contedo do email..."})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[s.jsx("button",{onClick:De,disabled:$||!L.to,className:`w-full py-4 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg transition-all flex items-center justify-center gap-2 ${$?"bg-emerald-500 text-white cursor-wait":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 active:scale-95"} disabled:opacity-50`,children:$?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Enviar Email"]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:Be,className:"py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Copiar"}),s.jsx("button",{onClick:()=>j(!1),className:"py-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-2xl transition-all",children:"Cancelar"})]})]})]})})]})]})}),me&&be&&Ze.createPortal(s.jsx(Te,{children:s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",onClick:()=>he(!1),children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/60 backdrop-blur-sm"}),s.jsxs(G.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"relative bg-white dark:bg-zinc-900 w-full max-w-sm rounded-3xl shadow-2xl border border-zinc-200/50 dark:border-white/10 overflow-hidden text-center p-8",onClick:V=>V.stopPropagation(),children:[s.jsx(G.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:500,damping:25},className:"w-20 h-20 mx-auto mb-6 rounded-full bg-emerald-500 flex items-center justify-center shadow-xl shadow-emerald-500/30",children:s.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsx(G.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Email Enviado!"}),s.jsxs(G.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:["Cotao enviada para",s.jsx("br",{}),s.jsx("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:be.supplierName||be.to})]}),s.jsx(G.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-2",children:s.jsx("button",{onClick:()=>he(!1),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Continuar"})})]})]},"success-modal")}),document.body),s.jsx(Te,{children:C&&I&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",onClick:()=>z(!1),children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/70 backdrop-blur-sm"}),s.jsxs(G.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white dark:bg-zinc-900 w-full max-w-md rounded-3xl shadow-2xl border border-zinc-200/50 dark:border-white/10 overflow-hidden",onClick:V=>V.stopPropagation(),children:[s.jsx("div",{className:"p-6 pb-4 border-b border-zinc-100 dark:border-white/5",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500 flex items-center justify-center text-white text-lg font-semibold shrink-0",children:((qt=(He=I.supplierName)==null?void 0:He.charAt(0))==null?void 0:qt.toUpperCase())||"?"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Detalhes da Cotao"}),s.jsx("p",{className:"text-sm text-zinc-500",children:I.supplierName})]})]})}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Valor Cotado (CAD)"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 font-semibold",children:"$"}),s.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:pe.quotedValue,onChange:V=>de(ee=>({...ee,quotedValue:V.target.value})),className:"w-full pl-8 pr-4 py-3.5 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-white/10 rounded-xl text-lg font-semibold text-zinc-900 dark:text-white placeholder:text-zinc-300 dark:placeholder:text-zinc-600 outline-none focus:ring-2 focus:ring-blue-500/30 transition-all"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Data de Entrega Prevista"}),s.jsx("input",{type:"date",value:pe.expectedDelivery,onChange:V=>de(ee=>({...ee,expectedDelivery:V.target.value})),className:"w-full px-4 py-3.5 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-white/10 rounded-xl text-base font-medium text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500/30 transition-all"})]}),((zt=I.itemNames)==null?void 0:zt.length)>0&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Itens"}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:I.itemNames.map((V,ee)=>s.jsx("span",{className:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-lg text-[10px] font-medium text-zinc-600 dark:text-zinc-400",children:V},ee))})]})]}),s.jsxs("div",{className:"p-6 pt-0 space-y-2",children:[s.jsxs("button",{onClick:()=>{const V=x.map(ee=>ee.id===I.id?{...ee,status:"quoted",quotedAt:new Date().toISOString(),quotedValue:pe.quotedValue?parseFloat(pe.quotedValue):null,expectedDelivery:pe.expectedDelivery||null}:ee);N(V),localStorage.setItem("padoca_sent_emails",JSON.stringify(V)),z(!1),T(null),ae(pe.quotedValue?`Cotao de ${lt(pe.quotedValue)} registrada!`:"Cotao recebida!","success")},className:"w-full py-4 bg-blue-500 text-white rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg hover:bg-blue-600 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Confirmar Cotao"]}),s.jsx("button",{onClick:()=>{z(!1),T(null)},className:"w-full py-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-2xl transition-all",children:"Cancelar"})]})]})]},"quote-modal"),document.body)}),s.jsx(Te,{children:ye&&Ze.createPortal(s.jsxs(G.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${ye.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":ye.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${ye.type==="error"?"bg-white animate-pulse":ye.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:ye.message})]}),document.body)})]})}const zh=[{key:"ai",label:"IA",icon:OD},{key:"kanban",label:"Kanban",icon:ID},{key:"recipes",label:"Receitas",icon:AD},{key:"products",label:"Produtos",icon:LD},{key:"inventory",label:"Estoque",icon:PD},{key:"suppliers",label:"Fornecedores",icon:VD},{key:"costs",label:"Financeiro",icon:RD},{key:"ficha",label:"Ficha",icon:DD},{key:"calculator",label:"Produo",icon:MD}];function ID({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function AD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function PD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function RD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function DD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function MD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}function VD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}function LD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}function OD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}const Ga={type:"spring",stiffness:500,damping:35,mass:.8},FD={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function BD(){var u;const[t,e]=k.useState("pct"),[n,r]=k.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[i,a]=k.useState(!1),[o,l]=k.useState(!1);k.useEffect(()=>{a(!0)},[]);const c=h=>{if(h===n){l(!1);return}r(h),l(!1),localStorage.setItem("padoca_view",h)};return(u=zh.find(h=>h.key===n))!=null&&u.label,s.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${i?"opacity-100":"opacity-0"}`,children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[s.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),s.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[s.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-3 pb-2 mb-2 md:relative md:pt-8 md:pb-4 md:mb-6",children:[s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),s.jsxs("div",{className:"relative flex flex-col gap-0 md:gap-5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(G.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...Ga},children:[s.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),s.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),s.jsx("button",{onClick:()=>l(!o),className:"relative w-11 h-11 flex items-center justify-center -mr-2 md:hidden","aria-label":"Menu",children:s.jsxs("div",{className:"relative w-[18px] h-[10px]",children:[s.jsx(G.span,{animate:o?{rotate:45,y:4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute top-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"}),s.jsx(G.span,{animate:o?{rotate:-45,y:-4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute bottom-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"})]})}),s.jsx(G.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...Ga},className:"hidden md:flex items-center gap-3",children:s.jsx(Te,{mode:"wait",children:n==="calculator"&&s.jsx(G.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:Ga,children:s.jsx(Xy,{value:t,onChange:e})})})})]}),s.jsx(Te,{children:o&&s.jsxs(G.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[9999] bg-white dark:bg-black md:hidden overflow-hidden",style:{top:0},children:[s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(G.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1},onClick:()=>l(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800","aria-label":"Close",children:s.jsx("svg",{className:"w-5 h-5 text-zinc-600 dark:text-zinc-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})}),s.jsxs("div",{className:"flex flex-col justify-center h-full px-6 pb-20 overflow-y-auto scrollbar-hide",children:[s.jsx(G.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Navegao"}),s.jsx("div",{className:"space-y-1",children:zh.map(({key:h,label:m,icon:f},y)=>{const _=n===h;return s.jsxs(G.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:y*.04,duration:.25,ease:[.25,.46,.45,.94]},onClick:()=>c(h),className:`w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all ${_?"bg-indigo-50 dark:bg-white/10 text-indigo-600 dark:text-white":"text-zinc-600 dark:text-zinc-400 active:bg-zinc-100 dark:active:bg-white/5"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${_?"bg-indigo-500 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400"}`,children:s.jsx(f,{active:_})}),s.jsx("span",{className:"text-[17px] font-semibold tracking-tight",children:m}),_&&s.jsx(G.div,{layoutId:"mobile-active-check",className:"ml-auto",children:s.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]},h)})})]}),s.jsx(G.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.35},className:"absolute bottom-6 left-0 right-0 text-center",children:s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-700 uppercase tracking-widest font-medium",children:"Padoca Pizza  2024"})})]})}),s.jsxs("nav",{className:"relative hidden md:block",children:[s.jsx(G.nav,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...Ga},className:"inline-flex items-center p-1.5 bg-white/90 dark:bg-zinc-900/90 backdrop-blur-2xl rounded-2xl border border-zinc-200/50 dark:border-white/10 shadow-lg",children:zh.map(({key:h,label:m,icon:f})=>{const y=n===h;return s.jsxs("button",{onClick:()=>c(h),className:`relative px-4 py-2.5 rounded-xl transition-colors duration-200 ${y?"text-indigo-600 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[y&&s.jsx(G.div,{layoutId:"nav-active-desktop",className:"absolute inset-0 bg-indigo-50 dark:bg-white/10 rounded-xl",transition:{type:"spring",stiffness:400,damping:30}}),s.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[s.jsx(f,{active:y}),s.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:m})]})]},h)})}),s.jsx(Te,{mode:"wait",children:n==="calculator"&&s.jsx(G.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:Ga,className:"md:hidden flex-shrink-0 mt-3",children:s.jsx(Xy,{value:t,onChange:e})})})]})]})]}),s.jsx(Te,{mode:"wait",children:s.jsx(G.main,{initial:"initial",animate:"enter",exit:"exit",variants:FD,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="ai"?s.jsx(TD,{}):n==="kanban"?s.jsx(sD,{}):n==="recipes"?s.jsx(ZR,{}):n==="products"?s.jsx(gD,{}):n==="inventory"?s.jsx(oR,{}):n==="suppliers"?s.jsx(mD,{}):n==="costs"?s.jsx(sR,{}):n==="ficha"?s.jsx(cR,{}):s.jsx(mR,{inputMode:t,setInputMode:e})},n)})]})]})}class UD extends Dn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:s.jsxs("div",{className:"max-w-md text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}Ch.createRoot(document.getElementById("root")).render(s.jsx(Dn.StrictMode,{children:s.jsx(UD,{children:s.jsx(BD,{})})}));
