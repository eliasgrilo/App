(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function jN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gv={exports:{}},Hc={},Qv={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var za=Symbol.for("react.element"),SN=Symbol.for("react.portal"),IN=Symbol.for("react.fragment"),zN=Symbol.for("react.strict_mode"),AN=Symbol.for("react.profiler"),PN=Symbol.for("react.provider"),RN=Symbol.for("react.context"),VN=Symbol.for("react.forward_ref"),DN=Symbol.for("react.suspense"),MN=Symbol.for("react.memo"),LN=Symbol.for("react.lazy"),Y0=Symbol.iterator;function ON(t){return t===null||typeof t!="object"?null:(t=Y0&&t[Y0]||t["@@iterator"],typeof t=="function"?t:null)}var Yv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Xv=Object.assign,Jv={};function Us(t,e,n){this.props=t,this.context=e,this.refs=Jv,this.updater=n||Yv}Us.prototype.isReactComponent={};Us.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Us.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Zv(){}Zv.prototype=Us.prototype;function Mf(t,e,n){this.props=t,this.context=e,this.refs=Jv,this.updater=n||Yv}var Lf=Mf.prototype=new Zv;Lf.constructor=Mf;Xv(Lf,Us.prototype);Lf.isPureReactComponent=!0;var X0=Array.isArray,e1=Object.prototype.hasOwnProperty,Of={current:null},t1={key:!0,ref:!0,__self:!0,__source:!0};function n1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)e1.call(e,r)&&!t1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:za,type:t,key:s,ref:o,props:i,_owner:Of.current}}function FN(t,e){return{$$typeof:za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ff(t){return typeof t=="object"&&t!==null&&t.$$typeof===za}function BN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var J0=/\/+/g;function Gu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BN(""+t.key):e.toString(36)}function zl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case za:case SN:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Gu(o,0):r,X0(i)?(n="",t!=null&&(n=t.replace(J0,"$&/")+"/"),zl(i,e,n,"",function(d){return d})):i!=null&&(Ff(i)&&(i=FN(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(J0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",X0(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Gu(s,l);o+=zl(s,e,n,u,i)}else if(u=ON(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Gu(s,l++),o+=zl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function il(t,e,n){if(t==null)return t;var r=[],i=0;return zl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function UN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ft={current:null},Al={transition:null},$N={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:Al,ReactCurrentOwner:Of};function r1(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:il,forEach:function(t,e,n){il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return il(t,function(){e++}),e},toArray:function(t){return il(t,function(e){return e})||[]},only:function(t){if(!Ff(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=Us;we.Fragment=IN;we.Profiler=AN;we.PureComponent=Mf;we.StrictMode=zN;we.Suspense=DN;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$N;we.act=r1;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Xv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Of.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)e1.call(e,u)&&!t1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:za,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:RN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:PN,_context:t},t.Consumer=t};we.createElement=n1;we.createFactory=function(t){var e=n1.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:VN,render:t}};we.isValidElement=Ff;we.lazy=function(t){return{$$typeof:LN,_payload:{_status:-1,_result:t},_init:UN}};we.memo=function(t,e){return{$$typeof:MN,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Al.transition;Al.transition={};try{t()}finally{Al.transition=e}};we.unstable_act=r1;we.useCallback=function(t,e){return Ft.current.useCallback(t,e)};we.useContext=function(t){return Ft.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Ft.current.useDeferredValue(t)};we.useEffect=function(t,e){return Ft.current.useEffect(t,e)};we.useId=function(){return Ft.current.useId()};we.useImperativeHandle=function(t,e,n){return Ft.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Ft.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Ft.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Ft.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Ft.current.useReducer(t,e,n)};we.useRef=function(t){return Ft.current.useRef(t)};we.useState=function(t){return Ft.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Ft.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Ft.current.useTransition()};we.version="18.3.1";Qv.exports=we;var z=Qv.exports;const mn=jN(z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN=z,WN=Symbol.for("react.element"),HN=Symbol.for("react.fragment"),KN=Object.prototype.hasOwnProperty,GN=qN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QN={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KN.call(e,r)&&!QN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WN,type:t,key:s,ref:o,props:i,_owner:GN.current}}Hc.Fragment=HN;Hc.jsx=i1;Hc.jsxs=i1;Gv.exports=Hc;var a=Gv.exports,Jd={},s1={exports:{}},nn={},o1={exports:{}},a1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Q,ee){var ie=Q.length;Q.push(ee);e:for(;0<ie;){var $=ie-1>>>1,se=Q[$];if(0<i(se,ee))Q[$]=ee,Q[ie]=se,ie=$;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],ie=Q.pop();if(ie!==ee){Q[0]=ie;e:for(var $=0,se=Q.length,ne=se>>>1;$<ne;){var V=2*($+1)-1,U=Q[V],Y=V+1,X=Q[Y];if(0>i(U,ie))Y<se&&0>i(X,U)?(Q[$]=X,Q[Y]=ie,$=Y):(Q[$]=U,Q[V]=ie,$=V);else if(Y<se&&0>i(X,ie))Q[$]=X,Q[Y]=ie,$=Y;else break e}}return ee}function i(Q,ee){var ie=Q.sortIndex-ee.sortIndex;return ie!==0?ie:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,p=3,w=!1,T=!1,C=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(Q){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=Q)r(d),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=n(d)}}function P(Q){if(C=!1,v(Q),!T)if(n(u)!==null)T=!0,ae(D);else{var ee=n(d);ee!==null&&me(P,ee.startTime-Q)}}function D(Q,ee){T=!1,C&&(C=!1,b(y),y=-1),w=!0;var ie=p;try{for(v(ee),m=n(u);m!==null&&(!(m.expirationTime>ee)||Q&&!I());){var $=m.callback;if(typeof $=="function"){m.callback=null,p=m.priorityLevel;var se=$(m.expirationTime<=ee);ee=t.unstable_now(),typeof se=="function"?m.callback=se:m===n(u)&&r(u),v(ee)}else r(u);m=n(u)}if(m!==null)var ne=!0;else{var V=n(d);V!==null&&me(P,V.startTime-ee),ne=!1}return ne}finally{m=null,p=ie,w=!1}}var M=!1,k=null,y=-1,_=5,E=-1;function I(){return!(t.unstable_now()-E<_)}function R(){if(k!==null){var Q=t.unstable_now();E=Q;var ee=!0;try{ee=k(!0,Q)}finally{ee?S():(M=!1,k=null)}}else M=!1}var S;if(typeof x=="function")S=function(){x(R)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,de=xe.port2;xe.port1.onmessage=R,S=function(){de.postMessage(null)}}else S=function(){A(R,0)};function ae(Q){k=Q,M||(M=!0,S())}function me(Q,ee){y=A(function(){Q(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Q){Q.callback=null},t.unstable_continueExecution=function(){T||w||(T=!0,ae(D))},t.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Q?Math.floor(1e3/Q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(Q){switch(p){case 1:case 2:case 3:var ee=3;break;default:ee=p}var ie=p;p=ee;try{return Q()}finally{p=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ie=p;p=Q;try{return ee()}finally{p=ie}},t.unstable_scheduleCallback=function(Q,ee,ie){var $=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?$+ie:$):ie=$,Q){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ie+se,Q={id:h++,callback:ee,priorityLevel:Q,startTime:ie,expirationTime:se,sortIndex:-1},ie>$?(Q.sortIndex=ie,e(d,Q),n(u)===null&&Q===n(d)&&(C?(b(y),y=-1):C=!0,me(P,ie-$))):(Q.sortIndex=se,e(u,Q),T||w||(T=!0,ae(D))),Q},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(Q){var ee=p;return function(){var ie=p;p=ee;try{return Q.apply(this,arguments)}finally{p=ie}}}})(a1);o1.exports=a1;var YN=o1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XN=z,tn=YN;function J(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l1=new Set,ea={};function Li(t,e){js(t,e),js(t+"Capture",e)}function js(t,e){for(ea[t]=e,t=0;t<e.length;t++)l1.add(e[t])}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zd=Object.prototype.hasOwnProperty,JN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z0={},eg={};function ZN(t){return Zd.call(eg,t)?!0:Zd.call(Z0,t)?!1:JN.test(t)?eg[t]=!0:(Z0[t]=!0,!1)}function eT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tT(t,e,n,r){if(e===null||typeof e>"u"||eT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bf=/[\-:]([a-z])/g;function Uf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bf,Uf);Tt[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bf,Uf);Tt[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bf,Uf);Tt[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function $f(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tT(e,n,i,r)&&(n=null),r||i===null?ZN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=XN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sl=Symbol.for("react.element"),es=Symbol.for("react.portal"),ts=Symbol.for("react.fragment"),qf=Symbol.for("react.strict_mode"),eh=Symbol.for("react.profiler"),c1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),Wf=Symbol.for("react.forward_ref"),th=Symbol.for("react.suspense"),nh=Symbol.for("react.suspense_list"),Hf=Symbol.for("react.memo"),Nr=Symbol.for("react.lazy"),d1=Symbol.for("react.offscreen"),tg=Symbol.iterator;function go(t){return t===null||typeof t!="object"?null:(t=tg&&t[tg]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,Qu;function Eo(t){if(Qu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Qu=e&&e[1]||""}return`
`+Qu+t}var Yu=!1;function Xu(t,e){if(!t||Yu)return"";Yu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Yu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Eo(t):""}function nT(t){switch(t.tag){case 5:return Eo(t.type);case 16:return Eo("Lazy");case 13:return Eo("Suspense");case 19:return Eo("SuspenseList");case 0:case 2:case 15:return t=Xu(t.type,!1),t;case 11:return t=Xu(t.type.render,!1),t;case 1:return t=Xu(t.type,!0),t;default:return""}}function rh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ts:return"Fragment";case es:return"Portal";case eh:return"Profiler";case qf:return"StrictMode";case th:return"Suspense";case nh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u1:return(t.displayName||"Context")+".Consumer";case c1:return(t._context.displayName||"Context")+".Provider";case Wf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Hf:return e=t.displayName||null,e!==null?e:rh(t.type)||"Memo";case Nr:e=t._payload,t=t._init;try{return rh(t(e))}catch{}}return null}function rT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rh(e);case 8:return e===qf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $r(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iT(t){var e=h1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ol(t){t._valueTracker||(t._valueTracker=iT(t))}function f1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=h1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ec(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ih(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ng(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=$r(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function m1(t,e){e=e.checked,e!=null&&$f(t,"checked",e,!1)}function sh(t,e){m1(t,e);var n=$r(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?oh(t,e.type,n):e.hasOwnProperty("defaultValue")&&oh(t,e.type,$r(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function rg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function oh(t,e,n){(e!=="number"||ec(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Co=Array.isArray;function xs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+$r(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ah(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(J(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ig(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(J(92));if(Co(n)){if(1<n.length)throw Error(J(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:$r(n)}}function p1(t,e){var n=$r(e.value),r=$r(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function g1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?g1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var al,x1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(al=al||document.createElement("div"),al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ta(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sT=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){sT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function y1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function v1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=y1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var oT=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ch(t,e){if(e){if(oT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(J(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(J(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(J(61))}if(e.style!=null&&typeof e.style!="object")throw Error(J(62))}}function uh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dh=null;function Kf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var hh=null,ys=null,vs=null;function og(t){if(t=Ra(t)){if(typeof hh!="function")throw Error(J(280));var e=t.stateNode;e&&(e=Xc(e),hh(t.stateNode,t.type,e))}}function w1(t){ys?vs?vs.push(t):vs=[t]:ys=t}function b1(){if(ys){var t=ys,e=vs;if(vs=ys=null,og(t),e)for(t=0;t<e.length;t++)og(e[t])}}function k1(t,e){return t(e)}function _1(){}var Ju=!1;function N1(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return k1(t,e,n)}finally{Ju=!1,(ys!==null||vs!==null)&&(_1(),b1())}}function na(t,e){var n=t.stateNode;if(n===null)return null;var r=Xc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(J(231,e,typeof n));return n}var fh=!1;if(nr)try{var xo={};Object.defineProperty(xo,"passive",{get:function(){fh=!0}}),window.addEventListener("test",xo,xo),window.removeEventListener("test",xo,xo)}catch{fh=!1}function aT(t,e,n,r,i,s,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Do=!1,tc=null,nc=!1,mh=null,lT={onError:function(t){Do=!0,tc=t}};function cT(t,e,n,r,i,s,o,l,u){Do=!1,tc=null,aT.apply(lT,arguments)}function uT(t,e,n,r,i,s,o,l,u){if(cT.apply(this,arguments),Do){if(Do){var d=tc;Do=!1,tc=null}else throw Error(J(198));nc||(nc=!0,mh=d)}}function Oi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function T1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ag(t){if(Oi(t)!==t)throw Error(J(188))}function dT(t){var e=t.alternate;if(!e){if(e=Oi(t),e===null)throw Error(J(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ag(i),t;if(s===r)return ag(i),e;s=s.sibling}throw Error(J(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(J(189))}}if(n.alternate!==r)throw Error(J(190))}if(n.tag!==3)throw Error(J(188));return n.stateNode.current===n?t:e}function E1(t){return t=dT(t),t!==null?C1(t):null}function C1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C1(t);if(e!==null)return e;t=t.sibling}return null}var j1=tn.unstable_scheduleCallback,lg=tn.unstable_cancelCallback,hT=tn.unstable_shouldYield,fT=tn.unstable_requestPaint,tt=tn.unstable_now,mT=tn.unstable_getCurrentPriorityLevel,Gf=tn.unstable_ImmediatePriority,S1=tn.unstable_UserBlockingPriority,rc=tn.unstable_NormalPriority,pT=tn.unstable_LowPriority,I1=tn.unstable_IdlePriority,Kc=null,Rn=null;function gT(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(Kc,t,void 0,(t.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:vT,xT=Math.log,yT=Math.LN2;function vT(t){return t>>>=0,t===0?32:31-(xT(t)/yT|0)|0}var ll=64,cl=4194304;function jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ic(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=jo(l):(s&=o,s!==0&&(r=jo(s)))}else o=n&~i,o!==0?r=jo(o):s!==0&&(r=jo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Nn(e),i=1<<n,r|=t[n],e&=~i;return r}function wT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Nn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=wT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function ph(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z1(){var t=ll;return ll<<=1,!(ll&4194240)&&(ll=64),t}function Zu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Aa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Nn(e),t[e]=n}function kT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Nn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Qf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Nn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var je=0;function A1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var P1,Yf,R1,V1,D1,gh=!1,ul=[],zr=null,Ar=null,Pr=null,ra=new Map,ia=new Map,Er=[],_T="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cg(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":ra.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(e.pointerId)}}function yo(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ra(e),e!==null&&Yf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function NT(t,e,n,r,i){switch(e){case"focusin":return zr=yo(zr,t,e,n,r,i),!0;case"dragenter":return Ar=yo(Ar,t,e,n,r,i),!0;case"mouseover":return Pr=yo(Pr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ra.set(s,yo(ra.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ia.set(s,yo(ia.get(s)||null,t,e,n,r,i)),!0}return!1}function M1(t){var e=gi(t.target);if(e!==null){var n=Oi(e);if(n!==null){if(e=n.tag,e===13){if(e=T1(n),e!==null){t.blockedOn=e,D1(t.priority,function(){R1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=xh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);dh=r,n.target.dispatchEvent(r),dh=null}else return e=Ra(n),e!==null&&Yf(e),t.blockedOn=n,!1;e.shift()}return!0}function ug(t,e,n){Pl(t)&&n.delete(e)}function TT(){gh=!1,zr!==null&&Pl(zr)&&(zr=null),Ar!==null&&Pl(Ar)&&(Ar=null),Pr!==null&&Pl(Pr)&&(Pr=null),ra.forEach(ug),ia.forEach(ug)}function vo(t,e){t.blockedOn===e&&(t.blockedOn=null,gh||(gh=!0,tn.unstable_scheduleCallback(tn.unstable_NormalPriority,TT)))}function sa(t){function e(i){return vo(i,t)}if(0<ul.length){vo(ul[0],t);for(var n=1;n<ul.length;n++){var r=ul[n];r.blockedOn===t&&(r.blockedOn=null)}}for(zr!==null&&vo(zr,t),Ar!==null&&vo(Ar,t),Pr!==null&&vo(Pr,t),ra.forEach(e),ia.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)M1(n),n.blockedOn===null&&Er.shift()}var ws=mr.ReactCurrentBatchConfig,sc=!0;function ET(t,e,n,r){var i=je,s=ws.transition;ws.transition=null;try{je=1,Xf(t,e,n,r)}finally{je=i,ws.transition=s}}function CT(t,e,n,r){var i=je,s=ws.transition;ws.transition=null;try{je=4,Xf(t,e,n,r)}finally{je=i,ws.transition=s}}function Xf(t,e,n,r){if(sc){var i=xh(t,e,n,r);if(i===null)cd(t,e,r,oc,n),cg(t,r);else if(NT(i,t,e,n,r))r.stopPropagation();else if(cg(t,r),e&4&&-1<_T.indexOf(t)){for(;i!==null;){var s=Ra(i);if(s!==null&&P1(s),s=xh(t,e,n,r),s===null&&cd(t,e,r,oc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else cd(t,e,r,null,n)}}var oc=null;function xh(t,e,n,r){if(oc=null,t=Kf(r),t=gi(t),t!==null)if(e=Oi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=T1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return oc=t,null}function L1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mT()){case Gf:return 1;case S1:return 4;case rc:case pT:return 16;case I1:return 536870912;default:return 16}default:return 16}}var jr=null,Jf=null,Rl=null;function O1(){if(Rl)return Rl;var t,e=Jf,n=e.length,r,i="value"in jr?jr.value:jr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rl=i.slice(t,1<r?1-r:void 0)}function Vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dl(){return!0}function dg(){return!1}function rn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?dl:dg,this.isPropagationStopped=dg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),e}var $s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zf=rn($s),Pa=Ge({},$s,{view:0,detail:0}),jT=rn(Pa),ed,td,wo,Gc=Ge({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:em,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wo&&(wo&&t.type==="mousemove"?(ed=t.screenX-wo.screenX,td=t.screenY-wo.screenY):td=ed=0,wo=t),ed)},movementY:function(t){return"movementY"in t?t.movementY:td}}),hg=rn(Gc),ST=Ge({},Gc,{dataTransfer:0}),IT=rn(ST),zT=Ge({},Pa,{relatedTarget:0}),nd=rn(zT),AT=Ge({},$s,{animationName:0,elapsedTime:0,pseudoElement:0}),PT=rn(AT),RT=Ge({},$s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VT=rn(RT),DT=Ge({},$s,{data:0}),fg=rn(DT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OT[t])?!!e[t]:!1}function em(){return FT}var BT=Ge({},Pa,{key:function(t){if(t.key){var e=MT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?LT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:em,charCode:function(t){return t.type==="keypress"?Vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),UT=rn(BT),$T=Ge({},Gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mg=rn($T),qT=Ge({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:em}),WT=rn(qT),HT=Ge({},$s,{propertyName:0,elapsedTime:0,pseudoElement:0}),KT=rn(HT),GT=Ge({},Gc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QT=rn(GT),YT=[9,13,27,32],tm=nr&&"CompositionEvent"in window,Mo=null;nr&&"documentMode"in document&&(Mo=document.documentMode);var XT=nr&&"TextEvent"in window&&!Mo,F1=nr&&(!tm||Mo&&8<Mo&&11>=Mo),pg=" ",gg=!1;function B1(t,e){switch(t){case"keyup":return YT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function JT(t,e){switch(t){case"compositionend":return U1(e);case"keypress":return e.which!==32?null:(gg=!0,pg);case"textInput":return t=e.data,t===pg&&gg?null:t;default:return null}}function ZT(t,e){if(ns)return t==="compositionend"||!tm&&B1(t,e)?(t=O1(),Rl=Jf=jr=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return F1&&e.locale!=="ko"?null:e.data;default:return null}}var eE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eE[t.type]:e==="textarea"}function $1(t,e,n,r){w1(r),e=ac(e,"onChange"),0<e.length&&(n=new Zf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,oa=null;function tE(t){ew(t,0)}function Qc(t){var e=ss(t);if(f1(e))return t}function nE(t,e){if(t==="change")return e}var q1=!1;if(nr){var rd;if(nr){var id="oninput"in document;if(!id){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),id=typeof yg.oninput=="function"}rd=id}else rd=!1;q1=rd&&(!document.documentMode||9<document.documentMode)}function vg(){Lo&&(Lo.detachEvent("onpropertychange",W1),oa=Lo=null)}function W1(t){if(t.propertyName==="value"&&Qc(oa)){var e=[];$1(e,oa,t,Kf(t)),N1(tE,e)}}function rE(t,e,n){t==="focusin"?(vg(),Lo=e,oa=n,Lo.attachEvent("onpropertychange",W1)):t==="focusout"&&vg()}function iE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qc(oa)}function sE(t,e){if(t==="click")return Qc(e)}function oE(t,e){if(t==="input"||t==="change")return Qc(e)}function aE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:aE;function aa(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Zd.call(e,i)||!En(t[i],e[i]))return!1}return!0}function wg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bg(t,e){var n=wg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wg(n)}}function H1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function K1(){for(var t=window,e=ec();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ec(t.document)}return e}function nm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lE(t){var e=K1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&H1(n.ownerDocument.documentElement,n)){if(r!==null&&nm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=bg(n,s);var o=bg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cE=nr&&"documentMode"in document&&11>=document.documentMode,rs=null,yh=null,Oo=null,vh=!1;function kg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vh||rs==null||rs!==ec(r)||(r=rs,"selectionStart"in r&&nm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Oo&&aa(Oo,r)||(Oo=r,r=ac(yh,"onSelect"),0<r.length&&(e=new Zf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=rs)))}function hl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var is={animationend:hl("Animation","AnimationEnd"),animationiteration:hl("Animation","AnimationIteration"),animationstart:hl("Animation","AnimationStart"),transitionend:hl("Transition","TransitionEnd")},sd={},G1={};nr&&(G1=document.createElement("div").style,"AnimationEvent"in window||(delete is.animationend.animation,delete is.animationiteration.animation,delete is.animationstart.animation),"TransitionEvent"in window||delete is.transitionend.transition);function Yc(t){if(sd[t])return sd[t];if(!is[t])return t;var e=is[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in G1)return sd[t]=e[n];return t}var Q1=Yc("animationend"),Y1=Yc("animationiteration"),X1=Yc("animationstart"),J1=Yc("transitionend"),Z1=new Map,_g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ei(t,e){Z1.set(t,e),Li(e,[t])}for(var od=0;od<_g.length;od++){var ad=_g[od],uE=ad.toLowerCase(),dE=ad[0].toUpperCase()+ad.slice(1);ei(uE,"on"+dE)}ei(Q1,"onAnimationEnd");ei(Y1,"onAnimationIteration");ei(X1,"onAnimationStart");ei("dblclick","onDoubleClick");ei("focusin","onFocus");ei("focusout","onBlur");ei(J1,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Li("onBeforeInput",["compositionend","keypress","textInput","paste"]);Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var So="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hE=new Set("cancel close invalid load scroll toggle".split(" ").concat(So));function Ng(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uT(r,e,void 0,t),t.currentTarget=null}function ew(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;Ng(i,l,d),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;Ng(i,l,d),s=u}}}if(nc)throw t=mh,nc=!1,mh=null,t}function Me(t,e){var n=e[Nh];n===void 0&&(n=e[Nh]=new Set);var r=t+"__bubble";n.has(r)||(tw(e,t,2,!1),n.add(r))}function ld(t,e,n){var r=0;e&&(r|=4),tw(n,t,r,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function la(t){if(!t[fl]){t[fl]=!0,l1.forEach(function(n){n!=="selectionchange"&&(hE.has(n)||ld(n,!1,t),ld(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,ld("selectionchange",!1,e))}}function tw(t,e,n,r){switch(L1(e)){case 1:var i=ET;break;case 4:i=CT;break;default:i=Xf}n=i.bind(null,e,n,t),i=void 0,!fh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function cd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=gi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}N1(function(){var d=s,h=Kf(n),m=[];e:{var p=Z1.get(t);if(p!==void 0){var w=Zf,T=t;switch(t){case"keypress":if(Vl(n)===0)break e;case"keydown":case"keyup":w=UT;break;case"focusin":T="focus",w=nd;break;case"focusout":T="blur",w=nd;break;case"beforeblur":case"afterblur":w=nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=hg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=IT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=WT;break;case Q1:case Y1:case X1:w=PT;break;case J1:w=KT;break;case"scroll":w=jT;break;case"wheel":w=QT;break;case"copy":case"cut":case"paste":w=VT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=mg}var C=(e&4)!==0,A=!C&&t==="scroll",b=C?p!==null?p+"Capture":null:p;C=[];for(var x=d,v;x!==null;){v=x;var P=v.stateNode;if(v.tag===5&&P!==null&&(v=P,b!==null&&(P=na(x,b),P!=null&&C.push(ca(x,P,v)))),A)break;x=x.return}0<C.length&&(p=new w(p,T,null,n,h),m.push({event:p,listeners:C}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&n!==dh&&(T=n.relatedTarget||n.fromElement)&&(gi(T)||T[rr]))break e;if((w||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,w?(T=n.relatedTarget||n.toElement,w=d,T=T?gi(T):null,T!==null&&(A=Oi(T),T!==A||T.tag!==5&&T.tag!==6)&&(T=null)):(w=null,T=d),w!==T)){if(C=hg,P="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(C=mg,P="onPointerLeave",b="onPointerEnter",x="pointer"),A=w==null?p:ss(w),v=T==null?p:ss(T),p=new C(P,x+"leave",w,n,h),p.target=A,p.relatedTarget=v,P=null,gi(h)===d&&(C=new C(b,x+"enter",T,n,h),C.target=v,C.relatedTarget=A,P=C),A=P,w&&T)t:{for(C=w,b=T,x=0,v=C;v;v=Gi(v))x++;for(v=0,P=b;P;P=Gi(P))v++;for(;0<x-v;)C=Gi(C),x--;for(;0<v-x;)b=Gi(b),v--;for(;x--;){if(C===b||b!==null&&C===b.alternate)break t;C=Gi(C),b=Gi(b)}C=null}else C=null;w!==null&&Tg(m,p,w,C,!1),T!==null&&A!==null&&Tg(m,A,T,C,!0)}}e:{if(p=d?ss(d):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var D=nE;else if(xg(p))if(q1)D=oE;else{D=iE;var M=rE}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=sE);if(D&&(D=D(t,d))){$1(m,D,n,h);break e}M&&M(t,p,d),t==="focusout"&&(M=p._wrapperState)&&M.controlled&&p.type==="number"&&oh(p,"number",p.value)}switch(M=d?ss(d):window,t){case"focusin":(xg(M)||M.contentEditable==="true")&&(rs=M,yh=d,Oo=null);break;case"focusout":Oo=yh=rs=null;break;case"mousedown":vh=!0;break;case"contextmenu":case"mouseup":case"dragend":vh=!1,kg(m,n,h);break;case"selectionchange":if(cE)break;case"keydown":case"keyup":kg(m,n,h)}var k;if(tm)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ns?B1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(F1&&n.locale!=="ko"&&(ns||y!=="onCompositionStart"?y==="onCompositionEnd"&&ns&&(k=O1()):(jr=h,Jf="value"in jr?jr.value:jr.textContent,ns=!0)),M=ac(d,y),0<M.length&&(y=new fg(y,t,null,n,h),m.push({event:y,listeners:M}),k?y.data=k:(k=U1(n),k!==null&&(y.data=k)))),(k=XT?JT(t,n):ZT(t,n))&&(d=ac(d,"onBeforeInput"),0<d.length&&(h=new fg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=k))}ew(m,e)})}function ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ac(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=na(t,n),s!=null&&r.unshift(ca(t,s,i)),s=na(t,e),s!=null&&r.push(ca(t,s,i))),t=t.return}return r}function Gi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=na(n,s),u!=null&&o.unshift(ca(n,u,l))):i||(u=na(n,s),u!=null&&o.push(ca(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fE=/\r\n?/g,mE=/\u0000|\uFFFD/g;function Eg(t){return(typeof t=="string"?t:""+t).replace(fE,`
`).replace(mE,"")}function ml(t,e,n){if(e=Eg(e),Eg(t)!==e&&n)throw Error(J(425))}function lc(){}var wh=null,bh=null;function kh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _h=typeof setTimeout=="function"?setTimeout:void 0,pE=typeof clearTimeout=="function"?clearTimeout:void 0,Cg=typeof Promise=="function"?Promise:void 0,gE=typeof queueMicrotask=="function"?queueMicrotask:typeof Cg<"u"?function(t){return Cg.resolve(null).then(t).catch(xE)}:_h;function xE(t){setTimeout(function(){throw t})}function ud(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sa(e)}function Rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var qs=Math.random().toString(36).slice(2),Pn="__reactFiber$"+qs,ua="__reactProps$"+qs,rr="__reactContainer$"+qs,Nh="__reactEvents$"+qs,yE="__reactListeners$"+qs,vE="__reactHandles$"+qs;function gi(t){var e=t[Pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[Pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jg(t);t!==null;){if(n=t[Pn])return n;t=jg(t)}return e}t=n,n=t.parentNode}return null}function Ra(t){return t=t[Pn]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(J(33))}function Xc(t){return t[ua]||null}var Th=[],os=-1;function ti(t){return{current:t}}function Oe(t){0>os||(t.current=Th[os],Th[os]=null,os--)}function Ve(t,e){os++,Th[os]=t.current,t.current=e}var qr={},Pt=ti(qr),Ht=ti(!1),ji=qr;function Ss(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Kt(t){return t=t.childContextTypes,t!=null}function cc(){Oe(Ht),Oe(Pt)}function Sg(t,e,n){if(Pt.current!==qr)throw Error(J(168));Ve(Pt,e),Ve(Ht,n)}function nw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(J(108,rT(t)||"Unknown",i));return Ge({},n,r)}function uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,ji=Pt.current,Ve(Pt,t),Ve(Ht,Ht.current),!0}function Ig(t,e,n){var r=t.stateNode;if(!r)throw Error(J(169));n?(t=nw(t,e,ji),r.__reactInternalMemoizedMergedChildContext=t,Oe(Ht),Oe(Pt),Ve(Pt,t)):Oe(Ht),Ve(Ht,n)}var Xn=null,Jc=!1,dd=!1;function rw(t){Xn===null?Xn=[t]:Xn.push(t)}function wE(t){Jc=!0,rw(t)}function ni(){if(!dd&&Xn!==null){dd=!0;var t=0,e=je;try{var n=Xn;for(je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Xn=null,Jc=!1}catch(i){throw Xn!==null&&(Xn=Xn.slice(t+1)),j1(Gf,ni),i}finally{je=e,dd=!1}}return null}var as=[],ls=0,dc=null,hc=0,on=[],an=0,Si=null,Jn=1,Zn="";function hi(t,e){as[ls++]=hc,as[ls++]=dc,dc=t,hc=e}function iw(t,e,n){on[an++]=Jn,on[an++]=Zn,on[an++]=Si,Si=t;var r=Jn;t=Zn;var i=32-Nn(r)-1;r&=~(1<<i),n+=1;var s=32-Nn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Jn=1<<32-Nn(e)+i|n<<i|r,Zn=s+t}else Jn=1<<s|n<<i|r,Zn=t}function rm(t){t.return!==null&&(hi(t,1),iw(t,1,0))}function im(t){for(;t===dc;)dc=as[--ls],as[ls]=null,hc=as[--ls],as[ls]=null;for(;t===Si;)Si=on[--an],on[an]=null,Zn=on[--an],on[an]=null,Jn=on[--an],on[an]=null}var Zt=null,Jt=null,$e=!1,kn=null;function sw(t,e){var n=un(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function zg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=Rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zt=t,Jt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Si!==null?{id:Jn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=un(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Zt=t,Jt=null,!0):!1;default:return!1}}function Eh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ch(t){if($e){var e=Jt;if(e){var n=e;if(!zg(t,e)){if(Eh(t))throw Error(J(418));e=Rr(n.nextSibling);var r=Zt;e&&zg(t,e)?sw(r,n):(t.flags=t.flags&-4097|2,$e=!1,Zt=t)}}else{if(Eh(t))throw Error(J(418));t.flags=t.flags&-4097|2,$e=!1,Zt=t}}}function Ag(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zt=t}function pl(t){if(t!==Zt)return!1;if(!$e)return Ag(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kh(t.type,t.memoizedProps)),e&&(e=Jt)){if(Eh(t))throw ow(),Error(J(418));for(;e;)sw(t,e),e=Rr(e.nextSibling)}if(Ag(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(J(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Jt=Rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Jt=null}}else Jt=Zt?Rr(t.stateNode.nextSibling):null;return!0}function ow(){for(var t=Jt;t;)t=Rr(t.nextSibling)}function Is(){Jt=Zt=null,$e=!1}function sm(t){kn===null?kn=[t]:kn.push(t)}var bE=mr.ReactCurrentBatchConfig;function bo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(J(309));var r=n.stateNode}if(!r)throw Error(J(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(J(284));if(!n._owner)throw Error(J(290,t))}return t}function gl(t,e){throw t=Object.prototype.toString.call(e),Error(J(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pg(t){var e=t._init;return e(t._payload)}function aw(t){function e(b,x){if(t){var v=b.deletions;v===null?(b.deletions=[x],b.flags|=16):v.push(x)}}function n(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function r(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function i(b,x){return b=Lr(b,x),b.index=0,b.sibling=null,b}function s(b,x,v){return b.index=v,t?(v=b.alternate,v!==null?(v=v.index,v<x?(b.flags|=2,x):v):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,v,P){return x===null||x.tag!==6?(x=yd(v,b.mode,P),x.return=b,x):(x=i(x,v),x.return=b,x)}function u(b,x,v,P){var D=v.type;return D===ts?h(b,x,v.props.children,P,v.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Nr&&Pg(D)===x.type)?(P=i(x,v.props),P.ref=bo(b,x,v),P.return=b,P):(P=Ul(v.type,v.key,v.props,null,b.mode,P),P.ref=bo(b,x,v),P.return=b,P)}function d(b,x,v,P){return x===null||x.tag!==4||x.stateNode.containerInfo!==v.containerInfo||x.stateNode.implementation!==v.implementation?(x=vd(v,b.mode,P),x.return=b,x):(x=i(x,v.children||[]),x.return=b,x)}function h(b,x,v,P,D){return x===null||x.tag!==7?(x=Ni(v,b.mode,P,D),x.return=b,x):(x=i(x,v),x.return=b,x)}function m(b,x,v){if(typeof x=="string"&&x!==""||typeof x=="number")return x=yd(""+x,b.mode,v),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case sl:return v=Ul(x.type,x.key,x.props,null,b.mode,v),v.ref=bo(b,null,x),v.return=b,v;case es:return x=vd(x,b.mode,v),x.return=b,x;case Nr:var P=x._init;return m(b,P(x._payload),v)}if(Co(x)||go(x))return x=Ni(x,b.mode,v,null),x.return=b,x;gl(b,x)}return null}function p(b,x,v,P){var D=x!==null?x.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:l(b,x,""+v,P);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case sl:return v.key===D?u(b,x,v,P):null;case es:return v.key===D?d(b,x,v,P):null;case Nr:return D=v._init,p(b,x,D(v._payload),P)}if(Co(v)||go(v))return D!==null?null:h(b,x,v,P,null);gl(b,v)}return null}function w(b,x,v,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return b=b.get(v)||null,l(x,b,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case sl:return b=b.get(P.key===null?v:P.key)||null,u(x,b,P,D);case es:return b=b.get(P.key===null?v:P.key)||null,d(x,b,P,D);case Nr:var M=P._init;return w(b,x,v,M(P._payload),D)}if(Co(P)||go(P))return b=b.get(v)||null,h(x,b,P,D,null);gl(x,P)}return null}function T(b,x,v,P){for(var D=null,M=null,k=x,y=x=0,_=null;k!==null&&y<v.length;y++){k.index>y?(_=k,k=null):_=k.sibling;var E=p(b,k,v[y],P);if(E===null){k===null&&(k=_);break}t&&k&&E.alternate===null&&e(b,k),x=s(E,x,y),M===null?D=E:M.sibling=E,M=E,k=_}if(y===v.length)return n(b,k),$e&&hi(b,y),D;if(k===null){for(;y<v.length;y++)k=m(b,v[y],P),k!==null&&(x=s(k,x,y),M===null?D=k:M.sibling=k,M=k);return $e&&hi(b,y),D}for(k=r(b,k);y<v.length;y++)_=w(k,b,y,v[y],P),_!==null&&(t&&_.alternate!==null&&k.delete(_.key===null?y:_.key),x=s(_,x,y),M===null?D=_:M.sibling=_,M=_);return t&&k.forEach(function(I){return e(b,I)}),$e&&hi(b,y),D}function C(b,x,v,P){var D=go(v);if(typeof D!="function")throw Error(J(150));if(v=D.call(v),v==null)throw Error(J(151));for(var M=D=null,k=x,y=x=0,_=null,E=v.next();k!==null&&!E.done;y++,E=v.next()){k.index>y?(_=k,k=null):_=k.sibling;var I=p(b,k,E.value,P);if(I===null){k===null&&(k=_);break}t&&k&&I.alternate===null&&e(b,k),x=s(I,x,y),M===null?D=I:M.sibling=I,M=I,k=_}if(E.done)return n(b,k),$e&&hi(b,y),D;if(k===null){for(;!E.done;y++,E=v.next())E=m(b,E.value,P),E!==null&&(x=s(E,x,y),M===null?D=E:M.sibling=E,M=E);return $e&&hi(b,y),D}for(k=r(b,k);!E.done;y++,E=v.next())E=w(k,b,y,E.value,P),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?y:E.key),x=s(E,x,y),M===null?D=E:M.sibling=E,M=E);return t&&k.forEach(function(R){return e(b,R)}),$e&&hi(b,y),D}function A(b,x,v,P){if(typeof v=="object"&&v!==null&&v.type===ts&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case sl:e:{for(var D=v.key,M=x;M!==null;){if(M.key===D){if(D=v.type,D===ts){if(M.tag===7){n(b,M.sibling),x=i(M,v.props.children),x.return=b,b=x;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Nr&&Pg(D)===M.type){n(b,M.sibling),x=i(M,v.props),x.ref=bo(b,M,v),x.return=b,b=x;break e}n(b,M);break}else e(b,M);M=M.sibling}v.type===ts?(x=Ni(v.props.children,b.mode,P,v.key),x.return=b,b=x):(P=Ul(v.type,v.key,v.props,null,b.mode,P),P.ref=bo(b,x,v),P.return=b,b=P)}return o(b);case es:e:{for(M=v.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===v.containerInfo&&x.stateNode.implementation===v.implementation){n(b,x.sibling),x=i(x,v.children||[]),x.return=b,b=x;break e}else{n(b,x);break}else e(b,x);x=x.sibling}x=vd(v,b.mode,P),x.return=b,b=x}return o(b);case Nr:return M=v._init,A(b,x,M(v._payload),P)}if(Co(v))return T(b,x,v,P);if(go(v))return C(b,x,v,P);gl(b,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,x!==null&&x.tag===6?(n(b,x.sibling),x=i(x,v),x.return=b,b=x):(n(b,x),x=yd(v,b.mode,P),x.return=b,b=x),o(b)):n(b,x)}return A}var zs=aw(!0),lw=aw(!1),fc=ti(null),mc=null,cs=null,om=null;function am(){om=cs=mc=null}function lm(t){var e=fc.current;Oe(fc),t._currentValue=e}function jh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bs(t,e){mc=t,om=cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qt=!0),t.firstContext=null)}function pn(t){var e=t._currentValue;if(om!==t)if(t={context:t,memoizedValue:e,next:null},cs===null){if(mc===null)throw Error(J(308));cs=t,mc.dependencies={lanes:0,firstContext:t}}else cs=cs.next=t;return e}var xi=null;function cm(t){xi===null?xi=[t]:xi.push(t)}function cw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cm(e)):(n.next=i.next,i.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function um(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ir(t,n)}return i=r.interleaved,i===null?(e.next=e,cm(r)):(e.next=i.next,i.next=e),r.interleaved=e,ir(t,n)}function Dl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qf(t,n)}}function Rg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function pc(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,h=d=u=null,l=s;do{var p=l.lane,w=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,C=l;switch(p=e,w=n,C.tag){case 1:if(T=C.payload,typeof T=="function"){m=T.call(w,m,p);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=C.payload,p=typeof T=="function"?T.call(w,m,p):T,p==null)break e;m=Ge({},m,p);break e;case 2:Tr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else w={eventTime:w,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=w,u=m):h=h.next=w,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);zi|=o,t.lanes=o,t.memoizedState=m}}function Vg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(J(191,i));i.call(r)}}}var Va={},Vn=ti(Va),da=ti(Va),ha=ti(Va);function yi(t){if(t===Va)throw Error(J(174));return t}function dm(t,e){switch(Ve(ha,e),Ve(da,t),Ve(Vn,Va),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=lh(e,t)}Oe(Vn),Ve(Vn,e)}function As(){Oe(Vn),Oe(da),Oe(ha)}function dw(t){yi(ha.current);var e=yi(Vn.current),n=lh(e,t.type);e!==n&&(Ve(da,t),Ve(Vn,n))}function hm(t){da.current===t&&(Oe(Vn),Oe(da))}var He=ti(0);function gc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hd=[];function fm(){for(var t=0;t<hd.length;t++)hd[t]._workInProgressVersionPrimary=null;hd.length=0}var Ml=mr.ReactCurrentDispatcher,fd=mr.ReactCurrentBatchConfig,Ii=0,Ke=null,ht=null,xt=null,xc=!1,Fo=!1,fa=0,kE=0;function Ct(){throw Error(J(321))}function mm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function pm(t,e,n,r,i,s){if(Ii=s,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ml.current=t===null||t.memoizedState===null?EE:CE,t=n(r,i),Fo){s=0;do{if(Fo=!1,fa=0,25<=s)throw Error(J(301));s+=1,xt=ht=null,e.updateQueue=null,Ml.current=jE,t=n(r,i)}while(Fo)}if(Ml.current=yc,e=ht!==null&&ht.next!==null,Ii=0,xt=ht=Ke=null,xc=!1,e)throw Error(J(300));return t}function gm(){var t=fa!==0;return fa=0,t}function zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Ke.memoizedState=xt=t:xt=xt.next=t,xt}function gn(){if(ht===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=xt===null?Ke.memoizedState:xt.next;if(e!==null)xt=e,ht=t;else{if(t===null)throw Error(J(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},xt===null?Ke.memoizedState=xt=t:xt=xt.next=t}return xt}function ma(t,e){return typeof e=="function"?e(t):e}function md(t){var e=gn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,d=s;do{var h=d.lane;if((Ii&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ke.lanes|=h,zi|=h}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=l,En(r,e.memoizedState)||(qt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Ke.lanes|=s,zi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pd(t){var e=gn(),n=e.queue;if(n===null)throw Error(J(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);En(s,e.memoizedState)||(qt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function hw(){}function fw(t,e){var n=Ke,r=gn(),i=e(),s=!En(r.memoizedState,i);if(s&&(r.memoizedState=i,qt=!0),r=r.queue,xm(gw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,pa(9,pw.bind(null,n,r,i,e),void 0,null),yt===null)throw Error(J(349));Ii&30||mw(n,e,i)}return i}function mw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pw(t,e,n,r){e.value=n,e.getSnapshot=r,xw(e)&&yw(t)}function gw(t,e,n){return n(function(){xw(e)&&yw(t)})}function xw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function yw(t){var e=ir(t,1);e!==null&&Tn(e,t,1,-1)}function Dg(t){var e=zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e.queue=t,t=t.dispatch=TE.bind(null,Ke,t),[e.memoizedState,t]}function pa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function vw(){return gn().memoizedState}function Ll(t,e,n,r){var i=zn();Ke.flags|=t,i.memoizedState=pa(1|e,n,void 0,r===void 0?null:r)}function Zc(t,e,n,r){var i=gn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&mm(r,o.deps)){i.memoizedState=pa(e,n,s,r);return}}Ke.flags|=t,i.memoizedState=pa(1|e,n,s,r)}function Mg(t,e){return Ll(8390656,8,t,e)}function xm(t,e){return Zc(2048,8,t,e)}function ww(t,e){return Zc(4,2,t,e)}function bw(t,e){return Zc(4,4,t,e)}function kw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function _w(t,e,n){return n=n!=null?n.concat([t]):null,Zc(4,4,kw.bind(null,e,t),n)}function ym(){}function Nw(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Tw(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ew(t,e,n){return Ii&21?(En(n,e)||(n=z1(),Ke.lanes|=n,zi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qt=!0),t.memoizedState=n)}function _E(t,e){var n=je;je=n!==0&&4>n?n:4,t(!0);var r=fd.transition;fd.transition={};try{t(!1),e()}finally{je=n,fd.transition=r}}function Cw(){return gn().memoizedState}function NE(t,e,n){var r=Mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},jw(t))Sw(e,n);else if(n=cw(t,e,n,r),n!==null){var i=Lt();Tn(n,t,r,i),Iw(n,e,r)}}function TE(t,e,n){var r=Mr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(jw(t))Sw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,En(l,o)){var u=e.interleaved;u===null?(i.next=i,cm(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=cw(t,e,i,r),n!==null&&(i=Lt(),Tn(n,t,r,i),Iw(n,e,r))}}function jw(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function Sw(t,e){Fo=xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Iw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qf(t,n)}}var yc={readContext:pn,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useInsertionEffect:Ct,useLayoutEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useMutableSource:Ct,useSyncExternalStore:Ct,useId:Ct,unstable_isNewReconciler:!1},EE={readContext:pn,useCallback:function(t,e){return zn().memoizedState=[t,e===void 0?null:e],t},useContext:pn,useEffect:Mg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4194308,4,kw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var n=zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NE.bind(null,Ke,t),[r.memoizedState,t]},useRef:function(t){var e=zn();return t={current:t},e.memoizedState=t},useState:Dg,useDebugValue:ym,useDeferredValue:function(t){return zn().memoizedState=t},useTransition:function(){var t=Dg(!1),e=t[0];return t=_E.bind(null,t[1]),zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ke,i=zn();if($e){if(n===void 0)throw Error(J(407));n=n()}else{if(n=e(),yt===null)throw Error(J(349));Ii&30||mw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Mg(gw.bind(null,r,s,t),[t]),r.flags|=2048,pa(9,pw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=zn(),e=yt.identifierPrefix;if($e){var n=Zn,r=Jn;n=(r&~(1<<32-Nn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=kE++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CE={readContext:pn,useCallback:Nw,useContext:pn,useEffect:xm,useImperativeHandle:_w,useInsertionEffect:ww,useLayoutEffect:bw,useMemo:Tw,useReducer:md,useRef:vw,useState:function(){return md(ma)},useDebugValue:ym,useDeferredValue:function(t){var e=gn();return Ew(e,ht.memoizedState,t)},useTransition:function(){var t=md(ma)[0],e=gn().memoizedState;return[t,e]},useMutableSource:hw,useSyncExternalStore:fw,useId:Cw,unstable_isNewReconciler:!1},jE={readContext:pn,useCallback:Nw,useContext:pn,useEffect:xm,useImperativeHandle:_w,useInsertionEffect:ww,useLayoutEffect:bw,useMemo:Tw,useReducer:pd,useRef:vw,useState:function(){return pd(ma)},useDebugValue:ym,useDeferredValue:function(t){var e=gn();return ht===null?e.memoizedState=t:Ew(e,ht.memoizedState,t)},useTransition:function(){var t=pd(ma)[0],e=gn().memoizedState;return[t,e]},useMutableSource:hw,useSyncExternalStore:fw,useId:Cw,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var eu={isMounted:function(t){return(t=t._reactInternals)?Oi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Lt(),i=Mr(t),s=er(r,i);s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(Tn(e,t,i,r),Dl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Lt(),i=Mr(t),s=er(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Vr(t,s,i),e!==null&&(Tn(e,t,i,r),Dl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Lt(),r=Mr(t),i=er(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vr(t,i,r),e!==null&&(Tn(e,t,r,n),Dl(e,t,r))}};function Lg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!aa(n,r)||!aa(i,s):!0}function zw(t,e,n){var r=!1,i=qr,s=e.contextType;return typeof s=="object"&&s!==null?s=pn(s):(i=Kt(e)?ji:Pt.current,r=e.contextTypes,s=(r=r!=null)?Ss(t,i):qr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=eu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Og(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&eu.enqueueReplaceState(e,e.state,null)}function Ih(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},um(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=pn(s):(s=Kt(e)?ji:Pt.current,i.context=Ss(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&eu.enqueueReplaceState(i,i.state,null),pc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ps(t,e){try{var n="",r=e;do n+=nT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function gd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SE=typeof WeakMap=="function"?WeakMap:Map;function Aw(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wc||(wc=!0,Bh=r),zh(t,e)},n}function Pw(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zh(t,e),typeof r!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new SE;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=$E.bind(null,t,e,n),e.then(t,t))}function Bg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ug(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Vr(n,e,1))),n.lanes|=1),t)}var IE=mr.ReactCurrentOwner,qt=!1;function Vt(t,e,n,r){e.child=t===null?lw(e,null,n,r):zs(e,t.child,n,r)}function $g(t,e,n,r,i){n=n.render;var s=e.ref;return bs(e,i),r=pm(t,e,n,r,s,i),n=gm(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):($e&&n&&rm(e),e.flags|=1,Vt(t,e,r,i),e.child)}function qg(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Em(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Rw(t,e,s,r,i)):(t=Ul(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:aa,n(o,r)&&t.ref===e.ref)return sr(t,e,i)}return e.flags|=1,t=Lr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Rw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(aa(s,r)&&t.ref===e.ref)if(qt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(qt=!0);else return e.lanes=t.lanes,sr(t,e,i)}return Ah(t,e,n,r,i)}function Vw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(ds,Xt),Xt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ve(ds,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ve(ds,Xt),Xt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ve(ds,Xt),Xt|=r;return Vt(t,e,i,n),e.child}function Dw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ah(t,e,n,r,i){var s=Kt(n)?ji:Pt.current;return s=Ss(e,s),bs(e,i),n=pm(t,e,n,r,s,i),r=gm(),t!==null&&!qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,sr(t,e,i)):($e&&r&&rm(e),e.flags|=1,Vt(t,e,n,i),e.child)}function Wg(t,e,n,r,i){if(Kt(n)){var s=!0;uc(e)}else s=!1;if(bs(e,i),e.stateNode===null)Ol(t,e),zw(e,n,r),Ih(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=pn(d):(d=Kt(n)?ji:Pt.current,d=Ss(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Og(e,o,r,d),Tr=!1;var p=e.memoizedState;o.state=p,pc(e,r,o,i),u=e.memoizedState,l!==r||p!==u||Ht.current||Tr?(typeof h=="function"&&(Sh(e,n,h,r),u=e.memoizedState),(l=Tr||Lg(e,n,l,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:wn(e.type,l),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=pn(u):(u=Kt(n)?ji:Pt.current,u=Ss(e,u));var w=n.getDerivedStateFromProps;(h=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&Og(e,o,r,u),Tr=!1,p=e.memoizedState,o.state=p,pc(e,r,o,i);var T=e.memoizedState;l!==m||p!==T||Ht.current||Tr?(typeof w=="function"&&(Sh(e,n,w,r),T=e.memoizedState),(d=Tr||Lg(e,n,d,r,p,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ph(t,e,n,r,s,i)}function Ph(t,e,n,r,i,s){Dw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Ig(e,n,!1),sr(t,e,s);r=e.stateNode,IE.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=zs(e,t.child,null,s),e.child=zs(e,null,l,s)):Vt(t,e,l,s),e.memoizedState=r.state,i&&Ig(e,n,!0),e.child}function Mw(t){var e=t.stateNode;e.pendingContext?Sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sg(t,e.context,!1),dm(t,e.containerInfo)}function Hg(t,e,n,r,i){return Is(),sm(i),e.flags|=256,Vt(t,e,n,r),e.child}var Rh={dehydrated:null,treeContext:null,retryLane:0};function Vh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Lw(t,e,n){var r=e.pendingProps,i=He.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ve(He,i&1),t===null)return Ch(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ru(o,r,0,null),t=Ni(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Vh(n),e.memoizedState=Rh,t):vm(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return zE(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Lr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Lr(l,s):(s=Ni(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Vh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Rh,r}return s=t.child,t=s.sibling,r=Lr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vm(t,e){return e=ru({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function xl(t,e,n,r){return r!==null&&sm(r),zs(e,t.child,null,n),t=vm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function zE(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=gd(Error(J(422))),xl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ru({mode:"visible",children:r.children},i,0,null),s=Ni(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&zs(e,t.child,null,o),e.child.memoizedState=Vh(o),e.memoizedState=Rh,s);if(!(e.mode&1))return xl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(J(419)),r=gd(s,r,void 0),xl(t,e,o,r)}if(l=(o&t.childLanes)!==0,qt||l){if(r=yt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ir(t,i),Tn(r,t,i,-1))}return Tm(),r=gd(Error(J(421))),xl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qE.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Jt=Rr(i.nextSibling),Zt=e,$e=!0,kn=null,t!==null&&(on[an++]=Jn,on[an++]=Zn,on[an++]=Si,Jn=t.id,Zn=t.overflow,Si=e),e=vm(e,r.children),e.flags|=4096,e)}function Kg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),jh(t.return,e,n)}function xd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Ow(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vt(t,e,r.children,n),r=He.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kg(t,n,e);else if(t.tag===19)Kg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ve(He,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&gc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&gc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xd(e,!0,n,null,s);break;case"together":xd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ol(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),zi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(J(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AE(t,e,n){switch(e.tag){case 3:Mw(e),Is();break;case 5:dw(e);break;case 1:Kt(e.type)&&uc(e);break;case 4:dm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ve(fc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ve(He,He.current&1),e.flags|=128,null):n&e.child.childLanes?Lw(t,e,n):(Ve(He,He.current&1),t=sr(t,e,n),t!==null?t.sibling:null);Ve(He,He.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Ow(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ve(He,He.current),r)break;return null;case 22:case 23:return e.lanes=0,Vw(t,e,n)}return sr(t,e,n)}var Fw,Dh,Bw,Uw;Fw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dh=function(){};Bw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,yi(Vn.current);var s=null;switch(n){case"input":i=ih(t,i),r=ih(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=ah(t,i),r=ah(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lc)}ch(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ea.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ea.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Me("scroll",t),s||l===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Uw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function jt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function PE(t,e,n){var r=e.pendingProps;switch(im(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jt(e),null;case 1:return Kt(e.type)&&cc(),jt(e),null;case 3:return r=e.stateNode,As(),Oe(Ht),Oe(Pt),fm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,kn!==null&&(qh(kn),kn=null))),Dh(t,e),jt(e),null;case 5:hm(e);var i=yi(ha.current);if(n=e.type,t!==null&&e.stateNode!=null)Bw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(J(166));return jt(e),null}if(t=yi(Vn.current),pl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Pn]=e,r[ua]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<So.length;i++)Me(So[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":ng(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":ig(r,s),Me("invalid",r)}ch(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&ml(r.textContent,l,t),i=["children",""+l]):ea.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":ol(r),rg(r,s,!0);break;case"textarea":ol(r),sg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=lc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=g1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pn]=e,t[ua]=r,Fw(t,e,!1,!1),e.stateNode=t;e:{switch(o=uh(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<So.length;i++)Me(So[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":ng(t,r),i=ih(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Me("invalid",t);break;case"textarea":ig(t,r),i=ah(t,r),Me("invalid",t);break;default:i=r}ch(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?v1(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&x1(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ta(t,u):typeof u=="number"&&ta(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ea.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Me("scroll",t):u!=null&&$f(t,s,u,o))}switch(n){case"input":ol(t),rg(t,r,!1);break;case"textarea":ol(t),sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+$r(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?xs(t,!!r.multiple,s,!1):r.defaultValue!=null&&xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return jt(e),null;case 6:if(t&&e.stateNode!=null)Uw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(J(166));if(n=yi(ha.current),yi(Vn.current),pl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pn]=e,(s=r.nodeValue!==n)&&(t=Zt,t!==null))switch(t.tag){case 3:ml(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ml(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pn]=e,e.stateNode=r}return jt(e),null;case 13:if(Oe(He),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&Jt!==null&&e.mode&1&&!(e.flags&128))ow(),Is(),e.flags|=98560,s=!1;else if(s=pl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(J(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(J(317));s[Pn]=e}else Is(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;jt(e),s=!1}else kn!==null&&(qh(kn),kn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ft===0&&(ft=3):Tm())),e.updateQueue!==null&&(e.flags|=4),jt(e),null);case 4:return As(),Dh(t,e),t===null&&la(e.stateNode.containerInfo),jt(e),null;case 10:return lm(e.type._context),jt(e),null;case 17:return Kt(e.type)&&cc(),jt(e),null;case 19:if(Oe(He),s=e.memoizedState,s===null)return jt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ko(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=gc(t),o!==null){for(e.flags|=128,ko(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ve(He,He.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>Rs&&(e.flags|=128,r=!0,ko(s,!1),e.lanes=4194304)}else{if(!r)if(t=gc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$e)return jt(e),null}else 2*tt()-s.renderingStartTime>Rs&&n!==1073741824&&(e.flags|=128,r=!0,ko(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=He.current,Ve(He,r?n&1|2:n&1),e):(jt(e),null);case 22:case 23:return Nm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(jt(e),e.subtreeFlags&6&&(e.flags|=8192)):jt(e),null;case 24:return null;case 25:return null}throw Error(J(156,e.tag))}function RE(t,e){switch(im(e),e.tag){case 1:return Kt(e.type)&&cc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return As(),Oe(Ht),Oe(Pt),fm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hm(e),null;case 13:if(Oe(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(J(340));Is()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(He),null;case 4:return As(),null;case 10:return lm(e.type._context),null;case 22:case 23:return Nm(),null;case 24:return null;default:return null}}var yl=!1,zt=!1,VE=typeof WeakSet=="function"?WeakSet:Set,ce=null;function us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ze(t,e,r)}else n.current=null}function Mh(t,e,n){try{n()}catch(r){Ze(t,e,r)}}var Gg=!1;function DE(t,e){if(wh=sc,t=K1(),nm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var w;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(w=m.firstChild)!==null;)p=m,m=w;for(;;){if(m===t)break t;if(p===n&&++d===i&&(l=o),p===s&&++h===r&&(u=o),(w=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(bh={focusedElem:t,selectionRange:n},sc=!1,ce=e;ce!==null;)if(e=ce,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ce=t;else for(;ce!==null;){e=ce;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var C=T.memoizedProps,A=T.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?C:wn(e.type,C),A);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(J(163))}}catch(P){Ze(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,ce=t;break}ce=e.return}return T=Gg,Gg=!1,T}function Bo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Mh(e,n,s)}i=i.next}while(i!==r)}}function tu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Lh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function $w(t){var e=t.alternate;e!==null&&(t.alternate=null,$w(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pn],delete e[ua],delete e[Nh],delete e[yE],delete e[vE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qw(t){return t.tag===5||t.tag===3||t.tag===4}function Qg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lc));else if(r!==4&&(t=t.child,t!==null))for(Oh(t,e,n),t=t.sibling;t!==null;)Oh(t,e,n),t=t.sibling}function Fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Fh(t,e,n),t=t.sibling;t!==null;)Fh(t,e,n),t=t.sibling}var vt=null,bn=!1;function br(t,e,n){for(n=n.child;n!==null;)Ww(t,e,n),n=n.sibling}function Ww(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(Kc,n)}catch{}switch(n.tag){case 5:zt||us(n,e);case 6:var r=vt,i=bn;vt=null,br(t,e,n),vt=r,bn=i,vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vt.removeChild(n.stateNode));break;case 18:vt!==null&&(bn?(t=vt,n=n.stateNode,t.nodeType===8?ud(t.parentNode,n):t.nodeType===1&&ud(t,n),sa(t)):ud(vt,n.stateNode));break;case 4:r=vt,i=bn,vt=n.stateNode.containerInfo,bn=!0,br(t,e,n),vt=r,bn=i;break;case 0:case 11:case 14:case 15:if(!zt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Mh(n,e,o),i=i.next}while(i!==r)}br(t,e,n);break;case 1:if(!zt&&(us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ze(n,e,l)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(zt=(r=zt)||n.memoizedState!==null,br(t,e,n),zt=r):br(t,e,n);break;default:br(t,e,n)}}function Yg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VE),e.forEach(function(r){var i=WE.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:vt=l.stateNode,bn=!1;break e;case 3:vt=l.stateNode.containerInfo,bn=!0;break e;case 4:vt=l.stateNode.containerInfo,bn=!0;break e}l=l.return}if(vt===null)throw Error(J(160));Ww(s,o,i),vt=null,bn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){Ze(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hw(e,t),e=e.sibling}function Hw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),In(t),r&4){try{Bo(3,t,t.return),tu(3,t)}catch(C){Ze(t,t.return,C)}try{Bo(5,t,t.return)}catch(C){Ze(t,t.return,C)}}break;case 1:xn(e,t),In(t),r&512&&n!==null&&us(n,n.return);break;case 5:if(xn(e,t),In(t),r&512&&n!==null&&us(n,n.return),t.flags&32){var i=t.stateNode;try{ta(i,"")}catch(C){Ze(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&m1(i,s),uh(l,o);var d=uh(l,s);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?v1(i,m):h==="dangerouslySetInnerHTML"?x1(i,m):h==="children"?ta(i,m):$f(i,h,m,d)}switch(l){case"input":sh(i,s);break;case"textarea":p1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var w=s.value;w!=null?xs(i,!!s.multiple,w,!1):p!==!!s.multiple&&(s.defaultValue!=null?xs(i,!!s.multiple,s.defaultValue,!0):xs(i,!!s.multiple,s.multiple?[]:"",!1))}i[ua]=s}catch(C){Ze(t,t.return,C)}}break;case 6:if(xn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(J(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Ze(t,t.return,C)}}break;case 3:if(xn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sa(e.containerInfo)}catch(C){Ze(t,t.return,C)}break;case 4:xn(e,t),In(t);break;case 13:xn(e,t),In(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(km=tt())),r&4&&Yg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(zt=(d=zt)||h,xn(e,t),zt=d):xn(e,t),In(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ce=t,h=t.child;h!==null;){for(m=ce=h;ce!==null;){switch(p=ce,w=p.child,p.tag){case 0:case 11:case 14:case 15:Bo(4,p,p.return);break;case 1:us(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(C){Ze(r,n,C)}}break;case 5:us(p,p.return);break;case 22:if(p.memoizedState!==null){Jg(m);continue}}w!==null?(w.return=p,ce=w):Jg(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=y1("display",o))}catch(C){Ze(t,t.return,C)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(C){Ze(t,t.return,C)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xn(e,t),In(t),r&4&&Yg(t);break;case 21:break;default:xn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qw(n)){var r=n;break e}n=n.return}throw Error(J(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ta(i,""),r.flags&=-33);var s=Qg(t);Fh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Qg(t);Oh(t,l,o);break;default:throw Error(J(161))}}catch(u){Ze(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ME(t,e,n){ce=t,Kw(t)}function Kw(t,e,n){for(var r=(t.mode&1)!==0;ce!==null;){var i=ce,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||zt;l=yl;var d=zt;if(yl=o,(zt=u)&&!d)for(ce=i;ce!==null;)o=ce,u=o.child,o.tag===22&&o.memoizedState!==null?Zg(i):u!==null?(u.return=o,ce=u):Zg(i);for(;s!==null;)ce=s,Kw(s),s=s.sibling;ce=i,yl=l,zt=d}Xg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ce=s):Xg(t)}}function Xg(t){for(;ce!==null;){var e=ce;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:zt||tu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!zt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Vg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&sa(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(J(163))}zt||e.flags&512&&Lh(e)}catch(p){Ze(e,e.return,p)}}if(e===t){ce=null;break}if(n=e.sibling,n!==null){n.return=e.return,ce=n;break}ce=e.return}}function Jg(t){for(;ce!==null;){var e=ce;if(e===t){ce=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ce=n;break}ce=e.return}}function Zg(t){for(;ce!==null;){var e=ce;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tu(4,e)}catch(u){Ze(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ze(e,i,u)}}var s=e.return;try{Lh(e)}catch(u){Ze(e,s,u)}break;case 5:var o=e.return;try{Lh(e)}catch(u){Ze(e,o,u)}}}catch(u){Ze(e,e.return,u)}if(e===t){ce=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ce=l;break}ce=e.return}}var LE=Math.ceil,vc=mr.ReactCurrentDispatcher,wm=mr.ReactCurrentOwner,hn=mr.ReactCurrentBatchConfig,Ee=0,yt=null,it=null,Nt=0,Xt=0,ds=ti(0),ft=0,ga=null,zi=0,nu=0,bm=0,Uo=null,$t=null,km=0,Rs=1/0,Qn=null,wc=!1,Bh=null,Dr=null,vl=!1,Sr=null,bc=0,$o=0,Uh=null,Fl=-1,Bl=0;function Lt(){return Ee&6?tt():Fl!==-1?Fl:Fl=tt()}function Mr(t){return t.mode&1?Ee&2&&Nt!==0?Nt&-Nt:bE.transition!==null?(Bl===0&&(Bl=z1()),Bl):(t=je,t!==0||(t=window.event,t=t===void 0?16:L1(t.type)),t):1}function Tn(t,e,n,r){if(50<$o)throw $o=0,Uh=null,Error(J(185));Aa(t,n,r),(!(Ee&2)||t!==yt)&&(t===yt&&(!(Ee&2)&&(nu|=n),ft===4&&Cr(t,Nt)),Gt(t,r),n===1&&Ee===0&&!(e.mode&1)&&(Rs=tt()+500,Jc&&ni()))}function Gt(t,e){var n=t.callbackNode;bT(t,e);var r=ic(t,t===yt?Nt:0);if(r===0)n!==null&&lg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&lg(n),e===1)t.tag===0?wE(ex.bind(null,t)):rw(ex.bind(null,t)),gE(function(){!(Ee&6)&&ni()}),n=null;else{switch(A1(r)){case 1:n=Gf;break;case 4:n=S1;break;case 16:n=rc;break;case 536870912:n=I1;break;default:n=rc}n=tb(n,Gw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Gw(t,e){if(Fl=-1,Bl=0,Ee&6)throw Error(J(327));var n=t.callbackNode;if(ks()&&t.callbackNode!==n)return null;var r=ic(t,t===yt?Nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=kc(t,r);else{e=r;var i=Ee;Ee|=2;var s=Yw();(yt!==t||Nt!==e)&&(Qn=null,Rs=tt()+500,_i(t,e));do try{BE();break}catch(l){Qw(t,l)}while(!0);am(),vc.current=s,Ee=i,it!==null?e=0:(yt=null,Nt=0,e=ft)}if(e!==0){if(e===2&&(i=ph(t),i!==0&&(r=i,e=$h(t,i))),e===1)throw n=ga,_i(t,0),Cr(t,r),Gt(t,tt()),n;if(e===6)Cr(t,r);else{if(i=t.current.alternate,!(r&30)&&!OE(i)&&(e=kc(t,r),e===2&&(s=ph(t),s!==0&&(r=s,e=$h(t,s))),e===1))throw n=ga,_i(t,0),Cr(t,r),Gt(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(J(345));case 2:fi(t,$t,Qn);break;case 3:if(Cr(t,r),(r&130023424)===r&&(e=km+500-tt(),10<e)){if(ic(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Lt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_h(fi.bind(null,t,$t,Qn),e);break}fi(t,$t,Qn);break;case 4:if(Cr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Nn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*LE(r/1960))-r,10<r){t.timeoutHandle=_h(fi.bind(null,t,$t,Qn),r);break}fi(t,$t,Qn);break;case 5:fi(t,$t,Qn);break;default:throw Error(J(329))}}}return Gt(t,tt()),t.callbackNode===n?Gw.bind(null,t):null}function $h(t,e){var n=Uo;return t.current.memoizedState.isDehydrated&&(_i(t,e).flags|=256),t=kc(t,e),t!==2&&(e=$t,$t=n,e!==null&&qh(e)),t}function qh(t){$t===null?$t=t:$t.push.apply($t,t)}function OE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!En(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Cr(t,e){for(e&=~bm,e&=~nu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Nn(e),r=1<<n;t[n]=-1,e&=~r}}function ex(t){if(Ee&6)throw Error(J(327));ks();var e=ic(t,0);if(!(e&1))return Gt(t,tt()),null;var n=kc(t,e);if(t.tag!==0&&n===2){var r=ph(t);r!==0&&(e=r,n=$h(t,r))}if(n===1)throw n=ga,_i(t,0),Cr(t,e),Gt(t,tt()),n;if(n===6)throw Error(J(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fi(t,$t,Qn),Gt(t,tt()),null}function _m(t,e){var n=Ee;Ee|=1;try{return t(e)}finally{Ee=n,Ee===0&&(Rs=tt()+500,Jc&&ni())}}function Ai(t){Sr!==null&&Sr.tag===0&&!(Ee&6)&&ks();var e=Ee;Ee|=1;var n=hn.transition,r=je;try{if(hn.transition=null,je=1,t)return t()}finally{je=r,hn.transition=n,Ee=e,!(Ee&6)&&ni()}}function Nm(){Xt=ds.current,Oe(ds)}function _i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pE(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(im(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cc();break;case 3:As(),Oe(Ht),Oe(Pt),fm();break;case 5:hm(r);break;case 4:As();break;case 13:Oe(He);break;case 19:Oe(He);break;case 10:lm(r.type._context);break;case 22:case 23:Nm()}n=n.return}if(yt=t,it=t=Lr(t.current,null),Nt=Xt=e,ft=0,ga=null,bm=nu=zi=0,$t=Uo=null,xi!==null){for(e=0;e<xi.length;e++)if(n=xi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xi=null}return t}function Qw(t,e){do{var n=it;try{if(am(),Ml.current=yc,xc){for(var r=Ke.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xc=!1}if(Ii=0,xt=ht=Ke=null,Fo=!1,fa=0,wm.current=null,n===null||n.return===null){ft=1,ga=e,it=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=Nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var w=Bg(o);if(w!==null){w.flags&=-257,Ug(w,o,l,s,e),w.mode&1&&Fg(s,d,e),e=w,u=d;var T=e.updateQueue;if(T===null){var C=new Set;C.add(u),e.updateQueue=C}else T.add(u);break e}else{if(!(e&1)){Fg(s,d,e),Tm();break e}u=Error(J(426))}}else if($e&&l.mode&1){var A=Bg(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ug(A,o,l,s,e),sm(Ps(u,l));break e}}s=u=Ps(u,l),ft!==4&&(ft=2),Uo===null?Uo=[s]:Uo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=Aw(s,u,e);Rg(s,b);break e;case 1:l=u;var x=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Dr===null||!Dr.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var P=Pw(s,l,e);Rg(s,P);break e}}s=s.return}while(s!==null)}Jw(n)}catch(D){e=D,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function Yw(){var t=vc.current;return vc.current=yc,t===null?yc:t}function Tm(){(ft===0||ft===3||ft===2)&&(ft=4),yt===null||!(zi&268435455)&&!(nu&268435455)||Cr(yt,Nt)}function kc(t,e){var n=Ee;Ee|=2;var r=Yw();(yt!==t||Nt!==e)&&(Qn=null,_i(t,e));do try{FE();break}catch(i){Qw(t,i)}while(!0);if(am(),Ee=n,vc.current=r,it!==null)throw Error(J(261));return yt=null,Nt=0,ft}function FE(){for(;it!==null;)Xw(it)}function BE(){for(;it!==null&&!hT();)Xw(it)}function Xw(t){var e=eb(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?Jw(t):it=e,wm.current=null}function Jw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RE(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,it=null;return}}else if(n=PE(n,e,Xt),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ft===0&&(ft=5)}function fi(t,e,n){var r=je,i=hn.transition;try{hn.transition=null,je=1,UE(t,e,n,r)}finally{hn.transition=i,je=r}return null}function UE(t,e,n,r){do ks();while(Sr!==null);if(Ee&6)throw Error(J(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(J(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(kT(t,s),t===yt&&(it=yt=null,Nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||vl||(vl=!0,tb(rc,function(){return ks(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hn.transition,hn.transition=null;var o=je;je=1;var l=Ee;Ee|=4,wm.current=null,DE(t,n),Hw(n,t),lE(bh),sc=!!wh,bh=wh=null,t.current=n,ME(n),fT(),Ee=l,je=o,hn.transition=s}else t.current=n;if(vl&&(vl=!1,Sr=t,bc=i),s=t.pendingLanes,s===0&&(Dr=null),gT(n.stateNode),Gt(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wc)throw wc=!1,t=Bh,Bh=null,t;return bc&1&&t.tag!==0&&ks(),s=t.pendingLanes,s&1?t===Uh?$o++:($o=0,Uh=t):$o=0,ni(),null}function ks(){if(Sr!==null){var t=A1(bc),e=hn.transition,n=je;try{if(hn.transition=null,je=16>t?16:t,Sr===null)var r=!1;else{if(t=Sr,Sr=null,bc=0,Ee&6)throw Error(J(331));var i=Ee;for(Ee|=4,ce=t.current;ce!==null;){var s=ce,o=s.child;if(ce.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ce=d;ce!==null;){var h=ce;switch(h.tag){case 0:case 11:case 15:Bo(8,h,s)}var m=h.child;if(m!==null)m.return=h,ce=m;else for(;ce!==null;){h=ce;var p=h.sibling,w=h.return;if($w(h),h===d){ce=null;break}if(p!==null){p.return=w,ce=p;break}ce=w}}}var T=s.alternate;if(T!==null){var C=T.child;if(C!==null){T.child=null;do{var A=C.sibling;C.sibling=null,C=A}while(C!==null)}}ce=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ce=o;else e:for(;ce!==null;){if(s=ce,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Bo(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ce=b;break e}ce=s.return}}var x=t.current;for(ce=x;ce!==null;){o=ce;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,ce=v;else e:for(o=x;ce!==null;){if(l=ce,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tu(9,l)}}catch(D){Ze(l,l.return,D)}if(l===o){ce=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,ce=P;break e}ce=l.return}}if(Ee=i,ni(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(Kc,t)}catch{}r=!0}return r}finally{je=n,hn.transition=e}}return!1}function tx(t,e,n){e=Ps(n,e),e=Aw(t,e,1),t=Vr(t,e,1),e=Lt(),t!==null&&(Aa(t,1,e),Gt(t,e))}function Ze(t,e,n){if(t.tag===3)tx(t,t,n);else for(;e!==null;){if(e.tag===3){tx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Dr===null||!Dr.has(r))){t=Ps(n,t),t=Pw(e,t,1),e=Vr(e,t,1),t=Lt(),e!==null&&(Aa(e,1,t),Gt(e,t));break}}e=e.return}}function $E(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Lt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(Nt&n)===n&&(ft===4||ft===3&&(Nt&130023424)===Nt&&500>tt()-km?_i(t,0):bm|=n),Gt(t,e)}function Zw(t,e){e===0&&(t.mode&1?(e=cl,cl<<=1,!(cl&130023424)&&(cl=4194304)):e=1);var n=Lt();t=ir(t,e),t!==null&&(Aa(t,e,n),Gt(t,n))}function qE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Zw(t,n)}function WE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(J(314))}r!==null&&r.delete(e),Zw(t,n)}var eb;eb=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qt=!1,AE(t,e,n);qt=!!(t.flags&131072)}else qt=!1,$e&&e.flags&1048576&&iw(e,hc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ol(t,e),t=e.pendingProps;var i=Ss(e,Pt.current);bs(e,n),i=pm(null,e,r,t,i,n);var s=gm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Kt(r)?(s=!0,uc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,um(e),i.updater=eu,e.stateNode=i,i._reactInternals=e,Ih(e,r,t,n),e=Ph(null,e,r,!0,s,n)):(e.tag=0,$e&&s&&rm(e),Vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ol(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=KE(r),t=wn(r,t),i){case 0:e=Ah(null,e,r,t,n);break e;case 1:e=Wg(null,e,r,t,n);break e;case 11:e=$g(null,e,r,t,n);break e;case 14:e=qg(null,e,r,wn(r.type,t),n);break e}throw Error(J(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),Ah(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),Wg(t,e,r,i,n);case 3:e:{if(Mw(e),t===null)throw Error(J(387));r=e.pendingProps,s=e.memoizedState,i=s.element,uw(t,e),pc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ps(Error(J(423)),e),e=Hg(t,e,r,n,i);break e}else if(r!==i){i=Ps(Error(J(424)),e),e=Hg(t,e,r,n,i);break e}else for(Jt=Rr(e.stateNode.containerInfo.firstChild),Zt=e,$e=!0,kn=null,n=lw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Is(),r===i){e=sr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return dw(e),t===null&&Ch(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,kh(r,i)?o=null:s!==null&&kh(r,s)&&(e.flags|=32),Dw(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&Ch(e),null;case 13:return Lw(t,e,n);case 4:return dm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=zs(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),$g(t,e,r,i,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ve(fc,r._currentValue),r._currentValue=o,s!==null)if(En(s.value,o)){if(s.children===i.children&&!Ht.current){e=sr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=er(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),jh(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(J(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),jh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,bs(e,n),i=pn(i),r=r(i),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,i=wn(r,e.pendingProps),i=wn(r.type,i),qg(t,e,r,i,n);case 15:return Rw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wn(r,i),Ol(t,e),e.tag=1,Kt(r)?(t=!0,uc(e)):t=!1,bs(e,n),zw(e,r,i),Ih(e,r,i,n),Ph(null,e,r,!0,t,n);case 19:return Ow(t,e,n);case 22:return Vw(t,e,n)}throw Error(J(156,e.tag))};function tb(t,e){return j1(t,e)}function HE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(t,e,n,r){return new HE(t,e,n,r)}function Em(t){return t=t.prototype,!(!t||!t.isReactComponent)}function KE(t){if(typeof t=="function")return Em(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wf)return 11;if(t===Hf)return 14}return 2}function Lr(t,e){var n=t.alternate;return n===null?(n=un(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ul(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Em(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ts:return Ni(n.children,i,s,e);case qf:o=8,i|=8;break;case eh:return t=un(12,n,e,i|2),t.elementType=eh,t.lanes=s,t;case th:return t=un(13,n,e,i),t.elementType=th,t.lanes=s,t;case nh:return t=un(19,n,e,i),t.elementType=nh,t.lanes=s,t;case d1:return ru(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case c1:o=10;break e;case u1:o=9;break e;case Wf:o=11;break e;case Hf:o=14;break e;case Nr:o=16,r=null;break e}throw Error(J(130,t==null?t:typeof t,""))}return e=un(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ni(t,e,n,r){return t=un(7,t,r,e),t.lanes=n,t}function ru(t,e,n,r){return t=un(22,t,r,e),t.elementType=d1,t.lanes=n,t.stateNode={isHidden:!1},t}function yd(t,e,n){return t=un(6,t,null,e),t.lanes=n,t}function vd(t,e,n){return e=un(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Cm(t,e,n,r,i,s,o,l,u){return t=new GE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=un(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},um(s),t}function QE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function nb(t){if(!t)return qr;t=t._reactInternals;e:{if(Oi(t)!==t||t.tag!==1)throw Error(J(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(J(171))}if(t.tag===1){var n=t.type;if(Kt(n))return nw(t,n,e)}return e}function rb(t,e,n,r,i,s,o,l,u){return t=Cm(n,r,!0,t,i,s,o,l,u),t.context=nb(null),n=t.current,r=Lt(),i=Mr(n),s=er(r,i),s.callback=e??null,Vr(n,s,i),t.current.lanes=i,Aa(t,i,r),Gt(t,r),t}function iu(t,e,n,r){var i=e.current,s=Lt(),o=Mr(i);return n=nb(n),e.context===null?e.context=n:e.pendingContext=n,e=er(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vr(i,e,o),t!==null&&(Tn(t,i,o,s),Dl(t,i,o)),o}function _c(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function nx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function jm(t,e){nx(t,e),(t=t.alternate)&&nx(t,e)}function YE(){return null}var ib=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sm(t){this._internalRoot=t}su.prototype.render=Sm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(J(409));iu(t,e,null,null)};su.prototype.unmount=Sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ai(function(){iu(null,t,null,null)}),e[rr]=null}};function su(t){this._internalRoot=t}su.prototype.unstable_scheduleHydration=function(t){if(t){var e=V1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&M1(t)}};function Im(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ou(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function rx(){}function XE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=_c(o);s.call(d)}}var o=rb(e,r,t,0,null,!1,!1,"",rx);return t._reactRootContainer=o,t[rr]=o.current,la(t.nodeType===8?t.parentNode:t),Ai(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=_c(u);l.call(d)}}var u=Cm(t,0,!1,null,null,!1,!1,"",rx);return t._reactRootContainer=u,t[rr]=u.current,la(t.nodeType===8?t.parentNode:t),Ai(function(){iu(e,u,n,r)}),u}function au(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=_c(o);l.call(u)}}iu(e,o,t,i)}else o=XE(n,e,t,i,r);return _c(o)}P1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=jo(e.pendingLanes);n!==0&&(Qf(e,n|1),Gt(e,tt()),!(Ee&6)&&(Rs=tt()+500,ni()))}break;case 13:Ai(function(){var r=ir(t,1);if(r!==null){var i=Lt();Tn(r,t,1,i)}}),jm(t,1)}};Yf=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=Lt();Tn(e,t,134217728,n)}jm(t,134217728)}};R1=function(t){if(t.tag===13){var e=Mr(t),n=ir(t,e);if(n!==null){var r=Lt();Tn(n,t,e,r)}jm(t,e)}};V1=function(){return je};D1=function(t,e){var n=je;try{return je=t,e()}finally{je=n}};hh=function(t,e,n){switch(e){case"input":if(sh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xc(r);if(!i)throw Error(J(90));f1(r),sh(r,i)}}}break;case"textarea":p1(t,n);break;case"select":e=n.value,e!=null&&xs(t,!!n.multiple,e,!1)}};k1=_m;_1=Ai;var JE={usingClientEntryPoint:!1,Events:[Ra,ss,Xc,w1,b1,_m]},_o={findFiberByHostInstance:gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZE={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=E1(t),t===null?null:t.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||YE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{Kc=wl.inject(ZE),Rn=wl}catch{}}nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JE;nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Im(e))throw Error(J(200));return QE(t,e,null,n)};nn.createRoot=function(t,e){if(!Im(t))throw Error(J(299));var n=!1,r="",i=ib;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Cm(t,1,!1,null,null,n,!1,r,i),t[rr]=e.current,la(t.nodeType===8?t.parentNode:t),new Sm(e)};nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(J(188)):(t=Object.keys(t).join(","),Error(J(268,t)));return t=E1(e),t=t===null?null:t.stateNode,t};nn.flushSync=function(t){return Ai(t)};nn.hydrate=function(t,e,n){if(!ou(e))throw Error(J(200));return au(null,t,e,!0,n)};nn.hydrateRoot=function(t,e,n){if(!Im(t))throw Error(J(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ib;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=rb(e,null,t,1,n??null,i,!1,s,o),t[rr]=e.current,la(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new su(e)};nn.render=function(t,e,n){if(!ou(e))throw Error(J(200));return au(null,t,e,!1,n)};nn.unmountComponentAtNode=function(t){if(!ou(t))throw Error(J(40));return t._reactRootContainer?(Ai(function(){au(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};nn.unstable_batchedUpdates=_m;nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ou(n))throw Error(J(200));if(t==null||t._reactInternals===void 0)throw Error(J(38));return au(t,e,n,!1,r)};nn.version="18.3.1-next-f1338f8080-20240426";function sb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sb)}catch(t){console.error(t)}}sb(),s1.exports=nn;var qn=s1.exports,ix=qn;Jd.createRoot=ix.createRoot,Jd.hydrateRoot=ix.hydrateRoot;const zm=z.createContext({});function ri(t){const e=z.useRef(null);return e.current===null&&(e.current=t()),e.current}const Am=typeof window<"u",Pm=Am?z.useLayoutEffect:z.useEffect,lu=z.createContext(null);function Rm(t,e){t.indexOf(e)===-1&&t.push(e)}function Vm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function eC([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}const or=(t,e,n)=>n>e?e:n<t?t:n;let Dm=()=>{};const ar={},ob=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function ab(t){return typeof t=="object"&&t!==null}const lb=t=>/^0[^.\s]+$/u.test(t);function Mm(t){let e;return()=>(e===void 0&&(e=t()),e)}const fn=t=>t,tC=(t,e)=>n=>e(t(n)),Da=(...t)=>t.reduce(tC),xa=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Lm{constructor(){this.subscriptions=[]}add(e){return Rm(this.subscriptions,e),()=>Vm(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Dn=t=>t*1e3,dn=t=>t/1e3;function cb(t,e){return e?t*(1e3/e):0}const ub=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,nC=1e-7,rC=12;function iC(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=ub(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>nC&&++l<rC);return o}function Ma(t,e,n,r){if(t===e&&n===r)return fn;const i=s=>iC(s,0,1,t,n);return s=>s===0||s===1?s:ub(i(s),e,r)}const db=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,hb=t=>e=>1-t(1-e),fb=Ma(.33,1.53,.69,.99),Om=hb(fb),mb=db(Om),pb=t=>(t*=2)<1?.5*Om(t):.5*(2-Math.pow(2,-10*(t-1))),Fm=t=>1-Math.sin(Math.acos(t)),gb=hb(Fm),xb=db(Fm),sC=Ma(.42,0,1,1),oC=Ma(0,0,.58,1),yb=Ma(.42,0,.58,1),aC=t=>Array.isArray(t)&&typeof t[0]!="number",vb=t=>Array.isArray(t)&&typeof t[0]=="number",lC={linear:fn,easeIn:sC,easeInOut:yb,easeOut:oC,circIn:Fm,circInOut:xb,circOut:gb,backIn:Om,backInOut:mb,backOut:fb,anticipate:pb},cC=t=>typeof t=="string",sx=t=>{if(vb(t)){Dm(t.length===4);const[e,n,r,i]=t;return Ma(e,n,r,i)}else if(cC(t))return lC[t];return t},bl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function uC(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,m=!1,p=!1)=>{const T=p&&i?n:r;return m&&o.add(h),T.has(h)||T.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const dC=40;function wb(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=bl.reduce((v,P)=>(v[P]=uC(s),v),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:m,preRender:p,render:w,postRender:T}=o,C=()=>{const v=ar.useManualTiming?i.timestamp:performance.now();n=!1,ar.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(v-i.timestamp,dC),1)),i.timestamp=v,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),m.process(i),p.process(i),w.process(i),T.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(C))},A=()=>{n=!0,r=!0,i.isProcessing||t(C)};return{schedule:bl.reduce((v,P)=>{const D=o[P];return v[P]=(M,k=!1,y=!1)=>(n||A(),D.schedule(M,k,y)),v},{}),cancel:v=>{for(let P=0;P<bl.length;P++)o[bl[P]].cancel(v)},state:i,steps:o}}const{schedule:Fe,cancel:lr,state:wt,steps:wd}=wb(typeof requestAnimationFrame<"u"?requestAnimationFrame:fn,!0);let $l;function hC(){$l=void 0}const Wt={now:()=>($l===void 0&&Wt.set(wt.isProcessing||ar.useManualTiming?wt.timestamp:performance.now()),$l),set:t=>{$l=t,queueMicrotask(hC)}},bb=t=>e=>typeof e=="string"&&e.startsWith(t),kb=bb("--"),fC=bb("var(--"),Bm=t=>fC(t)?mC.test(t.split("/*")[0].trim()):!1,mC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ws={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ya={...Ws,transform:t=>or(0,1,t)},kl={...Ws,default:1},qo=t=>Math.round(t*1e5)/1e5,Um=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function pC(t){return t==null}const gC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$m=(t,e)=>n=>!!(typeof n=="string"&&gC.test(n)&&n.startsWith(t)||e&&!pC(n)&&Object.prototype.hasOwnProperty.call(n,e)),_b=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(Um);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},xC=t=>or(0,255,t),bd={...Ws,transform:t=>Math.round(xC(t))},vi={test:$m("rgb","red"),parse:_b("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+bd.transform(t)+", "+bd.transform(e)+", "+bd.transform(n)+", "+qo(ya.transform(r))+")"};function yC(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const Wh={test:$m("#"),parse:yC,transform:vi.transform},La=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_r=La("deg"),Mn=La("%"),pe=La("px"),vC=La("vh"),wC=La("vw"),ox={...Mn,parse:t=>Mn.parse(t)/100,transform:t=>Mn.transform(t*100)},hs={test:$m("hsl","hue"),parse:_b("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Mn.transform(qo(e))+", "+Mn.transform(qo(n))+", "+qo(ya.transform(r))+")"},rt={test:t=>vi.test(t)||Wh.test(t)||hs.test(t),parse:t=>vi.test(t)?vi.parse(t):hs.test(t)?hs.parse(t):Wh.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?vi.transform(t):hs.transform(t),getAnimatableNone:t=>{const e=rt.parse(t);return e.alpha=0,rt.transform(e)}},bC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function kC(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Um))==null?void 0:e.length)||0)+(((n=t.match(bC))==null?void 0:n.length)||0)>0}const Nb="number",Tb="color",_C="var",NC="var(",ax="${}",TC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function va(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(TC,u=>(rt.test(u)?(r.color.push(s),i.push(Tb),n.push(rt.parse(u))):u.startsWith(NC)?(r.var.push(s),i.push(_C),n.push(u)):(r.number.push(s),i.push(Nb),n.push(parseFloat(u))),++s,ax)).split(ax);return{values:n,split:l,indexes:r,types:i}}function Eb(t){return va(t).values}function Cb(t){const{split:e,types:n}=va(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===Nb?s+=qo(i[o]):l===Tb?s+=rt.transform(i[o]):s+=i[o]}return s}}const EC=t=>typeof t=="number"?0:rt.test(t)?rt.getAnimatableNone(t):t;function CC(t){const e=Eb(t);return Cb(t)(e.map(EC))}const Wr={test:kC,parse:Eb,createTransformer:Cb,getAnimatableNone:CC};function kd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jC({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=kd(u,l,t+1/3),s=kd(u,l,t),o=kd(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Nc(t,e){return n=>n>0?e:t}const qe=(t,e,n)=>t+(e-t)*n,_d=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},SC=[Wh,vi,hs],IC=t=>SC.find(e=>e.test(t));function lx(t){const e=IC(t);if(!e)return!1;let n=e.parse(t);return e===hs&&(n=jC(n)),n}const cx=(t,e)=>{const n=lx(t),r=lx(e);if(!n||!r)return Nc(t,e);const i={...n};return s=>(i.red=_d(n.red,r.red,s),i.green=_d(n.green,r.green,s),i.blue=_d(n.blue,r.blue,s),i.alpha=qe(n.alpha,r.alpha,s),vi.transform(i))},Hh=new Set(["none","hidden"]);function zC(t,e){return Hh.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function AC(t,e){return n=>qe(t,e,n)}function qm(t){return typeof t=="number"?AC:typeof t=="string"?Bm(t)?Nc:rt.test(t)?cx:VC:Array.isArray(t)?jb:typeof t=="object"?rt.test(t)?cx:PC:Nc}function jb(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>qm(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function PC(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=qm(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function RC(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],l=t.values[o]??0;n[i]=l,r[s]++}return n}const VC=(t,e)=>{const n=Wr.createTransformer(e),r=va(t),i=va(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?Hh.has(t)&&!i.values.length||Hh.has(e)&&!r.values.length?zC(t,e):Da(jb(RC(r,i),i.values),n):Nc(t,e)};function Sb(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?qe(t,e,n):qm(t)(t,e)}const DC=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Fe.update(e,n),stop:()=>lr(e),now:()=>wt.isProcessing?wt.timestamp:Wt.now()}},Ib=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Tc=2e4;function Wm(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Tc;)e+=n,r=t.next(e);return e>=Tc?1/0:e}function MC(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Wm(r),Tc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:dn(i)}}const LC=5;function zb(t,e,n){const r=Math.max(e-LC,0);return cb(n-t(r),e-r)}const Je={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Nd=.001;function OC({duration:t=Je.duration,bounce:e=Je.bounce,velocity:n=Je.velocity,mass:r=Je.mass}){let i,s,o=1-e;o=or(Je.minDamping,Je.maxDamping,o),t=or(Je.minDuration,Je.maxDuration,dn(t)),o<1?(i=d=>{const h=d*o,m=h*t,p=h-n,w=Kh(d,o),T=Math.exp(-m);return Nd-p/w*T},s=d=>{const m=d*o*t,p=m*n+n,w=Math.pow(o,2)*Math.pow(d,2)*t,T=Math.exp(-m),C=Kh(Math.pow(d,2),o);return(-i(d)+Nd>0?-1:1)*((p-w)*T)/C}):(i=d=>{const h=Math.exp(-d*t),m=(d-n)*t+1;return-Nd+h*m},s=d=>{const h=Math.exp(-d*t),m=(n-d)*(t*t);return h*m});const l=5/t,u=BC(i,s,l);if(t=Dn(t),isNaN(u))return{stiffness:Je.stiffness,damping:Je.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const FC=12;function BC(t,e,n){let r=n;for(let i=1;i<FC;i++)r=r-t(r)/e(r);return r}function Kh(t,e){return t*Math.sqrt(1-e*e)}const UC=["duration","bounce"],$C=["stiffness","damping","mass"];function ux(t,e){return e.some(n=>t[n]!==void 0)}function qC(t){let e={velocity:Je.velocity,stiffness:Je.stiffness,damping:Je.damping,mass:Je.mass,isResolvedFromDuration:!1,...t};if(!ux(t,$C)&&ux(t,UC))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*or(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Je.mass,stiffness:i,damping:s}}else{const n=OC(t);e={...e,...n,mass:Je.mass},e.isResolvedFromDuration=!0}return e}function Ec(t=Je.visualDuration,e=Je.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:m,velocity:p,isResolvedFromDuration:w}=qC({...n,velocity:-dn(n.velocity||0)}),T=p||0,C=d/(2*Math.sqrt(u*h)),A=o-s,b=dn(Math.sqrt(u/h)),x=Math.abs(A)<5;r||(r=x?Je.restSpeed.granular:Je.restSpeed.default),i||(i=x?Je.restDelta.granular:Je.restDelta.default);let v;if(C<1){const D=Kh(b,C);v=M=>{const k=Math.exp(-C*b*M);return o-k*((T+C*b*A)/D*Math.sin(D*M)+A*Math.cos(D*M))}}else if(C===1)v=D=>o-Math.exp(-b*D)*(A+(T+b*A)*D);else{const D=b*Math.sqrt(C*C-1);v=M=>{const k=Math.exp(-C*b*M),y=Math.min(D*M,300);return o-k*((T+C*b*A)*Math.sinh(y)+D*A*Math.cosh(y))/D}}const P={calculatedDuration:w&&m||null,next:D=>{const M=v(D);if(w)l.done=D>=m;else{let k=D===0?T:0;C<1&&(k=D===0?Dn(T):zb(v,D,M));const y=Math.abs(k)<=r,_=Math.abs(o-M)<=i;l.done=y&&_}return l.value=l.done?o:M,l},toString:()=>{const D=Math.min(Wm(P),Tc),M=Ib(k=>P.next(D*k).value,D,30);return D+"ms "+M},toTransition:()=>{}};return P}Ec.applyToOptions=t=>{const e=MC(t,100,Ec);return t.ease=e.ease,t.duration=Dn(e.duration),t.type="keyframes",t};function Gh({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const m=t[0],p={done:!1,value:m},w=y=>l!==void 0&&y<l||u!==void 0&&y>u,T=y=>l===void 0?u:u===void 0||Math.abs(l-y)<Math.abs(u-y)?l:u;let C=n*e;const A=m+C,b=o===void 0?A:o(A);b!==A&&(C=b-m);const x=y=>-C*Math.exp(-y/r),v=y=>b+x(y),P=y=>{const _=x(y),E=v(y);p.done=Math.abs(_)<=d,p.value=p.done?b:E};let D,M;const k=y=>{w(p.value)&&(D=y,M=Ec({keyframes:[p.value,T(p.value)],velocity:zb(v,y,p.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return k(0),{calculatedDuration:null,next:y=>{let _=!1;return!M&&D===void 0&&(_=!0,P(y),k(y)),D!==void 0&&y>=D?M.next(y-D):(!_&&P(y),p)}}}function WC(t,e,n){const r=[],i=n||ar.mix||Sb,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||fn:e;l=Da(u,l)}r.push(l)}return r}function Ab(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Dm(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=WC(e,r,i),u=l.length,d=h=>{if(o&&h<t[0])return e[0];let m=0;if(u>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const p=xa(t[m],t[m+1],h);return l[m](p)};return n?h=>d(or(t[0],t[s-1],h)):d}function HC(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=xa(0,e,r);t.push(qe(n,1,i))}}function KC(t){const e=[0];return HC(e,t.length-1),e}function GC(t,e){return t.map(n=>n*e)}function QC(t,e){return t.map(()=>e||yb).splice(0,t.length-1)}function Wo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=aC(r)?r.map(sx):sx(r),s={done:!1,value:e[0]},o=GC(n&&n.length===e.length?n:KC(e),t),l=Ab(o,e,{ease:Array.isArray(i)?i:QC(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const YC=t=>t!==null;function Hm(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(YC),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const XC={decay:Gh,inertia:Gh,tween:Wo,keyframes:Wo,spring:Ec};function Pb(t){typeof t.type=="string"&&(t.type=XC[t.type])}class Km{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const JC=t=>t/100;class Gm extends Km{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Wt.now()&&this.tick(Wt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Pb(e);const{type:n=Wo,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const u=n||Wo;u!==Wo&&typeof l[0]!="number"&&(this.mixKeyframes=Da(JC,Sb(l[0],l[1])),l=[0,100]);const d=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Wm(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:m,repeatType:p,repeatDelay:w,type:T,onUpdate:C,finalKeyframe:A}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let v=this.currentTime,P=r;if(m){const y=Math.min(this.currentTime,i)/l;let _=Math.floor(y),E=y%1;!E&&y>=1&&(E=1),E===1&&_--,_=Math.min(_,m+1),!!(_%2)&&(p==="reverse"?(E=1-E,w&&(E-=w/l)):p==="mirror"&&(P=o)),v=or(0,1,E)*l}const D=x?{done:!1,value:h[0]}:P.next(v);s&&(D.value=s(D.value));let{done:M}=D;!x&&u!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return k&&T!==Gh&&(D.value=Hm(h,this.options,A,this.speed)),C&&C(D.value),k&&this.finish(),D}then(e,n){return this.finished.then(e,n)}get duration(){return dn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+dn(e)}get time(){return dn(this.currentTime)}set time(e){var n;e=Dn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Wt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=dn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=DC,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Wt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function ZC(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const wi=t=>t*180/Math.PI,Qh=t=>{const e=wi(Math.atan2(t[1],t[0]));return Yh(e)},e4={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Qh,rotateZ:Qh,skewX:t=>wi(Math.atan(t[1])),skewY:t=>wi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},Yh=t=>(t=t%360,t<0&&(t+=360),t),dx=Qh,hx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),fx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),t4={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hx,scaleY:fx,scale:t=>(hx(t)+fx(t))/2,rotateX:t=>Yh(wi(Math.atan2(t[6],t[5]))),rotateY:t=>Yh(wi(Math.atan2(-t[2],t[0]))),rotateZ:dx,rotate:dx,skewX:t=>wi(Math.atan(t[4])),skewY:t=>wi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Xh(t){return t.includes("scale")?1:0}function Jh(t,e){if(!t||t==="none")return Xh(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=t4,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=e4,i=l}if(!i)return Xh(e);const s=r[e],o=i[1].split(",").map(r4);return typeof s=="function"?s(o):o[s]}const n4=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Jh(n,e)};function r4(t){return parseFloat(t.trim())}const Hs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ks=new Set(Hs),mx=t=>t===Ws||t===pe,i4=new Set(["x","y","z"]),s4=Hs.filter(t=>!i4.has(t));function o4(t){const e=[];return s4.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Ti={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Jh(e,"x"),y:(t,{transform:e})=>Jh(e,"y")};Ti.translateX=Ti.x;Ti.translateY=Ti.y;const Ei=new Set;let Zh=!1,ef=!1,tf=!1;function Rb(){if(ef){const t=Array.from(Ei).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=o4(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}ef=!1,Zh=!1,Ei.forEach(t=>t.complete(tf)),Ei.clear()}function Vb(){Ei.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(ef=!0)})}function a4(){tf=!0,Vb(),Rb(),tf=!1}class Qm{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ei.add(this),Zh||(Zh=!0,Fe.read(Vb),Fe.resolveKeyframes(Rb))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}ZC(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ei.delete(this)}cancel(){this.state==="scheduled"&&(Ei.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const l4=t=>t.startsWith("--");function c4(t,e,n){l4(e)?t.style.setProperty(e,n):t.style[e]=n}const u4=Mm(()=>window.ScrollTimeline!==void 0),d4={};function h4(t,e){const n=Mm(t);return()=>d4[e]??n()}const Db=h4(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Io=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,px={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Io([0,.65,.55,1]),circOut:Io([.55,0,1,.45]),backIn:Io([.31,.01,.66,-.59]),backOut:Io([.33,1.53,.69,.99])};function Mb(t,e){if(t)return typeof t=="function"?Db()?Ib(t,e):"ease-out":vb(t)?Io(t):Array.isArray(t)?t.map(n=>Mb(n,e)||px.easeOut):px[t]}function f4(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const m=Mb(l,i);Array.isArray(m)&&(h.easing=m);const p={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),t.animate(h,p)}function Lb(t){return typeof t=="function"&&"applyToOptions"in t}function m4({type:t,...e}){return Lb(t)&&Db()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class p4 extends Km{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Dm(typeof e.type!="string");const d=m4(e);this.animation=f4(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=Hm(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):c4(n,r,h),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return dn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+dn(e)}get time(){return dn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Dn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&u4()?(this.animation.timeline=e,fn):n(this)}}const Ob={anticipate:pb,backInOut:mb,circInOut:xb};function g4(t){return t in Ob}function x4(t){typeof t.ease=="string"&&g4(t.ease)&&(t.ease=Ob[t.ease])}const gx=10;class y4 extends p4{constructor(e){x4(e),Pb(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Gm({...o,autoplay:!1}),u=Dn(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-gx).value,l.sample(u).value,gx),l.stop()}}const xx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Wr.test(t)||t==="0")&&!t.startsWith("url("));function v4(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function w4(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=xx(i,e),l=xx(s,e);return!o||!l?!1:v4(t)||(n==="spring"||Lb(n))&&r}function nf(t){t.duration=0,t.type="keyframes"}const b4=new Set(["opacity","clipPath","filter","transform"]),k4=Mm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _4(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return k4()&&n&&b4.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const N4=40;class T4 extends Km{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...m}){var T;super(),this.stop=()=>{var C,A;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(A=this.keyframeResolver)==null||A.cancel()},this.createdAt=Wt.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...m},w=(h==null?void 0:h.KeyframeResolver)||Qm;this.keyframeResolver=new w(l,(C,A,b)=>this.onKeyframesResolved(C,A,p,!b),u,d,h),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Wt.now(),w4(e,s,o,l)||((ar.instantAnimations||!u)&&(h==null||h(Hm(e,r,n))),e[0]=e[e.length-1],nf(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>N4?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},w=!d&&_4(p)?new y4({...p,element:p.motionValue.owner.current}):new Gm(p);w.finished.then(()=>this.notifyFinished()).catch(fn),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),a4()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const E4=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function C4(t){const e=E4.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function Fb(t,e,n=1){const[r,i]=C4(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return ob(o)?parseFloat(o):o}return Bm(i)?Fb(i,e,n+1):i}function Ym(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Bb=new Set(["width","height","top","left","right","bottom",...Hs]),j4={test:t=>t==="auto",parse:t=>t},Ub=t=>e=>e.test(t),$b=[Ws,pe,Mn,_r,wC,vC,j4],yx=t=>$b.find(Ub(t));function S4(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||lb(t):!0}const I4=new Set(["brightness","contrast","saturate","opacity"]);function z4(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Um)||[];if(!r)return t;const i=n.replace(r,"");let s=I4.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const A4=/\b([a-z-]*)\(.*?\)/gu,rf={...Wr,getAnimatableNone:t=>{const e=t.match(A4);return e?e.map(z4).join(" "):t}},vx={...Ws,transform:Math.round},P4={rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:kl,scaleX:kl,scaleY:kl,scaleZ:kl,skew:_r,skewX:_r,skewY:_r,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:ya,originX:ox,originY:ox,originZ:pe},Xm={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe,...P4,zIndex:vx,fillOpacity:ya,strokeOpacity:ya,numOctaves:vx},R4={...Xm,color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,filter:rf,WebkitFilter:rf},qb=t=>R4[t];function Wb(t,e){let n=qb(t);return n!==rf&&(n=Wr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const V4=new Set(["auto","none","0"]);function D4(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!V4.has(s)&&va(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=Wb(n,i)}class M4 extends Qm{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),Bm(d))){const h=Fb(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!Bb.has(r)||e.length!==2)return;const[i,s]=e,o=yx(i),l=yx(s);if(o!==l)if(mx(o)&&mx(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else Ti[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||S4(e[i]))&&r.push(i);r.length&&D4(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ti[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Ti[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function L4(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const Hb=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function Kb(t){return ab(t)&&"offsetHeight"in t}const wx=30,O4=t=>!isNaN(parseFloat(t)),Ho={current:void 0};class F4{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Wt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Wt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=O4(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Lm);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Ho.current&&Ho.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Wt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>wx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,wx);return cb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Pi(t,e){return new F4(t,e)}const{schedule:Jm}=wb(queueMicrotask,!1),vn={x:!1,y:!1};function Gb(){return vn.x||vn.y}function B4(t){return t==="x"||t==="y"?vn[t]?null:(vn[t]=!0,()=>{vn[t]=!1}):vn.x||vn.y?null:(vn.x=vn.y=!0,()=>{vn.x=vn.y=!1})}function Qb(t,e){const n=L4(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function bx(t){return!(t.pointerType==="touch"||Gb())}function U4(t,e,n={}){const[r,i,s]=Qb(t,n),o=l=>{if(!bx(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const h=m=>{bx(m)&&(d(m),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const Yb=(t,e)=>e?t===e?!0:Yb(t,e.parentElement):!1,Zm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,$4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function q4(t){return $4.has(t.tagName)||t.tabIndex!==-1}const ql=new WeakSet;function kx(t){return e=>{e.key==="Enter"&&t(e)}}function Td(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const W4=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=kx(()=>{if(ql.has(n))return;Td(n,"down");const i=kx(()=>{Td(n,"up")}),s=()=>Td(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function _x(t){return Zm(t)&&!Gb()}function H4(t,e,n={}){const[r,i,s]=Qb(t,n),o=l=>{const u=l.currentTarget;if(!_x(l))return;ql.add(u);const d=e(u,l),h=(w,T)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),ql.has(u)&&ql.delete(u),_x(w)&&typeof d=="function"&&d(w,{success:T})},m=w=>{h(w,u===window||u===document||n.useGlobalTarget||Yb(u,w.target))},p=w=>{h(w,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",p,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),Kb(l)&&(l.addEventListener("focus",d=>W4(d,i)),!q4(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function Xb(t){return ab(t)&&"ownerSVGElement"in t}function K4(t){return Xb(t)&&t.tagName==="svg"}function G4(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],o=t[3+n],l=Ab(i,s,o);return e?l(r):l}const _t=t=>!!(t&&t.getVelocity),Q4=[...$b,rt,Wr],Y4=t=>Q4.find(Ub(t)),cu=z.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Nx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function X4(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Nx(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Nx(t[i],null)}}}}function J4(...t){return z.useCallback(X4(...t),t)}class Z4 extends z.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Kb(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ej({children:t,isPresent:e,anchorX:n,root:r}){const i=z.useId(),s=z.useRef(null),o=z.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=z.useContext(cu),u=J4(s,t==null?void 0:t.ref);return z.useInsertionEffect(()=>{const{width:d,height:h,top:m,left:p,right:w}=o.current;if(e||!s.current||!d||!h)return;const T=n==="left"?`left: ${p}`:`right: ${w}`;s.current.dataset.motionPopId=i;const C=document.createElement("style");l&&(C.nonce=l);const A=r??document.head;return A.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${T}px !important;
            top: ${m}px !important;
          }
        `),()=>{A.contains(C)&&A.removeChild(C)}},[e]),a.jsx(Z4,{isPresent:e,childRef:s,sizeRef:o,children:z.cloneElement(t,{ref:u})})}const tj=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=ri(nj),h=z.useId();let m=!0,p=z.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:w=>{d.set(w,!0);for(const T of d.values())if(!T)return;r&&r()},register:w=>(d.set(w,!1),()=>d.delete(w))}),[n,d,r]);return s&&m&&(p={...p}),z.useMemo(()=>{d.forEach((w,T)=>d.set(T,!1))},[n]),z.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=a.jsx(ej,{isPresent:n,anchorX:l,root:u,children:t})),a.jsx(lu.Provider,{value:p,children:t})};function nj(){return new Map}function Jb(t=!0){const e=z.useContext(lu);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=z.useId();z.useEffect(()=>{if(t)return i(s)},[t]);const o=z.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const _l=t=>t.key||"";function Tx(t){const e=[];return z.Children.forEach(t,n=>{z.isValidElement(n)&&e.push(n)}),e}const ze=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=Jb(o),m=z.useMemo(()=>Tx(t),[t]),p=o&&!d?[]:m.map(_l),w=z.useRef(!0),T=z.useRef(m),C=ri(()=>new Map),[A,b]=z.useState(m),[x,v]=z.useState(m);Pm(()=>{w.current=!1,T.current=m;for(let M=0;M<x.length;M++){const k=_l(x[M]);p.includes(k)?C.delete(k):C.get(k)!==!0&&C.set(k,!1)}},[x,p.length,p.join("-")]);const P=[];if(m!==A){let M=[...m];for(let k=0;k<x.length;k++){const y=x[k],_=_l(y);p.includes(_)||(M.splice(k,0,y),P.push(y))}return s==="wait"&&P.length&&(M=P),v(Tx(M)),b(m),null}const{forceRender:D}=z.useContext(zm);return a.jsx(a.Fragment,{children:x.map(M=>{const k=_l(M),y=o&&!d?!1:m===x||p.includes(k),_=()=>{if(C.has(k))C.set(k,!0);else return;let E=!0;C.forEach(I=>{I||(E=!1)}),E&&(D==null||D(),v(T.current),o&&(h==null||h()),r&&r())};return a.jsx(tj,{isPresent:y,initial:!w.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:y?void 0:_,anchorX:l,children:M},k)})})},Zb=z.createContext({strict:!1}),Ex={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Vs={};for(const t in Ex)Vs[t]={isEnabled:e=>Ex[t].some(n=>!!e[n])};function rj(t){for(const e in t)Vs[e]={...Vs[e],...t[e]}}const ij=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Cc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ij.has(t)}let ek=t=>!Cc(t);function sj(t){typeof t=="function"&&(ek=e=>e.startsWith("on")?!Cc(e):t(e))}try{sj(require("@emotion/is-prop-valid").default)}catch{}function oj(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(ek(i)||n===!0&&Cc(i)||!e&&!Cc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const uu=z.createContext({});function du(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function wa(t){return typeof t=="string"||Array.isArray(t)}const ep=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],tp=["initial",...ep];function hu(t){return du(t.animate)||tp.some(e=>wa(t[e]))}function tk(t){return!!(hu(t)||t.variants)}function aj(t,e){if(hu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||wa(n)?n:void 0,animate:wa(r)?r:void 0}}return t.inherit!==!1?e:{}}function lj(t){const{initial:e,animate:n}=aj(t,z.useContext(uu));return z.useMemo(()=>({initial:e,animate:n}),[Cx(e),Cx(n)])}function Cx(t){return Array.isArray(t)?t.join(" "):t}function jx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const No={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=jx(t,e.target.x),r=jx(t,e.target.y);return`${n}% ${r}%`}},cj={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Wr.parse(t);if(i.length>5)return r;const s=Wr.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const d=qe(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}},sf={borderRadius:{...No,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:No,borderTopRightRadius:No,borderBottomLeftRadius:No,borderBottomRightRadius:No,boxShadow:cj};function nk(t,{layout:e,layoutId:n}){return Ks.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!sf[t]||t==="opacity")}const uj={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dj=Hs.length;function hj(t,e,n){let r="",i=!0;for(let s=0;s<dj;s++){const o=Hs[s],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=Hb(l,Xm[o]);if(!u){i=!1;const h=uj[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function np(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const u in e){const d=e[u];if(Ks.has(u)){o=!0;continue}else if(kb(u)){i[u]=d;continue}else{const h=Hb(d,Xm[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=hj(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const rp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function rk(t,e,n){for(const r in e)!_t(e[r])&&!nk(r,n)&&(t[r]=e[r])}function fj({transformTemplate:t},e){return z.useMemo(()=>{const n=rp();return np(n,e,t),Object.assign({},n.vars,n.style)},[e])}function mj(t,e){const n=t.style||{},r={};return rk(r,n,t),Object.assign(r,fj(t,e)),r}function pj(t,e){const n={},r=mj(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const gj={offset:"stroke-dashoffset",array:"stroke-dasharray"},xj={offset:"strokeDashoffset",array:"strokeDasharray"};function yj(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?gj:xj;t[s.offset]=pe.transform(-r);const o=pe.transform(e),l=pe.transform(n);t[s.array]=`${o} ${l}`}function ik(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(np(t,l,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p}=t;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&yj(m,i,s,o,!1)}const sk=()=>({...rp(),attrs:{}}),ok=t=>typeof t=="string"&&t.toLowerCase()==="svg";function vj(t,e,n,r){const i=z.useMemo(()=>{const s=sk();return ik(s,e,ok(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};rk(s,t.style,t),i.style={...s,...i.style}}return i}const wj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ip(t){return typeof t!="string"||t.includes("-")?!1:!!(wj.indexOf(t)>-1||/[A-Z]/u.test(t))}function bj(t,e,n,{latestValues:r},i,s=!1){const l=(ip(t)?vj:pj)(e,r,i,t),u=oj(e,typeof t=="string",s),d=t!==z.Fragment?{...u,...l,ref:n}:{},{children:h}=e,m=z.useMemo(()=>_t(h)?h.get():h,[h]);return z.createElement(t,{...d,children:m})}function Sx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function sp(t,e,n,r){if(typeof e=="function"){const[i,s]=Sx(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Sx(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Wl(t){return _t(t)?t.get():t}function kj({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:_j(n,r,i,t),renderState:e()}}function _j(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Wl(s[p]);let{initial:o,animate:l}=t;const u=hu(t),d=tk(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!du(m)){const p=Array.isArray(m)?m:[m];for(let w=0;w<p.length;w++){const T=sp(t,p[w]);if(T){const{transitionEnd:C,transition:A,...b}=T;for(const x in b){let v=b[x];if(Array.isArray(v)){const P=h?v.length-1:0;v=v[P]}v!==null&&(i[x]=v)}for(const x in C)i[x]=C[x]}}}return i}const ak=t=>(e,n)=>{const r=z.useContext(uu),i=z.useContext(lu),s=()=>kj(t,e,r,i);return n?s():ri(s)};function op(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(_t(r[o])||e.style&&_t(e.style[o])||nk(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const Nj=ak({scrapeMotionValuesFromProps:op,createRenderState:rp});function lk(t,e,n){const r=op(t,e,n);for(const i in t)if(_t(t[i])||_t(e[i])){const s=Hs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const Tj=ak({scrapeMotionValuesFromProps:lk,createRenderState:sk}),Ej=Symbol.for("motionComponentSymbol");function fs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Cj(t,e,n){return z.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):fs(n)&&(n.current=r))},[e])}const ap=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jj="framerAppearId",ck="data-"+ap(jj),uk=z.createContext({});function Sj(t,e,n,r,i){var C,A;const{visualElement:s}=z.useContext(uu),o=z.useContext(Zb),l=z.useContext(lu),u=z.useContext(cu).reducedMotion,d=z.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,m=z.useContext(uk);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&Ij(d.current,n,i,m);const p=z.useRef(!1);z.useInsertionEffect(()=>{h&&p.current&&h.update(n,l)});const w=n[ck],T=z.useRef(!!w&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,w))&&((A=window.MotionHasOptimisedAnimation)==null?void 0:A.call(window,w)));return Pm(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),T.current&&h.animationState&&h.animationState.animateChanges())}),z.useEffect(()=>{h&&(!T.current&&h.animationState&&h.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,w)}),T.current=!1),h.enteringChildren=void 0)}),h}function Ij(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:dk(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&fs(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function dk(t){if(t)return t.options.allowProjection!==!1?t.projection:dk(t.parent)}function Ed(t,{forwardMotionProps:e=!1}={},n,r){n&&rj(n);const i=ip(t)?Tj:Nj;function s(l,u){let d;const h={...z.useContext(cu),...l,layoutId:zj(l)},{isStatic:m}=h,p=lj(l),w=i(l,m);if(!m&&Am){Aj();const T=Pj(h);d=T.MeasureLayout,p.visualElement=Sj(t,w,h,r,T.ProjectionNode)}return a.jsxs(uu.Provider,{value:p,children:[d&&p.visualElement?a.jsx(d,{visualElement:p.visualElement,...h}):null,bj(t,l,Cj(w,p.visualElement,u),w,m,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=z.forwardRef(s);return o[Ej]=t,o}function zj({layoutId:t}){const e=z.useContext(zm).id;return e&&t!==void 0?e+"-"+t:t}function Aj(t,e){z.useContext(Zb).strict}function Pj(t){const{drag:e,layout:n}=Vs;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function Rj(t,e){if(typeof Proxy>"u")return Ed;const n=new Map,r=(s,o)=>Ed(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Ed(o,void 0,t,e)),n.get(o))})}function hk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function Vj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Dj(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Cd(t){return t===void 0||t===1}function of({scale:t,scaleX:e,scaleY:n}){return!Cd(t)||!Cd(e)||!Cd(n)}function mi(t){return of(t)||fk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function fk(t){return Ix(t.x)||Ix(t.y)}function Ix(t){return t&&t!=="0%"}function jc(t,e,n){const r=t-n,i=e*r;return n+i}function zx(t,e,n,r,i){return i!==void 0&&(t=jc(t,i,r)),jc(t,n,r)+e}function af(t,e=0,n=1,r,i){t.min=zx(t.min,e,n,r,i),t.max=zx(t.max,e,n,r,i)}function mk(t,{x:e,y:n}){af(t.x,e.translate,e.scale,e.originPoint),af(t.y,n.translate,n.scale,n.originPoint)}const Ax=.999999999999,Px=1.0000000000001;function Mj(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ps(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,mk(t,o)),r&&mi(s.latestValues)&&ps(t,s.latestValues))}e.x<Px&&e.x>Ax&&(e.x=1),e.y<Px&&e.y>Ax&&(e.y=1)}function ms(t,e){t.min=t.min+e,t.max=t.max+e}function Rx(t,e,n,r,i=.5){const s=qe(t.min,t.max,i);af(t,e,n,s,r)}function ps(t,e){Rx(t.x,e.x,e.scaleX,e.scale,e.originX),Rx(t.y,e.y,e.scaleY,e.scale,e.originY)}function pk(t,e){return hk(Dj(t.getBoundingClientRect(),e))}function Lj(t,e,n){const r=pk(t,n),{scroll:i}=e;return i&&(ms(r.x,i.offset.x),ms(r.y,i.offset.y)),r}const Vx=()=>({translate:0,scale:1,origin:0,originPoint:0}),gs=()=>({x:Vx(),y:Vx()}),Dx=()=>({min:0,max:0}),dt=()=>({x:Dx(),y:Dx()}),lf={current:null},gk={current:!1};function Oj(){if(gk.current=!0,!!Am)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>lf.current=t.matches;t.addEventListener("change",e),e()}else lf.current=!1}const Fj=new WeakMap;function Bj(t,e,n){for(const r in e){const i=e[r],s=n[r];if(_t(i))t.addValue(r,i);else if(_t(s))t.addValue(r,Pi(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Pi(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Mx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Uj{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Qm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Wt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,Fe.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=hu(n),this.isVariantNode=tk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const w=m[p];u[p]!==void 0&&_t(w)&&w.set(u[p])}}mount(e){var n;this.current=e,Fj.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),gk.current||Oj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:lf.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ks.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Fe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Vs){const n=Vs[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Mx.length;r++){const i=Mx[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=Bj(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Pi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(ob(r)||lb(r))?r=parseFloat(r):!Y4(r)&&Wr.test(n)&&(r=Wb(e,n)),this.setBaseTarget(e,_t(r)?r.get():r)),_t(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=sp(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!_t(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Lm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Jm.render(this.render)}}class xk extends Uj{constructor(){super(...arguments),this.KeyframeResolver=M4}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;_t(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function yk(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function $j(t){return window.getComputedStyle(t)}class qj extends xk{constructor(){super(...arguments),this.type="html",this.renderInstance=yk}readValueFromInstance(e,n){var r;if(Ks.has(n))return(r=this.projection)!=null&&r.isProjecting?Xh(n):n4(e,n);{const i=$j(e),s=(kb(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return pk(e,n)}build(e,n,r){np(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return op(e,n,r)}}const vk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Wj(t,e,n,r){yk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(vk.has(i)?i:ap(i),e.attrs[i])}class Hj extends xk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ks.has(n)){const r=qb(n);return r&&r.default||0}return n=vk.has(n)?n:ap(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return lk(e,n,r)}build(e,n,r){ik(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){Wj(e,n,r,i)}mount(e){this.isSVGTag=ok(e.tagName),super.mount(e)}}const Kj=(t,e)=>ip(t)?new Hj(e):new qj(e,{allowProjection:t!==z.Fragment});function _s(t,e,n){const r=t.getProps();return sp(r,e,n!==void 0?n:r.custom,t)}const cf=t=>Array.isArray(t);function Gj(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Pi(n))}function Qj(t){return cf(t)?t[t.length-1]||0:t}function Yj(t,e){const n=_s(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=Qj(s[o]);Gj(t,o,l)}}function Xj(t){return!!(_t(t)&&t.add)}function uf(t,e){const n=t.getValue("willChange");if(Xj(n))return n.add(e);if(!n&&ar.WillChange){const r=new ar.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function wk(t){return t.props[ck]}const Jj=t=>t!==null;function Zj(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Jj),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const e5={type:"spring",stiffness:500,damping:25,restSpeed:10},t5=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),n5={type:"keyframes",duration:.8},r5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i5=(t,{keyframes:e})=>e.length>2?n5:Ks.has(t)?t.startsWith("scale")?t5(e[1]):e5:r5;function s5({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const lp=(t,e,n,r={},i,s)=>o=>{const l=Ym(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Dn(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};s5(l)||Object.assign(h,i5(t,h)),h.duration&&(h.duration=Dn(h.duration)),h.repeatDelay&&(h.repeatDelay=Dn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(nf(h),h.delay===0&&(m=!0)),(ar.instantAnimations||ar.skipAnimations)&&(m=!0,nf(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!s&&e.get()!==void 0){const p=Zj(h.keyframes,l);if(p!==void 0){Fe.update(()=>{h.onUpdate(p),h.onComplete()});return}}return l.isSync?new Gm(h):new T4(h)};function o5({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function bk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const m=t.getValue(h,t.latestValues[h]??null),p=l[h];if(p===void 0||d&&o5(d,h))continue;const w={delay:n,...Ym(s||{},h)},T=m.get();if(T!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===T&&!w.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const b=wk(t);if(b){const x=window.MotionHandoffAnimation(b,h,Fe);x!==null&&(w.startTime=x,C=!0)}}uf(t,h),m.start(lp(h,m,p,t.shouldReduceMotion&&Bb.has(h)?{type:!1}:w,t,C));const A=m.animation;A&&u.push(A)}return o&&Promise.all(u).then(()=>{Fe.update(()=>{o&&Yj(t,o)})}),u}function kk(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function df(t,e,n={}){var u;const r=_s(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(bk(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:p}=i;return a5(t,e,d,h,m,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function a5(t,e,n=0,r=0,i=0,s=1,o){const l=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),l.push(df(u,e,{...o,delay:n+(typeof r=="function"?0:r)+kk(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function l5(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>df(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=df(t,e,n);else{const i=typeof e=="function"?_s(t,e,n.custom):e;r=Promise.all(bk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function _k(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const c5=tp.length;function Nk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Nk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<c5;n++){const r=tp[n],i=t.props[r];(wa(i)||i===!1)&&(e[r]=i)}return e}const u5=[...ep].reverse(),d5=ep.length;function h5(t){return e=>Promise.all(e.map(({animation:n,options:r})=>l5(t,n,r)))}function f5(t){let e=h5(t),n=Lx(),r=!0;const i=u=>(d,h)=>{var p;const m=_s(t,h,u==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(m){const{transition:w,transitionEnd:T,...C}=m;d={...d,...C,...T}}return d};function s(u){e=u(t)}function o(u){const{props:d}=t,h=Nk(t.parent)||{},m=[],p=new Set;let w={},T=1/0;for(let A=0;A<d5;A++){const b=u5[A],x=n[b],v=d[b]!==void 0?d[b]:h[b],P=wa(v),D=b===u?x.isActive:null;D===!1&&(T=A);let M=v===h[b]&&v!==d[b]&&P;if(M&&r&&t.manuallyAnimateOnMount&&(M=!1),x.protectedKeys={...w},!x.isActive&&D===null||!v&&!x.prevProp||du(v)||typeof v=="boolean")continue;const k=m5(x.prevProp,v);let y=k||b===u&&x.isActive&&!M&&P||A>T&&P,_=!1;const E=Array.isArray(v)?v:[v];let I=E.reduce(i(b),{});D===!1&&(I={});const{prevResolvedValues:R={}}=x,S={...R,...I},xe=me=>{y=!0,p.has(me)&&(_=!0,p.delete(me)),x.needsAnimating[me]=!0;const Q=t.getValue(me);Q&&(Q.liveStyle=!1)};for(const me in S){const Q=I[me],ee=R[me];if(w.hasOwnProperty(me))continue;let ie=!1;cf(Q)&&cf(ee)?ie=!_k(Q,ee):ie=Q!==ee,ie?Q!=null?xe(me):p.add(me):Q!==void 0&&p.has(me)?xe(me):x.protectedKeys[me]=!0}x.prevProp=v,x.prevResolvedValues=I,x.isActive&&(w={...w,...I}),r&&t.blockInitialAnimation&&(y=!1);const de=M&&k;y&&(!de||_)&&m.push(...E.map(me=>{const Q={type:b};if(typeof me=="string"&&r&&!de&&t.manuallyAnimateOnMount&&t.parent){const{parent:ee}=t,ie=_s(ee,me);if(ee.enteringChildren&&ie){const{delayChildren:$}=ie.transition||{};Q.delay=kk(ee.enteringChildren,t,$)}}return{animation:me,options:Q}}))}if(p.size){const A={};if(typeof d.initial!="boolean"){const b=_s(t,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(A.transition=b.transition)}p.forEach(b=>{const x=t.getBaseTarget(b),v=t.getValue(b);v&&(v.liveStyle=!0),A[b]=x??null}),m.push({animation:A})}let C=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(m):Promise.resolve()}function l(u,d){var m;if(n[u].isActive===d)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(p=>{var w;return(w=p.animationState)==null?void 0:w.setActive(u,d)}),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=Lx()}}}function m5(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!_k(e,t):!1}function di(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lx(){return{animate:di(!0),whileInView:di(),whileHover:di(),whileTap:di(),whileDrag:di(),whileFocus:di(),exit:di()}}class ii{constructor(e){this.isMounted=!1,this.node=e}update(){}}class p5 extends ii{constructor(e){super(e),e.animationState||(e.animationState=f5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();du(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let g5=0;class x5 extends ii{constructor(){super(...arguments),this.id=g5++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const y5={animation:{Feature:p5},exit:{Feature:x5}};function ba(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Oa(t){return{point:{x:t.pageX,y:t.pageY}}}const v5=t=>e=>Zm(e)&&t(e,Oa(e));function Ko(t,e,n,r){return ba(t,e,v5(n),r)}const Tk=1e-4,w5=1-Tk,b5=1+Tk,Ek=.01,k5=0-Ek,_5=0+Ek;function Mt(t){return t.max-t.min}function N5(t,e,n){return Math.abs(t-e)<=n}function Ox(t,e,n,r=.5){t.origin=r,t.originPoint=qe(e.min,e.max,t.origin),t.scale=Mt(n)/Mt(e),t.translate=qe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=w5&&t.scale<=b5||isNaN(t.scale))&&(t.scale=1),(t.translate>=k5&&t.translate<=_5||isNaN(t.translate))&&(t.translate=0)}function Go(t,e,n,r){Ox(t.x,e.x,n.x,r?r.originX:void 0),Ox(t.y,e.y,n.y,r?r.originY:void 0)}function Fx(t,e,n){t.min=n.min+e.min,t.max=t.min+Mt(e)}function T5(t,e,n){Fx(t.x,e.x,n.x),Fx(t.y,e.y,n.y)}function Bx(t,e,n){t.min=e.min-n.min,t.max=t.min+Mt(e)}function Sc(t,e,n){Bx(t.x,e.x,n.x),Bx(t.y,e.y,n.y)}function sn(t){return[t("x"),t("y")]}const Ck=({current:t})=>t?t.ownerDocument.defaultView:null,Ux=(t,e)=>Math.abs(t-e);function E5(t,e){const n=Ux(t.x,e.x),r=Ux(t.y,e.y);return Math.sqrt(n**2+r**2)}class jk{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Sd(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,T=E5(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!T)return;const{point:C}=p,{timestamp:A}=wt;this.history.push({...C,timestamp:A});const{onStart:b,onMove:x}=this.handlers;w||(b&&b(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,p)},this.handlePointerMove=(p,w)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=jd(w,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(p,w)=>{this.end();const{onEnd:T,onSessionEnd:C,resumeAnimation:A}=this.handlers;if(this.dragSnapToOrigin&&A&&A(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Sd(p.type==="pointercancel"?this.lastMoveEventInfo:jd(w,this.transformPagePoint),this.history);this.startEvent&&T&&T(p,b),C&&C(p,b)},!Zm(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Oa(e),u=jd(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=wt;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,Sd(u,this.history)),this.removeListeners=Da(Ko(this.contextWindow,"pointermove",this.handlePointerMove),Ko(this.contextWindow,"pointerup",this.handlePointerUp),Ko(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function jd(t,e){return e?{point:e(t.point)}:t}function $x(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sd({point:t},e){return{point:t,delta:$x(t,Sk(e)),offset:$x(t,C5(e)),velocity:j5(e,.1)}}function C5(t){return t[0]}function Sk(t){return t[t.length-1]}function j5(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=Sk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Dn(e)));)n--;if(!r)return{x:0,y:0};const s=dn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function S5(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?qe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?qe(n,t,r.max):Math.min(t,n)),t}function qx(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function I5(t,{top:e,left:n,bottom:r,right:i}){return{x:qx(t.x,n,i),y:qx(t.y,e,r)}}function Wx(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function z5(t,e){return{x:Wx(t.x,e.x),y:Wx(t.y,e.y)}}function A5(t,e){let n=.5;const r=Mt(t),i=Mt(e);return i>r?n=xa(e.min,e.max-r,t.min):r>i&&(n=xa(t.min,t.max-i,e.min)),or(0,1,n)}function P5(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const hf=.35;function R5(t=hf){return t===!1?t=0:t===!0&&(t=hf),{x:Hx(t,"left","right"),y:Hx(t,"top","bottom")}}function Hx(t,e,n){return{min:Kx(t,e),max:Kx(t,n)}}function Kx(t,e){return typeof t=="number"?t:t[e]||0}const V5=new WeakMap;class D5{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Oa(m).point)},o=(m,p)=>{const{drag:w,dragPropagation:T,onDragStart:C}=this.getProps();if(w&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=B4(w),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),sn(b=>{let x=this.getAxisMotionValue(b).get()||0;if(Mn.test(x)){const{projection:v}=this.visualElement;if(v&&v.layout){const P=v.layout.layoutBox[b];P&&(x=Mt(P)*(parseFloat(x)/100))}}this.originPoint[b]=x}),C&&Fe.postRender(()=>C(m,p)),uf(this.visualElement,"transform");const{animationState:A}=this.visualElement;A&&A.setActive("whileDrag",!0)},l=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:w,dragDirectionLock:T,onDirectionLock:C,onDrag:A}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:b}=p;if(T&&this.currentDirection===null){this.currentDirection=M5(b),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",p.point,b),this.updateAxis("y",p.point,b),this.visualElement.render(),A&&A(m,p)},u=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>sn(m=>{var p;return this.getAnimationState(m)==="paused"&&((p=this.getAxisMotionValue(m).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new jk(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:Ck(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Fe.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Nl(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=S5(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&fs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=I5(r.layoutBox,e):this.constraints=!1,this.elastic=R5(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&sn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=P5(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!fs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Lj(r,i.root,this.visualElement.getTransformPagePoint());let o=z5(i.layout.layoutBox,s);if(n){const l=n(Vj(o));this.hasMutatedConstraints=!!l,l&&(o=hk(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=sn(h=>{if(!Nl(h,n,this.currentDirection))return;let m=u&&u[h]||{};o&&(m={min:0,max:0});const p=i?200:1e6,w=i?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(h,T)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return uf(this.visualElement,e),r.start(lp(e,r,0,n,this.visualElement,!1))}stopAnimation(){sn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){sn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){sn(n=>{const{drag:r}=this.getProps();if(!Nl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-qe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!fs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};sn(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=A5({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),sn(o=>{if(!Nl(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(qe(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;V5.set(this.visualElement,this);const e=this.visualElement.current,n=Ko(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();fs(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Fe.read(r);const o=ba(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(sn(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=u[h].translate,m.set(m.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=hf,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Nl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function M5(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class L5 extends ii{constructor(e){super(e),this.removeGroupControls=fn,this.removeListeners=fn,this.controls=new D5(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gx=t=>(e,n)=>{t&&Fe.postRender(()=>t(e,n))};class O5 extends ii{constructor(){super(...arguments),this.removePointerDownListener=fn}onPointerDown(e){this.session=new jk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Ck(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Gx(e),onStart:Gx(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Fe.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Ko(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Id=!1;class F5 extends z.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Id&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Hl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Id=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Fe.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Jm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Id=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ik(t){const[e,n]=Jb(),r=z.useContext(zm);return a.jsx(F5,{...t,layoutGroup:r,switchLayoutGroup:z.useContext(uk),isPresent:e,safeToRemove:n})}function B5(t,e,n){const r=_t(t)?t:Pi(t);return r.start(lp("",r,e,n)),r.animation}const U5=(t,e)=>t.depth-e.depth;class $5{constructor(){this.children=[],this.isDirty=!1}add(e){Rm(this.children,e),this.isDirty=!0}remove(e){Vm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(U5),this.isDirty=!1,this.children.forEach(e)}}function q5(t,e){const n=Wt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(lr(r),t(s-e))};return Fe.setup(r,!0),()=>lr(r)}const zk=["TopLeft","TopRight","BottomLeft","BottomRight"],W5=zk.length,Qx=t=>typeof t=="string"?parseFloat(t):t,Yx=t=>typeof t=="number"||pe.test(t);function H5(t,e,n,r,i,s){i?(t.opacity=qe(0,n.opacity??1,K5(r)),t.opacityExit=qe(e.opacity??1,0,G5(r))):s&&(t.opacity=qe(e.opacity??1,n.opacity??1,r));for(let o=0;o<W5;o++){const l=`border${zk[o]}Radius`;let u=Xx(e,l),d=Xx(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||Yx(u)===Yx(d)?(t[l]=Math.max(qe(Qx(u),Qx(d),r),0),(Mn.test(d)||Mn.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=qe(e.rotate||0,n.rotate||0,r))}function Xx(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const K5=Ak(0,.5,gb),G5=Ak(.5,.95,fn);function Ak(t,e,n){return r=>r<t?0:r>e?1:n(xa(t,e,r))}function Jx(t,e){t.min=e.min,t.max=e.max}function yn(t,e){Jx(t.x,e.x),Jx(t.y,e.y)}function Zx(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ey(t,e,n,r,i){return t-=e,t=jc(t,1/n,r),i!==void 0&&(t=jc(t,1/i,r)),t}function Q5(t,e=0,n=1,r=.5,i,s=t,o=t){if(Mn.test(e)&&(e=parseFloat(e),e=qe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=qe(s.min,s.max,r);t===s&&(l-=e),t.min=ey(t.min,e,n,l,i),t.max=ey(t.max,e,n,l,i)}function ty(t,e,[n,r,i],s,o){Q5(t,e[n],e[r],e[i],e.scale,s,o)}const Y5=["x","scaleX","originX"],X5=["y","scaleY","originY"];function ny(t,e,n,r){ty(t.x,e,Y5,n?n.x:void 0,r?r.x:void 0),ty(t.y,e,X5,n?n.y:void 0,r?r.y:void 0)}function ry(t){return t.translate===0&&t.scale===1}function Pk(t){return ry(t.x)&&ry(t.y)}function iy(t,e){return t.min===e.min&&t.max===e.max}function J5(t,e){return iy(t.x,e.x)&&iy(t.y,e.y)}function sy(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Rk(t,e){return sy(t.x,e.x)&&sy(t.y,e.y)}function oy(t){return Mt(t.x)/Mt(t.y)}function ay(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Z5{constructor(){this.members=[]}add(e){Rm(this.members,e),e.scheduleRender()}remove(e){if(Vm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function eS(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:p,skewX:w,skewY:T}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),p&&(r+=`rotateY(${p}deg) `),w&&(r+=`skewX(${w}deg) `),T&&(r+=`skewY(${T}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const zd=["","X","Y","Z"],tS=1e3;let nS=0;function Ad(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Vk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=wk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Fe,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Vk(r)}function Dk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=nS++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sS),this.nodes.forEach(cS),this.nodes.forEach(uS),this.nodes.forEach(oS)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new $5)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Lm),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=Xb(o)&&!K4(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),t){let h,m=0;const p=()=>this.root.updateBlockedByResize=!1;Fe.read(()=>{m=window.innerWidth}),t(o,()=>{const w=window.innerWidth;w!==m&&(m=w,this.root.updateBlockedByResize=!0,h&&h(),h=q5(p,250),Hl.hasAnimatedSinceResize&&(Hl.hasAnimatedSinceResize=!1,this.nodes.forEach(uy)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||d.getDefaultTransition()||pS,{onLayoutAnimationStart:C,onLayoutAnimationComplete:A}=d.getProps(),b=!this.targetLayout||!Rk(this.targetLayout,w),x=!m&&p;if(this.options.layoutRoot||this.resumeFrom||x||m&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const v={...Ym(T,"layout"),onPlay:C,onComplete:A};(d.shouldReduceMotion||this.options.layoutRoot)&&(v.delay=0,v.type=!1),this.startAnimation(v),this.setAnimationOrigin(h,x)}else m||uy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(dS),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ly);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(cy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(lS),this.nodes.forEach(rS),this.nodes.forEach(iS)):this.nodes.forEach(cy),this.clearAllSnapshots();const l=Wt.now();wt.delta=or(0,1e3/60,l-wt.timestamp),wt.timestamp=l,wt.isProcessing=!0,wd.update.process(wt),wd.preRender.process(wt),wd.render.process(wt),wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Jm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aS),this.sharedNodes.forEach(hS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Mt(this.snapshot.measuredBox.x)&&!Mt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Pk(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||mi(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),gS(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return dt();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(xS))){const{scroll:h}=this.root;h&&(ms(l.x,h.offset.x),ms(l.y,h.offset.y))}return l}removeElementScroll(o){var u;const l=dt();if(yn(l,o),(u=this.scroll)!=null&&u.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:p}=h;h!==this.root&&m&&p.layoutScroll&&(m.wasRoot&&yn(l,o),ms(l.x,m.offset.x),ms(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const u=dt();yn(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ps(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),mi(h.latestValues)&&ps(u,h.latestValues)}return mi(this.latestValues)&&ps(u,this.latestValues),u}removeTransform(o){const l=dt();yn(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!mi(d.latestValues))continue;of(d.latestValues)&&d.updateSnapshot();const h=dt(),m=d.measurePageBox();yn(h,m),ny(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return mi(this.latestValues)&&ny(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var w;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(w=this.parent)!=null&&w.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!this.layout||!(h||m))return;this.resolvedRelativeTargetAt=wt.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),T5(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yn(this.target,this.layout.layoutBox),mk(this.target,this.targetDelta)):yn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||of(this.parent.latestValues)||fk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Sc(this.relativeTargetOrigin,l,u),yn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var T;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===wt.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;yn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;Mj(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=dt());const{target:w}=o;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Zx(this.prevProjectionDelta.x,this.projectionDelta.x),Zx(this.prevProjectionDelta.y,this.projectionDelta.y)),Go(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!ay(this.projectionDelta.x,this.prevProjectionDelta.x)||!ay(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=gs(),this.projectionDelta=gs(),this.projectionDeltaWithTransform=gs()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},m=gs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=dt(),w=u?u.source:void 0,T=this.layout?this.layout.source:void 0,C=w!==T,A=this.getStack(),b=!A||A.members.length<=1,x=!!(C&&!b&&this.options.crossfade===!0&&!this.path.some(mS));this.animationProgress=0;let v;this.mixTargetDelta=P=>{const D=P/1e3;dy(m.x,o.x,D),dy(m.y,o.y,D),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Sc(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),fS(this.relativeTarget,this.relativeTargetOrigin,p,D),v&&J5(this.relativeTarget,v)&&(this.isProjectionDirty=!1),v||(v=dt()),yn(v,this.relativeTarget)),C&&(this.animationValues=h,H5(h,d,this.latestValues,D,x,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,u,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||d.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{Hl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Pi(0)),this.currentAnimation=B5(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&Mk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||dt();const m=Mt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const p=Mt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+p}yn(l,u),ps(l,h),Go(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new Z5),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&Ad("z",o,d,this.animationValues);for(let h=0;h<zd.length;h++)Ad(`rotate${zd[h]}`,o,d,this.animationValues),Ad(`skew${zd[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Wl(l==null?void 0:l.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Wl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!mi(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=eS(this.projectionDeltaWithTransform,this.treeScale,h);u&&(m=u(h,m)),o.transform=m;const{x:p,y:w}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${w.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const T in sf){if(h[T]===void 0)continue;const{correct:C,applyTo:A,isCSSVariable:b}=sf[T],x=m==="none"?h[T]:C(h[T],d);if(A){const v=A.length;for(let P=0;P<v;P++)o[A[P]]=x}else b?this.options.visualElement.renderState.vars[T]=x:o[T]=x}this.options.layoutId&&(o.pointerEvents=d===this?Wl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(ly),this.root.sharedNodes.clear()}}}function rS(t){t.updateLayout()}function iS(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?sn(m=>{const p=o?e.measuredBox[m]:e.layoutBox[m],w=Mt(p);p.min=r[m].min,p.max=p.min+w}):Mk(s,e.layoutBox,r)&&sn(m=>{const p=o?e.measuredBox[m]:e.layoutBox[m],w=Mt(r[m]);p.max=p.min+w,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+w)});const l=gs();Go(l,r,e.layoutBox);const u=gs();o?Go(u,t.applyTransform(i,!0),e.measuredBox):Go(u,r,e.layoutBox);const d=!Pk(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:w}=m;if(p&&w){const T=dt();Sc(T,e.layoutBox,p.layoutBox);const C=dt();Sc(C,r,w.layoutBox),Rk(T,C)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=T,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function sS(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function oS(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function aS(t){t.clearSnapshot()}function ly(t){t.clearMeasurements()}function cy(t){t.isLayoutDirty=!1}function lS(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function uy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function cS(t){t.resolveTargetDelta()}function uS(t){t.calcProjection()}function dS(t){t.resetSkewAndRotation()}function hS(t){t.removeLeadSnapshot()}function dy(t,e,n){t.translate=qe(e.translate,0,n),t.scale=qe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function hy(t,e,n,r){t.min=qe(e.min,n.min,r),t.max=qe(e.max,n.max,r)}function fS(t,e,n,r){hy(t.x,e.x,n.x,r),hy(t.y,e.y,n.y,r)}function mS(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const pS={duration:.45,ease:[.4,0,.1,1]},fy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),my=fy("applewebkit/")&&!fy("chrome/")?Math.round:fn;function py(t){t.min=my(t.min),t.max=my(t.max)}function gS(t){py(t.x),py(t.y)}function Mk(t,e,n){return t==="position"||t==="preserve-aspect"&&!N5(oy(e),oy(n),.2)}function xS(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const yS=Dk({attachResizeListener:(t,e)=>ba(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pd={current:void 0},Lk=Dk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pd.current){const t=new yS({});t.mount(window),t.setOptions({layoutScroll:!0}),Pd.current=t}return Pd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),vS={pan:{Feature:O5},drag:{Feature:L5,ProjectionNode:Lk,MeasureLayout:Ik}};function gy(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Fe.postRender(()=>s(e,Oa(e)))}class wS extends ii{mount(){const{current:e}=this.node;e&&(this.unmount=U4(e,(n,r)=>(gy(this.node,r,"Start"),i=>gy(this.node,i,"End"))))}unmount(){}}class bS extends ii{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Da(ba(this.node.current,"focus",()=>this.onFocus()),ba(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function xy(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Fe.postRender(()=>s(e,Oa(e)))}class kS extends ii{mount(){const{current:e}=this.node;e&&(this.unmount=H4(e,(n,r)=>(xy(this.node,r,"Start"),(i,{success:s})=>xy(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ff=new WeakMap,Rd=new WeakMap,_S=t=>{const e=ff.get(t.target);e&&e(t)},NS=t=>{t.forEach(_S)};function TS({root:t,...e}){const n=t||document;Rd.has(n)||Rd.set(n,{});const r=Rd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(NS,{root:t,...e})),r[i]}function ES(t,e,n){const r=TS(e);return ff.set(t,n),r.observe(t),()=>{ff.delete(t),r.unobserve(t)}}const CS={some:0,all:1};class jS extends ii{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:CS[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),p=d?h:m;p&&p(u)};return ES(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(SS(e,n))&&this.startObserver()}unmount(){}}function SS({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const IS={inView:{Feature:jS},tap:{Feature:kS},focus:{Feature:bS},hover:{Feature:wS}},zS={layout:{ProjectionNode:Lk,MeasureLayout:Ik}},AS={...y5,...IS,...vS,...zS},ue=Rj(AS,Kj);function Ic(t){const e=ri(()=>Pi(t)),{isStatic:n}=z.useContext(cu);if(n){const[,r]=z.useState(t);z.useEffect(()=>e.on("change",r),[])}return e}function Ok(t,e){const n=Ic(e()),r=()=>n.set(e());return r(),Pm(()=>{const i=()=>Fe.preRender(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),lr(r)}}),n}function PS(t){Ho.current=[],t();const e=Ok(Ho.current,t);return Ho.current=void 0,e}function RS(t,e,n,r){if(typeof t=="function")return PS(t);const i=typeof e=="function"?e:G4(e,n,r);return Array.isArray(t)?yy(t,i):yy([t],([s])=>i(s))}function yy(t,e){const n=ri(()=>[]);return Ok(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class VS{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const DS=()=>new VS;function cp(){return ri(DS)}const Fk=z.createContext(null);function MS(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const s=r>0?1:-1,o=t[i+s];if(!o)return t;const l=t[i],u=o.layout,d=qe(u.min,u.max,.5);return s===1&&l.layout.max+n>d||s===-1&&l.layout.min+n<d?eC(t,i,i+s):t}function LS({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},o){const l=ri(()=>ue[e]),u=[],d=z.useRef(!1),h={axis:n,registerItem:(m,p)=>{const w=u.findIndex(T=>m===T.value);w!==-1?u[w].layout=p[n]:u.push({value:m,layout:p[n]}),u.sort(FS)},updateOrder:(m,p,w)=>{if(d.current)return;const T=MS(u,m,p,w);u!==T&&(d.current=!0,r(T.map(OS).filter(C=>i.indexOf(C)!==-1)))}};return z.useEffect(()=>{d.current=!1}),a.jsx(l,{...s,ref:o,ignoreStrict:!0,children:a.jsx(Fk.Provider,{value:h,children:t})})}const fu=z.forwardRef(LS);function OS(t){return t.value}function FS(t,e){return t.layout.min-e.layout.min}function vy(t,e=0){return _t(t)?t:Ic(e)}function BS({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...o},l){const u=ri(()=>ue[r]),d=z.useContext(Fk),h={x:vy(e.x),y:vy(e.y)},m=RS([h.x,h.y],([C,A])=>C||A?1:"unset"),{axis:p,registerItem:w,updateOrder:T}=d;return a.jsx(u,{drag:p,...o,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:m},layout:s,onDrag:(C,A)=>{const{velocity:b}=A;b[p]&&T(n,h[p].get(),b[p]),i&&i(C,A)},onLayoutMeasure:C=>w(n,C),ref:l,ignoreStrict:!0,children:t})}const mu=z.forwardRef(BS);function wy({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return a.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>a.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const US=()=>{};var by={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},$S=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Uk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let p=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(p=64)),r.push(n[h],n[m],n[p],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$S(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||m==null)throw new qS;const p=s<<2|l>>4;if(r.push(p),d!==64){const w=l<<4&240|d>>2;if(r.push(w),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class qS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const WS=function(t){const e=Bk(t);return Uk.encodeByteArray(e,!0)},zc=function(t){return WS(t).replace(/\./g,"")},HS=function(t){try{return Uk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=()=>KS().__FIREBASE_DEFAULTS__,QS=()=>{if(typeof process>"u"||typeof by>"u")return;const t=by.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&HS(t[1]);return e&&JSON.parse(e)},up=()=>{try{return US()||GS()||QS()||YS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},XS=t=>{var e,n;return(n=(e=up())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},JS=t=>{const e=XS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$k=()=>{var t;return(t=up())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[zc(JSON.stringify(n)),zc(JSON.stringify(o)),""].join(".")}const Qo={};function nI(){const t={prod:[],emulator:[]};for(const e of Object.keys(Qo))Qo[e]?t.emulator.push(e):t.prod.push(e);return t}function rI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ky=!1;function iI(t,e){if(typeof window>"u"||typeof document>"u"||!dp(window.location.host)||Qo[t]===e||Qo[t]||ky)return;Qo[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=nI().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,w){p.setAttribute("width","24"),p.setAttribute("id",w),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{ky=!0,o()},p}function h(p,w){p.setAttribute("id",w),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=rI(r),w=n("text"),T=document.getElementById(w)||document.createElement("span"),C=n("learnmore"),A=document.getElementById(C)||document.createElement("a"),b=n("preprendIcon"),x=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const v=p.element;l(v),h(A,C);const P=d();u(x,b),v.append(x,T,A,P),document.body.appendChild(v)}s?(T.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oI(){var e;const t=(e=up())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function aI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lI(){return!oI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qk(){try{return typeof indexedDB=="object"}catch{return!1}}function Wk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function cI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="FirebaseError";class si extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uI,Object.setPrototypeOf(this,si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pu.prototype.create)}}class pu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?dI(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new si(i,l,r)}}function dI(t,e){return t.replace(hI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hI=/\{\$([^}]+)}/g;function ka(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(_y(s)&&_y(o)){if(!ka(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function _y(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=1e3,mI=2,pI=4*60*60*1e3,gI=.5;function Ny(t,e=fI,n=mI){const r=e*Math.pow(n,t),i=Math.round(gI*r*(Math.random()-.5)*2);return Math.min(pI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cr(t){return t&&t._delegate?t._delegate:t}class ur{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ZS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vI(e))try{this.getOrInitializeService({instanceIdentifier:pi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pi){return this.instances.has(e)}getOptions(e=pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=pi){return this.component?this.component.multipleInstances?e:pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yI(t){return t===pi?void 0:t}function vI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new xI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Te||(Te={}));const bI={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},kI=Te.INFO,_I={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},NI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_I[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hp{constructor(e){this.name=e,this._logLevel=kI,this._logHandler=NI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}}const TI=(t,e)=>e.some(n=>t instanceof n);let Ty,Ey;function EI(){return Ty||(Ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CI(){return Ey||(Ey=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Hk=new WeakMap,mf=new WeakMap,Kk=new WeakMap,Vd=new WeakMap,fp=new WeakMap;function jI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Or(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Hk.set(n,t)}).catch(()=>{}),fp.set(e,t),e}function SI(t){if(mf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});mf.set(t,e)}let pf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return mf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Kk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Or(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function II(t){pf=t(pf)}function zI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Dd(this),e,...n);return Kk.set(r,e.sort?e.sort():[e]),Or(r)}:CI().includes(t)?function(...e){return t.apply(Dd(this),e),Or(Hk.get(this))}:function(...e){return Or(t.apply(Dd(this),e))}}function AI(t){return typeof t=="function"?zI(t):(t instanceof IDBTransaction&&SI(t),TI(t,EI())?new Proxy(t,pf):t)}function Or(t){if(t instanceof IDBRequest)return jI(t);if(Vd.has(t))return Vd.get(t);const e=AI(t);return e!==t&&(Vd.set(t,e),fp.set(e,t)),e}const Dd=t=>fp.get(t);function Gk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Or(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Or(o.result),u.oldVersion,u.newVersion,Or(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const PI=["get","getKey","getAll","getAllKeys","count"],RI=["put","add","delete","clear"],Md=new Map;function Cy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Md.get(e))return Md.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=RI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||PI.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return Md.set(e,s),s}II(t=>({...t,get:(e,n,r)=>Cy(e,n)||t.get(e,n,r),has:(e,n)=>!!Cy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function DI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const gf="@firebase/app",jy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=new hp("@firebase/app"),MI="@firebase/app-compat",LI="@firebase/analytics-compat",OI="@firebase/analytics",FI="@firebase/app-check-compat",BI="@firebase/app-check",UI="@firebase/auth",$I="@firebase/auth-compat",qI="@firebase/database",WI="@firebase/data-connect",HI="@firebase/database-compat",KI="@firebase/functions",GI="@firebase/functions-compat",QI="@firebase/installations",YI="@firebase/installations-compat",XI="@firebase/messaging",JI="@firebase/messaging-compat",ZI="@firebase/performance",ez="@firebase/performance-compat",tz="@firebase/remote-config",nz="@firebase/remote-config-compat",rz="@firebase/storage",iz="@firebase/storage-compat",sz="@firebase/firestore",oz="@firebase/ai",az="@firebase/firestore-compat",lz="firebase",cz="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="[DEFAULT]",uz={[gf]:"fire-core",[MI]:"fire-core-compat",[OI]:"fire-analytics",[LI]:"fire-analytics-compat",[BI]:"fire-app-check",[FI]:"fire-app-check-compat",[UI]:"fire-auth",[$I]:"fire-auth-compat",[qI]:"fire-rtdb",[WI]:"fire-data-connect",[HI]:"fire-rtdb-compat",[KI]:"fire-fn",[GI]:"fire-fn-compat",[QI]:"fire-iid",[YI]:"fire-iid-compat",[XI]:"fire-fcm",[JI]:"fire-fcm-compat",[ZI]:"fire-perf",[ez]:"fire-perf-compat",[tz]:"fire-rc",[nz]:"fire-rc-compat",[rz]:"fire-gcs",[iz]:"fire-gcs-compat",[sz]:"fire-fst",[az]:"fire-fst-compat",[oz]:"fire-vertex","fire-js":"fire-js",[lz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac=new Map,dz=new Map,yf=new Map;function Sy(t,e){try{t.container.addComponent(e)}catch(n){dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Hr(t){const e=t.name;if(yf.has(e))return dr.debug(`There were multiple attempts to register component ${e}.`),!1;yf.set(e,t);for(const n of Ac.values())Sy(n,t);for(const n of dz.values())Sy(n,t);return!0}function Fa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hz(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Fr=new pu("app","Firebase",fz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ur("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Fr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pz=cz;function Qk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:xf,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Fr.create("bad-app-name",{appName:String(i)});if(n||(n=$k()),!n)throw Fr.create("no-options");const s=Ac.get(i);if(s){if(ka(n,s.options)&&ka(r,s.config))return s;throw Fr.create("duplicate-app",{appName:i})}const o=new wI(i);for(const u of yf.values())o.addComponent(u);const l=new mz(n,r,o);return Ac.set(i,l),l}function Yk(t=xf){const e=Ac.get(t);if(!e&&t===xf&&$k())return Qk();if(!e)throw Fr.create("no-app",{appName:t});return e}function Ln(t,e,n){let r=uz[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),dr.warn(o.join(" "));return}Hr(new ur(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gz="firebase-heartbeat-database",xz=1,_a="firebase-heartbeat-store";let Ld=null;function Xk(){return Ld||(Ld=Gk(gz,xz,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(_a)}catch(n){console.warn(n)}}}}).catch(t=>{throw Fr.create("idb-open",{originalErrorMessage:t.message})})),Ld}async function yz(t){try{const n=(await Xk()).transaction(_a),r=await n.objectStore(_a).get(Jk(t));return await n.done,r}catch(e){if(e instanceof si)dr.warn(e.message);else{const n=Fr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});dr.warn(n.message)}}}async function Iy(t,e){try{const r=(await Xk()).transaction(_a,"readwrite");await r.objectStore(_a).put(e,Jk(t)),await r.done}catch(n){if(n instanceof si)dr.warn(n.message);else{const r=Fr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});dr.warn(r.message)}}}function Jk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vz=1024,wz=30;class bz{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _z(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=zy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>wz){const o=Nz(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=zy(),{heartbeatsToSend:r,unsentEntries:i}=kz(this._heartbeatsCache.heartbeats),s=zc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return dr.warn(n),""}}}function zy(){return new Date().toISOString().substring(0,10)}function kz(t,e=vz){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ay(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ay(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class _z{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qk()?Wk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yz(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Iy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ay(t){return zc(JSON.stringify({version:2,heartbeats:t})).length}function Nz(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tz(t){Hr(new ur("platform-logger",e=>new VI(e),"PRIVATE")),Hr(new ur("heartbeat",e=>new bz(e),"PRIVATE")),Ln(gf,jy,t),Ln(gf,jy,"esm2020"),Ln("fire-js","")}Tz("");var Ez="firebase",Cz="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ln(Ez,Cz,"app");const Zk="@firebase/installations",mp="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=1e4,t2=`w:${mp}`,n2="FIS_v2",jz="https://firebaseinstallations.googleapis.com/v1",Sz=60*60*1e3,Iz="installations",zz="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Az={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ri=new pu(Iz,zz,Az);function r2(t){return t instanceof si&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2({projectId:t}){return`${jz}/projects/${t}/installations`}function s2(t){return{token:t.token,requestStatus:2,expiresIn:Rz(t.expiresIn),creationTime:Date.now()}}async function o2(t,e){const r=(await e.json()).error;return Ri.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function a2({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Pz(t,{refreshToken:e}){const n=a2(t);return n.append("Authorization",Vz(e)),n}async function l2(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Rz(t){return Number(t.replace("s","000"))}function Vz(t){return`${n2} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dz({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=i2(t),i=a2(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:n2,appId:t.appId,sdkVersion:t2},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await l2(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:s2(d.authToken)}}else throw await o2("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mz(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lz=/^[cdef][\w-]{21}$/,vf="";function Oz(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Fz(t);return Lz.test(n)?n:vf}catch{return vf}}function Fz(t){return Mz(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=new Map;function d2(t,e){const n=gu(t);h2(n,e),Bz(n,e)}function h2(t,e){const n=u2.get(t);if(n)for(const r of n)r(e)}function Bz(t,e){const n=Uz();n&&n.postMessage({key:t,fid:e}),$z()}let bi=null;function Uz(){return!bi&&"BroadcastChannel"in self&&(bi=new BroadcastChannel("[Firebase] FID Change"),bi.onmessage=t=>{h2(t.data.key,t.data.fid)}),bi}function $z(){u2.size===0&&bi&&(bi.close(),bi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz="firebase-installations-database",Wz=1,Vi="firebase-installations-store";let Od=null;function pp(){return Od||(Od=Gk(qz,Wz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Vi)}}})),Od}async function Pc(t,e){const n=gu(t),i=(await pp()).transaction(Vi,"readwrite"),s=i.objectStore(Vi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&d2(t,e.fid),e}async function f2(t){const e=gu(t),r=(await pp()).transaction(Vi,"readwrite");await r.objectStore(Vi).delete(e),await r.done}async function xu(t,e){const n=gu(t),i=(await pp()).transaction(Vi,"readwrite"),s=i.objectStore(Vi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&d2(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gp(t){let e;const n=await xu(t.appConfig,r=>{const i=Hz(r),s=Kz(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===vf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Hz(t){const e=t||{fid:Oz(),registrationStatus:0};return m2(e)}function Kz(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ri.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Gz(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Qz(t)}:{installationEntry:e}}async function Gz(t,e){try{const n=await Dz(t,e);return Pc(t.appConfig,n)}catch(n){throw r2(n)&&n.customData.serverCode===409?await f2(t.appConfig):await Pc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Qz(t){let e=await Py(t.appConfig);for(;e.registrationStatus===1;)await c2(100),e=await Py(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await gp(t);return r||n}return e}function Py(t){return xu(t,e=>{if(!e)throw Ri.create("installation-not-found");return m2(e)})}function m2(t){return Yz(t)?{fid:t.fid,registrationStatus:0}:t}function Yz(t){return t.registrationStatus===1&&t.registrationTime+e2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xz({appConfig:t,heartbeatServiceProvider:e},n){const r=Jz(t,n),i=Pz(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:t2,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await l2(()=>fetch(r,l));if(u.ok){const d=await u.json();return s2(d)}else throw await o2("Generate Auth Token",u)}function Jz(t,{fid:e}){return`${i2(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xp(t,e=!1){let n;const r=await xu(t.appConfig,s=>{if(!p2(s))throw Ri.create("not-registered");const o=s.authToken;if(!e&&tA(o))return s;if(o.requestStatus===1)return n=Zz(t,e),s;{if(!navigator.onLine)throw Ri.create("app-offline");const l=rA(s);return n=eA(t,l),l}});return n?await n:r.authToken}async function Zz(t,e){let n=await Ry(t.appConfig);for(;n.authToken.requestStatus===1;)await c2(100),n=await Ry(t.appConfig);const r=n.authToken;return r.requestStatus===0?xp(t,e):r}function Ry(t){return xu(t,e=>{if(!p2(e))throw Ri.create("not-registered");const n=e.authToken;return iA(n)?{...e,authToken:{requestStatus:0}}:e})}async function eA(t,e){try{const n=await Xz(t,e),r={...e,authToken:n};return await Pc(t.appConfig,r),n}catch(n){if(r2(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await f2(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Pc(t.appConfig,r)}throw n}}function p2(t){return t!==void 0&&t.registrationStatus===2}function tA(t){return t.requestStatus===2&&!nA(t)}function nA(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Sz}function rA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function iA(t){return t.requestStatus===1&&t.requestTime+e2<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sA(t){const e=t,{installationEntry:n,registrationPromise:r}=await gp(e);return r?r.catch(console.error):xp(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oA(t,e=!1){const n=t;return await aA(n),(await xp(n,e)).token}async function aA(t){const{registrationPromise:e}=await gp(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(t){if(!t||!t.options)throw Fd("App Configuration");if(!t.name)throw Fd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Fd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Fd(t){return Ri.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="installations",cA="installations-internal",uA=t=>{const e=t.getProvider("app").getImmediate(),n=lA(e),r=Fa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},dA=t=>{const e=t.getProvider("app").getImmediate(),n=Fa(e,g2).getImmediate();return{getId:()=>sA(n),getToken:i=>oA(n,i)}};function hA(){Hr(new ur(g2,uA,"PUBLIC")),Hr(new ur(cA,dA,"PRIVATE"))}hA();Ln(Zk,mp);Ln(Zk,mp,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc="analytics",fA="firebase_id",mA="origin",pA=60*1e3,gA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ot=new hp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},en=new pu("analytics","Analytics",xA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(t){if(!t.startsWith(yp)){const e=en.create("invalid-gtag-resource",{gtagURL:t});return Ot.warn(e.message),""}return t}function x2(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function vA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function wA(t,e){const n=vA("firebase-js-sdk-policy",{createScriptURL:yA}),r=document.createElement("script"),i=`${yp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function bA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kA(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const u=(await x2(n)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(l){Ot.error(l)}t("config",i,s)}async function _A(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await x2(n);for(const u of o){const d=l.find(m=>m.measurementId===u),h=d&&e[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ot.error(s)}}function NA(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,u]=o;await _A(t,e,n,l,u)}else if(s==="config"){const[l,u]=o;await kA(t,e,n,r,l,u)}else if(s==="consent"){const[l,u]=o;t("consent",l,u)}else if(s==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Ot.error(l)}}return i}function TA(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=NA(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function EA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(yp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=30,jA=1e3;class SA{constructor(e={},n=jA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const y2=new SA;function IA(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function zA(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:IA(n)},i=gA.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let l="";try{const u=await s.json();(o=u.error)!=null&&o.message&&(l=u.error.message)}catch{}throw en.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function AA(t,e=y2,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw en.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw en.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new VA;return setTimeout(async()=>{l.abort()},pA),v2({appId:r,apiKey:i,measurementId:s},o,l,e)}async function v2(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=y2){var l;const{appId:s,measurementId:o}=t;try{await PA(r,e)}catch(u){if(o)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw u}try{const u=await zA(t);return i.deleteThrottleMetadata(s),u}catch(u){const d=u;if(!RA(d)){if(i.deleteThrottleMetadata(s),o)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:o};throw u}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?Ny(n,i.intervalMillis,CA):Ny(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,m),Ot.debug(`Calling attemptFetch again in ${h} millis`),v2(t,m,r,i)}}function PA(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(en.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function RA(t){if(!(t instanceof si)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class VA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function DA(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function MA(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(){if(qk())try{await Wk()}catch(t){return Ot.warn(en.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ot.warn(en.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function OA(t,e,n,r,i,s,o){const l=AA(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Ot.error(p)),e.push(l);const u=LA().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([l,u]);EA(s)||wA(s,d.measurementId),i("js",new Date);const m=(o==null?void 0:o.config)??{};return m[mA]="firebase",m.update=!0,h!=null&&(m[fA]=h),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.app=e}_delete(){return delete Ns[this.app.options.appId],Promise.resolve()}}let Ns={},Vy=[];const Dy={};let Bd="dataLayer",BA="gtag",My,vp,Ly=!1;function UA(){const t=[];if(aI()&&t.push("This is a browser extension environment."),cI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=en.create("invalid-analytics-context",{errorInfo:e});Ot.warn(n.message)}}function $A(t,e,n){UA();const r=t.options.appId;if(!r)throw en.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw en.create("no-api-key");if(Ns[r]!=null)throw en.create("already-exists",{id:r});if(!Ly){bA(Bd);const{wrappedGtag:s,gtagCore:o}=TA(Ns,Vy,Dy,Bd,BA);vp=s,My=o,Ly=!0}return Ns[r]=OA(t,Vy,Dy,e,My,Bd,n),new FA(t)}function qA(t=Yk()){t=cr(t);const e=Fa(t,Rc);return e.isInitialized()?e.getImmediate():WA(t)}function WA(t,e={}){const n=Fa(t,Rc);if(n.isInitialized()){const i=n.getImmediate();if(ka(e,n.getOptions()))return i;throw en.create("already-initialized")}return n.initialize({options:e})}function HA(t,e,n){t=cr(t),MA(vp,Ns[t.app.options.appId],e,n).catch(r=>Ot.error(r))}function KA(t,e,n,r){t=cr(t),DA(vp,Ns[t.app.options.appId],e,n,r).catch(i=>Ot.error(i))}const Oy="@firebase/analytics",Fy="0.10.19";function GA(){Hr(new ur(Rc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return $A(r,i,n)},"PUBLIC")),Hr(new ur("analytics-internal",t,"PRIVATE")),Ln(Oy,Fy),Ln(Oy,Fy,"esm2020");function t(e){try{const n=e.getProvider(Rc).getImmediate();return{logEvent:(r,i,s)=>KA(n,r,i,s),setUserProperties:(r,i)=>HA(n,r,i)}}catch(n){throw en.create("interop-component-reg-failed",{reason:n})}}}GA();var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Br,w2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,y){function _(){}_.prototype=y.prototype,k.F=y.prototype,k.prototype=new _,k.prototype.constructor=k,k.D=function(E,I,R){for(var S=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)S[xe-2]=arguments[xe];return y.prototype[I].apply(E,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,y,_){_||(_=0);const E=Array(16);if(typeof y=="string")for(var I=0;I<16;++I)E[I]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(I=0;I<16;++I)E[I]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=k.g[0],_=k.g[1],I=k.g[2];let R=k.g[3],S;S=y+(R^_&(I^R))+E[0]+3614090360&4294967295,y=_+(S<<7&4294967295|S>>>25),S=R+(I^y&(_^I))+E[1]+3905402710&4294967295,R=y+(S<<12&4294967295|S>>>20),S=I+(_^R&(y^_))+E[2]+606105819&4294967295,I=R+(S<<17&4294967295|S>>>15),S=_+(y^I&(R^y))+E[3]+3250441966&4294967295,_=I+(S<<22&4294967295|S>>>10),S=y+(R^_&(I^R))+E[4]+4118548399&4294967295,y=_+(S<<7&4294967295|S>>>25),S=R+(I^y&(_^I))+E[5]+1200080426&4294967295,R=y+(S<<12&4294967295|S>>>20),S=I+(_^R&(y^_))+E[6]+2821735955&4294967295,I=R+(S<<17&4294967295|S>>>15),S=_+(y^I&(R^y))+E[7]+4249261313&4294967295,_=I+(S<<22&4294967295|S>>>10),S=y+(R^_&(I^R))+E[8]+1770035416&4294967295,y=_+(S<<7&4294967295|S>>>25),S=R+(I^y&(_^I))+E[9]+2336552879&4294967295,R=y+(S<<12&4294967295|S>>>20),S=I+(_^R&(y^_))+E[10]+4294925233&4294967295,I=R+(S<<17&4294967295|S>>>15),S=_+(y^I&(R^y))+E[11]+2304563134&4294967295,_=I+(S<<22&4294967295|S>>>10),S=y+(R^_&(I^R))+E[12]+1804603682&4294967295,y=_+(S<<7&4294967295|S>>>25),S=R+(I^y&(_^I))+E[13]+4254626195&4294967295,R=y+(S<<12&4294967295|S>>>20),S=I+(_^R&(y^_))+E[14]+2792965006&4294967295,I=R+(S<<17&4294967295|S>>>15),S=_+(y^I&(R^y))+E[15]+1236535329&4294967295,_=I+(S<<22&4294967295|S>>>10),S=y+(I^R&(_^I))+E[1]+4129170786&4294967295,y=_+(S<<5&4294967295|S>>>27),S=R+(_^I&(y^_))+E[6]+3225465664&4294967295,R=y+(S<<9&4294967295|S>>>23),S=I+(y^_&(R^y))+E[11]+643717713&4294967295,I=R+(S<<14&4294967295|S>>>18),S=_+(R^y&(I^R))+E[0]+3921069994&4294967295,_=I+(S<<20&4294967295|S>>>12),S=y+(I^R&(_^I))+E[5]+3593408605&4294967295,y=_+(S<<5&4294967295|S>>>27),S=R+(_^I&(y^_))+E[10]+38016083&4294967295,R=y+(S<<9&4294967295|S>>>23),S=I+(y^_&(R^y))+E[15]+3634488961&4294967295,I=R+(S<<14&4294967295|S>>>18),S=_+(R^y&(I^R))+E[4]+3889429448&4294967295,_=I+(S<<20&4294967295|S>>>12),S=y+(I^R&(_^I))+E[9]+568446438&4294967295,y=_+(S<<5&4294967295|S>>>27),S=R+(_^I&(y^_))+E[14]+3275163606&4294967295,R=y+(S<<9&4294967295|S>>>23),S=I+(y^_&(R^y))+E[3]+4107603335&4294967295,I=R+(S<<14&4294967295|S>>>18),S=_+(R^y&(I^R))+E[8]+1163531501&4294967295,_=I+(S<<20&4294967295|S>>>12),S=y+(I^R&(_^I))+E[13]+2850285829&4294967295,y=_+(S<<5&4294967295|S>>>27),S=R+(_^I&(y^_))+E[2]+4243563512&4294967295,R=y+(S<<9&4294967295|S>>>23),S=I+(y^_&(R^y))+E[7]+1735328473&4294967295,I=R+(S<<14&4294967295|S>>>18),S=_+(R^y&(I^R))+E[12]+2368359562&4294967295,_=I+(S<<20&4294967295|S>>>12),S=y+(_^I^R)+E[5]+4294588738&4294967295,y=_+(S<<4&4294967295|S>>>28),S=R+(y^_^I)+E[8]+2272392833&4294967295,R=y+(S<<11&4294967295|S>>>21),S=I+(R^y^_)+E[11]+1839030562&4294967295,I=R+(S<<16&4294967295|S>>>16),S=_+(I^R^y)+E[14]+4259657740&4294967295,_=I+(S<<23&4294967295|S>>>9),S=y+(_^I^R)+E[1]+2763975236&4294967295,y=_+(S<<4&4294967295|S>>>28),S=R+(y^_^I)+E[4]+1272893353&4294967295,R=y+(S<<11&4294967295|S>>>21),S=I+(R^y^_)+E[7]+4139469664&4294967295,I=R+(S<<16&4294967295|S>>>16),S=_+(I^R^y)+E[10]+3200236656&4294967295,_=I+(S<<23&4294967295|S>>>9),S=y+(_^I^R)+E[13]+681279174&4294967295,y=_+(S<<4&4294967295|S>>>28),S=R+(y^_^I)+E[0]+3936430074&4294967295,R=y+(S<<11&4294967295|S>>>21),S=I+(R^y^_)+E[3]+3572445317&4294967295,I=R+(S<<16&4294967295|S>>>16),S=_+(I^R^y)+E[6]+76029189&4294967295,_=I+(S<<23&4294967295|S>>>9),S=y+(_^I^R)+E[9]+3654602809&4294967295,y=_+(S<<4&4294967295|S>>>28),S=R+(y^_^I)+E[12]+3873151461&4294967295,R=y+(S<<11&4294967295|S>>>21),S=I+(R^y^_)+E[15]+530742520&4294967295,I=R+(S<<16&4294967295|S>>>16),S=_+(I^R^y)+E[2]+3299628645&4294967295,_=I+(S<<23&4294967295|S>>>9),S=y+(I^(_|~R))+E[0]+4096336452&4294967295,y=_+(S<<6&4294967295|S>>>26),S=R+(_^(y|~I))+E[7]+1126891415&4294967295,R=y+(S<<10&4294967295|S>>>22),S=I+(y^(R|~_))+E[14]+2878612391&4294967295,I=R+(S<<15&4294967295|S>>>17),S=_+(R^(I|~y))+E[5]+4237533241&4294967295,_=I+(S<<21&4294967295|S>>>11),S=y+(I^(_|~R))+E[12]+1700485571&4294967295,y=_+(S<<6&4294967295|S>>>26),S=R+(_^(y|~I))+E[3]+2399980690&4294967295,R=y+(S<<10&4294967295|S>>>22),S=I+(y^(R|~_))+E[10]+4293915773&4294967295,I=R+(S<<15&4294967295|S>>>17),S=_+(R^(I|~y))+E[1]+2240044497&4294967295,_=I+(S<<21&4294967295|S>>>11),S=y+(I^(_|~R))+E[8]+1873313359&4294967295,y=_+(S<<6&4294967295|S>>>26),S=R+(_^(y|~I))+E[15]+4264355552&4294967295,R=y+(S<<10&4294967295|S>>>22),S=I+(y^(R|~_))+E[6]+2734768916&4294967295,I=R+(S<<15&4294967295|S>>>17),S=_+(R^(I|~y))+E[13]+1309151649&4294967295,_=I+(S<<21&4294967295|S>>>11),S=y+(I^(_|~R))+E[4]+4149444226&4294967295,y=_+(S<<6&4294967295|S>>>26),S=R+(_^(y|~I))+E[11]+3174756917&4294967295,R=y+(S<<10&4294967295|S>>>22),S=I+(y^(R|~_))+E[2]+718787259&4294967295,I=R+(S<<15&4294967295|S>>>17),S=_+(R^(I|~y))+E[9]+3951481745&4294967295,k.g[0]=k.g[0]+y&4294967295,k.g[1]=k.g[1]+(I+(S<<21&4294967295|S>>>11))&4294967295,k.g[2]=k.g[2]+I&4294967295,k.g[3]=k.g[3]+R&4294967295}r.prototype.v=function(k,y){y===void 0&&(y=k.length);const _=y-this.blockSize,E=this.C;let I=this.h,R=0;for(;R<y;){if(I==0)for(;R<=_;)i(this,k,R),R+=this.blockSize;if(typeof k=="string"){for(;R<y;)if(E[I++]=k.charCodeAt(R++),I==this.blockSize){i(this,E),I=0;break}}else for(;R<y;)if(E[I++]=k[R++],I==this.blockSize){i(this,E),I=0;break}}this.h=I,this.o+=y},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var y=1;y<k.length-8;++y)k[y]=0;y=this.o*8;for(var _=k.length-8;_<k.length;++_)k[_]=y&255,y/=256;for(this.v(k),k=Array(16),y=0,_=0;_<4;++_)for(let E=0;E<32;E+=8)k[y++]=this.g[_]>>>E&255;return k};function s(k,y){var _=l;return Object.prototype.hasOwnProperty.call(_,k)?_[k]:_[k]=y(k)}function o(k,y){this.h=y;const _=[];let E=!0;for(let I=k.length-1;I>=0;I--){const R=k[I]|0;E&&R==y||(_[I]=R,E=!1)}this.g=_}var l={};function u(k){return-128<=k&&k<128?s(k,function(y){return new o([y|0],y<0?-1:0)}):new o([k|0],k<0?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return m;if(k<0)return A(d(-k));const y=[];let _=1;for(let E=0;k>=_;E++)y[E]=k/_|0,_*=4294967296;return new o(y,0)}function h(k,y){if(k.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(k.charAt(0)=="-")return A(h(k.substring(1),y));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=d(Math.pow(y,8));let E=m;for(let R=0;R<k.length;R+=8){var I=Math.min(8,k.length-R);const S=parseInt(k.substring(R,R+I),y);I<8?(I=d(Math.pow(y,I)),E=E.j(I).add(d(S))):(E=E.j(_),E=E.add(d(S)))}return E}var m=u(0),p=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(C(this))return-A(this).m();let k=0,y=1;for(let _=0;_<this.g.length;_++){const E=this.i(_);k+=(E>=0?E:4294967296+E)*y,y*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(T(this))return"0";if(C(this))return"-"+A(this).toString(k);const y=d(Math.pow(k,6));var _=this;let E="";for(;;){const I=P(_,y).g;_=b(_,I.j(y));let R=((_.g.length>0?_.g[0]:_.h)>>>0).toString(k);if(_=I,T(_))return R+E;for(;R.length<6;)R="0"+R;E=R+E}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function T(k){if(k.h!=0)return!1;for(let y=0;y<k.g.length;y++)if(k.g[y]!=0)return!1;return!0}function C(k){return k.h==-1}t.l=function(k){return k=b(this,k),C(k)?-1:T(k)?0:1};function A(k){const y=k.g.length,_=[];for(let E=0;E<y;E++)_[E]=~k.g[E];return new o(_,~k.h).add(p)}t.abs=function(){return C(this)?A(this):this},t.add=function(k){const y=Math.max(this.g.length,k.g.length),_=[];let E=0;for(let I=0;I<=y;I++){let R=E+(this.i(I)&65535)+(k.i(I)&65535),S=(R>>>16)+(this.i(I)>>>16)+(k.i(I)>>>16);E=S>>>16,R&=65535,S&=65535,_[I]=S<<16|R}return new o(_,_[_.length-1]&-2147483648?-1:0)};function b(k,y){return k.add(A(y))}t.j=function(k){if(T(this)||T(k))return m;if(C(this))return C(k)?A(this).j(A(k)):A(A(this).j(k));if(C(k))return A(this.j(A(k)));if(this.l(w)<0&&k.l(w)<0)return d(this.m()*k.m());const y=this.g.length+k.g.length,_=[];for(var E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(let I=0;I<k.g.length;I++){const R=this.i(E)>>>16,S=this.i(E)&65535,xe=k.i(I)>>>16,de=k.i(I)&65535;_[2*E+2*I]+=S*de,x(_,2*E+2*I),_[2*E+2*I+1]+=R*de,x(_,2*E+2*I+1),_[2*E+2*I+1]+=S*xe,x(_,2*E+2*I+1),_[2*E+2*I+2]+=R*xe,x(_,2*E+2*I+2)}for(k=0;k<y;k++)_[k]=_[2*k+1]<<16|_[2*k];for(k=y;k<2*y;k++)_[k]=0;return new o(_,0)};function x(k,y){for(;(k[y]&65535)!=k[y];)k[y+1]+=k[y]>>>16,k[y]&=65535,y++}function v(k,y){this.g=k,this.h=y}function P(k,y){if(T(y))throw Error("division by zero");if(T(k))return new v(m,m);if(C(k))return y=P(A(k),y),new v(A(y.g),A(y.h));if(C(y))return y=P(k,A(y)),new v(A(y.g),y.h);if(k.g.length>30){if(C(k)||C(y))throw Error("slowDivide_ only works with positive integers.");for(var _=p,E=y;E.l(k)<=0;)_=D(_),E=D(E);var I=M(_,1),R=M(E,1);for(E=M(E,2),_=M(_,2);!T(E);){var S=R.add(E);S.l(k)<=0&&(I=I.add(_),R=S),E=M(E,1),_=M(_,1)}return y=b(k,I.j(y)),new v(I,y)}for(I=m;k.l(y)>=0;){for(_=Math.max(1,Math.floor(k.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),R=d(_),S=R.j(y);C(S)||S.l(k)>0;)_-=E,R=d(_),S=R.j(y);T(R)&&(R=p),I=I.add(R),k=b(k,S)}return new v(I,k)}t.B=function(k){return P(this,k).h},t.and=function(k){const y=Math.max(this.g.length,k.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)&k.i(E);return new o(_,this.h&k.h)},t.or=function(k){const y=Math.max(this.g.length,k.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)|k.i(E);return new o(_,this.h|k.h)},t.xor=function(k){const y=Math.max(this.g.length,k.g.length),_=[];for(let E=0;E<y;E++)_[E]=this.i(E)^k.i(E);return new o(_,this.h^k.h)};function D(k){const y=k.g.length+1,_=[];for(let E=0;E<y;E++)_[E]=k.i(E)<<1|k.i(E-1)>>>31;return new o(_,k.h)}function M(k,y){const _=y>>5;y%=32;const E=k.g.length-_,I=[];for(let R=0;R<E;R++)I[R]=y>0?k.i(R+_)>>>y|k.i(R+_+1)<<32-y:k.i(R+_);return new o(I,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,w2=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Br=o}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var Tl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var b2,zo,k2,Kl,wf,_2,N2,T2;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tl=="object"&&Tl];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var N=0;N<c.length-1;N++){var F=c[N];if(!(F in g))break e;g=g[F]}c=c[c.length-1],N=g[c],f=f(N),f!=N&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(f){var g=[],N;for(N in f)Object.prototype.hasOwnProperty.call(f,N)&&g.push([N,f[N]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function u(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){return d=u,d.apply(null,arguments)}function h(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var N=g.slice();return N.push.apply(N,arguments),c.apply(this,N)}}function m(c,f){function g(){}g.prototype=f.prototype,c.Z=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(N,F,B){for(var te=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)te[ve-2]=arguments[ve];return f.prototype[F].apply(N,te)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function w(c){const f=c.length;if(f>0){const g=Array(f);for(let N=0;N<f;N++)g[N]=c[N];return g}return[]}function T(c,f){for(let N=1;N<arguments.length;N++){const F=arguments[N];var g=typeof F;if(g=g!="object"?g:F?Array.isArray(F)?"array":g:"null",g=="array"||g=="object"&&typeof F.length=="number"){g=c.length||0;const B=F.length||0;c.length=g+B;for(let te=0;te<B;te++)c[g+te]=F[te]}else c.push(F)}}class C{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function A(c){o.setTimeout(()=>{throw c},0)}function b(){var c=k;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class x{constructor(){this.h=this.g=null}add(f,g){const N=v.get();N.set(f,g),this.h?this.h.next=N:this.g=N,this.h=N}}var v=new C(()=>new P,c=>c.reset());class P{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,k=new x,y=()=>{const c=Promise.resolve(void 0);D=()=>{c.then(_)}};function _(){for(var c;c=b();){try{c.h.call(c.g)}catch(g){A(g)}var f=v;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}M=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return c}();function S(c){return/^[\s\xa0]*$/.test(c)}function xe(c,f){I.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}m(xe,I),xe.prototype.init=function(c,f){const g=this.type=c.type,N=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),ae=0;function me(c,f,g,N,F){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!N,this.ha=F,this.key=++ae,this.da=this.fa=!1}function Q(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ee(c,f,g){for(const N in c)f.call(g,c[N],N,c)}function ie(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function $(c){const f={};for(const g in c)f[g]=c[g];return f}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ne(c,f){let g,N;for(let F=1;F<arguments.length;F++){N=arguments[F];for(g in N)c[g]=N[g];for(let B=0;B<se.length;B++)g=se[B],Object.prototype.hasOwnProperty.call(N,g)&&(c[g]=N[g])}}function V(c){this.src=c,this.g={},this.h=0}V.prototype.add=function(c,f,g,N,F){const B=c.toString();c=this.g[B],c||(c=this.g[B]=[],this.h++);const te=Y(c,f,N,F);return te>-1?(f=c[te],g||(f.fa=!1)):(f=new me(f,this.src,B,!!N,F),f.fa=g,c.push(f)),f};function U(c,f){const g=f.type;if(g in c.g){var N=c.g[g],F=Array.prototype.indexOf.call(N,f,void 0),B;(B=F>=0)&&Array.prototype.splice.call(N,F,1),B&&(Q(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Y(c,f,g,N){for(let F=0;F<c.length;++F){const B=c[F];if(!B.da&&B.listener==f&&B.capture==!!g&&B.ha==N)return F}return-1}var X="closure_lm_"+(Math.random()*1e6|0),j={};function O(c,f,g,N,F){if(Array.isArray(f)){for(let B=0;B<f.length;B++)O(c,f[B],g,N,F);return null}return g=Be(g),c&&c[de]?c.J(f,g,l(N)?!!N.capture:!1,F):H(c,f,g,!1,N,F)}function H(c,f,g,N,F,B){if(!f)throw Error("Invalid event type");const te=l(F)?!!F.capture:!!F;let ve=_e(c);if(ve||(c[X]=ve=new V(c)),g=ve.add(f,g,N,te,B),g.proxy)return g;if(N=re(),g.proxy=N,N.src=c,N.listener=g,c.addEventListener)R||(F=te),F===void 0&&(F=!1),c.addEventListener(f.toString(),N,F);else if(c.attachEvent)c.attachEvent(W(f.toString()),N);else if(c.addListener&&c.removeListener)c.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return g}function re(){function c(g){return f.call(c.src,c.listener,g)}const f=Z;return c}function L(c,f,g,N,F){if(Array.isArray(f))for(var B=0;B<f.length;B++)L(c,f[B],g,N,F);else N=l(N)?!!N.capture:!!N,g=Be(g),c&&c[de]?(c=c.i,B=String(f).toString(),B in c.g&&(f=c.g[B],g=Y(f,g,N,F),g>-1&&(Q(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete c.g[B],c.h--)))):c&&(c=_e(c))&&(f=c.g[f.toString()],c=-1,f&&(c=Y(f,g,N,F)),(g=c>-1?f[c]:null)&&q(g))}function q(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[de])U(f.i,c);else{var g=c.type,N=c.proxy;f.removeEventListener?f.removeEventListener(g,N,c.capture):f.detachEvent?f.detachEvent(W(g),N):f.addListener&&f.removeListener&&f.removeListener(N),(g=_e(f))?(U(g,c),g.h==0&&(g.src=null,f[X]=null)):Q(c)}}}function W(c){return c in j?j[c]:j[c]="on"+c}function Z(c,f){if(c.da)c=!0;else{f=new xe(f,this);const g=c.listener,N=c.ha||c.src;c.fa&&q(c),c=g.call(N,f)}return c}function _e(c){return c=c[X],c instanceof V?c:null}var Se="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(c){return typeof c=="function"?c:(c[Se]||(c[Se]=function(f){return c.handleEvent(f)}),c[Se])}function Ue(){E.call(this),this.i=new V(this),this.M=this,this.G=null}m(Ue,E),Ue.prototype[de]=!0,Ue.prototype.removeEventListener=function(c,f,g,N){L(this,c,f,g,N)};function lt(c,f){var g,N=c.G;if(N)for(g=[];N;N=N.G)g.push(N);if(c=c.M,N=f.type||f,typeof f=="string")f=new I(f,c);else if(f instanceof I)f.target=f.target||c;else{var F=f;f=new I(N,c),ne(f,F)}F=!0;let B,te;if(g)for(te=g.length-1;te>=0;te--)B=f.g=g[te],F=Qt(B,N,!0,f)&&F;if(B=f.g=c,F=Qt(B,N,!0,f)&&F,F=Qt(B,N,!1,f)&&F,g)for(te=0;te<g.length;te++)B=f.g=g[te],F=Qt(B,N,!1,f)&&F}Ue.prototype.N=function(){if(Ue.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const g=c.g[f];for(let N=0;N<g.length;N++)Q(g[N]);delete c.g[f],c.h--}}this.G=null},Ue.prototype.J=function(c,f,g,N){return this.i.add(String(c),f,!1,g,N)},Ue.prototype.K=function(c,f,g,N){return this.i.add(String(c),f,!0,g,N)};function Qt(c,f,g,N){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let F=!0;for(let B=0;B<f.length;++B){const te=f[B];if(te&&!te.da&&te.capture==g){const ve=te.listener,ct=te.ha||te.src;te.fa&&U(c.i,te),F=ve.call(ct,N)!==!1&&F}}return F&&!N.defaultPrevented}function nN(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function n0(c){c.g=nN(()=>{c.g=null,c.i&&(c.i=!1,n0(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class rN extends E{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:n0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Zs(c){E.call(this),this.h=c,this.g={}}m(Zs,E);var r0=[];function i0(c){ee(c.g,function(f,g){this.g.hasOwnProperty(g)&&q(f)},c),c.g={}}Zs.prototype.N=function(){Zs.Z.N.call(this),i0(this)},Zs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zu=o.JSON.stringify,iN=o.JSON.parse,sN=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function s0(){}function o0(){}var eo={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Au(){I.call(this,"d")}m(Au,I);function Pu(){I.call(this,"c")}m(Pu,I);var oi={},a0=null;function Ka(){return a0=a0||new Ue}oi.Ia="serverreachability";function l0(c){I.call(this,oi.Ia,c)}m(l0,I);function to(c){const f=Ka();lt(f,new l0(f))}oi.STAT_EVENT="statevent";function c0(c,f){I.call(this,oi.STAT_EVENT,c),this.stat=f}m(c0,I);function Rt(c){const f=Ka();lt(f,new c0(f,c))}oi.Ja="timingevent";function u0(c,f){I.call(this,oi.Ja,c),this.size=f}m(u0,I);function no(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function ro(){this.g=!0}ro.prototype.ua=function(){this.g=!1};function oN(c,f,g,N,F,B){c.info(function(){if(c.g)if(B){var te="",ve=B.split("&");for(let Ie=0;Ie<ve.length;Ie++){var ct=ve[Ie].split("=");if(ct.length>1){const pt=ct[0];ct=ct[1];const Sn=pt.split("_");te=Sn.length>=2&&Sn[1]=="type"?te+(pt+"="+ct+"&"):te+(pt+"=redacted&")}}}else te=null;else te=B;return"XMLHTTP REQ ("+N+") [attempt "+F+"]: "+f+`
`+g+`
`+te})}function aN(c,f,g,N,F,B,te){c.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+F+"]: "+f+`
`+g+`
`+B+" "+te})}function Wi(c,f,g,N){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+cN(c,g)+(N?" "+N:"")})}function lN(c,f){c.info(function(){return"TIMEOUT: "+f})}ro.prototype.info=function(){};function cN(c,f){if(!c.g)return f;if(!f)return null;try{const B=JSON.parse(f);if(B){for(c=0;c<B.length;c++)if(Array.isArray(B[c])){var g=B[c];if(!(g.length<2)){var N=g[1];if(Array.isArray(N)&&!(N.length<1)){var F=N[0];if(F!="noop"&&F!="stop"&&F!="close")for(let te=1;te<N.length;te++)N[te]=""}}}}return zu(B)}catch{return f}}var Ga={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},d0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},h0;function Ru(){}m(Ru,s0),Ru.prototype.g=function(){return new XMLHttpRequest},h0=new Ru;function io(c){return encodeURIComponent(String(c))}function uN(c){var f=1;c=c.split(":");const g=[];for(;f>0&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function pr(c,f,g,N){this.j=c,this.i=f,this.l=g,this.S=N||1,this.V=new Zs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new f0}function f0(){this.i=null,this.g="",this.h=!1}var m0={},Vu={};function Du(c,f,g){c.M=1,c.A=Ya(jn(f)),c.u=g,c.R=!0,p0(c,null)}function p0(c,f){c.F=Date.now(),Qa(c),c.B=jn(c.A);var g=c.B,N=c.S;Array.isArray(N)||(N=[String(N)]),j0(g.i,"t",N),c.C=0,g=c.j.L,c.h=new f0,c.g=H0(c.j,g?f:null,!c.u),c.P>0&&(c.O=new rN(d(c.Y,c,c.g),c.P)),f=c.V,g=c.g,N=c.ba;var F="readystatechange";Array.isArray(F)||(F&&(r0[0]=F.toString()),F=r0);for(let B=0;B<F.length;B++){const te=O(g,F[B],N||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=c.J?$(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),to(),oN(c.i,c.v,c.B,c.l,c.S,c.u)}pr.prototype.ba=function(c){c=c.target;const f=this.O;f&&yr(c)==3?f.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{const ve=yr(this.g),ct=this.g.ya(),Ie=this.g.ca();if(!(ve<3)&&(ve!=3||this.g&&(this.h.h||this.g.la()||V0(this.g)))){this.K||ve!=4||ct==7||(ct==8||Ie<=0?to(3):to(2)),Mu(this);var f=this.g.ca();this.X=f;var g=dN(this);if(this.o=f==200,aN(this.i,this.v,this.B,this.l,this.S,ve,f),this.o){if(this.U&&!this.L){t:{if(this.g){var N,F=this.g;if((N=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(N)){var B=N;break t}}B=null}if(c=B)Wi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Lu(this,c);else{this.o=!1,this.m=3,Rt(12),ai(this),so(this);break e}}if(this.R){c=!0;let pt;for(;!this.K&&this.C<g.length;)if(pt=hN(this,g),pt==Vu){ve==4&&(this.m=4,Rt(14),c=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==m0){this.m=4,Rt(15),Wi(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else Wi(this.i,this.l,pt,null),Lu(this,pt);if(g0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ve!=4||g.length!=0||this.h.h||(this.m=1,Rt(16),c=!1),this.o=this.o&&c,!c)Wi(this.i,this.l,g,"[Invalid Chunked Response]"),ai(this),so(this);else if(g.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Hu(te),te.P=!0,Rt(11))}}else Wi(this.i,this.l,g,null),Lu(this,g);ve==4&&ai(this),this.o&&!this.K&&(ve==4?U0(this.j,this):(this.o=!1,Qa(this)))}else EN(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Rt(12)):(this.m=0,Rt(13)),ai(this),so(this)}}}catch{}finally{}};function dN(c){if(!g0(c))return c.g.la();const f=V0(c.g);if(f==="")return"";let g="";const N=f.length,F=yr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ai(c),so(c),"";c.h.i=new o.TextDecoder}for(let B=0;B<N;B++)c.h.h=!0,g+=c.h.i.decode(f[B],{stream:!(F&&B==N-1)});return f.length=0,c.h.g+=g,c.C=0,c.h.g}function g0(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function hN(c,f){var g=c.C,N=f.indexOf(`
`,g);return N==-1?Vu:(g=Number(f.substring(g,N)),isNaN(g)?m0:(N+=1,N+g>f.length?Vu:(f=f.slice(N,N+g),c.C=N+g,f)))}pr.prototype.cancel=function(){this.K=!0,ai(this)};function Qa(c){c.T=Date.now()+c.H,x0(c,c.H)}function x0(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=no(d(c.aa,c),f)}function Mu(c){c.D&&(o.clearTimeout(c.D),c.D=null)}pr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(lN(this.i,this.B),this.M!=2&&(to(),Rt(17)),ai(this),this.m=2,so(this)):x0(this,this.T-c)};function so(c){c.j.I==0||c.K||U0(c.j,c)}function ai(c){Mu(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,i0(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function Lu(c,f){try{var g=c.j;if(g.I!=0&&(g.g==c||Ou(g.h,c))){if(!c.L&&Ou(g.h,c)&&g.I==3){try{var N=g.Ba.g.parse(f)}catch{N=null}if(Array.isArray(N)&&N.length==3){var F=N;if(F[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)tl(g),Za(g);else break e;Wu(g),Rt(18)}}else g.xa=F[1],0<g.xa-g.K&&F[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=no(d(g.Va,g),6e3));w0(g.h)<=1&&g.ta&&(g.ta=void 0)}else ci(g,11)}else if((c.L||g.g==c)&&tl(g),!S(f))for(F=g.Ba.g.parse(f),f=0;f<F.length;f++){let Ie=F[f];const pt=Ie[0];if(!(pt<=g.K))if(g.K=pt,Ie=Ie[1],g.I==2)if(Ie[0]=="c"){g.M=Ie[1],g.ba=Ie[2];const Sn=Ie[3];Sn!=null&&(g.ka=Sn,g.j.info("VER="+g.ka));const ui=Ie[4];ui!=null&&(g.za=ui,g.j.info("SVER="+g.za));const vr=Ie[5];vr!=null&&typeof vr=="number"&&vr>0&&(N=1.5*vr,g.O=N,g.j.info("backChannelRequestTimeoutMs_="+N)),N=g;const wr=c.g;if(wr){const rl=wr.g?wr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rl){var B=N.h;B.g||rl.indexOf("spdy")==-1&&rl.indexOf("quic")==-1&&rl.indexOf("h2")==-1||(B.j=B.l,B.g=new Set,B.h&&(Fu(B,B.h),B.h=null))}if(N.G){const Ku=wr.g?wr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ku&&(N.wa=Ku,De(N.J,N.G,Ku))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),N=g;var te=c;if(N.na=W0(N,N.L?N.ba:null,N.W),te.L){b0(N.h,te);var ve=te,ct=N.O;ct&&(ve.H=ct),ve.D&&(Mu(ve),Qa(ve)),N.g=te}else F0(N);g.i.length>0&&el(g)}else Ie[0]!="stop"&&Ie[0]!="close"||ci(g,7);else g.I==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?ci(g,7):qu(g):Ie[0]!="noop"&&g.l&&g.l.qa(Ie),g.A=0)}}to(4)}catch{}}var fN=class{constructor(c,f){this.g=c,this.map=f}};function y0(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function v0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function w0(c){return c.h?1:c.g?c.g.size:0}function Ou(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Fu(c,f){c.g?c.g.add(f):c.h=f}function b0(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}y0.prototype.cancel=function(){if(this.i=k0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function k0(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.G);return f}return w(c.i)}var _0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mN(c,f){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const N=c[g].indexOf("=");let F,B=null;N>=0?(F=c[g].substring(0,N),B=c[g].substring(N+1)):F=c[g],f(F,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function gr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof gr?(this.l=c.l,oo(this,c.j),this.o=c.o,this.g=c.g,ao(this,c.u),this.h=c.h,Bu(this,S0(c.i)),this.m=c.m):c&&(f=String(c).match(_0))?(this.l=!1,oo(this,f[1]||"",!0),this.o=lo(f[2]||""),this.g=lo(f[3]||"",!0),ao(this,f[4]),this.h=lo(f[5]||"",!0),Bu(this,f[6]||"",!0),this.m=lo(f[7]||"")):(this.l=!1,this.i=new uo(null,this.l))}gr.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(co(f,N0,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(co(f,N0,!0),"@"),c.push(io(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(co(g,g.charAt(0)=="/"?xN:gN,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",co(g,vN)),c.join("")},gr.prototype.resolve=function(c){const f=jn(this);let g=!!c.j;g?oo(f,c.j):g=!!c.o,g?f.o=c.o:g=!!c.g,g?f.g=c.g:g=c.u!=null;var N=c.h;if(g)ao(f,c.u);else if(g=!!c.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var F=f.h.lastIndexOf("/");F!=-1&&(N=f.h.slice(0,F+1)+N)}if(F=N,F==".."||F==".")N="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){N=F.lastIndexOf("/",0)==0,F=F.split("/");const B=[];for(let te=0;te<F.length;){const ve=F[te++];ve=="."?N&&te==F.length&&B.push(""):ve==".."?((B.length>1||B.length==1&&B[0]!="")&&B.pop(),N&&te==F.length&&B.push("")):(B.push(ve),N=!0)}N=B.join("/")}else N=F}return g?f.h=N:g=c.i.toString()!=="",g?Bu(f,S0(c.i)):g=!!c.m,g&&(f.m=c.m),f};function jn(c){return new gr(c)}function oo(c,f,g){c.j=g?lo(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function ao(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function Bu(c,f,g){f instanceof uo?(c.i=f,wN(c.i,c.l)):(g||(f=co(f,yN)),c.i=new uo(f,c.l))}function De(c,f,g){c.i.set(f,g)}function Ya(c){return De(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function lo(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function co(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,pN),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function pN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var N0=/[#\/\?@]/g,gN=/[#\?:]/g,xN=/[#\?]/g,yN=/[#\?@]/g,vN=/#/g;function uo(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function li(c){c.g||(c.g=new Map,c.h=0,c.i&&mN(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=uo.prototype,t.add=function(c,f){li(this),this.i=null,c=Hi(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function T0(c,f){li(c),f=Hi(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function E0(c,f){return li(c),f=Hi(c,f),c.g.has(f)}t.forEach=function(c,f){li(this),this.g.forEach(function(g,N){g.forEach(function(F){c.call(f,F,N,this)},this)},this)};function C0(c,f){li(c);let g=[];if(typeof f=="string")E0(c,f)&&(g=g.concat(c.g.get(Hi(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)g=g.concat(c[f]);return g}t.set=function(c,f){return li(this),this.i=null,c=Hi(this,c),E0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=C0(this,c),c.length>0?String(c[0]):f):f};function j0(c,f,g){T0(c,f),g.length>0&&(c.i=null,c.g.set(Hi(c,f),w(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let N=0;N<f.length;N++){var g=f[N];const F=io(g);g=C0(this,g);for(let B=0;B<g.length;B++){let te=F;g[B]!==""&&(te+="="+io(g[B])),c.push(te)}}return this.i=c.join("&")};function S0(c){const f=new uo;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function Hi(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function wN(c,f){f&&!c.j&&(li(c),c.i=null,c.g.forEach(function(g,N){const F=N.toLowerCase();N!=F&&(T0(this,N),j0(this,F,g))},c)),c.j=f}function bN(c,f){const g=new ro;if(o.Image){const N=new Image;N.onload=h(xr,g,"TestLoadImage: loaded",!0,f,N),N.onerror=h(xr,g,"TestLoadImage: error",!1,f,N),N.onabort=h(xr,g,"TestLoadImage: abort",!1,f,N),N.ontimeout=h(xr,g,"TestLoadImage: timeout",!1,f,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=c}else f(!1)}function kN(c,f){const g=new ro,N=new AbortController,F=setTimeout(()=>{N.abort(),xr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:N.signal}).then(B=>{clearTimeout(F),B.ok?xr(g,"TestPingServer: ok",!0,f):xr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),xr(g,"TestPingServer: error",!1,f)})}function xr(c,f,g,N,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),N(g)}catch{}}function _N(){this.g=new sN}function Uu(c){this.i=c.Sb||null,this.h=c.ab||!1}m(Uu,s0),Uu.prototype.g=function(){return new Xa(this.i,this.h)};function Xa(c,f){Ue.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Xa,Ue),t=Xa.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,fo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ho(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,fo(this)),this.g&&(this.readyState=3,fo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;I0(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function I0(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?ho(this):fo(this),this.readyState==3&&I0(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,ho(this))},t.Na=function(c){this.g&&(this.response=c,ho(this))},t.ga=function(){this.g&&ho(this)};function ho(c){c.readyState=4,c.l=null,c.j=null,c.B=null,fo(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function fo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Xa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function z0(c){let f="";return ee(c,function(g,N){f+=N,f+=":",f+=g,f+=`\r
`}),f}function $u(c,f,g){e:{for(N in g){var N=!1;break e}N=!0}N||(g=z0(g),typeof c=="string"?g!=null&&io(g):De(c,f,g))}function Ye(c){Ue.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Ye,Ue);var NN=/^https?$/i,TN=["POST","PUT"];t=Ye.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,g,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():h0.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(B){A0(this,B);return}if(c=g||"",g=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var F in N)g.set(F,N[F]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const B of N.keys())g.set(B,N.get(B));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(g.keys()).find(B=>B.toLowerCase()=="content-type"),F=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(TN,f,void 0)>=0)||N||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[B,te]of g)this.g.setRequestHeader(B,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(B){A0(this,B)}};function A0(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,P0(c),Ja(c)}function P0(c){c.A||(c.A=!0,lt(c,"complete"),lt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,lt(this,"complete"),lt(this,"abort"),Ja(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ja(this,!0)),Ye.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?R0(this):this.Xa())},t.Xa=function(){R0(this)};function R0(c){if(c.h&&typeof s<"u"){if(c.v&&yr(c)==4)setTimeout(c.Ca.bind(c),0);else if(lt(c,"readystatechange"),yr(c)==4){c.h=!1;try{const B=c.ca();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var N;if(N=B===0){let te=String(c.D).match(_0)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),N=!NN.test(te?te.toLowerCase():"")}g=N}if(g)lt(c,"complete"),lt(c,"success");else{c.o=6;try{var F=yr(c)>2?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.ca()+"]",P0(c)}}finally{Ja(c)}}}}function Ja(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,f||lt(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function yr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return yr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),iN(f)}};function V0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function EN(c){const f={};c=(c.g&&yr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<c.length;N++){if(S(c[N]))continue;var g=uN(c[N]);const F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const B=f[F]||[];f[F]=B,B.push(g)}ie(f,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function mo(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function D0(c){this.za=0,this.i=[],this.j=new ro,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=mo("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=mo("baseRetryDelayMs",5e3,c),this.Za=mo("retryDelaySeedMs",1e4,c),this.Ta=mo("forwardChannelMaxRetries",2,c),this.va=mo("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new y0(c&&c.concurrentRequestLimit),this.Ba=new _N,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=D0.prototype,t.ka=8,t.I=1,t.connect=function(c,f,g,N){Rt(0),this.W=c,this.H=f||{},g&&N!==void 0&&(this.H.OSID=g,this.H.OAID=N),this.F=this.X,this.J=W0(this,null,this.W),el(this)};function qu(c){if(M0(c),c.I==3){var f=c.V++,g=jn(c.J);if(De(g,"SID",c.M),De(g,"RID",f),De(g,"TYPE","terminate"),po(c,g),f=new pr(c,c.j,f),f.M=2,f.A=Ya(jn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=H0(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Qa(f)}q0(c)}function Za(c){c.g&&(Hu(c),c.g.cancel(),c.g=null)}function M0(c){Za(c),c.v&&(o.clearTimeout(c.v),c.v=null),tl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function el(c){if(!v0(c.h)&&!c.m){c.m=!0;var f=c.Ea;D||y(),M||(D(),M=!0),k.add(f,c),c.D=0}}function CN(c,f){return w0(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=no(d(c.Ea,c,f),$0(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const F=new pr(this,this.j,c);let B=this.o;if(this.U&&(B?(B=$(B),ne(B,this.U)):B=this.U),this.u!==null||this.R||(F.J=B,B=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var N=this.i[g];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(f+=N,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=O0(this,F,f),g=jn(this.J),De(g,"RID",c),De(g,"CVER",22),this.G&&De(g,"X-HTTP-Session-Id",this.G),po(this,g),B&&(this.R?f="headers="+io(z0(B))+"&"+f:this.u&&$u(g,this.u,B)),Fu(this.h,F),this.Ra&&De(g,"TYPE","init"),this.S?(De(g,"$req",f),De(g,"SID","null"),F.U=!0,Du(F,g,null)):Du(F,g,f),this.I=2}}else this.I==3&&(c?L0(this,c):this.i.length==0||v0(this.h)||L0(this))};function L0(c,f){var g;f?g=f.l:g=c.V++;const N=jn(c.J);De(N,"SID",c.M),De(N,"RID",g),De(N,"AID",c.K),po(c,N),c.u&&c.o&&$u(N,c.u,c.o),g=new pr(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),f&&(c.i=f.G.concat(c.i)),f=O0(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Fu(c.h,g),Du(g,N,f)}function po(c,f){c.H&&ee(c.H,function(g,N){De(f,N,g)}),c.l&&ee({},function(g,N){De(f,N,g)})}function O0(c,f,g){g=Math.min(c.i.length,g);const N=c.l?d(c.l.Ka,c.l,c):null;e:{var F=c.i;let ve=-1;for(;;){const ct=["count="+g];ve==-1?g>0?(ve=F[0].g,ct.push("ofs="+ve)):ve=0:ct.push("ofs="+ve);let Ie=!0;for(let pt=0;pt<g;pt++){var B=F[pt].g;const Sn=F[pt].map;if(B-=ve,B<0)ve=Math.max(0,F[pt].g-100),Ie=!1;else try{B="req"+B+"_"||"";try{var te=Sn instanceof Map?Sn:Object.entries(Sn);for(const[ui,vr]of te){let wr=vr;l(vr)&&(wr=zu(vr)),ct.push(B+ui+"="+encodeURIComponent(wr))}}catch(ui){throw ct.push(B+"type="+encodeURIComponent("_badmap")),ui}}catch{N&&N(Sn)}}if(Ie){te=ct.join("&");break e}}te=void 0}return c=c.i.splice(0,g),f.G=c,te}function F0(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;D||y(),M||(D(),M=!0),k.add(f,c),c.A=0}}function Wu(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=no(d(c.Da,c),$0(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,B0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=no(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Rt(10),Za(this),B0(this))};function Hu(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function B0(c){c.g=new pr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=jn(c.na);De(f,"RID","rpc"),De(f,"SID",c.M),De(f,"AID",c.K),De(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&De(f,"TO",c.ia),De(f,"TYPE","xmlhttp"),po(c,f),c.u&&c.o&&$u(f,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=Ya(jn(f)),g.u=null,g.R=!0,p0(g,c)}t.Va=function(){this.C!=null&&(this.C=null,Za(this),Wu(this),Rt(19))};function tl(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function U0(c,f){var g=null;if(c.g==f){tl(c),Hu(c),c.g=null;var N=2}else if(Ou(c.h,f))g=f.G,b0(c.h,f),N=1;else return;if(c.I!=0){if(f.o)if(N==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var F=c.D;N=Ka(),lt(N,new u0(N,g)),el(c)}else F0(c);else if(F=f.m,F==3||F==0&&f.X>0||!(N==1&&CN(c,f)||N==2&&Wu(c)))switch(g&&g.length>0&&(f=c.h,f.i=f.i.concat(g)),F){case 1:ci(c,5);break;case 4:ci(c,10);break;case 3:ci(c,6);break;default:ci(c,2)}}}function $0(c,f){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*f}function ci(c,f){if(c.j.info("Error code "+f),f==2){var g=d(c.bb,c),N=c.Ua;const F=!N;N=new gr(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||oo(N,"https"),Ya(N),F?bN(N.toString(),g):kN(N.toString(),g)}else Rt(2);c.I=0,c.l&&c.l.pa(f),q0(c),M0(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function q0(c){if(c.I=0,c.ja=[],c.l){const f=k0(c.h);(f.length!=0||c.i.length!=0)&&(T(c.ja,f),T(c.ja,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.oa()}}function W0(c,f,g){var N=g instanceof gr?jn(g):new gr(g);if(N.g!="")f&&(N.g=f+"."+N.g),ao(N,N.u);else{var F=o.location;N=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;const B=new gr(null);N&&oo(B,N),f&&(B.g=f),F&&ao(B,F),g&&(B.h=g),N=B}return g=c.G,f=c.wa,g&&f&&De(N,g,f),De(N,"VER",c.ka),po(c,N),N}function H0(c,f,g){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new Ye(new Uu({ab:g})):new Ye(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function K0(){}t=K0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function nl(){}nl.prototype.g=function(c,f){return new Yt(c,f)};function Yt(c,f){Ue.call(this),this.g=new D0(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!S(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new Ki(this)}m(Yt,Ue),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){qu(this.g)},Yt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=zu(c),c=g);f.i.push(new fN(f.Ya++,c)),f.I==3&&el(f)},Yt.prototype.N=function(){this.g.l=null,delete this.j,qu(this.g),delete this.g,Yt.Z.N.call(this)};function G0(c){Au.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}m(G0,Au);function Q0(){Pu.call(this),this.status=1}m(Q0,Pu);function Ki(c){this.g=c}m(Ki,K0),Ki.prototype.ra=function(){lt(this.g,"a")},Ki.prototype.qa=function(c){lt(this.g,new G0(c))},Ki.prototype.pa=function(c){lt(this.g,new Q0)},Ki.prototype.oa=function(){lt(this.g,"b")},nl.prototype.createWebChannel=nl.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,T2=function(){return new nl},N2=function(){return Ka()},_2=oi,wf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ga.NO_ERROR=0,Ga.TIMEOUT=8,Ga.HTTP_ERROR=6,Kl=Ga,d0.COMPLETE="complete",k2=d0,o0.EventType=eo,eo.OPEN="a",eo.CLOSE="b",eo.ERROR="c",eo.MESSAGE="d",Ue.prototype.listen=Ue.prototype.J,zo=o0,Ye.prototype.listenOnce=Ye.prototype.K,Ye.prototype.getLastError=Ye.prototype.Ha,Ye.prototype.getLastErrorCode=Ye.prototype.ya,Ye.prototype.getStatus=Ye.prototype.ca,Ye.prototype.getResponseJson=Ye.prototype.La,Ye.prototype.getResponseText=Ye.prototype.la,Ye.prototype.send=Ye.prototype.ea,Ye.prototype.setWithCredentials=Ye.prototype.Fa,b2=Ye}).apply(typeof Tl<"u"?Tl:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore",$y="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Di=new hp("@firebase/firestore");function Yi(){return Di.logLevel}function le(t,...e){if(Di.logLevel<=Te.DEBUG){const n=e.map(wp);Di.debug(`Firestore (${Gs}): ${t}`,...n)}}function hr(t,...e){if(Di.logLevel<=Te.ERROR){const n=e.map(wp);Di.error(`Firestore (${Gs}): ${t}`,...n)}}function Ds(t,...e){if(Di.logLevel<=Te.WARN){const n=e.map(wp);Di.warn(`Firestore (${Gs}): ${t}`,...n)}}function wp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,E2(t,r,n)}function E2(t,e,n){let r=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw hr(r),new Error(r)}function Ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||E2(e,i,r)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends si{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class QA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class YA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class XA{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{le("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(le("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(le("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new C2(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new It(e)}}class JA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new JA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hz(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const r=s=>{s.error!=null&&le("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,le("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{le("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):le("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new qy(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=tP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function be(t,e){return t<e?-1:t>e?1:0}function bf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Ud(i)===Ud(s)?be(i,s):Ud(i)?1:-1}return be(t.length,e.length)}const nP=55296,rP=57343;function Ud(t){const e=t.charCodeAt(0);return e>=nP&&e<=rP}function Ms(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="__name__";class An{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return An.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof An?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=An.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return be(e.length,n.length)}static compareSegments(e,n){const r=An.isNumericId(e),i=An.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?An.extractNumericId(e).compare(An.extractNumericId(n)):bf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Br.fromString(e.substring(4,e.length-2))}}class Pe extends An{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const iP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends An{construct(e,n,r){return new kt(e,n,r)}static isValidIdentifier(e){return iP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Wy}static keyField(){return new kt([Wy])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new oe(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new oe(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new oe(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Pe.fromString(e))}static fromName(e){return new he(Pe.fromString(e).popFirst(5))}static empty(){return new he(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t,e,n){if(!n)throw new oe(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sP(t,e,n,r){if(e===!0&&r===!0)throw new oe(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Hy(t){if(!he.isDocumentKey(t))throw new oe(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ky(t){if(he.isDocumentKey(t))throw new oe(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function S2(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function yu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function Kr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new oe(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yu(t);throw new oe(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ba(t,e){if(!S2(t))throw new oe(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new oe(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=-62135596800,Qy=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Qy);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new oe(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gy)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Qy}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ba(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:ot("string",Le._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Le(0,0))}static max(){return new ge(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=-1;function oP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ge.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Gr(i,he.empty(),e)}function aP(t){return new Gr(t.readTime,t.key,Na)}class Gr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Gr(ge.min(),he.empty(),Na)}static max(){return new Gr(ge.max(),he.empty(),Na)}}function lP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==cP)throw t;le("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new G((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function dP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ys(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}vu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp=-1;function wu(t){return t==null}function Vc(t){return t===0&&1/t==-1/0}function hP(t){return typeof t=="number"&&Number.isInteger(t)&&!Vc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="";function fP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Yy(e)),e=mP(t.get(n),e);return Yy(e)}function mP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case I2:n+="";break;default:n+=s}}return n}function Yy(t){return t+I2+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function z2(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||bt.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new El(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new El(this.root,e,this.comparator,!1)}getReverseIterator(){return new El(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new El(this.root,e,this.comparator,!0)}}class El{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??bt.RED,this.left=i??bt.EMPTY,this.right=s??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new bt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return bt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new bt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jy(this.data.getIterator())}getIteratorFrom(e){return new Jy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Jy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new _n([])}unionWith(e){let n=new mt(kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ms(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new A2("Invalid base64 string: "+s):s}}(e);return new Et(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Et(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Et.EMPTY_BYTE_STRING=new Et("");const pP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qr(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=pP.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Yr(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P2="server_timestamp",R2="__type__",V2="__previous_value__",D2="__local_write_time__";function _p(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[R2])==null?void 0:r.stringValue)===P2}function bu(t){const e=t.mapValue.fields[V2];return _p(e)?bu(e):e}function Ta(t){const e=Qr(t.mapValue.fields[D2].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n,r,i,s,o,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Dc="(default)";class Ea{constructor(e,n){this.projectId=e,this.database=n||Dc}static empty(){return new Ea("","")}get isDefaultDatabase(){return this.database===Dc}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="__type__",xP="__max__",Cl={mapValue:{}},L2="__vector__",Mc="value";function Xr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_p(t)?4:vP(t)?9007199254740991:yP(t)?10:11:fe(28295,{value:t})}function Wn(t,e){if(t===e)return!0;const n=Xr(t);if(n!==Xr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ta(t).isEqual(Ta(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Qr(i.timestampValue),l=Qr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Yr(i.bytesValue).isEqual(Yr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),l=et(s.doubleValue);return o===l?Vc(o)===Vc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ms(t.arrayValue.values||[],e.arrayValue.values||[],Wn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Xy(o)!==Xy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Wn(o[u],l[u])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function Ca(t,e){return(t.values||[]).find(n=>Wn(n,e))!==void 0}function Ls(t,e){if(t===e)return 0;const n=Xr(t),r=Xr(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=et(s.integerValue||s.doubleValue),u=et(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Zy(t.timestampValue,e.timestampValue);case 4:return Zy(Ta(t),Ta(e));case 5:return bf(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Yr(s),u=Yr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=be(l[d],u[d]);if(h!==0)return h}return be(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=be(et(s.latitude),et(o.latitude));return l!==0?l:be(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return ev(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,w,T,C;const l=s.fields||{},u=o.fields||{},d=(p=l[Mc])==null?void 0:p.arrayValue,h=(w=u[Mc])==null?void 0:w.arrayValue,m=be(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return m!==0?m:ev(d,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Cl.mapValue&&o===Cl.mapValue)return 0;if(s===Cl.mapValue)return 1;if(o===Cl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=bf(u[m],h[m]);if(p!==0)return p;const w=Ls(l[u[m]],d[h[m]]);if(w!==0)return w}return be(u.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function Zy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);const n=Qr(t),r=Qr(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function ev(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ls(n[i],r[i]);if(s)return s}return be(n.length,r.length)}function Os(t){return kf(t)}function kf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Qr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Yr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=kf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${kf(n.fields[o])}`;return i+"}"}(t.mapValue):fe(61005,{value:t})}function Gl(t){switch(Xr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bu(t);return e?16+Gl(e):16;case 5:return 2*t.stringValue.length;case 6:return Yr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Gl(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Fi(r.fields,(s,o)=>{i+=s.length+Gl(o)}),i}(t.mapValue);default:throw fe(13486,{value:t})}}function tv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function _f(t){return!!t&&"integerValue"in t}function Np(t){return!!t&&"arrayValue"in t}function nv(t){return!!t&&"nullValue"in t}function rv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ql(t){return!!t&&"mapValue"in t}function yP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[M2])==null?void 0:r.stringValue)===L2}function Yo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return{...t}}function vP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===xP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ql(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=kt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Yo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ql(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Wn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ql(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Fi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ln(Yo(this.value))}}function O2(t){const e=[];return Fi(t.fields,(n,r)=>{const i=new kt([n]);if(Ql(r)){const s=O2(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new _n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new At(e,0,ge.min(),ge.min(),ge.min(),ln.empty(),0)}static newFoundDocument(e,n,r,i){return new At(e,1,n,ge.min(),r,i,0)}static newNoDocument(e,n){return new At(e,2,n,ge.min(),ge.min(),ln.empty(),0)}static newUnknownDocument(e,n){return new At(e,3,n,ge.min(),ge.min(),ln.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,n){this.position=e,this.inclusive=n}}function iv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(o.referenceValue),n.key):r=Ls(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function sv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Wn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function wP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{}class st extends F2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new kP(e,n,r):n==="array-contains"?new TP(e,r):n==="in"?new EP(e,r):n==="not-in"?new CP(e,r):n==="array-contains-any"?new jP(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _P(e,r):new NP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ls(n,this.value)):n!==null&&Xr(this.value)===Xr(n)&&this.matchesComparison(Ls(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Cn extends F2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Cn(e,n)}matches(e){return B2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function B2(t){return t.op==="and"}function U2(t){return bP(t)&&B2(t)}function bP(t){for(const e of t.filters)if(e instanceof Cn)return!1;return!0}function Nf(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Os(t.value);if(U2(t))return t.filters.map(e=>Nf(e)).join(",");{const e=t.filters.map(n=>Nf(n)).join(",");return`${t.op}(${e})`}}function $2(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Wn(r.value,i.value)}(t,e):t instanceof Cn?function(r,i){return i instanceof Cn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&$2(o,i.filters[l]),!0):!1}(t,e):void fe(19439)}function q2(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Os(n.value)}`}(t):t instanceof Cn?function(n){return n.op.toString()+" {"+n.getFilters().map(q2).join(" ,")+"}"}(t):"Filter"}class kP extends st{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class _P extends st{constructor(e,n){super(e,"in",n),this.keys=W2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class NP extends st{constructor(e,n){super(e,"not-in",n),this.keys=W2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function W2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class TP extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Np(n)&&Ca(n.arrayValue,this.value)}}class EP extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ca(this.value.arrayValue,n)}}class CP extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ca(this.value.arrayValue,n)}}class jP extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Np(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ca(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function ov(t,e=null,n=[],r=[],i=null,s=null,o=null){return new SP(t,e,n,r,i,s,o)}function Tp(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Nf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Os(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Os(r)).join(",")),e.Te=n}return e.Te}function Ep(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!wP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!$2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sv(t.startAt,e.startAt)&&sv(t.endAt,e.endAt)}function Tf(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function IP(t,e,n,r,i,s,o,l){return new Xs(t,e,n,r,i,s,o,l)}function Cp(t){return new Xs(t)}function av(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function H2(t){return t.collectionGroup!==null}function Xo(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new mt(kt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new ja(s,r))}),n.has(kt.keyField().canonicalString())||e.Ie.push(new ja(kt.keyField(),r))}return e.Ie}function On(t){const e=ye(t);return e.Ee||(e.Ee=zP(e,Xo(t))),e.Ee}function zP(t,e){if(t.limitType==="F")return ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new ja(i.field,s)});const n=t.endAt?new Lc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lc(t.startAt.position,t.startAt.inclusive):null;return ov(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Ef(t,e){const n=t.filters.concat([e]);return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Cf(t,e,n){return new Xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ku(t,e){return Ep(On(t),On(e))&&t.limitType===e.limitType}function K2(t){return`${Tp(On(t))}|lt:${t.limitType}`}function Xi(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>q2(i)).join(", ")}]`),wu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Os(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Os(i)).join(",")),`Target(${r})`}(On(t))}; limitType=${t.limitType})`}function _u(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Xo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const d=iv(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Xo(r),i)||r.endAt&&!function(o,l,u){const d=iv(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Xo(r),i))}(t,e)}function AP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G2(t){return(e,n)=>{let r=!1;for(const i of Xo(t)){const s=PP(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function PP(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),d=l.data.field(s);return u!==null&&d!==null?Ls(u,d):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return z2(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=new Qe(he.comparator);function fr(){return RP}const Q2=new Qe(he.comparator);function Ao(...t){let e=Q2;for(const n of t)e=e.insert(n.key,n);return e}function Y2(t){let e=Q2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return Jo()}function X2(){return Jo()}function Jo(){return new Bi(t=>t.toString(),(t,e)=>t.isEqual(e))}const VP=new Qe(he.comparator),DP=new mt(he.comparator);function ke(...t){let e=DP;for(const n of t)e=e.add(n);return e}const MP=new mt(be);function LP(){return MP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vc(e)?"-0":e}}function J2(t){return{integerValue:""+t}}function OP(t,e){return hP(e)?J2(e):jp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this._=void 0}}function FP(t,e,n){return t instanceof Oc?function(i,s){const o={fields:{[R2]:{stringValue:P2},[D2]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_p(s)&&(s=bu(s)),s&&(o.fields[V2]=s),{mapValue:o}}(n,e):t instanceof Sa?e_(t,e):t instanceof Ia?t_(t,e):function(i,s){const o=Z2(i,s),l=lv(o)+lv(i.Ae);return _f(o)&&_f(i.Ae)?J2(l):jp(i.serializer,l)}(t,e)}function BP(t,e,n){return t instanceof Sa?e_(t,e):t instanceof Ia?t_(t,e):n}function Z2(t,e){return t instanceof Fc?function(r){return _f(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Oc extends Nu{}class Sa extends Nu{constructor(e){super(),this.elements=e}}function e_(t,e){const n=n_(e);for(const r of t.elements)n.some(i=>Wn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ia extends Nu{constructor(e){super(),this.elements=e}}function t_(t,e){let n=n_(e);for(const r of t.elements)n=n.filter(i=>!Wn(i,r));return{arrayValue:{values:n}}}class Fc extends Nu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function lv(t){return et(t.integerValue||t.doubleValue)}function n_(t){return Np(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function UP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Sa&&i instanceof Sa||r instanceof Ia&&i instanceof Ia?Ms(r.elements,i.elements,Wn):r instanceof Fc&&i instanceof Fc?Wn(r.Ae,i.Ae):r instanceof Oc&&i instanceof Oc}(t.transform,e.transform)}class $P{constructor(e,n){this.version=e,this.transformResults=n}}class Fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Tu{}function r_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sp(t.key,Fn.none()):new Ua(t.key,t.data,Fn.none());{const n=t.data,r=ln.empty();let i=new mt(kt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ui(t.key,r,new _n(i.toArray()),Fn.none())}}function qP(t,e,n){t instanceof Ua?function(i,s,o){const l=i.value.clone(),u=uv(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ui?function(i,s,o){if(!Yl(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=uv(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(i_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Zo(t,e,n,r){return t instanceof Ua?function(s,o,l,u){if(!Yl(s.precondition,o))return l;const d=s.value.clone(),h=dv(s.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ui?function(s,o,l,u){if(!Yl(s.precondition,o))return l;const d=dv(s.fieldTransforms,u,o),h=o.data;return h.setAll(i_(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Yl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function WP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Z2(r.transform,i||null);s!=null&&(n===null&&(n=ln.empty()),n.set(r.field,s))}return n||null}function cv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ms(r,i,(s,o)=>UP(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ua extends Tu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ui extends Tu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function i_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function uv(t,e,n){const r=new Map;Ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,BP(o,l,n[i]))}return r}function dv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,FP(s,o,e))}return r}class Sp extends Tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class HP extends Tu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&qP(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Zo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Zo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=X2();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=r_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ge.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ke())}isEqual(e){return this.batchId===e.batchId&&Ms(this.mutations,e.mutations,(n,r)=>cv(n,r))&&Ms(this.baseMutations,e.baseMutations,(n,r)=>cv(n,r))}}class Ip{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return VP}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ip(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,Ne;function YP(t){switch(t){case K.OK:return fe(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function s_(t){if(t===void 0)return hr("GRPC error has no .code"),K.UNKNOWN;switch(t){case nt.OK:return K.OK;case nt.CANCELLED:return K.CANCELLED;case nt.UNKNOWN:return K.UNKNOWN;case nt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case nt.INTERNAL:return K.INTERNAL;case nt.UNAVAILABLE:return K.UNAVAILABLE;case nt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case nt.NOT_FOUND:return K.NOT_FOUND;case nt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case nt.ABORTED:return K.ABORTED;case nt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case nt.DATA_LOSS:return K.DATA_LOSS;default:return fe(39323,{code:t})}}(Ne=nt||(nt={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP=new Br([4294967295,4294967295],0);function hv(t){const e=XP().encode(t),n=new w2;return n.update(e),new Uint8Array(n.digest())}function fv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Br([n,r],0),new Br([i,s],0)]}class zp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Po(`Invalid padding: ${n}`);if(r<0)throw new Po(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Po(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Po(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Br.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Br.fromNumber(r)));return i.compare(JP)===1&&(i=new Br([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=hv(e),[r,i]=fv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new zp(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=hv(e),[r,i]=fv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Po extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Eu(ge.min(),i,new Qe(be),fr(),ke())}}class $a{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $a(r,n,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class o_{constructor(e,n){this.targetId=e,this.Ce=n}}class a_{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class mv{constructor(){this.ve=0,this.Fe=pv(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),n=ke(),r=ke();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new $a(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=pv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ZP{constructor(e){this.Ge=e,this.ze=new Map,this.je=fr(),this.Je=jl(),this.He=jl(),this.Ye=new Qe(be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Tf(s))if(r===0){const o=new he(s.path);this.et(n,o,At.newNoDocument(o,ge.min()))}else Ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Yr(r).toUint8Array()}catch(u){if(u instanceof A2)return Ds("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new zp(o,i,s)}catch(u){return Ds(u instanceof Po?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Tf(l.target)){const u=new he(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,At.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ke();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Eu(e,n,this.Ye,this.je,r);return this.je=fr(),this.Je=jl(),this.He=jl(),this.Ye=new Qe(be),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new mt(be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new mt(be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||le("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function jl(){return new Qe(he.comparator)}function pv(){return new Qe(he.comparator)}const e3={asc:"ASCENDING",desc:"DESCENDING"},t3={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},n3={and:"AND",or:"OR"};class r3{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jf(t,e){return t.useProto3Json||wu(e)?e:{value:e}}function Bc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function l_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function i3(t,e){return Bc(t,e.toTimestamp())}function Bn(t){return Ce(!!t,49232),ge.fromTimestamp(function(n){const r=Qr(n);return new Le(r.seconds,r.nanos)}(t))}function Ap(t,e){return Sf(t,e).canonicalString()}function Sf(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function c_(t){const e=Pe.fromString(t);return Ce(m_(e),10190,{key:e.toString()}),e}function If(t,e){return Ap(t.databaseId,e.path)}function $d(t,e){const n=c_(e);if(n.get(1)!==t.databaseId.projectId)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new oe(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(d_(n))}function u_(t,e){return Ap(t.databaseId,e)}function s3(t){const e=c_(t);return e.length===4?Pe.emptyPath():d_(e)}function zf(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d_(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gv(t,e,n){return{name:If(t,e),fields:n.value.mapValue.fields}}function o3(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:fe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),Et.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Et.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?K.UNKNOWN:s_(d.code);return new oe(h,d.message||"")}(o);n=new a_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$d(t,r.document.name),s=Bn(r.document.updateTime),o=r.document.createTime?Bn(r.document.createTime):ge.min(),l=new ln({mapValue:{fields:r.document.fields}}),u=At.newFoundDocument(i,s,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Xl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$d(t,r.document),s=r.readTime?Bn(r.readTime):ge.min(),o=At.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Xl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$d(t,r.document),s=r.removedTargetIds||[];n=new Xl([],s,i,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QP(i,s),l=r.targetId;n=new o_(l,o)}}return n}function a3(t,e){let n;if(e instanceof Ua)n={update:gv(t,e.key,e.value)};else if(e instanceof Sp)n={delete:If(t,e.key)};else if(e instanceof Ui)n={update:gv(t,e.key,e.data),updateMask:g3(e.fieldMask)};else{if(!(e instanceof HP))return fe(16599,{Vt:e.type});n={verify:If(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Oc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Sa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ia)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Fc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:i3(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)}(t,e.precondition)),n}function l3(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Bn(i.updateTime):Bn(s);return o.isEqual(ge.min())&&(o=Bn(s)),new $P(o,i.transformResults||[])}(n,e))):[]}function c3(t,e){return{documents:[u_(t,e.path)]}}function u3(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=u_(t,i);const s=function(d){if(d.length!==0)return f_(Cn.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Ji(p.field),direction:f3(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=jf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function d3(t){let e=s3(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const p=h_(m);return p instanceof Cn&&U2(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(T){return new ja(Zi(T.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,wu(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,w=m.values||[];return new Lc(w,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,w=m.values||[];return new Lc(w,p)}(n.endAt)),IP(e,i,o,s,l,"F",u,d)}function h3(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function h_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Zi(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Zi(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Zi(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Zi(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(Zi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Cn.create(n.compositeFilter.filters.map(r=>h_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function f3(t){return e3[t]}function m3(t){return t3[t]}function p3(t){return n3[t]}function Ji(t){return{fieldPath:t.canonicalString()}}function Zi(t){return kt.fromServerFormat(t.fieldPath)}function f_(t){return t instanceof st?function(n){if(n.op==="=="){if(rv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NAN"}};if(nv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NOT_NAN"}};if(nv(n.value))return{unaryFilter:{field:Ji(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ji(n.field),op:m3(n.op),value:n.value}}}(t):t instanceof Cn?function(n){const r=n.getFilters().map(i=>f_(i));return r.length===1?r[0]:{compositeFilter:{op:p3(n.op),filters:r}}}(t):fe(54877,{filter:t})}function g3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function m_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r,i,s=ge.min(),o=ge.min(),l=Et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.yt=e}}function y3(t){const e=d3({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(){this.Cn=new w3}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(Gr.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(Gr.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class w3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new mt(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new mt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},p_=41943040;class Ut{static withCacheSize(e){return new Ut(e,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ut.DEFAULT_COLLECTION_PERCENTILE=10,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ut.DEFAULT=new Ut(p_,Ut.DEFAULT_COLLECTION_PERCENTILE,Ut.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ut.DISABLED=new Ut(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fs(0)}static cr(){return new Fs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="LruGarbageCollector",b3=1048576;function vv([t,e],[n,r]){const i=be(t,n);return i===0?be(e,r):i}class k3{constructor(e){this.Ir=e,this.buffer=new mt(vv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class _3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){le(yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ys(n)?le(yv,"Ignoring IndexedDB error during garbage collection: ",n):await Qs(n)}await this.Vr(3e5)})}}class N3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(vu.ce);const r=new k3(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(le("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(xv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(le("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(le("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Yi()<=Te.DEBUG&&le("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function T3(t,e){return new N3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Zo(r.mutation,i,_n.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ke()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ke()){const i=ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ao();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ke()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=fr();const o=Jo(),l=function(){return Jo()}();return n.forEach((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Ui)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Zo(h.mutation,d,h.mutation.getFieldMask(),Le.now())):o.set(d.key,_n.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new C3(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Jo();let i=new Qe((o,l)=>o-l),s=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||_n.empty();h=l.applyToLocalView(d,h),r.set(u,h);const m=(i.get(l.batchId)||ke()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=X2();h.forEach(p=>{if(!s.has(p)){const w=r_(n.get(p),r.get(p));w!==null&&m.set(p,w),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):H2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):G.resolve(ki());let l=Na,u=s;return o.next(d=>G.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ke())).next(h=>({batchId:l,changes:Y2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let i=Ao();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ao();return this.indexManager.getCollectionParents(e,s).next(l=>G.forEach(l,u=>{const d=function(m,p){return new Xs(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,At.newInvalidDocument(h)))});let l=Ao();return o.forEach((u,d)=>{const h=s.get(u);h!==void 0&&Zo(h.mutation,d,_n.empty(),Le.now()),_u(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bn(i.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:y3(i.bundledQuery),readTime:Bn(i.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(){this.overlays=new Qe(he.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ki();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=ki(),s=n.length+1,o=new he(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Qe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=ki(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=ki(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return G.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GP(n,r));let s=this.qr.get(n);s===void 0&&(s=ke(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(){this.Qr=new mt(gt.$r),this.Ur=new mt(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new Pe([])),r=new gt(n,e),i=new gt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Pe([])),r=new gt(n,e),i=new gt(n,e+1);let s=ke();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new gt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||be(e.Yr,n.Yr)}static Kr(e,n){return be(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new mt(gt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KP(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new gt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?kp:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new mt(be);return n.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const o=new gt(new he(s),0);let l=new mt(be);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Yr)),!0)},o),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,i=>{const s=new gt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new gt(n,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e){this.ri=e,this.docs=function(){return new Qe(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():At.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():At.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=fr();const o=n.path,l=new he(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||lP(aP(h),r)<=0||(i.has(h.key)||_u(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new R3(this)}getSize(e){return G.resolve(this.size)}}class R3 extends E3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.persistence=e,this.si=new Bi(n=>Tp(n),Ep),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Pp,this.targetCount=0,this.ai=Fs.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Fs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,n){this.ui={},this.overlays={},this.ci=new vu(0),this.li=!1,this.li=!0,this.hi=new z3,this.referenceDelegate=e(this),this.Pi=new V3(this),this.indexManager=new v3,this.remoteDocumentCache=function(i){return new P3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new x3(n),this.Ii=new S3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new I3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new A3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){le("MemoryPersistence","Starting transaction:",e);const i=new D3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class D3 extends uP{constructor(e){super(),this.currentSequenceNumber=e}}class Rp{constructor(e){this.persistence=e,this.Ri=new Pp,this.Vi=null}static mi(e){return new Rp(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const i=he.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ge.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Uc{constructor(e,n){this.persistence=e,this.pi=new Bi(r=>fP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=T3(this,n)}static mi(e,n){return new Uc(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,ge.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Gl(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ke(),i=ke();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Vp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return lI()?8:dP(sI())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new M3;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Yi()<=Te.DEBUG&&le("QueryEngine","SDK will not create cache indexes for query:",Xi(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(Yi()<=Te.DEBUG&&le("QueryEngine","Query:",Xi(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yi()<=Te.DEBUG&&le("QueryEngine","The SDK decides to create cache indexes for query:",Xi(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,On(n))):G.resolve())}ys(e,n){if(av(n))return G.resolve(null);let r=On(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Cf(n,null,"F"),r=On(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ke(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,o,u.readTime)?this.ys(e,Cf(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,i){return av(n)||i.isEqual(ge.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?G.resolve(null):(Yi()<=Te.DEBUG&&le("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xi(n)),this.vs(e,o,n,oP(i,Na)).next(l=>l))})}Ds(e,n){let r=new mt(G2(e));return n.forEach((i,s)=>{_u(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Yi()<=Te.DEBUG&&le("QueryEngine","Using full collection scan to execute query:",Xi(n)),this.ps.getDocumentsMatchingQuery(e,n,Gr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="LocalStore",O3=3e8;class F3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Qe(be),this.xs=new Bi(s=>Tp(s),Ep),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new j3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function B3(t,e,n,r){return new F3(t,e,n,r)}async function x_(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ke();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of s){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function U3(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,p=m.keys();let w=G.resolve();return p.forEach(T=>{w=w.next(()=>h.getEntry(u,T)).next(C=>{const A=d.docVersions.get(T);Ce(A!==null,48541),C.version.compareTo(A)<0&&(m.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),h.addEntry(C)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ke();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function y_(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function $3(t,e){const n=ye(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,m)));let w=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(Et.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):h.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(h.resumeToken,r)),i=i.insert(m,w),function(C,A,b){return C.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=O3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,w,h)&&l.push(n.Pi.updateTargetData(s,w))});let u=fr(),d=ke();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(q3(s,o,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!r.isEqual(ge.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.Ms=i,s))}function q3(t,e,n){let r=ke(),i=ke();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=fr();return n.forEach((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(ge.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):le(Dp,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:i}})}function W3(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function H3(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Af(t,e,n){const r=ye(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Ys(o))throw o;le(Dp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function wv(t,e,n){const r=ye(t);let i=ge.min(),s=ke();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=ye(u),p=m.xs.get(h);return p!==void 0?G.resolve(m.Ms.get(p)):m.Pi.getTargetData(d,h)}(r,o,On(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:ge.min(),n?s:ke())).next(l=>(K3(r,AP(e),l),{documents:l,Qs:s})))}function K3(t,e,n){let r=t.Os.get(e)||ge.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class bv{constructor(){this.activeTargetIds=LP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class G3{constructor(){this.Mo=new bv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="ConnectivityMonitor";class _v{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){le(kv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){le(kv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sl=null;function Pf(){return Sl===null?Sl=function(){return 268435456+Math.round(2147483648*Math.random())}():Sl++,"0x"+Sl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="RestConnection",Y3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class X3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Dc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Pf(),l=this.zo(e,n.toUriEncodedString());le(qd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(l),h=dp(d);return this.Jo(e,l,u,r,h).then(m=>(le(qd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Ds(qd,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=Y3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class Z3 extends X3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Pf();return new Promise((l,u)=>{const d=new b2;d.setWithCredentials(!0),d.listenOnce(k2.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Kl.NO_ERROR:const m=d.getResponseJson();le(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Kl.TIMEOUT:le(St,`RPC '${e}' ${o} timed out`),u(new oe(K.DEADLINE_EXCEEDED,"Request time out"));break;case Kl.HTTP_ERROR:const p=d.getStatus();if(le(St,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let w=d.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w==null?void 0:w.error;if(T&&T.status&&T.message){const C=function(b){const x=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(x)>=0?x:K.UNKNOWN}(T.status);u(new oe(C,T.message))}else u(new oe(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new oe(K.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{le(St,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);le(St,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Pf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=T2(),l=N2(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");le(St,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);this.I_(m);let p=!1,w=!1;const T=new J3({Yo:A=>{w?le(St,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(p||(le(St,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),le(St,`RPC '${e}' stream ${i} sending:`,A),m.send(A))},Zo:()=>m.close()}),C=(A,b,x)=>{A.listen(b,v=>{try{x(v)}catch(P){setTimeout(()=>{throw P},0)}})};return C(m,zo.EventType.OPEN,()=>{w||(le(St,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),C(m,zo.EventType.CLOSE,()=>{w||(w=!0,le(St,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(m))}),C(m,zo.EventType.ERROR,A=>{w||(w=!0,Ds(St,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),T.a_(new oe(K.UNAVAILABLE,"The operation could not be completed")))}),C(m,zo.EventType.MESSAGE,A=>{var b;if(!w){const x=A.data[0];Ce(!!x,16349);const v=x,P=(v==null?void 0:v.error)||((b=v[0])==null?void 0:b.error);if(P){le(St,`RPC '${e}' stream ${i} received error:`,P);const D=P.status;let M=function(_){const E=nt[_];if(E!==void 0)return s_(E)}(D),k=P.message;M===void 0&&(M=K.INTERNAL,k="Unknown error status: "+D+" with message "+P.message),w=!0,T.a_(new oe(M,k)),m.close()}else le(St,`RPC '${e}' stream ${i} received:`,x),T.u_(x)}}),C(l,_2.STAT_EVENT,A=>{A.stat===wf.PROXY?le(St,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===wf.NOPROXY&&le(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(t){return new r3(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&le("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="PersistentStream";class w_{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new v_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new oe(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return le(Nv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(le(Nv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class eR extends w_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=o3(this.serializer,e),r=function(s){if(!("targetChange"in s))return ge.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?Bn(o.readTime):ge.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=zf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Tf(u)?{documents:c3(s,u)}:{query:u3(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=l_(s,o.resumeToken);const d=jf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(ge.min())>0){l.readTime=Bc(s,o.snapshotVersion.toTimestamp());const d=jf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=h3(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=zf(this.serializer),n.removeTarget=e,this.q_(n)}}class tR extends w_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=l3(e.writeResults,e.commitTime),r=Bn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=zf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>a3(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{}class rR extends nR{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Sf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new oe(K.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Sf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new oe(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class iR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(hr(n),this.aa=!1):le("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="RemoteStore";class sR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{$i(this)&&(le(Mi,"Restarting streams for network reachability change."),await async function(u){const d=ye(u);d.Ea.add(4),await qa(d),d.Ra.set("Unknown"),d.Ea.delete(4),await ju(d)}(this))})}),this.Ra=new iR(r,i)}}async function ju(t){if($i(t))for(const e of t.da)await e(!0)}async function qa(t){for(const e of t.da)await e(!1)}function b_(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Fp(n)?Op(n):Js(n).O_()&&Lp(n,e))}function Mp(t,e){const n=ye(t),r=Js(n);n.Ia.delete(e),r.O_()&&k_(n,e),n.Ia.size===0&&(r.O_()?r.L_():$i(n)&&n.Ra.set("Unknown"))}function Lp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(t).Y_(e)}function k_(t,e){t.Va.Ue(e),Js(t).Z_(e)}function Op(t){t.Va=new ZP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Js(t).start(),t.Ra.ua()}function Fp(t){return $i(t)&&!Js(t).x_()&&t.Ia.size>0}function $i(t){return ye(t).Ea.size===0}function __(t){t.Va=void 0}async function oR(t){t.Ra.set("Online")}async function aR(t){t.Ia.forEach((e,n)=>{Lp(t,e)})}async function lR(t,e){__(t),Fp(t)?(t.Ra.ha(e),Op(t)):t.Ra.set("Unknown")}async function cR(t,e,n){if(t.Ra.set("Online"),e instanceof a_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){le(Mi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $c(t,r)}else if(e instanceof Xl?t.Va.Ze(e):e instanceof o_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ge.min()))try{const r=await y_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(Et.EMPTY_BYTE_STRING,h.snapshotVersion)),k_(s,u);const m=new Ir(h.target,u,d,h.sequenceNumber);Lp(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){le(Mi,"Failed to raise snapshot:",r),await $c(t,r)}}async function $c(t,e,n){if(!Ys(e))throw e;t.Ea.add(1),await qa(t),t.Ra.set("Offline"),n||(n=()=>y_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{le(Mi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await ju(t)})}function N_(t,e){return e().catch(n=>$c(t,n,e))}async function Su(t){const e=ye(t),n=Jr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kp;for(;uR(e);)try{const i=await W3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,dR(e,i)}catch(i){await $c(e,i)}T_(e)&&E_(e)}function uR(t){return $i(t)&&t.Ta.length<10}function dR(t,e){t.Ta.push(e);const n=Jr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function T_(t){return $i(t)&&!Jr(t).x_()&&t.Ta.length>0}function E_(t){Jr(t).start()}async function hR(t){Jr(t).ra()}async function fR(t){const e=Jr(t);for(const n of t.Ta)e.ea(n.mutations)}async function mR(t,e,n){const r=t.Ta.shift(),i=Ip.from(r,e,n);await N_(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Su(t)}async function pR(t,e){e&&Jr(t).X_&&await async function(r,i){if(function(o){return YP(o)&&o!==K.ABORTED}(i.code)){const s=r.Ta.shift();Jr(r).B_(),await N_(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Su(r)}}(t,e),T_(t)&&E_(t)}async function Tv(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),le(Mi,"RemoteStore received new credentials");const r=$i(n);n.Ea.add(3),await qa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ju(n)}async function gR(t,e){const n=ye(t);e?(n.Ea.delete(2),await ju(n)):e||(n.Ea.add(2),await qa(n),n.Ra.set("Unknown"))}function Js(t){return t.ma||(t.ma=function(n,r,i){const s=ye(n);return s.sa(),new eR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:oR.bind(null,t),t_:aR.bind(null,t),r_:lR.bind(null,t),H_:cR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Fp(t)?Op(t):t.Ra.set("Unknown")):(await t.ma.stop(),__(t))})),t.ma}function Jr(t){return t.fa||(t.fa=function(n,r,i){const s=ye(n);return s.sa(),new tR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:hR.bind(null,t),r_:pR.bind(null,t),ta:fR.bind(null,t),na:mR.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Su(t)):(await t.fa.stop(),t.Ta.length>0&&(le(Mi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new Bp(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Up(t,e){if(hr("AsyncQueue",`${e}: ${t}`),Ys(t))return new oe(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{static emptySet(e){return new Ts(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Ao(),this.sortedSet=new Qe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ts)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ts;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ga=new Qe(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Bs{constructor(e,n,r,i,s,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Bs(e,n,Ts.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class yR{constructor(){this.queries=Cv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ye(n),s=i.queries;i.queries=Cv(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new oe(K.ABORTED,"Firestore shutting down"))}}function Cv(){return new Bi(t=>K2(t),ku)}async function C_(t,e){const n=ye(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new xR,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=Up(o,`Initialization of query '${Xi(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&$p(n)}async function j_(t,e){const n=ye(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function vR(t,e){const n=ye(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&$p(n)}function wR(t,e,n){const r=ye(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function $p(t){t.Ca.forEach(e=>{e.next()})}var Rf,jv;(jv=Rf||(Rf={})).Ma="default",jv.Cache="cache";class S_{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e){this.key=e}}class z_{constructor(e){this.key=e}}class bR{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=G2(e),this.tu=new Ts(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ev,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),w=_u(this.query,m)?m:null,T=!!p&&this.mutatedKeys.has(p.key),C=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let A=!1;p&&w?p.data.isEqual(w.data)?T!==C&&(r.track({type:3,doc:w}),A=!0):this.su(p,w)||(r.track({type:2,doc:w}),A=!0,(u&&this.eu(w,u)>0||d&&this.eu(w,d)<0)&&(l=!0)):!p&&w?(r.track({type:0,doc:w}),A=!0):p&&!w&&(r.track({type:1,doc:p}),A=!0,(u||d)&&(l=!0)),A&&(w?(o=o.add(w),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(w,T){const C=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:A})}};return C(w)-C(T)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Bs(this.query,e.tu,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ev,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new z_(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new I_(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ke();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Bs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qp="SyncEngine";class kR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class _R{constructor(e){this.key=e,this.hu=!1}}class NR{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Bi(l=>K2(l),ku),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(he.comparator),this.Au=new Map,this.Ru=new Pp,this.Vu={},this.mu=new Map,this.fu=Fs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function TR(t,e,n=!0){const r=M_(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await A_(r,e,n,!0),i}async function ER(t,e){const n=M_(t);await A_(n,e,!0,!1)}async function A_(t,e,n,r){const i=await H3(t.localStore,On(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await CR(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&b_(t.remoteStore,i),l}async function CR(t,e,n,r,i){t.pu=(m,p,w)=>async function(C,A,b,x){let v=A.view.ru(b);v.Cs&&(v=await wv(C.localStore,A.query,!1).then(({documents:k})=>A.view.ru(k,v)));const P=x&&x.targetChanges.get(A.targetId),D=x&&x.targetMismatches.get(A.targetId)!=null,M=A.view.applyChanges(v,C.isPrimaryClient,P,D);return Iv(C,A.targetId,M.au),M.snapshot}(t,m,p,w);const s=await wv(t.localStore,e,!0),o=new bR(e,s.Qs),l=o.ru(s.documents),u=$a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);Iv(t,n,d.au);const h=new kR(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function jR(t,e,n){const r=ye(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!ku(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Af(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Mp(r.remoteStore,i.targetId),Vf(r,i.targetId)}).catch(Qs)):(Vf(r,i.targetId),await Af(r.localStore,i.targetId,!0))}async function SR(t,e){const n=ye(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Mp(n.remoteStore,r.targetId))}async function IR(t,e,n){const r=MR(t);try{const i=await function(o,l){const u=ye(o),d=Le.now(),h=l.reduce((w,T)=>w.add(T.key),ke());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let T=fr(),C=ke();return u.Ns.getEntries(w,h).next(A=>{T=A,T.forEach((b,x)=>{x.isValidDocument()||(C=C.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,T)).next(A=>{m=A;const b=[];for(const x of l){const v=WP(x,m.get(x.key).overlayedDocument);v!=null&&b.push(new Ui(x.key,v,O2(v.value.mapValue),Fn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,b,l)}).next(A=>{p=A;const b=A.applyToLocalDocumentSet(m,C);return u.documentOverlayCache.saveOverlays(w,A.batchId,b)})}).then(()=>({batchId:p.batchId,changes:Y2(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Qe(be)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await Wa(r,i.changes),await Su(r.remoteStore)}catch(i){const s=Up(i,"Failed to persist write");n.reject(s)}}async function P_(t,e){const n=ye(t);try{const r=await $3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ce(o.hu,14607):i.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))}),await Wa(n,r,e)}catch(r){await Qs(r)}}function Sv(t,e,n){const r=ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=ye(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(d=!0)}),d&&$p(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zR(t,e,n){const r=ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Qe(he.comparator);o=o.insert(s,At.newNoDocument(s,ge.min()));const l=ke().add(s),u=new Eu(ge.min(),new Map,new Qe(be),o,l);await P_(r,u),r.du=r.du.remove(s),r.Au.delete(e),Wp(r)}else await Af(r.localStore,e,!1).then(()=>Vf(r,e,n)).catch(Qs)}async function AR(t,e){const n=ye(t),r=e.batch.batchId;try{const i=await U3(n.localStore,e);V_(n,r,null),R_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Wa(n,i)}catch(i){await Qs(i)}}async function PR(t,e,n){const r=ye(t);try{const i=await function(o,l){const u=ye(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(Ce(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);V_(r,e,n),R_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Wa(r,i)}catch(i){await Qs(i)}}function R_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function V_(t,e,n){const r=ye(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Vf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||D_(t,r)})}function D_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Mp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Wp(t))}function Iv(t,e,n){for(const r of n)r instanceof I_?(t.Ru.addReference(r.key,e),RR(t,r)):r instanceof z_?(le(qp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||D_(t,r.key)):fe(19791,{wu:r})}function RR(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(le(qp,"New document in limbo: "+n),t.Eu.add(r),Wp(t))}function Wp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(Pe.fromString(e)),r=t.fu.next();t.Au.set(r,new _R(n)),t.du=t.du.insert(n,r),b_(t.remoteStore,new Ir(On(Cp(n.path)),r,"TargetPurposeLimboResolution",vu.ce))}}async function Wa(t,e,n){const r=ye(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=Vp.As(u.targetId,d);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,d){const h=ye(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>G.forEach(d,p=>G.forEach(p.Es,w=>h.persistence.referenceDelegate.addReference(m,p.targetId,w)).next(()=>G.forEach(p.ds,w=>h.persistence.referenceDelegate.removeReference(m,p.targetId,w)))))}catch(m){if(!Ys(m))throw m;le(Dp,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const w=h.Ms.get(p),T=w.snapshotVersion,C=w.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(p,C)}}}(r.localStore,s))}async function VR(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){le(qp,"User change. New user:",e.toKey());const r=await x_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new oe(K.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Wa(n,r.Ls)}}function DR(t,e){const n=ye(t),r=n.Au.get(e);if(r&&r.hu)return ke().add(r.key);{let i=ke();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function M_(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=P_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zR.bind(null,e),e.Pu.H_=vR.bind(null,e.eventManager),e.Pu.yu=wR.bind(null,e.eventManager),e}function MR(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=PR.bind(null,e),e}class qc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return B3(this.persistence,new L3,e.initialUser,this.serializer)}Cu(e){return new g_(Rp.mi,this.serializer)}Du(e){return new G3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qc.provider={build:()=>new qc};class LR extends qc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ce(this.persistence.referenceDelegate instanceof Uc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new _3(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Ut.withCacheSize(this.cacheSizeBytes):Ut.DEFAULT;return new g_(r=>Uc.mi(r,n),this.serializer)}}class Df{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Sv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=VR.bind(null,this.syncEngine),await gR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yR}()}createDatastore(e){const n=Cu(e.databaseInfo.databaseId),r=function(s){return new Z3(s)}(e.databaseInfo);return function(s,o,l,u){return new rR(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new sR(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Sv(this.syncEngine,n,0),function(){return _v.v()?new _v:new Q3}())}createSyncEngine(e,n){return function(i,s,o,l,u,d,h){const m=new NR(i,s,o,l,u,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ye(i);le(Mi,"RemoteStore shutting down."),s.Ea.add(5),await qa(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Df.provider={build:()=>new Df};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="FirestoreClient";class OR{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=It.UNAUTHENTICATED,this.clientId=bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{le(Zr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(le(Zr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Up(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),le(Zr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await x_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function zv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FR(t);le(Zr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Tv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Tv(e.remoteStore,i)),t._onlineComponents=e}async function FR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){le(Zr,"Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ds("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new qc)}}else le(Zr,"Using default OfflineComponentProvider"),await Hd(t,new LR(void 0));return t._offlineComponents}async function O_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(le(Zr,"Using user provided OnlineComponentProvider"),await zv(t,t._uninitializedComponentsProvider._online)):(le(Zr,"Using default OnlineComponentProvider"),await zv(t,new Df))),t._onlineComponents}function BR(t){return O_(t).then(e=>e.syncEngine)}async function F_(t){const e=await O_(t),n=e.eventManager;return n.onListen=TR.bind(null,e.syncEngine),n.onUnlisten=jR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ER.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SR.bind(null,e.syncEngine),n}function UR(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,d){const h=new L_({next:p=>{h.Nu(),o.enqueueAndForget(()=>j_(s,m));const w=p.docs.has(l);!w&&p.fromCache?d.reject(new oe(K.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&p.fromCache&&u&&u.source==="server"?d.reject(new oe(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new S_(Cp(l.path),h,{includeMetadataChanges:!0,qa:!0});return C_(s,m)}(await F_(t),t.asyncQueue,e,n,r)),r.promise}function $R(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,d){const h=new L_({next:p=>{h.Nu(),o.enqueueAndForget(()=>j_(s,m)),p.fromCache&&u.source==="server"?d.reject(new oe(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new S_(l,h,{includeMetadataChanges:!0,qa:!0});return C_(s,m)}(await F_(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_="firestore.googleapis.com",Pv=!0;class Rv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=U_,this.ssl=Pv}else this.host=e.host,this.ssl=e.ssl??Pv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=p_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<b3)throw new oe(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=B_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new oe(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Iu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new QA;switch(r.type){case"firstParty":return new ZA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Av.get(n);r&&(le("ComponentProvider","Removing Datastore"),Av.delete(n),r.terminate())}(this),Promise.resolve()}}function qR(t,e,n,r={}){var d;t=Kr(t,Iu);const i=dp(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(eI(`https://${l}`),iI("Firestore",!0)),s.host!==U_&&s.host!==l&&Ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!ka(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=It.MOCK_USER;else{h=tI(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new oe(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new It(p)}t._authCredentials=new YA(new C2(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qi(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ba(n,at._jsonSchema))return new at(e,r||null,new he(Pe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:ot("string",at._jsonSchemaVersion),referencePath:ot("string")};class Ur extends qi{constructor(e,n,r){super(e,n,Cp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new he(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function Kd(t,e,...n){if(t=cr(t),j2("collection","path",e),t instanceof Iu){const r=Pe.fromString(e,...n);return Ky(r),new Ur(t,null,r)}{if(!(t instanceof at||t instanceof Ur))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return Ky(r),new Ur(t.firestore,null,r)}}function ut(t,e,...n){if(t=cr(t),arguments.length===1&&(e=bp.newId()),j2("doc","path",e),t instanceof Iu){const r=Pe.fromString(e,...n);return Hy(r),new at(t,null,new he(r))}{if(!(t instanceof at||t instanceof Ur))throw new oe(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return Hy(r),new at(t.firestore,t instanceof Ur?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="AsyncQueue";class Dv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new v_(this,"async_queue_retry"),this._c=()=>{const r=Wd();r&&le(Vv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ys(e))throw e;le(Vv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,hr("INTERNAL UNHANDLED ERROR: ",Mv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Bp.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&fe(47125,{Pc:Mv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Mv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ha extends Iu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Dv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Dv(e),this._firestoreClient=void 0,await e}}}function WR(t,e){const n=typeof t=="object"?t:Yk(),r=typeof t=="string"?t:Dc,i=Fa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=JS("firestore");s&&qR(i,...s)}return i}function Hp(t){if(t._terminated)throw new oe(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||HR(t),t._firestoreClient}function HR(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,d,h){return new gP(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,B_(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new OR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cn(Et.fromBase64String(e))}catch(n){throw new oe(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new cn(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ba(e,cn._jsonSchema))return cn.fromBase64String(e.bytes)}}cn._jsonSchemaVersion="firestore/bytes/1.0",cn._jsonSchema={type:ot("string",cn._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new oe(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new oe(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new oe(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Un._jsonSchemaVersion}}static fromJSON(e){if(Ba(e,Un._jsonSchema))return new Un(e.latitude,e.longitude)}}Un._jsonSchemaVersion="firestore/geoPoint/1.0",Un._jsonSchema={type:ot("string",Un._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:$n._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ba(e,$n._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new $n(e.vectorValues);throw new oe(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$n._jsonSchemaVersion="firestore/vectorValue/1.0",$n._jsonSchema={type:ot("string",$n._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=/^__.*__$/;class GR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ui(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ua(e,this.data,n,this.fieldTransforms)}}function q_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class Gp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Gp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Wc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(q_(this.Ac)&&KR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cu(e)}Cc(e,n,r,i=!1){return new Gp({Ac:e,methodName:n,Dc:r,path:kt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function W_(t){const e=t._freezeSettings(),n=Cu(t._databaseId);return new QR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function YR(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);G_("Data must be an object, but it was:",o,r);const l=H_(r,o);let u,d;if(s.merge)u=new _n(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const p=JR(e,m,n);if(!o.contains(p))throw new oe(K.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);e9(h,p)||h.push(p)}u=new _n(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new GR(new ln(l),u,d)}function XR(t,e,n,r=!1){return Qp(n,t.Cc(r?4:3,e))}function Qp(t,e){if(K_(t=cr(t)))return G_("Unsupported field value:",e,t),H_(t,e);if(t instanceof $_)return function(r,i){if(!q_(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=Qp(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=cr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return OP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Le.fromDate(r);return{timestampValue:Bc(i.serializer,s)}}if(r instanceof Le){const s=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bc(i.serializer,s)}}if(r instanceof Un)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof cn)return{bytesValue:l_(i.serializer,r._byteString)};if(r instanceof at){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Ap(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof $n)return function(o,l){return{mapValue:{fields:{[M2]:{stringValue:L2},[Mc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return jp(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${yu(r)}`)}(t,e)}function H_(t,e){const n={};return z2(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(r,i)=>{const s=Qp(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function K_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof Un||t instanceof cn||t instanceof at||t instanceof $_||t instanceof $n)}function G_(t,e,n){if(!K_(n)||!S2(n)){const r=yu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function JR(t,e,n){if((e=cr(e))instanceof Kp)return e._internalPath;if(typeof e=="string")return Q_(t,e);throw Wc("Field path arguments must be of type string or ",t,!1,void 0,n)}const ZR=new RegExp("[~\\*/\\[\\]]");function Q_(t,e,n){if(e.search(ZR)>=0)throw Wc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Kp(...e.split("."))._internalPath}catch{throw Wc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Wc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new oe(K.INVALID_ARGUMENT,l+t+u)}function e9(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t9 extends Y_{data(){return super.data()}}function Yp(t,e){return typeof e=="string"?Q_(t,e):e instanceof Kp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new oe(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Xp{}class X_ extends Xp{}function Lv(t,e,...n){let r=[];e instanceof Xp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Zp).length,l=s.filter(u=>u instanceof Jp).length;if(o>1||o>0&&l>0)throw new oe(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Jp extends X_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Jp(e,n,r)}_apply(e){const n=this._parse(e);return J_(e._query,n),new qi(e.firestore,e.converter,Ef(e._query,n))}_parse(e){const n=W_(e.firestore);return function(s,o,l,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new oe(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Bv(m,h);const T=[];for(const C of m)T.push(Fv(u,s,C));p={arrayValue:{values:T}}}else p=Fv(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Bv(m,h),p=XR(l,o,m,h==="in"||h==="not-in");return st.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Zp extends Xp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Zp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)J_(o,u),o=Ef(o,u)}(e._query,n),new qi(e.firestore,e.converter,Ef(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class e0 extends X_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new e0(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new oe(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new oe(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(s,o)}(e._query,this._field,this._direction);return new qi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Xs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Ov(t,e="asc"){const n=e,r=Yp("orderBy",t);return e0._create(r,n)}function Fv(t,e,n){if(typeof(n=cr(n))=="string"){if(n==="")throw new oe(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!H2(e)&&n.indexOf("/")!==-1)throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!he.isDocumentKey(r))throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tv(t,new he(r))}if(n instanceof at)return tv(t,n._key);throw new oe(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yu(n)}.`)}function Bv(t,e){if(!Array.isArray(t)||t.length===0)throw new oe(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function J_(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class r9{convertValue(e,n="none"){switch(Xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Mc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>et(o.doubleValue));return new $n(n)}convertGeoPoint(e){return new Un(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ta(e));default:return null}}convertTimestamp(e){const n=Qr(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);Ce(m_(r),9688,{name:e});const i=new Ea(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(n)||hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i9(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ci extends Y_{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ci._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ci._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ci._jsonSchema={type:ot("string",Ci._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class Jl extends Ci{data(e={}){return super.data(e)}}class Es{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ro(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Jl(this._firestore,this._userDataWriter,r.key,r,new Ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new oe(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Jl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ro(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Jl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Ro(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:s9(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Es._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function s9(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t){t=Kr(t,at);const e=Kr(t.firestore,Ha);return UR(Hp(e),t._key).then(n=>o9(e,t,n))}Es._jsonSchemaVersion="firestore/querySnapshot/1.0",Es._jsonSchema={type:ot("string",Es._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class Z_ extends r9{constructor(e){super(),this.firestore=e}convertBytes(e){return new cn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function Gd(t){t=Kr(t,qi);const e=Kr(t.firestore,Ha),n=Hp(e),r=new Z_(e);return n9(t._query),$R(n,t._query).then(i=>new Es(e,r,t,i))}function Hn(t,e,n){t=Kr(t,at);const r=Kr(t.firestore,Ha),i=i9(t.converter,e,n);return eN(r,[YR(W_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Fn.none())])}function Uv(t){return eN(Kr(t.firestore,Ha),[new Sp(t._key,Fn.none())])}function eN(t,e){return function(r,i){const s=new tr;return r.asyncQueue.enqueueAndForget(async()=>IR(await BR(r),i,s)),s.promise}(Hp(t),e)}function o9(t,e,n){const r=n.docs.get(e._key),i=new Z_(t);return new Ci(t,i,e._key,r,new Ro(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Gs=i})(pz),Hr(new ur("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ha(new XA(r.getProvider("auth-internal")),new eP(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new oe(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(d.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Ln(Uy,$y,e),Ln(Uy,$y,"esm2020")})();const a9={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},tN=Qk(a9);qA(tN);const Xe=WR(tN),Ae={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},Kn=t=>JSON.parse(JSON.stringify(t)),Re={async saveRecipe(t,e){try{return await Hn(ut(Xe,Ae.RECIPES,t),Kn({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=Lv(Kd(Xe,Ae.RECIPES),Ov("updatedAt","desc")),e=await Gd(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await Uv(ut(Xe,Ae.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Hn(ut(Xe,Ae.SETTINGS,"inventory_v2"),Kn({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await kr(ut(Xe,Ae.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await kr(ut(Xe,Ae.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Hn(ut(Xe,Ae.SETTINGS,"costs_data"),Kn({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await kr(ut(Xe,Ae.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Hn(ut(Xe,Ae.SETTINGS,"ficha_tecnica"),Kn({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await kr(ut(Xe,Ae.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Hn(ut(Xe,Ae.SETTINGS,"global_config"),Kn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await kr(ut(Xe,Ae.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Hn(ut(Xe,Ae.SETTINGS,Ae.RECIPES_V2),Kn({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await kr(ut(Xe,Ae.SETTINGS,Ae.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Hn(ut(Xe,Ae.RECIPES_V3,String(t)),Kn({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=Lv(Kd(Xe,Ae.RECIPES_V3),Ov("updatedAt","desc"));t=await Gd(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await Gd(Kd(Xe,Ae.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await Uv(ut(Xe,Ae.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Hn(ut(Xe,Ae.SETTINGS,Ae.KANBAN),Kn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await kr(ut(Xe,Ae.SETTINGS,Ae.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Hn(ut(Xe,Ae.SETTINGS,"recipe_categories"),Kn({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await kr(ut(Xe,Ae.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}}};function l9(){const[t,e]=z.useState([]),[n,r]=z.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,s]=z.useState(!1),[o,l]=z.useState(null),[u,d]=z.useState(null),[h,m]=z.useState(!1),[p,w]=z.useState(""),[T,C]=z.useState("Global Investment Matrix"),[A,b]=z.useState(!1),[x,v]=z.useState(.13),[P,D]=z.useState(!1),[M,k]=z.useState(null),y=z.useRef(null),_=z.useCallback((j,O="success")=>{y.current&&clearTimeout(y.current),k({message:j,type:O}),y.current=setTimeout(()=>k(null),3500)},[]),[E,I]=z.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),R=z.useRef(null);z.useEffect(()=>{try{const j=localStorage.getItem("padoca_costs_v1"),O=localStorage.getItem("padoca_costs_categories"),H=localStorage.getItem("padoca_costs_title"),re=localStorage.getItem("padoca_global_tax");let L=j?JSON.parse(j):[],q=O?JSON.parse(O):null;H&&C(H),re&&v(Number(re)),q&&(q=q.map(W=>W==="Pessoal"?"Maquinrio":W),r(q)),L&&(L=L.map(W=>({...W,category:W.category==="Pessoal"?"Maquinrio":W.category})),e(L))}catch(j){console.error("Load failed",j)}},[]);const[S,xe]=z.useState(!1);z.useEffect(()=>{(async()=>{try{const O=await Re.getCosts();O&&(O.costs&&e(O.costs),O.categories&&r(O.categories));const H=await Re.getGlobalSettings();H&&H.taxRate!==void 0&&(v(H.taxRate),localStorage.setItem("padoca_global_tax",H.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{xe(!0)}})()},[]),z.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),S&&Re.syncCosts(t,n)},[t,n,S]),z.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),z.useEffect(()=>{localStorage.setItem("padoca_costs_title",T)},[T]),z.useEffect(()=>{localStorage.setItem("padoca_global_tax",x.toString()),S&&Re.syncGlobalSettings({taxRate:x}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:x}}))},[x,S]);const de=j=>(Number(j)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),ae=z.useMemo(()=>{const j=t.reduce((H,re)=>{const L=Number(re.quantity)||1,q=(Number(re.amount)||0)*L;return H.total+=q,re.type==="Fixo"?H.fixed+=q:H.variable+=q,H},{total:0,fixed:0,variable:0}),O=j.total*x;return{...j,hst:O,grandTotal:j.total+O}},[t]),me=z.useMemo(()=>n.reduce((j,O)=>{const H=t.filter(re=>re.category===O);return H.length>0&&(j[O]=H),j},{}),[t,n]),Q=j=>{if(j.preventDefault(),!E.description||!E.amount)return;const O=n.includes(E.category)?E.category:n[0],H={...E,category:O,amount:Number(E.amount),quantity:Number(E.quantity)||1};e(o?re=>re.map(L=>L.id===o?{...H,id:o}:L):re=>[...re,{...H,id:Date.now().toString()}]),ie()},ee=j=>{d({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(O=>O.filter(H=>H.id!==j)),_("Despesa removida com sucesso."),d(null)},onCancel:()=>d(null)})},ie=()=>{s(!1),l(null),I({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},$=j=>{I({description:j.description||"",amount:j.amount||"",quantity:j.quantity||1,category:j.category||n[0],type:j.type||"Varivel",link:j.link||"",date:j.date||new Date().toISOString().split("T")[0]}),l(j.id),s(!0)},se=()=>{p&&(n.includes(p)||(r(j=>[...j,p]),_("Categoria adicionada.")),w(""))},ne=j=>{d({title:"Remover Categoria",message:`A categoria "${j}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(O=>O.filter(H=>H!==j)),_("Categoria removida."),d(null)},onCancel:()=>d(null)})},V=()=>{try{const j=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],O=t.map(W=>{const Z=Number(W.quantity)||1,_e=Number(W.amount)||0,Se=Z*_e;return[W.id,W.date||"-",`"${W.description.replace(/"/g,'""')}"`,Z,_e.toFixed(2).replace(".",","),Se.toFixed(2).replace(".",","),`"${W.category}"`,W.type,`"${W.link||""}"`]}),H="\uFEFF"+[j.join(";"),...O.map(W=>W.join(";"))].join(`
`),re=new Blob([H],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(re),q=document.createElement("a");q.href=L,q.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,q.click(),_("Relatrio Excel exportado!")}catch{_("Erro ao exportar CSV")}},U=()=>{try{const j=JSON.stringify({version:"1",costs:t,categories:n},null,2),O=new Blob([j],{type:"application/json"}),H=URL.createObjectURL(O),re=document.createElement("a");re.href=H,re.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,re.click(),_("Backup realizado com sucesso!")}catch{_("Erro ao realizar backup")}},Y=j=>{var re;const O=(re=j.target.files)==null?void 0:re[0];if(!O)return;const H=new FileReader;H.onload=L=>{try{const q=JSON.parse(String(L.target.result||"{}"));if(q.costs&&Array.isArray(q.costs))e(q.costs),q.categories&&r(q.categories),_("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{_("Arquivo de backup invlido")}},H.readAsText(O),j.target.value=""},X=()=>{d({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),_("Banco de dados limpo."),d(null)},onCancel:()=>d(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[A?a.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:T,onChange:j=>C(j.target.value),onBlur:()=>b(!1),onKeyDown:j=>j.key==="Enter"&&b(!1),autoFocus:!0}):a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>b(!0),children:T}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:de(ae.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:de(ae.total)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[P?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:x*100,onChange:j=>v(Number(j.target.value)/100),onBlur:()=>D(!1),onKeyDown:j=>j.key==="Enter"&&D(!1),autoFocus:!0}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):a.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>D(!0),children:["Tax Impact (",(x*100).toFixed(0),"%)"]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:de(ae.hst)})]})]})]})}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:de(ae.fixed)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(ae.fixed/ae.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${ae.fixed/ae.total*100||0}%`}})})]})]}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:de(ae.variable)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),a.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(ae.variable/ae.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${ae.variable/ae.total*100||0}%`}})})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),a.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[a.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[a.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),a.jsx("div",{className:"col-span-2"})]}),a.jsx("div",{className:"space-y-6",children:t.length===0?a.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),a.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(me).map(([j,O])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:j}),a.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),a.jsx("div",{className:"space-y-3 md:space-y-1",children:O.map(H=>a.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[a.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[a.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${H.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),a.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[a.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:H.description}),a.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:H.date}),H.link&&a.jsx("a",{href:H.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),a.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:a.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[H.quantity," unit  ",H.type.slice(0,1)]})}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:de((Number(H.amount)||0)*(Number(H.quantity)||1))}),a.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[de(H.amount)," / item"]})]}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:de((Number(H.amount)||0)*(Number(H.quantity)||1)*(1+x))}),a.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[a.jsxs("button",{onClick:()=>$(H),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),a.jsxs("button",{onClick:()=>ee(H.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},H.id))})]},j))})]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[a.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),a.jsx("button",{onClick:V,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:X,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx("button",{onClick:U,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var j;return(j=R.current)==null?void 0:j.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:R,type:"file",accept:"application/json",className:"hidden",onChange:Y})]})]})]}),a.jsx(ze,{children:i&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:ie}),a.jsxs(ue.div,{initial:{y:"100%",opacity:.5},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-t-[2.5rem] md:rounded-[2rem] shadow-[0_10px_40px_rgba(0,0,0,0.2)] border-t border-white/20 dark:border-white/5 flex flex-col overflow-hidden max-h-[85vh] md:max-h-[80vh]",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:a.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:o?"Editar Despesa":"Nova Despesa"}),a.jsx("button",{onClick:ie,className:"w-8 h-8 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?a.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[a.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((j,O)=>a.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${O!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[a.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:j}),a.jsx("button",{onClick:()=>ne(j),className:"text-red-400 p-1",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},j))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:p,onChange:j=>w(j.target.value)}),a.jsx("button",{className:"w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold",onClick:se,children:"+"})]}),a.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all",children:"Pronto"})]}):a.jsxs("form",{onSubmit:Q,className:"space-y-6 px-4 animate-fade-in",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:E.description,onChange:j=>I({...E,description:j.target.value}),placeholder:"Mixer, Aluguel..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:E.link,onChange:j=>I({...E,link:j.target.value}),placeholder:"Opcional..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:E.quantity,onChange:j=>I({...E,quantity:j.target.value})})]}),a.jsxs("div",{className:"flex items-center px-4 py-3",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),a.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:E.amount,onChange:j=>I({...E,amount:j.target.value})})]})]})]}),a.jsx("div",{className:"px-1",children:a.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(j=>a.jsx("button",{type:"button",onClick:()=>I({...E,type:j}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${E.type===j?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:j},j))})}),a.jsxs("div",{className:"space-y-3 px-1",children:[a.jsxs("div",{className:"flex justify-between items-center px-1",children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),a.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(j=>a.jsx("button",{type:"button",onClick:()=>I({...E,category:j}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${E.category===j?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:j},j))})]}),a.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[a.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),a.jsx("button",{type:"button",onClick:ie,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),a.jsx(ze,{children:M&&qn.createPortal(a.jsxs(ue.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${M.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":M.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${M.type==="error"?"bg-white animate-pulse":M.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:M.message})]}),document.body)}),a.jsx(ze,{children:u&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:u.onCancel}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${u.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:u.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:u.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:u.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:u.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${u.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}const Yn="padoca_inventory_v2",Qd=["Ingredientes","Embalagens","Utenslios","Outros"],Yd=["Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function c9(){const[t,e]=z.useState(()=>{try{const L=localStorage.getItem(Yn);if(L)return JSON.parse(L);const q=localStorage.getItem("padoca_inventory");return q?JSON.parse(q).map(Z=>({...Z,packageQuantity:Z.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=z.useState(()=>{try{const L=localStorage.getItem(Yn+"_categories");return L?JSON.parse(L):Qd}catch{return Qd}}),[i,s]=z.useState(!1),[o,l]=z.useState("synced");z.useEffect(()=>{(async()=>{try{const q=await Re.getInventory();q&&(Array.isArray(q.items)&&e(q.items),Array.isArray(q.categories)&&r(q.categories));const W=await Re.getGlobalSettings();W&&W.taxRate!==void 0&&d(W.taxRate)}catch(q){console.warn("Inventory cloud load failed",q)}finally{s(!0)}})()},[]);const[u,d]=z.useState(()=>{const L=localStorage.getItem("padoca_global_tax");return L?Number(L):.13});z.useEffect(()=>{const L=q=>{q.detail&&q.detail.taxRate!==void 0&&d(q.detail.taxRate)};return window.addEventListener("global-settings-updated",L),()=>window.removeEventListener("global-settings-updated",L)},[]);const[h,m]=z.useState(!1),[p,w]=z.useState(null),[T,C]=z.useState(""),[A,b]=z.useState(null),[x,v]=z.useState(null),[P,D]=z.useState(null),M=z.useRef(null),k=z.useCallback((L,q="success")=>{M.current&&clearTimeout(M.current),D({message:L,type:q}),M.current=setTimeout(()=>D(null),3500)},[]),[y,_]=z.useState(()=>{try{const L=localStorage.getItem(Yn+"_subcategories");return L?JSON.parse(L):Yd}catch{return Yd}}),[E,I]=z.useState(!1),[R,S]=z.useState(""),[xe,de]=z.useState(""),[ae,me]=z.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]});z.useEffect(()=>{if(localStorage.setItem(Yn,JSON.stringify(t)),localStorage.setItem(Yn+"_categories",JSON.stringify(n)),localStorage.setItem(Yn+"_subcategories",JSON.stringify(y)),i){l("syncing");const L=setTimeout(async()=>{try{const q=await Re.syncInventory(t,n);l(q?"synced":"error")}catch{l("error")}},1500);return()=>clearTimeout(L)}window.dispatchEvent(new Event("inventory-updated"))},[t,n,y,i]);const Q=L=>(Number(L.packageQuantity)||0)*(Number(L.packageCount)||1),ee=L=>(Number(L.packageCount)||1)*(Number(L.pricePerUnit)||0),ie=z.useMemo(()=>{const L=t.reduce((Z,_e)=>Z+ee(_e),0),q=t.length,W=t.reduce((Z,_e)=>{const Se=ee(_e);return Z[_e.category]=(Z[_e.category]||0)+Se,Z},{});return{totalValue:L,itemCount:q,byCategory:W,taxImpact:L*u,grandTotal:L*(1+u)}},[t,u]),$=L=>(Number(L)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),se=()=>{if(!ae.name.trim())return;const L={id:Date.now(),name:ae.name.trim(),packageQuantity:Number(ae.packageQuantity)||0,packageCount:Number(ae.packageCount)||1,unit:ae.unit,pricePerUnit:Number(ae.pricePerUnit)||0,category:ae.category,subcategory:ae.category==="Ingredientes"?ae.subcategory:null,purchaseDate:ae.purchaseDate,createdAt:new Date().toISOString()};e(q=>[...q,L]),me({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]}),m(!1)},ne=(L,q,W)=>{e(Z=>Z.map(_e=>_e.id!==L?_e:{..._e,[q]:["name","unit","category","subcategory","purchaseDate"].includes(q)?W:Number(W)||0}))},V=L=>{v({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(q=>q.filter(W=>W.id!==L)),w(null),v(null)},onCancel:()=>v(null)})},U=z.useMemo(()=>{let L=t;if(T.trim()){const q=T.toLowerCase().trim();L=L.filter(W=>W.name.toLowerCase().includes(q)||W.subcategory&&W.subcategory.toLowerCase().includes(q))}return A&&(L=L.filter(q=>q.subcategory===A)),L},[t,T,A]),Y=z.useMemo(()=>n.reduce((L,q)=>{const W=U.filter(Z=>Z.category===q);return W.length>0&&(L[q]=W),L},{}),[U,n]),X=mn.useRef(null),j=()=>{try{const L=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],q=t.map(Be=>{const Ue=(Number(Be.packageQuantity)||0)*(Number(Be.packageCount)||1),lt=(Number(Be.packageCount)||1)*(Number(Be.pricePerUnit)||0);return[Be.id,`"${Be.name.replace(/"/g,'""')}"`,`"${Be.category}"`,Be.packageQuantity,Be.unit,Be.packageCount,Ue,Number(Be.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),lt.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),W="\uFEFF"+[L.join(";"),...q.map(Be=>Be.join(";"))].join(`
`),Z=new Blob([W],{type:"text/csv;charset=utf-8;"}),_e=URL.createObjectURL(Z),Se=document.createElement("a");Se.href=_e,Se.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,Se.click(),k("Relatrio de Estoque exportado!","success")}catch(L){console.error(L),k("Erro ao exportar CSV","error")}},O=()=>{try{const L=JSON.stringify({version:"2",items:t,categories:n},null,2),q=new Blob([L],{type:"application/json"}),W=URL.createObjectURL(q),Z=document.createElement("a");Z.href=W,Z.download=`padoca_estoque_backup_${new Date().toISOString().split("T")[0]}.json`,Z.click(),k("Backup de Estoque realizado!","success")}catch{k("Erro ao realizar backup","error")}},H=L=>{var Z;const q=(Z=L.target.files)==null?void 0:Z[0];if(!q)return;const W=new FileReader;W.onload=_e=>{try{const Se=JSON.parse(String(_e.target.result||"{}"));if(Se.items&&Array.isArray(Se.items))e(Se.items),Se.categories&&r(Se.categories),k("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{k("Arquivo de backup invlido","error")}},W.readAsText(q),L.target.value=""},re=()=>{v({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(Yn,"[]"),v(null)},onCancel:()=>v(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${o==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":o==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${o==="syncing"?"bg-amber-500":o==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:o==="syncing"?"Cloud Syncing":o==="error"?"Sync Error":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),a.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:$(ie.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:$(ie.totalValue)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(u*100).toFixed(0),"%)"]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:$(ie.taxImpact)})]})]})]})}),a.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((L,q)=>{const W={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},Z=W[L]||W.Outros,_e=ie.byCategory[L]||0,Se=_e*(1+u),Be=(_e/ie.totalValue*100||0).toFixed(0);return a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Z.pulse} ${Z.shadow}`}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:L})]}),a.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:$(Se)}),a.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",$(_e)," + ",(u*100).toFixed(0),"% tax)"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:`text-[8px] font-bold ${Z.text}`,children:[Be,"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${Z.bg} transition-all duration-1000`,style:{width:`${Be}%`}})})]})]},L)})})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>m(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[90vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Item"}),a.jsx("button",{onClick:()=>m(!1),className:"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-5",children:[a.jsxs("div",{className:"sm:col-span-2 lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Item"}),a.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"Ex: Farinha de Trigo",value:ae.name,onChange:L=>me(q=>({...q,name:L.target.value})),autoFocus:!0})]}),a.jsxs("div",{className:"lg:col-span-12 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Qtd/Pacote"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"25",value:ae.packageQuantity,onChange:L=>me(q=>({...q,packageQuantity:L.target.value}))}),a.jsxs("select",{className:"w-24 px-2 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all text-center appearance-none",value:ae.unit,onChange:L=>me(q=>({...q,unit:L.target.value})),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"N Pacotes"}),a.jsx("input",{type:"number",min:"1",inputMode:"numeric",pattern:"[0-9]*",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"1",value:ae.packageCount,onChange:L=>me(q=>({...q,packageCount:L.target.value}))})]})]}),a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Pacote"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500 font-medium",children:"$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0.00",value:ae.pricePerUnit,onChange:L=>me(q=>({...q,pricePerUnit:L.target.value}))})]})]}),a.jsxs("div",{className:ae.category==="Ingredientes"?"lg:col-span-6":"lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Categoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:ae.category,onChange:L=>me(q=>({...q,category:L.target.value,subcategory:L.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(L=>a.jsx("option",{value:L,children:L},L))})]}),ae.category==="Ingredientes"&&a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:ae.subcategory,onChange:L=>me(q=>({...q,subcategory:L.target.value})),children:y.map(L=>a.jsx("option",{value:L,children:L},L))})]})]}),ae.packageQuantity&&ae.packageCount&&a.jsx("div",{className:"mt-6 p-5 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 shadow-inner",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Resumo"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-300",children:[Number(ae.packageQuantity)*Number(ae.packageCount)," ",ae.unit," Total"]}),ae.pricePerUnit&&a.jsx("div",{className:"text-2xl font-bold text-zinc-900 dark:text-white mt-1 tracking-tight tabular-nums",children:$(Number(ae.packageCount)*Number(ae.pricePerUnit))})]})]})}),a.jsxs("div",{className:"flex gap-3 mt-8 safe-area-bottom",children:[a.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:se,disabled:!ae.name.trim(),className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/10 hover:shadow-xl hover:shadow-zinc-900/20 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar ao Estoque"})]})]})]}),a.jsx("section",{className:"relative z-10 mb-6",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:T,onChange:L=>C(L.target.value)}),T&&a.jsx("button",{onClick:()=>C(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[a.jsx("button",{onClick:()=>b(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${A===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),y.map(L=>a.jsx("button",{onClick:()=>b(A===L?null:L),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${A===L?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:L},L))]}),(T||A)&&a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[a.jsxs("span",{className:"text-xs text-zinc-500",children:[U.length," ",U.length===1?"resultado":"resultados"]}),a.jsx("button",{onClick:()=>{C(""),b(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(Y).length>0?a.jsx("div",{className:"space-y-8",children:Object.entries(Y).map(([L,q])=>a.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:L}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:$((ie.byCategory[L]||0)*(1+u))}),a.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[q.length," ",q.length===1?"item":"itens"]})})]})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[a.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:q.map(W=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:p===W.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:W.name,onChange:Z=>ne(W.id,"name",Z.target.value)})}),a.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[a.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:W.packageQuantity,onChange:Z=>ne(W.id,"packageQuantity",Z.target.value)}),a.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:W.unit,onChange:Z=>ne(W.id,"unit",Z.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]}),a.jsx("div",{className:"col-span-1",children:a.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:W.packageCount,onChange:Z=>ne(W.id,"packageCount",Z.target.value)})}),W.category==="Ingredientes"&&a.jsx("div",{className:"col-span-2",children:a.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:W.subcategory||"",onChange:Z=>ne(W.id,"subcategory",Z.target.value),children:y.map(Z=>a.jsx("option",{value:Z,children:Z},Z))})}),W.category!=="Ingredientes"&&a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[Q(W)," ",W.unit]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:W.pricePerUnit,onChange:Z=>ne(W.id,"pricePerUnit",Z.target.value)})}),a.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>w(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),a.jsx("button",{onClick:()=>V(W.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-3",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:W.name})}),a.jsx("div",{className:"col-span-2 text-center",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[W.packageQuantity," ",W.unit]})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[W.packageCount,""]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[Q(W)," ",W.unit]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:$(W.pricePerUnit)})}),a.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:$(ee(W)*(1+u))}),a.jsx("button",{onClick:()=>w(W.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},W.id))})]}),a.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:q.map(W=>a.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${p===W.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:p===W.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>w(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>V(W.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:W.name,onChange:Z=>ne(W.id,"name",Z.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:W.packageQuantity,onChange:Z=>ne(W.id,"packageQuantity",Z.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:W.unit,onChange:Z=>ne(W.id,"unit",Z.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:W.packageCount,onChange:Z=>ne(W.id,"packageCount",Z.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),a.jsxs("div",{className:"relative group",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:W.pricePerUnit,onChange:Z=>ne(W.id,"pricePerUnit",Z.target.value)})]})]})]}),W.category==="Ingredientes"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:W.subcategory||"",onChange:Z=>ne(W.id,"subcategory",Z.target.value),children:y.map(Z=>a.jsx("option",{value:Z,children:Z},Z))})]})]}):a.jsxs("div",{onClick:()=>w(W.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:W.name}),a.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[Q(W)," ",W.unit," em estoque"]})]}),a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[W.packageCount," pcts"]})]}),a.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),a.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:$(W.pricePerUnit)})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:$(ee(W)*(1+u))})})]})]})]})},W.id))}),a.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",L]}),a.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:$((ie.byCategory[L]||0)*(1+u))})]})]},L))}):a.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),a.jsx("button",{onClick:()=>m(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),a.jsx("section",{className:"relative z-10 mt-8",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:re,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[a.jsx("button",{onClick:j,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export CSV"}),a.jsx("button",{onClick:O,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var L;return(L=X.current)==null?void 0:L.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:X,type:"file",accept:"application/json",className:"hidden",onChange:H})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[a.jsx("h3",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest mb-4",children:"Category Management"}),a.jsxs("button",{onClick:()=>I(!0),className:"w-full py-4 md:py-3 bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20 text-indigo-600 dark:text-indigo-400 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-indigo-100 dark:hover:bg-indigo-500/20 transition-all flex items-center justify-center gap-2",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Gerenciar Categorias e Subcategorias"]})]})]})}),E&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>I(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[90vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),a.jsx("button",{onClick:()=>I(!1),className:"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),a.jsx("div",{className:"space-y-2",children:n.map((L,q)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:L}),a.jsx("button",{onClick:()=>{v({title:"Excluir Categoria",message:`Excluir categoria "${L}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(W=>W.filter(Z=>Z!==L)),e(W=>W.map(Z=>Z.category===L?{...Z,category:"Outros"}:Z)),v(null),k("Categoria removida","success")},onCancel:()=>v(null)})},className:"p-1.5 rounded-lg text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),a.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:R,onChange:L=>S(L.target.value),onKeyDown:L=>{L.key==="Enter"&&R.trim()&&(n.includes(R.trim())||(r(q=>[...q,R.trim()]),S("")))}}),a.jsx("button",{onClick:()=>{R.trim()&&!n.includes(R.trim())&&(r(L=>[...L,R.trim()]),S(""))},disabled:!R.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("button",{onClick:()=>{v({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(Qd),v(null),k("Categorias restauradas","success")},onCancel:()=>v(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),a.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),a.jsx("div",{className:"space-y-2",children:y.map((L,q)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[a.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:L}),a.jsx("button",{onClick:()=>{v({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${L}"?`,type:"danger",onConfirm:()=>{_(W=>W.filter(Z=>Z!==L)),v(null),k("Subcategoria removida","success")},onCancel:()=>v(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:xe,onChange:L=>de(L.target.value),onKeyDown:L=>{L.key==="Enter"&&xe.trim()&&(y.includes(xe.trim())||(_(q=>[...q,xe.trim()]),de("")))}}),a.jsx("button",{onClick:()=>{xe.trim()&&!y.includes(xe.trim())&&(_(L=>[...L,xe.trim()]),de(""))},disabled:!xe.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:()=>{v({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{_(Yd),v(null),k("Subcategorias restauradas","success")},onCancel:()=>v(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),a.jsx(ze,{children:x&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:x.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:x.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(ze,{children:P&&qn.createPortal(a.jsxs(ue.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${P.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":P.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${P.type==="error"?"bg-white animate-pulse":P.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:P.message})]}),document.body)})]})}function u9(){const[t,e]=z.useState([]),n=()=>{try{const r=localStorage.getItem(Yn);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return z.useEffect(()=>{n();const r=s=>{s.key===Yn&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}const $v="fichaTecnica_pizzas",Zl={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},Xd=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,s=n*r;if(i<=0)return 0;const o=s/i,l=Zl[t.unit]||1;return o/l},qv={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function d9(){const[t,e]=z.useState(()=>{try{const V=localStorage.getItem($v);return V?JSON.parse(V):[qv]}catch{return[qv]}}),[n,r]=z.useState(!1);z.useEffect(()=>{(async()=>{try{const U=await Re.getPizzas();U&&U.length>0&&e(U.map(Y=>({...Y,ingredients:Array.isArray(Y.ingredients)?Y.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,s]=z.useState(null),[o,l]=z.useState(null),[u,d]=z.useState(!1),[h,m]=z.useState(!1),[p,w]=z.useState(""),[T,C]=z.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[A,b]=z.useState(null),[x,v]=z.useState(null),[P,D]=z.useState(null),[M,k]=z.useState(null),y=z.useRef(null);z.useCallback((V,U="success")=>{y.current&&clearTimeout(y.current),k({message:V,type:U}),y.current=setTimeout(()=>k(null),3500)},[]);const _=u9();z.useEffect(()=>{localStorage.setItem($v,JSON.stringify(t)),n&&Re.syncPizzas(t)},[t,n]);const E=z.useMemo(()=>t.find(V=>V.id===i)||null,[t,i]),I=(V=[])=>{if(!Array.isArray(V))return{totalCost:0,costPerPizza:0};const U=V.reduce((Y,X)=>Y+se(X),0);return{totalCost:U,costPerPizza:U}},R=V=>(Number(V)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),S=V=>{const U=Number(V)||0;return U<.01&&U>0?U.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):U.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},xe=()=>{if(!p.trim())return;const V={id:Date.now(),name:p.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(U=>[...U,V]),w(""),m(!1),s(V.id)},de=V=>{const U=t.find(Y=>Y.id===V);v({title:"Excluir Pizza",message:`A pizza "${(U==null?void 0:U.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e(Y=>Y.filter(X=>X.id!==V)),i===V&&s(null),v(null)},onCancel:()=>v(null)})},ae=V=>{const U=t.find(Y=>Y.id===V);U&&D({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:U.name,onConfirm:Y=>{Y&&Y!==U.name&&e(X=>X.map(j=>j.id===V?{...j,name:Y.trim()}:j)),D(null)},onCancel:()=>D(null)})},me=V=>{if(C(U=>({...U,name:V})),b(null),!!Array.isArray(_)&&V&&V.trim().length>0){const U=V.toLowerCase().trim(),Y=_.find(X=>!X||!X.name?!1:X.name.toLowerCase()===U);if(Y){b(Y);const X=Xd(Y),j=Zl[T.unit]||1,O=X*j;C(H=>({...H,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:Y.id}))}}},Q=V=>{C(U=>{const Y={...U,unit:V};if(A){const X=Xd(A),j=Zl[V]||1,O=X*j;Y.pricePerUnit=O.toFixed(6),Y.isSyncedFromInventory=!0}return Y})},ee=(V=!1)=>{if(!E||!T.name.trim()||!T.quantity)return;const U={id:Date.now(),name:T.name.trim(),quantity:Number(T.quantity)||0,unit:T.unit,pricePerUnit:Number(T.pricePerUnit)||0,inventoryItemId:T.inventoryItemId};e(Y=>Y.map(X=>X.id===i?{...X,ingredients:[...X.ingredients||[],U]}:X)),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null),V?setTimeout(()=>{var Y;(Y=document.getElementById("cat-ing-name-input"))==null||Y.focus()},50):d(!1)},ie=(V,U,Y)=>{E&&e(X=>X.map(j=>j.id!==i?j:{...j,ingredients:(j.ingredients||[]).map(O=>O.id!==V?O:{...O,[U]:U==="name"||U==="unit"?Y:Number(Y)||0})}))},$=V=>{E&&(e(U=>U.map(Y=>Y.id!==i?Y:{...Y,ingredients:(Y.ingredients||[]).filter(X=>X.id!==V)})),l(null))},se=V=>(Number(V.quantity)||0)*(Number(V.pricePerUnit)||0),ne=E?I(E.ingredients):{totalCost:0,costPerPizza:0};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),a.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center sm:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>m(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 rounded-t-[2.5rem] md:rounded-[2.5rem] p-8 pb-12 md:pb-8 shadow-2xl animate-slide-up ring-1 ring-zinc-900/5 dark:ring-white/10",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-8",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-800"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-zinc-900 dark:text-white tracking-tight mb-2",children:"Nova Pizza"}),a.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"text",className:"w-full px-5 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800/50 border-2 border-transparent focus:border-zinc-900 dark:focus:border-white text-zinc-900 dark:text-white text-lg font-medium text-center focus:outline-none transition-all placeholder:text-zinc-400",placeholder:"Ex: Margherita",value:p,onChange:V=>w(V.target.value),autoFocus:!0,onKeyDown:V=>V.key==="Enter"&&xe()})}),a.jsxs("div",{className:"flex gap-3 pt-4 safe-area-bottom",children:[a.jsx("button",{onClick:()=>{m(!1),w("")},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:xe,disabled:!p.trim(),className:"flex-[2] px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none shadow-xl shadow-zinc-900/10",children:"Criar"})]})]})]})]}),!i&&a.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(V=>{const U=I(V.ingredients);return a.jsxs("div",{onClick:()=>s(V.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:V.name}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[V.ingredients.length," ingrediente",V.ingredients.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:Y=>{Y.stopPropagation(),ae(V.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),a.jsx("button",{onClick:Y=>{Y.stopPropagation(),de(V.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),a.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:R(U.totalCost)})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),a.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[V.ingredients.length," itens"]})})]})]})]},V.id)}),t.length===0&&a.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),a.jsx("button",{onClick:()=>m(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),E&&a.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>s(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:E.name}),a.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[E.ingredients.length," ingrediente",E.ingredients.length!==1?"s":""," cadastrado",E.ingredients.length!==1?"s":""]})]})]}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:R(ne.totalCost)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:E.ingredients.length}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:R(ne.costPerPizza)}),a.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!u&&a.jsxs("button",{onClick:()=>d(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),u&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)}}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:a.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),a.jsx("button",{onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"relative mb-5",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:V=>{var U;V.key==="Enter"&&(V.preventDefault(),(U=document.getElementById("cat-ing-qty-input"))==null||U.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${A?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:T.name,onChange:V=>{const U=V.target.value;C(Y=>({...Y,name:U})),A&&U!==A.name&&(b(null),C(Y=>({...Y,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),me(U)},autoFocus:!0}),A&&a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),T.name.length>0&&!A&&a.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const V=_.filter(U=>U.name.toLowerCase().includes(T.name.toLowerCase())).slice(0,6);return V.length===0&&T.name.length>1?a.jsxs("div",{className:"p-5 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',T.name,'" ao Estoque primeiro']})]}):V.map((U,Y)=>a.jsxs("button",{onClick:()=>{b(U);const X=Xd(U),j=Zl[T.unit]||1,O=X*j;C(H=>({...H,name:U.name,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:U.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${Y!==V.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:U.name}),a.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[U.packageQuantity*U.packageCount," ",U.unit]})]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},U.id))})()})]}),A&&a.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:A.name}),a.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",A.packageQuantity*A.packageCount," ",A.unit,"  ",R(A.packageCount*A.pricePerUnit)]})]})]})}),!A&&a.jsx("div",{className:"space-y-4 mb-5",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 text-sm font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full pl-10 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0,00",value:T.pricePerUnit,onChange:V=>C(U=>({...U,pricePerUnit:V.target.value}))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:T.unit,onChange:V=>Q(V.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),a.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:V=>{V.key==="Enter"&&(V.preventDefault(),ee(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:T.quantity,onChange:V=>C(U=>({...U,quantity:V.target.value}))})]}),A&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:T.unit})]})]}),A&&T.quantity&&a.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[T.quantity," ",T.unit,"  ",S(T.pricePerUnit),"/",T.unit]}),a.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:R(Number(T.quantity)*Number(T.pricePerUnit))})]})]}),a.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[a.jsx("button",{onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:ee,disabled:!T.name||!T.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),E.ingredients.length>0&&a.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[a.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),a.jsx("div",{className:"col-span-1"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:E.ingredients.map(V=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:o===V.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("input",{id:`edit-ing-name-${V.id}`,autoFocus:!0,onKeyDown:U=>{var Y;U.key==="Enter"&&(U.preventDefault(),(Y=document.getElementById(`edit-ing-qty-${V.id}`))==null||Y.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:V.name,onChange:U=>ie(V.id,"name",U.target.value),onBlur:()=>{!V.name.trim()&&(!V.quantity||V.quantity===0)&&$(V.id)}})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-qty-${V.id}`,onKeyDown:U=>{var Y;U.key==="Enter"&&(U.preventDefault(),(Y=document.getElementById(`edit-ing-price-${V.id}`))==null||Y.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:V.quantity,onChange:U=>ie(V.id,"quantity",U.target.value),onBlur:()=>{!V.name.trim()&&(!V.quantity||V.quantity===0)&&$(V.id)}})}),a.jsx("div",{className:"col-span-1",children:a.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:V.unit,onChange:U=>ie(V.id,"unit",U.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-price-${V.id}`,onKeyDown:U=>{U.key==="Enter"&&(U.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:V.pricePerUnit,onChange:U=>ie(V.id,"pricePerUnit",U.target.value)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:R(se(V))})}),a.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>$(V.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:V.name})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:V.quantity})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:V.unit})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(V.pricePerUnit)||0)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:R(se(V))})}),a.jsx("div",{className:"col-span-1 flex justify-end",children:a.jsx("button",{onClick:()=>l(V.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},V.id))}),a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:R(ne.totalCost)})}),a.jsx("div",{className:"col-span-1"})]})]}),E.ingredients.length>0&&a.jsxs("div",{className:"md:hidden space-y-4",children:[E.ingredients.map(V=>a.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${o===V.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:o===V.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>$(V.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:V.name,onChange:U=>ie(V.id,"name",U.target.value),onBlur:()=>{!V.name.trim()&&(!V.quantity||V.quantity===0)&&$(V.id)}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:V.quantity,onChange:U=>ie(V.id,"quantity",U.target.value),onBlur:()=>{!V.name.trim()&&(!V.quantity||V.quantity===0)&&$(V.id)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:V.unit,onChange:U=>ie(V.id,"unit",U.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:V.pricePerUnit,onChange:U=>ie(V.id,"pricePerUnit",U.target.value)})})]})]}):a.jsxs("div",{onClick:()=>l(V.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:V.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[V.quantity," ",V.unit]}),a.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(V.pricePerUnit)||0),"/",V.unit]})]})]}),a.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:U=>{U.stopPropagation(),l(V.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:R(se(V))})]})]})},V.id)),a.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),a.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:R(ne.totalCost)})]})})]}),E.ingredients.length===0&&!u&&a.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),a.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),a.jsx(ze,{children:x&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:x.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:x.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(ze,{children:P&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:P.onCancel}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:P.title}),a.jsx("input",{autoFocus:!0,defaultValue:P.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:P.placeholder,onKeyDown:V=>{V.key==="Enter"&&P.onConfirm(V.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:P.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:V=>{const U=V.target.closest(".relative").querySelector("input");P.onConfirm(U.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),a.jsx(ze,{children:M&&qn.createPortal(a.jsxs(ue.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${M.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":M.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${M.type==="error"?"bg-white animate-pulse":M.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:M.message})]}),document.body)})]})}function Gn({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:s="0",pattern:o,inputMode:l}){const u=Number(e)||0,d=r==="g"&&Math.abs(u)>=1e3,h=d?"kg":r,m=()=>d?Math.round(u/1e3).toString():Math.round(u).toString(),[p,w]=z.useState(""),[T,C]=z.useState(!1);z.useEffect(()=>{T||w(e==null?"":m())},[e,T,d]);const A=v=>{const P=v.target.value;w(P);const D=parseFloat(P)||0;n==null||n(D)},b=()=>C(!0),x=()=>{C(!1),e!=null&&w(m())};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:o,value:p,onChange:A,onFocus:b,onBlur:x,placeholder:s}),h&&a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function Cs({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:s,step:o=.1,decimals:l=1,maxPct:u=null}){const d=Math.max(i||0,1),h=k=>d*(Number(k)||0)/100,m=k=>(Number(k)||0)/d*100,p=h(e),w=r==="grams"&&Math.abs(p)>=1e3,T=r==="grams"?w?"kg":"g":"%",C=()=>{const k=Number(e)||0;if(r==="grams"){const y=h(k);return w?y/1e3:y<10?y:Math.round(y)}return k},[A,b]=z.useState(()=>{if(e===""||e===null||e===void 0)return"";const k=C();return w?k.toFixed(2):k.toString()}),[x,v]=z.useState(!1);z.useEffect(()=>{if(!x)if(e===""||e===null||e===void 0)b("");else{const k=C();if(r==="grams"){const y=h(Number(e)||0);b(w?k.toFixed(2):y<10?y.toFixed(2):Math.round(y).toString())}else b(Number(k).toFixed(l))}},[e,r,i,x,w]);const P=k=>{const y=k.target.value;if(b(y),y===""){n==null||n("");return}let _=parseFloat(y);if(!Number.isNaN(_)){_=Math.max(0,_),r==="pct"&&u!==null&&_>u&&(_=u,b(_.toString()));let E=_;r==="grams"&&w&&(E=_*1e3);const I=r==="grams"?m(E):_;n==null||n(I)}},D=()=>{v(!0)},M=()=>{if(v(!1),A===""||A===null){b("");return}const k=parseFloat(A);if(!Number.isNaN(k))if(r==="grams"){const y=h(Number(e)||0);b(w||y<10?k.toFixed(2):Math.round(k).toString())}else b(k.toFixed(l))};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:s,step:r==="grams"?1:o,value:A,onChange:P,onFocus:D,onBlur:M,placeholder:"0"}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:T})]})]})}function h9({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","ADY","IDY","CY"];function l(u,d,h){r==null||r({...n,[u]:{...n[u],[d]:h}})}return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipos de Fermentos"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(u=>a.jsxs("label",{className:"button "+(t===u?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:u,checked:t===u,onChange:()=>e==null?void 0:e(u)}),u]},u))}),t==="ADY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(Cs,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:u=>l("ADY","yeastPct",u),mode:i,flourWeight:s,name:"ADY-yeast",decimals:3})}),t==="IDY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(Cs,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:u=>l("IDY","yeastPct",u),mode:i,flourWeight:s,name:"IDY-yeast",decimals:3})}),t==="CY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(Cs,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:u=>l("CY","yeastPct",u),mode:i,flourWeight:s,name:"CY-yeast",decimals:3})}),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function f9({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","Poolish","Biga","Levain"];function l(p,w,T){r==null||r({...n,[p]:{...n[p],[w]:Number.isNaN(T)?"":T}})}const u=i==="grams"?"g":"%",d=p=>s*(Number(p==null?void 0:p.pct)||0)/100,h=(p,w=0,T="")=>{let C=Number(p);if(!Number.isFinite(C))return"";let A=T,b=w;T==="g"&&Math.abs(C)>=1e3&&(C=C/1e3,A="kg",b=2);const x=C.toLocaleString("pt-BR",{minimumFractionDigits:b,maximumFractionDigits:b});return A?`${x} ${A}`:x},m=p=>{const w=n[p];if(!w)return null;const T=d(w),C=T*(Number(w.hydration)||0)/100;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[a.jsx(Cs,{label:`Farinha Pref. (${u})`,value:w.pct,onChange:A=>l(p,"pct",A),mode:i,flourWeight:s,name:`${p}-pct`}),a.jsx(Cs,{label:`gua (${u})`,value:w.hydration,onChange:A=>l(p,"hydration",Math.min(200,Math.max(0,A))),mode:i,flourWeight:T>0?T:s,name:`${p}-hydration`}),typeof w.yeastPct<"u"&&a.jsx(Cs,{label:`Fermento (${u})`,value:w.yeastPct,onChange:A=>l(p,"yeastPct",A),mode:i,flourWeight:T>0?T:s,name:`${p}-yeast`,decimals:2}),typeof w.inoculationPct<"u"&&a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:w.inoculationPct,onChange:A=>l(p,"inoculationPct",parseFloat(A.target.value)),step:1}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Tempo"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:w.time_h,onChange:A=>l(p,"time_h",parseFloat(A.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Temp."}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:w.temp_C,onChange:A=>l(p,"temp_C",parseFloat(A.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&a.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(T,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(C,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(T+C,0,"g")})]})]})]})]})};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipo de Fermentao"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(p=>a.jsxs("label",{className:"button "+(t===p?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:p,checked:t===p,onChange:()=>e==null?void 0:e(p)}),p]},p))}),t==="Poolish"&&m("poolish"),t==="Biga"&&m("biga"),t==="Levain"&&m("levain"),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function m9(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function To(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function p9({inputMode:t,setInputMode:e}){const[n,r]=z.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,s]=z.useState({}),o=z.useRef(null),[l,u]=z.useState("synced"),[d,h]=z.useState(null),[m,p]=z.useState(null),[w,T]=z.useState(null),C=z.useRef(null),A=z.useCallback((j,O="success")=>{C.current&&clearTimeout(C.current),T({message:j,type:O}),C.current=setTimeout(()=>T(null),3500)},[]),[b,x]=z.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});z.useEffect(()=>{(async()=>{const O=m9();s(O);try{const H=await Re.getAllRecipes();if(Object.keys(H).length>0){const re={...O,...H};s(re),To(re)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function v(j,O){r(H=>({...H,[j]:typeof O=="number"&&Number.isNaN(O)?"":O}))}function P(j){r(O=>({...O,preferment:j}))}function D(j){r(O=>({...O,yeastType:j}))}function M(j,O){t==="grams"?x(H=>({...H,[j]:Number(O)||0})):v(j,O)}function k(j){x(O=>({...O,flour:Number(j)||0}))}const y=z.useMemo(()=>{var re;const j=L=>Number(L)||0,O=((re=n.yeastType)==null?void 0:re[n.yeastSelection])||{},H=j(O.yeastPct);return 100+j(n.water)+j(n.sugar)+j(n.salt)+j(n.oliveOil)+j(n.oil)+j(n.milk)+j(n.butter)+j(n.diastatic)+H},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),_=z.useMemo(()=>{const j=Number(n.doughBalls)||0,O=Number(n.ballWeight)||0;return j*O},[n.doughBalls,n.ballWeight]),E=z.useMemo(()=>{const j=Number(_)||0,O=Number(y)||100;return O<=0?0:j*100/O},[_,y]),I=z.useMemo(()=>{var L;const j=E,O=q=>j*(Number(q)||0)/100,H=((L=n.yeastType)==null?void 0:L[n.yeastSelection])||{},re=Number(H.yeastPct)||0;return{flour:j,water:O(n.water),sugar:O(n.sugar),salt:O(n.salt),oliveOil:O(n.oliveOil),oil:O(n.oil),milk:O(n.milk),butter:O(n.butter),diastatic:O(n.diastatic),yeast:j*re/100,total:j+O(n.water)+O(n.sugar)+O(n.salt)+O(n.oliveOil)+O(n.oil)+O(n.milk)+O(n.butter)+O(n.diastatic)+j*re/100}},[E,n]),R=z.useMemo(()=>{if(t==="grams"){const j=(Number(b.flour)||0)+(Number(b.water)||0)+(Number(b.sugar)||0)+(Number(b.salt)||0)+(Number(b.oliveOil)||0)+(Number(b.oil)||0)+(Number(b.milk)||0)+(Number(b.butter)||0)+(Number(b.diastatic)||0)+(Number(b.yeast)||0);return{flour:b.flour,water:b.water,sugar:b.sugar,salt:b.salt,oliveOil:b.oliveOil,oil:b.oil,milk:b.milk,butter:b.butter,diastatic:b.diastatic,yeast:b.yeast,total:j}}return I},[t,b,I]),S=z.useMemo(()=>{const j=Number(R.flour)||0;if(j<=0)return 0;const O=Number(R.water)||0,H=Number(R.milk)||0;return(O+H)/j*100},[R.flour,R.water,R.milk]),xe=String(n.prefermentType||"").toLowerCase(),de=n.preferment&&n.preferment[xe]?n.preferment[xe]:null,ae=de?E*(Number(de.pct)||0)/100:0,me=ae*(Number(de==null?void 0:de.hydration)||0)/100,Q=ae+me;function ee(){p({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:j=>{if(!j)return;const O={...i,[j]:n};s(O),To(O),Re.saveRecipe(j,n).then(H=>{H&&u("synced")}),p(null)},onCancel:()=>p(null)})}function ie(j){const O=i[j];O&&r(O)}function $(j){h({title:"Excluir Receita",message:`A receita "${j}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const O={...i};delete O[j],s(O),To(O),Re.deleteRecipe(j),h(null)},onCancel:()=>h(null)})}function se(j){p({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:j,onConfirm:O=>{if(!O||O===j)return;const H={...i};H[O]=H[j];const re=H[j];delete H[j],s(H),To(H),Re.deleteRecipe(j),Re.saveRecipe(O,re),p(null)},onCancel:()=>p(null)})}function ne(){const j=JSON.stringify({inputs:n,recipes:i},null,2),O=new Blob([j],{type:"application/json"}),H=URL.createObjectURL(O),re=document.createElement("a");re.href=H,re.download="padoca_pizza_recipes.json",re.click(),URL.revokeObjectURL(H)}function V(j){var re;const O=(re=j.target.files)==null?void 0:re[0];if(!O)return;const H=new FileReader;H.onload=L=>{try{const q=JSON.parse(String(L.target.result||"{}"));q.inputs&&r(q.inputs),q.recipes&&(s(q.recipes),To(q.recipes)),A("Importao concluda!","success")}catch{A("Arquivo invlido.","error")}},H.readAsText(O),j.target.value=""}function U(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function Y(j,O=0,H=""){let re=Number(j);if(!Number.isFinite(re))return"";let L=H,q=O;H==="g"&&Math.abs(re)>=1e3&&(re=re/1e3,L="kg",q=2);const W=re.toLocaleString("pt-BR",{minimumFractionDigits:q,maximumFractionDigits:q});return L?`${W} ${L}`:W}function X(j){return(Number(j)||0)>.001}return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:Y(R.total,0,"g")})]})]}),a.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:Y(_,0,"g")})})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(R.total)||0)-(Number(_)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:Y((Number(R.total)||0)-(Number(_)||0),1,"g")})})]})]})]})}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:j=>{const O=parseFloat(j.target.value);v("doughBalls",Math.round(O))}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:j=>{const O=parseFloat(j.target.value);if(t==="grams"){const re=E*y/100;let L=O>0?Math.round(re/O):1;L<1&&(L=1);const q=Math.round(re/L);r(W=>({...W,ballWeight:q,doughBalls:L}))}else v("ballWeight",Math.round(O))}})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),a.jsx(f9,{value:n.prefermentType,onChange:j=>v("prefermentType",j),data:n.preferment,onDataChange:P,inputMode:t,flourWeight:E})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&a.jsx(Gn,{label:"Farinha Total",value:b.flour,onChange:k,unit:"g"}),a.jsx(Gn,{label:"gua",value:t==="grams"?b.water:n.water,onChange:j=>M("water",j),unit:t==="grams"?"g":"%"}),a.jsx(Gn,{label:"Sal",value:t==="grams"?b.salt:n.salt,onChange:j=>M("salt",j),unit:t==="grams"?"g":"%"}),a.jsx(Gn,{label:"Azeite",value:t==="grams"?b.oliveOil:n.oliveOil,onChange:j=>M("oliveOil",j),unit:t==="grams"?"g":"%"}),a.jsx(Gn,{label:"Acar",value:t==="grams"?b.sugar:n.sugar,onChange:j=>M("sugar",j),unit:t==="grams"?"g":"%"}),a.jsx(Gn,{label:"leo",value:t==="grams"?b.oil:n.oil,onChange:j=>M("oil",j),unit:t==="grams"?"g":"%"}),a.jsx(Gn,{label:"Leite",value:t==="grams"?b.milk:n.milk,onChange:j=>M("milk",j),unit:t==="grams"?"g":"%"}),a.jsx(Gn,{label:"Manteiga",value:t==="grams"?b.butter:n.butter,onChange:j=>M("butter",j),unit:t==="grams"?"g":"%"}),a.jsx(Gn,{label:"Malte",value:t==="grams"?b.diastatic:n.diastatic,onChange:j=>M("diastatic",j),unit:t==="grams"?"g":"%"})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),a.jsx(h9,{value:n.yeastSelection,onChange:j=>v("yeastSelection",j),data:n.yeastType,onDataChange:D,inputMode:t,flourWeight:E})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:j=>v("RT_h",parseFloat(j.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:j=>v("RT_C",parseFloat(j.target.value))})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:j=>v("CT_h",parseFloat(j.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:j=>v("CT_C",parseFloat(j.target.value))})]})]})]}),n.prefermentType!=="None"&&de&&a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:Y(de.pct,1,"%")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(ae,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(me,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(Q,0,"g")})]})]}),(typeof de.yeastPct<"u"||typeof de.inoculationPct<"u"||typeof de.time_h<"u"||typeof de.temp_C<"u")&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof de.yeastPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:Y(ae*(Number(de.yeastPct)||0)/100,2,"g")})]}),typeof de.inoculationPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:Y(de.inoculationPct,1,"%")})]}),typeof de.time_h<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:Y(de.time_h,0,"h")})]}),typeof de.temp_C<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:Y(de.temp_C,0,"C")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[X(R.flour)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.flour-ae,0,"g")})]}),X(R.water)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.water-me,0,"g")})]}),n.prefermentType!=="None"&&de&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(Q,0,"g")})]}),X(R.salt)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.salt,1,"g")})]}),X(R.sugar)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.sugar,1,"g")})]}),X(R.oliveOil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.oliveOil,1,"g")})]}),X(R.oil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.oil,1,"g")})]}),X(R.milk)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.milk,1,"g")})]}),X(R.butter)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.butter,1,"g")})]}),X(R.diastatic)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.diastatic,1,"g")})]}),X(R.yeast)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.yeast,2,"g")})]})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:Y(R.total,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:Y(S,1,"%")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx("button",{onClick:ee,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),a.jsx("button",{onClick:()=>{var j;return(j=o.current)==null?void 0:j.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),a.jsx("button",{onClick:ne,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),a.jsx("button",{onClick:U,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),a.jsx("input",{ref:o,type:"file",accept:"application/json",className:"hidden",onChange:V})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?a.jsxs("div",{className:"text-center py-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):a.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([j])=>a.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[a.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:j}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>ie(j),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),a.jsx("button",{onClick:()=>se(j),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),a.jsx("button",{onClick:()=>$(j),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},j))})]}),a.jsx(ze,{children:d&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:d.onCancel}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${d.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:d.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:d.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:d.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:d.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${d.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(ze,{children:m&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:m.onCancel}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:m.title}),a.jsx("input",{autoFocus:!0,defaultValue:m.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:m.placeholder,onKeyDown:j=>{j.key==="Enter"&&m.onConfirm(j.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:m.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:j=>{const O=j.target.closest(".relative").querySelector("input");m.onConfirm(O.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),a.jsx(ze,{children:w&&qn.createPortal(a.jsxs(ue.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${w.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":w.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${w.type==="error"?"bg-white animate-pulse":w.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:w.message})]}),document.body)})]})}const g9=10*1024*1024,x9=15e3,y9=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>g9){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const o=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},x9),l=new Image;l.onload=()=>{clearTimeout(o);try{const u=document.createElement("canvas");let d=l.width,h=l.height;d>e&&(h=e/d*h,d=e),u.width=d,u.height=h;const m=u.getContext("2d");if(!m){i(new Error("Falha ao criar contexto de imagem."));return}m.drawImage(l,0,0,d,h);const p=u.toDataURL("image/jpeg",n);if(!p||p==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(p)}catch(u){i(new Error("Erro ao processar imagem: "+u.message))}},l.onerror=()=>{clearTimeout(o),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t}),v9=()=>{const[t,e]=z.useState(null),n=z.useRef(null),r=z.useCallback((o,l="error")=>{n.current&&clearTimeout(n.current),e({message:o,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),i=z.useMemo(()=>({error:o=>r(o,"error"),success:o=>r(o,"success"),info:o=>r(o,"info")}),[r]),s=t?qn.createPortal(a.jsxs(ue.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:i,ToastUI:s}},We={Camera:()=>a.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},w9=({src:t,onClose:e,layoutId:n})=>qn.createPortal(a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[a.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:a.jsx(We.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),a.jsx(ue.img,{layoutId:n,src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:r=>r.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body),b9=({id:t,children:e})=>{const n=cp();return a.jsx(mu,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},k9=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,s]=z.useState(""),[o,l]=z.useState(null),[u,d]=z.useState(""),[h,m]=z.useState(null),[p,w]=z.useState(null),T=["#E63946","#F4A261","#E9C46A","#2A9D8F","#457B9D","#264653","#6D597A","#B5838D","#7F9183","#3D405B"],C=P=>typeof P=="string"?{name:P,color:"#007AFF"}:{name:P.name||"Sem nome",color:P.color||"#007AFF"},A=()=>{const P=i.trim();!P||t.some(M=>Dt(M)===P)||(n([...t,{name:P,color:"#007AFF"}]),s(""))},b=P=>{const D=u.trim(),M=Dt(P);if(!D||D===M){l(null);return}if(t.some(y=>Dt(y)===D)){l(null);return}r(M,D),n(t.map(y=>{const _=C(y);return _.name===M?{..._,name:D}:_})),l(null)},x=(P,D)=>{const M=Dt(P);n(t.map(k=>{const y=C(k);return y.name===M?{...y,color:D}:y})),w(null)},v=P=>{const D=Dt(P);n(t.filter(M=>Dt(M)!==D)),r(D,"Outros"),m(null)};return a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white/5 dark:bg-white/5 backdrop-blur-lg",onClick:e}),a.jsxs(ue.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:400,damping:35},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl overflow-hidden max-h-[90vh] md:max-h-[85vh] flex flex-col safe-area-bottom",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),a.jsx("p",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mt-1",children:"Organize sua biblioteca de receitas"})]}),a.jsx("button",{onClick:e,className:"p-3 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation z-[60] relative shrink-0",children:a.jsx(We.Close,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"mb-8 shrink-0",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:i,onChange:P=>s(P.target.value),onKeyDown:P=>P.key==="Enter"&&A(),className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-bold focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400/50",placeholder:"Nome da categoria"}),a.jsx("button",{onClick:A,disabled:!i.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-indigo-500/20",children:a.jsx(We.Plus,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mx-2 px-2 space-y-3",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2 sticky top-0 bg-white dark:bg-zinc-900 py-2 z-10",children:"Suas Categorias"}),t.map((P,D)=>{const{name:M,color:k}=C(P),y=M+D;return a.jsxs("div",{className:"group flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/10 border border-indigo-100 dark:border-indigo-800/20 hover:border-indigo-200 dark:hover:border-indigo-700 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("button",{onClick:()=>w(p===y?null:y),className:"w-4 h-4 rounded-full shrink-0 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-zinc-900 ring-transparent hover:ring-indigo-300 transition-all shadow-sm",style:{backgroundColor:k}}),a.jsx(ze,{children:p===y&&a.jsxs(ue.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"fixed inset-x-4 bottom-4 md:absolute md:inset-auto md:left-0 md:top-full md:mt-2 z-[70] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:[a.jsx("div",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3 text-center md:text-left",children:"Escolha uma cor"}),a.jsx("div",{className:"grid grid-cols-5 gap-3",children:T.map(_=>a.jsx("button",{onClick:()=>x(P,_),className:`w-10 h-10 md:w-7 md:h-7 rounded-full transition-transform hover:scale-110 active:scale-95 ${k===_?"ring-2 ring-offset-2 ring-zinc-400 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:_}},_))}),a.jsx("button",{onClick:()=>w(null),className:"mt-4 w-full py-3 bg-zinc-100 dark:bg-zinc-700 rounded-xl text-xs font-bold text-zinc-600 dark:text-zinc-300 uppercase tracking-wider md:hidden",children:"Fechar"})]})}),a.jsx("div",{className:"flex-1 min-w-0",children:o===y?a.jsx("input",{autoFocus:!0,value:u,onChange:_=>d(_.target.value),onBlur:()=>b(P),onKeyDown:_=>{_.key==="Enter"&&b(P),_.key==="Escape"&&l(null)},className:"w-full bg-transparent outline-none text-sm font-bold text-zinc-900 dark:text-white"}):a.jsx("span",{onClick:()=>{l(y),d(M)},className:"text-sm font-medium text-indigo-900 dark:text-indigo-200 cursor-text truncate block select-none",children:M})})]}),a.jsx("button",{onClick:()=>m(P),className:"p-3 rounded-lg text-indigo-300 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:a.jsx(We.Trash,{className:"w-4 h-4"})})]},y)})]}),a.jsx(ze,{children:h&&a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white/90 dark:bg-zinc-900/95 backdrop-blur-md z-50 flex items-center justify-center p-6",children:a.jsxs("div",{className:"text-center w-full",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4 shadow-sm",children:a.jsx(We.Trash,{className:"w-8 h-8"})}),a.jsx("h4",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),a.jsxs("p",{className:"text-sm text-zinc-500 mb-8 leading-relaxed",children:["A categoria ",a.jsxs("span",{className:"font-bold text-zinc-800 dark:text-zinc-200",children:['"',Dt(h),'"']})," ser removida.",a.jsx("br",{}),'As receitas sero movidas para "Outros".']}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx("button",{onClick:()=>m(null),className:"py-3 text-xs font-bold uppercase tracking-wider text-zinc-500 bg-zinc-100 dark:bg-zinc-800 rounded-xl hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>v(h),className:"py-3 text-xs font-bold uppercase tracking-wider text-white bg-rose-500 rounded-xl hover:bg-rose-600 shadow-lg shadow-rose-500/20 transition-all active:scale-95",children:"Excluir"})]})]})})})]})]})},_9=mn.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:i})=>{const s=cp(),[o,l]=z.useState(!1);return a.jsx(mu,{value:t,dragListener:i,dragControls:s,className:`group relative mb-2 transition-all duration-300 ease-out ${i?"":"cursor-pointer"}`,onClick:()=>!i&&l(!o),children:a.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${i?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":o?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[i&&a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:u=>s.start(u),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!i&&a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${o?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:o&&a.jsx(We.Check,{className:"w-3 h-3 text-white"})}),i?a.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:u=>e({...t,name:u.target.value}),onKeyDown:u=>{if(u.key==="Enter"){u.preventDefault();const d=document.getElementById(`ing-qty-${t.id}`);d&&d.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):a.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${o?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),a.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:a.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:u=>{const d=u.target.value;(d===""||/^[0-9.,]*$/.test(d))&&e({...t,quantity:d})},onKeyDown:u=>{u.key==="Enter"&&(u.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),a.jsx("select",{value:t.unit,onChange:u=>e({...t,unit:u.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(u=>a.jsx("option",{value:u,children:u},u))})]}):a.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${o?"opacity-50":""}`,children:[a.jsx("span",{children:t.quantity}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),i&&a.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),N9=mn.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i,isEditing:s})=>{const o=cp(),[l,u]=z.useState(!1);return a.jsx(mu,{value:t,dragListener:s,dragControls:o,className:`group relative mb-2 transition-all duration-300 ease-out ${s?"":"cursor-pointer"}`,onClick:()=>!s&&u(!l),children:a.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${s?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[s&&a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:d=>o.start(d),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),a.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!s&&l?a.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:a.jsx(We.Check,{className:"w-3 h-3 text-white"})}):a.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),s?a.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:d=>n({...t,text:d.target.value}),onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:d=>{d.target.style.height="auto",d.target.style.height=d.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):a.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),s&&a.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),Dt=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",Wv=(t,e)=>{const n=t.find(r=>Dt(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function T9(){const{toast:t,ToastUI:e}=v9(),[n,r]=z.useState([]),[i,s]=z.useState(["Tradicionais","Especiais","Veganas","Doces"]),[o,l]=z.useState(null),[u,d]=z.useState(!1),[h,m]=z.useState("Todas"),[p,w]=z.useState(!0),[T,C]=z.useState(null),[A,b]=z.useState(null),[x,v]=z.useState(null),[P,D]=z.useState(!1),[M,k]=z.useState(!1),[y,_]=z.useState(!1),[E,I]=z.useState(!1),R=z.useRef(null),S=z.useRef({}),xe=z.useRef({});z.useEffect(()=>{let $=!0;return(async()=>{try{const ne=await Re.getRecipesV3();if(!$)return;Array.isArray(ne)&&ne.length>0?r(ne.map(V=>{let U=Array.isArray(V.sections)?V.sections:[];return U.length===0&&(Array.isArray(V.ingredientSections)||Array.isArray(V.instructionSections))&&(U=[...Array.isArray(V.ingredientSections)?V.ingredientSections.map(Y=>({...Y,type:"ingredients"})):[],...Array.isArray(V.instructionSections)?V.instructionSections.map(Y=>({...Y,type:"instructions"})):[]]),U.length>0&&(U=U.map(Y=>({...Y,items:Array.isArray(Y.items)?Y.items.filter(X=>{var j,O,H;return Y.type==="ingredients"?((j=X.name)==null?void 0:j.trim())||((O=X.quantity)==null?void 0:O.trim()):(H=X.text)==null?void 0:H.trim()}):[]}))),{id:String(V.id),name:V.name||"Sem nome",category:V.category||"Outros",prepTime:V.prepTime??0,cookTime:V.cookTime??0,temperature:V.temperature??180,image:V.image||null,sections:U,createdAt:V.createdAt||new Date().toISOString(),updatedAt:V.updatedAt||new Date().toISOString()}})):r([])}catch{$&&r([])}try{const ne=await Re.getRecipeCategories();$&&ne&&Array.isArray(ne)&&s(ne)}catch{}$&&(w(!1),C(null))})(),()=>{$=!1}},[]),z.useEffect(()=>{if(p)return;const $=setTimeout(()=>{Re.syncRecipeCategories(i)},1e3);return()=>clearTimeout($)},[i,p]);const de=($,se)=>{const ne=String($);k(!0),_(!1),r(V=>V.map(U=>String(U.id)===ne?{...U,...se,updatedAt:new Date().toISOString()}:U)),S.current[ne]={...S.current[ne]||{},...se,updatedAt:new Date().toISOString()},xe.current[ne]&&clearTimeout(xe.current[ne]),xe.current[ne]=setTimeout(async()=>{const V=S.current[ne];if(!V){k(!1);return}delete S.current[ne],delete xe.current[ne];try{await Re.syncRecipeV3(ne,V,!0)||_(!0)}catch{_(!0)}finally{Object.keys(S.current).length===0&&k(!1)}},1200)},ae=async $=>{const se=$.target.files[0];if(se){if(!o){t.error("Nenhuma receita selecionada.");return}I(!0);try{const ne=new FileReader;ne.onload=async V=>{try{const U=await y9(V.target.result);de(o,{image:U})}catch{t.error("Falha ao processar imagem. Tente uma foto menor.")}finally{I(!1)}},ne.onerror=()=>{t.error("Erro ao ler o arquivo."),I(!1)},ne.readAsDataURL(se)}catch{t.error("Erro inesperado ao carregar imagem."),I(!1)}}},me=async $=>{const se=String($);v(null),r(ne=>ne.filter(V=>String(V.id)!==se)),String(o)===se&&l(null);try{if(!await Re.deleteRecipeV3(se))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},Q=z.useMemo(()=>n.filter($=>h==="Todas"||$.category===h),[n,h]),ee=z.useMemo(()=>n.find($=>String($.id)===String(o)),[n,o]),ie=z.useCallback(()=>{if(ee&&ee.sections){const $=ee.sections.map(se=>se.type==="ingredients"?{...se,items:(se.items||[]).filter(ne=>ne.name.trim()||ne.quantity.trim())}:se.type==="instructions"?{...se,items:(se.items||[]).filter(ne=>ne.text.trim())}:se);de(o,{sections:$})}d(!1)},[ee,o,de]);return p?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):T?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:a.jsxs("div",{className:"text-center max-w-sm",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:T}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx(ze,{children:!o&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${y?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":M?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${y?"bg-rose-500":M?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:y?"Erro de Sync":M?"Sincronizando":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),a.jsxs("button",{onClick:()=>{const $=String(Date.now()),se={id:$,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([se,...n]),l($),d(!0),Re.syncRecipeV3($,se)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx(We.Plus,{}),"Criar Nova Receita"]})]}),a.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:a.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...i].map($=>a.jsx("button",{onClick:()=>m(Dt($)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===Dt($)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:Dt($)},Dt($))),a.jsx("button",{onClick:()=>D(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[Q.map($=>a.jsxs(ue.div,{layoutId:`card-${$.id}`,onClick:()=>{l($.id),d(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[a.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[$.image?a.jsx(ue.img,{layoutId:`img-${$.id}`,src:$.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):a.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),a.jsx("div",{className:"absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/5 via-transparent to-transparent animate-[spin_20s_linear_infinite] opacity-60"}),a.jsx("div",{className:"absolute bottom-[-50%] right-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/5 via-transparent to-transparent animate-[spin_25s_linear_infinite_reverse] opacity-60"}),a.jsx(ue.div,{animate:{opacity:[.2,.5,.2]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent"}),a.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:a.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:a.jsx(We.Camera,{})})})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),a.jsx("button",{onClick:se=>{se.stopPropagation(),v({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${$.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{me($.id)},onCancel:()=>v(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:a.jsx(We.Trash,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"px-2 pb-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${Wv(i,$.category)}15`,color:Wv(i,$.category)},children:$.category}),a.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(We.Clock,{}),$.prepTime+$.cookTime,"m"]}),$.temperature>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),$.temperature,""]})]})]})]}),a.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:$.name}),a.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[($.sections||[]).filter(se=>se.type==="ingredients").reduce((se,ne)=>{var V;return se+(((V=ne.items)==null?void 0:V.length)||0)},0)," ingredientes"]})]})]},$.id)),Q.length===0&&a.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),a.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:a.jsx(We.Book,{})})]}),a.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),a.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",a.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&qn.createPortal(a.jsx(ze,{children:o&&ee&&a.jsx(ue.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:R,children:ee?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[a.jsx("div",{className:"flex-1 flex justify-start",children:a.jsx("button",{onClick:()=>{const $=(ee.sections||[]).map(se=>({...se,items:se.items.filter(ne=>{var V,U,Y;return se.type==="ingredients"?((V=ne.name)==null?void 0:V.trim())||((U=ne.quantity)==null?void 0:U.trim()):(Y=ne.text)==null?void 0:Y.trim()})}));de(o,{sections:$}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:a.jsx(We.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),a.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${y?"text-rose-500":M?"text-zinc-400":"text-zinc-300"}`,children:y?"Falha":M?"Sincronizando...":"Salvo"}),a.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>u?ie():d(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${u?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:u?"Concludo":"Editar"}),a.jsx("button",{onClick:()=>{v({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{me(o)},onCancel:()=>v(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:a.jsx(We.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[a.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[a.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:ee.image?a.jsxs(a.Fragment,{children:[a.jsx(ue.img,{layoutId:`img-${o}`,src:ee.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>b(ee.image)}),a.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:ae,disabled:E}),E?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(We.Camera,{className:"w-5 h-5"})]})]}):a.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:ae}),a.jsx(We.Camera,{}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),a.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map($=>a.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:$.label}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("input",{value:ee[$.val],onChange:se=>de(o,{[$.val]:se.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),$.unit&&a.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:$.unit})]})]},$.label))})]}),a.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[a.jsxs("div",{className:"space-y-4 md:space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("select",{value:ee.category,onChange:$=>de(o,{category:$.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:i.map($=>a.jsx("option",{value:Dt($),children:Dt($)},Dt($)))})}),a.jsx("textarea",{value:ee.name,onChange:$=>de(o,{name:$.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:$=>{$.target.style.height="auto",$.target.style.height=$.target.scrollHeight+"px"}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[a.jsxs("button",{disabled:!u,onClick:()=>de(o,{sections:[...ee.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${u?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),a.jsxs("button",{disabled:!u,onClick:()=>de(o,{sections:[...ee.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${u?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),a.jsx(fu,{axis:"y",values:ee.sections||[],onReorder:$=>de(o,{sections:$}),className:"space-y-6",children:(ee.sections||[]).map($=>a.jsx(b9,{id:$,children:se=>a.jsx(E9,{section:$,onUpdate:ne=>de(o,{sections:ee.sections.map(V=>V.id===$.id?ne:V)}),onDelete:()=>de(o,{sections:ee.sections.filter(ne=>ne.id!==$.id)}),dragControls:se,isEditing:u})},$.id))}),a.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:a.jsx("button",{onClick:()=>v({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{me(o)},onCancel:()=>v(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),P&&a.jsx(k9,{categories:i,onClose:()=>D(!1),onUpdate:s,onRenameCategory:($,se)=>{n.filter(ne=>ne.category===$).forEach(ne=>{de(ne.id,{category:se})})}},"recipe-cat-modal"),a.jsx(ze,{children:A&&a.jsx(w9,{src:A,onClose:()=>b(null),layoutId:`img-${o}`})}),typeof document<"u"&&qn.createPortal(a.jsx(ze,{mode:"wait",children:x&&a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx(We.Trash,{})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:x.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:x.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),e]})}function E9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){return t.type==="ingredients"?a.jsx(C9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):t.type==="instructions"?a.jsx(j9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):null}function C9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=mn.useRef(null),o=mn.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,u={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],u]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const d=document.getElementById(`ing-name-${l}`);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.focus())})})},[t,e]);return a.jsxs("div",{ref:s,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:a.jsx(We.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),i?a.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):a.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(We.Trash,{})})]}),a.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:a.jsx(fu,{axis:"y",values:t.items,onReorder:l=>i&&e({...t,items:l}),children:t.items.map(l=>a.jsx(_9,{item:l,onUpdate:u=>e({...t,items:t.items.map(d=>d.id===l.id?u:d)}),onDelete:()=>e({...t,items:t.items.filter(u=>u.id!==l.id)}),onNext:()=>{l.name.trim()&&o()},isEditing:i},l.id))})}),i&&a.jsxs("button",{type:"button",onClick:o,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[a.jsx(We.Plus,{})," Adicionar Ingrediente"]})]})}function j9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=mn.useCallback(()=>{const o=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:o,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const u=document.getElementById(`instr-text-${o}`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.focus())})})},[t,e]);return a.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:o=>r.start(o),children:a.jsx(We.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),i?a.jsx("input",{value:t.title,onChange:o=>e({...t,title:o.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):a.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(We.Trash,{})})]}),a.jsx(fu,{axis:"y",values:t.items,onReorder:o=>i&&e({...t,items:o}),className:"space-y-3",children:t.items.map((o,l)=>a.jsx(N9,{item:o,index:l,onUpdate:u=>e({...t,items:t.items.map(d=>d.id===o.id?u:d)}),onDelete:()=>e({...t,items:t.items.filter(u=>u.id!==o.id)}),onNext:()=>{o.text.trim()&&s()},isEditing:i},o.id))}),i&&a.jsxs("button",{type:"button",onClick:s,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[a.jsx(We.Plus,{})," Adicionar Passo"]})]})}const Hv="padoca_kanban_pro_max",Il={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},S9=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],Kv={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},t0=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function I9(){const[t,e]=z.useState(()=>{try{const X=localStorage.getItem(Hv);return X?JSON.parse(X):Kv}catch{return Kv}}),[n,r]=z.useState(null),[i,s]=z.useState(!1),[o,l]=z.useState(""),[u,d]=z.useState(0),[h,m]=z.useState(null),[p,w]=z.useState(""),[T,C]=z.useState(null),[A,b]=z.useState(""),[x,v]=z.useState(null),[P,D]=z.useState(!1),[M,k]=z.useState(null),y=z.useRef(null);z.useCallback((X,j="success")=>{y.current&&clearTimeout(y.current),k({message:X,type:j}),y.current=setTimeout(()=>k(null),3500)},[]);const[_,E]=z.useState({active:null,target:null,isDragging:!1}),I=Ic(0),R=Ic(0),S=z.useRef(null),xe=4,de=z.useRef(null),ae=z.useRef(null),me=z.useRef({colId:null,index:null}),Q=z.useCallback((X="light")=>{navigator.vibrate&&navigator.vibrate(X==="light"?8:X==="medium"?15:25)},[]),ee=z.useCallback((X,j,O)=>{const re=document.elementsFromPoint(X,j).find(Z=>Z.hasAttribute("data-column-id"));if(!re)return null;const L=re.getAttribute("data-column-id"),q=re.querySelector("[data-cards-container]");if(!q)return{colId:L,index:0};const W=Array.from(q.querySelectorAll("[data-card-id]")).filter(Z=>Z.getAttribute("data-card-id")!==O);if(W.length===0)return{colId:L,index:0};for(let Z=0;Z<W.length;Z++){const _e=W[Z].getBoundingClientRect(),Se=_e.top+_e.height/2;if(j<Se)return{colId:L,index:Z}}return{colId:L,index:W.length}},[]);z.useEffect(()=>{const X=O=>{const H=S.current;if(H&&!_.isDragging){const re=O.clientX-H.startX,L=O.clientY-H.startY;if(Math.sqrt(re*re+L*L)>xe){const{card:W,colId:Z,rect:_e,offsetX:Se,offsetY:Be,cardIndex:Ue}=H;I.set(_e.left),R.set(_e.top),E({active:{id:W.id,sourceColId:Z,sourceIndex:Ue,data:W,rect:_e,offsetX:Se,offsetY:Be},target:{colId:Z,index:Ue},isDragging:!0}),Q("medium")}return}if(_.isDragging&&_.active){O.preventDefault();const re=O.clientX-_.active.offsetX,L=O.clientY-_.active.offsetY;if(I.set(re),R.set(L),ae.current)return;ae.current=requestAnimationFrame(()=>{const q=ee(O.clientX,O.clientY,_.active.id);if(ae.current=null,q){const W=me.current;(W.colId!==q.colId||W.index!==q.index)&&(me.current=q,Q("light"),E(Z=>({...Z,target:q})))}})}},j=O=>{if(ae.current&&(cancelAnimationFrame(ae.current),ae.current=null),_.isDragging&&_.active){const{active:H,target:re}=_;document.body.style.cursor="";const L=re==null?void 0:re.colId,q=re==null?void 0:re.index;L&&(H.sourceColId!==L||H.sourceIndex!==q)&&(e(Z=>{const _e=Z.columns.map(Qt=>({...Qt,cards:[...Qt.cards]})),Se=_e.find(Qt=>Qt.id===H.sourceColId),Be=_e.find(Qt=>Qt.id===L);if(!Se||!Be)return Z;const Ue=Se.cards.findIndex(Qt=>Qt.id===H.id);if(Ue===-1)return Z;const[lt]=Se.cards.splice(Ue,1);return Be.cards.splice(q,0,lt),{...Z,columns:_e}}),Q("medium")),E({active:null,target:null,isDragging:!1}),me.current={colId:null,index:null}}else if(S.current){const{card:H,colId:re}=S.current;r({...H,columnId:re})}S.current=null};return window.addEventListener("pointermove",X,{passive:!1}),window.addEventListener("pointerup",j),window.addEventListener("pointercancel",j),()=>{window.removeEventListener("pointermove",X),window.removeEventListener("pointerup",j),window.removeEventListener("pointercancel",j),ae.current&&cancelAnimationFrame(ae.current)}},[_,ee,Q,I,R]);const ie=z.useCallback((X,j,O)=>{var L;if(X.target.closest("button, input, textarea, [data-no-drag]")||X.button&&X.button!==0)return;const H=X.currentTarget,re=H.getBoundingClientRect();S.current={card:j,colId:O,element:H,rect:re,startX:X.clientX,startY:X.clientY,offsetX:X.clientX-re.left,offsetY:X.clientY-re.top,cardIndex:((L=t.columns.find(q=>q.id===O))==null?void 0:L.cards.findIndex(q=>q.id===j.id))??0}},[t.columns]);z.useEffect(()=>{(async()=>{var j;try{const O=await((j=Re.getKanban)==null?void 0:j.call(Re));O!=null&&O.columns&&e(O)}catch{}finally{D(!0)}})()},[]),z.useEffect(()=>{if(localStorage.setItem(Hv,JSON.stringify(t)),P){const X=setTimeout(()=>{var j;try{(j=Re.syncKanban)==null||j.call(Re,t)}catch{}},2e3);return()=>clearTimeout(X)}},[t,P]);const $=z.useCallback(X=>{if(!p.trim())return;const j={id:`card-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:p.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(O=>({...O,columns:O.columns.map(H=>H.id===X?{...H,cards:[...H.cards,j]}:H)})),w(""),m(null),Q("light")},[p,Q]),se=z.useCallback(X=>{e(j=>({...j,columns:j.columns.map(O=>O.id===X.columnId?{...O,cards:O.cards.map(H=>H.id===X.id?X:H)}:O)}))},[]),ne=z.useCallback((X,j)=>{v({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(O=>({...O,columns:O.columns.map(H=>H.id===X?{...H,cards:H.cards.filter(re=>re.id!==j)}:H)})),r(null),v(null),Q("medium")},onCancel:()=>v(null)})},[Q]),V=z.useCallback(()=>{o.trim()&&(e(X=>({...X,columns:[...X.columns,{id:`col-${Date.now()}`,title:o.trim(),cards:[]}]})),l(""),s(!1),Q("light"))},[o,Q]),U=z.useCallback(X=>{if(!A.trim()){C(null);return}e(j=>({...j,columns:j.columns.map(O=>O.id===X?{...O,title:A.trim()}:O)})),C(null)},[A]),Y=z.useCallback(X=>{v({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(j=>({...j,columns:j.columns.filter(O=>O.id!==X)})),v(null),Q("medium")},onCancel:()=>v(null)})},[Q]);return a.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[a.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),a.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${P?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${P?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:P?"Cloud Active":"Syncing"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[a.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),a.jsxs("div",{ref:de,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[a.jsx(ze,{mode:"popLayout",children:t.columns.map(X=>a.jsx(z9,{col:X,dragState:_,spring:Il,zoomLevel:u,renamingColId:T,setRenamingColId:C,renameTitle:A,setRenameTitle:b,renameColumn:U,deleteColumn:Y,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:p,setNewCardTitle:w,addCard:$,handleCardPointerDown:ie},X.id))}),i?a.jsxs(ue.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:Il.enter,className:"flex-shrink-0 w-80 p-6 rounded-[2rem] bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-700 shadow-xl h-min",children:[a.jsx("input",{autoFocus:!0,value:o,onChange:X=>l(X.target.value),onKeyDown:X=>{X.key==="Enter"&&V(),X.key==="Escape"&&(s(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-900 px-4 py-4 rounded-xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-4"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:V,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Criar"}),a.jsx("button",{onClick:()=>{s(!1),l("")},className:"flex-1 bg-zinc-100 dark:bg-zinc-800 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"})]})]}):a.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>s(!0),className:"flex-shrink-0 w-14 h-14 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-lg flex items-center justify-center text-zinc-400 transition-all",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),a.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:a.jsx(ue.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Il.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:t0.map((X,j)=>a.jsxs("button",{onClick:()=>{d(j),Q("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${u===j?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[u===j&&a.jsx(ue.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),a.jsx("span",{className:"relative z-10",children:X.label})]},j))})}),a.jsx(P9,{dragState:_,ghostX:I,ghostY:R,spring:Il}),a.jsx(ze,{children:n&&a.jsx(V9,{card:n,onClose:()=>r(null),onUpdate:se,onDelete:()=>ne(n.columnId,n.id),setConfirmModal:v})}),a.jsx(ze,{children:x&&a.jsx(R9,{...x})}),a.jsx(ze,{children:M&&qn.createPortal(a.jsxs(ue.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${M.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":M.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${M.type==="error"?"bg-white animate-pulse":M.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:M.message})]}),document.body)})]})}const z9=mn.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:s,renameTitle:o,setRenameTitle:l,renameColumn:u,deleteColumn:d,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:p,setNewCardTitle:w,addCard:T,handleCardPointerDown:C})=>{var b,x;const A=((b=e.target)==null?void 0:b.colId)===t.id;return a.jsxs(ue.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`
                flex-shrink-0 flex flex-col snap-center
                ${t0[r].width}
                max-h-full rounded-[2rem] md:rounded-[2.5rem]
                bg-white dark:bg-zinc-950
                border border-zinc-200/60 dark:border-white/[0.06]
                shadow-xl shadow-black/[0.03] dark:shadow-black/20
                transition-all duration-300
                ${A?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}
            `,children:[a.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[a.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?a.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:o,onChange:v=>l(v.target.value),onBlur:()=>u(t.id),onKeyDown:v=>{v.key==="Enter"&&u(t.id),v.key==="Escape"&&s(null)}}):a.jsx("h3",{onClick:()=>{s(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),a.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[a.jsx(ze,{mode:"popLayout",children:t.cards.map((v,P)=>a.jsx(A9,{card:v,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:C},v.id))}),a.jsx(ze,{mode:"sync",children:e.isDragging&&A&&e.active&&(()=>{const v=t.cards.filter(P=>P.id!==e.active.id);return e.target.index>=v.length})()&&a.jsx(ue.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((x=e.active.rect)==null?void 0:x.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),h===t.id?a.jsxs(ue.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:n.enter,className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-lg",children:[a.jsx("textarea",{autoFocus:!0,value:p,onChange:v=>w(v.target.value),onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),T(t.id)),v.key==="Escape"&&m(null)},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-3",rows:2}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 text-xs font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>T(t.id),disabled:!p.trim(),className:"px-5 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 text-xs font-bold uppercase tracking-wider rounded-xl shadow-md disabled:opacity-50 hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Adicionar"})]})]}):a.jsx("button",{onClick:()=>{m(t.id),w("")},className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all",children:"+ Carto"})]})]})}),A9=mn.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:s})=>{var u,d,h,m;const o=((u=n.active)==null?void 0:u.id)===t.id,l=((d=n.target)==null?void 0:d.colId)===e;return n.isDragging&&l&&n.active,a.jsx(mn.Fragment,{children:!o&&a.jsxs(ue.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:p=>s(p,t,e),className:`
                        relative bg-white dark:bg-zinc-900
                        border border-zinc-200/60 dark:border-white/[0.06]
                        rounded-2xl ${t0[i].cardPadding}
                        shadow-sm hover:shadow-xl dark:shadow-black/10
                        cursor-grab active:cursor-grabbing
                        touch-none select-none
                        hover:border-zinc-300 dark:hover:border-white/10
                        group/card
                    `,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&a.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((p,w)=>a.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:p.color}},w))}),a.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((m=t.checklists)==null?void 0:m.length)>0&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),a.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((p,w)=>p+w.items.filter(T=>T.done).length,0),"/",t.checklists.reduce((p,w)=>p+w.items.length,0)]})]})]})})}),P9=mn.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return a.jsx(ze,{children:t.isDragging&&t.active&&a.jsx(ue.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),a.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&a.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((s,o)=>a.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:s.color}},o))}),a.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function R9({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),a.jsxs(ue.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),a.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function V9({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var b;const[s,o]=z.useState(t),[l,u]=z.useState(!1),[d,h]=z.useState("");z.useEffect(()=>{n(s)},[s,n]);const m=x=>{var P;const v=(P=s.labels)==null?void 0:P.find(D=>D.id===x.id);o(D=>({...D,labels:v?D.labels.filter(M=>M.id!==x.id):[...D.labels||[],x]}))},p=()=>{d.trim()&&(o(x=>({...x,checklists:[...x.checklists||[],{id:Date.now(),title:d.trim(),items:[]}]})),h(""),u(!1))},w=x=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{o(v=>({...v,checklists:v.checklists.filter(P=>P.id!==x)})),i(null)},onCancel:()=>i(null)})},T=(x,v)=>{o(P=>({...P,checklists:P.checklists.map(D=>D.id===x?{...D,items:D.items.map(M=>M.id===v?{...M,done:!M.done}:M)}:D)}))},C=(x,v)=>{v.trim()&&o(P=>({...P,checklists:P.checklists.map(D=>D.id===x?{...D,items:[...D.items,{id:Date.now(),text:v.trim(),done:!1}]}:D)}))},A=(x,v)=>{o(P=>({...P,checklists:P.checklists.map(D=>D.id===x?{...D,items:D.items.filter(M=>M.id!==v)}:D)}))};return a.jsxs(ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center",onClick:e,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-xl"}),a.jsxs(ue.div,{initial:{opacity:0,y:100,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.98},transition:{type:"spring",stiffness:350,damping:30},className:"relative w-full max-w-2xl bg-white dark:bg-zinc-900 rounded-t-[2.5rem] md:rounded-[2.5rem] shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border border-zinc-200/50 dark:border-white/10",onClick:x=>x.stopPropagation(),children:[a.jsxs("div",{className:"shrink-0 p-6 md:p-8 border-b border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"flex gap-2 flex-wrap",children:S9.map(x=>{var v;return a.jsx("button",{onClick:()=>m(x),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(v=s.labels)!=null&&v.find(P=>P.id===x.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:x.color}},x.id)})}),a.jsx("button",{onClick:e,className:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-zinc-400 hover:text-zinc-600 dark:hover:text-white flex items-center justify-center transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("input",{className:"w-full text-2xl md:text-3xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:s.title,onChange:x=>o(v=>({...v,title:x.target.value})),placeholder:"Ttulo do carto"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),a.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:s.description||"",onChange:x=>o(v=>({...v,description:x.target.value}))})]}),(b=s.checklists)==null?void 0:b.map(x=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:x.title}),a.jsx("button",{onClick:()=>w(x.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),a.jsx(fu,{axis:"y",values:x.items,onReorder:v=>{o(P=>({...P,checklists:P.checklists.map(D=>D.id===x.id?{...D,items:v}:D)}))},className:"space-y-2",children:x.items.map(v=>a.jsxs(mu,{value:v,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[a.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),a.jsx("button",{onClick:()=>T(x.id,v.id),className:`w-5 h-5 rounded-lg border-2 flex items-center justify-center transition-all ${v.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:v.done&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsx("span",{className:`flex-1 text-sm ${v.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:v.text}),a.jsx("button",{onClick:()=>A(x.id,v.id),className:"text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},v.id))}),a.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:v=>{v.key==="Enter"&&v.target.value.trim()&&(C(x.id,v.target.value),v.target.value="")}})]},x.id)),l?a.jsxs(ue.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[a.jsx("input",{autoFocus:!0,value:d,onChange:x=>h(x.target.value),onKeyDown:x=>{x.key==="Enter"&&p(),x.key==="Escape"&&u(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:p,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),a.jsx("button",{onClick:()=>u(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):a.jsx("button",{onClick:()=>u(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 transition-colors",children:"+ Nova Checklist"}),a.jsx("div",{className:"pt-6 border-t border-zinc-100 dark:border-white/5",children:a.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20",children:"Excluir Carto"})})]})]})]})}const D9=[{key:"kanban",label:"Kanban",icon:M9},{key:"recipes",label:"Receitas",icon:L9},{key:"inventory",label:"Estoque",icon:O9},{key:"costs",label:"Financeiro",icon:F9},{key:"ficha",label:"Ficha",icon:B9},{key:"calculator",label:"Produo",icon:U9}];function M9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function L9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function O9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function F9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function B9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function U9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}const Qi={type:"spring",stiffness:500,damping:35,mass:.8},$9={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function q9(){const[t,e]=z.useState("pct"),[n,r]=z.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[i,s]=z.useState(!1);z.useEffect(()=>{s(!0)},[]);const o=l=>{l!==n&&(r(l),localStorage.setItem("padoca_view",l))};return a.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${i?"opacity-100":"opacity-0"}`,children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),a.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),a.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[a.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-4 pb-4 mb-6 md:relative md:pt-8 md:mb-8",children:[a.jsx(ue.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),a.jsxs("div",{className:"relative flex flex-col gap-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...Qi},children:[a.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),a.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),a.jsx(ue.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...Qi},className:"hidden md:flex items-center gap-3",children:a.jsx(ze,{mode:"wait",children:n==="calculator"&&a.jsx(ue.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:Qi,children:a.jsx(wy,{value:t,onChange:e})})})})]}),a.jsxs("nav",{className:"flex items-center gap-2",children:[a.jsx(ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...Qi},className:"flex-1 flex items-center gap-1 p-1.5 bg-zinc-100/90 dark:bg-zinc-900/90 backdrop-blur-xl rounded-2xl overflow-x-auto scrollbar-hidden border border-zinc-200/50 dark:border-white/5 shadow-sm",children:D9.map(({key:l,label:u,icon:d})=>{const h=n===l;return a.jsxs("button",{onClick:()=>o(l),className:`relative flex-1 md:flex-none flex items-center justify-center gap-2 px-4 md:px-5 py-3 text-[10px] md:text-[11px] font-semibold rounded-xl transition-all duration-200 whitespace-nowrap min-w-[60px] ${h?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}`,children:[h&&a.jsx(ue.div,{layoutId:"nav-active",className:"absolute inset-0 bg-white dark:bg-zinc-800 rounded-xl shadow-lg shadow-zinc-900/5 dark:shadow-black/20",transition:Qi}),a.jsx("span",{className:"relative z-10 hidden md:block",children:a.jsx(d,{active:h})}),a.jsx("span",{className:"relative z-10 uppercase tracking-wider",children:u})]},l)})}),a.jsx(ze,{mode:"wait",children:n==="calculator"&&a.jsx(ue.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:Qi,className:"md:hidden flex-shrink-0",children:a.jsx(wy,{value:t,onChange:e})})})]})]})]}),a.jsx(ze,{mode:"wait",children:a.jsx(ue.main,{initial:"initial",animate:"enter",exit:"exit",variants:$9,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="kanban"?a.jsx(I9,{}):n==="recipes"?a.jsx(T9,{}):n==="inventory"?a.jsx(c9,{}):n==="costs"?a.jsx(l9,{}):n==="ficha"?a.jsx(d9,{}):a.jsx(p9,{inputMode:t,setInputMode:e})},n)})]})]})}class W9 extends mn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:a.jsxs("div",{className:"max-w-md text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}Jd.createRoot(document.getElementById("root")).render(a.jsx(mn.StrictMode,{children:a.jsx(W9,{children:a.jsx(q9,{})})}));
