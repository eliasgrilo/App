(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function CE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Kv={exports:{}},Wc={},Gv={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sa=Symbol.for("react.element"),SE=Symbol.for("react.portal"),jE=Symbol.for("react.fragment"),IE=Symbol.for("react.strict_mode"),zE=Symbol.for("react.profiler"),AE=Symbol.for("react.provider"),PE=Symbol.for("react.context"),RE=Symbol.for("react.forward_ref"),VE=Symbol.for("react.suspense"),DE=Symbol.for("react.memo"),ME=Symbol.for("react.lazy"),Q0=Symbol.iterator;function LE(t){return t===null||typeof t!="object"?null:(t=Q0&&t[Q0]||t["@@iterator"],typeof t=="function"?t:null)}var Qv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Yv=Object.assign,Xv={};function Ls(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Qv}Ls.prototype.isReactComponent={};Ls.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ls.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jv(){}Jv.prototype=Ls.prototype;function Df(t,e,n){this.props=t,this.context=e,this.refs=Xv,this.updater=n||Qv}var Mf=Df.prototype=new Jv;Mf.constructor=Df;Yv(Mf,Ls.prototype);Mf.isPureReactComponent=!0;var Y0=Array.isArray,Zv=Object.prototype.hasOwnProperty,Lf={current:null},e1={key:!0,ref:!0,__self:!0,__source:!0};function t1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Zv.call(e,r)&&!e1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Sa,type:t,key:s,ref:o,props:i,_owner:Lf.current}}function OE(t,e){return{$$typeof:Sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Of(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sa}function FE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var X0=/\/+/g;function Ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?FE(""+t.key):e.toString(36)}function jl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Sa:case SE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ku(o,0):r,Y0(i)?(n="",t!=null&&(n=t.replace(X0,"$&/")+"/"),jl(i,e,n,"",function(d){return d})):i!=null&&(Of(i)&&(i=OE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(X0,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Y0(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ku(s,l);o+=jl(s,e,n,u,i)}else if(u=LE(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ku(s,l++),o+=jl(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function nl(t,e,n){if(t==null)return t;var r=[],i=0;return jl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function BE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Vt={current:null},Il={transition:null},UE={ReactCurrentDispatcher:Vt,ReactCurrentBatchConfig:Il,ReactCurrentOwner:Lf};function n1(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:nl,forEach:function(t,e,n){nl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return nl(t,function(){e++}),e},toArray:function(t){return nl(t,function(e){return e})||[]},only:function(t){if(!Of(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Ls;xe.Fragment=jE;xe.Profiler=zE;xe.PureComponent=Df;xe.StrictMode=IE;xe.Suspense=VE;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UE;xe.act=n1;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Yv({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Lf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Zv.call(e,u)&&!e1.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Sa,type:t.type,key:i,ref:s,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:PE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AE,_context:t},t.Consumer=t};xe.createElement=t1;xe.createFactory=function(t){var e=t1.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:RE,render:t}};xe.isValidElement=Of;xe.lazy=function(t){return{$$typeof:ME,_payload:{_status:-1,_result:t},_init:BE}};xe.memo=function(t,e){return{$$typeof:DE,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Il.transition;Il.transition={};try{t()}finally{Il.transition=e}};xe.unstable_act=n1;xe.useCallback=function(t,e){return Vt.current.useCallback(t,e)};xe.useContext=function(t){return Vt.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Vt.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Vt.current.useEffect(t,e)};xe.useId=function(){return Vt.current.useId()};xe.useImperativeHandle=function(t,e,n){return Vt.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Vt.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Vt.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Vt.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Vt.current.useReducer(t,e,n)};xe.useRef=function(t){return Vt.current.useRef(t)};xe.useState=function(t){return Vt.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Vt.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Vt.current.useTransition()};xe.version="18.3.1";Gv.exports=xe;var P=Gv.exports;const Jn=CE(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $E=P,qE=Symbol.for("react.element"),WE=Symbol.for("react.fragment"),HE=Object.prototype.hasOwnProperty,KE=$E.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GE={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HE.call(e,r)&&!GE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qE,type:t,key:s,ref:o,props:i,_owner:KE.current}}Wc.Fragment=WE;Wc.jsx=r1;Wc.jsxs=r1;Kv.exports=Wc;var a=Kv.exports,Xd={},i1={exports:{}},Xt={},s1={exports:{}},o1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,K){var ee=$.length;$.push(K);e:for(;0<ee;){var M=ee-1>>>1,U=$[M];if(0<i(U,K))$[M]=K,$[ee]=U,ee=M;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],ee=$.pop();if(ee!==K){$[0]=ee;e:for(var M=0,U=$.length,re=U>>>1;M<re;){var D=2*(M+1)-1,W=$[D],X=D+1,F=$[X];if(0>i(W,ee))X<U&&0>i(F,W)?($[M]=F,$[X]=ee,M=X):($[M]=W,$[D]=ee,M=D);else if(X<U&&0>i(F,ee))$[M]=F,$[X]=ee,M=X;else break e}}return K}function i($,K){var ee=$.sortIndex-K.sortIndex;return ee!==0?ee:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,m=null,p=3,v=!1,T=!1,N=!1,z=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=$)r(d),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(d)}}function I($){if(N=!1,w($),!T)if(n(u)!==null)T=!0,Y(V);else{var K=n(d);K!==null&&ne(I,K.startTime-$)}}function V($,K){T=!1,N&&(N=!1,_(x),x=-1),v=!0;var ee=p;try{for(w(K),m=n(u);m!==null&&(!(m.expirationTime>K)||$&&!j());){var M=m.callback;if(typeof M=="function"){m.callback=null,p=m.priorityLevel;var U=M(m.expirationTime<=K);K=t.unstable_now(),typeof U=="function"?m.callback=U:m===n(u)&&r(u),w(K)}else r(u);m=n(u)}if(m!==null)var re=!0;else{var D=n(d);D!==null&&ne(I,D.startTime-K),re=!1}return re}finally{m=null,p=ee,v=!1}}var L=!1,b=null,x=-1,k=5,C=-1;function j(){return!(t.unstable_now()-C<k)}function A(){if(b!==null){var $=t.unstable_now();C=$;var K=!0;try{K=b(!0,$)}finally{K?S():(L=!1,b=null)}}else L=!1}var S;if(typeof y=="function")S=function(){y(A)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ae=fe.port2;fe.port1.onmessage=A,S=function(){ae.postMessage(null)}}else S=function(){z(A,0)};function Y($){b=$,L||(L=!0,S())}function ne($,K){x=z(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,Y(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var ee=p;p=K;try{return $()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=p;p=$;try{return K()}finally{p=ee}},t.unstable_scheduleCallback=function($,K,ee){var M=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?M+ee:M):ee=M,$){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=ee+U,$={id:h++,callback:K,priorityLevel:$,startTime:ee,expirationTime:U,sortIndex:-1},ee>M?($.sortIndex=ee,e(d,$),n(u)===null&&$===n(d)&&(N?(_(x),x=-1):N=!0,ne(I,ee-M))):($.sortIndex=U,e(u,$),T||v||(T=!0,Y(V))),$},t.unstable_shouldYield=j,t.unstable_wrapCallback=function($){var K=p;return function(){var ee=p;p=K;try{return $.apply(this,arguments)}finally{p=ee}}}})(o1);s1.exports=o1;var QE=s1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YE=P,Yt=QE;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a1=new Set,Xo={};function Vi(t,e){Es(t,e),Es(t+"Capture",e)}function Es(t,e){for(Xo[t]=e,t=0;t<e.length;t++)a1.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jd=Object.prototype.hasOwnProperty,XE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,J0={},Z0={};function JE(t){return Jd.call(Z0,t)?!0:Jd.call(J0,t)?!1:XE.test(t)?Z0[t]=!0:(J0[t]=!0,!1)}function ZE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eT(t,e,n,r){if(e===null||typeof e>"u"||ZE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ff=/[\-:]([a-z])/g;function Bf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ff,Bf);yt[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ff,Bf);yt[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ff,Bf);yt[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Uf(t,e,n,r){var i=yt.hasOwnProperty(e)?yt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eT(e,n,i,r)&&(n=null),r||i===null?JE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=YE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,rl=Symbol.for("react.element"),Yi=Symbol.for("react.portal"),Xi=Symbol.for("react.fragment"),$f=Symbol.for("react.strict_mode"),Zd=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),qf=Symbol.for("react.forward_ref"),eh=Symbol.for("react.suspense"),th=Symbol.for("react.suspense_list"),Wf=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),u1=Symbol.for("react.offscreen"),eg=Symbol.iterator;function fo(t){return t===null||typeof t!="object"?null:(t=eg&&t[eg]||t["@@iterator"],typeof t=="function"?t:null)}var Be=Object.assign,Gu;function _o(t){if(Gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gu=e&&e[1]||""}return`
`+Gu+t}var Qu=!1;function Yu(t,e){if(!t||Qu)return"";Qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Qu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?_o(t):""}function tT(t){switch(t.tag){case 5:return _o(t.type);case 16:return _o("Lazy");case 13:return _o("Suspense");case 19:return _o("SuspenseList");case 0:case 2:case 15:return t=Yu(t.type,!1),t;case 11:return t=Yu(t.type.render,!1),t;case 1:return t=Yu(t.type,!0),t;default:return""}}function nh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xi:return"Fragment";case Yi:return"Portal";case Zd:return"Profiler";case $f:return"StrictMode";case eh:return"Suspense";case th:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c1:return(t.displayName||"Context")+".Consumer";case l1:return(t._context.displayName||"Context")+".Provider";case qf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wf:return e=t.displayName||null,e!==null?e:nh(t.type)||"Memo";case br:e=t._payload,t=t._init;try{return nh(t(e))}catch{}}return null}function nT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nh(e);case 8:return e===$f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function d1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rT(t){var e=d1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function il(t){t._valueTracker||(t._valueTracker=rT(t))}function h1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=d1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Jl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function rh(t,e){var n=e.checked;return Be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f1(t,e){e=e.checked,e!=null&&Uf(t,"checked",e,!1)}function ih(t,e){f1(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sh(t,e.type,n):e.hasOwnProperty("defaultValue")&&sh(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ng(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sh(t,e,n){(e!=="number"||Jl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Eo=Array.isArray;function fs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function oh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Z(92));if(Eo(n)){if(1<n.length)throw Error(Z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function m1(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function p1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ah(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?p1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var sl,g1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(sl=sl||document.createElement("div"),sl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=sl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Jo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ao={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},iT=["Webkit","ms","Moz","O"];Object.keys(Ao).forEach(function(t){iT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ao[e]=Ao[t]})});function x1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ao.hasOwnProperty(t)&&Ao[t]?(""+e).trim():e+"px"}function y1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=x1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sT=Be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lh(t,e){if(e){if(sT[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function ch(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uh=null;function Hf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var dh=null,ms=null,ps=null;function sg(t){if(t=za(t)){if(typeof dh!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=Yc(e),dh(t.stateNode,t.type,e))}}function v1(t){ms?ps?ps.push(t):ps=[t]:ms=t}function w1(){if(ms){var t=ms,e=ps;if(ps=ms=null,sg(t),e)for(t=0;t<e.length;t++)sg(e[t])}}function b1(t,e){return t(e)}function k1(){}var Xu=!1;function _1(t,e,n){if(Xu)return t(e,n);Xu=!0;try{return b1(t,e,n)}finally{Xu=!1,(ms!==null||ps!==null)&&(k1(),w1())}}function Zo(t,e){var n=t.stateNode;if(n===null)return null;var r=Yc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Z(231,e,typeof n));return n}var hh=!1;if(Zn)try{var mo={};Object.defineProperty(mo,"passive",{get:function(){hh=!0}}),window.addEventListener("test",mo,mo),window.removeEventListener("test",mo,mo)}catch{hh=!1}function oT(t,e,n,r,i,s,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Po=!1,Zl=null,ec=!1,fh=null,aT={onError:function(t){Po=!0,Zl=t}};function lT(t,e,n,r,i,s,o,l,u){Po=!1,Zl=null,oT.apply(aT,arguments)}function cT(t,e,n,r,i,s,o,l,u){if(lT.apply(this,arguments),Po){if(Po){var d=Zl;Po=!1,Zl=null}else throw Error(Z(198));ec||(ec=!0,fh=d)}}function Di(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function E1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function og(t){if(Di(t)!==t)throw Error(Z(188))}function uT(t){var e=t.alternate;if(!e){if(e=Di(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return og(i),t;if(s===r)return og(i),e;s=s.sibling}throw Error(Z(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(n.alternate!==r)throw Error(Z(190))}if(n.tag!==3)throw Error(Z(188));return n.stateNode.current===n?t:e}function T1(t){return t=uT(t),t!==null?N1(t):null}function N1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=N1(t);if(e!==null)return e;t=t.sibling}return null}var C1=Yt.unstable_scheduleCallback,ag=Yt.unstable_cancelCallback,dT=Yt.unstable_shouldYield,hT=Yt.unstable_requestPaint,Ge=Yt.unstable_now,fT=Yt.unstable_getCurrentPriorityLevel,Kf=Yt.unstable_ImmediatePriority,S1=Yt.unstable_UserBlockingPriority,tc=Yt.unstable_NormalPriority,mT=Yt.unstable_LowPriority,j1=Yt.unstable_IdlePriority,Hc=null,zn=null;function pT(t){if(zn&&typeof zn.onCommitFiberRoot=="function")try{zn.onCommitFiberRoot(Hc,t,void 0,(t.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:yT,gT=Math.log,xT=Math.LN2;function yT(t){return t>>>=0,t===0?32:31-(gT(t)/xT|0)|0}var ol=64,al=4194304;function To(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=To(l):(s&=o,s!==0&&(r=To(s)))}else o=n&~i,o!==0?r=To(o):s!==0&&(r=To(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-bn(e),i=1<<n,r|=t[n],e&=~i;return r}function vT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-bn(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=vT(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function I1(){var t=ol;return ol<<=1,!(ol&4194240)&&(ol=64),t}function Ju(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ja(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-bn(e),t[e]=n}function bT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-bn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Gf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-bn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function z1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var A1,Qf,P1,R1,V1,ph=!1,ll=[],Sr=null,jr=null,Ir=null,ea=new Map,ta=new Map,_r=[],kT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lg(t,e){switch(t){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ta.delete(e.pointerId)}}function po(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=za(e),e!==null&&Qf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function _T(t,e,n,r,i){switch(e){case"focusin":return Sr=po(Sr,t,e,n,r,i),!0;case"dragenter":return jr=po(jr,t,e,n,r,i),!0;case"mouseover":return Ir=po(Ir,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ea.set(s,po(ea.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ta.set(s,po(ta.get(s)||null,t,e,n,r,i)),!0}return!1}function D1(t){var e=fi(t.target);if(e!==null){var n=Di(e);if(n!==null){if(e=n.tag,e===13){if(e=E1(n),e!==null){t.blockedOn=e,V1(t.priority,function(){P1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);uh=r,n.target.dispatchEvent(r),uh=null}else return e=za(n),e!==null&&Qf(e),t.blockedOn=n,!1;e.shift()}return!0}function cg(t,e,n){zl(t)&&n.delete(e)}function ET(){ph=!1,Sr!==null&&zl(Sr)&&(Sr=null),jr!==null&&zl(jr)&&(jr=null),Ir!==null&&zl(Ir)&&(Ir=null),ea.forEach(cg),ta.forEach(cg)}function go(t,e){t.blockedOn===e&&(t.blockedOn=null,ph||(ph=!0,Yt.unstable_scheduleCallback(Yt.unstable_NormalPriority,ET)))}function na(t){function e(i){return go(i,t)}if(0<ll.length){go(ll[0],t);for(var n=1;n<ll.length;n++){var r=ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Sr!==null&&go(Sr,t),jr!==null&&go(jr,t),Ir!==null&&go(Ir,t),ea.forEach(e),ta.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)D1(n),n.blockedOn===null&&_r.shift()}var gs=dr.ReactCurrentBatchConfig,rc=!0;function TT(t,e,n,r){var i=Ne,s=gs.transition;gs.transition=null;try{Ne=1,Yf(t,e,n,r)}finally{Ne=i,gs.transition=s}}function NT(t,e,n,r){var i=Ne,s=gs.transition;gs.transition=null;try{Ne=4,Yf(t,e,n,r)}finally{Ne=i,gs.transition=s}}function Yf(t,e,n,r){if(rc){var i=gh(t,e,n,r);if(i===null)ld(t,e,r,ic,n),lg(t,r);else if(_T(i,t,e,n,r))r.stopPropagation();else if(lg(t,r),e&4&&-1<kT.indexOf(t)){for(;i!==null;){var s=za(i);if(s!==null&&A1(s),s=gh(t,e,n,r),s===null&&ld(t,e,r,ic,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ld(t,e,r,null,n)}}var ic=null;function gh(t,e,n,r){if(ic=null,t=Hf(r),t=fi(t),t!==null)if(e=Di(t),e===null)t=null;else if(n=e.tag,n===13){if(t=E1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ic=t,null}function M1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fT()){case Kf:return 1;case S1:return 4;case tc:case mT:return 16;case j1:return 536870912;default:return 16}default:return 16}}var Tr=null,Xf=null,Al=null;function L1(){if(Al)return Al;var t,e=Xf,n=e.length,r,i="value"in Tr?Tr.value:Tr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Al=i.slice(t,1<r?1-r:void 0)}function Pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cl(){return!0}function ug(){return!1}function Jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cl:ug,this.isPropagationStopped=ug,this}return Be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),e}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jf=Jt(Os),Ia=Be({},Os,{view:0,detail:0}),CT=Jt(Ia),Zu,ed,xo,Kc=Be({},Ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xo&&(xo&&t.type==="mousemove"?(Zu=t.screenX-xo.screenX,ed=t.screenY-xo.screenY):ed=Zu=0,xo=t),Zu)},movementY:function(t){return"movementY"in t?t.movementY:ed}}),dg=Jt(Kc),ST=Be({},Kc,{dataTransfer:0}),jT=Jt(ST),IT=Be({},Ia,{relatedTarget:0}),td=Jt(IT),zT=Be({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),AT=Jt(zT),PT=Be({},Os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RT=Jt(PT),VT=Be({},Os,{data:0}),hg=Jt(VT),DT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},LT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function OT(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=LT[t])?!!e[t]:!1}function Zf(){return OT}var FT=Be({},Ia,{key:function(t){if(t.key){var e=DT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MT[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zf,charCode:function(t){return t.type==="keypress"?Pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),BT=Jt(FT),UT=Be({},Kc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fg=Jt(UT),$T=Be({},Ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zf}),qT=Jt($T),WT=Be({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),HT=Jt(WT),KT=Be({},Kc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GT=Jt(KT),QT=[9,13,27,32],em=Zn&&"CompositionEvent"in window,Ro=null;Zn&&"documentMode"in document&&(Ro=document.documentMode);var YT=Zn&&"TextEvent"in window&&!Ro,O1=Zn&&(!em||Ro&&8<Ro&&11>=Ro),mg=" ",pg=!1;function F1(t,e){switch(t){case"keyup":return QT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ji=!1;function XT(t,e){switch(t){case"compositionend":return B1(e);case"keypress":return e.which!==32?null:(pg=!0,mg);case"textInput":return t=e.data,t===mg&&pg?null:t;default:return null}}function JT(t,e){if(Ji)return t==="compositionend"||!em&&F1(t,e)?(t=L1(),Al=Xf=Tr=null,Ji=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return O1&&e.locale!=="ko"?null:e.data;default:return null}}var ZT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ZT[t.type]:e==="textarea"}function U1(t,e,n,r){v1(r),e=sc(e,"onChange"),0<e.length&&(n=new Jf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Vo=null,ra=null;function eN(t){Z1(t,0)}function Gc(t){var e=ts(t);if(h1(e))return t}function tN(t,e){if(t==="change")return e}var $1=!1;if(Zn){var nd;if(Zn){var rd="oninput"in document;if(!rd){var xg=document.createElement("div");xg.setAttribute("oninput","return;"),rd=typeof xg.oninput=="function"}nd=rd}else nd=!1;$1=nd&&(!document.documentMode||9<document.documentMode)}function yg(){Vo&&(Vo.detachEvent("onpropertychange",q1),ra=Vo=null)}function q1(t){if(t.propertyName==="value"&&Gc(ra)){var e=[];U1(e,ra,t,Hf(t)),_1(eN,e)}}function nN(t,e,n){t==="focusin"?(yg(),Vo=e,ra=n,Vo.attachEvent("onpropertychange",q1)):t==="focusout"&&yg()}function rN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gc(ra)}function iN(t,e){if(t==="click")return Gc(e)}function sN(t,e){if(t==="input"||t==="change")return Gc(e)}function oN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _n=typeof Object.is=="function"?Object.is:oN;function ia(t,e){if(_n(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jd.call(e,i)||!_n(t[i],e[i]))return!1}return!0}function vg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,e){var n=vg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vg(n)}}function W1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?W1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function H1(){for(var t=window,e=Jl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Jl(t.document)}return e}function tm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aN(t){var e=H1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&W1(n.ownerDocument.documentElement,n)){if(r!==null&&tm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=wg(n,s);var o=wg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lN=Zn&&"documentMode"in document&&11>=document.documentMode,Zi=null,xh=null,Do=null,yh=!1;function bg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;yh||Zi==null||Zi!==Jl(r)||(r=Zi,"selectionStart"in r&&tm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Do&&ia(Do,r)||(Do=r,r=sc(xh,"onSelect"),0<r.length&&(e=new Jf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zi)))}function ul(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var es={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},id={},K1={};Zn&&(K1=document.createElement("div").style,"AnimationEvent"in window||(delete es.animationend.animation,delete es.animationiteration.animation,delete es.animationstart.animation),"TransitionEvent"in window||delete es.transitionend.transition);function Qc(t){if(id[t])return id[t];if(!es[t])return t;var e=es[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in K1)return id[t]=e[n];return t}var G1=Qc("animationend"),Q1=Qc("animationiteration"),Y1=Qc("animationstart"),X1=Qc("transitionend"),J1=new Map,kg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xr(t,e){J1.set(t,e),Vi(e,[t])}for(var sd=0;sd<kg.length;sd++){var od=kg[sd],cN=od.toLowerCase(),uN=od[0].toUpperCase()+od.slice(1);Xr(cN,"on"+uN)}Xr(G1,"onAnimationEnd");Xr(Q1,"onAnimationIteration");Xr(Y1,"onAnimationStart");Xr("dblclick","onDoubleClick");Xr("focusin","onFocus");Xr("focusout","onBlur");Xr(X1,"onTransitionEnd");Es("onMouseEnter",["mouseout","mouseover"]);Es("onMouseLeave",["mouseout","mouseover"]);Es("onPointerEnter",["pointerout","pointerover"]);Es("onPointerLeave",["pointerout","pointerover"]);Vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dN=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function _g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,cT(r,e,void 0,t),t.currentTarget=null}function Z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;_g(i,l,d),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;_g(i,l,d),s=u}}}if(ec)throw t=fh,ec=!1,fh=null,t}function Pe(t,e){var n=e[_h];n===void 0&&(n=e[_h]=new Set);var r=t+"__bubble";n.has(r)||(ew(e,t,2,!1),n.add(r))}function ad(t,e,n){var r=0;e&&(r|=4),ew(n,t,r,e)}var dl="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[dl]){t[dl]=!0,a1.forEach(function(n){n!=="selectionchange"&&(dN.has(n)||ad(n,!1,t),ad(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dl]||(e[dl]=!0,ad("selectionchange",!1,e))}}function ew(t,e,n,r){switch(M1(e)){case 1:var i=TT;break;case 4:i=NT;break;default:i=Yf}n=i.bind(null,e,n,t),i=void 0,!hh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ld(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=fi(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}_1(function(){var d=s,h=Hf(n),m=[];e:{var p=J1.get(t);if(p!==void 0){var v=Jf,T=t;switch(t){case"keypress":if(Pl(n)===0)break e;case"keydown":case"keyup":v=BT;break;case"focusin":T="focus",v=td;break;case"focusout":T="blur",v=td;break;case"beforeblur":case"afterblur":v=td;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=jT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=qT;break;case G1:case Q1:case Y1:v=AT;break;case X1:v=HT;break;case"scroll":v=CT;break;case"wheel":v=GT;break;case"copy":case"cut":case"paste":v=RT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=fg}var N=(e&4)!==0,z=!N&&t==="scroll",_=N?p!==null?p+"Capture":null:p;N=[];for(var y=d,w;y!==null;){w=y;var I=w.stateNode;if(w.tag===5&&I!==null&&(w=I,_!==null&&(I=Zo(y,_),I!=null&&N.push(oa(y,I,w)))),z)break;y=y.return}0<N.length&&(p=new v(p,T,null,n,h),m.push({event:p,listeners:N}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==uh&&(T=n.relatedTarget||n.fromElement)&&(fi(T)||T[er]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=d,T=T?fi(T):null,T!==null&&(z=Di(T),T!==z||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=d),v!==T)){if(N=dg,I="onMouseLeave",_="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(N=fg,I="onPointerLeave",_="onPointerEnter",y="pointer"),z=v==null?p:ts(v),w=T==null?p:ts(T),p=new N(I,y+"leave",v,n,h),p.target=z,p.relatedTarget=w,I=null,fi(h)===d&&(N=new N(_,y+"enter",T,n,h),N.target=w,N.relatedTarget=z,I=N),z=I,v&&T)t:{for(N=v,_=T,y=0,w=N;w;w=Wi(w))y++;for(w=0,I=_;I;I=Wi(I))w++;for(;0<y-w;)N=Wi(N),y--;for(;0<w-y;)_=Wi(_),w--;for(;y--;){if(N===_||_!==null&&N===_.alternate)break t;N=Wi(N),_=Wi(_)}N=null}else N=null;v!==null&&Eg(m,p,v,N,!1),T!==null&&z!==null&&Eg(m,z,T,N,!0)}}e:{if(p=d?ts(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var V=tN;else if(gg(p))if($1)V=sN;else{V=rN;var L=nN}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(V=iN);if(V&&(V=V(t,d))){U1(m,V,n,h);break e}L&&L(t,p,d),t==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&sh(p,"number",p.value)}switch(L=d?ts(d):window,t){case"focusin":(gg(L)||L.contentEditable==="true")&&(Zi=L,xh=d,Do=null);break;case"focusout":Do=xh=Zi=null;break;case"mousedown":yh=!0;break;case"contextmenu":case"mouseup":case"dragend":yh=!1,bg(m,n,h);break;case"selectionchange":if(lN)break;case"keydown":case"keyup":bg(m,n,h)}var b;if(em)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ji?F1(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(O1&&n.locale!=="ko"&&(Ji||x!=="onCompositionStart"?x==="onCompositionEnd"&&Ji&&(b=L1()):(Tr=h,Xf="value"in Tr?Tr.value:Tr.textContent,Ji=!0)),L=sc(d,x),0<L.length&&(x=new hg(x,t,null,n,h),m.push({event:x,listeners:L}),b?x.data=b:(b=B1(n),b!==null&&(x.data=b)))),(b=YT?XT(t,n):JT(t,n))&&(d=sc(d,"onBeforeInput"),0<d.length&&(h=new hg("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=b))}Z1(m,e)})}function oa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Zo(t,n),s!=null&&r.unshift(oa(t,s,i)),s=Zo(t,e),s!=null&&r.push(oa(t,s,i))),t=t.return}return r}function Wi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,i?(u=Zo(n,s),u!=null&&o.unshift(oa(n,u,l))):i||(u=Zo(n,s),u!=null&&o.push(oa(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hN=/\r\n?/g,fN=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(hN,`
`).replace(fN,"")}function hl(t,e,n){if(e=Tg(e),Tg(t)!==e&&n)throw Error(Z(425))}function oc(){}var vh=null,wh=null;function bh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kh=typeof setTimeout=="function"?setTimeout:void 0,mN=typeof clearTimeout=="function"?clearTimeout:void 0,Ng=typeof Promise=="function"?Promise:void 0,pN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ng<"u"?function(t){return Ng.resolve(null).then(t).catch(gN)}:kh;function gN(t){setTimeout(function(){throw t})}function cd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),na(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);na(e)}function zr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fs=Math.random().toString(36).slice(2),In="__reactFiber$"+Fs,aa="__reactProps$"+Fs,er="__reactContainer$"+Fs,_h="__reactEvents$"+Fs,xN="__reactListeners$"+Fs,yN="__reactHandles$"+Fs;function fi(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[In]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cg(t);t!==null;){if(n=t[In])return n;t=Cg(t)}return e}t=n,n=t.parentNode}return null}function za(t){return t=t[In]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function Yc(t){return t[aa]||null}var Eh=[],ns=-1;function Jr(t){return{current:t}}function Ve(t){0>ns||(t.current=Eh[ns],Eh[ns]=null,ns--)}function ze(t,e){ns++,Eh[ns]=t.current,t.current=e}var Br={},Ct=Jr(Br),Bt=Jr(!1),Ti=Br;function Ts(t,e){var n=t.type.contextTypes;if(!n)return Br;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ut(t){return t=t.childContextTypes,t!=null}function ac(){Ve(Bt),Ve(Ct)}function Sg(t,e,n){if(Ct.current!==Br)throw Error(Z(168));ze(Ct,e),ze(Bt,n)}function tw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Z(108,nT(t)||"Unknown",i));return Be({},n,r)}function lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Br,Ti=Ct.current,ze(Ct,t),ze(Bt,Bt.current),!0}function jg(t,e,n){var r=t.stateNode;if(!r)throw Error(Z(169));n?(t=tw(t,e,Ti),r.__reactInternalMemoizedMergedChildContext=t,Ve(Bt),Ve(Ct),ze(Ct,t)):Ve(Bt),ze(Bt,n)}var Kn=null,Xc=!1,ud=!1;function nw(t){Kn===null?Kn=[t]:Kn.push(t)}function vN(t){Xc=!0,nw(t)}function Zr(){if(!ud&&Kn!==null){ud=!0;var t=0,e=Ne;try{var n=Kn;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Kn=null,Xc=!1}catch(i){throw Kn!==null&&(Kn=Kn.slice(t+1)),C1(Kf,Zr),i}finally{Ne=e,ud=!1}}return null}var rs=[],is=0,cc=null,uc=0,en=[],tn=0,Ni=null,Gn=1,Qn="";function ci(t,e){rs[is++]=uc,rs[is++]=cc,cc=t,uc=e}function rw(t,e,n){en[tn++]=Gn,en[tn++]=Qn,en[tn++]=Ni,Ni=t;var r=Gn;t=Qn;var i=32-bn(r)-1;r&=~(1<<i),n+=1;var s=32-bn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gn=1<<32-bn(e)+i|n<<i|r,Qn=s+t}else Gn=1<<s|n<<i|r,Qn=t}function nm(t){t.return!==null&&(ci(t,1),rw(t,1,0))}function rm(t){for(;t===cc;)cc=rs[--is],rs[is]=null,uc=rs[--is],rs[is]=null;for(;t===Ni;)Ni=en[--tn],en[tn]=null,Qn=en[--tn],en[tn]=null,Gn=en[--tn],en[tn]=null}var Gt=null,Kt=null,Me=!1,yn=null;function iw(t,e){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ig(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Kt=zr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Kt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ni!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Kt=null,!0):!1;default:return!1}}function Th(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nh(t){if(Me){var e=Kt;if(e){var n=e;if(!Ig(t,e)){if(Th(t))throw Error(Z(418));e=zr(n.nextSibling);var r=Gt;e&&Ig(t,e)?iw(r,n):(t.flags=t.flags&-4097|2,Me=!1,Gt=t)}}else{if(Th(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Me=!1,Gt=t}}}function zg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function fl(t){if(t!==Gt)return!1;if(!Me)return zg(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!bh(t.type,t.memoizedProps)),e&&(e=Kt)){if(Th(t))throw sw(),Error(Z(418));for(;e;)iw(t,e),e=zr(e.nextSibling)}if(zg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kt=zr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kt=null}}else Kt=Gt?zr(t.stateNode.nextSibling):null;return!0}function sw(){for(var t=Kt;t;)t=zr(t.nextSibling)}function Ns(){Kt=Gt=null,Me=!1}function im(t){yn===null?yn=[t]:yn.push(t)}var wN=dr.ReactCurrentBatchConfig;function yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Z(309));var r=n.stateNode}if(!r)throw Error(Z(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Z(284));if(!n._owner)throw Error(Z(290,t))}return t}function ml(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ag(t){var e=t._init;return e(t._payload)}function ow(t){function e(_,y){if(t){var w=_.deletions;w===null?(_.deletions=[y],_.flags|=16):w.push(y)}}function n(_,y){if(!t)return null;for(;y!==null;)e(_,y),y=y.sibling;return null}function r(_,y){for(_=new Map;y!==null;)y.key!==null?_.set(y.key,y):_.set(y.index,y),y=y.sibling;return _}function i(_,y){return _=Vr(_,y),_.index=0,_.sibling=null,_}function s(_,y,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<y?(_.flags|=2,y):w):(_.flags|=2,y)):(_.flags|=1048576,y)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,y,w,I){return y===null||y.tag!==6?(y=xd(w,_.mode,I),y.return=_,y):(y=i(y,w),y.return=_,y)}function u(_,y,w,I){var V=w.type;return V===Xi?h(_,y,w.props.children,I,w.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===br&&Ag(V)===y.type)?(I=i(y,w.props),I.ref=yo(_,y,w),I.return=_,I):(I=Fl(w.type,w.key,w.props,null,_.mode,I),I.ref=yo(_,y,w),I.return=_,I)}function d(_,y,w,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=yd(w,_.mode,I),y.return=_,y):(y=i(y,w.children||[]),y.return=_,y)}function h(_,y,w,I,V){return y===null||y.tag!==7?(y=bi(w,_.mode,I,V),y.return=_,y):(y=i(y,w),y.return=_,y)}function m(_,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=xd(""+y,_.mode,w),y.return=_,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case rl:return w=Fl(y.type,y.key,y.props,null,_.mode,w),w.ref=yo(_,null,y),w.return=_,w;case Yi:return y=yd(y,_.mode,w),y.return=_,y;case br:var I=y._init;return m(_,I(y._payload),w)}if(Eo(y)||fo(y))return y=bi(y,_.mode,w,null),y.return=_,y;ml(_,y)}return null}function p(_,y,w,I){var V=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:l(_,y,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case rl:return w.key===V?u(_,y,w,I):null;case Yi:return w.key===V?d(_,y,w,I):null;case br:return V=w._init,p(_,y,V(w._payload),I)}if(Eo(w)||fo(w))return V!==null?null:h(_,y,w,I,null);ml(_,w)}return null}function v(_,y,w,I,V){if(typeof I=="string"&&I!==""||typeof I=="number")return _=_.get(w)||null,l(y,_,""+I,V);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case rl:return _=_.get(I.key===null?w:I.key)||null,u(y,_,I,V);case Yi:return _=_.get(I.key===null?w:I.key)||null,d(y,_,I,V);case br:var L=I._init;return v(_,y,w,L(I._payload),V)}if(Eo(I)||fo(I))return _=_.get(w)||null,h(y,_,I,V,null);ml(y,I)}return null}function T(_,y,w,I){for(var V=null,L=null,b=y,x=y=0,k=null;b!==null&&x<w.length;x++){b.index>x?(k=b,b=null):k=b.sibling;var C=p(_,b,w[x],I);if(C===null){b===null&&(b=k);break}t&&b&&C.alternate===null&&e(_,b),y=s(C,y,x),L===null?V=C:L.sibling=C,L=C,b=k}if(x===w.length)return n(_,b),Me&&ci(_,x),V;if(b===null){for(;x<w.length;x++)b=m(_,w[x],I),b!==null&&(y=s(b,y,x),L===null?V=b:L.sibling=b,L=b);return Me&&ci(_,x),V}for(b=r(_,b);x<w.length;x++)k=v(b,_,x,w[x],I),k!==null&&(t&&k.alternate!==null&&b.delete(k.key===null?x:k.key),y=s(k,y,x),L===null?V=k:L.sibling=k,L=k);return t&&b.forEach(function(j){return e(_,j)}),Me&&ci(_,x),V}function N(_,y,w,I){var V=fo(w);if(typeof V!="function")throw Error(Z(150));if(w=V.call(w),w==null)throw Error(Z(151));for(var L=V=null,b=y,x=y=0,k=null,C=w.next();b!==null&&!C.done;x++,C=w.next()){b.index>x?(k=b,b=null):k=b.sibling;var j=p(_,b,C.value,I);if(j===null){b===null&&(b=k);break}t&&b&&j.alternate===null&&e(_,b),y=s(j,y,x),L===null?V=j:L.sibling=j,L=j,b=k}if(C.done)return n(_,b),Me&&ci(_,x),V;if(b===null){for(;!C.done;x++,C=w.next())C=m(_,C.value,I),C!==null&&(y=s(C,y,x),L===null?V=C:L.sibling=C,L=C);return Me&&ci(_,x),V}for(b=r(_,b);!C.done;x++,C=w.next())C=v(b,_,x,C.value,I),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?x:C.key),y=s(C,y,x),L===null?V=C:L.sibling=C,L=C);return t&&b.forEach(function(A){return e(_,A)}),Me&&ci(_,x),V}function z(_,y,w,I){if(typeof w=="object"&&w!==null&&w.type===Xi&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case rl:e:{for(var V=w.key,L=y;L!==null;){if(L.key===V){if(V=w.type,V===Xi){if(L.tag===7){n(_,L.sibling),y=i(L,w.props.children),y.return=_,_=y;break e}}else if(L.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===br&&Ag(V)===L.type){n(_,L.sibling),y=i(L,w.props),y.ref=yo(_,L,w),y.return=_,_=y;break e}n(_,L);break}else e(_,L);L=L.sibling}w.type===Xi?(y=bi(w.props.children,_.mode,I,w.key),y.return=_,_=y):(I=Fl(w.type,w.key,w.props,null,_.mode,I),I.ref=yo(_,y,w),I.return=_,_=I)}return o(_);case Yi:e:{for(L=w.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(_,y.sibling),y=i(y,w.children||[]),y.return=_,_=y;break e}else{n(_,y);break}else e(_,y);y=y.sibling}y=yd(w,_.mode,I),y.return=_,_=y}return o(_);case br:return L=w._init,z(_,y,L(w._payload),I)}if(Eo(w))return T(_,y,w,I);if(fo(w))return N(_,y,w,I);ml(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(_,y.sibling),y=i(y,w),y.return=_,_=y):(n(_,y),y=xd(w,_.mode,I),y.return=_,_=y),o(_)):n(_,y)}return z}var Cs=ow(!0),aw=ow(!1),dc=Jr(null),hc=null,ss=null,sm=null;function om(){sm=ss=hc=null}function am(t){var e=dc.current;Ve(dc),t._currentValue=e}function Ch(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xs(t,e){hc=t,sm=ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function cn(t){var e=t._currentValue;if(sm!==t)if(t={context:t,memoizedValue:e,next:null},ss===null){if(hc===null)throw Error(Z(308));ss=t,hc.dependencies={lanes:0,firstContext:t}}else ss=ss.next=t;return e}var mi=null;function lm(t){mi===null?mi=[t]:mi.push(t)}function lw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,lm(e)):(n.next=i.next,i.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var kr=!1;function cm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,tr(t,n)}return i=r.interleaved,i===null?(e.next=e,lm(r)):(e.next=i.next,i.next=e),r.interleaved=e,tr(t,n)}function Rl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gf(t,n)}}function Pg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fc(t,e,n,r){var i=t.updateQueue;kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?s=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,h=d=u=null,l=s;do{var p=l.lane,v=l.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,N=l;switch(p=e,v=n,N.tag){case 1:if(T=N.payload,typeof T=="function"){m=T.call(v,m,p);break e}m=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=N.payload,p=typeof T=="function"?T.call(v,m,p):T,p==null)break e;m=Be({},m,p);break e;case 2:kr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,u=m):h=h.next=v,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(h===null&&(u=m),i.baseState=u,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Si|=o,t.lanes=o,t.memoizedState=m}}function Rg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Z(191,i));i.call(r)}}}var Aa={},An=Jr(Aa),la=Jr(Aa),ca=Jr(Aa);function pi(t){if(t===Aa)throw Error(Z(174));return t}function um(t,e){switch(ze(ca,e),ze(la,t),ze(An,Aa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ah(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ah(e,t)}Ve(An),ze(An,e)}function Ss(){Ve(An),Ve(la),Ve(ca)}function uw(t){pi(ca.current);var e=pi(An.current),n=ah(e,t.type);e!==n&&(ze(la,t),ze(An,n))}function dm(t){la.current===t&&(Ve(An),Ve(la))}var Oe=Jr(0);function mc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dd=[];function hm(){for(var t=0;t<dd.length;t++)dd[t]._workInProgressVersionPrimary=null;dd.length=0}var Vl=dr.ReactCurrentDispatcher,hd=dr.ReactCurrentBatchConfig,Ci=0,Fe=null,st=null,ut=null,pc=!1,Mo=!1,ua=0,bN=0;function bt(){throw Error(Z(321))}function fm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!_n(t[n],e[n]))return!1;return!0}function mm(t,e,n,r,i,s){if(Ci=s,Fe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Vl.current=t===null||t.memoizedState===null?TN:NN,t=n(r,i),Mo){s=0;do{if(Mo=!1,ua=0,25<=s)throw Error(Z(301));s+=1,ut=st=null,e.updateQueue=null,Vl.current=CN,t=n(r,i)}while(Mo)}if(Vl.current=gc,e=st!==null&&st.next!==null,Ci=0,ut=st=Fe=null,pc=!1,e)throw Error(Z(300));return t}function pm(){var t=ua!==0;return ua=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ut===null?Fe.memoizedState=ut=t:ut=ut.next=t,ut}function un(){if(st===null){var t=Fe.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=ut===null?Fe.memoizedState:ut.next;if(e!==null)ut=e,st=t;else{if(t===null)throw Error(Z(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},ut===null?Fe.memoizedState=ut=t:ut=ut.next=t}return ut}function da(t,e){return typeof e=="function"?e(t):e}function fd(t){var e=un(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=st,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,d=s;do{var h=d.lane;if((Ci&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Fe.lanes|=h,Si|=h}d=d.next}while(d!==null&&d!==s);u===null?o=r:u.next=l,_n(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Fe.lanes|=s,Si|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function md(t){var e=un(),n=e.queue;if(n===null)throw Error(Z(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);_n(s,e.memoizedState)||(Ot=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function dw(){}function hw(t,e){var n=Fe,r=un(),i=e(),s=!_n(r.memoizedState,i);if(s&&(r.memoizedState=i,Ot=!0),r=r.queue,gm(pw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ut!==null&&ut.memoizedState.tag&1){if(n.flags|=2048,ha(9,mw.bind(null,n,r,i,e),void 0,null),dt===null)throw Error(Z(349));Ci&30||fw(n,e,i)}return i}function fw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function mw(t,e,n,r){e.value=n,e.getSnapshot=r,gw(e)&&xw(t)}function pw(t,e,n){return n(function(){gw(e)&&xw(t)})}function gw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!_n(t,n)}catch{return!0}}function xw(t){var e=tr(t,1);e!==null&&kn(e,t,1,-1)}function Vg(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e.queue=t,t=t.dispatch=EN.bind(null,Fe,t),[e.memoizedState,t]}function ha(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Fe.updateQueue,e===null?(e={lastEffect:null,stores:null},Fe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function yw(){return un().memoizedState}function Dl(t,e,n,r){var i=Sn();Fe.flags|=t,i.memoizedState=ha(1|e,n,void 0,r===void 0?null:r)}function Jc(t,e,n,r){var i=un();r=r===void 0?null:r;var s=void 0;if(st!==null){var o=st.memoizedState;if(s=o.destroy,r!==null&&fm(r,o.deps)){i.memoizedState=ha(e,n,s,r);return}}Fe.flags|=t,i.memoizedState=ha(1|e,n,s,r)}function Dg(t,e){return Dl(8390656,8,t,e)}function gm(t,e){return Jc(2048,8,t,e)}function vw(t,e){return Jc(4,2,t,e)}function ww(t,e){return Jc(4,4,t,e)}function bw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kw(t,e,n){return n=n!=null?n.concat([t]):null,Jc(4,4,bw.bind(null,e,t),n)}function xm(){}function _w(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ew(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&fm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Tw(t,e,n){return Ci&21?(_n(n,e)||(n=I1(),Fe.lanes|=n,Si|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function kN(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=hd.transition;hd.transition={};try{t(!1),e()}finally{Ne=n,hd.transition=r}}function Nw(){return un().memoizedState}function _N(t,e,n){var r=Rr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cw(t))Sw(e,n);else if(n=lw(t,e,n,r),n!==null){var i=Pt();kn(n,t,r,i),jw(n,e,r)}}function EN(t,e,n){var r=Rr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cw(t))Sw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,_n(l,o)){var u=e.interleaved;u===null?(i.next=i,lm(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=lw(t,e,i,r),n!==null&&(i=Pt(),kn(n,t,r,i),jw(n,e,r))}}function Cw(t){var e=t.alternate;return t===Fe||e!==null&&e===Fe}function Sw(t,e){Mo=pc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Gf(t,n)}}var gc={readContext:cn,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},TN={readContext:cn,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:cn,useEffect:Dg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dl(4194308,4,bw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dl(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_N.bind(null,Fe,t),[r.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:Vg,useDebugValue:xm,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=Vg(!1),e=t[0];return t=kN.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Fe,i=Sn();if(Me){if(n===void 0)throw Error(Z(407));n=n()}else{if(n=e(),dt===null)throw Error(Z(349));Ci&30||fw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Dg(pw.bind(null,r,s,t),[t]),r.flags|=2048,ha(9,mw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Sn(),e=dt.identifierPrefix;if(Me){var n=Qn,r=Gn;n=(r&~(1<<32-bn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},NN={readContext:cn,useCallback:_w,useContext:cn,useEffect:gm,useImperativeHandle:kw,useInsertionEffect:vw,useLayoutEffect:ww,useMemo:Ew,useReducer:fd,useRef:yw,useState:function(){return fd(da)},useDebugValue:xm,useDeferredValue:function(t){var e=un();return Tw(e,st.memoizedState,t)},useTransition:function(){var t=fd(da)[0],e=un().memoizedState;return[t,e]},useMutableSource:dw,useSyncExternalStore:hw,useId:Nw,unstable_isNewReconciler:!1},CN={readContext:cn,useCallback:_w,useContext:cn,useEffect:gm,useImperativeHandle:kw,useInsertionEffect:vw,useLayoutEffect:ww,useMemo:Ew,useReducer:md,useRef:yw,useState:function(){return md(da)},useDebugValue:xm,useDeferredValue:function(t){var e=un();return st===null?e.memoizedState=t:Tw(e,st.memoizedState,t)},useTransition:function(){var t=md(da)[0],e=un().memoizedState;return[t,e]},useMutableSource:dw,useSyncExternalStore:hw,useId:Nw,unstable_isNewReconciler:!1};function gn(t,e){if(t&&t.defaultProps){e=Be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Sh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zc={isMounted:function(t){return(t=t._reactInternals)?Di(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Rr(t),s=Yn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,i),e!==null&&(kn(e,t,i,r),Rl(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Pt(),i=Rr(t),s=Yn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ar(t,s,i),e!==null&&(kn(e,t,i,r),Rl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Pt(),r=Rr(t),i=Yn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ar(t,i,r),e!==null&&(kn(e,t,r,n),Rl(e,t,r))}};function Mg(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ia(n,r)||!ia(i,s):!0}function Iw(t,e,n){var r=!1,i=Br,s=e.contextType;return typeof s=="object"&&s!==null?s=cn(s):(i=Ut(e)?Ti:Ct.current,r=e.contextTypes,s=(r=r!=null)?Ts(t,i):Br),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Lg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zc.enqueueReplaceState(e,e.state,null)}function jh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},cm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=cn(s):(s=Ut(e)?Ti:Ct.current,i.context=Ts(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Sh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zc.enqueueReplaceState(i,i.state,null),fc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function js(t,e){try{var n="",r=e;do n+=tT(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function pd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ih(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var SN=typeof WeakMap=="function"?WeakMap:Map;function zw(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){yc||(yc=!0,Fh=r),Ih(t,e)},n}function Aw(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ih(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ih(t,e),typeof r!="function"&&(Pr===null?Pr=new Set([this]):Pr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Og(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new SN;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UN.bind(null,t,e,n),e.then(t,t))}function Fg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Ar(n,e,1))),n.lanes|=1),t)}var jN=dr.ReactCurrentOwner,Ot=!1;function It(t,e,n,r){e.child=t===null?aw(e,null,n,r):Cs(e,t.child,n,r)}function Ug(t,e,n,r,i){n=n.render;var s=e.ref;return xs(e,i),r=mm(t,e,n,r,s,i),n=pm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nr(t,e,i)):(Me&&n&&nm(e),e.flags|=1,It(t,e,r,i),e.child)}function $g(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Tm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Pw(t,e,s,r,i)):(t=Fl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ia,n(o,r)&&t.ref===e.ref)return nr(t,e,i)}return e.flags|=1,t=Vr(s,r),t.ref=e.ref,t.return=e,e.child=t}function Pw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ia(s,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,nr(t,e,i)}return zh(t,e,n,r,i)}function Rw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(as,Ht),Ht|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ze(as,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ze(as,Ht),Ht|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ze(as,Ht),Ht|=r;return It(t,e,i,n),e.child}function Vw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function zh(t,e,n,r,i){var s=Ut(n)?Ti:Ct.current;return s=Ts(e,s),xs(e,i),n=mm(t,e,n,r,s,i),r=pm(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,nr(t,e,i)):(Me&&r&&nm(e),e.flags|=1,It(t,e,n,i),e.child)}function qg(t,e,n,r,i){if(Ut(n)){var s=!0;lc(e)}else s=!1;if(xs(e,i),e.stateNode===null)Ml(t,e),Iw(e,n,r),jh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=cn(d):(d=Ut(n)?Ti:Ct.current,d=Ts(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Lg(e,o,r,d),kr=!1;var p=e.memoizedState;o.state=p,fc(e,r,o,i),u=e.memoizedState,l!==r||p!==u||Bt.current||kr?(typeof h=="function"&&(Sh(e,n,h,r),u=e.memoizedState),(l=kr||Mg(e,n,l,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,cw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:gn(e.type,l),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=cn(u):(u=Ut(n)?Ti:Ct.current,u=Ts(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||p!==u)&&Lg(e,o,r,u),kr=!1,p=e.memoizedState,o.state=p,fc(e,r,o,i);var T=e.memoizedState;l!==m||p!==T||Bt.current||kr?(typeof v=="function"&&(Sh(e,n,v,r),T=e.memoizedState),(d=kr||Mg(e,n,d,r,p,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Ah(t,e,n,r,s,i)}function Ah(t,e,n,r,i,s){Vw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&jg(e,n,!1),nr(t,e,s);r=e.stateNode,jN.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Cs(e,t.child,null,s),e.child=Cs(e,null,l,s)):It(t,e,l,s),e.memoizedState=r.state,i&&jg(e,n,!0),e.child}function Dw(t){var e=t.stateNode;e.pendingContext?Sg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Sg(t,e.context,!1),um(t,e.containerInfo)}function Wg(t,e,n,r,i){return Ns(),im(i),e.flags|=256,It(t,e,n,r),e.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Rh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Mw(t,e,n){var r=e.pendingProps,i=Oe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ze(Oe,i&1),t===null)return Nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nu(o,r,0,null),t=bi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Rh(n),e.memoizedState=Ph,t):ym(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return IN(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Vr(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Vr(l,s):(s=bi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Rh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Ph,r}return s=t.child,t=s.sibling,r=Vr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ym(t,e){return e=nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function pl(t,e,n,r){return r!==null&&im(r),Cs(e,t.child,null,n),t=ym(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function IN(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=pd(Error(Z(422))),pl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nu({mode:"visible",children:r.children},i,0,null),s=bi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Cs(e,t.child,null,o),e.child.memoizedState=Rh(o),e.memoizedState=Ph,s);if(!(e.mode&1))return pl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(Z(419)),r=pd(s,r,void 0),pl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ot||l){if(r=dt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,tr(t,i),kn(r,t,i,-1))}return Em(),r=pd(Error(Z(421))),pl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$N.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kt=zr(i.nextSibling),Gt=e,Me=!0,yn=null,t!==null&&(en[tn++]=Gn,en[tn++]=Qn,en[tn++]=Ni,Gn=t.id,Qn=t.overflow,Ni=e),e=ym(e,r.children),e.flags|=4096,e)}function Hg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ch(t.return,e,n)}function gd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Lw(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(It(t,e,r.children,n),r=Oe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,n,e);else if(t.tag===19)Hg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ze(Oe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&mc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&mc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gd(e,!0,n,null,s);break;case"together":gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ml(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Si|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,n=Vr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zN(t,e,n){switch(e.tag){case 3:Dw(e),Ns();break;case 5:uw(e);break;case 1:Ut(e.type)&&lc(e);break;case 4:um(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ze(dc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ze(Oe,Oe.current&1),e.flags|=128,null):n&e.child.childLanes?Mw(t,e,n):(ze(Oe,Oe.current&1),t=nr(t,e,n),t!==null?t.sibling:null);ze(Oe,Oe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Lw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ze(Oe,Oe.current),r)break;return null;case 22:case 23:return e.lanes=0,Rw(t,e,n)}return nr(t,e,n)}var Ow,Vh,Fw,Bw;Ow=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Vh=function(){};Fw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,pi(An.current);var s=null;switch(n){case"input":i=rh(t,i),r=rh(t,r),s=[];break;case"select":i=Be({},i,{value:void 0}),r=Be({},r,{value:void 0}),s=[];break;case"textarea":i=oh(t,i),r=oh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oc)}lh(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Xo.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var u=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Xo.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Pe("scroll",t),s||l===u||(s=[])):(s=s||[]).push(d,u))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Bw=function(t,e,n,r){n!==r&&(e.flags|=4)};function vo(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AN(t,e,n){var r=e.pendingProps;switch(rm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return Ut(e.type)&&ac(),kt(e),null;case 3:return r=e.stateNode,Ss(),Ve(Bt),Ve(Ct),hm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,yn!==null&&($h(yn),yn=null))),Vh(t,e),kt(e),null;case 5:dm(e);var i=pi(ca.current);if(n=e.type,t!==null&&e.stateNode!=null)Fw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Z(166));return kt(e),null}if(t=pi(An.current),fl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[In]=e,r[aa]=s,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(i=0;i<No.length;i++)Pe(No[i],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":tg(r,s),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Pe("invalid",r);break;case"textarea":rg(r,s),Pe("invalid",r)}lh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&hl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&hl(r.textContent,l,t),i=["children",""+l]):Xo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":il(r),ng(r,s,!0);break;case"textarea":il(r),ig(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=oc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=p1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[In]=e,t[aa]=r,Ow(t,e,!1,!1),e.stateNode=t;e:{switch(o=ch(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),i=r;break;case"iframe":case"object":case"embed":Pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<No.length;i++)Pe(No[i],t);i=r;break;case"source":Pe("error",t),i=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),i=r;break;case"details":Pe("toggle",t),i=r;break;case"input":tg(t,r),i=rh(t,r),Pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Be({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":rg(t,r),i=oh(t,r),Pe("invalid",t);break;default:i=r}lh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?y1(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&g1(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Jo(t,u):typeof u=="number"&&Jo(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Xo.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Pe("scroll",t):u!=null&&Uf(t,s,u,o))}switch(n){case"input":il(t),ng(t,r,!1);break;case"textarea":il(t),ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?fs(t,!!r.multiple,s,!1):r.defaultValue!=null&&fs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=oc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)Bw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Z(166));if(n=pi(ca.current),pi(An.current),fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[In]=e,(s=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:hl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=e,e.stateNode=r}return kt(e),null;case 13:if(Ve(Oe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&Kt!==null&&e.mode&1&&!(e.flags&128))sw(),Ns(),e.flags|=98560,s=!1;else if(s=fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Z(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Z(317));s[In]=e}else Ns(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),s=!1}else yn!==null&&($h(yn),yn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Oe.current&1?ot===0&&(ot=3):Em())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Ss(),Vh(t,e),t===null&&sa(e.stateNode.containerInfo),kt(e),null;case 10:return am(e.type._context),kt(e),null;case 17:return Ut(e.type)&&ac(),kt(e),null;case 19:if(Ve(Oe),s=e.memoizedState,s===null)return kt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)vo(s,!1);else{if(ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=mc(t),o!==null){for(e.flags|=128,vo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ze(Oe,Oe.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ge()>Is&&(e.flags|=128,r=!0,vo(s,!1),e.lanes=4194304)}else{if(!r)if(t=mc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Me)return kt(e),null}else 2*Ge()-s.renderingStartTime>Is&&n!==1073741824&&(e.flags|=128,r=!0,vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ge(),e.sibling=null,n=Oe.current,ze(Oe,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return _m(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function PN(t,e){switch(rm(e),e.tag){case 1:return Ut(e.type)&&ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ss(),Ve(Bt),Ve(Ct),hm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dm(e),null;case 13:if(Ve(Oe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Ns()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ve(Oe),null;case 4:return Ss(),null;case 10:return am(e.type._context),null;case 22:case 23:return _m(),null;case 24:return null;default:return null}}var gl=!1,Tt=!1,RN=typeof WeakSet=="function"?WeakSet:Set,oe=null;function os(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){He(t,e,r)}else n.current=null}function Dh(t,e,n){try{n()}catch(r){He(t,e,r)}}var Kg=!1;function VN(t,e){if(vh=rc,t=H1(),tm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var v;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===n&&++d===i&&(l=o),p===s&&++h===r&&(u=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(wh={focusedElem:t,selectionRange:n},rc=!1,oe=e;oe!==null;)if(e=oe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,oe=t;else for(;oe!==null;){e=oe;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var N=T.memoizedProps,z=T.memoizedState,_=e.stateNode,y=_.getSnapshotBeforeUpdate(e.elementType===e.type?N:gn(e.type,N),z);_.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(I){He(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,oe=t;break}oe=e.return}return T=Kg,Kg=!1,T}function Lo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Dh(e,n,s)}i=i.next}while(i!==r)}}function eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Uw(t){var e=t.alternate;e!==null&&(t.alternate=null,Uw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[In],delete e[aa],delete e[_h],delete e[xN],delete e[yN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $w(t){return t.tag===5||t.tag===3||t.tag===4}function Gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$w(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Lh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oc));else if(r!==4&&(t=t.child,t!==null))for(Lh(t,e,n),t=t.sibling;t!==null;)Lh(t,e,n),t=t.sibling}function Oh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Oh(t,e,n),t=t.sibling;t!==null;)Oh(t,e,n),t=t.sibling}var ht=null,xn=!1;function yr(t,e,n){for(n=n.child;n!==null;)qw(t,e,n),n=n.sibling}function qw(t,e,n){if(zn&&typeof zn.onCommitFiberUnmount=="function")try{zn.onCommitFiberUnmount(Hc,n)}catch{}switch(n.tag){case 5:Tt||os(n,e);case 6:var r=ht,i=xn;ht=null,yr(t,e,n),ht=r,xn=i,ht!==null&&(xn?(t=ht,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ht.removeChild(n.stateNode));break;case 18:ht!==null&&(xn?(t=ht,n=n.stateNode,t.nodeType===8?cd(t.parentNode,n):t.nodeType===1&&cd(t,n),na(t)):cd(ht,n.stateNode));break;case 4:r=ht,i=xn,ht=n.stateNode.containerInfo,xn=!0,yr(t,e,n),ht=r,xn=i;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Dh(n,e,o),i=i.next}while(i!==r)}yr(t,e,n);break;case 1:if(!Tt&&(os(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){He(n,e,l)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,yr(t,e,n),Tt=r):yr(t,e,n);break;default:yr(t,e,n)}}function Qg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RN),e.forEach(function(r){var i=qN.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ht=l.stateNode,xn=!1;break e;case 3:ht=l.stateNode.containerInfo,xn=!0;break e;case 4:ht=l.stateNode.containerInfo,xn=!0;break e}l=l.return}if(ht===null)throw Error(Z(160));qw(s,o,i),ht=null,xn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(d){He(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Ww(e,t),e=e.sibling}function Ww(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Cn(t),r&4){try{Lo(3,t,t.return),eu(3,t)}catch(N){He(t,t.return,N)}try{Lo(5,t,t.return)}catch(N){He(t,t.return,N)}}break;case 1:fn(e,t),Cn(t),r&512&&n!==null&&os(n,n.return);break;case 5:if(fn(e,t),Cn(t),r&512&&n!==null&&os(n,n.return),t.flags&32){var i=t.stateNode;try{Jo(i,"")}catch(N){He(t,t.return,N)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&f1(i,s),ch(l,o);var d=ch(l,s);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?y1(i,m):h==="dangerouslySetInnerHTML"?g1(i,m):h==="children"?Jo(i,m):Uf(i,h,m,d)}switch(l){case"input":ih(i,s);break;case"textarea":m1(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?fs(i,!!s.multiple,v,!1):p!==!!s.multiple&&(s.defaultValue!=null?fs(i,!!s.multiple,s.defaultValue,!0):fs(i,!!s.multiple,s.multiple?[]:"",!1))}i[aa]=s}catch(N){He(t,t.return,N)}}break;case 6:if(fn(e,t),Cn(t),r&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(N){He(t,t.return,N)}}break;case 3:if(fn(e,t),Cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{na(e.containerInfo)}catch(N){He(t,t.return,N)}break;case 4:fn(e,t),Cn(t);break;case 13:fn(e,t),Cn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bm=Ge())),r&4&&Qg(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(d=Tt)||h,fn(e,t),Tt=d):fn(e,t),Cn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(oe=t,h=t.child;h!==null;){for(m=oe=h;oe!==null;){switch(p=oe,v=p.child,p.tag){case 0:case 11:case 14:case 15:Lo(4,p,p.return);break;case 1:os(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(N){He(r,n,N)}}break;case 5:os(p,p.return);break;case 22:if(p.memoizedState!==null){Xg(m);continue}}v!==null?(v.return=p,oe=v):Xg(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{i=m.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=x1("display",o))}catch(N){He(t,t.return,N)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(N){He(t,t.return,N)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:fn(e,t),Cn(t),r&4&&Qg(t);break;case 21:break;default:fn(e,t),Cn(t)}}function Cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($w(n)){var r=n;break e}n=n.return}throw Error(Z(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Jo(i,""),r.flags&=-33);var s=Gg(t);Oh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gg(t);Lh(t,l,o);break;default:throw Error(Z(161))}}catch(u){He(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function DN(t,e,n){oe=t,Hw(t)}function Hw(t,e,n){for(var r=(t.mode&1)!==0;oe!==null;){var i=oe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||gl;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Tt;l=gl;var d=Tt;if(gl=o,(Tt=u)&&!d)for(oe=i;oe!==null;)o=oe,u=o.child,o.tag===22&&o.memoizedState!==null?Jg(i):u!==null?(u.return=o,oe=u):Jg(i);for(;s!==null;)oe=s,Hw(s),s=s.sibling;oe=i,gl=l,Tt=d}Yg(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,oe=s):Yg(t)}}function Yg(t){for(;oe!==null;){var e=oe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Rg(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&na(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Tt||e.flags&512&&Mh(e)}catch(p){He(e,e.return,p)}}if(e===t){oe=null;break}if(n=e.sibling,n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Xg(t){for(;oe!==null;){var e=oe;if(e===t){oe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,oe=n;break}oe=e.return}}function Jg(t){for(;oe!==null;){var e=oe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{eu(4,e)}catch(u){He(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){He(e,i,u)}}var s=e.return;try{Mh(e)}catch(u){He(e,s,u)}break;case 5:var o=e.return;try{Mh(e)}catch(u){He(e,o,u)}}}catch(u){He(e,e.return,u)}if(e===t){oe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,oe=l;break}oe=e.return}}var MN=Math.ceil,xc=dr.ReactCurrentDispatcher,vm=dr.ReactCurrentOwner,an=dr.ReactCurrentBatchConfig,ke=0,dt=null,Je=null,xt=0,Ht=0,as=Jr(0),ot=0,fa=null,Si=0,tu=0,wm=0,Oo=null,Lt=null,bm=0,Is=1/0,Wn=null,yc=!1,Fh=null,Pr=null,xl=!1,Nr=null,vc=0,Fo=0,Bh=null,Ll=-1,Ol=0;function Pt(){return ke&6?Ge():Ll!==-1?Ll:Ll=Ge()}function Rr(t){return t.mode&1?ke&2&&xt!==0?xt&-xt:wN.transition!==null?(Ol===0&&(Ol=I1()),Ol):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:M1(t.type)),t):1}function kn(t,e,n,r){if(50<Fo)throw Fo=0,Bh=null,Error(Z(185));ja(t,n,r),(!(ke&2)||t!==dt)&&(t===dt&&(!(ke&2)&&(tu|=n),ot===4&&Er(t,xt)),$t(t,r),n===1&&ke===0&&!(e.mode&1)&&(Is=Ge()+500,Xc&&Zr()))}function $t(t,e){var n=t.callbackNode;wT(t,e);var r=nc(t,t===dt?xt:0);if(r===0)n!==null&&ag(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ag(n),e===1)t.tag===0?vN(Zg.bind(null,t)):nw(Zg.bind(null,t)),pN(function(){!(ke&6)&&Zr()}),n=null;else{switch(z1(r)){case 1:n=Kf;break;case 4:n=S1;break;case 16:n=tc;break;case 536870912:n=j1;break;default:n=tc}n=eb(n,Kw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Kw(t,e){if(Ll=-1,Ol=0,ke&6)throw Error(Z(327));var n=t.callbackNode;if(ys()&&t.callbackNode!==n)return null;var r=nc(t,t===dt?xt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wc(t,r);else{e=r;var i=ke;ke|=2;var s=Qw();(dt!==t||xt!==e)&&(Wn=null,Is=Ge()+500,wi(t,e));do try{FN();break}catch(l){Gw(t,l)}while(!0);om(),xc.current=s,ke=i,Je!==null?e=0:(dt=null,xt=0,e=ot)}if(e!==0){if(e===2&&(i=mh(t),i!==0&&(r=i,e=Uh(t,i))),e===1)throw n=fa,wi(t,0),Er(t,r),$t(t,Ge()),n;if(e===6)Er(t,r);else{if(i=t.current.alternate,!(r&30)&&!LN(i)&&(e=wc(t,r),e===2&&(s=mh(t),s!==0&&(r=s,e=Uh(t,s))),e===1))throw n=fa,wi(t,0),Er(t,r),$t(t,Ge()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Z(345));case 2:ui(t,Lt,Wn);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=bm+500-Ge(),10<e)){if(nc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Pt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=kh(ui.bind(null,t,Lt,Wn),e);break}ui(t,Lt,Wn);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-bn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MN(r/1960))-r,10<r){t.timeoutHandle=kh(ui.bind(null,t,Lt,Wn),r);break}ui(t,Lt,Wn);break;case 5:ui(t,Lt,Wn);break;default:throw Error(Z(329))}}}return $t(t,Ge()),t.callbackNode===n?Kw.bind(null,t):null}function Uh(t,e){var n=Oo;return t.current.memoizedState.isDehydrated&&(wi(t,e).flags|=256),t=wc(t,e),t!==2&&(e=Lt,Lt=n,e!==null&&$h(e)),t}function $h(t){Lt===null?Lt=t:Lt.push.apply(Lt,t)}function LN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!_n(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~wm,e&=~tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-bn(e),r=1<<n;t[n]=-1,e&=~r}}function Zg(t){if(ke&6)throw Error(Z(327));ys();var e=nc(t,0);if(!(e&1))return $t(t,Ge()),null;var n=wc(t,e);if(t.tag!==0&&n===2){var r=mh(t);r!==0&&(e=r,n=Uh(t,r))}if(n===1)throw n=fa,wi(t,0),Er(t,e),$t(t,Ge()),n;if(n===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ui(t,Lt,Wn),$t(t,Ge()),null}function km(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Is=Ge()+500,Xc&&Zr())}}function ji(t){Nr!==null&&Nr.tag===0&&!(ke&6)&&ys();var e=ke;ke|=1;var n=an.transition,r=Ne;try{if(an.transition=null,Ne=1,t)return t()}finally{Ne=r,an.transition=n,ke=e,!(ke&6)&&Zr()}}function _m(){Ht=as.current,Ve(as)}function wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mN(n)),Je!==null)for(n=Je.return;n!==null;){var r=n;switch(rm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ac();break;case 3:Ss(),Ve(Bt),Ve(Ct),hm();break;case 5:dm(r);break;case 4:Ss();break;case 13:Ve(Oe);break;case 19:Ve(Oe);break;case 10:am(r.type._context);break;case 22:case 23:_m()}n=n.return}if(dt=t,Je=t=Vr(t.current,null),xt=Ht=e,ot=0,fa=null,wm=tu=Si=0,Lt=Oo=null,mi!==null){for(e=0;e<mi.length;e++)if(n=mi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}mi=null}return t}function Gw(t,e){do{var n=Je;try{if(om(),Vl.current=gc,pc){for(var r=Fe.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pc=!1}if(Ci=0,ut=st=Fe=null,Mo=!1,ua=0,vm.current=null,n===null||n.return===null){ot=1,fa=e,Je=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=xt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Fg(o);if(v!==null){v.flags&=-257,Bg(v,o,l,s,e),v.mode&1&&Og(s,d,e),e=v,u=d;var T=e.updateQueue;if(T===null){var N=new Set;N.add(u),e.updateQueue=N}else T.add(u);break e}else{if(!(e&1)){Og(s,d,e),Em();break e}u=Error(Z(426))}}else if(Me&&l.mode&1){var z=Fg(o);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Bg(z,o,l,s,e),im(js(u,l));break e}}s=u=js(u,l),ot!==4&&(ot=2),Oo===null?Oo=[s]:Oo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var _=zw(s,u,e);Pg(s,_);break e;case 1:l=u;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Pr===null||!Pr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=Aw(s,l,e);Pg(s,I);break e}}s=s.return}while(s!==null)}Xw(n)}catch(V){e=V,Je===n&&n!==null&&(Je=n=n.return);continue}break}while(!0)}function Qw(){var t=xc.current;return xc.current=gc,t===null?gc:t}function Em(){(ot===0||ot===3||ot===2)&&(ot=4),dt===null||!(Si&268435455)&&!(tu&268435455)||Er(dt,xt)}function wc(t,e){var n=ke;ke|=2;var r=Qw();(dt!==t||xt!==e)&&(Wn=null,wi(t,e));do try{ON();break}catch(i){Gw(t,i)}while(!0);if(om(),ke=n,xc.current=r,Je!==null)throw Error(Z(261));return dt=null,xt=0,ot}function ON(){for(;Je!==null;)Yw(Je)}function FN(){for(;Je!==null&&!dT();)Yw(Je)}function Yw(t){var e=Zw(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?Xw(t):Je=e,vm.current=null}function Xw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PN(n,e),n!==null){n.flags&=32767,Je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,Je=null;return}}else if(n=AN(n,e,Ht),n!==null){Je=n;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);ot===0&&(ot=5)}function ui(t,e,n){var r=Ne,i=an.transition;try{an.transition=null,Ne=1,BN(t,e,n,r)}finally{an.transition=i,Ne=r}return null}function BN(t,e,n,r){do ys();while(Nr!==null);if(ke&6)throw Error(Z(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bT(t,s),t===dt&&(Je=dt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xl||(xl=!0,eb(tc,function(){return ys(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=an.transition,an.transition=null;var o=Ne;Ne=1;var l=ke;ke|=4,vm.current=null,VN(t,n),Ww(n,t),aN(wh),rc=!!vh,wh=vh=null,t.current=n,DN(n),hT(),ke=l,Ne=o,an.transition=s}else t.current=n;if(xl&&(xl=!1,Nr=t,vc=i),s=t.pendingLanes,s===0&&(Pr=null),pT(n.stateNode),$t(t,Ge()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(yc)throw yc=!1,t=Fh,Fh=null,t;return vc&1&&t.tag!==0&&ys(),s=t.pendingLanes,s&1?t===Bh?Fo++:(Fo=0,Bh=t):Fo=0,Zr(),null}function ys(){if(Nr!==null){var t=z1(vc),e=an.transition,n=Ne;try{if(an.transition=null,Ne=16>t?16:t,Nr===null)var r=!1;else{if(t=Nr,Nr=null,vc=0,ke&6)throw Error(Z(331));var i=ke;for(ke|=4,oe=t.current;oe!==null;){var s=oe,o=s.child;if(oe.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(oe=d;oe!==null;){var h=oe;switch(h.tag){case 0:case 11:case 15:Lo(8,h,s)}var m=h.child;if(m!==null)m.return=h,oe=m;else for(;oe!==null;){h=oe;var p=h.sibling,v=h.return;if(Uw(h),h===d){oe=null;break}if(p!==null){p.return=v,oe=p;break}oe=v}}}var T=s.alternate;if(T!==null){var N=T.child;if(N!==null){T.child=null;do{var z=N.sibling;N.sibling=null,N=z}while(N!==null)}}oe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,oe=o;else e:for(;oe!==null;){if(s=oe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Lo(9,s,s.return)}var _=s.sibling;if(_!==null){_.return=s.return,oe=_;break e}oe=s.return}}var y=t.current;for(oe=y;oe!==null;){o=oe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,oe=w;else e:for(o=y;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:eu(9,l)}}catch(V){He(l,l.return,V)}if(l===o){oe=null;break e}var I=l.sibling;if(I!==null){I.return=l.return,oe=I;break e}oe=l.return}}if(ke=i,Zr(),zn&&typeof zn.onPostCommitFiberRoot=="function")try{zn.onPostCommitFiberRoot(Hc,t)}catch{}r=!0}return r}finally{Ne=n,an.transition=e}}return!1}function ex(t,e,n){e=js(n,e),e=zw(t,e,1),t=Ar(t,e,1),e=Pt(),t!==null&&(ja(t,1,e),$t(t,e))}function He(t,e,n){if(t.tag===3)ex(t,t,n);else for(;e!==null;){if(e.tag===3){ex(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Pr===null||!Pr.has(r))){t=js(n,t),t=Aw(e,t,1),e=Ar(e,t,1),t=Pt(),e!==null&&(ja(e,1,t),$t(e,t));break}}e=e.return}}function UN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&n,dt===t&&(xt&n)===n&&(ot===4||ot===3&&(xt&130023424)===xt&&500>Ge()-bm?wi(t,0):wm|=n),$t(t,e)}function Jw(t,e){e===0&&(t.mode&1?(e=al,al<<=1,!(al&130023424)&&(al=4194304)):e=1);var n=Pt();t=tr(t,e),t!==null&&(ja(t,e,n),$t(t,n))}function $N(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jw(t,n)}function qN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Z(314))}r!==null&&r.delete(e),Jw(t,n)}var Zw;Zw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Bt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,zN(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,Me&&e.flags&1048576&&rw(e,uc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ml(t,e),t=e.pendingProps;var i=Ts(e,Ct.current);xs(e,n),i=mm(null,e,r,t,i,n);var s=pm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(s=!0,lc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,cm(e),i.updater=Zc,e.stateNode=i,i._reactInternals=e,jh(e,r,t,n),e=Ah(null,e,r,!0,s,n)):(e.tag=0,Me&&s&&nm(e),It(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ml(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=HN(r),t=gn(r,t),i){case 0:e=zh(null,e,r,t,n);break e;case 1:e=qg(null,e,r,t,n);break e;case 11:e=Ug(null,e,r,t,n);break e;case 14:e=$g(null,e,r,gn(r.type,t),n);break e}throw Error(Z(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),zh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),qg(t,e,r,i,n);case 3:e:{if(Dw(e),t===null)throw Error(Z(387));r=e.pendingProps,s=e.memoizedState,i=s.element,cw(t,e),fc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=js(Error(Z(423)),e),e=Wg(t,e,r,n,i);break e}else if(r!==i){i=js(Error(Z(424)),e),e=Wg(t,e,r,n,i);break e}else for(Kt=zr(e.stateNode.containerInfo.firstChild),Gt=e,Me=!0,yn=null,n=aw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ns(),r===i){e=nr(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return uw(e),t===null&&Nh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,bh(r,i)?o=null:s!==null&&bh(r,s)&&(e.flags|=32),Vw(t,e),It(t,e,o,n),e.child;case 6:return t===null&&Nh(e),null;case 13:return Mw(t,e,n);case 4:return um(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Cs(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),Ug(t,e,r,i,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ze(dc,r._currentValue),r._currentValue=o,s!==null)if(_n(s.value,o)){if(s.children===i.children&&!Bt.current){e=nr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Yn(-1,n&-n),u.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Ch(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ch(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xs(e,n),i=cn(i),r=r(i),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,i=gn(r,e.pendingProps),i=gn(r.type,i),$g(t,e,r,i,n);case 15:return Pw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),Ml(t,e),e.tag=1,Ut(r)?(t=!0,lc(e)):t=!1,xs(e,n),Iw(e,r,i),jh(e,r,i,n),Ah(null,e,r,!0,t,n);case 19:return Lw(t,e,n);case 22:return Rw(t,e,n)}throw Error(Z(156,e.tag))};function eb(t,e){return C1(t,e)}function WN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(t,e,n,r){return new WN(t,e,n,r)}function Tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HN(t){if(typeof t=="function")return Tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===qf)return 11;if(t===Wf)return 14}return 2}function Vr(t,e){var n=t.alternate;return n===null?(n=sn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Tm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Xi:return bi(n.children,i,s,e);case $f:o=8,i|=8;break;case Zd:return t=sn(12,n,e,i|2),t.elementType=Zd,t.lanes=s,t;case eh:return t=sn(13,n,e,i),t.elementType=eh,t.lanes=s,t;case th:return t=sn(19,n,e,i),t.elementType=th,t.lanes=s,t;case u1:return nu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l1:o=10;break e;case c1:o=9;break e;case qf:o=11;break e;case Wf:o=14;break e;case br:o=16,r=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=sn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function bi(t,e,n,r){return t=sn(7,t,r,e),t.lanes=n,t}function nu(t,e,n,r){return t=sn(22,t,r,e),t.elementType=u1,t.lanes=n,t.stateNode={isHidden:!1},t}function xd(t,e,n){return t=sn(6,t,null,e),t.lanes=n,t}function yd(t,e,n){return e=sn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KN(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ju(0),this.expirationTimes=Ju(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ju(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nm(t,e,n,r,i,s,o,l,u){return t=new KN(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=sn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cm(s),t}function GN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Yi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function tb(t){if(!t)return Br;t=t._reactInternals;e:{if(Di(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var n=t.type;if(Ut(n))return tw(t,n,e)}return e}function nb(t,e,n,r,i,s,o,l,u){return t=Nm(n,r,!0,t,i,s,o,l,u),t.context=tb(null),n=t.current,r=Pt(),i=Rr(n),s=Yn(r,i),s.callback=e??null,Ar(n,s,i),t.current.lanes=i,ja(t,i,r),$t(t,r),t}function ru(t,e,n,r){var i=e.current,s=Pt(),o=Rr(i);return n=tb(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ar(i,e,o),t!==null&&(kn(t,i,o,s),Rl(t,i,o)),o}function bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Cm(t,e){tx(t,e),(t=t.alternate)&&tx(t,e)}function QN(){return null}var rb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sm(t){this._internalRoot=t}iu.prototype.render=Sm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));ru(t,e,null,null)};iu.prototype.unmount=Sm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ji(function(){ru(null,t,null,null)}),e[er]=null}};function iu(t){this._internalRoot=t}iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=R1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&D1(t)}};function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nx(){}function YN(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=bc(o);s.call(d)}}var o=nb(e,r,t,0,null,!1,!1,"",nx);return t._reactRootContainer=o,t[er]=o.current,sa(t.nodeType===8?t.parentNode:t),ji(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=bc(u);l.call(d)}}var u=Nm(t,0,!1,null,null,!1,!1,"",nx);return t._reactRootContainer=u,t[er]=u.current,sa(t.nodeType===8?t.parentNode:t),ji(function(){ru(e,u,n,r)}),u}function ou(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=bc(o);l.call(u)}}ru(e,o,t,i)}else o=YN(n,e,t,i,r);return bc(o)}A1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=To(e.pendingLanes);n!==0&&(Gf(e,n|1),$t(e,Ge()),!(ke&6)&&(Is=Ge()+500,Zr()))}break;case 13:ji(function(){var r=tr(t,1);if(r!==null){var i=Pt();kn(r,t,1,i)}}),Cm(t,1)}};Qf=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Pt();kn(e,t,134217728,n)}Cm(t,134217728)}};P1=function(t){if(t.tag===13){var e=Rr(t),n=tr(t,e);if(n!==null){var r=Pt();kn(n,t,e,r)}Cm(t,e)}};R1=function(){return Ne};V1=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};dh=function(t,e,n){switch(e){case"input":if(ih(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Yc(r);if(!i)throw Error(Z(90));h1(r),ih(r,i)}}}break;case"textarea":m1(t,n);break;case"select":e=n.value,e!=null&&fs(t,!!n.multiple,e,!1)}};b1=km;k1=ji;var XN={usingClientEntryPoint:!1,Events:[za,ts,Yc,v1,w1,km]},wo={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JN={bundleType:wo.bundleType,version:wo.version,rendererPackageName:wo.rendererPackageName,rendererConfig:wo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T1(t),t===null?null:t.stateNode},findFiberByHostInstance:wo.findFiberByHostInstance||QN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{Hc=yl.inject(JN),zn=yl}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jm(e))throw Error(Z(200));return GN(t,e,null,n)};Xt.createRoot=function(t,e){if(!jm(t))throw Error(Z(299));var n=!1,r="",i=rb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Nm(t,1,!1,null,null,n,!1,r,i),t[er]=e.current,sa(t.nodeType===8?t.parentNode:t),new Sm(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=T1(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return ji(t)};Xt.hydrate=function(t,e,n){if(!su(e))throw Error(Z(200));return ou(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!jm(t))throw Error(Z(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=rb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nb(e,null,t,1,n??null,i,!1,s,o),t[er]=e.current,sa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new iu(e)};Xt.render=function(t,e,n){if(!su(e))throw Error(Z(200));return ou(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!su(t))throw Error(Z(40));return t._reactRootContainer?(ji(function(){ou(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Xt.unstable_batchedUpdates=km;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!su(n))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return ou(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function ib(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ib)}catch(t){console.error(t)}}ib(),i1.exports=Xt;var kc=i1.exports,rx=kc;Xd.createRoot=rx.createRoot,Xd.hydrateRoot=rx.hydrateRoot;function ix({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return a.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>a.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const ZN=()=>{};var sx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},eC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ob={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,d=u?t[i+2]:0,h=s>>2,m=(s&3)<<4|l>>4;let p=(l&15)<<2|d>>6,v=d&63;u||(v=64,o||(p=64)),r.push(n[h],n[m],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sb(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||m==null)throw new tC;const p=s<<2|l>>4;if(r.push(p),d!==64){const v=l<<4&240|d>>2;if(r.push(v),m!==64){const T=d<<6&192|m;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nC=function(t){const e=sb(t);return ob.encodeByteArray(e,!0)},_c=function(t){return nC(t).replace(/\./g,"")},rC=function(t){try{return ob.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=()=>iC().__FIREBASE_DEFAULTS__,oC=()=>{if(typeof process>"u"||typeof sx>"u")return;const t=sx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rC(t[1]);return e&&JSON.parse(e)},Im=()=>{try{return ZN()||sC()||oC()||aC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},lC=t=>{var e,n;return(n=(e=Im())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},cC=t=>{const e=lC(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ab=()=>{var t;return(t=Im())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dC(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[_c(JSON.stringify(n)),_c(JSON.stringify(o)),""].join(".")}const Bo={};function fC(){const t={prod:[],emulator:[]};for(const e of Object.keys(Bo))Bo[e]?t.emulator.push(e):t.prod.push(e);return t}function mC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let ox=!1;function pC(t,e){if(typeof window>"u"||typeof document>"u"||!zm(window.location.host)||Bo[t]===e||Bo[t]||ox)return;Bo[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",s=fC().prod.length>0;function o(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function u(p,v){p.setAttribute("width","24"),p.setAttribute("id",v),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function d(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{ox=!0,o()},p}function h(p,v){p.setAttribute("id",v),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function m(){const p=mC(r),v=n("text"),T=document.getElementById(v)||document.createElement("span"),N=n("learnmore"),z=document.getElementById(N)||document.createElement("a"),_=n("preprendIcon"),y=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const w=p.element;l(w),h(z,N);const I=d();u(y,_),w.append(y,T,z,I),document.body.appendChild(w)}s?(T.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,T.innerText="Preview backend running in this workspace."),T.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xC(){var e;const t=(e=Im())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vC(){return!xC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lb(){try{return typeof indexedDB=="object"}catch{return!1}}function cb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function wC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="FirebaseError";class ei extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=bC,Object.setPrototypeOf(this,ei.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,au.prototype.create)}}class au{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?kC(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ei(i,l,r)}}function kC(t,e){return t.replace(_C,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const _C=/\{\$([^}]+)}/g;function ma(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(ax(s)&&ax(o)){if(!ma(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function ax(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=1e3,TC=2,NC=4*60*60*1e3,CC=.5;function lx(t,e=EC,n=TC){const r=e*Math.pow(n,t),i=Math.round(CC*r*(Math.random()-.5)*2);return Math.min(NC,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t){return t&&t._delegate?t._delegate:t}class ir{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const di="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new uC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IC(e))try{this.getOrInitializeService({instanceIdentifier:di})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=di){return this.instances.has(e)}getOptions(e=di){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=di){return this.component?this.component.multipleInstances?e:di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jC(t){return t===di?void 0:t}function IC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(be||(be={}));const AC={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},PC=be.INFO,RC={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},VC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=RC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Am{constructor(e){this.name=e,this._logLevel=PC,this._logHandler=VC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?AC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const DC=(t,e)=>e.some(n=>t instanceof n);let cx,ux;function MC(){return cx||(cx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LC(){return ux||(ux=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ub=new WeakMap,qh=new WeakMap,db=new WeakMap,vd=new WeakMap,Pm=new WeakMap;function OC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Dr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ub.set(n,t)}).catch(()=>{}),Pm.set(e,t),e}function FC(t){if(qh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qh.set(t,e)}let Wh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||db.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Dr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function BC(t){Wh=t(Wh)}function UC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(wd(this),e,...n);return db.set(r,e.sort?e.sort():[e]),Dr(r)}:LC().includes(t)?function(...e){return t.apply(wd(this),e),Dr(ub.get(this))}:function(...e){return Dr(t.apply(wd(this),e))}}function $C(t){return typeof t=="function"?UC(t):(t instanceof IDBTransaction&&FC(t),DC(t,MC())?new Proxy(t,Wh):t)}function Dr(t){if(t instanceof IDBRequest)return OC(t);if(vd.has(t))return vd.get(t);const e=$C(t);return e!==t&&(vd.set(t,e),Pm.set(e,t)),e}const wd=t=>Pm.get(t);function hb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Dr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Dr(o.result),u.oldVersion,u.newVersion,Dr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const qC=["get","getKey","getAll","getAllKeys","count"],WC=["put","add","delete","clear"],bd=new Map;function dx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(bd.get(e))return bd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=WC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||qC.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&u.done]))[0]};return bd.set(e,s),s}BC(t=>({...t,get:(e,n,r)=>dx(e,n)||t.get(e,n,r),has:(e,n)=>!!dx(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function KC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Hh="@firebase/app",hx="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new Am("@firebase/app"),GC="@firebase/app-compat",QC="@firebase/analytics-compat",YC="@firebase/analytics",XC="@firebase/app-check-compat",JC="@firebase/app-check",ZC="@firebase/auth",eS="@firebase/auth-compat",tS="@firebase/database",nS="@firebase/data-connect",rS="@firebase/database-compat",iS="@firebase/functions",sS="@firebase/functions-compat",oS="@firebase/installations",aS="@firebase/installations-compat",lS="@firebase/messaging",cS="@firebase/messaging-compat",uS="@firebase/performance",dS="@firebase/performance-compat",hS="@firebase/remote-config",fS="@firebase/remote-config-compat",mS="@firebase/storage",pS="@firebase/storage-compat",gS="@firebase/firestore",xS="@firebase/ai",yS="@firebase/firestore-compat",vS="firebase",wS="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh="[DEFAULT]",bS={[Hh]:"fire-core",[GC]:"fire-core-compat",[YC]:"fire-analytics",[QC]:"fire-analytics-compat",[JC]:"fire-app-check",[XC]:"fire-app-check-compat",[ZC]:"fire-auth",[eS]:"fire-auth-compat",[tS]:"fire-rtdb",[nS]:"fire-data-connect",[rS]:"fire-rtdb-compat",[iS]:"fire-fn",[sS]:"fire-fn-compat",[oS]:"fire-iid",[aS]:"fire-iid-compat",[lS]:"fire-fcm",[cS]:"fire-fcm-compat",[uS]:"fire-perf",[dS]:"fire-perf-compat",[hS]:"fire-rc",[fS]:"fire-rc-compat",[mS]:"fire-gcs",[pS]:"fire-gcs-compat",[gS]:"fire-fst",[yS]:"fire-fst-compat",[xS]:"fire-vertex","fire-js":"fire-js",[vS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ec=new Map,kS=new Map,Gh=new Map;function fx(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ur(t){const e=t.name;if(Gh.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Gh.set(e,t);for(const n of Ec.values())fx(n,t);for(const n of kS.values())fx(n,t);return!0}function Pa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function _S(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mr=new au("app","Firebase",ES);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TS{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ir("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS=wS;function fb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Kh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Mr.create("bad-app-name",{appName:String(i)});if(n||(n=ab()),!n)throw Mr.create("no-options");const s=Ec.get(i);if(s){if(ma(n,s.options)&&ma(r,s.config))return s;throw Mr.create("duplicate-app",{appName:i})}const o=new zC(i);for(const u of Gh.values())o.addComponent(u);const l=new TS(n,r,o);return Ec.set(i,l),l}function mb(t=Kh){const e=Ec.get(t);if(!e&&t===Kh&&ab())return fb();if(!e)throw Mr.create("no-app",{appName:t});return e}function Pn(t,e,n){let r=bS[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(o.join(" "));return}Ur(new ir(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebase-heartbeat-database",SS=1,pa="firebase-heartbeat-store";let kd=null;function pb(){return kd||(kd=hb(CS,SS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Mr.create("idb-open",{originalErrorMessage:t.message})})),kd}async function jS(t){try{const n=(await pb()).transaction(pa),r=await n.objectStore(pa).get(gb(t));return await n.done,r}catch(e){if(e instanceof ei)sr.warn(e.message);else{const n=Mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function mx(t,e){try{const r=(await pb()).transaction(pa,"readwrite");await r.objectStore(pa).put(e,gb(t)),await r.done}catch(n){if(n instanceof ei)sr.warn(n.message);else{const r=Mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function gb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS=1024,zS=30;class AS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=px();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>zS){const o=VS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=px(),{heartbeatsToSend:r,unsentEntries:i}=PS(this._heartbeatsCache.heartbeats),s=_c(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return sr.warn(n),""}}}function px(){return new Date().toISOString().substring(0,10)}function PS(t,e=IS){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),gx(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),gx(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class RS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lb()?cb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return mx(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function gx(t){return _c(JSON.stringify({version:2,heartbeats:t})).length}function VS(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){Ur(new ir("platform-logger",e=>new HC(e),"PRIVATE")),Ur(new ir("heartbeat",e=>new AS(e),"PRIVATE")),Pn(Hh,hx,t),Pn(Hh,hx,"esm2020"),Pn("fire-js","")}DS("");var MS="firebase",LS="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn(MS,LS,"app");const xb="@firebase/installations",Rm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=1e4,vb=`w:${Rm}`,wb="FIS_v2",OS="https://firebaseinstallations.googleapis.com/v1",FS=60*60*1e3,BS="installations",US="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ii=new au(BS,US,$S);function bb(t){return t instanceof ei&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb({projectId:t}){return`${OS}/projects/${t}/installations`}function _b(t){return{token:t.token,requestStatus:2,expiresIn:WS(t.expiresIn),creationTime:Date.now()}}async function Eb(t,e){const r=(await e.json()).error;return Ii.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Tb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function qS(t,{refreshToken:e}){const n=Tb(t);return n.append("Authorization",HS(e)),n}async function Nb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WS(t){return Number(t.replace("s","000"))}function HS(t){return`${wb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=kb(t),i=Tb(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:wb,appId:t.appId,sdkVersion:vb},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await Nb(()=>fetch(r,l));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:_b(d.authToken)}}else throw await Eb("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS=/^[cdef][\w-]{21}$/,Qh="";function YS(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=XS(t);return QS.test(n)?n:Qh}catch{return Qh}}function XS(t){return GS(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=new Map;function jb(t,e){const n=lu(t);Ib(n,e),JS(n,e)}function Ib(t,e){const n=Sb.get(t);if(n)for(const r of n)r(e)}function JS(t,e){const n=ZS();n&&n.postMessage({key:t,fid:e}),ej()}let gi=null;function ZS(){return!gi&&"BroadcastChannel"in self&&(gi=new BroadcastChannel("[Firebase] FID Change"),gi.onmessage=t=>{Ib(t.data.key,t.data.fid)}),gi}function ej(){Sb.size===0&&gi&&(gi.close(),gi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="firebase-installations-database",nj=1,zi="firebase-installations-store";let _d=null;function Vm(){return _d||(_d=hb(tj,nj,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(zi)}}})),_d}async function Tc(t,e){const n=lu(t),i=(await Vm()).transaction(zi,"readwrite"),s=i.objectStore(zi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&jb(t,e.fid),e}async function zb(t){const e=lu(t),r=(await Vm()).transaction(zi,"readwrite");await r.objectStore(zi).delete(e),await r.done}async function cu(t,e){const n=lu(t),i=(await Vm()).transaction(zi,"readwrite"),s=i.objectStore(zi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&jb(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dm(t){let e;const n=await cu(t.appConfig,r=>{const i=rj(r),s=ij(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Qh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function rj(t){const e=t||{fid:YS(),registrationStatus:0};return Ab(e)}function ij(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ii.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=sj(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:oj(t)}:{installationEntry:e}}async function sj(t,e){try{const n=await KS(t,e);return Tc(t.appConfig,n)}catch(n){throw bb(n)&&n.customData.serverCode===409?await zb(t.appConfig):await Tc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function oj(t){let e=await xx(t.appConfig);for(;e.registrationStatus===1;)await Cb(100),e=await xx(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Dm(t);return r||n}return e}function xx(t){return cu(t,e=>{if(!e)throw Ii.create("installation-not-found");return Ab(e)})}function Ab(t){return aj(t)?{fid:t.fid,registrationStatus:0}:t}function aj(t){return t.registrationStatus===1&&t.registrationTime+yb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lj({appConfig:t,heartbeatServiceProvider:e},n){const r=cj(t,n),i=qS(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:vb,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},u=await Nb(()=>fetch(r,l));if(u.ok){const d=await u.json();return _b(d)}else throw await Eb("Generate Auth Token",u)}function cj(t,{fid:e}){return`${kb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mm(t,e=!1){let n;const r=await cu(t.appConfig,s=>{if(!Pb(s))throw Ii.create("not-registered");const o=s.authToken;if(!e&&hj(o))return s;if(o.requestStatus===1)return n=uj(t,e),s;{if(!navigator.onLine)throw Ii.create("app-offline");const l=mj(s);return n=dj(t,l),l}});return n?await n:r.authToken}async function uj(t,e){let n=await yx(t.appConfig);for(;n.authToken.requestStatus===1;)await Cb(100),n=await yx(t.appConfig);const r=n.authToken;return r.requestStatus===0?Mm(t,e):r}function yx(t){return cu(t,e=>{if(!Pb(e))throw Ii.create("not-registered");const n=e.authToken;return pj(n)?{...e,authToken:{requestStatus:0}}:e})}async function dj(t,e){try{const n=await lj(t,e),r={...e,authToken:n};return await Tc(t.appConfig,r),n}catch(n){if(bb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await zb(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Tc(t.appConfig,r)}throw n}}function Pb(t){return t!==void 0&&t.registrationStatus===2}function hj(t){return t.requestStatus===2&&!fj(t)}function fj(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+FS}function mj(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function pj(t){return t.requestStatus===1&&t.requestTime+yb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gj(t){const e=t,{installationEntry:n,registrationPromise:r}=await Dm(e);return r?r.catch(console.error):Mm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xj(t,e=!1){const n=t;return await yj(n),(await Mm(n,e)).token}async function yj(t){const{registrationPromise:e}=await Dm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vj(t){if(!t||!t.options)throw Ed("App Configuration");if(!t.name)throw Ed("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ed(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ed(t){return Ii.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="installations",wj="installations-internal",bj=t=>{const e=t.getProvider("app").getImmediate(),n=vj(e),r=Pa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},kj=t=>{const e=t.getProvider("app").getImmediate(),n=Pa(e,Rb).getImmediate();return{getId:()=>gj(n),getToken:i=>xj(n,i)}};function _j(){Ur(new ir(Rb,bj,"PUBLIC")),Ur(new ir(wj,kj,"PRIVATE"))}_j();Pn(xb,Rm);Pn(xb,Rm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="analytics",Ej="firebase_id",Tj="origin",Nj=60*1e3,Cj="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new Am("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sj={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Qt=new au("analytics","Analytics",Sj);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jj(t){if(!t.startsWith(Lm)){const e=Qt.create("invalid-gtag-resource",{gtagURL:t});return Rt.warn(e.message),""}return t}function Vb(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Ij(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function zj(t,e){const n=Ij("firebase-js-sdk-policy",{createScriptURL:jj}),r=document.createElement("script"),i=`${Lm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Aj(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Pj(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const u=(await Vb(n)).find(d=>d.measurementId===i);u&&await e[u.appId]}}catch(l){Rt.error(l)}t("config",i,s)}async function Rj(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await Vb(n);for(const u of o){const d=l.find(m=>m.measurementId===u),h=d&&e[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Rt.error(s)}}function Vj(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,u]=o;await Rj(t,e,n,l,u)}else if(s==="config"){const[l,u]=o;await Pj(t,e,n,r,l,u)}else if(s==="consent"){const[l,u]=o;t("consent",l,u)}else if(s==="get"){const[l,u,d]=o;t("get",l,u,d)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Rt.error(l)}}return i}function Dj(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Vj(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Mj(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Lm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lj=30,Oj=1e3;class Fj{constructor(e={},n=Oj){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Db=new Fj;function Bj(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Uj(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:Bj(n)},i=Cj.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let l="";try{const u=await s.json();(o=u.error)!=null&&o.message&&(l=u.error.message)}catch{}throw Qt.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function $j(t,e=Db,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw Qt.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Qt.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Hj;return setTimeout(async()=>{l.abort()},Nj),Mb({appId:r,apiKey:i,measurementId:s},o,l,e)}async function Mb(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Db){var l;const{appId:s,measurementId:o}=t;try{await qj(r,e)}catch(u){if(o)return Rt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:s,measurementId:o};throw u}try{const u=await Uj(t);return i.deleteThrottleMetadata(s),u}catch(u){const d=u;if(!Wj(d)){if(i.deleteThrottleMetadata(s),o)return Rt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:o};throw u}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?lx(n,i.intervalMillis,Lj):lx(n,i.intervalMillis),m={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,m),Rt.debug(`Calling attemptFetch again in ${h} millis`),Mb(t,m,r,i)}}function qj(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(Qt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Wj(t){if(!(t instanceof ei)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Hj{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Kj(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function Gj(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qj(){if(lb())try{await cb()}catch(t){return Rt.warn(Qt.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Rt.warn(Qt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Yj(t,e,n,r,i,s,o){const l=$j(t);l.then(p=>{n[p.measurementId]=p.appId,t.options.measurementId&&p.measurementId!==t.options.measurementId&&Rt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>Rt.error(p)),e.push(l);const u=Qj().then(p=>{if(p)return r.getId()}),[d,h]=await Promise.all([l,u]);Mj(s)||zj(s,d.measurementId),i("js",new Date);const m=(o==null?void 0:o.config)??{};return m[Tj]="firebase",m.update=!0,h!=null&&(m[Ej]=h),i("config",d.measurementId,m),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xj{constructor(e){this.app=e}_delete(){return delete vs[this.app.options.appId],Promise.resolve()}}let vs={},vx=[];const wx={};let Td="dataLayer",Jj="gtag",bx,Om,kx=!1;function Zj(){const t=[];if(yC()&&t.push("This is a browser extension environment."),wC()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=Qt.create("invalid-analytics-context",{errorInfo:e});Rt.warn(n.message)}}function e4(t,e,n){Zj();const r=t.options.appId;if(!r)throw Qt.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Rt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Qt.create("no-api-key");if(vs[r]!=null)throw Qt.create("already-exists",{id:r});if(!kx){Aj(Td);const{wrappedGtag:s,gtagCore:o}=Dj(vs,vx,wx,Td,Jj);Om=s,bx=o,kx=!0}return vs[r]=Yj(t,vx,wx,e,bx,Td,n),new Xj(t)}function t4(t=mb()){t=rr(t);const e=Pa(t,Nc);return e.isInitialized()?e.getImmediate():n4(t)}function n4(t,e={}){const n=Pa(t,Nc);if(n.isInitialized()){const i=n.getImmediate();if(ma(e,n.getOptions()))return i;throw Qt.create("already-initialized")}return n.initialize({options:e})}function r4(t,e,n){t=rr(t),Gj(Om,vs[t.app.options.appId],e,n).catch(r=>Rt.error(r))}function i4(t,e,n,r){t=rr(t),Kj(Om,vs[t.app.options.appId],e,n,r).catch(i=>Rt.error(i))}const _x="@firebase/analytics",Ex="0.10.19";function s4(){Ur(new ir(Nc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return e4(r,i,n)},"PUBLIC")),Ur(new ir("analytics-internal",t,"PRIVATE")),Pn(_x,Ex),Pn(_x,Ex,"esm2020");function t(e){try{const n=e.getProvider(Nc).getImmediate();return{logEvent:(r,i,s)=>i4(n,r,i,s),setUserProperties:(r,i)=>r4(n,r,i)}}catch(n){throw Qt.create("interop-component-reg-failed",{reason:n})}}}s4();var Tx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Lr,Lb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,x){function k(){}k.prototype=x.prototype,b.F=x.prototype,b.prototype=new k,b.prototype.constructor=b,b.D=function(C,j,A){for(var S=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)S[fe-2]=arguments[fe];return x.prototype[j].apply(C,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(b,x,k){k||(k=0);const C=Array(16);if(typeof x=="string")for(var j=0;j<16;++j)C[j]=x.charCodeAt(k++)|x.charCodeAt(k++)<<8|x.charCodeAt(k++)<<16|x.charCodeAt(k++)<<24;else for(j=0;j<16;++j)C[j]=x[k++]|x[k++]<<8|x[k++]<<16|x[k++]<<24;x=b.g[0],k=b.g[1],j=b.g[2];let A=b.g[3],S;S=x+(A^k&(j^A))+C[0]+3614090360&4294967295,x=k+(S<<7&4294967295|S>>>25),S=A+(j^x&(k^j))+C[1]+3905402710&4294967295,A=x+(S<<12&4294967295|S>>>20),S=j+(k^A&(x^k))+C[2]+606105819&4294967295,j=A+(S<<17&4294967295|S>>>15),S=k+(x^j&(A^x))+C[3]+3250441966&4294967295,k=j+(S<<22&4294967295|S>>>10),S=x+(A^k&(j^A))+C[4]+4118548399&4294967295,x=k+(S<<7&4294967295|S>>>25),S=A+(j^x&(k^j))+C[5]+1200080426&4294967295,A=x+(S<<12&4294967295|S>>>20),S=j+(k^A&(x^k))+C[6]+2821735955&4294967295,j=A+(S<<17&4294967295|S>>>15),S=k+(x^j&(A^x))+C[7]+4249261313&4294967295,k=j+(S<<22&4294967295|S>>>10),S=x+(A^k&(j^A))+C[8]+1770035416&4294967295,x=k+(S<<7&4294967295|S>>>25),S=A+(j^x&(k^j))+C[9]+2336552879&4294967295,A=x+(S<<12&4294967295|S>>>20),S=j+(k^A&(x^k))+C[10]+4294925233&4294967295,j=A+(S<<17&4294967295|S>>>15),S=k+(x^j&(A^x))+C[11]+2304563134&4294967295,k=j+(S<<22&4294967295|S>>>10),S=x+(A^k&(j^A))+C[12]+1804603682&4294967295,x=k+(S<<7&4294967295|S>>>25),S=A+(j^x&(k^j))+C[13]+4254626195&4294967295,A=x+(S<<12&4294967295|S>>>20),S=j+(k^A&(x^k))+C[14]+2792965006&4294967295,j=A+(S<<17&4294967295|S>>>15),S=k+(x^j&(A^x))+C[15]+1236535329&4294967295,k=j+(S<<22&4294967295|S>>>10),S=x+(j^A&(k^j))+C[1]+4129170786&4294967295,x=k+(S<<5&4294967295|S>>>27),S=A+(k^j&(x^k))+C[6]+3225465664&4294967295,A=x+(S<<9&4294967295|S>>>23),S=j+(x^k&(A^x))+C[11]+643717713&4294967295,j=A+(S<<14&4294967295|S>>>18),S=k+(A^x&(j^A))+C[0]+3921069994&4294967295,k=j+(S<<20&4294967295|S>>>12),S=x+(j^A&(k^j))+C[5]+3593408605&4294967295,x=k+(S<<5&4294967295|S>>>27),S=A+(k^j&(x^k))+C[10]+38016083&4294967295,A=x+(S<<9&4294967295|S>>>23),S=j+(x^k&(A^x))+C[15]+3634488961&4294967295,j=A+(S<<14&4294967295|S>>>18),S=k+(A^x&(j^A))+C[4]+3889429448&4294967295,k=j+(S<<20&4294967295|S>>>12),S=x+(j^A&(k^j))+C[9]+568446438&4294967295,x=k+(S<<5&4294967295|S>>>27),S=A+(k^j&(x^k))+C[14]+3275163606&4294967295,A=x+(S<<9&4294967295|S>>>23),S=j+(x^k&(A^x))+C[3]+4107603335&4294967295,j=A+(S<<14&4294967295|S>>>18),S=k+(A^x&(j^A))+C[8]+1163531501&4294967295,k=j+(S<<20&4294967295|S>>>12),S=x+(j^A&(k^j))+C[13]+2850285829&4294967295,x=k+(S<<5&4294967295|S>>>27),S=A+(k^j&(x^k))+C[2]+4243563512&4294967295,A=x+(S<<9&4294967295|S>>>23),S=j+(x^k&(A^x))+C[7]+1735328473&4294967295,j=A+(S<<14&4294967295|S>>>18),S=k+(A^x&(j^A))+C[12]+2368359562&4294967295,k=j+(S<<20&4294967295|S>>>12),S=x+(k^j^A)+C[5]+4294588738&4294967295,x=k+(S<<4&4294967295|S>>>28),S=A+(x^k^j)+C[8]+2272392833&4294967295,A=x+(S<<11&4294967295|S>>>21),S=j+(A^x^k)+C[11]+1839030562&4294967295,j=A+(S<<16&4294967295|S>>>16),S=k+(j^A^x)+C[14]+4259657740&4294967295,k=j+(S<<23&4294967295|S>>>9),S=x+(k^j^A)+C[1]+2763975236&4294967295,x=k+(S<<4&4294967295|S>>>28),S=A+(x^k^j)+C[4]+1272893353&4294967295,A=x+(S<<11&4294967295|S>>>21),S=j+(A^x^k)+C[7]+4139469664&4294967295,j=A+(S<<16&4294967295|S>>>16),S=k+(j^A^x)+C[10]+3200236656&4294967295,k=j+(S<<23&4294967295|S>>>9),S=x+(k^j^A)+C[13]+681279174&4294967295,x=k+(S<<4&4294967295|S>>>28),S=A+(x^k^j)+C[0]+3936430074&4294967295,A=x+(S<<11&4294967295|S>>>21),S=j+(A^x^k)+C[3]+3572445317&4294967295,j=A+(S<<16&4294967295|S>>>16),S=k+(j^A^x)+C[6]+76029189&4294967295,k=j+(S<<23&4294967295|S>>>9),S=x+(k^j^A)+C[9]+3654602809&4294967295,x=k+(S<<4&4294967295|S>>>28),S=A+(x^k^j)+C[12]+3873151461&4294967295,A=x+(S<<11&4294967295|S>>>21),S=j+(A^x^k)+C[15]+530742520&4294967295,j=A+(S<<16&4294967295|S>>>16),S=k+(j^A^x)+C[2]+3299628645&4294967295,k=j+(S<<23&4294967295|S>>>9),S=x+(j^(k|~A))+C[0]+4096336452&4294967295,x=k+(S<<6&4294967295|S>>>26),S=A+(k^(x|~j))+C[7]+1126891415&4294967295,A=x+(S<<10&4294967295|S>>>22),S=j+(x^(A|~k))+C[14]+2878612391&4294967295,j=A+(S<<15&4294967295|S>>>17),S=k+(A^(j|~x))+C[5]+4237533241&4294967295,k=j+(S<<21&4294967295|S>>>11),S=x+(j^(k|~A))+C[12]+1700485571&4294967295,x=k+(S<<6&4294967295|S>>>26),S=A+(k^(x|~j))+C[3]+2399980690&4294967295,A=x+(S<<10&4294967295|S>>>22),S=j+(x^(A|~k))+C[10]+4293915773&4294967295,j=A+(S<<15&4294967295|S>>>17),S=k+(A^(j|~x))+C[1]+2240044497&4294967295,k=j+(S<<21&4294967295|S>>>11),S=x+(j^(k|~A))+C[8]+1873313359&4294967295,x=k+(S<<6&4294967295|S>>>26),S=A+(k^(x|~j))+C[15]+4264355552&4294967295,A=x+(S<<10&4294967295|S>>>22),S=j+(x^(A|~k))+C[6]+2734768916&4294967295,j=A+(S<<15&4294967295|S>>>17),S=k+(A^(j|~x))+C[13]+1309151649&4294967295,k=j+(S<<21&4294967295|S>>>11),S=x+(j^(k|~A))+C[4]+4149444226&4294967295,x=k+(S<<6&4294967295|S>>>26),S=A+(k^(x|~j))+C[11]+3174756917&4294967295,A=x+(S<<10&4294967295|S>>>22),S=j+(x^(A|~k))+C[2]+718787259&4294967295,j=A+(S<<15&4294967295|S>>>17),S=k+(A^(j|~x))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+x&4294967295,b.g[1]=b.g[1]+(j+(S<<21&4294967295|S>>>11))&4294967295,b.g[2]=b.g[2]+j&4294967295,b.g[3]=b.g[3]+A&4294967295}r.prototype.v=function(b,x){x===void 0&&(x=b.length);const k=x-this.blockSize,C=this.C;let j=this.h,A=0;for(;A<x;){if(j==0)for(;A<=k;)i(this,b,A),A+=this.blockSize;if(typeof b=="string"){for(;A<x;)if(C[j++]=b.charCodeAt(A++),j==this.blockSize){i(this,C),j=0;break}}else for(;A<x;)if(C[j++]=b[A++],j==this.blockSize){i(this,C),j=0;break}}this.h=j,this.o+=x},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var x=1;x<b.length-8;++x)b[x]=0;x=this.o*8;for(var k=b.length-8;k<b.length;++k)b[k]=x&255,x/=256;for(this.v(b),b=Array(16),x=0,k=0;k<4;++k)for(let C=0;C<32;C+=8)b[x++]=this.g[k]>>>C&255;return b};function s(b,x){var k=l;return Object.prototype.hasOwnProperty.call(k,b)?k[b]:k[b]=x(b)}function o(b,x){this.h=x;const k=[];let C=!0;for(let j=b.length-1;j>=0;j--){const A=b[j]|0;C&&A==x||(k[j]=A,C=!1)}this.g=k}var l={};function u(b){return-128<=b&&b<128?s(b,function(x){return new o([x|0],x<0?-1:0)}):new o([b|0],b<0?-1:0)}function d(b){if(isNaN(b)||!isFinite(b))return m;if(b<0)return z(d(-b));const x=[];let k=1;for(let C=0;b>=k;C++)x[C]=b/k|0,k*=4294967296;return new o(x,0)}function h(b,x){if(b.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(b.charAt(0)=="-")return z(h(b.substring(1),x));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=d(Math.pow(x,8));let C=m;for(let A=0;A<b.length;A+=8){var j=Math.min(8,b.length-A);const S=parseInt(b.substring(A,A+j),x);j<8?(j=d(Math.pow(x,j)),C=C.j(j).add(d(S))):(C=C.j(k),C=C.add(d(S)))}return C}var m=u(0),p=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-z(this).m();let b=0,x=1;for(let k=0;k<this.g.length;k++){const C=this.i(k);b+=(C>=0?C:4294967296+C)*x,x*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(T(this))return"0";if(N(this))return"-"+z(this).toString(b);const x=d(Math.pow(b,6));var k=this;let C="";for(;;){const j=I(k,x).g;k=_(k,j.j(x));let A=((k.g.length>0?k.g[0]:k.h)>>>0).toString(b);if(k=j,T(k))return A+C;for(;A.length<6;)A="0"+A;C=A+C}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function T(b){if(b.h!=0)return!1;for(let x=0;x<b.g.length;x++)if(b.g[x]!=0)return!1;return!0}function N(b){return b.h==-1}t.l=function(b){return b=_(this,b),N(b)?-1:T(b)?0:1};function z(b){const x=b.g.length,k=[];for(let C=0;C<x;C++)k[C]=~b.g[C];return new o(k,~b.h).add(p)}t.abs=function(){return N(this)?z(this):this},t.add=function(b){const x=Math.max(this.g.length,b.g.length),k=[];let C=0;for(let j=0;j<=x;j++){let A=C+(this.i(j)&65535)+(b.i(j)&65535),S=(A>>>16)+(this.i(j)>>>16)+(b.i(j)>>>16);C=S>>>16,A&=65535,S&=65535,k[j]=S<<16|A}return new o(k,k[k.length-1]&-2147483648?-1:0)};function _(b,x){return b.add(z(x))}t.j=function(b){if(T(this)||T(b))return m;if(N(this))return N(b)?z(this).j(z(b)):z(z(this).j(b));if(N(b))return z(this.j(z(b)));if(this.l(v)<0&&b.l(v)<0)return d(this.m()*b.m());const x=this.g.length+b.g.length,k=[];for(var C=0;C<2*x;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(let j=0;j<b.g.length;j++){const A=this.i(C)>>>16,S=this.i(C)&65535,fe=b.i(j)>>>16,ae=b.i(j)&65535;k[2*C+2*j]+=S*ae,y(k,2*C+2*j),k[2*C+2*j+1]+=A*ae,y(k,2*C+2*j+1),k[2*C+2*j+1]+=S*fe,y(k,2*C+2*j+1),k[2*C+2*j+2]+=A*fe,y(k,2*C+2*j+2)}for(b=0;b<x;b++)k[b]=k[2*b+1]<<16|k[2*b];for(b=x;b<2*x;b++)k[b]=0;return new o(k,0)};function y(b,x){for(;(b[x]&65535)!=b[x];)b[x+1]+=b[x]>>>16,b[x]&=65535,x++}function w(b,x){this.g=b,this.h=x}function I(b,x){if(T(x))throw Error("division by zero");if(T(b))return new w(m,m);if(N(b))return x=I(z(b),x),new w(z(x.g),z(x.h));if(N(x))return x=I(b,z(x)),new w(z(x.g),x.h);if(b.g.length>30){if(N(b)||N(x))throw Error("slowDivide_ only works with positive integers.");for(var k=p,C=x;C.l(b)<=0;)k=V(k),C=V(C);var j=L(k,1),A=L(C,1);for(C=L(C,2),k=L(k,2);!T(C);){var S=A.add(C);S.l(b)<=0&&(j=j.add(k),A=S),C=L(C,1),k=L(k,1)}return x=_(b,j.j(x)),new w(j,x)}for(j=m;b.l(x)>=0;){for(k=Math.max(1,Math.floor(b.m()/x.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),A=d(k),S=A.j(x);N(S)||S.l(b)>0;)k-=C,A=d(k),S=A.j(x);T(A)&&(A=p),j=j.add(A),b=_(b,S)}return new w(j,b)}t.B=function(b){return I(this,b).h},t.and=function(b){const x=Math.max(this.g.length,b.g.length),k=[];for(let C=0;C<x;C++)k[C]=this.i(C)&b.i(C);return new o(k,this.h&b.h)},t.or=function(b){const x=Math.max(this.g.length,b.g.length),k=[];for(let C=0;C<x;C++)k[C]=this.i(C)|b.i(C);return new o(k,this.h|b.h)},t.xor=function(b){const x=Math.max(this.g.length,b.g.length),k=[];for(let C=0;C<x;C++)k[C]=this.i(C)^b.i(C);return new o(k,this.h^b.h)};function V(b){const x=b.g.length+1,k=[];for(let C=0;C<x;C++)k[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(k,b.h)}function L(b,x){const k=x>>5;x%=32;const C=b.g.length-k,j=[];for(let A=0;A<C;A++)j[A]=x>0?b.i(A+k)>>>x|b.i(A+k+1)<<32-x:b.i(A+k);return new o(j,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Lb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Lr=o}).apply(typeof Tx<"u"?Tx:typeof self<"u"?self:typeof window<"u"?window:{});var vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ob,Co,Fb,Bl,Yh,Bb,Ub,$b;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof vl=="object"&&vl];for(var f=0;f<c.length;++f){var g=c[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(c,f){if(f)e:{var g=r;c=c.split(".");for(var E=0;E<c.length-1;E++){var O=c[E];if(!(O in g))break e;g=g[O]}c=c[c.length-1],E=g[c],f=f(E),f!=E&&f!=null&&e(g,c,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(c){return c||function(f){var g=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&g.push([E,f[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(c){var f=typeof c;return f=="object"&&c!=null||f=="function"}function u(c,f,g){return c.call.apply(c.bind,arguments)}function d(c,f,g){return d=u,d.apply(null,arguments)}function h(c,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),c.apply(this,E)}}function m(c,f){function g(){}g.prototype=f.prototype,c.Z=f.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(E,O,q){for(var te=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)te[ge-2]=arguments[ge];return f.prototype[O].apply(E,te)}}var p=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function v(c){const f=c.length;if(f>0){const g=Array(f);for(let E=0;E<f;E++)g[E]=c[E];return g}return[]}function T(c,f){for(let E=1;E<arguments.length;E++){const O=arguments[E];var g=typeof O;if(g=g!="object"?g:O?Array.isArray(O)?"array":g:"null",g=="array"||g=="object"&&typeof O.length=="number"){g=c.length||0;const q=O.length||0;c.length=g+q;for(let te=0;te<q;te++)c[g+te]=O[te]}else c.push(O)}}class N{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function z(c){o.setTimeout(()=>{throw c},0)}function _(){var c=b;let f=null;return c.g&&(f=c.g,c.g=c.g.next,c.g||(c.h=null),f.next=null),f}class y{constructor(){this.h=this.g=null}add(f,g){const E=w.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var w=new N(()=>new I,c=>c.reset());class I{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,L=!1,b=new y,x=()=>{const c=Promise.resolve(void 0);V=()=>{c.then(k)}};function k(){for(var c;c=_();){try{c.h.call(c.g)}catch(g){z(g)}var f=w;f.j(c),f.h<100&&(f.h++,c.next=f.g,f.g=c)}L=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(c,f){this.type=c,this.g=this.target=f,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,f=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return c}();function S(c){return/^[\s\xa0]*$/.test(c)}function fe(c,f){j.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,f)}m(fe,j),fe.prototype.init=function(c,f){const g=this.type=c.type,E=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=f,f=c.relatedTarget,f||(g=="mouseover"?f=c.fromElement:g=="mouseout"&&(f=c.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&fe.Z.h.call(this)},fe.prototype.h=function(){fe.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),Y=0;function ne(c,f,g,E,O){this.listener=c,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=O,this.key=++Y,this.da=this.fa=!1}function $(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function K(c,f,g){for(const E in c)f.call(g,c[E],E,c)}function ee(c,f){for(const g in c)f.call(void 0,c[g],g,c)}function M(c){const f={};for(const g in c)f[g]=c[g];return f}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(c,f){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)c[g]=E[g];for(let q=0;q<U.length;q++)g=U[q],Object.prototype.hasOwnProperty.call(E,g)&&(c[g]=E[g])}}function D(c){this.src=c,this.g={},this.h=0}D.prototype.add=function(c,f,g,E,O){const q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);const te=X(c,f,E,O);return te>-1?(f=c[te],g||(f.fa=!1)):(f=new ne(f,this.src,q,!!E,O),f.fa=g,c.push(f)),f};function W(c,f){const g=f.type;if(g in c.g){var E=c.g[g],O=Array.prototype.indexOf.call(E,f,void 0),q;(q=O>=0)&&Array.prototype.splice.call(E,O,1),q&&($(f),c.g[g].length==0&&(delete c.g[g],c.h--))}}function X(c,f,g,E){for(let O=0;O<c.length;++O){const q=c[O];if(!q.da&&q.listener==f&&q.capture==!!g&&q.ha==E)return O}return-1}var F="closure_lm_"+(Math.random()*1e6|0),R={};function B(c,f,g,E,O){if(Array.isArray(f)){for(let q=0;q<f.length;q++)B(c,f[q],g,E,O);return null}return g=hn(g),c&&c[ae]?c.J(f,g,l(E)?!!E.capture:!1,O):H(c,f,g,!1,E,O)}function H(c,f,g,E,O,q){if(!f)throw Error("Invalid event type");const te=l(O)?!!O.capture:!!O;let ge=qt(c);if(ge||(c[F]=ge=new D(c)),g=ge.add(f,g,E,te,q),g.proxy)return g;if(E=J(),g.proxy=E,E.src=c,E.listener=g,c.addEventListener)A||(O=te),O===void 0&&(O=!1),c.addEventListener(f.toString(),E,O);else if(c.attachEvent)c.attachEvent(_e(f.toString()),E);else if(c.addListener&&c.removeListener)c.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function J(){function c(g){return f.call(c.src,c.listener,g)}const f=dn;return c}function le(c,f,g,E,O){if(Array.isArray(f))for(var q=0;q<f.length;q++)le(c,f[q],g,E,O);else E=l(E)?!!E.capture:!!E,g=hn(g),c&&c[ae]?(c=c.i,q=String(f).toString(),q in c.g&&(f=c.g[q],g=X(f,g,E,O),g>-1&&($(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete c.g[q],c.h--)))):c&&(c=qt(c))&&(f=c.g[f.toString()],c=-1,f&&(c=X(f,g,E,O)),(g=c>-1?f[c]:null)&&he(g))}function he(c){if(typeof c!="number"&&c&&!c.da){var f=c.src;if(f&&f[ae])W(f.i,c);else{var g=c.type,E=c.proxy;f.removeEventListener?f.removeEventListener(g,E,c.capture):f.detachEvent?f.detachEvent(_e(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=qt(f))?(W(g,c),g.h==0&&(g.src=null,f[F]=null)):$(c)}}}function _e(c){return c in R?R[c]:R[c]="on"+c}function dn(c,f){if(c.da)c=!0;else{f=new fe(f,this);const g=c.listener,E=c.ha||c.src;c.fa&&he(c),c=g.call(E,f)}return c}function qt(c){return c=c[F],c instanceof D?c:null}var Qs="__closure_events_fn_"+(Math.random()*1e9>>>0);function hn(c){return typeof c=="function"?c:(c[Qs]||(c[Qs]=function(f){return c.handleEvent(f)}),c[Qs])}function wt(){C.call(this),this.i=new D(this),this.M=this,this.G=null}m(wt,C),wt.prototype[ae]=!0,wt.prototype.removeEventListener=function(c,f,g,E){le(this,c,f,g,E)};function St(c,f){var g,E=c.G;if(E)for(g=[];E;E=E.G)g.push(E);if(c=c.M,E=f.type||f,typeof f=="string")f=new j(f,c);else if(f instanceof j)f.target=f.target||c;else{var O=f;f=new j(E,c),re(f,O)}O=!0;let q,te;if(g)for(te=g.length-1;te>=0;te--)q=f.g=g[te],O=qa(q,E,!0,f)&&O;if(q=f.g=c,O=qa(q,E,!0,f)&&O,O=qa(q,E,!1,f)&&O,g)for(te=0;te<g.length;te++)q=f.g=g[te],O=qa(q,E,!1,f)&&O}wt.prototype.N=function(){if(wt.Z.N.call(this),this.i){var c=this.i;for(const f in c.g){const g=c.g[f];for(let E=0;E<g.length;E++)$(g[E]);delete c.g[f],c.h--}}this.G=null},wt.prototype.J=function(c,f,g,E){return this.i.add(String(c),f,!1,g,E)},wt.prototype.K=function(c,f,g,E){return this.i.add(String(c),f,!0,g,E)};function qa(c,f,g,E){if(f=c.i.g[String(f)],!f)return!0;f=f.concat();let O=!0;for(let q=0;q<f.length;++q){const te=f[q];if(te&&!te.da&&te.capture==g){const ge=te.listener,nt=te.ha||te.src;te.fa&&W(c.i,te),O=ge.call(nt,E)!==!1&&O}}return O&&!E.defaultPrevented}function tE(c,f){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(c,f||0)}function t0(c){c.g=tE(()=>{c.g=null,c.i&&(c.i=!1,t0(c))},c.l);const f=c.h;c.h=null,c.m.apply(null,f)}class nE extends C{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:t0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ys(c){C.call(this),this.h=c,this.g={}}m(Ys,C);var n0=[];function r0(c){K(c.g,function(f,g){this.g.hasOwnProperty(g)&&he(f)},c),c.g={}}Ys.prototype.N=function(){Ys.Z.N.call(this),r0(this)},Ys.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Iu=o.JSON.stringify,rE=o.JSON.parse,iE=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function i0(){}function s0(){}var Xs={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zu(){j.call(this,"d")}m(zu,j);function Au(){j.call(this,"c")}m(Au,j);var ri={},o0=null;function Wa(){return o0=o0||new wt}ri.Ia="serverreachability";function a0(c){j.call(this,ri.Ia,c)}m(a0,j);function Js(c){const f=Wa();St(f,new a0(f))}ri.STAT_EVENT="statevent";function l0(c,f){j.call(this,ri.STAT_EVENT,c),this.stat=f}m(l0,j);function jt(c){const f=Wa();St(f,new l0(f,c))}ri.Ja="timingevent";function c0(c,f){j.call(this,ri.Ja,c),this.size=f}m(c0,j);function Zs(c,f){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},f)}function eo(){this.g=!0}eo.prototype.ua=function(){this.g=!1};function sE(c,f,g,E,O,q){c.info(function(){if(c.g)if(q){var te="",ge=q.split("&");for(let Ce=0;Ce<ge.length;Ce++){var nt=ge[Ce].split("=");if(nt.length>1){const lt=nt[0];nt=nt[1];const Nn=lt.split("_");te=Nn.length>=2&&Nn[1]=="type"?te+(lt+"="+nt+"&"):te+(lt+"=redacted&")}}}else te=null;else te=q;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+f+`
`+g+`
`+te})}function oE(c,f,g,E,O,q,te){c.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+f+`
`+g+`
`+q+" "+te})}function Ui(c,f,g,E){c.info(function(){return"XMLHTTP TEXT ("+f+"): "+lE(c,g)+(E?" "+E:"")})}function aE(c,f){c.info(function(){return"TIMEOUT: "+f})}eo.prototype.info=function(){};function lE(c,f){if(!c.g)return f;if(!f)return null;try{const q=JSON.parse(f);if(q){for(c=0;c<q.length;c++)if(Array.isArray(q[c])){var g=q[c];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var O=E[0];if(O!="noop"&&O!="stop"&&O!="close")for(let te=1;te<E.length;te++)E[te]=""}}}}return Iu(q)}catch{return f}}var Ha={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},u0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},d0;function Pu(){}m(Pu,i0),Pu.prototype.g=function(){return new XMLHttpRequest},d0=new Pu;function to(c){return encodeURIComponent(String(c))}function cE(c){var f=1;c=c.split(":");const g=[];for(;f>0&&c.length;)g.push(c.shift()),f--;return c.length&&g.push(c.join(":")),g}function hr(c,f,g,E){this.j=c,this.i=f,this.l=g,this.S=E||1,this.V=new Ys(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new h0}function h0(){this.i=null,this.g="",this.h=!1}var f0={},Ru={};function Vu(c,f,g){c.M=1,c.A=Ga(Tn(f)),c.u=g,c.R=!0,m0(c,null)}function m0(c,f){c.F=Date.now(),Ka(c),c.B=Tn(c.A);var g=c.B,E=c.S;Array.isArray(E)||(E=[String(E)]),C0(g.i,"t",E),c.C=0,g=c.j.L,c.h=new h0,c.g=W0(c.j,g?f:null,!c.u),c.P>0&&(c.O=new nE(d(c.Y,c,c.g),c.P)),f=c.V,g=c.g,E=c.ba;var O="readystatechange";Array.isArray(O)||(O&&(n0[0]=O.toString()),O=n0);for(let q=0;q<O.length;q++){const te=B(g,O[q],E||f.handleEvent,!1,f.h||f);if(!te)break;f.g[te.key]=te}f=c.J?M(c.J):{},c.u?(c.v||(c.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,f)):(c.v="GET",c.g.ea(c.B,c.v,null,f)),Js(),sE(c.i,c.v,c.B,c.l,c.S,c.u)}hr.prototype.ba=function(c){c=c.target;const f=this.O;f&&pr(c)==3?f.j():this.Y(c)},hr.prototype.Y=function(c){try{if(c==this.g)e:{const ge=pr(this.g),nt=this.g.ya(),Ce=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||R0(this.g)))){this.K||ge!=4||nt==7||(nt==8||Ce<=0?Js(3):Js(2)),Du(this);var f=this.g.ca();this.X=f;var g=uE(this);if(this.o=f==200,oE(this.i,this.v,this.B,this.l,this.S,ge,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,O=this.g;if((E=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(E)){var q=E;break t}}q=null}if(c=q)Ui(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mu(this,c);else{this.o=!1,this.m=3,jt(12),ii(this),no(this);break e}}if(this.R){c=!0;let lt;for(;!this.K&&this.C<g.length;)if(lt=dE(this,g),lt==Ru){ge==4&&(this.m=4,jt(14),c=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==f0){this.m=4,jt(15),Ui(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else Ui(this.i,this.l,lt,null),Mu(this,lt);if(p0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||g.length!=0||this.h.h||(this.m=1,jt(16),c=!1),this.o=this.o&&c,!c)Ui(this.i,this.l,g,"[Invalid Chunked Response]"),ii(this),no(this);else if(g.length>0&&!this.W){this.W=!0;var te=this.j;te.g==this&&te.aa&&!te.P&&(te.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Wu(te),te.P=!0,jt(11))}}else Ui(this.i,this.l,g,null),Mu(this,g);ge==4&&ii(this),this.o&&!this.K&&(ge==4?B0(this.j,this):(this.o=!1,Ka(this)))}else TE(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,jt(12)):(this.m=0,jt(13)),ii(this),no(this)}}}catch{}finally{}};function uE(c){if(!p0(c))return c.g.la();const f=R0(c.g);if(f==="")return"";let g="";const E=f.length,O=pr(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return ii(c),no(c),"";c.h.i=new o.TextDecoder}for(let q=0;q<E;q++)c.h.h=!0,g+=c.h.i.decode(f[q],{stream:!(O&&q==E-1)});return f.length=0,c.h.g+=g,c.C=0,c.h.g}function p0(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function dE(c,f){var g=c.C,E=f.indexOf(`
`,g);return E==-1?Ru:(g=Number(f.substring(g,E)),isNaN(g)?f0:(E+=1,E+g>f.length?Ru:(f=f.slice(E,E+g),c.C=E+g,f)))}hr.prototype.cancel=function(){this.K=!0,ii(this)};function Ka(c){c.T=Date.now()+c.H,g0(c,c.H)}function g0(c,f){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Zs(d(c.aa,c),f)}function Du(c){c.D&&(o.clearTimeout(c.D),c.D=null)}hr.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(aE(this.i,this.B),this.M!=2&&(Js(),jt(17)),ii(this),this.m=2,no(this)):g0(this,this.T-c)};function no(c){c.j.I==0||c.K||B0(c.j,c)}function ii(c){Du(c);var f=c.O;f&&typeof f.dispose=="function"&&f.dispose(),c.O=null,r0(c.V),c.g&&(f=c.g,c.g=null,f.abort(),f.dispose())}function Mu(c,f){try{var g=c.j;if(g.I!=0&&(g.g==c||Lu(g.h,c))){if(!c.L&&Lu(g.h,c)&&g.I==3){try{var E=g.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)Za(g),Xa(g);else break e;qu(g),jt(18)}}else g.xa=O[1],0<g.xa-g.K&&O[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Zs(d(g.Va,g),6e3));v0(g.h)<=1&&g.ta&&(g.ta=void 0)}else oi(g,11)}else if((c.L||g.g==c)&&Za(g),!S(f))for(O=g.Ba.g.parse(f),f=0;f<O.length;f++){let Ce=O[f];const lt=Ce[0];if(!(lt<=g.K))if(g.K=lt,Ce=Ce[1],g.I==2)if(Ce[0]=="c"){g.M=Ce[1],g.ba=Ce[2];const Nn=Ce[3];Nn!=null&&(g.ka=Nn,g.j.info("VER="+g.ka));const ai=Ce[4];ai!=null&&(g.za=ai,g.j.info("SVER="+g.za));const gr=Ce[5];gr!=null&&typeof gr=="number"&&gr>0&&(E=1.5*gr,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const xr=c.g;if(xr){const tl=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tl){var q=E.h;q.g||tl.indexOf("spdy")==-1&&tl.indexOf("quic")==-1&&tl.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Ou(q,q.h),q.h=null))}if(E.G){const Hu=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;Hu&&(E.wa=Hu,Ae(E.J,E.G,Hu))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var te=c;if(E.na=q0(E,E.L?E.ba:null,E.W),te.L){w0(E.h,te);var ge=te,nt=E.O;nt&&(ge.H=nt),ge.D&&(Du(ge),Ka(ge)),E.g=te}else O0(E);g.i.length>0&&Ja(g)}else Ce[0]!="stop"&&Ce[0]!="close"||oi(g,7);else g.I==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?oi(g,7):$u(g):Ce[0]!="noop"&&g.l&&g.l.qa(Ce),g.A=0)}}Js(4)}catch{}}var hE=class{constructor(c,f){this.g=c,this.map=f}};function x0(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function y0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function v0(c){return c.h?1:c.g?c.g.size:0}function Lu(c,f){return c.h?c.h==f:c.g?c.g.has(f):!1}function Ou(c,f){c.g?c.g.add(f):c.h=f}function w0(c,f){c.h&&c.h==f?c.h=null:c.g&&c.g.has(f)&&c.g.delete(f)}x0.prototype.cancel=function(){if(this.i=b0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function b0(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let f=c.i;for(const g of c.g.values())f=f.concat(g.G);return f}return v(c.i)}var k0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fE(c,f){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const E=c[g].indexOf("=");let O,q=null;E>=0?(O=c[g].substring(0,E),q=c[g].substring(E+1)):O=c[g],f(O,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function fr(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;c instanceof fr?(this.l=c.l,ro(this,c.j),this.o=c.o,this.g=c.g,io(this,c.u),this.h=c.h,Fu(this,S0(c.i)),this.m=c.m):c&&(f=String(c).match(k0))?(this.l=!1,ro(this,f[1]||"",!0),this.o=so(f[2]||""),this.g=so(f[3]||"",!0),io(this,f[4]),this.h=so(f[5]||"",!0),Fu(this,f[6]||"",!0),this.m=so(f[7]||"")):(this.l=!1,this.i=new ao(null,this.l))}fr.prototype.toString=function(){const c=[];var f=this.j;f&&c.push(oo(f,_0,!0),":");var g=this.g;return(g||f=="file")&&(c.push("//"),(f=this.o)&&c.push(oo(f,_0,!0),"@"),c.push(to(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(oo(g,g.charAt(0)=="/"?gE:pE,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",oo(g,yE)),c.join("")},fr.prototype.resolve=function(c){const f=Tn(this);let g=!!c.j;g?ro(f,c.j):g=!!c.o,g?f.o=c.o:g=!!c.g,g?f.g=c.g:g=c.u!=null;var E=c.h;if(g)io(f,c.u);else if(g=!!c.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var O=f.h.lastIndexOf("/");O!=-1&&(E=f.h.slice(0,O+1)+E)}if(O=E,O==".."||O==".")E="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){E=O.lastIndexOf("/",0)==0,O=O.split("/");const q=[];for(let te=0;te<O.length;){const ge=O[te++];ge=="."?E&&te==O.length&&q.push(""):ge==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),E&&te==O.length&&q.push("")):(q.push(ge),E=!0)}E=q.join("/")}else E=O}return g?f.h=E:g=c.i.toString()!=="",g?Fu(f,S0(c.i)):g=!!c.m,g&&(f.m=c.m),f};function Tn(c){return new fr(c)}function ro(c,f,g){c.j=g?so(f,!0):f,c.j&&(c.j=c.j.replace(/:$/,""))}function io(c,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);c.u=f}else c.u=null}function Fu(c,f,g){f instanceof ao?(c.i=f,vE(c.i,c.l)):(g||(f=oo(f,xE)),c.i=new ao(f,c.l))}function Ae(c,f,g){c.i.set(f,g)}function Ga(c){return Ae(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function so(c,f){return c?f?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function oo(c,f,g){return typeof c=="string"?(c=encodeURI(c).replace(f,mE),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function mE(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var _0=/[#\/\?@]/g,pE=/[#\?:]/g,gE=/[#\?]/g,xE=/[#\?@]/g,yE=/#/g;function ao(c,f){this.h=this.g=null,this.i=c||null,this.j=!!f}function si(c){c.g||(c.g=new Map,c.h=0,c.i&&fE(c.i,function(f,g){c.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=ao.prototype,t.add=function(c,f){si(this),this.i=null,c=$i(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(f),this.h+=1,this};function E0(c,f){si(c),f=$i(c,f),c.g.has(f)&&(c.i=null,c.h-=c.g.get(f).length,c.g.delete(f))}function T0(c,f){return si(c),f=$i(c,f),c.g.has(f)}t.forEach=function(c,f){si(this),this.g.forEach(function(g,E){g.forEach(function(O){c.call(f,O,E,this)},this)},this)};function N0(c,f){si(c);let g=[];if(typeof f=="string")T0(c,f)&&(g=g.concat(c.g.get($i(c,f))));else for(c=Array.from(c.g.values()),f=0;f<c.length;f++)g=g.concat(c[f]);return g}t.set=function(c,f){return si(this),this.i=null,c=$i(this,c),T0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[f]),this.h+=1,this},t.get=function(c,f){return c?(c=N0(this,c),c.length>0?String(c[0]):f):f};function C0(c,f,g){E0(c,f),g.length>0&&(c.i=null,c.g.set($i(c,f),v(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var g=f[E];const O=to(g);g=N0(this,g);for(let q=0;q<g.length;q++){let te=O;g[q]!==""&&(te+="="+to(g[q])),c.push(te)}}return this.i=c.join("&")};function S0(c){const f=new ao;return f.i=c.i,c.g&&(f.g=new Map(c.g),f.h=c.h),f}function $i(c,f){return f=String(f),c.j&&(f=f.toLowerCase()),f}function vE(c,f){f&&!c.j&&(si(c),c.i=null,c.g.forEach(function(g,E){const O=E.toLowerCase();E!=O&&(E0(this,E),C0(this,O,g))},c)),c.j=f}function wE(c,f){const g=new eo;if(o.Image){const E=new Image;E.onload=h(mr,g,"TestLoadImage: loaded",!0,f,E),E.onerror=h(mr,g,"TestLoadImage: error",!1,f,E),E.onabort=h(mr,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=h(mr,g,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=c}else f(!1)}function bE(c,f){const g=new eo,E=new AbortController,O=setTimeout(()=>{E.abort(),mr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(c,{signal:E.signal}).then(q=>{clearTimeout(O),q.ok?mr(g,"TestPingServer: ok",!0,f):mr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),mr(g,"TestPingServer: error",!1,f)})}function mr(c,f,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function kE(){this.g=new iE}function Bu(c){this.i=c.Sb||null,this.h=c.ab||!1}m(Bu,i0),Bu.prototype.g=function(){return new Qa(this.i,this.h)};function Qa(c,f){wt.call(this),this.H=c,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Qa,wt),t=Qa.prototype,t.open=function(c,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=f,this.readyState=1,co(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(f.body=c),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,lo(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,co(this)),this.g&&(this.readyState=3,co(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;j0(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function j0(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var f=c.value?c.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!c.done}))&&(this.response=this.responseText+=f)}c.done?lo(this):co(this),this.readyState==3&&j0(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,lo(this))},t.Na=function(c){this.g&&(this.response=c,lo(this))},t.ga=function(){this.g&&lo(this)};function lo(c){c.readyState=4,c.l=null,c.j=null,c.B=null,co(c)}t.setRequestHeader=function(c,f){this.A.append(c,f)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=f.next();return c.join(`\r
`)};function co(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function I0(c){let f="";return K(c,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Uu(c,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=I0(g),typeof c=="string"?g!=null&&to(g):Ae(c,f,g))}function $e(c){wt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m($e,wt);var _E=/^https?$/i,EE=["POST","PUT"];t=$e.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);f=f?f.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():d0.g(),this.g.onreadystatechange=p(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(c),!0),this.B=!1}catch(q){z0(this,q);return}if(c=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const q of E.keys())g.set(q,E.get(q));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(q=>q.toLowerCase()=="content-type"),O=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(EE,f,void 0)>=0)||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,te]of g)this.g.setRequestHeader(q,te);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(q){z0(this,q)}};function z0(c,f){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=f,c.o=5,A0(c),Ya(c)}function A0(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,St(this,"complete"),St(this,"abort"),Ya(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ya(this,!0)),$e.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?P0(this):this.Xa())},t.Xa=function(){P0(this)};function P0(c){if(c.h&&typeof s<"u"){if(c.v&&pr(c)==4)setTimeout(c.Ca.bind(c),0);else if(St(c,"readystatechange"),pr(c)==4){c.h=!1;try{const q=c.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=q===0){let te=String(c.D).match(k0)[1]||null;!te&&o.self&&o.self.location&&(te=o.self.location.protocol.slice(0,-1)),E=!_E.test(te?te.toLowerCase():"")}g=E}if(g)St(c,"complete"),St(c,"success");else{c.o=6;try{var O=pr(c)>2?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.ca()+"]",A0(c)}}finally{Ya(c)}}}}function Ya(c,f){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,f||St(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function pr(c){return c.g?c.g.readyState:0}t.ca=function(){try{return pr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var f=this.g.responseText;return c&&f.indexOf(c)==0&&(f=f.substring(c.length)),rE(f)}};function R0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function TE(c){const f={};c=(c.g&&pr(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<c.length;E++){if(S(c[E]))continue;var g=cE(c[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const q=f[O]||[];f[O]=q,q.push(g)}ee(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(c,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||f}function V0(c){this.za=0,this.i=[],this.j=new eo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=uo("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=uo("baseRetryDelayMs",5e3,c),this.Za=uo("retryDelaySeedMs",1e4,c),this.Ta=uo("forwardChannelMaxRetries",2,c),this.va=uo("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new x0(c&&c.concurrentRequestLimit),this.Ba=new kE,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=V0.prototype,t.ka=8,t.I=1,t.connect=function(c,f,g,E){jt(0),this.W=c,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=q0(this,null,this.W),Ja(this)};function $u(c){if(D0(c),c.I==3){var f=c.V++,g=Tn(c.J);if(Ae(g,"SID",c.M),Ae(g,"RID",f),Ae(g,"TYPE","terminate"),ho(c,g),f=new hr(c,c.j,f),f.M=2,f.A=Ga(Tn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=W0(f.j,null),f.g.ea(f.A)),f.F=Date.now(),Ka(f)}$0(c)}function Xa(c){c.g&&(Wu(c),c.g.cancel(),c.g=null)}function D0(c){Xa(c),c.v&&(o.clearTimeout(c.v),c.v=null),Za(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function Ja(c){if(!y0(c.h)&&!c.m){c.m=!0;var f=c.Ea;V||x(),L||(V(),L=!0),b.add(f,c),c.D=0}}function NE(c,f){return v0(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=f.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Zs(d(c.Ea,c,f),U0(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const O=new hr(this,this.j,c);let q=this.o;if(this.U&&(q?(q=M(q),re(q,this.U)):q=this.U),this.u!==null||this.R||(O.J=q,q=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=L0(this,O,f),g=Tn(this.J),Ae(g,"RID",c),Ae(g,"CVER",22),this.G&&Ae(g,"X-HTTP-Session-Id",this.G),ho(this,g),q&&(this.R?f="headers="+to(I0(q))+"&"+f:this.u&&Uu(g,this.u,q)),Ou(this.h,O),this.Ra&&Ae(g,"TYPE","init"),this.S?(Ae(g,"$req",f),Ae(g,"SID","null"),O.U=!0,Vu(O,g,null)):Vu(O,g,f),this.I=2}}else this.I==3&&(c?M0(this,c):this.i.length==0||y0(this.h)||M0(this))};function M0(c,f){var g;f?g=f.l:g=c.V++;const E=Tn(c.J);Ae(E,"SID",c.M),Ae(E,"RID",g),Ae(E,"AID",c.K),ho(c,E),c.u&&c.o&&Uu(E,c.u,c.o),g=new hr(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),f&&(c.i=f.G.concat(c.i)),f=L0(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ou(c.h,g),Vu(g,E,f)}function ho(c,f){c.H&&K(c.H,function(g,E){Ae(f,E,g)}),c.l&&K({},function(g,E){Ae(f,E,g)})}function L0(c,f,g){g=Math.min(c.i.length,g);const E=c.l?d(c.l.Ka,c.l,c):null;e:{var O=c.i;let ge=-1;for(;;){const nt=["count="+g];ge==-1?g>0?(ge=O[0].g,nt.push("ofs="+ge)):ge=0:nt.push("ofs="+ge);let Ce=!0;for(let lt=0;lt<g;lt++){var q=O[lt].g;const Nn=O[lt].map;if(q-=ge,q<0)ge=Math.max(0,O[lt].g-100),Ce=!1;else try{q="req"+q+"_"||"";try{var te=Nn instanceof Map?Nn:Object.entries(Nn);for(const[ai,gr]of te){let xr=gr;l(gr)&&(xr=Iu(gr)),nt.push(q+ai+"="+encodeURIComponent(xr))}}catch(ai){throw nt.push(q+"type="+encodeURIComponent("_badmap")),ai}}catch{E&&E(Nn)}}if(Ce){te=nt.join("&");break e}}te=void 0}return c=c.i.splice(0,g),f.G=c,te}function O0(c){if(!c.g&&!c.v){c.Y=1;var f=c.Da;V||x(),L||(V(),L=!0),b.add(f,c),c.A=0}}function qu(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Zs(d(c.Da,c),U0(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,F0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Zs(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,jt(10),Xa(this),F0(this))};function Wu(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function F0(c){c.g=new hr(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var f=Tn(c.na);Ae(f,"RID","rpc"),Ae(f,"SID",c.M),Ae(f,"AID",c.K),Ae(f,"CI",c.F?"0":"1"),!c.F&&c.ia&&Ae(f,"TO",c.ia),Ae(f,"TYPE","xmlhttp"),ho(c,f),c.u&&c.o&&Uu(f,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=Ga(Tn(f)),g.u=null,g.R=!0,m0(g,c)}t.Va=function(){this.C!=null&&(this.C=null,Xa(this),qu(this),jt(19))};function Za(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function B0(c,f){var g=null;if(c.g==f){Za(c),Wu(c),c.g=null;var E=2}else if(Lu(c.h,f))g=f.G,w0(c.h,f),E=1;else return;if(c.I!=0){if(f.o)if(E==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var O=c.D;E=Wa(),St(E,new c0(E,g)),Ja(c)}else O0(c);else if(O=f.m,O==3||O==0&&f.X>0||!(E==1&&NE(c,f)||E==2&&qu(c)))switch(g&&g.length>0&&(f=c.h,f.i=f.i.concat(g)),O){case 1:oi(c,5);break;case 4:oi(c,10);break;case 3:oi(c,6);break;default:oi(c,2)}}}function U0(c,f){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*f}function oi(c,f){if(c.j.info("Error code "+f),f==2){var g=d(c.bb,c),E=c.Ua;const O=!E;E=new fr(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ro(E,"https"),Ga(E),O?wE(E.toString(),g):bE(E.toString(),g)}else jt(2);c.I=0,c.l&&c.l.pa(f),$0(c),D0(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function $0(c){if(c.I=0,c.ja=[],c.l){const f=b0(c.h);(f.length!=0||c.i.length!=0)&&(T(c.ja,f),T(c.ja,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.oa()}}function q0(c,f,g){var E=g instanceof fr?Tn(g):new fr(g);if(E.g!="")f&&(E.g=f+"."+E.g),io(E,E.u);else{var O=o.location;E=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;const q=new fr(null);E&&ro(q,E),f&&(q.g=f),O&&io(q,O),g&&(q.h=g),E=q}return g=c.G,f=c.wa,g&&f&&Ae(E,g,f),Ae(E,"VER",c.ka),ho(c,E),E}function W0(c,f,g){if(f&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=c.Aa&&!c.ma?new $e(new Bu({ab:g})):new $e(c.ma),f.Fa(c.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function H0(){}t=H0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function el(){}el.prototype.g=function(c,f){return new Wt(c,f)};function Wt(c,f){wt.call(this),this.g=new V0(f),this.l=c,this.h=f&&f.messageUrlParams||null,c=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(c?c["X-WebChannel-Content-Type"]=f.messageContentType:c={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(c?c["X-WebChannel-Client-Profile"]=f.sa:c={"X-WebChannel-Client-Profile":f.sa}),this.g.U=c,(c=f&&f.Qb)&&!S(c)&&(this.g.u=c),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!S(f)&&(this.g.G=f,c=this.h,c!==null&&f in c&&(c=this.h,f in c&&delete c[f])),this.j=new qi(this)}m(Wt,wt),Wt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Wt.prototype.close=function(){$u(this.g)},Wt.prototype.o=function(c){var f=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=Iu(c),c=g);f.i.push(new hE(f.Ya++,c)),f.I==3&&Ja(f)},Wt.prototype.N=function(){this.g.l=null,delete this.j,$u(this.g),delete this.g,Wt.Z.N.call(this)};function K0(c){zu.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var f=c.__sm__;if(f){e:{for(const g in f){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,f=f!==null&&c in f?f[c]:void 0),this.data=f}else this.data=c}m(K0,zu);function G0(){Au.call(this),this.status=1}m(G0,Au);function qi(c){this.g=c}m(qi,H0),qi.prototype.ra=function(){St(this.g,"a")},qi.prototype.qa=function(c){St(this.g,new K0(c))},qi.prototype.pa=function(c){St(this.g,new G0)},qi.prototype.oa=function(){St(this.g,"b")},el.prototype.createWebChannel=el.prototype.g,Wt.prototype.send=Wt.prototype.o,Wt.prototype.open=Wt.prototype.m,Wt.prototype.close=Wt.prototype.close,$b=function(){return new el},Ub=function(){return Wa()},Bb=ri,Yh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ha.NO_ERROR=0,Ha.TIMEOUT=8,Ha.HTTP_ERROR=6,Bl=Ha,u0.COMPLETE="complete",Fb=u0,s0.EventType=Xs,Xs.OPEN="a",Xs.CLOSE="b",Xs.ERROR="c",Xs.MESSAGE="d",wt.prototype.listen=wt.prototype.J,Co=s0,$e.prototype.listenOnce=$e.prototype.K,$e.prototype.getLastError=$e.prototype.Ha,$e.prototype.getLastErrorCode=$e.prototype.ya,$e.prototype.getStatus=$e.prototype.ca,$e.prototype.getResponseJson=$e.prototype.La,$e.prototype.getResponseText=$e.prototype.la,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Fa,Ob=$e}).apply(typeof vl<"u"?vl:typeof self<"u"?self:typeof window<"u"?window:{});const Nx="@firebase/firestore",Cx="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=new Am("@firebase/firestore");function Hi(){return Ai.logLevel}function se(t,...e){if(Ai.logLevel<=be.DEBUG){const n=e.map(Fm);Ai.debug(`Firestore (${Bs}): ${t}`,...n)}}function or(t,...e){if(Ai.logLevel<=be.ERROR){const n=e.map(Fm);Ai.error(`Firestore (${Bs}): ${t}`,...n)}}function zs(t,...e){if(Ai.logLevel<=be.WARN){const n=e.map(Fm);Ai.warn(`Firestore (${Bs}): ${t}`,...n)}}function Fm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,qb(t,r,n)}function qb(t,e,n){let r=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw or(r),new Error(r)}function Ee(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||qb(e,i,r)}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends ei{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class o4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class a4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class l4{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Xn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new Wb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new Et(e)}}class c4{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class u4{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new c4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Sx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class d4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_S(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ee(this.o===void 0,3512);const r=s=>{s.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Sx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h4(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=h4(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Xh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Nd(i)===Nd(s)?ye(i,s):Nd(i)?1:-1}return ye(t.length,e.length)}const f4=55296,m4=57343;function Nd(t){const e=t.charCodeAt(0);return e>=f4&&e<=m4}function As(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__name__";class jn{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ue(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return jn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof jn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=jn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ye(e.length,n.length)}static compareSegments(e,n){const r=jn.isNumericId(e),i=jn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?jn.extractNumericId(e).compare(jn.extractNumericId(n)):Xh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Lr.fromString(e.substring(4,e.length-2))}}class je extends jn{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(G.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new je(n)}static emptyPath(){return new je([])}}const p4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pt extends jn{construct(e,n,r){return new pt(e,n,r)}static isValidIdentifier(e){return p4.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===jx}static keyField(){return new pt([jx])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ie(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ie(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new ie(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pt(n)}static emptyPath(){return new pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(je.fromString(e))}static fromName(e){return new ce(je.fromString(e).popFirst(5))}static empty(){return new ce(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e,n){if(!n)throw new ie(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g4(t,e,n,r){if(e===!0&&r===!0)throw new ie(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ix(t){if(!ce.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function zx(t){if(ce.isDocumentKey(t))throw new ie(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Kb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function uu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue(12329,{type:typeof t})}function $r(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=uu(t);throw new ie(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ra(t,e){if(!Kb(t))throw new ie(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new ie(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax=-62135596800,Px=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Px);return new Re(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ax)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Px}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ra(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ax;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:et("string",Re._jsonSchemaVersion),seconds:et("number"),nanoseconds:et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new Re(0,0))}static max(){return new me(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=-1;function x4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new Re(n+1,0):new Re(n,r));return new qr(i,ce.empty(),e)}function y4(t){return new qr(t.readTime,t.key,ga)}class qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new qr(me.min(),ce.empty(),ga)}static max(){return new qr(me.max(),ce.empty(),ga)}}function v4(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ce.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Us(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==w4)throw t;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function k4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function $s(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}du.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=-1;function hu(t){return t==null}function Cc(t){return t===0&&1/t==-1/0}function _4(t){return typeof t=="number"&&Number.isInteger(t)&&!Cc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="";function E4(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Rx(e)),e=T4(t.get(n),e);return Rx(e)}function T4(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case Gb:n+="";break;default:n+=s}}return n}function Rx(t){return t+Gb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Mi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Qb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e,n){this.comparator=e,this.root=n||mt.EMPTY}insert(e,n){return new Ue(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new Ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wl(this.root,e,this.comparator,!0)}}class wl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??mt.RED,this.left=i??mt.EMPTY,this.right=s??mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new mt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return mt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ue(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ue(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ue(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1;mt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue(57766)}get value(){throw ue(16141)}get color(){throw ue(16727)}get left(){throw ue(29726)}get right(){throw ue(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dx(this.data.getIterator())}getIteratorFrom(e){return new Dx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new at(this.comparator);return n.data=e,n}}class Dx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.fields=e,e.sort(pt.comparator)}static empty(){return new vn([])}unionWith(e){let n=new at(pt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Yb("Invalid base64 string: "+s):s}}(e);return new vt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const N4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(Ee(!!t,39018),typeof t=="string"){let e=0;const n=N4.exec(t);if(Ee(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ke(t.seconds),nanos:Ke(t.nanos)}}function Ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Hr(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb="server_timestamp",Jb="__type__",Zb="__previous_value__",ek="__local_write_time__";function $m(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Jb])==null?void 0:r.stringValue)===Xb}function fu(t){const e=t.mapValue.fields[Zb];return $m(e)?fu(e):e}function xa(t){const e=Wr(t.mapValue.fields[ek].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n,r,i,s,o,l,u,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h}}const Sc="(default)";class ya{constructor(e,n){this.projectId=e,this.database=n||Sc}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database===Sc}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="__type__",S4="__max__",bl={mapValue:{}},nk="__vector__",jc="value";function Kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$m(t)?4:I4(t)?9007199254740991:j4(t)?10:11:ue(28295,{value:t})}function Bn(t,e){if(t===e)return!0;const n=Kr(t);if(n!==Kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return xa(t).isEqual(xa(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Wr(i.timestampValue),l=Wr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Hr(i.bytesValue).isEqual(Hr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ke(i.geoPointValue.latitude)===Ke(s.geoPointValue.latitude)&&Ke(i.geoPointValue.longitude)===Ke(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ke(i.integerValue)===Ke(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ke(i.doubleValue),l=Ke(s.doubleValue);return o===l?Cc(o)===Cc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return As(t.arrayValue.values||[],e.arrayValue.values||[],Bn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(Vx(o)!==Vx(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Bn(o[u],l[u])))return!1;return!0}(t,e);default:return ue(52216,{left:t})}}function va(t,e){return(t.values||[]).find(n=>Bn(n,e))!==void 0}function Ps(t,e){if(t===e)return 0;const n=Kr(t),r=Kr(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Ke(s.integerValue||s.doubleValue),u=Ke(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Mx(t.timestampValue,e.timestampValue);case 4:return Mx(xa(t),xa(e));case 5:return Xh(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Hr(s),u=Hr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=ye(l[d],u[d]);if(h!==0)return h}return ye(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ye(Ke(s.latitude),Ke(o.latitude));return l!==0?l:ye(Ke(s.longitude),Ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lx(t.arrayValue,e.arrayValue);case 10:return function(s,o){var p,v,T,N;const l=s.fields||{},u=o.fields||{},d=(p=l[jc])==null?void 0:p.arrayValue,h=(v=u[jc])==null?void 0:v.arrayValue,m=ye(((T=d==null?void 0:d.values)==null?void 0:T.length)||0,((N=h==null?void 0:h.values)==null?void 0:N.length)||0);return m!==0?m:Lx(d,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===bl.mapValue&&o===bl.mapValue)return 0;if(s===bl.mapValue)return 1;if(o===bl.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Xh(u[m],h[m]);if(p!==0)return p;const v=Ps(l[u[m]],d[h[m]]);if(v!==0)return v}return ye(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ue(23264,{he:n})}}function Mx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Wr(t),r=Wr(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function Lx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Ps(n[i],r[i]);if(s)return s}return ye(n.length,r.length)}function Rs(t){return Jh(t)}function Jh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Hr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Jh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Jh(n.fields[o])}`;return i+"}"}(t.mapValue):ue(61005,{value:t})}function Ul(t){switch(Kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=fu(t);return e?16+Ul(e):16;case 5:return 2*t.stringValue.length;case 6:return Hr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Ul(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Mi(r.fields,(s,o)=>{i+=s.length+Ul(o)}),i}(t.mapValue);default:throw ue(13486,{value:t})}}function Ox(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Zh(t){return!!t&&"integerValue"in t}function qm(t){return!!t&&"arrayValue"in t}function Fx(t){return!!t&&"nullValue"in t}function Bx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $l(t){return!!t&&"mapValue"in t}function j4(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[tk])==null?void 0:r.stringValue)===nk}function Uo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Mi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Uo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Uo(t.arrayValue.values[n]);return e}return{...t}}function I4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===S4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Uo(n)}setAll(e){let n=pt.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Uo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());$l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Bn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$l(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Mi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nn(Uo(this.value))}}function rk(t){const e=[];return Mi(t.fields,(n,r)=>{const i=new pt([n]);if($l(r)){const s=rk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Nt(e,0,me.min(),me.min(),me.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new Nt(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,me.min(),me.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,me.min(),me.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n){this.position=e,this.inclusive=n}}function Ux(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ce.comparator(ce.fromName(o.referenceValue),n.key):r=Ps(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function $x(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Bn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function z4(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{}class Ze extends ik{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new P4(e,n,r):n==="array-contains"?new D4(e,r):n==="in"?new M4(e,r):n==="not-in"?new L4(e,r):n==="array-contains-any"?new O4(e,r):new Ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new R4(e,r):new V4(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ps(n,this.value)):n!==null&&Kr(this.value)===Kr(n)&&this.matchesComparison(Ps(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends ik{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new En(e,n)}matches(e){return sk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sk(t){return t.op==="and"}function ok(t){return A4(t)&&sk(t)}function A4(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function ef(t){if(t instanceof Ze)return t.field.canonicalString()+t.op.toString()+Rs(t.value);if(ok(t))return t.filters.map(e=>ef(e)).join(",");{const e=t.filters.map(n=>ef(n)).join(",");return`${t.op}(${e})`}}function ak(t,e){return t instanceof Ze?function(r,i){return i instanceof Ze&&r.op===i.op&&r.field.isEqual(i.field)&&Bn(r.value,i.value)}(t,e):t instanceof En?function(r,i){return i instanceof En&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&ak(o,i.filters[l]),!0):!1}(t,e):void ue(19439)}function lk(t){return t instanceof Ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Rs(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(lk).join(" ,")+"}"}(t):"Filter"}class P4 extends Ze{constructor(e,n,r){super(e,n,r),this.key=ce.fromName(r.referenceValue)}matches(e){const n=ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class R4 extends Ze{constructor(e,n){super(e,"in",n),this.keys=ck("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class V4 extends Ze{constructor(e,n){super(e,"not-in",n),this.keys=ck("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ck(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ce.fromName(r.referenceValue))}class D4 extends Ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qm(n)&&va(n.arrayValue,this.value)}}class M4 extends Ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&va(this.value.arrayValue,n)}}class L4 extends Ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!va(this.value.arrayValue,n)}}class O4 extends Ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>va(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F4{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function qx(t,e=null,n=[],r=[],i=null,s=null,o=null){return new F4(t,e,n,r,i,s,o)}function Wm(t){const e=pe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ef(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rs(r)).join(",")),e.Te=n}return e.Te}function Hm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!z4(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!ak(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$x(t.startAt,e.startAt)&&$x(t.endAt,e.endAt)}function tf(t){return ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function B4(t,e,n,r,i,s,o,l){return new qs(t,e,n,r,i,s,o,l)}function Km(t){return new qs(t)}function Wx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function uk(t){return t.collectionGroup!==null}function $o(t){const e=pe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new at(pt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new wa(s,r))}),n.has(pt.keyField().canonicalString())||e.Ie.push(new wa(pt.keyField(),r))}return e.Ie}function Rn(t){const e=pe(t);return e.Ee||(e.Ee=U4(e,$o(t))),e.Ee}function U4(t,e){if(t.limitType==="F")return qx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new wa(i.field,s)});const n=t.endAt?new Ic(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ic(t.startAt.position,t.startAt.inclusive):null;return qx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function nf(t,e){const n=t.filters.concat([e]);return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rf(t,e,n){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function mu(t,e){return Hm(Rn(t),Rn(e))&&t.limitType===e.limitType}function dk(t){return`${Wm(Rn(t))}|lt:${t.limitType}`}function Ki(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>lk(i)).join(", ")}]`),hu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rs(i)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function pu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ce.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of $o(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const d=Ux(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,$o(r),i)||r.endAt&&!function(o,l,u){const d=Ux(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,$o(r),i))}(t,e)}function $4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function hk(t){return(e,n)=>{let r=!1;for(const i of $o(t)){const s=q4(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function q4(t,e,n){const r=t.field.isKeyField()?ce.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),d=l.data.field(s);return u!==null&&d!==null?Ps(u,d):ue(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Mi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return Qb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4=new Ue(ce.comparator);function ar(){return W4}const fk=new Ue(ce.comparator);function So(...t){let e=fk;for(const n of t)e=e.insert(n.key,n);return e}function mk(t){let e=fk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function xi(){return qo()}function pk(){return qo()}function qo(){return new Li(t=>t.toString(),(t,e)=>t.isEqual(e))}const H4=new Ue(ce.comparator),K4=new at(ce.comparator);function ve(...t){let e=K4;for(const n of t)e=e.add(n);return e}const G4=new at(ye);function Q4(){return G4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cc(e)?"-0":e}}function gk(t){return{integerValue:""+t}}function Y4(t,e){return _4(e)?gk(e):Gm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(){this._=void 0}}function X4(t,e,n){return t instanceof zc?function(i,s){const o={fields:{[Jb]:{stringValue:Xb},[ek]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&$m(s)&&(s=fu(s)),s&&(o.fields[Zb]=s),{mapValue:o}}(n,e):t instanceof ba?yk(t,e):t instanceof ka?vk(t,e):function(i,s){const o=xk(i,s),l=Hx(o)+Hx(i.Ae);return Zh(o)&&Zh(i.Ae)?gk(l):Gm(i.serializer,l)}(t,e)}function J4(t,e,n){return t instanceof ba?yk(t,e):t instanceof ka?vk(t,e):n}function xk(t,e){return t instanceof Ac?function(r){return Zh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class zc extends gu{}class ba extends gu{constructor(e){super(),this.elements=e}}function yk(t,e){const n=wk(e);for(const r of t.elements)n.some(i=>Bn(i,r))||n.push(r);return{arrayValue:{values:n}}}class ka extends gu{constructor(e){super(),this.elements=e}}function vk(t,e){let n=wk(e);for(const r of t.elements)n=n.filter(i=>!Bn(i,r));return{arrayValue:{values:n}}}class Ac extends gu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Hx(t){return Ke(t.integerValue||t.doubleValue)}function wk(t){return qm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Z4(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ba&&i instanceof ba||r instanceof ka&&i instanceof ka?As(r.elements,i.elements,Bn):r instanceof Ac&&i instanceof Ac?Bn(r.Ae,i.Ae):r instanceof zc&&i instanceof zc}(t.transform,e.transform)}class eI{constructor(e,n){this.version=e,this.transformResults=n}}class Vn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vn}static exists(e){return new Vn(void 0,e)}static updateTime(e){return new Vn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ql(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class xu{}function bk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qm(t.key,Vn.none()):new Va(t.key,t.data,Vn.none());{const n=t.data,r=nn.empty();let i=new at(pt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Oi(t.key,r,new vn(i.toArray()),Vn.none())}}function tI(t,e,n){t instanceof Va?function(i,s,o){const l=i.value.clone(),u=Gx(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Oi?function(i,s,o){if(!ql(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Gx(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(kk(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof Va?function(s,o,l,u){if(!ql(s.precondition,o))return l;const d=s.value.clone(),h=Qx(s.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Oi?function(s,o,l,u){if(!ql(s.precondition,o))return l;const d=Qx(s.fieldTransforms,u,o),h=o.data;return h.setAll(kk(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return ql(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function nI(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=xk(r.transform,i||null);s!=null&&(n===null&&(n=nn.empty()),n.set(r.field,s))}return n||null}function Kx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&As(r,i,(s,o)=>Z4(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Va extends xu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oi extends xu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kk(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Gx(t,e,n){const r=new Map;Ee(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,J4(o,l,n[i]))}return r}function Qx(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,X4(s,o,e))}return r}class Qm extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class rI extends xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&tI(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=pk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=bk(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,(n,r)=>Kx(n,r))&&As(this.baseMutations,e.baseMutations,(n,r)=>Kx(n,r))}}class Ym{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ee(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return H4}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Ym(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe,we;function aI(t){switch(t){case G.OK:return ue(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return ue(15467,{code:t})}}function _k(t){if(t===void 0)return or("GRPC error has no .code"),G.UNKNOWN;switch(t){case Qe.OK:return G.OK;case Qe.CANCELLED:return G.CANCELLED;case Qe.UNKNOWN:return G.UNKNOWN;case Qe.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case Qe.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case Qe.INTERNAL:return G.INTERNAL;case Qe.UNAVAILABLE:return G.UNAVAILABLE;case Qe.UNAUTHENTICATED:return G.UNAUTHENTICATED;case Qe.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case Qe.NOT_FOUND:return G.NOT_FOUND;case Qe.ALREADY_EXISTS:return G.ALREADY_EXISTS;case Qe.PERMISSION_DENIED:return G.PERMISSION_DENIED;case Qe.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case Qe.ABORTED:return G.ABORTED;case Qe.OUT_OF_RANGE:return G.OUT_OF_RANGE;case Qe.UNIMPLEMENTED:return G.UNIMPLEMENTED;case Qe.DATA_LOSS:return G.DATA_LOSS;default:return ue(39323,{code:t})}}(we=Qe||(Qe={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI=new Lr([4294967295,4294967295],0);function Yx(t){const e=lI().encode(t),n=new Lb;return n.update(e),new Uint8Array(n.digest())}function Xx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Lr([n,r],0),new Lr([i,s],0)]}class Xm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new jo(`Invalid padding: ${n}`);if(r<0)throw new jo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new jo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new jo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Lr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Lr.fromNumber(r)));return i.compare(cI)===1&&(i=new Lr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Yx(e),[r,i]=Xx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Xm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Yx(e),[r,i]=Xx(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Da.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new yu(me.min(),i,new Ue(ye),ar(),ve())}}class Da{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Da(r,n,ve(),ve(),ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Ek{constructor(e,n){this.targetId=e,this.Ce=n}}class Tk{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Jx{constructor(){this.ve=0,this.Fe=Zx(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),n=ve(),r=ve();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue(38017,{changeType:s})}}),new Da(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Zx()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class uI{constructor(e){this.Ge=e,this.ze=new Map,this.je=ar(),this.Je=kl(),this.He=kl(),this.Ye=new Ue(ye)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ue(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(tf(s))if(r===0){const o=new ce(s.path);this.et(n,o,Nt.newNoDocument(o,me.min()))}else Ee(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Hr(r).toUint8Array()}catch(u){if(u instanceof Yb)return zs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Xm(o,i,s)}catch(u){return zs(u instanceof jo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&tf(l.target)){const u=new ce(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Nt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=ve();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new yu(e,n,this.Ye,this.je,r);return this.je=ar(),this.Je=kl(),this.He=kl(),this.Ye=new Ue(ye),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Jx,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new at(ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new at(ye),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||se("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Jx),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function kl(){return new Ue(ce.comparator)}function Zx(){return new Ue(ce.comparator)}const dI={asc:"ASCENDING",desc:"DESCENDING"},hI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fI={and:"AND",or:"OR"};class mI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function sf(t,e){return t.useProto3Json||hu(e)?e:{value:e}}function Pc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Nk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pI(t,e){return Pc(t,e.toTimestamp())}function Dn(t){return Ee(!!t,49232),me.fromTimestamp(function(n){const r=Wr(n);return new Re(r.seconds,r.nanos)}(t))}function Jm(t,e){return of(t,e).canonicalString()}function of(t,e){const n=function(i){return new je(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Ck(t){const e=je.fromString(t);return Ee(Ak(e),10190,{key:e.toString()}),e}function af(t,e){return Jm(t.databaseId,e.path)}function Cd(t,e){const n=Ck(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ce(jk(n))}function Sk(t,e){return Jm(t.databaseId,e)}function gI(t){const e=Ck(t);return e.length===4?je.emptyPath():jk(e)}function lf(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jk(t){return Ee(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function ey(t,e,n){return{name:af(t,e),fields:n.value.mapValue.fields}}function xI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ue(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ee(h===void 0||typeof h=="string",58123),vt.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),vt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?G.UNKNOWN:_k(d.code);return new ie(h,d.message||"")}(o);n=new Tk(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Cd(t,r.document.name),s=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):me.min(),l=new nn({mapValue:{fields:r.document.fields}}),u=Nt.newFoundDocument(i,s,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Wl(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Cd(t,r.document),s=r.readTime?Dn(r.readTime):me.min(),o=Nt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Wl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Cd(t,r.document),s=r.removedTargetIds||[];n=new Wl([],s,i,null)}else{if(!("filter"in e))return ue(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new oI(i,s),l=r.targetId;n=new Ek(l,o)}}return n}function yI(t,e){let n;if(e instanceof Va)n={update:ey(t,e.key,e.value)};else if(e instanceof Qm)n={delete:af(t,e.key)};else if(e instanceof Oi)n={update:ey(t,e.key,e.data),updateMask:CI(e.fieldMask)};else{if(!(e instanceof rI))return ue(16599,{Vt:e.type});n={verify:af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof zc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ba)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ka)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ac)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw ue(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ue(27497)}(t,e.precondition)),n}function vI(t,e){return t&&t.length>0?(Ee(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?Dn(i.updateTime):Dn(s);return o.isEqual(me.min())&&(o=Dn(s)),new eI(o,i.transformResults||[])}(n,e))):[]}function wI(t,e){return{documents:[Sk(t,e.path)]}}function bI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Sk(t,i);const s=function(d){if(d.length!==0)return zk(En.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Gi(p.field),direction:EI(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=sf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function kI(t){let e=gI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ee(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(m){const p=Ik(m);return p instanceof En&&ok(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(T){return new wa(Qi(T.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(n.orderBy));let l=null;n.limit&&(l=function(m){let p;return p=typeof m=="object"?m.value:m,hu(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new Ic(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,v=m.values||[];return new Ic(v,p)}(n.endAt)),B4(e,i,o,s,l,"F",u,d)}function _I(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ik(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qi(n.unaryFilter.field);return Ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Qi(n.unaryFilter.field);return Ze.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Qi(n.unaryFilter.field);return Ze.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qi(n.unaryFilter.field);return Ze.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ue(61313);default:return ue(60726)}}(t):t.fieldFilter!==void 0?function(n){return Ze.create(Qi(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ue(58110);default:return ue(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(r=>Ik(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue(1026)}}(n.compositeFilter.op))}(t):ue(30097,{filter:t})}function EI(t){return dI[t]}function TI(t){return hI[t]}function NI(t){return fI[t]}function Gi(t){return{fieldPath:t.canonicalString()}}function Qi(t){return pt.fromServerFormat(t.fieldPath)}function zk(t){return t instanceof Ze?function(n){if(n.op==="=="){if(Bx(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NAN"}};if(Fx(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Bx(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NOT_NAN"}};if(Fx(n.value))return{unaryFilter:{field:Gi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gi(n.field),op:TI(n.op),value:n.value}}}(t):t instanceof En?function(n){const r=n.getFilters().map(i=>zk(i));return r.length===1?r[0]:{compositeFilter:{op:NI(n.op),filters:r}}}(t):ue(54877,{filter:t})}function CI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ak(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e,n,r,i,s=me.min(),o=me.min(),l=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Cr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.yt=e}}function jI(t){const e=kI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.Cn=new zI}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(qr.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class zI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(je.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Pk=41943040;class Mt{static withCacheSize(e){return new Mt(e,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mt.DEFAULT_COLLECTION_PERCENTILE=10,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Mt.DEFAULT=new Mt(Pk,Mt.DEFAULT_COLLECTION_PERCENTILE,Mt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Mt.DISABLED=new Mt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Vs(0)}static cr(){return new Vs(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny="LruGarbageCollector",AI=1048576;function ry([t,e],[n,r]){const i=ye(t,n);return i===0?ye(e,r):i}class PI{constructor(e){this.Ir=e,this.buffer=new at(ry),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();ry(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class RI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(ny,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){$s(n)?se(ny,"Ignoring IndexedDB error during garbage collection: ",n):await Us(n)}await this.Vr(3e5)})}}class VI{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(du.ce);const r=new PI(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(ty)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ty):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(d=Date.now(),Hi()<=be.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function DI(t,e){return new VI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(){this.changes=new Li(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Wo(r.mutation,i,vn.empty(),Re.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){const i=xi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=So();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=xi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=ar();const o=qo(),l=function(){return qo()}();return n.forEach((u,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Oi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Wo(h.mutation,d,h.mutation.getFieldMask(),Re.now())):o.set(d.key,vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new LI(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=qo();let i=new Ue((o,l)=>o-l),s=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||vn.empty();h=l.applyToLocalView(d,h),r.set(u,h);const m=(i.get(l.batchId)||ve()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,m=pk();h.forEach(p=>{if(!s.has(p)){const v=bk(n.get(p),r.get(p));v!==null&&m.set(p,v),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):uk(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(xi());let l=ga,u=s;return o.next(d=>Q.forEach(d,(h,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,u,d,ve())).next(h=>({batchId:l,changes:mk(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ce(n)).next(r=>{let i=So();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=So();return this.indexManager.getCollectionParents(e,s).next(l=>Q.forEach(l,u=>{const d=function(m,p){return new qs(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Nt.newInvalidDocument(h)))});let l=So();return o.forEach((u,d)=>{const h=s.get(u);h!==void 0&&Wo(h.mutation,d,vn.empty(),Re.now()),pu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Dn(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:jI(i.bundledQuery),readTime:Dn(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.overlays=new Ue(ce.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=xi();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=xi(),s=n.length+1,o=new ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ue((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=xi(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=xi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return Q.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new sI(n,r));let s=this.qr.get(n);s===void 0&&(s=ve(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(){this.Qr=new at(ct.$r),this.Ur=new at(ct.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new ct(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new ct(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ce(new je([])),r=new ct(n,e),i=new ct(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ce(new je([])),r=new ct(n,e),i=new ct(n,e+1);let s=ve();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new ct(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ct{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ce.comparator(e.key,n.key)||ye(e.Yr,n.Yr)}static Kr(e,n){return ye(e.Yr,n.Yr)||ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new at(ct.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iI(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new ct(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Um:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ct(n,0),i=new ct(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ye);return n.forEach(i=>{const s=new ct(i,0),o=new ct(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ce.isDocumentKey(s)||(s=s.child(""));const o=new ct(new ce(s),0);let l=new at(ye);return this.Zr.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(u.Yr)),!0)},o),Q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ee(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(n.mutations,i=>{const s=new ct(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new ct(n,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.ri=e,this.docs=function(){return new Ue(ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nt.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=ar();const o=n.path,l=new ce(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||v4(y4(h),r)<=0||(i.has(h.key)||pu(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ue(9500)}ii(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new WI(this)}getSize(e){return Q.resolve(this.size)}}class WI extends MI{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.persistence=e,this.si=new Li(n=>Wm(n),Hm),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new Zm,this.targetCount=0,this.ai=Vs.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Vs(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,n){this.ui={},this.overlays={},this.ci=new du(0),this.li=!1,this.li=!0,this.hi=new UI,this.referenceDelegate=e(this),this.Pi=new HI(this),this.indexManager=new II,this.remoteDocumentCache=function(i){return new qI(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new SI(n),this.Ii=new FI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new $I(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){se("MemoryPersistence","Starting transaction:",e);const i=new KI(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class KI extends b4{constructor(e){super(),this.currentSequenceNumber=e}}class ep{constructor(e){this.persistence=e,this.Ri=new Zm,this.Vi=null}static mi(e){return new ep(e)}get fi(){if(this.Vi)return this.Vi;throw ue(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{const i=ce.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Rc{constructor(e,n){this.persistence=e,this.pi=new Li(r=>E4(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=DI(this,n)}static mi(e,n){return new Rc(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?Q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ul(e.data.value)),n}br(e,n,r){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ve(),i=ve();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new tp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vC()?8:k4(gC())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new GI;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Hi()<=be.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",Ki(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(Hi()<=be.DEBUG&&se("QueryEngine","Query:",Ki(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Hi()<=be.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",Ki(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):Q.resolve())}ys(e,n){if(Wx(n))return Q.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rf(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ve(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.Ds(n,l);return this.Cs(n,d,o,u.readTime)?this.ys(e,rf(n,null,"F")):this.vs(e,d,n,u)}))})))}ws(e,n,r,i){return Wx(n)||i.isEqual(me.min())?Q.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?Q.resolve(null):(Hi()<=be.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ki(n)),this.vs(e,o,n,x4(i,ga)).next(l=>l))})}Ds(e,n){let r=new at(hk(e));return n.forEach((i,s)=>{pu(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Hi()<=be.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",Ki(n)),this.ps.getDocumentsMatchingQuery(e,n,qr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="LocalStore",YI=3e8;class XI{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ue(ye),this.xs=new Li(s=>Wm(s),Hm),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OI(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function JI(t,e,n,r){return new XI(t,e,n,r)}async function Vk(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=ve();for(const d of i){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of s){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function ZI(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const m=d.batch,p=m.keys();let v=Q.resolve();return p.forEach(T=>{v=v.next(()=>h.getEntry(u,T)).next(N=>{const z=d.docVersions.get(T);Ee(z!==null,48541),N.version.compareTo(z)<0&&(m.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),h.addEntry(N)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=ve();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Dk(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function e5(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,m)=>{const p=i.get(m);if(!p)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,m).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,m)));let v=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(vt.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(m,v),function(N,z,_){return N.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=YI?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(p,v,h)&&l.push(n.Pi.updateTargetData(s,v))});let u=ar(),d=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(t5(s,o,e.documentUpdates).next(h=>{u=h.ks,d=h.qs})),!r.isEqual(me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(m=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return Q.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,d)).next(()=>u)}).then(s=>(n.Ms=i,s))}function t5(t,e,n){let r=ve(),i=ve();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=ar();return n.forEach((l,u)=>{const d=s.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(me.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):se(np,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{ks:o,qs:i}})}function n5(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Um),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function r5(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Cr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function cf(t,e,n){const r=pe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!$s(o))throw o;se(np,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function iy(t,e,n){const r=pe(t);let i=me.min(),s=ve();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=pe(u),p=m.xs.get(h);return p!==void 0?Q.resolve(m.Ms.get(p)):m.Pi.getTargetData(d,h)}(r,o,Rn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?s:ve())).next(l=>(i5(r,$4(e),l),{documents:l,Qs:s})))}function i5(t,e,n){let r=t.Os.get(e)||me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class sy{constructor(){this.activeTargetIds=Q4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class s5{constructor(){this.Mo=new sy,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new sy,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy="ConnectivityMonitor";class ay{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(oy,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(oy,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _l=null;function uf(){return _l===null?_l=function(){return 268435456+Math.round(2147483648*Math.random())}():_l++,"0x"+_l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="RestConnection",a5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class l5{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Sc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=uf(),l=this.zo(e,n.toUriEncodedString());se(Sd,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:d}=new URL(l),h=zm(d);return this.Jo(e,l,u,r,h).then(m=>(se(Sd,`Received RPC '${e}' ${o}: `,m),m),m=>{throw zs(Sd,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=a5[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="WebChannelConnection";class u5 extends l5{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=uf();return new Promise((l,u)=>{const d=new Ob;d.setWithCredentials(!0),d.listenOnce(Fb.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Bl.NO_ERROR:const m=d.getResponseJson();se(_t,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Bl.TIMEOUT:se(_t,`RPC '${e}' ${o} timed out`),u(new ie(G.DEADLINE_EXCEEDED,"Request time out"));break;case Bl.HTTP_ERROR:const p=d.getStatus();if(se(_t,`RPC '${e}' ${o} failed with status:`,p,"response text:",d.getResponseText()),p>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const T=v==null?void 0:v.error;if(T&&T.status&&T.message){const N=function(_){const y=_.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(y)>=0?y:G.UNKNOWN}(T.status);u(new ie(N,T.message))}else u(new ie(G.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new ie(G.UNAVAILABLE,"Connection failed."));break;default:ue(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{se(_t,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);se(_t,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=uf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$b(),l=Ub(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=s.join("");se(_t,`Creating RPC '${e}' stream ${i}: ${h}`,u);const m=o.createWebChannel(h,u);this.I_(m);let p=!1,v=!1;const T=new c5({Yo:z=>{v?se(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,z):(p||(se(_t,`Opening RPC '${e}' stream ${i} transport.`),m.open(),p=!0),se(_t,`RPC '${e}' stream ${i} sending:`,z),m.send(z))},Zo:()=>m.close()}),N=(z,_,y)=>{z.listen(_,w=>{try{y(w)}catch(I){setTimeout(()=>{throw I},0)}})};return N(m,Co.EventType.OPEN,()=>{v||(se(_t,`RPC '${e}' stream ${i} transport opened.`),T.o_())}),N(m,Co.EventType.CLOSE,()=>{v||(v=!0,se(_t,`RPC '${e}' stream ${i} transport closed`),T.a_(),this.E_(m))}),N(m,Co.EventType.ERROR,z=>{v||(v=!0,zs(_t,`RPC '${e}' stream ${i} transport errored. Name:`,z.name,"Message:",z.message),T.a_(new ie(G.UNAVAILABLE,"The operation could not be completed")))}),N(m,Co.EventType.MESSAGE,z=>{var _;if(!v){const y=z.data[0];Ee(!!y,16349);const w=y,I=(w==null?void 0:w.error)||((_=w[0])==null?void 0:_.error);if(I){se(_t,`RPC '${e}' stream ${i} received error:`,I);const V=I.status;let L=function(k){const C=Qe[k];if(C!==void 0)return _k(C)}(V),b=I.message;L===void 0&&(L=G.INTERNAL,b="Unknown error status: "+V+" with message "+I.message),v=!0,T.a_(new ie(L,b)),m.close()}else se(_t,`RPC '${e}' stream ${i} received:`,y),T.u_(y)}}),N(l,Bb.STAT_EVENT,z=>{z.stat===Yh.PROXY?se(_t,`RPC '${e}' stream ${i} detected buffering proxy`):z.stat===Yh.NOPROXY&&se(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{T.__()},0),T}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function jd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t){return new mI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&se("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="PersistentStream";class Lk{constructor(e,n,r,i,s,o,l,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mk(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new ie(G.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return se(ly,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(se(ly,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class d5 extends Lk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xI(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?Dn(o.readTime):me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=lf(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=tf(u)?{documents:wI(s,u)}:{query:bI(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Nk(s,o.resumeToken);const d=sf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(me.min())>0){l.readTime=Pc(s,o.snapshotVersion.toTimestamp());const d=sf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=_I(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=lf(this.serializer),n.removeTarget=e,this.q_(n)}}class h5 extends Lk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=vI(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=lf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>yI(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{}class m5 extends f5{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,of(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(G.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,of(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(G.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class p5{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(or(n),this.aa=!1):se("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="RemoteStore";class g5{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Fi(this)&&(se(Pi,"Restarting streams for network reachability change."),await async function(u){const d=pe(u);d.Ea.add(4),await Ma(d),d.Ra.set("Unknown"),d.Ea.delete(4),await wu(d)}(this))})}),this.Ra=new p5(r,i)}}async function wu(t){if(Fi(t))for(const e of t.da)await e(!0)}async function Ma(t){for(const e of t.da)await e(!1)}function Ok(t,e){const n=pe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),op(n)?sp(n):Ws(n).O_()&&ip(n,e))}function rp(t,e){const n=pe(t),r=Ws(n);n.Ia.delete(e),r.O_()&&Fk(n,e),n.Ia.size===0&&(r.O_()?r.L_():Fi(n)&&n.Ra.set("Unknown"))}function ip(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ws(t).Y_(e)}function Fk(t,e){t.Va.Ue(e),Ws(t).Z_(e)}function sp(t){t.Va=new uI({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ws(t).start(),t.Ra.ua()}function op(t){return Fi(t)&&!Ws(t).x_()&&t.Ia.size>0}function Fi(t){return pe(t).Ea.size===0}function Bk(t){t.Va=void 0}async function x5(t){t.Ra.set("Online")}async function y5(t){t.Ia.forEach((e,n)=>{ip(t,e)})}async function v5(t,e){Bk(t),op(t)?(t.Ra.ha(e),sp(t)):t.Ra.set("Unknown")}async function w5(t,e,n){if(t.Ra.set("Online"),e instanceof Tk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){se(Pi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vc(t,r)}else if(e instanceof Wl?t.Va.Ze(e):e instanceof Ek?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const r=await Dk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=s.Ia.get(u);if(!h)return;s.Ia.set(u,h.withResumeToken(vt.EMPTY_BYTE_STRING,h.snapshotVersion)),Fk(s,u);const m=new Cr(h.target,u,d,h.sequenceNumber);ip(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){se(Pi,"Failed to raise snapshot:",r),await Vc(t,r)}}async function Vc(t,e,n){if(!$s(e))throw e;t.Ea.add(1),await Ma(t),t.Ra.set("Offline"),n||(n=()=>Dk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{se(Pi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await wu(t)})}function Uk(t,e){return e().catch(n=>Vc(t,n,e))}async function bu(t){const e=pe(t),n=Gr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Um;for(;b5(e);)try{const i=await n5(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,k5(e,i)}catch(i){await Vc(e,i)}$k(e)&&qk(e)}function b5(t){return Fi(t)&&t.Ta.length<10}function k5(t,e){t.Ta.push(e);const n=Gr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function $k(t){return Fi(t)&&!Gr(t).x_()&&t.Ta.length>0}function qk(t){Gr(t).start()}async function _5(t){Gr(t).ra()}async function E5(t){const e=Gr(t);for(const n of t.Ta)e.ea(n.mutations)}async function T5(t,e,n){const r=t.Ta.shift(),i=Ym.from(r,e,n);await Uk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await bu(t)}async function N5(t,e){e&&Gr(t).X_&&await async function(r,i){if(function(o){return aI(o)&&o!==G.ABORTED}(i.code)){const s=r.Ta.shift();Gr(r).B_(),await Uk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await bu(r)}}(t,e),$k(t)&&qk(t)}async function cy(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),se(Pi,"RemoteStore received new credentials");const r=Fi(n);n.Ea.add(3),await Ma(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await wu(n)}async function C5(t,e){const n=pe(t);e?(n.Ea.delete(2),await wu(n)):e||(n.Ea.add(2),await Ma(n),n.Ra.set("Unknown"))}function Ws(t){return t.ma||(t.ma=function(n,r,i){const s=pe(n);return s.sa(),new d5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:x5.bind(null,t),t_:y5.bind(null,t),r_:v5.bind(null,t),H_:w5.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),op(t)?sp(t):t.Ra.set("Unknown")):(await t.ma.stop(),Bk(t))})),t.ma}function Gr(t){return t.fa||(t.fa=function(n,r,i){const s=pe(n);return s.sa(),new h5(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:_5.bind(null,t),r_:N5.bind(null,t),ta:E5.bind(null,t),na:T5.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await bu(t)):(await t.fa.stop(),t.Ta.length>0&&(se(Pi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new ap(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lp(t,e){if(or("AsyncQueue",`${e}: ${t}`),$s(t))return new ie(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{static emptySet(e){return new ws(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ce.comparator(n.key,r.key):(n,r)=>ce.comparator(n.key,r.key),this.keyedMap=So(),this.sortedSet=new Ue(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(){this.ga=new Ue(ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ue(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ds{constructor(e,n,r,i,s,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ds(e,n,ws.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class j5{constructor(){this.queries=dy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=pe(n),s=i.queries;i.queries=dy(),s.forEach((o,l)=>{for(const u of l.Sa)u.onError(r)})})(this,new ie(G.ABORTED,"Firestore shutting down"))}}function dy(){return new Li(t=>dk(t),mu)}async function Wk(t,e){const n=pe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new S5,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=lp(o,`Initialization of query '${Ki(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&cp(n)}async function Hk(t,e){const n=pe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function I5(t,e){const n=pe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&cp(n)}function z5(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function cp(t){t.Ca.forEach(e=>{e.next()})}var df,hy;(hy=df||(df={})).Ma="default",hy.Cache="cache";class Kk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ds(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ds.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e){this.key=e}}class Qk{constructor(e){this.key=e}}class A5{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ve(),this.mutatedKeys=ve(),this.eu=hk(e),this.tu=new ws(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new uy,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,m)=>{const p=i.get(h),v=pu(this.query,m)?m:null,T=!!p&&this.mutatedKeys.has(p.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let z=!1;p&&v?p.data.isEqual(v.data)?T!==N&&(r.track({type:3,doc:v}),z=!0):this.su(p,v)||(r.track({type:2,doc:v}),z=!0,(u&&this.eu(v,u)>0||d&&this.eu(v,d)<0)&&(l=!0)):!p&&v?(r.track({type:0,doc:v}),z=!0):p&&!v&&(r.track({type:1,doc:p}),z=!0,(u||d)&&(l=!0)),z&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,m)=>function(v,T){const N=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue(20277,{Rt:z})}};return N(v)-N(T)}(h.type,m.type)||this.eu(h.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,d=u!==this.Za;return this.Za=u,o.length!==0||d?{snapshot:new Ds(this.query,e.tu,s,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new uy,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ve(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Qk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Gk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ve();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ds.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const up="SyncEngine";class P5{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class R5{constructor(e){this.key=e,this.hu=!1}}class V5{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Li(l=>dk(l),mu),this.Iu=new Map,this.Eu=new Set,this.du=new Ue(ce.comparator),this.Au=new Map,this.Ru=new Zm,this.Vu={},this.mu=new Map,this.fu=Vs.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function D5(t,e,n=!0){const r=t2(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Yk(r,e,n,!0),i}async function M5(t,e){const n=t2(t);await Yk(n,e,!0,!1)}async function Yk(t,e,n,r){const i=await r5(t.localStore,Rn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await L5(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ok(t.remoteStore,i),l}async function L5(t,e,n,r,i){t.pu=(m,p,v)=>async function(N,z,_,y){let w=z.view.ru(_);w.Cs&&(w=await iy(N.localStore,z.query,!1).then(({documents:b})=>z.view.ru(b,w)));const I=y&&y.targetChanges.get(z.targetId),V=y&&y.targetMismatches.get(z.targetId)!=null,L=z.view.applyChanges(w,N.isPrimaryClient,I,V);return my(N,z.targetId,L.au),L.snapshot}(t,m,p,v);const s=await iy(t.localStore,e,!0),o=new A5(e,s.Qs),l=o.ru(s.documents),u=Da.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,u);my(t,n,d.au);const h=new P5(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function O5(t,e,n){const r=pe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!mu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rp(r.remoteStore,i.targetId),hf(r,i.targetId)}).catch(Us)):(hf(r,i.targetId),await cf(r.localStore,i.targetId,!0))}async function F5(t,e){const n=pe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rp(n.remoteStore,r.targetId))}async function B5(t,e,n){const r=G5(t);try{const i=await function(o,l){const u=pe(o),d=Re.now(),h=l.reduce((v,T)=>v.add(T.key),ve());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=ar(),N=ve();return u.Ns.getEntries(v,h).next(z=>{T=z,T.forEach((_,y)=>{y.isValidDocument()||(N=N.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(z=>{m=z;const _=[];for(const y of l){const w=nI(y,m.get(y.key).overlayedDocument);w!=null&&_.push(new Oi(y.key,w,rk(w.value.mapValue),Vn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,_,l)}).next(z=>{p=z;const _=z.applyToLocalDocumentSet(m,N);return u.documentOverlayCache.saveOverlays(v,z.batchId,_)})}).then(()=>({batchId:p.batchId,changes:mk(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ue(ye)),d=d.insert(l,u),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await La(r,i.changes),await bu(r.remoteStore)}catch(i){const s=lp(i,"Failed to persist write");n.reject(s)}}async function Xk(t,e){const n=pe(t);try{const r=await e5(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ee(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ee(o.hu,14607):i.removedDocuments.size>0&&(Ee(o.hu,42227),o.hu=!1))}),await La(n,r,e)}catch(r){await Us(r)}}function fy(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=pe(o);u.onlineState=l;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.Sa)p.va(l)&&(d=!0)}),d&&cp(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function U5(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ue(ce.comparator);o=o.insert(s,Nt.newNoDocument(s,me.min()));const l=ve().add(s),u=new yu(me.min(),new Map,new Ue(ye),o,l);await Xk(r,u),r.du=r.du.remove(s),r.Au.delete(e),dp(r)}else await cf(r.localStore,e,!1).then(()=>hf(r,e,n)).catch(Us)}async function $5(t,e){const n=pe(t),r=e.batch.batchId;try{const i=await ZI(n.localStore,e);Zk(n,r,null),Jk(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await La(n,i)}catch(i){await Us(i)}}async function q5(t,e,n){const r=pe(t);try{const i=await function(o,l){const u=pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(m=>(Ee(m!==null,37113),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);Zk(r,e,n),Jk(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await La(r,i)}catch(i){await Us(i)}}function Jk(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Zk(t,e,n){const r=pe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function hf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||e2(t,r)})}function e2(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(rp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),dp(t))}function my(t,e,n){for(const r of n)r instanceof Gk?(t.Ru.addReference(r.key,e),W5(t,r)):r instanceof Qk?(se(up,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||e2(t,r.key)):ue(19791,{wu:r})}function W5(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(se(up,"New document in limbo: "+n),t.Eu.add(r),dp(t))}function dp(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ce(je.fromString(e)),r=t.fu.next();t.Au.set(r,new R5(n)),t.du=t.du.insert(n,r),Ok(t.remoteStore,new Cr(Rn(Km(n.path)),r,"TargetPurposeLimboResolution",du.ce))}}async function La(t,e,n){const r=pe(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){i.push(d);const m=tp.As(u.targetId,d);s.push(m)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,d){const h=pe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>Q.forEach(d,p=>Q.forEach(p.Es,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>Q.forEach(p.ds,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!$s(m))throw m;se(np,"Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const v=h.Ms.get(p),T=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(T);h.Ms=h.Ms.insert(p,N)}}}(r.localStore,s))}async function H5(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){se(up,"User change. New user:",e.toKey());const r=await Vk(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new ie(G.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await La(n,r.Ls)}}function K5(t,e){const n=pe(t),r=n.Au.get(e);if(r&&r.hu)return ve().add(r.key);{let i=ve();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function t2(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=U5.bind(null,e),e.Pu.H_=I5.bind(null,e.eventManager),e.Pu.yu=z5.bind(null,e.eventManager),e}function G5(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=q5.bind(null,e),e}class Dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return JI(this.persistence,new QI,e.initialUser,this.serializer)}Cu(e){return new Rk(ep.mi,this.serializer)}Du(e){return new s5}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dc.provider={build:()=>new Dc};class Q5 extends Dc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ee(this.persistence.referenceDelegate instanceof Rc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new RI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Mt.withCacheSize(this.cacheSizeBytes):Mt.DEFAULT;return new Rk(r=>Rc.mi(r,n),this.serializer)}}class ff{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=H5.bind(null,this.syncEngine),await C5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new j5}()}createDatastore(e){const n=vu(e.databaseInfo.databaseId),r=function(s){return new u5(s)}(e.databaseInfo);return function(s,o,l,u){return new m5(s,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new g5(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>fy(this.syncEngine,n,0),function(){return ay.v()?new ay:new o5}())}createSyncEngine(e,n){return function(i,s,o,l,u,d,h){const m=new V5(i,s,o,l,u,d);return h&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=pe(i);se(Pi,"RemoteStore shutting down."),s.Ea.add(5),await Ma(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}ff.provider={build:()=>new ff};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr="FirestoreClient";class Y5{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Et.UNAUTHENTICATED,this.clientId=Bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{se(Qr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(se(Qr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lp(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Id(t,e){t.asyncQueue.verifyOperationInProgress(),se(Qr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Vk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function py(t,e){t.asyncQueue.verifyOperationInProgress();const n=await X5(t);se(Qr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cy(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>cy(e.remoteStore,i)),t._onlineComponents=e}async function X5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){se(Qr,"Using user provided OfflineComponentProvider");try{await Id(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===G.FAILED_PRECONDITION||i.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;zs("Error using user provided cache. Falling back to memory cache: "+n),await Id(t,new Dc)}}else se(Qr,"Using default OfflineComponentProvider"),await Id(t,new Q5(void 0));return t._offlineComponents}async function r2(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(se(Qr,"Using user provided OnlineComponentProvider"),await py(t,t._uninitializedComponentsProvider._online)):(se(Qr,"Using default OnlineComponentProvider"),await py(t,new ff))),t._onlineComponents}function J5(t){return r2(t).then(e=>e.syncEngine)}async function i2(t){const e=await r2(t),n=e.eventManager;return n.onListen=D5.bind(null,e.syncEngine),n.onUnlisten=O5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=M5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=F5.bind(null,e.syncEngine),n}function Z5(t,e,n={}){const r=new Xn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,d){const h=new n2({next:p=>{h.Nu(),o.enqueueAndForget(()=>Hk(s,m));const v=p.docs.has(l);!v&&p.fromCache?d.reject(new ie(G.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&u&&u.source==="server"?d.reject(new ie(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Kk(Km(l.path),h,{includeMetadataChanges:!0,qa:!0});return Wk(s,m)}(await i2(t),t.asyncQueue,e,n,r)),r.promise}function ez(t,e,n={}){const r=new Xn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,d){const h=new n2({next:p=>{h.Nu(),o.enqueueAndForget(()=>Hk(s,m)),p.fromCache&&u.source==="server"?d.reject(new ie(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new Kk(l,h,{includeMetadataChanges:!0,qa:!0});return Wk(s,m)}(await i2(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s2(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2="firestore.googleapis.com",xy=!0;class yy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ie(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o2,this.ssl=xy}else this.host=e.host,this.ssl=e.ssl??xy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Pk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<AI)throw new ie(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=s2(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ie(G.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ku{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ie(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new o4;switch(r.type){case"firstParty":return new u4(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gy.get(n);r&&(se("ComponentProvider","Removing Datastore"),gy.delete(n),r.terminate())}(this),Promise.resolve()}}function tz(t,e,n,r={}){var d;t=$r(t,ku);const i=zm(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(dC(`https://${l}`),pC("Firestore",!0)),s.host!==o2&&s.host!==l&&zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!ma(u,o)&&(t._setSettings(u),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=Et.MOCK_USER;else{h=hC(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new ie(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Et(p)}t._authCredentials=new a4(new Wb(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Bi(this.firestore,e,this._query)}}class tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tt(this.firestore,e,this._key)}toJSON(){return{type:tt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ra(n,tt._jsonSchema))return new tt(e,r||null,new ce(je.fromString(n.referencePath)))}}tt._jsonSchemaVersion="firestore/documentReference/1.0",tt._jsonSchema={type:et("string",tt._jsonSchemaVersion),referencePath:et("string")};class Or extends Bi{constructor(e,n,r){super(e,n,Km(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tt(this.firestore,null,new ce(e))}withConverter(e){return new Or(this.firestore,e,this._path)}}function zd(t,e,...n){if(t=rr(t),Hb("collection","path",e),t instanceof ku){const r=je.fromString(e,...n);return zx(r),new Or(t,null,r)}{if(!(t instanceof tt||t instanceof Or))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return zx(r),new Or(t.firestore,null,r)}}function rt(t,e,...n){if(t=rr(t),arguments.length===1&&(e=Bm.newId()),Hb("doc","path",e),t instanceof ku){const r=je.fromString(e,...n);return Ix(r),new tt(t,null,new ce(r))}{if(!(t instanceof tt||t instanceof Or))throw new ie(G.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return Ix(r),new tt(t.firestore,t instanceof Or?t.converter:null,new ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="AsyncQueue";class wy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mk(this,"async_queue_retry"),this._c=()=>{const r=jd();r&&se(vy,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=jd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=jd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Xn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!$s(e))throw e;se(vy,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,or("INTERNAL UNHANDLED ERROR: ",by(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=ap.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ue(47125,{Pc:by(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function by(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Oa extends ku{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new wy,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wy(e),this._firestoreClient=void 0,await e}}}function nz(t,e){const n=typeof t=="object"?t:mb(),r=typeof t=="string"?t:Sc,i=Pa(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=cC("firestore");s&&tz(i,...s)}return i}function hp(t){if(t._terminated)throw new ie(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||rz(t),t._firestoreClient}function rz(t){var r,i,s;const e=t._freezeSettings(),n=function(l,u,d,h){return new C4(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,s2(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Y5(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new rn(vt.fromBase64String(e))}catch(n){throw new ie(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new rn(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ra(e,rn._jsonSchema))return rn.fromBase64String(e.bytes)}}rn._jsonSchemaVersion="firestore/bytes/1.0",rn._jsonSchema={type:et("string",rn._jsonSchemaVersion),bytes:et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a2{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Mn._jsonSchemaVersion}}static fromJSON(e){if(Ra(e,Mn._jsonSchema))return new Mn(e.latitude,e.longitude)}}Mn._jsonSchemaVersion="firestore/geoPoint/1.0",Mn._jsonSchema={type:et("string",Mn._jsonSchemaVersion),latitude:et("number"),longitude:et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ln._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ra(e,Ln._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ln(e.vectorValues);throw new ie(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ln._jsonSchemaVersion="firestore/vectorValue/1.0",Ln._jsonSchema={type:et("string",Ln._jsonSchemaVersion),vectorValues:et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iz=/^__.*__$/;class sz{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Oi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Va(e,this.data,n,this.fieldTransforms)}}function l2(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue(40011,{Ac:t})}}class mp{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Mc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(l2(this.Ac)&&iz.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class oz{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||vu(e)}Cc(e,n,r,i=!1){return new mp({Ac:e,methodName:n,Dc:r,path:pt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c2(t){const e=t._freezeSettings(),n=vu(t._databaseId);return new oz(t._databaseId,!!e.ignoreUndefinedProperties,n)}function az(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);h2("Data must be an object, but it was:",o,r);const l=u2(r,o);let u,d;if(s.merge)u=new vn(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const p=cz(e,m,n);if(!o.contains(p))throw new ie(G.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);dz(h,p)||h.push(p)}u=new vn(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new sz(new nn(l),u,d)}function lz(t,e,n,r=!1){return pp(n,t.Cc(r?4:3,e))}function pp(t,e){if(d2(t=rr(t)))return h2("Unsupported field value:",e,t),u2(t,e);if(t instanceof a2)return function(r,i){if(!l2(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=pp(l,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=rr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Y4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Re.fromDate(r);return{timestampValue:Pc(i.serializer,s)}}if(r instanceof Re){const s=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Pc(i.serializer,s)}}if(r instanceof Mn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof rn)return{bytesValue:Nk(i.serializer,r._byteString)};if(r instanceof tt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jm(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ln)return function(o,l){return{mapValue:{fields:{[tk]:{stringValue:nk},[jc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Gm(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${uu(r)}`)}(t,e)}function u2(t,e){const n={};return Qb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mi(t,(r,i)=>{const s=pp(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function d2(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Re||t instanceof Mn||t instanceof rn||t instanceof tt||t instanceof a2||t instanceof Ln)}function h2(t,e,n){if(!d2(n)||!Kb(n)){const r=uu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function cz(t,e,n){if((e=rr(e))instanceof fp)return e._internalPath;if(typeof e=="string")return f2(t,e);throw Mc("Field path arguments must be of type string or ",t,!1,void 0,n)}const uz=new RegExp("[~\\*/\\[\\]]");function f2(t,e,n){if(e.search(uz)>=0)throw Mc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fp(...e.split("."))._internalPath}catch{throw Mc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Mc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new ie(G.INVALID_ARGUMENT,l+t+u)}function dz(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hz(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hz extends m2{data(){return super.data()}}function gp(t,e){return typeof e=="string"?f2(t,e):e instanceof fp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fz(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ie(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class xp{}class p2 extends xp{}function ky(t,e,...n){let r=[];e instanceof xp&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof vp).length,l=s.filter(u=>u instanceof yp).length;if(o>1||o>0&&l>0)throw new ie(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class yp extends p2{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new yp(e,n,r)}_apply(e){const n=this._parse(e);return g2(e._query,n),new Bi(e.firestore,e.converter,nf(e._query,n))}_parse(e){const n=c2(e.firestore);return function(s,o,l,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ie(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Ty(m,h);const T=[];for(const N of m)T.push(Ey(u,s,N));p={arrayValue:{values:T}}}else p=Ey(u,s,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Ty(m,h),p=lz(l,o,m,h==="in"||h==="not-in");return Ze.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class vp extends xp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const u of l)g2(o,u),o=nf(o,u)}(e._query,n),new Bi(e.firestore,e.converter,nf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wp extends p2{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new wp(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ie(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wa(s,o)}(e._query,this._field,this._direction);return new Bi(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new qs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function _y(t,e="asc"){const n=e,r=gp("orderBy",t);return wp._create(r,n)}function Ey(t,e,n){if(typeof(n=rr(n))=="string"){if(n==="")throw new ie(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!uk(e)&&n.indexOf("/")!==-1)throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(je.fromString(n));if(!ce.isDocumentKey(r))throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ox(t,new ce(r))}if(n instanceof tt)return Ox(t,n._key);throw new ie(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${uu(n)}.`)}function Ty(t,e){if(!Array.isArray(t)||t.length===0)throw new ie(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g2(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ie(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mz{convertValue(e,n="none"){switch(Kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Hr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ue(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Mi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[jc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Ke(o.doubleValue));return new Ln(n)}convertGeoPoint(e){return new Mn(Ke(e.latitude),Ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=fu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(xa(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new Re(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);Ee(Ak(r),9688,{name:e});const i=new ya(r.get(1),r.get(3)),s=new ce(r.popFirst(5));return i.isEqual(n)||or(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Io{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ki extends m2{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Hl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ki._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ki._jsonSchemaVersion="firestore/documentSnapshot/1.0",ki._jsonSchema={type:et("string",ki._jsonSchemaVersion),bundleSource:et("string","DocumentSnapshot"),bundleName:et("string"),bundle:et("string")};class Hl extends ki{data(e={}){return super.data(e)}}class bs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Io(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Hl(this._firestore,this._userDataWriter,r.key,r,new Io(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ie(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Hl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Io(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Hl(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Io(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:gz(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ie(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=bs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function gz(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ue(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t){t=$r(t,tt);const e=$r(t.firestore,Oa);return Z5(hp(e),t._key).then(n=>xz(e,t,n))}bs._jsonSchemaVersion="firestore/querySnapshot/1.0",bs._jsonSchema={type:et("string",bs._jsonSchemaVersion),bundleSource:et("string","QuerySnapshot"),bundleName:et("string"),bundle:et("string")};class x2 extends mz{constructor(e){super(),this.firestore=e}convertBytes(e){return new rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new tt(this.firestore,null,n)}}function Ad(t){t=$r(t,Bi);const e=$r(t.firestore,Oa),n=hp(e),r=new x2(e);return fz(t._query),ez(n,t._query).then(i=>new bs(e,r,t,i))}function Un(t,e,n){t=$r(t,tt);const r=$r(t.firestore,Oa),i=pz(t.converter,e,n);return y2(r,[az(c2(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Vn.none())])}function Ny(t){return y2($r(t.firestore,Oa),[new Qm(t._key,Vn.none())])}function y2(t,e){return function(r,i){const s=new Xn;return r.asyncQueue.enqueueAndForget(async()=>B5(await J5(r),i,s)),s.promise}(hp(t),e)}function xz(t,e,n){const r=n.docs.get(e._key),i=new x2(t);return new ki(t,i,e._key,r,new Io(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Bs=i})(NS),Ur(new ir("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Oa(new l4(r.getProvider("auth-internal")),new d4(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ie(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(d.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Pn(Nx,Cx,e),Pn(Nx,Cx,"esm2020")})();const yz={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},v2=fb(yz);t4(v2);const qe=nz(v2),Se={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},$n=t=>JSON.parse(JSON.stringify(t)),Ie={async saveRecipe(t,e){try{return await Un(rt(qe,Se.RECIPES,t),$n({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=ky(zd(qe,Se.RECIPES),_y("updatedAt","desc")),e=await Ad(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await Ny(rt(qe,Se.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Un(rt(qe,Se.SETTINGS,"inventory_v2"),$n({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await vr(rt(qe,Se.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await vr(rt(qe,Se.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Un(rt(qe,Se.SETTINGS,"costs_data"),$n({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await vr(rt(qe,Se.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Un(rt(qe,Se.SETTINGS,"ficha_tecnica"),$n({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await vr(rt(qe,Se.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Un(rt(qe,Se.SETTINGS,"global_config"),$n({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await vr(rt(qe,Se.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Un(rt(qe,Se.SETTINGS,Se.RECIPES_V2),$n({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await vr(rt(qe,Se.SETTINGS,Se.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Un(rt(qe,Se.RECIPES_V3,String(t)),$n({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=ky(zd(qe,Se.RECIPES_V3),_y("updatedAt","desc"));t=await Ad(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await Ad(zd(qe,Se.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await Ny(rt(qe,Se.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Un(rt(qe,Se.SETTINGS,Se.KANBAN),$n({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await vr(rt(qe,Se.SETTINGS,Se.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Un(rt(qe,Se.SETTINGS,"recipe_categories"),$n({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await vr(rt(qe,Se.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}}};function vz(){const[t,e]=P.useState([]),[n,r]=P.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,s]=P.useState(!1),[o,l]=P.useState(null),[u,d]=P.useState(null),[h,m]=P.useState(!1),[p,v]=P.useState(""),[T,N]=P.useState("Global Investment Matrix"),[z,_]=P.useState(!1),[y,w]=P.useState(.13),[I,V]=P.useState(!1),[L,b]=P.useState(null),x=F=>{b(F),setTimeout(()=>b(null),3e3)},[k,C]=P.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),j=P.useRef(null);P.useEffect(()=>{try{const F=localStorage.getItem("padoca_costs_v1"),R=localStorage.getItem("padoca_costs_categories"),B=localStorage.getItem("padoca_costs_title"),H=localStorage.getItem("padoca_global_tax");let J=F?JSON.parse(F):[],le=R?JSON.parse(R):null;B&&N(B),H&&w(Number(H)),le&&(le=le.map(he=>he==="Pessoal"?"Maquinrio":he),r(le)),J&&(J=J.map(he=>({...he,category:he.category==="Pessoal"?"Maquinrio":he.category})),e(J))}catch(F){console.error("Load failed",F)}},[]);const[A,S]=P.useState(!1);P.useEffect(()=>{(async()=>{try{const R=await Ie.getCosts();R&&(R.costs&&e(R.costs),R.categories&&r(R.categories));const B=await Ie.getGlobalSettings();B&&B.taxRate!==void 0&&(w(B.taxRate),localStorage.setItem("padoca_global_tax",B.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{S(!0)}})()},[]),P.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),A&&Ie.syncCosts(t,n)},[t,n,A]),P.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),P.useEffect(()=>{localStorage.setItem("padoca_costs_title",T)},[T]),P.useEffect(()=>{localStorage.setItem("padoca_global_tax",y.toString()),A&&Ie.syncGlobalSettings({taxRate:y}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:y}}))},[y,A]);const fe=F=>(Number(F)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),ae=P.useMemo(()=>{const F=t.reduce((B,H)=>{const J=Number(H.quantity)||1,le=(Number(H.amount)||0)*J;return B.total+=le,H.type==="Fixo"?B.fixed+=le:B.variable+=le,B},{total:0,fixed:0,variable:0}),R=F.total*y;return{...F,hst:R,grandTotal:F.total+R}},[t]),Y=P.useMemo(()=>n.reduce((F,R)=>{const B=t.filter(H=>H.category===R);return B.length>0&&(F[R]=B),F},{}),[t,n]),ne=F=>{if(F.preventDefault(),!k.description||!k.amount)return;const R=n.includes(k.category)?k.category:n[0],B={...k,category:R,amount:Number(k.amount),quantity:Number(k.quantity)||1};e(o?H=>H.map(J=>J.id===o?{...B,id:o}:J):H=>[...H,{...B,id:Date.now().toString()}]),K()},$=F=>{d({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(R=>R.filter(B=>B.id!==F)),x("Despesa removida com sucesso."),d(null)},onCancel:()=>d(null)})},K=()=>{s(!1),l(null),C({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},ee=F=>{C({description:F.description||"",amount:F.amount||"",quantity:F.quantity||1,category:F.category||n[0],type:F.type||"Varivel",link:F.link||"",date:F.date||new Date().toISOString().split("T")[0]}),l(F.id),s(!0)},M=()=>{p&&(n.includes(p)||(r(F=>[...F,p]),x("Categoria adicionada.")),v(""))},U=F=>{d({title:"Remover Categoria",message:`A categoria "${F}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(R=>R.filter(B=>B!==F)),x("Categoria removida."),d(null)},onCancel:()=>d(null)})},re=()=>{try{const F=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],R=t.map(he=>{const _e=Number(he.quantity)||1,dn=Number(he.amount)||0,qt=_e*dn;return[he.id,he.date||"-",`"${he.description.replace(/"/g,'""')}"`,_e,dn.toFixed(2).replace(".",","),qt.toFixed(2).replace(".",","),`"${he.category}"`,he.type,`"${he.link||""}"`]}),B="\uFEFF"+[F.join(";"),...R.map(he=>he.join(";"))].join(`
`),H=new Blob([B],{type:"text/csv;charset=utf-8;"}),J=URL.createObjectURL(H),le=document.createElement("a");le.href=J,le.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,le.click(),x("Relatrio Excel exportado!")}catch{x("Erro ao exportar CSV")}},D=()=>{try{const F=JSON.stringify({version:"1",costs:t,categories:n},null,2),R=new Blob([F],{type:"application/json"}),B=URL.createObjectURL(R),H=document.createElement("a");H.href=B,H.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,H.click(),x("Backup realizado com sucesso!")}catch{x("Erro ao realizar backup")}},W=F=>{var H;const R=(H=F.target.files)==null?void 0:H[0];if(!R)return;const B=new FileReader;B.onload=J=>{try{const le=JSON.parse(String(J.target.result||"{}"));if(le.costs&&Array.isArray(le.costs))e(le.costs),le.categories&&r(le.categories),x("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{x("Arquivo de backup invlido")}},B.readAsText(R),F.target.value=""},X=()=>{d({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),x("Banco de dados limpo."),d(null)},onCancel:()=>d(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[z?a.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:T,onChange:F=>N(F.target.value),onBlur:()=>_(!1),onKeyDown:F=>F.key==="Enter"&&_(!1),autoFocus:!0}):a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>_(!0),children:T}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:fe(ae.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:fe(ae.total)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[I?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:y*100,onChange:F=>w(Number(F.target.value)/100),onBlur:()=>V(!1),onKeyDown:F=>F.key==="Enter"&&V(!1),autoFocus:!0}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):a.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>V(!0),children:["Tax Impact (",(y*100).toFixed(0),"%)"]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:fe(ae.hst)})]})]})]})}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:fe(ae.fixed)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(ae.fixed/ae.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${ae.fixed/ae.total*100||0}%`}})})]})]}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:fe(ae.variable)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),a.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(ae.variable/ae.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${ae.variable/ae.total*100||0}%`}})})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),a.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[a.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[a.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),a.jsx("div",{className:"col-span-2"})]}),a.jsx("div",{className:"space-y-6",children:t.length===0?a.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),a.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(Y).map(([F,R])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:F}),a.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),a.jsx("div",{className:"space-y-3 md:space-y-1",children:R.map(B=>a.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[a.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[a.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${B.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),a.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[a.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:B.description}),a.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:B.date}),B.link&&a.jsx("a",{href:B.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),a.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:a.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[B.quantity," unit  ",B.type.slice(0,1)]})}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:fe((Number(B.amount)||0)*(Number(B.quantity)||1))}),a.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[fe(B.amount)," / item"]})]}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:fe((Number(B.amount)||0)*(Number(B.quantity)||1)*(1+y))}),a.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[a.jsxs("button",{onClick:()=>ee(B),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),a.jsxs("button",{onClick:()=>$(B.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},B.id))})]},F))})]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[a.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),a.jsx("button",{onClick:re,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:X,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx("button",{onClick:D,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var F;return(F=j.current)==null?void 0:F.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:j,type:"file",accept:"application/json",className:"hidden",onChange:W})]})]})]}),i&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm transition-opacity animate-fade-in",onClick:K}),a.jsxs("div",{className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-t-[2.5rem] md:rounded-[2rem] shadow-[0_10px_40px_rgba(0,0,0,0.2)] border-t border-white/20 dark:border-white/5 flex flex-col animate-slide-up overflow-hidden max-h-[85vh] md:max-h-[80vh]",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:a.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:o?"Editar Despesa":"Nova Despesa"}),a.jsx("button",{onClick:K,className:"w-8 h-8 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?a.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[a.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((F,R)=>a.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${R!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[a.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:F}),a.jsx("button",{onClick:()=>U(F),className:"text-red-400 p-1",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},F))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:p,onChange:F=>v(F.target.value)}),a.jsx("button",{className:"w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold",onClick:M,children:"+"})]}),a.jsx("button",{onClick:()=>m(!1),className:"w-full py-3 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all",children:"Pronto"})]}):a.jsxs("form",{onSubmit:ne,className:"space-y-6 px-4 animate-fade-in",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:k.description,onChange:F=>C({...k,description:F.target.value}),placeholder:"Mixer, Aluguel..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:k.link,onChange:F=>C({...k,link:F.target.value}),placeholder:"Opcional..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:k.quantity,onChange:F=>C({...k,quantity:F.target.value})})]}),a.jsxs("div",{className:"flex items-center px-4 py-3",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),a.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:k.amount,onChange:F=>C({...k,amount:F.target.value})})]})]})]}),a.jsx("div",{className:"px-1",children:a.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(F=>a.jsx("button",{type:"button",onClick:()=>C({...k,type:F}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${k.type===F?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:F},F))})}),a.jsxs("div",{className:"space-y-3 px-1",children:[a.jsxs("div",{className:"flex justify-between items-center px-1",children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),a.jsx("button",{type:"button",onClick:()=>m(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(F=>a.jsx("button",{type:"button",onClick:()=>C({...k,category:F}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${k.category===F?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:F},F))})]}),a.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[a.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),a.jsx("button",{type:"button",onClick:K,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]}),L&&a.jsxs("div",{className:"fixed bottom-12 left-1/2 -translate-x-1/2 z-[100] bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 px-6 py-3 rounded-2xl shadow-xl flex items-center gap-3 animate-slide-up border border-white/10",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:L})]}),u&&a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:u.onCancel}),a.jsxs("div",{className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden animate-slide-up",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${u.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:u.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:u.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:u.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:u.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${u.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})]})}const Hn="padoca_inventory_v2",Pd=["Ingredientes","Embalagens","Utenslios","Outros"],Rd=["Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function wz(){const[t,e]=P.useState(()=>{try{const R=localStorage.getItem(Hn);if(R)return JSON.parse(R);const B=localStorage.getItem("padoca_inventory");return B?JSON.parse(B).map(J=>({...J,packageQuantity:J.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=P.useState(()=>{try{const R=localStorage.getItem(Hn+"_categories");return R?JSON.parse(R):Pd}catch{return Pd}}),[i,s]=P.useState(!1),[o,l]=P.useState("synced");P.useEffect(()=>{(async()=>{try{const B=await Ie.getInventory();B&&(B.items&&e(B.items),B.categories&&r(B.categories));const H=await Ie.getGlobalSettings();H&&H.taxRate!==void 0&&d(H.taxRate)}catch(B){console.warn("Inventory cloud load failed",B)}finally{s(!0)}})()},[]);const[u,d]=P.useState(()=>{const R=localStorage.getItem("padoca_global_tax");return R?Number(R):.13});P.useEffect(()=>{const R=B=>{B.detail&&B.detail.taxRate!==void 0&&d(B.detail.taxRate)};return window.addEventListener("global-settings-updated",R),()=>window.removeEventListener("global-settings-updated",R)},[]);const[h,m]=P.useState(!1),[p,v]=P.useState(null),[T,N]=P.useState(""),[z,_]=P.useState(null),[y,w]=P.useState(null),[I,V]=P.useState(()=>{try{const R=localStorage.getItem(Hn+"_subcategories");return R?JSON.parse(R):Rd}catch{return Rd}}),[L,b]=P.useState(!1),[x,k]=P.useState(""),[C,j]=P.useState(""),[A,S]=P.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]});P.useEffect(()=>{if(localStorage.setItem(Hn,JSON.stringify(t)),localStorage.setItem(Hn+"_categories",JSON.stringify(n)),localStorage.setItem(Hn+"_subcategories",JSON.stringify(I)),i){l("syncing");const R=setTimeout(async()=>{try{const B=await Ie.syncInventory(t,n);l(B?"synced":"error")}catch{l("error")}},1500);return()=>clearTimeout(R)}window.dispatchEvent(new Event("inventory-updated"))},[t,n,I,i]);const fe=R=>(Number(R.packageQuantity)||0)*(Number(R.packageCount)||1),ae=R=>(Number(R.packageCount)||1)*(Number(R.pricePerUnit)||0),Y=P.useMemo(()=>{const R=t.reduce((J,le)=>J+ae(le),0),B=t.length,H=t.reduce((J,le)=>{const he=ae(le);return J[le.category]=(J[le.category]||0)+he,J},{});return{totalValue:R,itemCount:B,byCategory:H,taxImpact:R*u,grandTotal:R*(1+u)}},[t,u]),ne=R=>(Number(R)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),$=()=>{if(!A.name.trim())return;const R={id:Date.now(),name:A.name.trim(),packageQuantity:Number(A.packageQuantity)||0,packageCount:Number(A.packageCount)||1,unit:A.unit,pricePerUnit:Number(A.pricePerUnit)||0,category:A.category,subcategory:A.category==="Ingredientes"?A.subcategory:null,purchaseDate:A.purchaseDate,createdAt:new Date().toISOString()};e(B=>[...B,R]),S({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]}),m(!1)},K=(R,B,H)=>{e(J=>J.map(le=>le.id!==R?le:{...le,[B]:["name","unit","category","subcategory","purchaseDate"].includes(B)?H:Number(H)||0}))},ee=R=>{w({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(B=>B.filter(H=>H.id!==R)),v(null),w(null)},onCancel:()=>w(null)})},M=P.useMemo(()=>{let R=t;if(T.trim()){const B=T.toLowerCase().trim();R=R.filter(H=>H.name.toLowerCase().includes(B)||H.subcategory&&H.subcategory.toLowerCase().includes(B))}return z&&(R=R.filter(B=>B.subcategory===z)),R},[t,T,z]),U=P.useMemo(()=>n.reduce((R,B)=>{const H=M.filter(J=>J.category===B);return H.length>0&&(R[B]=H),R},{}),[M,n]),re=Jn.useRef(null),D=()=>{try{const R=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],B=t.map(_e=>{const dn=(Number(_e.packageQuantity)||0)*(Number(_e.packageCount)||1),qt=(Number(_e.packageCount)||1)*(Number(_e.pricePerUnit)||0);return[_e.id,`"${_e.name.replace(/"/g,'""')}"`,`"${_e.category}"`,_e.packageQuantity,_e.unit,_e.packageCount,dn,Number(_e.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),qt.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),H="\uFEFF"+[R.join(";"),...B.map(_e=>_e.join(";"))].join(`
`),J=new Blob([H],{type:"text/csv;charset=utf-8;"}),le=URL.createObjectURL(J),he=document.createElement("a");he.href=le,he.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,he.click(),alert("Relatrio de Estoque exportado!")}catch(R){console.error(R),alert("Erro ao exportar CSV")}},W=()=>{try{const R=JSON.stringify({version:"2",items:t,categories:n},null,2),B=new Blob([R],{type:"application/json"}),H=URL.createObjectURL(B),J=document.createElement("a");J.href=H,J.download=`padoca_estoque_backup_${new Date().toISOString().split("T")[0]}.json`,J.click(),alert("Backup de Estoque realizado!")}catch{alert("Erro ao realizar backup")}},X=R=>{var J;const B=(J=R.target.files)==null?void 0:J[0];if(!B)return;const H=new FileReader;H.onload=le=>{try{const he=JSON.parse(String(le.target.result||"{}"));if(he.items&&Array.isArray(he.items))e(he.items),he.categories&&r(he.categories),alert("Dados de Estoque restaurados!");else throw new Error("Formato invlido")}catch{alert("Arquivo de backup invlido")}},H.readAsText(B),R.target.value=""},F=()=>{w({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(Hn,"[]"),w(null)},onCancel:()=>w(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${o==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":o==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${o==="syncing"?"bg-amber-500":o==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:o==="syncing"?"Cloud Syncing":o==="error"?"Sync Error":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),a.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ne(Y.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ne(Y.totalValue)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(u*100).toFixed(0),"%)"]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:ne(Y.taxImpact)})]})]})]})}),a.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((R,B)=>{const H={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},J=H[R]||H.Outros,le=Y.byCategory[R]||0,he=le*(1+u),_e=(le/Y.totalValue*100||0).toFixed(0);return a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J.pulse} ${J.shadow}`}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:R})]}),a.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ne(he)}),a.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",ne(le)," + ",(u*100).toFixed(0),"% tax)"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:`text-[8px] font-bold ${J.text}`,children:[_e,"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${J.bg} transition-all duration-1000`,style:{width:`${_e}%`}})})]})]},R)})})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>m(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[90vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Item"}),a.jsx("button",{onClick:()=>m(!1),className:"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-5",children:[a.jsxs("div",{className:"sm:col-span-2 lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Item"}),a.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"Ex: Farinha de Trigo",value:A.name,onChange:R=>S(B=>({...B,name:R.target.value})),autoFocus:!0})]}),a.jsxs("div",{className:"lg:col-span-12 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Qtd/Pacote"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"25",value:A.packageQuantity,onChange:R=>S(B=>({...B,packageQuantity:R.target.value}))}),a.jsxs("select",{className:"w-24 px-2 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all text-center appearance-none",value:A.unit,onChange:R=>S(B=>({...B,unit:R.target.value})),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"N Pacotes"}),a.jsx("input",{type:"number",min:"1",inputMode:"numeric",pattern:"[0-9]*",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"1",value:A.packageCount,onChange:R=>S(B=>({...B,packageCount:R.target.value}))})]})]}),a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Pacote"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500 font-medium",children:"$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0.00",value:A.pricePerUnit,onChange:R=>S(B=>({...B,pricePerUnit:R.target.value}))})]})]}),a.jsxs("div",{className:A.category==="Ingredientes"?"lg:col-span-6":"lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Categoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:A.category,onChange:R=>S(B=>({...B,category:R.target.value,subcategory:R.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(R=>a.jsx("option",{value:R,children:R},R))})]}),A.category==="Ingredientes"&&a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:A.subcategory,onChange:R=>S(B=>({...B,subcategory:R.target.value})),children:I.map(R=>a.jsx("option",{value:R,children:R},R))})]})]}),A.packageQuantity&&A.packageCount&&a.jsx("div",{className:"mt-6 p-5 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 shadow-inner",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Resumo"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-300",children:[Number(A.packageQuantity)*Number(A.packageCount)," ",A.unit," Total"]}),A.pricePerUnit&&a.jsx("div",{className:"text-2xl font-bold text-zinc-900 dark:text-white mt-1 tracking-tight tabular-nums",children:ne(Number(A.packageCount)*Number(A.pricePerUnit))})]})]})}),a.jsxs("div",{className:"flex gap-3 mt-8 safe-area-bottom",children:[a.jsx("button",{onClick:()=>m(!1),className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:$,disabled:!A.name.trim(),className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/10 hover:shadow-xl hover:shadow-zinc-900/20 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar ao Estoque"})]})]})]}),a.jsx("section",{className:"relative z-10 mb-6",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:T,onChange:R=>N(R.target.value)}),T&&a.jsx("button",{onClick:()=>N(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[a.jsx("button",{onClick:()=>_(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${z===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),I.map(R=>a.jsx("button",{onClick:()=>_(z===R?null:R),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${z===R?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:R},R))]}),(T||z)&&a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[a.jsxs("span",{className:"text-xs text-zinc-500",children:[M.length," ",M.length===1?"resultado":"resultados"]}),a.jsx("button",{onClick:()=>{N(""),_(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(U).length>0?a.jsx("div",{className:"space-y-8",children:Object.entries(U).map(([R,B])=>a.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:R}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:ne((Y.byCategory[R]||0)*(1+u))}),a.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[B.length," ",B.length===1?"item":"itens"]})})]})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[a.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:B.map(H=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:p===H.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:H.name,onChange:J=>K(H.id,"name",J.target.value)})}),a.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[a.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.packageQuantity,onChange:J=>K(H.id,"packageQuantity",J.target.value)}),a.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:H.unit,onChange:J=>K(H.id,"unit",J.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]}),a.jsx("div",{className:"col-span-1",children:a.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:H.packageCount,onChange:J=>K(H.id,"packageCount",J.target.value)})}),H.category==="Ingredientes"&&a.jsx("div",{className:"col-span-2",children:a.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:H.subcategory||"",onChange:J=>K(H.id,"subcategory",J.target.value),children:I.map(J=>a.jsx("option",{value:J,children:J},J))})}),H.category!=="Ingredientes"&&a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[fe(H)," ",H.unit]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.pricePerUnit,onChange:J=>K(H.id,"pricePerUnit",J.target.value)})}),a.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>v(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),a.jsx("button",{onClick:()=>ee(H.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-3",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:H.name})}),a.jsx("div",{className:"col-span-2 text-center",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[H.packageQuantity," ",H.unit]})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[H.packageCount,""]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[fe(H)," ",H.unit]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:ne(H.pricePerUnit)})}),a.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:ne(ae(H)*(1+u))}),a.jsx("button",{onClick:()=>v(H.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},H.id))})]}),a.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:B.map(H=>a.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${p===H.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:p===H.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>v(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>ee(H.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:H.name,onChange:J=>K(H.id,"name",J.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageQuantity,onChange:J=>K(H.id,"packageQuantity",J.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.unit,onChange:J=>K(H.id,"unit",J.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageCount,onChange:J=>K(H.id,"packageCount",J.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),a.jsxs("div",{className:"relative group",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.pricePerUnit,onChange:J=>K(H.id,"pricePerUnit",J.target.value)})]})]})]}),H.category==="Ingredientes"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:H.subcategory||"",onChange:J=>K(H.id,"subcategory",J.target.value),children:I.map(J=>a.jsx("option",{value:J,children:J},J))})]})]}):a.jsxs("div",{onClick:()=>v(H.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:H.name}),a.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[fe(H)," ",H.unit," em estoque"]})]}),a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[H.packageCount," pcts"]})]}),a.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),a.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:ne(H.pricePerUnit)})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:ne(ae(H)*(1+u))})})]})]})]})},H.id))}),a.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",R]}),a.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:ne((Y.byCategory[R]||0)*(1+u))})]})]},R))}):a.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),a.jsx("button",{onClick:()=>m(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),a.jsx("section",{className:"relative z-10 mt-8",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:F,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[a.jsx("button",{onClick:D,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export CSV"}),a.jsx("button",{onClick:W,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var R;return(R=re.current)==null?void 0:R.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:re,type:"file",accept:"application/json",className:"hidden",onChange:X})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[a.jsx("h3",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest mb-4",children:"Category Management"}),a.jsxs("button",{onClick:()=>b(!0),className:"w-full py-4 md:py-3 bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20 text-indigo-600 dark:text-indigo-400 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-indigo-100 dark:hover:bg-indigo-500/20 transition-all flex items-center justify-center gap-2",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Gerenciar Categorias e Subcategorias"]})]})]})}),L&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>b(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[90vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),a.jsx("button",{onClick:()=>b(!1),className:"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),a.jsx("div",{className:"space-y-2",children:n.map((R,B)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:R}),a.jsx("button",{onClick:()=>{confirm(`Excluir categoria "${R}"? Itens desta categoria sero movidos para "Outros".`)&&(r(H=>H.filter(J=>J!==R)),e(H=>H.map(J=>J.category===R?{...J,category:"Outros"}:J)))},className:"p-1.5 rounded-lg text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},B))})]}),a.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:x,onChange:R=>k(R.target.value),onKeyDown:R=>{R.key==="Enter"&&x.trim()&&(n.includes(x.trim())||(r(B=>[...B,x.trim()]),k("")))}}),a.jsx("button",{onClick:()=>{x.trim()&&!n.includes(x.trim())&&(r(R=>[...R,x.trim()]),k(""))},disabled:!x.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("button",{onClick:()=>{confirm("Restaurar categorias padro?")&&r(Pd)},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),a.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),a.jsx("div",{className:"space-y-2",children:I.map((R,B)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[a.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:R}),a.jsx("button",{onClick:()=>{confirm(`Excluir subcategoria "${R}"?`)&&V(H=>H.filter(J=>J!==R))},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},B))})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:C,onChange:R=>j(R.target.value),onKeyDown:R=>{R.key==="Enter"&&C.trim()&&(I.includes(C.trim())||(V(B=>[...B,C.trim()]),j("")))}}),a.jsx("button",{onClick:()=>{C.trim()&&!I.includes(C.trim())&&(V(R=>[...R,C.trim()]),j(""))},disabled:!C.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:()=>{confirm("Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.")&&V(Rd)},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),y&&a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:y.onCancel}),a.jsxs("div",{className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden animate-slide-up",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${y.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:y.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:y.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:y.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:y.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${y.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})]})}function bz(){const[t,e]=P.useState([]),n=()=>{try{const r=localStorage.getItem(Hn);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return P.useEffect(()=>{n();const r=s=>{s.key===Hn&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}const Cy="fichaTecnica_pizzas",Kl={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},Vd=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,s=n*r;if(i<=0)return 0;const o=s/i,l=Kl[t.unit]||1;return o/l},Sy={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function kz(){const[t,e]=P.useState(()=>{try{const M=localStorage.getItem(Cy);return M?JSON.parse(M):[Sy]}catch{return[Sy]}}),[n,r]=P.useState(!1);P.useEffect(()=>{(async()=>{try{const U=await Ie.getPizzas();U&&U.length>0&&e(U)}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,s]=P.useState(null),[o,l]=P.useState(null),[u,d]=P.useState(!1),[h,m]=P.useState(!1),[p,v]=P.useState(""),[T,N]=P.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[z,_]=P.useState(null),[y,w]=P.useState(null),[I,V]=P.useState(null),L=bz();P.useEffect(()=>{localStorage.setItem(Cy,JSON.stringify(t)),n&&Ie.syncPizzas(t)},[t,n]);const b=P.useMemo(()=>t.find(M=>M.id===i)||null,[t,i]),x=M=>{const U=M.reduce((re,D)=>re+K(D),0);return{totalCost:U,costPerPizza:U}},k=M=>(Number(M)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),C=M=>{const U=Number(M)||0;return U<.01&&U>0?U.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):U.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},j=()=>{if(!p.trim())return;const M={id:Date.now(),name:p.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(U=>[...U,M]),v(""),m(!1),s(M.id)},A=M=>{const U=t.find(re=>re.id===M);w({title:"Excluir Pizza",message:`A pizza "${(U==null?void 0:U.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e(re=>re.filter(D=>D.id!==M)),i===M&&s(null),w(null)},onCancel:()=>w(null)})},S=M=>{const U=t.find(re=>re.id===M);U&&V({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:U.name,onConfirm:re=>{re&&re!==U.name&&e(D=>D.map(W=>W.id===M?{...W,name:re.trim()}:W)),V(null)},onCancel:()=>V(null)})},fe=M=>{if(N(U=>({...U,name:M})),_(null),!!Array.isArray(L)&&M&&M.trim().length>0){const U=M.toLowerCase().trim(),re=L.find(D=>!D||!D.name?!1:D.name.toLowerCase()===U);if(re){_(re);const D=Vd(re),W=Kl[T.unit]||1,X=D*W;N(F=>({...F,pricePerUnit:X.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:re.id}))}}},ae=M=>{N(U=>{const re={...U,unit:M};if(z){const D=Vd(z),W=Kl[M]||1,X=D*W;re.pricePerUnit=X.toFixed(6),re.isSyncedFromInventory=!0}return re})},Y=()=>{if(!b||!T.name.trim())return;const M={id:Date.now(),name:T.name.trim(),quantity:Number(T.quantity)||0,unit:T.unit,pricePerUnit:Number(T.pricePerUnit)||0,inventoryItemId:T.inventoryItemId};e(U=>U.map(re=>re.id===i?{...re,ingredients:[...re.ingredients,M]}:re)),N({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),_(null),d(!1)},ne=(M,U,re)=>{b&&e(D=>D.map(W=>W.id!==i?W:{...W,ingredients:W.ingredients.map(X=>X.id!==M?X:{...X,[U]:U==="name"||U==="unit"?re:Number(re)||0})}))},$=M=>{b&&(e(U=>U.map(re=>re.id!==i?re:{...re,ingredients:re.ingredients.filter(D=>D.id!==M)})),l(null))},K=M=>(Number(M.quantity)||0)*(Number(M.pricePerUnit)||0),ee=b?x(b.ingredients):{totalCost:0,costPerPizza:0};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),a.jsxs("button",{onClick:()=>m(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center sm:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>m(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 rounded-t-[2.5rem] md:rounded-[2.5rem] p-8 pb-12 md:pb-8 shadow-2xl animate-slide-up ring-1 ring-zinc-900/5 dark:ring-white/10",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-8",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-800"})}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h3",{className:"text-2xl font-bold text-zinc-900 dark:text-white tracking-tight mb-2",children:"Nova Pizza"}),a.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"text",className:"w-full px-5 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800/50 border-2 border-transparent focus:border-zinc-900 dark:focus:border-white text-zinc-900 dark:text-white text-lg font-medium text-center focus:outline-none transition-all placeholder:text-zinc-400",placeholder:"Ex: Margherita",value:p,onChange:M=>v(M.target.value),autoFocus:!0,onKeyDown:M=>M.key==="Enter"&&j()})}),a.jsxs("div",{className:"flex gap-3 pt-4 safe-area-bottom",children:[a.jsx("button",{onClick:()=>{m(!1),v("")},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:j,disabled:!p.trim(),className:"flex-[2] px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none shadow-xl shadow-zinc-900/10",children:"Criar"})]})]})]})]}),!i&&a.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(M=>{const U=x(M.ingredients);return a.jsxs("div",{onClick:()=>s(M.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:M.name}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[M.ingredients.length," ingrediente",M.ingredients.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:re=>{re.stopPropagation(),S(M.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),a.jsx("button",{onClick:re=>{re.stopPropagation(),A(M.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),a.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:k(U.totalCost)})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),a.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[M.ingredients.length," itens"]})})]})]})]},M.id)}),t.length===0&&a.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),a.jsx("button",{onClick:()=>m(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),b&&a.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>s(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:b.name}),a.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[b.ingredients.length," ingrediente",b.ingredients.length!==1?"s":""," cadastrado",b.ingredients.length!==1?"s":""]})]})]}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:k(ee.totalCost)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:b.ingredients.length}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:k(ee.costPerPizza)}),a.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!u&&a.jsxs("button",{onClick:()=>d(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),u&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{d(!1),N({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),_(null)}}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar",children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:a.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),a.jsx("button",{onClick:()=>{d(!1),N({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),_(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"relative mb-5",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:M=>{var U;M.key==="Enter"&&(M.preventDefault(),(U=document.getElementById("cat-ing-qty-input"))==null||U.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${z?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:T.name,onChange:M=>{const U=M.target.value;N(re=>({...re,name:U})),z&&U!==z.name&&(_(null),N(re=>({...re,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),fe(U)},autoFocus:!0}),z&&a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),T.name.length>0&&!z&&a.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const M=L.filter(U=>U.name.toLowerCase().includes(T.name.toLowerCase())).slice(0,6);return M.length===0&&T.name.length>1?a.jsxs("div",{className:"p-5 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',T.name,'" ao Estoque primeiro']})]}):M.map((U,re)=>a.jsxs("button",{onClick:()=>{_(U);const D=Vd(U),W=Kl[T.unit]||1,X=D*W;N(F=>({...F,name:U.name,pricePerUnit:X.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:U.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${re!==M.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:U.name}),a.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[U.packageQuantity*U.packageCount," ",U.unit]})]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},U.id))})()})]}),z&&a.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:z.name}),a.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",z.packageQuantity*z.packageCount," ",z.unit,"  ",k(z.packageCount*z.pricePerUnit)]})]})]})}),!z&&a.jsx("div",{className:"space-y-4 mb-5",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 text-sm font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full pl-10 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0,00",value:T.pricePerUnit,onChange:M=>N(U=>({...U,pricePerUnit:M.target.value}))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:T.unit,onChange:M=>ae(M.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),a.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:M=>{M.key==="Enter"&&(M.preventDefault(),Y())},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:T.quantity,onChange:M=>N(U=>({...U,quantity:M.target.value}))})]}),z&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:T.unit})]})]}),z&&T.quantity&&a.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[T.quantity," ",T.unit,"  ",C(T.pricePerUnit),"/",T.unit]}),a.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:k(Number(T.quantity)*Number(T.pricePerUnit))})]})]}),a.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[a.jsx("button",{onClick:()=>{d(!1),N({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),_(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:Y,disabled:!T.name||!T.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),b.ingredients.length>0&&a.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[a.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),a.jsx("div",{className:"col-span-1"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:b.ingredients.map(M=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:o===M.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("input",{id:`edit-ing-name-${M.id}`,autoFocus:!0,onKeyDown:U=>{var re;U.key==="Enter"&&(U.preventDefault(),(re=document.getElementById(`edit-ing-qty-${M.id}`))==null||re.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:M.name,onChange:U=>ne(M.id,"name",U.target.value),onBlur:()=>{!M.name.trim()&&(!M.quantity||M.quantity===0)&&$(M.id)}})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-qty-${M.id}`,onKeyDown:U=>{var re;U.key==="Enter"&&(U.preventDefault(),(re=document.getElementById(`edit-ing-price-${M.id}`))==null||re.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:M.quantity,onChange:U=>ne(M.id,"quantity",U.target.value),onBlur:()=>{!M.name.trim()&&(!M.quantity||M.quantity===0)&&$(M.id)}})}),a.jsx("div",{className:"col-span-1",children:a.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:M.unit,onChange:U=>ne(M.id,"unit",U.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-price-${M.id}`,onKeyDown:U=>{U.key==="Enter"&&(U.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:M.pricePerUnit,onChange:U=>ne(M.id,"pricePerUnit",U.target.value)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:k(K(M))})}),a.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>$(M.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:M.name})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:M.quantity})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:M.unit})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(M.pricePerUnit)||0)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:k(K(M))})}),a.jsx("div",{className:"col-span-1 flex justify-end",children:a.jsx("button",{onClick:()=>l(M.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},M.id))}),a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:k(ee.totalCost)})}),a.jsx("div",{className:"col-span-1"})]})]}),b.ingredients.length>0&&a.jsxs("div",{className:"md:hidden space-y-4",children:[b.ingredients.map(M=>a.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${o===M.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:o===M.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>$(M.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:M.name,onChange:U=>ne(M.id,"name",U.target.value),onBlur:()=>{!M.name.trim()&&(!M.quantity||M.quantity===0)&&$(M.id)}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:M.quantity,onChange:U=>ne(M.id,"quantity",U.target.value),onBlur:()=>{!M.name.trim()&&(!M.quantity||M.quantity===0)&&$(M.id)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:M.unit,onChange:U=>ne(M.id,"unit",U.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:M.pricePerUnit,onChange:U=>ne(M.id,"pricePerUnit",U.target.value)})})]})]}):a.jsxs("div",{onClick:()=>l(M.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:M.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[M.quantity," ",M.unit]}),a.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(M.pricePerUnit)||0),"/",M.unit]})]})]}),a.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:U=>{U.stopPropagation(),l(M.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:k(K(M))})]})]})},M.id)),a.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),a.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:k(ee.totalCost)})]})})]}),b.ingredients.length===0&&!u&&a.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),a.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),y&&a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:y.onCancel}),a.jsxs("div",{className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden animate-slide-up",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${y.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:y.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:y.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:y.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:y.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${y.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]}),I&&a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:I.onCancel}),a.jsxs("div",{className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden animate-slide-up",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-4",children:I.title}),a.jsx("input",{autoFocus:!0,defaultValue:I.defaultValue,className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-6 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white",placeholder:I.placeholder,onKeyDown:M=>{M.key==="Enter"&&I.onConfirm(M.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:I.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:M=>{const U=M.target.closest(".relative").querySelector("input");I.onConfirm(U.value)},className:"flex-1 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all",children:"Salvar"})]})]})]})]})}function qn({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:s="0",pattern:o,inputMode:l}){const u=Number(e)||0,d=r==="g"&&Math.abs(u)>=1e3,h=d?"kg":r,m=()=>d?Math.round(u/1e3).toString():Math.round(u).toString(),[p,v]=P.useState(""),[T,N]=P.useState(!1);P.useEffect(()=>{T||v(e==null?"":m())},[e,T,d]);const z=w=>{const I=w.target.value;v(I);const V=parseFloat(I)||0;n==null||n(V)},_=()=>N(!0),y=()=>{N(!1),e!=null&&v(m())};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:o,value:p,onChange:z,onFocus:_,onBlur:y,placeholder:s}),h&&a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function ks({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:s,step:o=.1,decimals:l=1,maxPct:u=null}){const d=Math.max(i||0,1),h=b=>d*(Number(b)||0)/100,m=b=>(Number(b)||0)/d*100,p=h(e),v=r==="grams"&&Math.abs(p)>=1e3,T=r==="grams"?v?"kg":"g":"%",N=()=>{const b=Number(e)||0;if(r==="grams"){const x=h(b);return v?x/1e3:x<10?x:Math.round(x)}return b},[z,_]=P.useState(()=>{if(e===""||e===null||e===void 0)return"";const b=N();return v?b.toFixed(2):b.toString()}),[y,w]=P.useState(!1);P.useEffect(()=>{if(!y)if(e===""||e===null||e===void 0)_("");else{const b=N();if(r==="grams"){const x=h(Number(e)||0);_(v?b.toFixed(2):x<10?x.toFixed(2):Math.round(x).toString())}else _(Number(b).toFixed(l))}},[e,r,i,y,v]);const I=b=>{const x=b.target.value;if(_(x),x===""){n==null||n("");return}let k=parseFloat(x);if(!Number.isNaN(k)){k=Math.max(0,k),r==="pct"&&u!==null&&k>u&&(k=u,_(k.toString()));let C=k;r==="grams"&&v&&(C=k*1e3);const j=r==="grams"?m(C):k;n==null||n(j)}},V=()=>{w(!0)},L=()=>{if(w(!1),z===""||z===null){_("");return}const b=parseFloat(z);if(!Number.isNaN(b))if(r==="grams"){const x=h(Number(e)||0);_(v||x<10?b.toFixed(2):Math.round(b).toString())}else _(b.toFixed(l))};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:s,step:r==="grams"?1:o,value:z,onChange:I,onFocus:V,onBlur:L,placeholder:"0"}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:T})]})]})}function _z({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","ADY","IDY","CY"];function l(u,d,h){r==null||r({...n,[u]:{...n[u],[d]:h}})}return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipos de Fermentos"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(u=>a.jsxs("label",{className:"button "+(t===u?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:u,checked:t===u,onChange:()=>e==null?void 0:e(u)}),u]},u))}),t==="ADY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(ks,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:u=>l("ADY","yeastPct",u),mode:i,flourWeight:s,name:"ADY-yeast",decimals:3})}),t==="IDY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(ks,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:u=>l("IDY","yeastPct",u),mode:i,flourWeight:s,name:"IDY-yeast",decimals:3})}),t==="CY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(ks,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:u=>l("CY","yeastPct",u),mode:i,flourWeight:s,name:"CY-yeast",decimals:3})}),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function Ez({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","Poolish","Biga","Levain"];function l(p,v,T){r==null||r({...n,[p]:{...n[p],[v]:Number.isNaN(T)?"":T}})}const u=i==="grams"?"g":"%",d=p=>s*(Number(p==null?void 0:p.pct)||0)/100,h=(p,v=0,T="")=>{let N=Number(p);if(!Number.isFinite(N))return"";let z=T,_=v;T==="g"&&Math.abs(N)>=1e3&&(N=N/1e3,z="kg",_=2);const y=N.toLocaleString("pt-BR",{minimumFractionDigits:_,maximumFractionDigits:_});return z?`${y} ${z}`:y},m=p=>{const v=n[p];if(!v)return null;const T=d(v),N=T*(Number(v.hydration)||0)/100;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[a.jsx(ks,{label:`Farinha Pref. (${u})`,value:v.pct,onChange:z=>l(p,"pct",z),mode:i,flourWeight:s,name:`${p}-pct`}),a.jsx(ks,{label:`gua (${u})`,value:v.hydration,onChange:z=>l(p,"hydration",Math.min(200,Math.max(0,z))),mode:i,flourWeight:T>0?T:s,name:`${p}-hydration`}),typeof v.yeastPct<"u"&&a.jsx(ks,{label:`Fermento (${u})`,value:v.yeastPct,onChange:z=>l(p,"yeastPct",z),mode:i,flourWeight:T>0?T:s,name:`${p}-yeast`,decimals:2}),typeof v.inoculationPct<"u"&&a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:v.inoculationPct,onChange:z=>l(p,"inoculationPct",parseFloat(z.target.value)),step:1}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Tempo"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:v.time_h,onChange:z=>l(p,"time_h",parseFloat(z.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Temp."}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:v.temp_C,onChange:z=>l(p,"temp_C",parseFloat(z.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&a.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(T,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(N,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(T+N,0,"g")})]})]})]})]})};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipo de Fermentao"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(p=>a.jsxs("label",{className:"button "+(t===p?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:p,checked:t===p,onChange:()=>e==null?void 0:e(p)}),p]},p))}),t==="Poolish"&&m("poolish"),t==="Biga"&&m("biga"),t==="Levain"&&m("levain"),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function Tz(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function bo(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function Nz({inputMode:t,setInputMode:e}){const[n,r]=P.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,s]=P.useState({}),o=P.useRef(null),[l,u]=P.useState("synced"),[d,h]=P.useState(null),[m,p]=P.useState(null),[v,T]=P.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});P.useEffect(()=>{(async()=>{const W=Tz();s(W);try{const X=await Ie.getAllRecipes();if(Object.keys(X).length>0){const F={...W,...X};s(F),bo(F)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function N(D,W){r(X=>({...X,[D]:typeof W=="number"&&Number.isNaN(W)?"":W}))}function z(D){r(W=>({...W,preferment:D}))}function _(D){r(W=>({...W,yeastType:D}))}function y(D,W){t==="grams"?T(X=>({...X,[D]:Number(W)||0})):N(D,W)}function w(D){T(W=>({...W,flour:Number(D)||0}))}const I=P.useMemo(()=>{var F;const D=R=>Number(R)||0,W=((F=n.yeastType)==null?void 0:F[n.yeastSelection])||{},X=D(W.yeastPct);return 100+D(n.water)+D(n.sugar)+D(n.salt)+D(n.oliveOil)+D(n.oil)+D(n.milk)+D(n.butter)+D(n.diastatic)+X},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),V=P.useMemo(()=>{const D=Number(n.doughBalls)||0,W=Number(n.ballWeight)||0;return D*W},[n.doughBalls,n.ballWeight]),L=P.useMemo(()=>{const D=Number(V)||0,W=Number(I)||100;return W<=0?0:D*100/W},[V,I]),b=P.useMemo(()=>{var R;const D=L,W=B=>D*(Number(B)||0)/100,X=((R=n.yeastType)==null?void 0:R[n.yeastSelection])||{},F=Number(X.yeastPct)||0;return{flour:D,water:W(n.water),sugar:W(n.sugar),salt:W(n.salt),oliveOil:W(n.oliveOil),oil:W(n.oil),milk:W(n.milk),butter:W(n.butter),diastatic:W(n.diastatic),yeast:D*F/100,total:D+W(n.water)+W(n.sugar)+W(n.salt)+W(n.oliveOil)+W(n.oil)+W(n.milk)+W(n.butter)+W(n.diastatic)+D*F/100}},[L,n]),x=P.useMemo(()=>{if(t==="grams"){const D=(Number(v.flour)||0)+(Number(v.water)||0)+(Number(v.sugar)||0)+(Number(v.salt)||0)+(Number(v.oliveOil)||0)+(Number(v.oil)||0)+(Number(v.milk)||0)+(Number(v.butter)||0)+(Number(v.diastatic)||0)+(Number(v.yeast)||0);return{flour:v.flour,water:v.water,sugar:v.sugar,salt:v.salt,oliveOil:v.oliveOil,oil:v.oil,milk:v.milk,butter:v.butter,diastatic:v.diastatic,yeast:v.yeast,total:D}}return b},[t,v,b]),k=P.useMemo(()=>{const D=Number(x.flour)||0;if(D<=0)return 0;const W=Number(x.water)||0,X=Number(x.milk)||0;return(W+X)/D*100},[x.flour,x.water,x.milk]),C=String(n.prefermentType||"").toLowerCase(),j=n.preferment&&n.preferment[C]?n.preferment[C]:null,A=j?L*(Number(j.pct)||0)/100:0,S=A*(Number(j==null?void 0:j.hydration)||0)/100,fe=A+S;function ae(){p({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:D=>{if(!D)return;const W={...i,[D]:n};s(W),bo(W),Ie.saveRecipe(D,n).then(X=>{X&&u("synced")}),p(null)},onCancel:()=>p(null)})}function Y(D){const W=i[D];W&&r(W)}function ne(D){h({title:"Excluir Receita",message:`A receita "${D}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const W={...i};delete W[D],s(W),bo(W),Ie.deleteRecipe(D),h(null)},onCancel:()=>h(null)})}function $(D){p({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:D,onConfirm:W=>{if(!W||W===D)return;const X={...i};X[W]=X[D];const F=X[D];delete X[D],s(X),bo(X),Ie.deleteRecipe(D),Ie.saveRecipe(W,F),p(null)},onCancel:()=>p(null)})}function K(){const D=JSON.stringify({inputs:n,recipes:i},null,2),W=new Blob([D],{type:"application/json"}),X=URL.createObjectURL(W),F=document.createElement("a");F.href=X,F.download="padoca_pizza_recipes.json",F.click(),URL.revokeObjectURL(X)}function ee(D){var F;const W=(F=D.target.files)==null?void 0:F[0];if(!W)return;const X=new FileReader;X.onload=R=>{try{const B=JSON.parse(String(R.target.result||"{}"));B.inputs&&r(B.inputs),B.recipes&&(s(B.recipes),bo(B.recipes)),alert("Importao concluda.")}catch{alert("Arquivo invlido.")}},X.readAsText(W),D.target.value=""}function M(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function U(D,W=0,X=""){let F=Number(D);if(!Number.isFinite(F))return"";let R=X,B=W;X==="g"&&Math.abs(F)>=1e3&&(F=F/1e3,R="kg",B=2);const H=F.toLocaleString("pt-BR",{minimumFractionDigits:B,maximumFractionDigits:B});return R?`${H} ${R}`:H}function re(D){return(Number(D)||0)>.001}return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:U(x.total,0,"g")})]})]}),a.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:U(V,0,"g")})})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(x.total)||0)-(Number(V)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:U((Number(x.total)||0)-(Number(V)||0),1,"g")})})]})]})]})}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:D=>{const W=parseFloat(D.target.value);N("doughBalls",Math.round(W))}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:D=>{const W=parseFloat(D.target.value);if(t==="grams"){const F=L*I/100;let R=W>0?Math.round(F/W):1;R<1&&(R=1);const B=Math.round(F/R);r(H=>({...H,ballWeight:B,doughBalls:R}))}else N("ballWeight",Math.round(W))}})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),a.jsx(Ez,{value:n.prefermentType,onChange:D=>N("prefermentType",D),data:n.preferment,onDataChange:z,inputMode:t,flourWeight:L})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&a.jsx(qn,{label:"Farinha Total",value:v.flour,onChange:w,unit:"g"}),a.jsx(qn,{label:"gua",value:t==="grams"?v.water:n.water,onChange:D=>y("water",D),unit:t==="grams"?"g":"%"}),a.jsx(qn,{label:"Sal",value:t==="grams"?v.salt:n.salt,onChange:D=>y("salt",D),unit:t==="grams"?"g":"%"}),a.jsx(qn,{label:"Azeite",value:t==="grams"?v.oliveOil:n.oliveOil,onChange:D=>y("oliveOil",D),unit:t==="grams"?"g":"%"}),a.jsx(qn,{label:"Acar",value:t==="grams"?v.sugar:n.sugar,onChange:D=>y("sugar",D),unit:t==="grams"?"g":"%"}),a.jsx(qn,{label:"leo",value:t==="grams"?v.oil:n.oil,onChange:D=>y("oil",D),unit:t==="grams"?"g":"%"}),a.jsx(qn,{label:"Leite",value:t==="grams"?v.milk:n.milk,onChange:D=>y("milk",D),unit:t==="grams"?"g":"%"}),a.jsx(qn,{label:"Manteiga",value:t==="grams"?v.butter:n.butter,onChange:D=>y("butter",D),unit:t==="grams"?"g":"%"}),a.jsx(qn,{label:"Malte",value:t==="grams"?v.diastatic:n.diastatic,onChange:D=>y("diastatic",D),unit:t==="grams"?"g":"%"})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),a.jsx(_z,{value:n.yeastSelection,onChange:D=>N("yeastSelection",D),data:n.yeastType,onDataChange:_,inputMode:t,flourWeight:L})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:D=>N("RT_h",parseFloat(D.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:D=>N("RT_C",parseFloat(D.target.value))})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:D=>N("CT_h",parseFloat(D.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:D=>N("CT_C",parseFloat(D.target.value))})]})]})]}),n.prefermentType!=="None"&&j&&a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:U(j.pct,1,"%")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(S,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(fe,0,"g")})]})]}),(typeof j.yeastPct<"u"||typeof j.inoculationPct<"u"||typeof j.time_h<"u"||typeof j.temp_C<"u")&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof j.yeastPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(A*(Number(j.yeastPct)||0)/100,2,"g")})]}),typeof j.inoculationPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(j.inoculationPct,1,"%")})]}),typeof j.time_h<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(j.time_h,0,"h")})]}),typeof j.temp_C<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(j.temp_C,0,"C")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[re(x.flour)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.flour-A,0,"g")})]}),re(x.water)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.water-S,0,"g")})]}),n.prefermentType!=="None"&&j&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(fe,0,"g")})]}),re(x.salt)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.salt,1,"g")})]}),re(x.sugar)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.sugar,1,"g")})]}),re(x.oliveOil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.oliveOil,1,"g")})]}),re(x.oil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.oil,1,"g")})]}),re(x.milk)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.milk,1,"g")})]}),re(x.butter)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.butter,1,"g")})]}),re(x.diastatic)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.diastatic,1,"g")})]}),re(x.yeast)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.yeast,2,"g")})]})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(x.total,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(k,1,"%")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx("button",{onClick:ae,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),a.jsx("button",{onClick:()=>{var D;return(D=o.current)==null?void 0:D.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),a.jsx("button",{onClick:K,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),a.jsx("button",{onClick:M,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),a.jsx("input",{ref:o,type:"file",accept:"application/json",className:"hidden",onChange:ee})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?a.jsxs("div",{className:"text-center py-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):a.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([D])=>a.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[a.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:D}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>Y(D),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),a.jsx("button",{onClick:()=>$(D),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),a.jsx("button",{onClick:()=>ne(D),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},D))})]}),d&&a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:d.onCancel}),a.jsxs("div",{className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden animate-slide-up",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${d.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:d.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:d.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:d.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:d.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${d.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]}),m&&a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:m.onCancel}),a.jsxs("div",{className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden animate-slide-up",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-4",children:m.title}),a.jsx("input",{autoFocus:!0,defaultValue:m.defaultValue,className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-6 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white",placeholder:m.placeholder,onKeyDown:D=>{D.key==="Enter"&&m.onConfirm(D.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:m.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:D=>{const W=D.target.closest(".relative").querySelector("input");m.onConfirm(W.value)},className:"flex-1 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all",children:"Salvar"})]})]})]})]})}const bp=P.createContext({});function ti(t){const e=P.useRef(null);return e.current===null&&(e.current=t()),e.current}const kp=typeof window<"u",_p=kp?P.useLayoutEffect:P.useEffect,_u=P.createContext(null);function Ep(t,e){t.indexOf(e)===-1&&t.push(e)}function Tp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Cz([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}const lr=(t,e,n)=>n>e?e:n<t?t:n;let Np=()=>{};const cr={},w2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function b2(t){return typeof t=="object"&&t!==null}const k2=t=>/^0[^.\s]+$/u.test(t);function Cp(t){let e;return()=>(e===void 0&&(e=t()),e)}const ln=t=>t,Sz=(t,e)=>n=>e(t(n)),Fa=(...t)=>t.reduce(Sz),_a=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Sp{constructor(){this.subscriptions=[]}add(e){return Ep(this.subscriptions,e),()=>Tp(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const On=t=>t*1e3,on=t=>t/1e3;function _2(t,e){return e?t*(1e3/e):0}const E2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,jz=1e-7,Iz=12;function zz(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=E2(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>jz&&++l<Iz);return o}function Ba(t,e,n,r){if(t===e&&n===r)return ln;const i=s=>zz(s,0,1,t,n);return s=>s===0||s===1?s:E2(i(s),e,r)}const T2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,N2=t=>e=>1-t(1-e),C2=Ba(.33,1.53,.69,.99),jp=N2(C2),S2=T2(jp),j2=t=>(t*=2)<1?.5*jp(t):.5*(2-Math.pow(2,-10*(t-1))),Ip=t=>1-Math.sin(Math.acos(t)),I2=N2(Ip),z2=T2(Ip),Az=Ba(.42,0,1,1),Pz=Ba(0,0,.58,1),A2=Ba(.42,0,.58,1),Rz=t=>Array.isArray(t)&&typeof t[0]!="number",P2=t=>Array.isArray(t)&&typeof t[0]=="number",Vz={linear:ln,easeIn:Az,easeInOut:A2,easeOut:Pz,circIn:Ip,circInOut:z2,circOut:I2,backIn:jp,backInOut:S2,backOut:C2,anticipate:j2},Dz=t=>typeof t=="string",jy=t=>{if(P2(t)){Np(t.length===4);const[e,n,r,i]=t;return Ba(e,n,r,i)}else if(Dz(t))return Vz[t];return t},El=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Mz(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,m=!1,p=!1)=>{const T=p&&i?n:r;return m&&o.add(h),T.has(h)||T.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const Lz=40;function R2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=El.reduce((w,I)=>(w[I]=Mz(s),w),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:m,preRender:p,render:v,postRender:T}=o,N=()=>{const w=cr.useManualTiming?i.timestamp:performance.now();n=!1,cr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,Lz),1)),i.timestamp=w,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),m.process(i),p.process(i),v.process(i),T.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(N))},z=()=>{n=!0,r=!0,i.isProcessing||t(N)};return{schedule:El.reduce((w,I)=>{const V=o[I];return w[I]=(L,b=!1,x=!1)=>(n||z(),V.schedule(L,b,x)),w},{}),cancel:w=>{for(let I=0;I<El.length;I++)o[El[I]].cancel(w)},state:i,steps:o}}const{schedule:De,cancel:ur,state:ft,steps:Dd}=R2(typeof requestAnimationFrame<"u"?requestAnimationFrame:ln,!0);let Gl;function Oz(){Gl=void 0}const Ft={now:()=>(Gl===void 0&&Ft.set(ft.isProcessing||cr.useManualTiming?ft.timestamp:performance.now()),Gl),set:t=>{Gl=t,queueMicrotask(Oz)}},V2=t=>e=>typeof e=="string"&&e.startsWith(t),D2=V2("--"),Fz=V2("var(--"),zp=t=>Fz(t)?Bz.test(t.split("/*")[0].trim()):!1,Bz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Hs={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ea={...Hs,transform:t=>lr(0,1,t)},Tl={...Hs,default:1},Ho=t=>Math.round(t*1e5)/1e5,Ap=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Uz(t){return t==null}const $z=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Pp=(t,e)=>n=>!!(typeof n=="string"&&$z.test(n)&&n.startsWith(t)||e&&!Uz(n)&&Object.prototype.hasOwnProperty.call(n,e)),M2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(Ap);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},qz=t=>lr(0,255,t),Md={...Hs,transform:t=>Math.round(qz(t))},yi={test:Pp("rgb","red"),parse:M2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Md.transform(t)+", "+Md.transform(e)+", "+Md.transform(n)+", "+Ho(Ea.transform(r))+")"};function Wz(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mf={test:Pp("#"),parse:Wz,transform:yi.transform},Ua=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),wr=Ua("deg"),Fn=Ua("%"),de=Ua("px"),Hz=Ua("vh"),Kz=Ua("vw"),Iy={...Fn,parse:t=>Fn.parse(t)/100,transform:t=>Fn.transform(t*100)},ls={test:Pp("hsl","hue"),parse:M2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Fn.transform(Ho(e))+", "+Fn.transform(Ho(n))+", "+Ho(Ea.transform(r))+")"},Ye={test:t=>yi.test(t)||mf.test(t)||ls.test(t),parse:t=>yi.test(t)?yi.parse(t):ls.test(t)?ls.parse(t):mf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?yi.transform(t):ls.transform(t),getAnimatableNone:t=>{const e=Ye.parse(t);return e.alpha=0,Ye.transform(e)}},Gz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qz(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Ap))==null?void 0:e.length)||0)+(((n=t.match(Gz))==null?void 0:n.length)||0)>0}const L2="number",O2="color",Yz="var",Xz="var(",zy="${}",Jz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ta(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(Jz,u=>(Ye.test(u)?(r.color.push(s),i.push(O2),n.push(Ye.parse(u))):u.startsWith(Xz)?(r.var.push(s),i.push(Yz),n.push(u)):(r.number.push(s),i.push(L2),n.push(parseFloat(u))),++s,zy)).split(zy);return{values:n,split:l,indexes:r,types:i}}function F2(t){return Ta(t).values}function B2(t){const{split:e,types:n}=Ta(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===L2?s+=Ho(i[o]):l===O2?s+=Ye.transform(i[o]):s+=i[o]}return s}}const Zz=t=>typeof t=="number"?0:Ye.test(t)?Ye.getAnimatableNone(t):t;function eA(t){const e=F2(t);return B2(t)(e.map(Zz))}const Yr={test:Qz,parse:F2,createTransformer:B2,getAnimatableNone:eA};function Ld(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tA({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,u=2*n-l;i=Ld(u,l,t+1/3),s=Ld(u,l,t),o=Ld(u,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Lc(t,e){return n=>n>0?e:t}const Le=(t,e,n)=>t+(e-t)*n,Od=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},nA=[mf,yi,ls],rA=t=>nA.find(e=>e.test(t));function Ay(t){const e=rA(t);if(!e)return!1;let n=e.parse(t);return e===ls&&(n=tA(n)),n}const Py=(t,e)=>{const n=Ay(t),r=Ay(e);if(!n||!r)return Lc(t,e);const i={...n};return s=>(i.red=Od(n.red,r.red,s),i.green=Od(n.green,r.green,s),i.blue=Od(n.blue,r.blue,s),i.alpha=Le(n.alpha,r.alpha,s),yi.transform(i))},pf=new Set(["none","hidden"]);function iA(t,e){return pf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function sA(t,e){return n=>Le(t,e,n)}function Rp(t){return typeof t=="number"?sA:typeof t=="string"?zp(t)?Lc:Ye.test(t)?Py:lA:Array.isArray(t)?U2:typeof t=="object"?Ye.test(t)?Py:oA:Lc}function U2(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>Rp(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function oA(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Rp(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function aA(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],l=t.values[o]??0;n[i]=l,r[s]++}return n}const lA=(t,e)=>{const n=Yr.createTransformer(e),r=Ta(t),i=Ta(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?pf.has(t)&&!i.values.length||pf.has(e)&&!r.values.length?iA(t,e):Fa(U2(aA(r,i),i.values),n):Lc(t,e)};function $2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Le(t,e,n):Rp(t)(t,e)}const cA=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>De.update(e,n),stop:()=>ur(e),now:()=>ft.isProcessing?ft.timestamp:Ft.now()}},q2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Oc=2e4;function Vp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Oc;)e+=n,r=t.next(e);return e>=Oc?1/0:e}function uA(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Vp(r),Oc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:on(i)}}const dA=5;function W2(t,e,n){const r=Math.max(e-dA,0);return _2(n-t(r),e-r)}const We={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Fd=.001;function hA({duration:t=We.duration,bounce:e=We.bounce,velocity:n=We.velocity,mass:r=We.mass}){let i,s,o=1-e;o=lr(We.minDamping,We.maxDamping,o),t=lr(We.minDuration,We.maxDuration,on(t)),o<1?(i=d=>{const h=d*o,m=h*t,p=h-n,v=gf(d,o),T=Math.exp(-m);return Fd-p/v*T},s=d=>{const m=d*o*t,p=m*n+n,v=Math.pow(o,2)*Math.pow(d,2)*t,T=Math.exp(-m),N=gf(Math.pow(d,2),o);return(-i(d)+Fd>0?-1:1)*((p-v)*T)/N}):(i=d=>{const h=Math.exp(-d*t),m=(d-n)*t+1;return-Fd+h*m},s=d=>{const h=Math.exp(-d*t),m=(n-d)*(t*t);return h*m});const l=5/t,u=mA(i,s,l);if(t=On(t),isNaN(u))return{stiffness:We.stiffness,damping:We.damping,duration:t};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const fA=12;function mA(t,e,n){let r=n;for(let i=1;i<fA;i++)r=r-t(r)/e(r);return r}function gf(t,e){return t*Math.sqrt(1-e*e)}const pA=["duration","bounce"],gA=["stiffness","damping","mass"];function Ry(t,e){return e.some(n=>t[n]!==void 0)}function xA(t){let e={velocity:We.velocity,stiffness:We.stiffness,damping:We.damping,mass:We.mass,isResolvedFromDuration:!1,...t};if(!Ry(t,gA)&&Ry(t,pA))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*lr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:We.mass,stiffness:i,damping:s}}else{const n=hA(t);e={...e,...n,mass:We.mass},e.isResolvedFromDuration=!0}return e}function Fc(t=We.visualDuration,e=We.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:m,velocity:p,isResolvedFromDuration:v}=xA({...n,velocity:-on(n.velocity||0)}),T=p||0,N=d/(2*Math.sqrt(u*h)),z=o-s,_=on(Math.sqrt(u/h)),y=Math.abs(z)<5;r||(r=y?We.restSpeed.granular:We.restSpeed.default),i||(i=y?We.restDelta.granular:We.restDelta.default);let w;if(N<1){const V=gf(_,N);w=L=>{const b=Math.exp(-N*_*L);return o-b*((T+N*_*z)/V*Math.sin(V*L)+z*Math.cos(V*L))}}else if(N===1)w=V=>o-Math.exp(-_*V)*(z+(T+_*z)*V);else{const V=_*Math.sqrt(N*N-1);w=L=>{const b=Math.exp(-N*_*L),x=Math.min(V*L,300);return o-b*((T+N*_*z)*Math.sinh(x)+V*z*Math.cosh(x))/V}}const I={calculatedDuration:v&&m||null,next:V=>{const L=w(V);if(v)l.done=V>=m;else{let b=V===0?T:0;N<1&&(b=V===0?On(T):W2(w,V,L));const x=Math.abs(b)<=r,k=Math.abs(o-L)<=i;l.done=x&&k}return l.value=l.done?o:L,l},toString:()=>{const V=Math.min(Vp(I),Oc),L=q2(b=>I.next(V*b).value,V,30);return V+"ms "+L},toTransition:()=>{}};return I}Fc.applyToOptions=t=>{const e=uA(t,100,Fc);return t.ease=e.ease,t.duration=On(e.duration),t.type="keyframes",t};function xf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const m=t[0],p={done:!1,value:m},v=x=>l!==void 0&&x<l||u!==void 0&&x>u,T=x=>l===void 0?u:u===void 0||Math.abs(l-x)<Math.abs(u-x)?l:u;let N=n*e;const z=m+N,_=o===void 0?z:o(z);_!==z&&(N=_-m);const y=x=>-N*Math.exp(-x/r),w=x=>_+y(x),I=x=>{const k=y(x),C=w(x);p.done=Math.abs(k)<=d,p.value=p.done?_:C};let V,L;const b=x=>{v(p.value)&&(V=x,L=Fc({keyframes:[p.value,T(p.value)],velocity:W2(w,x,p.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return b(0),{calculatedDuration:null,next:x=>{let k=!1;return!L&&V===void 0&&(k=!0,I(x),b(x)),V!==void 0&&x>=V?L.next(x-V):(!k&&I(x),p)}}}function yA(t,e,n){const r=[],i=n||cr.mix||$2,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||ln:e;l=Fa(u,l)}r.push(l)}return r}function H2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(Np(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=yA(e,r,i),u=l.length,d=h=>{if(o&&h<t[0])return e[0];let m=0;if(u>1)for(;m<t.length-2&&!(h<t[m+1]);m++);const p=_a(t[m],t[m+1],h);return l[m](p)};return n?h=>d(lr(t[0],t[s-1],h)):d}function vA(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=_a(0,e,r);t.push(Le(n,1,i))}}function wA(t){const e=[0];return vA(e,t.length-1),e}function bA(t,e){return t.map(n=>n*e)}function kA(t,e){return t.map(()=>e||A2).splice(0,t.length-1)}function Ko({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=Rz(r)?r.map(jy):jy(r),s={done:!1,value:e[0]},o=bA(n&&n.length===e.length?n:wA(e),t),l=H2(o,e,{ease:Array.isArray(i)?i:kA(e,i)});return{calculatedDuration:t,next:u=>(s.value=l(u),s.done=u>=t,s)}}const _A=t=>t!==null;function Dp(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(_A),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const EA={decay:xf,inertia:xf,tween:Ko,keyframes:Ko,spring:Fc};function K2(t){typeof t.type=="string"&&(t.type=EA[t.type])}class Mp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const TA=t=>t/100;class Lp extends Mp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Ft.now()&&this.tick(Ft.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;K2(e);const{type:n=Ko,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const u=n||Ko;u!==Ko&&typeof l[0]!="number"&&(this.mixKeyframes=Fa(TA,$2(l[0],l[1])),l=[0,100]);const d=u({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=Vp(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:m,repeatType:p,repeatDelay:v,type:T,onUpdate:N,finalKeyframe:z}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const _=this.currentTime-d*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?_<0:_>i;this.currentTime=Math.max(_,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,I=r;if(m){const x=Math.min(this.currentTime,i)/l;let k=Math.floor(x),C=x%1;!C&&x>=1&&(C=1),C===1&&k--,k=Math.min(k,m+1),!!(k%2)&&(p==="reverse"?(C=1-C,v&&(C-=v/l)):p==="mirror"&&(I=o)),w=lr(0,1,C)*l}const V=y?{done:!1,value:h[0]}:I.next(w);s&&(V.value=s(V.value));let{done:L}=V;!y&&u!==null&&(L=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return b&&T!==xf&&(V.value=Dp(h,this.options,z,this.speed)),N&&N(V.value),b&&this.finish(),V}then(e,n){return this.finished.then(e,n)}get duration(){return on(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+on(e)}get time(){return on(this.currentTime)}set time(e){var n;e=On(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Ft.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=on(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=cA,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Ft.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function NA(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const vi=t=>t*180/Math.PI,yf=t=>{const e=vi(Math.atan2(t[1],t[0]));return vf(e)},CA={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:yf,rotateZ:yf,skewX:t=>vi(Math.atan(t[1])),skewY:t=>vi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},vf=t=>(t=t%360,t<0&&(t+=360),t),Vy=yf,Dy=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),My=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),SA={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Dy,scaleY:My,scale:t=>(Dy(t)+My(t))/2,rotateX:t=>vf(vi(Math.atan2(t[6],t[5]))),rotateY:t=>vf(vi(Math.atan2(-t[2],t[0]))),rotateZ:Vy,rotate:Vy,skewX:t=>vi(Math.atan(t[4])),skewY:t=>vi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wf(t){return t.includes("scale")?1:0}function bf(t,e){if(!t||t==="none")return wf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=SA,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=CA,i=l}if(!i)return wf(e);const s=r[e],o=i[1].split(",").map(IA);return typeof s=="function"?s(o):o[s]}const jA=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return bf(n,e)};function IA(t){return parseFloat(t.trim())}const Ks=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Gs=new Set(Ks),Ly=t=>t===Hs||t===de,zA=new Set(["x","y","z"]),AA=Ks.filter(t=>!zA.has(t));function PA(t){const e=[];return AA.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const _i={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>bf(e,"x"),y:(t,{transform:e})=>bf(e,"y")};_i.translateX=_i.x;_i.translateY=_i.y;const Ei=new Set;let kf=!1,_f=!1,Ef=!1;function G2(){if(_f){const t=Array.from(Ei).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=PA(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}_f=!1,kf=!1,Ei.forEach(t=>t.complete(Ef)),Ei.clear()}function Q2(){Ei.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(_f=!0)})}function RA(){Ef=!0,Q2(),G2(),Ef=!1}class Op{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ei.add(this),kf||(kf=!0,De.read(Q2),De.resolveKeyframes(G2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}NA(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ei.delete(this)}cancel(){this.state==="scheduled"&&(Ei.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const VA=t=>t.startsWith("--");function DA(t,e,n){VA(e)?t.style.setProperty(e,n):t.style[e]=n}const MA=Cp(()=>window.ScrollTimeline!==void 0),LA={};function OA(t,e){const n=Cp(t);return()=>LA[e]??n()}const Y2=OA(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),zo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Oy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:zo([0,.65,.55,1]),circOut:zo([.55,0,1,.45]),backIn:zo([.31,.01,.66,-.59]),backOut:zo([.33,1.53,.69,.99])};function X2(t,e){if(t)return typeof t=="function"?Y2()?q2(t,e):"ease-out":P2(t)?zo(t):Array.isArray(t)?t.map(n=>X2(n,e)||Oy.easeOut):Oy[t]}function FA(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[e]:n};u&&(h.offset=u);const m=X2(l,i);Array.isArray(m)&&(h.easing=m);const p={delay:r,duration:i,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(p.pseudoElement=d),t.animate(h,p)}function J2(t){return typeof t=="function"&&"applyToOptions"in t}function BA({type:t,...e}){return J2(t)&&Y2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class UA extends Mp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,Np(typeof e.type!="string");const d=BA(e);this.animation=FA(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=Dp(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):DA(n,r,h),this.animation.cancel()}u==null||u(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return on(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+on(e)}get time(){return on(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=On(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&MA()?(this.animation.timeline=e,ln):n(this)}}const Z2={anticipate:j2,backInOut:S2,circInOut:z2};function $A(t){return t in Z2}function qA(t){typeof t.ease=="string"&&$A(t.ease)&&(t.ease=Z2[t.ease])}const Fy=10;class WA extends UA{constructor(e){qA(e),K2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Lp({...o,autoplay:!1}),u=On(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-Fy).value,l.sample(u).value,Fy),l.stop()}}const By=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Yr.test(t)||t==="0")&&!t.startsWith("url("));function HA(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function KA(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=By(i,e),l=By(s,e);return!o||!l?!1:HA(t)||(n==="spring"||J2(n))&&r}function Tf(t){t.duration=0,t.type="keyframes"}const GA=new Set(["opacity","clipPath","filter","transform"]),QA=Cp(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function YA(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=e.owner.getProps();return QA()&&n&&GA.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const XA=40;class JA extends Mp{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...m}){var T;super(),this.stop=()=>{var N,z;this._animation&&(this._animation.stop(),(N=this.stopTimeline)==null||N.call(this)),(z=this.keyframeResolver)==null||z.cancel()},this.createdAt=Ft.now();const p={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...m},v=(h==null?void 0:h.KeyframeResolver)||Op;this.keyframeResolver=new v(l,(N,z,_)=>this.onKeyframesResolved(N,z,p,!_),u,d,h),(T=this.keyframeResolver)==null||T.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Ft.now(),KA(e,s,o,l)||((cr.instantAnimations||!u)&&(h==null||h(Dp(e,r,n))),e[0]=e[e.length-1],Tf(r),r.repeat=0);const p={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>XA?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!d&&YA(p)?new WA({...p,element:p.motionValue.owner.current}):new Lp(p);v.finished.then(()=>this.notifyFinished()).catch(ln),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),RA()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const ZA=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function eP(t){const e=ZA.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function e_(t,e,n=1){const[r,i]=eP(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return w2(o)?parseFloat(o):o}return zp(i)?e_(i,e,n+1):i}function Fp(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const t_=new Set(["width","height","top","left","right","bottom",...Ks]),tP={test:t=>t==="auto",parse:t=>t},n_=t=>e=>e.test(t),r_=[Hs,de,Fn,wr,Kz,Hz,tP],Uy=t=>r_.find(n_(t));function nP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||k2(t):!0}const rP=new Set(["brightness","contrast","saturate","opacity"]);function iP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(Ap)||[];if(!r)return t;const i=n.replace(r,"");let s=rP.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const sP=/\b([a-z-]*)\(.*?\)/gu,Nf={...Yr,getAnimatableNone:t=>{const e=t.match(sP);return e?e.map(iP).join(" "):t}},$y={...Hs,transform:Math.round},oP={rotate:wr,rotateX:wr,rotateY:wr,rotateZ:wr,scale:Tl,scaleX:Tl,scaleY:Tl,scaleZ:Tl,skew:wr,skewX:wr,skewY:wr,distance:de,translateX:de,translateY:de,translateZ:de,x:de,y:de,z:de,perspective:de,transformPerspective:de,opacity:Ea,originX:Iy,originY:Iy,originZ:de},Bp={borderWidth:de,borderTopWidth:de,borderRightWidth:de,borderBottomWidth:de,borderLeftWidth:de,borderRadius:de,radius:de,borderTopLeftRadius:de,borderTopRightRadius:de,borderBottomRightRadius:de,borderBottomLeftRadius:de,width:de,maxWidth:de,height:de,maxHeight:de,top:de,right:de,bottom:de,left:de,padding:de,paddingTop:de,paddingRight:de,paddingBottom:de,paddingLeft:de,margin:de,marginTop:de,marginRight:de,marginBottom:de,marginLeft:de,backgroundPositionX:de,backgroundPositionY:de,...oP,zIndex:$y,fillOpacity:Ea,strokeOpacity:Ea,numOctaves:$y},aP={...Bp,color:Ye,backgroundColor:Ye,outlineColor:Ye,fill:Ye,stroke:Ye,borderColor:Ye,borderTopColor:Ye,borderRightColor:Ye,borderBottomColor:Ye,borderLeftColor:Ye,filter:Nf,WebkitFilter:Nf},i_=t=>aP[t];function s_(t,e){let n=i_(t);return n!==Nf&&(n=Yr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const lP=new Set(["auto","none","0"]);function cP(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!lP.has(s)&&Ta(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=s_(n,i)}class uP extends Op{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<e.length;u++){let d=e[u];if(typeof d=="string"&&(d=d.trim(),zp(d))){const h=e_(d,n.current);h!==void 0&&(e[u]=h),u===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!t_.has(r)||e.length!==2)return;const[i,s]=e,o=Uy(i),l=Uy(s);if(o!==l)if(Ly(o)&&Ly(l))for(let u=0;u<e.length;u++){const d=e[u];typeof d=="string"&&(e[u]=parseFloat(d))}else _i[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||nP(e[i]))&&r.push(i);r.length&&cP(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_i[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=_i[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([u,d])=>{e.getValue(u).set(d)}),this.resolveNoneKeyframes()}}function dP(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const o_=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function a_(t){return b2(t)&&"offsetHeight"in t}const qy=30,hP=t=>!isNaN(parseFloat(t)),Go={current:void 0};class fP{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Ft.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Ft.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Sp);const r=this.events[e].add(n);return e==="change"?()=>{r(),De.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Go.current&&Go.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Ft.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>qy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,qy);return _2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ri(t,e){return new fP(t,e)}const{schedule:Up}=R2(queueMicrotask,!1),pn={x:!1,y:!1};function l_(){return pn.x||pn.y}function mP(t){return t==="x"||t==="y"?pn[t]?null:(pn[t]=!0,()=>{pn[t]=!1}):pn.x||pn.y?null:(pn.x=pn.y=!0,()=>{pn.x=pn.y=!1})}function c_(t,e){const n=dP(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Wy(t){return!(t.pointerType==="touch"||l_())}function pP(t,e,n={}){const[r,i,s]=c_(t,n),o=l=>{if(!Wy(l))return;const{target:u}=l,d=e(u,l);if(typeof d!="function"||!u)return;const h=m=>{Wy(m)&&(d(m),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const u_=(t,e)=>e?t===e?!0:u_(t,e.parentElement):!1,$p=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,gP=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function xP(t){return gP.has(t.tagName)||t.tabIndex!==-1}const Ql=new WeakSet;function Hy(t){return e=>{e.key==="Enter"&&t(e)}}function Bd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const yP=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Hy(()=>{if(Ql.has(n))return;Bd(n,"down");const i=Hy(()=>{Bd(n,"up")}),s=()=>Bd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Ky(t){return $p(t)&&!l_()}function vP(t,e,n={}){const[r,i,s]=c_(t,n),o=l=>{const u=l.currentTarget;if(!Ky(l))return;Ql.add(u);const d=e(u,l),h=(v,T)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),Ql.has(u)&&Ql.delete(u),Ky(v)&&typeof d=="function"&&d(v,{success:T})},m=v=>{h(v,u===window||u===document||n.useGlobalTarget||u_(u,v.target))},p=v=>{h(v,!1)};window.addEventListener("pointerup",m,i),window.addEventListener("pointercancel",p,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),a_(l)&&(l.addEventListener("focus",d=>yP(d,i)),!xP(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function d_(t){return b2(t)&&"ownerSVGElement"in t}function wP(t){return d_(t)&&t.tagName==="svg"}function bP(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],o=t[3+n],l=H2(i,s,o);return e?l(r):l}const gt=t=>!!(t&&t.getVelocity),kP=[...r_,Ye,Yr],_P=t=>kP.find(n_(t)),Eu=P.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Gy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function EP(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Gy(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Gy(t[i],null)}}}}function TP(...t){return P.useCallback(EP(...t),t)}class NP extends P.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=a_(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function CP({children:t,isPresent:e,anchorX:n,root:r}){const i=P.useId(),s=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=P.useContext(Eu),u=TP(s,t==null?void 0:t.ref);return P.useInsertionEffect(()=>{const{width:d,height:h,top:m,left:p,right:v}=o.current;if(e||!s.current||!d||!h)return;const T=n==="left"?`left: ${p}`:`right: ${v}`;s.current.dataset.motionPopId=i;const N=document.createElement("style");l&&(N.nonce=l);const z=r??document.head;return z.appendChild(N),N.sheet&&N.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${T}px !important;
            top: ${m}px !important;
          }
        `),()=>{z.contains(N)&&z.removeChild(N)}},[e]),a.jsx(NP,{isPresent:e,childRef:s,sizeRef:o,children:P.cloneElement(t,{ref:u})})}const SP=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=ti(jP),h=P.useId();let m=!0,p=P.useMemo(()=>(m=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:v=>{d.set(v,!0);for(const T of d.values())if(!T)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return s&&m&&(p={...p}),P.useMemo(()=>{d.forEach((v,T)=>d.set(T,!1))},[n]),P.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=a.jsx(CP,{isPresent:n,anchorX:l,root:u,children:t})),a.jsx(_u.Provider,{value:p,children:t})};function jP(){return new Map}function h_(t=!0){const e=P.useContext(_u);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=P.useId();P.useEffect(()=>{if(t)return i(s)},[t]);const o=P.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Nl=t=>t.key||"";function Qy(t){const e=[];return P.Children.forEach(t,n=>{P.isValidElement(n)&&e.push(n)}),e}const wn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=h_(o),m=P.useMemo(()=>Qy(t),[t]),p=o&&!d?[]:m.map(Nl),v=P.useRef(!0),T=P.useRef(m),N=ti(()=>new Map),[z,_]=P.useState(m),[y,w]=P.useState(m);_p(()=>{v.current=!1,T.current=m;for(let L=0;L<y.length;L++){const b=Nl(y[L]);p.includes(b)?N.delete(b):N.get(b)!==!0&&N.set(b,!1)}},[y,p.length,p.join("-")]);const I=[];if(m!==z){let L=[...m];for(let b=0;b<y.length;b++){const x=y[b],k=Nl(x);p.includes(k)||(L.splice(b,0,x),I.push(x))}return s==="wait"&&I.length&&(L=I),w(Qy(L)),_(m),null}const{forceRender:V}=P.useContext(bp);return a.jsx(a.Fragment,{children:y.map(L=>{const b=Nl(L),x=o&&!d?!1:m===y||p.includes(b),k=()=>{if(N.has(b))N.set(b,!0);else return;let C=!0;N.forEach(j=>{j||(C=!1)}),C&&(V==null||V(),w(T.current),o&&(h==null||h()),r&&r())};return a.jsx(SP,{isPresent:x,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:x?void 0:k,anchorX:l,children:L},b)})})},f_=P.createContext({strict:!1}),Yy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ms={};for(const t in Yy)Ms[t]={isEnabled:e=>Yy[t].some(n=>!!e[n])};function IP(t){for(const e in t)Ms[e]={...Ms[e],...t[e]}}const zP=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||zP.has(t)}let m_=t=>!Bc(t);function AP(t){typeof t=="function"&&(m_=e=>e.startsWith("on")?!Bc(e):t(e))}try{AP(require("@emotion/is-prop-valid").default)}catch{}function PP(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(m_(i)||n===!0&&Bc(i)||!e&&!Bc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Tu=P.createContext({});function Nu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Na(t){return typeof t=="string"||Array.isArray(t)}const qp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Wp=["initial",...qp];function Cu(t){return Nu(t.animate)||Wp.some(e=>Na(t[e]))}function p_(t){return!!(Cu(t)||t.variants)}function RP(t,e){if(Cu(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Na(n)?n:void 0,animate:Na(r)?r:void 0}}return t.inherit!==!1?e:{}}function VP(t){const{initial:e,animate:n}=RP(t,P.useContext(Tu));return P.useMemo(()=>({initial:e,animate:n}),[Xy(e),Xy(n)])}function Xy(t){return Array.isArray(t)?t.join(" "):t}function Jy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ko={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(de.test(t))t=parseFloat(t);else return t;const n=Jy(t,e.target.x),r=Jy(t,e.target.y);return`${n}% ${r}%`}},DP={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Yr.parse(t);if(i.length>5)return r;const s=Yr.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,u=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=u;const d=Le(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}},Cf={borderRadius:{...ko,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ko,borderTopRightRadius:ko,borderBottomLeftRadius:ko,borderBottomRightRadius:ko,boxShadow:DP};function g_(t,{layout:e,layoutId:n}){return Gs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Cf[t]||t==="opacity")}const MP={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LP=Ks.length;function OP(t,e,n){let r="",i=!0;for(let s=0;s<LP;s++){const o=Ks[s],l=t[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=o_(l,Bp[o]);if(!u){i=!1;const h=MP[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Hp(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const u in e){const d=e[u];if(Gs.has(u)){o=!0;continue}else if(D2(u)){i[u]=d;continue}else{const h=o_(d,Bp[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(e.transform||(o||n?r.transform=OP(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const Kp=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function x_(t,e,n){for(const r in e)!gt(e[r])&&!g_(r,n)&&(t[r]=e[r])}function FP({transformTemplate:t},e){return P.useMemo(()=>{const n=Kp();return Hp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function BP(t,e){const n=t.style||{},r={};return x_(r,n,t),Object.assign(r,FP(t,e)),r}function UP(t,e){const n={},r=BP(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const $P={offset:"stroke-dashoffset",array:"stroke-dasharray"},qP={offset:"strokeDashoffset",array:"strokeDasharray"};function WP(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?$P:qP;t[s.offset]=de.transform(-r);const o=de.transform(e),l=de.transform(n);t[s.array]=`${o} ${l}`}function y_(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(Hp(t,l,d),u){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:p}=t;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),i!==void 0&&WP(m,i,s,o,!1)}const v_=()=>({...Kp(),attrs:{}}),w_=t=>typeof t=="string"&&t.toLowerCase()==="svg";function HP(t,e,n,r){const i=P.useMemo(()=>{const s=v_();return y_(s,e,w_(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};x_(s,t.style,t),i.style={...s,...i.style}}return i}const KP=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Gp(t){return typeof t!="string"||t.includes("-")?!1:!!(KP.indexOf(t)>-1||/[A-Z]/u.test(t))}function GP(t,e,n,{latestValues:r},i,s=!1){const l=(Gp(t)?HP:UP)(e,r,i,t),u=PP(e,typeof t=="string",s),d=t!==P.Fragment?{...u,...l,ref:n}:{},{children:h}=e,m=P.useMemo(()=>gt(h)?h.get():h,[h]);return P.createElement(t,{...d,children:m})}function Zy(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Qp(t,e,n,r){if(typeof e=="function"){const[i,s]=Zy(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Zy(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Yl(t){return gt(t)?t.get():t}function QP({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:YP(n,r,i,t),renderState:e()}}function YP(t,e,n,r){const i={},s=r(t,{});for(const p in s)i[p]=Yl(s[p]);let{initial:o,animate:l}=t;const u=Cu(t),d=p_(t);e&&d&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const m=h?l:o;if(m&&typeof m!="boolean"&&!Nu(m)){const p=Array.isArray(m)?m:[m];for(let v=0;v<p.length;v++){const T=Qp(t,p[v]);if(T){const{transitionEnd:N,transition:z,..._}=T;for(const y in _){let w=_[y];if(Array.isArray(w)){const I=h?w.length-1:0;w=w[I]}w!==null&&(i[y]=w)}for(const y in N)i[y]=N[y]}}}return i}const b_=t=>(e,n)=>{const r=P.useContext(Tu),i=P.useContext(_u),s=()=>QP(t,e,r,i);return n?s():ti(s)};function Yp(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(gt(r[o])||e.style&&gt(e.style[o])||g_(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const XP=b_({scrapeMotionValuesFromProps:Yp,createRenderState:Kp});function k_(t,e,n){const r=Yp(t,e,n);for(const i in t)if(gt(t[i])||gt(e[i])){const s=Ks.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const JP=b_({scrapeMotionValuesFromProps:k_,createRenderState:v_}),ZP=Symbol.for("motionComponentSymbol");function cs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function eR(t,e,n){return P.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):cs(n)&&(n.current=r))},[e])}const Xp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),tR="framerAppearId",__="data-"+Xp(tR),E_=P.createContext({});function nR(t,e,n,r,i){var N,z;const{visualElement:s}=P.useContext(Tu),o=P.useContext(f_),l=P.useContext(_u),u=P.useContext(Eu).reducedMotion,d=P.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,m=P.useContext(E_);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&rR(d.current,n,i,m);const p=P.useRef(!1);P.useInsertionEffect(()=>{h&&p.current&&h.update(n,l)});const v=n[__],T=P.useRef(!!v&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,v))&&((z=window.MotionHasOptimisedAnimation)==null?void 0:z.call(window,v)));return _p(()=>{h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),T.current&&h.animationState&&h.animationState.animateChanges())}),P.useEffect(()=>{h&&(!T.current&&h.animationState&&h.animationState.animateChanges(),T.current&&(queueMicrotask(()=>{var _;(_=window.MotionHandoffMarkAsComplete)==null||_.call(window,v)}),T.current=!1),h.enteringChildren=void 0)}),h}function rR(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:T_(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&cs(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function T_(t){if(t)return t.options.allowProjection!==!1?t.projection:T_(t.parent)}function Ud(t,{forwardMotionProps:e=!1}={},n,r){n&&IP(n);const i=Gp(t)?JP:XP;function s(l,u){let d;const h={...P.useContext(Eu),...l,layoutId:iR(l)},{isStatic:m}=h,p=VP(l),v=i(l,m);if(!m&&kp){sR();const T=oR(h);d=T.MeasureLayout,p.visualElement=nR(t,v,h,r,T.ProjectionNode)}return a.jsxs(Tu.Provider,{value:p,children:[d&&p.visualElement?a.jsx(d,{visualElement:p.visualElement,...h}):null,GP(t,l,eR(v,p.visualElement,u),v,m,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=P.forwardRef(s);return o[ZP]=t,o}function iR({layoutId:t}){const e=P.useContext(bp).id;return e&&t!==void 0?e+"-"+t:t}function sR(t,e){P.useContext(f_).strict}function oR(t){const{drag:e,layout:n}=Ms;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function aR(t,e){if(typeof Proxy>"u")return Ud;const n=new Map,r=(s,o)=>Ud(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Ud(o,void 0,t,e)),n.get(o))})}function N_({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function lR({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function cR(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function $d(t){return t===void 0||t===1}function Sf({scale:t,scaleX:e,scaleY:n}){return!$d(t)||!$d(e)||!$d(n)}function hi(t){return Sf(t)||C_(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function C_(t){return ev(t.x)||ev(t.y)}function ev(t){return t&&t!=="0%"}function Uc(t,e,n){const r=t-n,i=e*r;return n+i}function tv(t,e,n,r,i){return i!==void 0&&(t=Uc(t,i,r)),Uc(t,n,r)+e}function jf(t,e=0,n=1,r,i){t.min=tv(t.min,e,n,r,i),t.max=tv(t.max,e,n,r,i)}function S_(t,{x:e,y:n}){jf(t.x,e.translate,e.scale,e.originPoint),jf(t.y,n.translate,n.scale,n.originPoint)}const nv=.999999999999,rv=1.0000000000001;function uR(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&ds(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,S_(t,o)),r&&hi(s.latestValues)&&ds(t,s.latestValues))}e.x<rv&&e.x>nv&&(e.x=1),e.y<rv&&e.y>nv&&(e.y=1)}function us(t,e){t.min=t.min+e,t.max=t.max+e}function iv(t,e,n,r,i=.5){const s=Le(t.min,t.max,i);jf(t,e,n,s,r)}function ds(t,e){iv(t.x,e.x,e.scaleX,e.scale,e.originX),iv(t.y,e.y,e.scaleY,e.scale,e.originY)}function j_(t,e){return N_(cR(t.getBoundingClientRect(),e))}function dR(t,e,n){const r=j_(t,n),{scroll:i}=e;return i&&(us(r.x,i.offset.x),us(r.y,i.offset.y)),r}const sv=()=>({translate:0,scale:1,origin:0,originPoint:0}),hs=()=>({x:sv(),y:sv()}),ov=()=>({min:0,max:0}),it=()=>({x:ov(),y:ov()}),If={current:null},I_={current:!1};function hR(){if(I_.current=!0,!!kp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>If.current=t.matches;t.addEventListener("change",e),e()}else If.current=!1}const fR=new WeakMap;function mR(t,e,n){for(const r in e){const i=e[r],s=n[r];if(gt(i))t.addValue(r,i);else if(gt(s))t.addValue(r,Ri(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Ri(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const av=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class pR{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Op,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Ft.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,De.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Cu(n),this.isVariantNode=p_(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const v=m[p];u[p]!==void 0&&gt(v)&&v.set(u[p])}}mount(e){var n;this.current=e,fR.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),I_.current||hR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:If.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),ur(this.notifyUpdate),ur(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Gs.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&De.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ms){const n=Ms[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):it()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<av.length;r++){const i=av[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=mR(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Ri(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(w2(r)||k2(r))?r=parseFloat(r):!_P(r)&&Yr.test(n)&&(r=s_(e,n)),this.setBaseTarget(e,gt(r)?r.get():r)),gt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Qp(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!gt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Sp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Up.render(this.render)}}class z_ extends pR{constructor(){super(...arguments),this.KeyframeResolver=uP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;gt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function A_(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function gR(t){return window.getComputedStyle(t)}class xR extends z_{constructor(){super(...arguments),this.type="html",this.renderInstance=A_}readValueFromInstance(e,n){var r;if(Gs.has(n))return(r=this.projection)!=null&&r.isProjecting?wf(n):jA(e,n);{const i=gR(e),s=(D2(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return j_(e,n)}build(e,n,r){Hp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Yp(e,n,r)}}const P_=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function yR(t,e,n,r){A_(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(P_.has(i)?i:Xp(i),e.attrs[i])}class vR extends z_{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=it}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Gs.has(n)){const r=i_(n);return r&&r.default||0}return n=P_.has(n)?n:Xp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return k_(e,n,r)}build(e,n,r){y_(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){yR(e,n,r,i)}mount(e){this.isSVGTag=w_(e.tagName),super.mount(e)}}const wR=(t,e)=>Gp(t)?new vR(e):new xR(e,{allowProjection:t!==P.Fragment});function _s(t,e,n){const r=t.getProps();return Qp(r,e,n!==void 0?n:r.custom,t)}const zf=t=>Array.isArray(t);function bR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Ri(n))}function kR(t){return zf(t)?t[t.length-1]||0:t}function _R(t,e){const n=_s(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=kR(s[o]);bR(t,o,l)}}function ER(t){return!!(gt(t)&&t.add)}function Af(t,e){const n=t.getValue("willChange");if(ER(n))return n.add(e);if(!n&&cr.WillChange){const r=new cr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function R_(t){return t.props[__]}const TR=t=>t!==null;function NR(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(TR),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const CR={type:"spring",stiffness:500,damping:25,restSpeed:10},SR=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),jR={type:"keyframes",duration:.8},IR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zR=(t,{keyframes:e})=>e.length>2?jR:Gs.has(t)?t.startsWith("scale")?SR(e[1]):CR:IR;function AR({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const Jp=(t,e,n,r={},i,s)=>o=>{const l=Fp(r,t)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-On(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:p=>{e.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};AR(l)||Object.assign(h,zR(t,h)),h.duration&&(h.duration=On(h.duration)),h.repeatDelay&&(h.repeatDelay=On(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let m=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Tf(h),h.delay===0&&(m=!0)),(cr.instantAnimations||cr.skipAnimations)&&(m=!0,Tf(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,m&&!s&&e.get()!==void 0){const p=NR(h.keyframes,l);if(p!==void 0){De.update(()=>{h.onUpdate(p),h.onComplete()});return}}return l.isSync?new Lp(h):new JA(h)};function PR({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function V_(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const u=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const m=t.getValue(h,t.latestValues[h]??null),p=l[h];if(p===void 0||d&&PR(d,h))continue;const v={delay:n,...Fp(s||{},h)},T=m.get();if(T!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===T&&!v.velocity)continue;let N=!1;if(window.MotionHandoffAnimation){const _=R_(t);if(_){const y=window.MotionHandoffAnimation(_,h,De);y!==null&&(v.startTime=y,N=!0)}}Af(t,h),m.start(Jp(h,m,p,t.shouldReduceMotion&&t_.has(h)?{type:!1}:v,t,N));const z=m.animation;z&&u.push(z)}return o&&Promise.all(u).then(()=>{De.update(()=>{o&&_R(t,o)})}),u}function D_(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function Pf(t,e,n={}){var u;const r=_s(t,e,n.type==="exit"?(u=t.presenceContext)==null?void 0:u.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(V_(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:m,staggerDirection:p}=i;return RR(t,e,d,h,m,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function RR(t,e,n=0,r=0,i=0,s=1,o){const l=[];for(const u of t.variantChildren)u.notify("AnimationStart",e),l.push(Pf(u,e,{...o,delay:n+(typeof r=="function"?0:r)+D_(t.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",e)));return Promise.all(l)}function VR(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Pf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Pf(t,e,n);else{const i=typeof e=="function"?_s(t,e,n.custom):e;r=Promise.all(V_(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function M_(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const DR=Wp.length;function L_(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?L_(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<DR;n++){const r=Wp[n],i=t.props[r];(Na(i)||i===!1)&&(e[r]=i)}return e}const MR=[...qp].reverse(),LR=qp.length;function OR(t){return e=>Promise.all(e.map(({animation:n,options:r})=>VR(t,n,r)))}function FR(t){let e=OR(t),n=lv(),r=!0;const i=u=>(d,h)=>{var p;const m=_s(t,h,u==="exit"?(p=t.presenceContext)==null?void 0:p.custom:void 0);if(m){const{transition:v,transitionEnd:T,...N}=m;d={...d,...N,...T}}return d};function s(u){e=u(t)}function o(u){const{props:d}=t,h=L_(t.parent)||{},m=[],p=new Set;let v={},T=1/0;for(let z=0;z<LR;z++){const _=MR[z],y=n[_],w=d[_]!==void 0?d[_]:h[_],I=Na(w),V=_===u?y.isActive:null;V===!1&&(T=z);let L=w===h[_]&&w!==d[_]&&I;if(L&&r&&t.manuallyAnimateOnMount&&(L=!1),y.protectedKeys={...v},!y.isActive&&V===null||!w&&!y.prevProp||Nu(w)||typeof w=="boolean")continue;const b=BR(y.prevProp,w);let x=b||_===u&&y.isActive&&!L&&I||z>T&&I,k=!1;const C=Array.isArray(w)?w:[w];let j=C.reduce(i(_),{});V===!1&&(j={});const{prevResolvedValues:A={}}=y,S={...A,...j},fe=ne=>{x=!0,p.has(ne)&&(k=!0,p.delete(ne)),y.needsAnimating[ne]=!0;const $=t.getValue(ne);$&&($.liveStyle=!1)};for(const ne in S){const $=j[ne],K=A[ne];if(v.hasOwnProperty(ne))continue;let ee=!1;zf($)&&zf(K)?ee=!M_($,K):ee=$!==K,ee?$!=null?fe(ne):p.add(ne):$!==void 0&&p.has(ne)?fe(ne):y.protectedKeys[ne]=!0}y.prevProp=w,y.prevResolvedValues=j,y.isActive&&(v={...v,...j}),r&&t.blockInitialAnimation&&(x=!1);const ae=L&&b;x&&(!ae||k)&&m.push(...C.map(ne=>{const $={type:_};if(typeof ne=="string"&&r&&!ae&&t.manuallyAnimateOnMount&&t.parent){const{parent:K}=t,ee=_s(K,ne);if(K.enteringChildren&&ee){const{delayChildren:M}=ee.transition||{};$.delay=D_(K.enteringChildren,t,M)}}return{animation:ne,options:$}}))}if(p.size){const z={};if(typeof d.initial!="boolean"){const _=_s(t,Array.isArray(d.initial)?d.initial[0]:d.initial);_&&_.transition&&(z.transition=_.transition)}p.forEach(_=>{const y=t.getBaseTarget(_),w=t.getValue(_);w&&(w.liveStyle=!0),z[_]=y??null}),m.push({animation:z})}let N=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(N=!1),r=!1,N?e(m):Promise.resolve()}function l(u,d){var m;if(n[u].isActive===d)return Promise.resolve();(m=t.variantChildren)==null||m.forEach(p=>{var v;return(v=p.animationState)==null?void 0:v.setActive(u,d)}),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=lv()}}}function BR(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!M_(e,t):!1}function li(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function lv(){return{animate:li(!0),whileInView:li(),whileHover:li(),whileTap:li(),whileDrag:li(),whileFocus:li(),exit:li()}}class ni{constructor(e){this.isMounted=!1,this.node=e}update(){}}class UR extends ni{constructor(e){super(e),e.animationState||(e.animationState=FR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Nu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let $R=0;class qR extends ni{constructor(){super(...arguments),this.id=$R++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const WR={animation:{Feature:UR},exit:{Feature:qR}};function Ca(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function $a(t){return{point:{x:t.pageX,y:t.pageY}}}const HR=t=>e=>$p(e)&&t(e,$a(e));function Qo(t,e,n,r){return Ca(t,e,HR(n),r)}const O_=1e-4,KR=1-O_,GR=1+O_,F_=.01,QR=0-F_,YR=0+F_;function At(t){return t.max-t.min}function XR(t,e,n){return Math.abs(t-e)<=n}function cv(t,e,n,r=.5){t.origin=r,t.originPoint=Le(e.min,e.max,t.origin),t.scale=At(n)/At(e),t.translate=Le(n.min,n.max,t.origin)-t.originPoint,(t.scale>=KR&&t.scale<=GR||isNaN(t.scale))&&(t.scale=1),(t.translate>=QR&&t.translate<=YR||isNaN(t.translate))&&(t.translate=0)}function Yo(t,e,n,r){cv(t.x,e.x,n.x,r?r.originX:void 0),cv(t.y,e.y,n.y,r?r.originY:void 0)}function uv(t,e,n){t.min=n.min+e.min,t.max=t.min+At(e)}function JR(t,e,n){uv(t.x,e.x,n.x),uv(t.y,e.y,n.y)}function dv(t,e,n){t.min=e.min-n.min,t.max=t.min+At(e)}function $c(t,e,n){dv(t.x,e.x,n.x),dv(t.y,e.y,n.y)}function Zt(t){return[t("x"),t("y")]}const B_=({current:t})=>t?t.ownerDocument.defaultView:null,hv=(t,e)=>Math.abs(t-e);function ZR(t,e){const n=hv(t.x,e.x),r=hv(t.y,e.y);return Math.sqrt(n**2+r**2)}class U_{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=Wd(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,T=ZR(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!T)return;const{point:N}=p,{timestamp:z}=ft;this.history.push({...N,timestamp:z});const{onStart:_,onMove:y}=this.handlers;v||(_&&_(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,p)},this.handlePointerMove=(p,v)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=qd(v,this.transformPagePoint),De.update(this.updatePoint,!0)},this.handlePointerUp=(p,v)=>{this.end();const{onEnd:T,onSessionEnd:N,resumeAnimation:z}=this.handlers;if(this.dragSnapToOrigin&&z&&z(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Wd(p.type==="pointercancel"?this.lastMoveEventInfo:qd(v,this.transformPagePoint),this.history);this.startEvent&&T&&T(p,_),N&&N(p,_)},!$p(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=$a(e),u=qd(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=ft;this.history=[{...d,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,Wd(u,this.history)),this.removeListeners=Fa(Qo(this.contextWindow,"pointermove",this.handlePointerMove),Qo(this.contextWindow,"pointerup",this.handlePointerUp),Qo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ur(this.updatePoint)}}function qd(t,e){return e?{point:e(t.point)}:t}function fv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wd({point:t},e){return{point:t,delta:fv(t,$_(e)),offset:fv(t,e3(e)),velocity:t3(e,.1)}}function e3(t){return t[0]}function $_(t){return t[t.length-1]}function t3(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=$_(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>On(e)));)n--;if(!r)return{x:0,y:0};const s=on(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function n3(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Le(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Le(n,t,r.max):Math.min(t,n)),t}function mv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function r3(t,{top:e,left:n,bottom:r,right:i}){return{x:mv(t.x,n,i),y:mv(t.y,e,r)}}function pv(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function i3(t,e){return{x:pv(t.x,e.x),y:pv(t.y,e.y)}}function s3(t,e){let n=.5;const r=At(t),i=At(e);return i>r?n=_a(e.min,e.max-r,t.min):r>i&&(n=_a(t.min,t.max-i,e.min)),lr(0,1,n)}function o3(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Rf=.35;function a3(t=Rf){return t===!1?t=0:t===!0&&(t=Rf),{x:gv(t,"left","right"),y:gv(t,"top","bottom")}}function gv(t,e,n){return{min:xv(t,e),max:xv(t,n)}}function xv(t,e){return typeof t=="number"?t:t[e]||0}const l3=new WeakMap;class c3{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=it(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor($a(m).point)},o=(m,p)=>{const{drag:v,dragPropagation:T,onDragStart:N}=this.getProps();if(v&&!T&&(this.openDragLock&&this.openDragLock(),this.openDragLock=mP(v),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zt(_=>{let y=this.getAxisMotionValue(_).get()||0;if(Fn.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const I=w.layout.layoutBox[_];I&&(y=At(I)*(parseFloat(y)/100))}}this.originPoint[_]=y}),N&&De.postRender(()=>N(m,p)),Af(this.visualElement,"transform");const{animationState:z}=this.visualElement;z&&z.setActive("whileDrag",!0)},l=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:v,dragDirectionLock:T,onDirectionLock:N,onDrag:z}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:_}=p;if(T&&this.currentDirection===null){this.currentDirection=u3(_),this.currentDirection!==null&&N&&N(this.currentDirection);return}this.updateAxis("x",p.point,_),this.updateAxis("y",p.point,_),this.visualElement.render(),z&&z(m,p)},u=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Zt(m=>{var p;return this.getAnimationState(m)==="paused"&&((p=this.getAxisMotionValue(m).animation)==null?void 0:p.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new U_(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:B_(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&De.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Cl(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=n3(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&cs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=r3(r.layoutBox,e):this.constraints=!1,this.elastic=a3(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zt(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=o3(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!cs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=dR(r,i.root,this.visualElement.getTransformPagePoint());let o=i3(i.layout.layoutBox,s);if(n){const l=n(lR(o));this.hasMutatedConstraints=!!l,l&&(o=N_(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Zt(h=>{if(!Cl(h,n,this.currentDirection))return;let m=u&&u[h]||{};o&&(m={min:0,max:0});const p=i?200:1e6,v=i?40:1e7,T={type:"inertia",velocity:r?e[h]:0,bounceStiffness:p,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...m};return this.startAxisValueAnimation(h,T)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Af(this.visualElement,e),r.start(Jp(e,r,0,n,this.visualElement,!1))}stopAnimation(){Zt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Zt(n=>{const{drag:r}=this.getProps();if(!Cl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-Le(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!cs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Zt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=s3({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Zt(o=>{if(!Cl(o,e,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(Le(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;l3.set(this.visualElement,this);const e=this.visualElement.current,n=Qo(e,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();cs(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),De.read(r);const o=Ca(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Zt(h=>{const m=this.getAxisMotionValue(h);m&&(this.originPoint[h]+=u[h].translate,m.set(m.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Rf,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Cl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function u3(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class d3 extends ni{constructor(e){super(e),this.removeGroupControls=ln,this.removeListeners=ln,this.controls=new c3(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ln}unmount(){this.removeGroupControls(),this.removeListeners()}}const yv=t=>(e,n)=>{t&&De.postRender(()=>t(e,n))};class h3 extends ni{constructor(){super(...arguments),this.removePointerDownListener=ln}onPointerDown(e){this.session=new U_(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:B_(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:yv(e),onStart:yv(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&De.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Qo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Hd=!1;class f3 extends P.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Hd&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Xl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Hd=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||De.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Up.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Hd=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function q_(t){const[e,n]=h_(),r=P.useContext(bp);return a.jsx(f3,{...t,layoutGroup:r,switchLayoutGroup:P.useContext(E_),isPresent:e,safeToRemove:n})}function m3(t,e,n){const r=gt(t)?t:Ri(t);return r.start(Jp("",r,e,n)),r.animation}const p3=(t,e)=>t.depth-e.depth;class g3{constructor(){this.children=[],this.isDirty=!1}add(e){Ep(this.children,e),this.isDirty=!0}remove(e){Tp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(p3),this.isDirty=!1,this.children.forEach(e)}}function x3(t,e){const n=Ft.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(ur(r),t(s-e))};return De.setup(r,!0),()=>ur(r)}const W_=["TopLeft","TopRight","BottomLeft","BottomRight"],y3=W_.length,vv=t=>typeof t=="string"?parseFloat(t):t,wv=t=>typeof t=="number"||de.test(t);function v3(t,e,n,r,i,s){i?(t.opacity=Le(0,n.opacity??1,w3(r)),t.opacityExit=Le(e.opacity??1,0,b3(r))):s&&(t.opacity=Le(e.opacity??1,n.opacity??1,r));for(let o=0;o<y3;o++){const l=`border${W_[o]}Radius`;let u=bv(e,l),d=bv(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||wv(u)===wv(d)?(t[l]=Math.max(Le(vv(u),vv(d),r),0),(Fn.test(d)||Fn.test(u))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=Le(e.rotate||0,n.rotate||0,r))}function bv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const w3=H_(0,.5,I2),b3=H_(.5,.95,ln);function H_(t,e,n){return r=>r<t?0:r>e?1:n(_a(t,e,r))}function kv(t,e){t.min=e.min,t.max=e.max}function mn(t,e){kv(t.x,e.x),kv(t.y,e.y)}function _v(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ev(t,e,n,r,i){return t-=e,t=Uc(t,1/n,r),i!==void 0&&(t=Uc(t,1/i,r)),t}function k3(t,e=0,n=1,r=.5,i,s=t,o=t){if(Fn.test(e)&&(e=parseFloat(e),e=Le(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Le(s.min,s.max,r);t===s&&(l-=e),t.min=Ev(t.min,e,n,l,i),t.max=Ev(t.max,e,n,l,i)}function Tv(t,e,[n,r,i],s,o){k3(t,e[n],e[r],e[i],e.scale,s,o)}const _3=["x","scaleX","originX"],E3=["y","scaleY","originY"];function Nv(t,e,n,r){Tv(t.x,e,_3,n?n.x:void 0,r?r.x:void 0),Tv(t.y,e,E3,n?n.y:void 0,r?r.y:void 0)}function Cv(t){return t.translate===0&&t.scale===1}function K_(t){return Cv(t.x)&&Cv(t.y)}function Sv(t,e){return t.min===e.min&&t.max===e.max}function T3(t,e){return Sv(t.x,e.x)&&Sv(t.y,e.y)}function jv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function G_(t,e){return jv(t.x,e.x)&&jv(t.y,e.y)}function Iv(t){return At(t.x)/At(t.y)}function zv(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class N3{constructor(){this.members=[]}add(e){Ep(this.members,e),e.scheduleRender()}remove(e){if(Tp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function C3(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:m,rotateY:p,skewX:v,skewY:T}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),m&&(r+=`rotateX(${m}deg) `),p&&(r+=`rotateY(${p}deg) `),v&&(r+=`skewX(${v}deg) `),T&&(r+=`skewY(${T}deg) `)}const l=t.x.scale*e.x,u=t.y.scale*e.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const Kd=["","X","Y","Z"],S3=1e3;let j3=0;function Gd(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Q_(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=R_(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",De,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Q_(r)}function Y_({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=j3++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(A3),this.nodes.forEach(D3),this.nodes.forEach(M3),this.nodes.forEach(P3)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new g3)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Sp),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=d_(o)&&!wP(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),t){let h,m=0;const p=()=>this.root.updateBlockedByResize=!1;De.read(()=>{m=window.innerWidth}),t(o,()=>{const v=window.innerWidth;v!==m&&(m=v,this.root.updateBlockedByResize=!0,h&&h(),h=x3(p,250),Xl.hasAnimatedSinceResize&&(Xl.hasAnimatedSinceResize=!1,this.nodes.forEach(Rv)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||d.getDefaultTransition()||U3,{onLayoutAnimationStart:N,onLayoutAnimationComplete:z}=d.getProps(),_=!this.targetLayout||!G_(this.targetLayout,v),y=!m&&p;if(this.options.layoutRoot||this.resumeFrom||y||m&&(_||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...Fp(T,"layout"),onPlay:N,onComplete:z};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(h,y)}else m||Rv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ur(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(L3),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Q_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const m=this.path[h];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Av);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Pv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(V3),this.nodes.forEach(I3),this.nodes.forEach(z3)):this.nodes.forEach(Pv),this.clearAllSnapshots();const l=Ft.now();ft.delta=lr(0,1e3/60,l-ft.timestamp),ft.timestamp=l,ft.isProcessing=!0,Dd.update.process(ft),Dd.preRender.process(ft),Dd.render.process(ft),ft.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Up.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(R3),this.sharedNodes.forEach(O3)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,De.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){De.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!At(this.snapshot.measuredBox.x)&&!At(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=it(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!K_(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||hi(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),$3(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return it();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(q3))){const{scroll:h}=this.root;h&&(us(l.x,h.offset.x),us(l.y,h.offset.y))}return l}removeElementScroll(o){var u;const l=it();if(mn(l,o),(u=this.scroll)!=null&&u.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:m,options:p}=h;h!==this.root&&m&&p.layoutScroll&&(m.wasRoot&&mn(l,o),us(l.x,m.offset.x),us(l.y,m.offset.y))}return l}applyTransform(o,l=!1){const u=it();mn(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&ds(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),hi(h.latestValues)&&ds(u,h.latestValues)}return hi(this.latestValues)&&ds(u,this.latestValues),u}removeTransform(o){const l=it();mn(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!hi(d.latestValues))continue;Sf(d.latestValues)&&d.updateSnapshot();const h=it(),m=d.measurePageBox();mn(h,m),Nv(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return hi(this.latestValues)&&Nv(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ft.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!this.layout||!(h||m))return;this.resolvedRelativeTargetAt=ft.timestamp;const p=this.getClosestProjectingParent();p&&this.linkedParentVersion!==p.layoutVersion&&!p.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(p&&p.layout?this.createRelativeTarget(p,this.layout.layoutBox,p.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=it(),this.targetWithTransforms=it()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),JR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):mn(this.target,this.layout.layoutBox),S_(this.target,this.targetDelta)):mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?this.createRelativeTarget(p,this.target,p.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sf(this.parent.latestValues)||C_(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,u){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=it(),this.relativeTargetOrigin=it(),$c(this.relativeTargetOrigin,l,u),mn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var T;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===ft.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;mn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;uR(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=it());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(_v(this.prevProjectionDelta.x,this.projectionDelta.x),_v(this.prevProjectionDelta.y,this.projectionDelta.y)),Yo(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!zv(this.projectionDelta.x,this.prevProjectionDelta.x)||!zv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const u=this.getStack();u&&u.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=hs(),this.projectionDelta=hs(),this.projectionDeltaWithTransform=hs()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},m=hs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=it(),v=u?u.source:void 0,T=this.layout?this.layout.source:void 0,N=v!==T,z=this.getStack(),_=!z||z.members.length<=1,y=!!(N&&!_&&this.options.crossfade===!0&&!this.path.some(B3));this.animationProgress=0;let w;this.mixTargetDelta=I=>{const V=I/1e3;Vv(m.x,o.x,V),Vv(m.y,o.y,V),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&($c(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),F3(this.relativeTarget,this.relativeTargetOrigin,p,V),w&&T3(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=it()),mn(w,this.relativeTarget)),N&&(this.animationValues=h,v3(h,d,this.latestValues,V,y,_)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,u,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(u=this.resumingFrom)==null?void 0:u.currentAnimation)==null||d.stop(),this.pendingAnimation&&(ur(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=De.update(()=>{Xl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ri(0)),this.currentAnimation=m3(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(S3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&X_(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||it();const m=At(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+m;const p=At(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+p}mn(l,u),ds(l,h),Yo(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new N3),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&Gd("z",o,d,this.animationValues);for(let h=0;h<Kd.length;h++)Gd(`rotate${Kd[h]}`,o,d,this.animationValues),Gd(`skew${Kd[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Yl(l==null?void 0:l.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Yl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!hi(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let m=C3(this.projectionDeltaWithTransform,this.treeScale,h);u&&(m=u(h,m)),o.transform=m;const{x:p,y:v}=this.projectionDelta;o.transformOrigin=`${p.origin*100}% ${v.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const T in Cf){if(h[T]===void 0)continue;const{correct:N,applyTo:z,isCSSVariable:_}=Cf[T],y=m==="none"?h[T]:N(h[T],d);if(z){const w=z.length;for(let I=0;I<w;I++)o[z[I]]=y}else _?this.options.visualElement.renderState.vars[T]=y:o[T]=y}this.options.layoutId&&(o.pointerEvents=d===this?Yl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Av),this.root.sharedNodes.clear()}}}function I3(t){t.updateLayout()}function z3(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Zt(m=>{const p=o?e.measuredBox[m]:e.layoutBox[m],v=At(p);p.min=r[m].min,p.max=p.min+v}):X_(s,e.layoutBox,r)&&Zt(m=>{const p=o?e.measuredBox[m]:e.layoutBox[m],v=At(r[m]);p.max=p.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[m].max=t.relativeTarget[m].min+v)});const l=hs();Yo(l,r,e.layoutBox);const u=hs();o?Yo(u,t.applyTransform(i,!0),e.measuredBox):Yo(u,r,e.layoutBox);const d=!K_(l);let h=!1;if(!t.resumeFrom){const m=t.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:p,layout:v}=m;if(p&&v){const T=it();$c(T,e.layoutBox,p.layoutBox);const N=it();$c(N,r,v.layoutBox),G_(T,N)||(h=!0),m.options.layoutRoot&&(t.relativeTarget=N,t.relativeTargetOrigin=T,t.relativeParent=m)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:u,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function A3(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function P3(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function R3(t){t.clearSnapshot()}function Av(t){t.clearMeasurements()}function Pv(t){t.isLayoutDirty=!1}function V3(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Rv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function D3(t){t.resolveTargetDelta()}function M3(t){t.calcProjection()}function L3(t){t.resetSkewAndRotation()}function O3(t){t.removeLeadSnapshot()}function Vv(t,e,n){t.translate=Le(e.translate,0,n),t.scale=Le(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Dv(t,e,n,r){t.min=Le(e.min,n.min,r),t.max=Le(e.max,n.max,r)}function F3(t,e,n,r){Dv(t.x,e.x,n.x,r),Dv(t.y,e.y,n.y,r)}function B3(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const U3={duration:.45,ease:[.4,0,.1,1]},Mv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Lv=Mv("applewebkit/")&&!Mv("chrome/")?Math.round:ln;function Ov(t){t.min=Lv(t.min),t.max=Lv(t.max)}function $3(t){Ov(t.x),Ov(t.y)}function X_(t,e,n){return t==="position"||t==="preserve-aspect"&&!XR(Iv(e),Iv(n),.2)}function q3(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const W3=Y_({attachResizeListener:(t,e)=>Ca(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qd={current:void 0},J_=Y_({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Qd.current){const t=new W3({});t.mount(window),t.setOptions({layoutScroll:!0}),Qd.current=t}return Qd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),H3={pan:{Feature:h3},drag:{Feature:d3,ProjectionNode:J_,MeasureLayout:q_}};function Fv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&De.postRender(()=>s(e,$a(e)))}class K3 extends ni{mount(){const{current:e}=this.node;e&&(this.unmount=pP(e,(n,r)=>(Fv(this.node,r,"Start"),i=>Fv(this.node,i,"End"))))}unmount(){}}class G3 extends ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fa(Ca(this.node.current,"focus",()=>this.onFocus()),Ca(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Bv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&De.postRender(()=>s(e,$a(e)))}class Q3 extends ni{mount(){const{current:e}=this.node;e&&(this.unmount=vP(e,(n,r)=>(Bv(this.node,r,"Start"),(i,{success:s})=>Bv(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vf=new WeakMap,Yd=new WeakMap,Y3=t=>{const e=Vf.get(t.target);e&&e(t)},X3=t=>{t.forEach(Y3)};function J3({root:t,...e}){const n=t||document;Yd.has(n)||Yd.set(n,{});const r=Yd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(X3,{root:t,...e})),r[i]}function Z3(t,e,n){const r=J3(e);return Vf.set(t,n),r.observe(t),()=>{Vf.delete(t),r.unobserve(t)}}const eV={some:0,all:1};class tV extends ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:eV[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:m}=this.node.getProps(),p=d?h:m;p&&p(u)};return Z3(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(nV(e,n))&&this.startObserver()}unmount(){}}function nV({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const rV={inView:{Feature:tV},tap:{Feature:Q3},focus:{Feature:G3},hover:{Feature:K3}},iV={layout:{ProjectionNode:J_,MeasureLayout:q_}},sV={...WR,...rV,...H3,...iV},Te=aR(sV,wR);function qc(t){const e=ti(()=>Ri(t)),{isStatic:n}=P.useContext(Eu);if(n){const[,r]=P.useState(t);P.useEffect(()=>e.on("change",r),[])}return e}function Z_(t,e){const n=qc(e()),r=()=>n.set(e());return r(),_p(()=>{const i=()=>De.preRender(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),ur(r)}}),n}function oV(t){Go.current=[],t();const e=Z_(Go.current,t);return Go.current=void 0,e}function aV(t,e,n,r){if(typeof t=="function")return oV(t);const i=typeof e=="function"?e:bP(e,n,r);return Array.isArray(t)?Uv(t,i):Uv([t],([s])=>i(s))}function Uv(t,e){const n=ti(()=>[]);return Z_(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class lV{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const cV=()=>new lV;function Zp(){return ti(cV)}const eE=P.createContext(null);function uV(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const s=r>0?1:-1,o=t[i+s];if(!o)return t;const l=t[i],u=o.layout,d=Le(u.min,u.max,.5);return s===1&&l.layout.max+n>d||s===-1&&l.layout.min+n<d?Cz(t,i,i+s):t}function dV({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},o){const l=ti(()=>Te[e]),u=[],d=P.useRef(!1),h={axis:n,registerItem:(m,p)=>{const v=u.findIndex(T=>m===T.value);v!==-1?u[v].layout=p[n]:u.push({value:m,layout:p[n]}),u.sort(fV)},updateOrder:(m,p,v)=>{if(d.current)return;const T=uV(u,m,p,v);u!==T&&(d.current=!0,r(T.map(hV).filter(N=>i.indexOf(N)!==-1)))}};return P.useEffect(()=>{d.current=!1}),a.jsx(l,{...s,ref:o,ignoreStrict:!0,children:a.jsx(eE.Provider,{value:h,children:t})})}const Su=P.forwardRef(dV);function hV(t){return t.value}function fV(t,e){return t.layout.min-e.layout.min}function $v(t,e=0){return gt(t)?t:qc(e)}function mV({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...o},l){const u=ti(()=>Te[r]),d=P.useContext(eE),h={x:$v(e.x),y:$v(e.y)},m=aV([h.x,h.y],([N,z])=>N||z?1:"unset"),{axis:p,registerItem:v,updateOrder:T}=d;return a.jsx(u,{drag:p,...o,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:m},layout:s,onDrag:(N,z)=>{const{velocity:_}=z;_[p]&&T(n,h[p].get(),_[p]),i&&i(N,z)},onLayoutMeasure:N=>v(n,N),ref:l,ignoreStrict:!0,children:t})}const ju=P.forwardRef(mV),pV=10*1024*1024,gV=15e3,xV=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>pV){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const o=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},gV),l=new Image;l.onload=()=>{clearTimeout(o);try{const u=document.createElement("canvas");let d=l.width,h=l.height;d>e&&(h=e/d*h,d=e),u.width=d,u.height=h;const m=u.getContext("2d");if(!m){i(new Error("Falha ao criar contexto de imagem."));return}m.drawImage(l,0,0,d,h);const p=u.toDataURL("image/jpeg",n);if(!p||p==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(p)}catch(u){i(new Error("Erro ao processar imagem: "+u.message))}},l.onerror=()=>{clearTimeout(o),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t}),Xe={Camera:()=>a.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})},yV=({src:t,onClose:e,layoutId:n})=>kc.createPortal(a.jsxs(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[a.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:a.jsx(Xe.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),a.jsx(Te.img,{layoutId:n,src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:r=>r.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body),vV=({id:t,children:e})=>{const n=Zp();return a.jsx(ju,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},wV=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,s]=P.useState(""),[o,l]=P.useState(null),[u,d]=P.useState(""),[h,m]=P.useState(null),[p,v]=P.useState(null),T=["#E63946","#F4A261","#E9C46A","#2A9D8F","#457B9D","#264653","#6D597A","#B5838D","#7F9183","#3D405B"],N=I=>typeof I=="string"?{name:I,color:"#007AFF"}:{name:I.name||"Sem nome",color:I.color||"#007AFF"},z=()=>{const I=i.trim();!I||t.some(L=>zt(L)===I)||(n([...t,{name:I,color:"#007AFF"}]),s(""))},_=I=>{const V=u.trim(),L=zt(I);if(!V||V===L){l(null);return}if(t.some(x=>zt(x)===V)){l(null);return}r(L,V),n(t.map(x=>{const k=N(x);return k.name===L?{...k,name:V}:k})),l(null)},y=(I,V)=>{const L=zt(I);n(t.map(b=>{const x=N(b);return x.name===L?{...x,color:V}:x})),v(null)},w=I=>{const V=zt(I);n(t.filter(L=>zt(L)!==V)),r(V,"Outros"),m(null)};return a.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[a.jsx(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/60 backdrop-blur-xl",onClick:e}),a.jsxs(Te.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white dark:bg-zinc-900 w-full max-w-md rounded-2xl shadow-2xl flex flex-col max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"px-6 py-5 border-b border-zinc-100 dark:border-zinc-800 flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-semibold text-zinc-900 dark:text-white",children:"Categorias"}),a.jsx("p",{className:"text-xs text-zinc-500 dark:text-zinc-400 mt-0.5",children:"Organize sua biblioteca"})]}),a.jsx("button",{onClick:e,className:"w-8 h-8 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:a.jsx(Xe.Close,{})})]}),a.jsx("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-zinc-800",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{value:i,onChange:I=>s(I.target.value),placeholder:"Nova categoria...",className:"flex-1 bg-zinc-100 dark:bg-zinc-800 px-4 py-2.5 rounded-lg text-sm outline-none placeholder:text-zinc-400",onKeyDown:I=>I.key==="Enter"&&z()}),a.jsx("button",{onClick:z,className:"px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-lg text-sm font-medium hover:opacity-90 transition-opacity",children:"Adicionar"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:t.map((I,V)=>{const{name:L,color:b}=N(I),x=L+V;return a.jsxs("div",{className:"group flex items-center gap-3 px-6 py-3 border-b border-zinc-50 dark:border-zinc-800/50 hover:bg-zinc-50 dark:hover:bg-zinc-800/30 transition-colors",children:[a.jsx("button",{onClick:()=>v(p===x?null:x),className:"w-4 h-4 rounded-full shrink-0 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-zinc-900 ring-transparent hover:ring-zinc-300 transition-all",style:{backgroundColor:b}}),p===x&&a.jsx("div",{className:"absolute left-16 mt-20 z-50 bg-white dark:bg-zinc-800 rounded-xl shadow-xl p-3 grid grid-cols-5 gap-2 border border-zinc-200 dark:border-zinc-700",children:T.map(k=>a.jsx("button",{onClick:()=>y(I,k),className:`w-7 h-7 rounded-full transition-transform hover:scale-110 ${b===k?"ring-2 ring-offset-2 ring-zinc-400":""}`,style:{backgroundColor:k}},k))}),a.jsx("div",{className:"flex-1 min-w-0",children:o===x?a.jsx("input",{autoFocus:!0,value:u,onChange:k=>d(k.target.value),onBlur:()=>_(I),onKeyDown:k=>{k.key==="Enter"&&_(I),k.key==="Escape"&&l(null)},className:"w-full bg-transparent outline-none text-sm font-medium text-zinc-900 dark:text-white"}):a.jsx("span",{onClick:()=>{l(x),d(L)},className:"text-sm font-medium text-zinc-700 dark:text-zinc-300 cursor-text truncate block",children:L})}),a.jsx("button",{onClick:()=>m(I),className:"opacity-0 group-hover:opacity-100 text-zinc-400 hover:text-rose-500 transition-all",children:a.jsx(Xe.Trash,{})})]},x)})}),a.jsx(wn,{children:h&&a.jsx(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-xl z-50 flex items-center justify-center p-8",children:a.jsxs("div",{className:"text-center max-w-xs",children:[a.jsx("div",{className:"w-14 h-14 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4",children:a.jsx(Xe.Trash,{})}),a.jsx("h4",{className:"text-lg font-semibold text-zinc-900 dark:text-white mb-2",children:"Remover categoria?"}),a.jsxs("p",{className:"text-sm text-zinc-500 mb-6",children:['"',zt(h),'" ser removida e as receitas sero movidas para "Outros".']}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>m(null),className:"flex-1 py-2.5 text-sm font-medium text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>w(h),className:"flex-1 py-2.5 bg-rose-500 text-white rounded-lg text-sm font-medium hover:bg-rose-600 transition-colors",children:"Remover"})]})]})})})]})]})},bV=Jn.memo(({item:t,onUpdate:e,onDelete:n,onNext:r})=>{const i=Zp();return a.jsx(ju,{value:t,dragListener:!1,dragControls:i,className:"group relative mb-2 transition-all duration-300 ease-out",children:a.jsxs("div",{className:"flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30 transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)]",children:[a.jsx("div",{className:"touch-none cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:s=>i.start(s),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),a.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,autoFocus:!0,onChange:s=>e({...t,name:s.target.value}),onKeyDown:s=>{var o;s.key==="Enter"&&(s.preventDefault(),(o=document.getElementById(`ing-qty-${t.id}`))==null||o.focus())},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}),a.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[a.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:a.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:s=>e({...t,quantity:s.target.value}),onKeyDown:s=>{s.key==="Enter"&&(s.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),a.jsx("select",{value:t.unit,onChange:s=>e({...t,unit:s.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(s=>a.jsx("option",{value:s,children:s},s))}),a.jsx("button",{onClick:n,className:"p-1.5 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),kV=Jn.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i})=>{const s=Zp();return a.jsx(ju,{value:t,dragListener:!1,dragControls:s,className:"group relative mb-2 transition-all duration-300 ease-out",children:a.jsxs("div",{className:"flex gap-3 py-3 px-1 rounded-xl hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30 transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)]",children:[a.jsx("div",{className:"touch-none cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:o=>s.start(o),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),a.jsx("span",{className:"text-[1px] font-black text-zinc-300 dark:text-zinc-700 pt-1 select-none font-mono tabular-nums w-5",children:String(e+1).padStart(2,"0")}),a.jsx("textarea",{autoFocus:!0,value:t.text,onChange:o=>n({...t,text:o.target.value}),onKeyDown:o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:o=>{o.target.style.height="auto",o.target.style.height=o.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}),a.jsx("button",{onClick:r,className:"p-1.5 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),zt=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",qv=(t,e)=>{const n=t.find(r=>zt(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function _V(){const[t,e]=P.useState([]),[n,r]=P.useState(["Tradicionais","Especiais","Veganas","Doces"]),[i,s]=P.useState(null),[o,l]=P.useState("Todas"),[u,d]=P.useState(!0),[h,m]=P.useState(null),[p,v]=P.useState(null),[T,N]=P.useState(null),[z,_]=P.useState(!1),[y,w]=P.useState(!1),[I,V]=P.useState(!1),[L,b]=P.useState(!1),x=P.useRef(null),k=P.useRef({}),C=P.useRef({});P.useEffect(()=>{let Y=!0;return(async()=>{console.log("[Recipes] Starting load");try{const $=await Ie.getRecipesV3();if(console.log("[Recipes] Got recipes:",$),!Y)return;Array.isArray($)&&$.length>0?e($.map(K=>{let ee=Array.isArray(K.sections)?K.sections:[];return ee.length===0&&(Array.isArray(K.ingredientSections)||Array.isArray(K.instructionSections))&&(ee=[...Array.isArray(K.ingredientSections)?K.ingredientSections.map(M=>({...M,type:"ingredients"})):[],...Array.isArray(K.instructionSections)?K.instructionSections.map(M=>({...M,type:"instructions"})):[]]),ee.length>0&&(ee=ee.map(M=>({...M,items:Array.isArray(M.items)?M.items.filter(U=>{var re,D,W;return M.type==="ingredients"?((re=U.name)==null?void 0:re.trim())||((D=U.quantity)==null?void 0:D.trim()):(W=U.text)==null?void 0:W.trim()}):[]}))),{id:String(K.id),name:K.name||"Sem nome",category:K.category||"Outros",prepTime:K.prepTime??0,cookTime:K.cookTime??0,temperature:K.temperature??180,image:K.image||null,sections:ee,createdAt:K.createdAt||new Date().toISOString(),updatedAt:K.updatedAt||new Date().toISOString()}})):e([])}catch($){console.error("[Recipes] Load error:",$),Y&&e([])}try{const $=await Ie.getRecipeCategories();Y&&$&&Array.isArray($)&&r($)}catch{console.log("[Recipes] Categories load failed, using defaults")}console.log("[Recipes] Load complete"),Y&&(d(!1),m(null))})(),()=>{Y=!1}},[]),P.useEffect(()=>{if(u)return;const Y=setTimeout(()=>{Ie.syncRecipeCategories(n)},1e3);return()=>clearTimeout(Y)},[n,u]);const j=(Y,ne)=>{const $=String(Y);w(!0),V(!1),e(K=>K.map(ee=>String(ee.id)===$?{...ee,...ne,updatedAt:new Date().toISOString()}:ee)),k.current[$]={...k.current[$]||{},...ne,updatedAt:new Date().toISOString()},C.current[$]&&clearTimeout(C.current[$]),C.current[$]=setTimeout(async()=>{const K=k.current[$];if(!K){w(!1);return}delete k.current[$],delete C.current[$];try{await Ie.syncRecipeV3($,K,!0)||V(!0)}catch(ee){console.error("Sync error:",ee),V(!0)}finally{Object.keys(k.current).length===0&&w(!1)}},1200)},A=async Y=>{const ne=Y.target.files[0];if(ne){if(!i){alert("Erro: Nenhuma receita selecionada.");return}b(!0);try{const $=new FileReader;$.onload=async K=>{try{const ee=await xV(K.target.result);j(i,{image:ee})}catch(ee){console.error("Compression error:",ee),alert("Falha ao processar imagem. Tente uma foto menor.")}finally{b(!1)}},$.onerror=()=>{alert("Erro ao ler o arquivo."),b(!1)},$.readAsDataURL(ne)}catch($){console.error("Upload error:",$),alert("Erro inesperado ao carregar imagem."),b(!1)}}},S=async Y=>{const ne=String(Y);console.log("[handleDeleteRecipe] Starting deletion for ID:",ne),N(null),e($=>(console.log("[handleDeleteRecipe] Optimistically removing recipe from list"),$.filter(K=>String(K.id)!==ne))),String(i)===ne&&(console.log("[handleDeleteRecipe] Closing detail view for deleted recipe"),s(null));try{if(console.log("[handleDeleteRecipe] Calling Firebase deleteRecipeV3..."),await Ie.deleteRecipeV3(ne))console.log("[handleDeleteRecipe] Firebase deletion successful");else throw new Error("Firebase returned false")}catch($){console.error("[handleDeleteRecipe] Failed to delete recipe:",$),alert("Erro ao excluir receita: "+$.message)}},fe=P.useMemo(()=>t.filter(Y=>o==="Todas"||Y.category===o),[t,o]),ae=P.useMemo(()=>t.find(Y=>String(Y.id)===String(i)),[t,i]);return u?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):h?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:a.jsxs("div",{className:"text-center max-w-sm",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:h}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx(wn,{children:!i&&a.jsxs(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 mb-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),a.jsxs("div",{className:`mt-3 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${I?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":y?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${I?"bg-rose-500":y?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:I?"Erro de Sync":y?"Sincronizando":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),a.jsxs("button",{onClick:()=>{const Y=String(Date.now()),ne={id:Y,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,servings:2,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e([ne,...t]),s(Y),Ie.syncRecipeV3(Y,ne)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx(Xe.Plus,{}),"Criar Nova Receita"]})]}),a.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 -mx-6 px-6 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:a.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...n].map(Y=>a.jsx("button",{onClick:()=>l(zt(Y)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${o===zt(Y)?"bg-zinc-900 text-white dark:bg-white dark:text-black shadow-lg shadow-zinc-900/10":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:zt(Y)},zt(Y))),a.jsx("button",{onClick:()=>_(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8 px-2",children:[fe.map(Y=>a.jsxs(Te.div,{layoutId:`card-${Y.id}`,onClick:()=>s(Y.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer shadow-xl hover:shadow-2xl hover:-translate-y-1 overflow-hidden",children:[a.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[Y.image?a.jsx(Te.img,{layoutId:`img-${Y.id}`,src:Y.image,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):a.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),a.jsx("div",{className:"absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/5 via-transparent to-transparent animate-[spin_20s_linear_infinite] opacity-60"}),a.jsx("div",{className:"absolute bottom-[-50%] right-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/5 via-transparent to-transparent animate-[spin_25s_linear_infinite_reverse] opacity-60"}),a.jsx(Te.div,{animate:{opacity:[.2,.5,.2]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent"}),a.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 group-hover:opacity-80 transition-opacity",children:a.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg group-hover:scale-110 transition-transform duration-500",children:a.jsx(Xe.Camera,{})})})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),a.jsx("button",{onClick:ne=>{ne.stopPropagation(),console.log("Requesting delete for:",Y.id),N({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${Y.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{console.log("Confirming delete for:",Y.id),S(Y.id)},onCancel:()=>N(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:a.jsx(Xe.Trash,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"px-2 pb-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${qv(n,Y.category)}15`,color:qv(n,Y.category)},children:Y.category}),a.jsxs("div",{className:"flex items-center gap-1.5 text-xs font-bold text-zinc-400",children:[a.jsx(Xe.Clock,{}),Y.prepTime+Y.cookTime,"m"]})]}),a.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors mb-1",children:Y.name}),a.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(Y.ingredientSections||[]).reduce((ne,$)=>{var K;return ne+(((K=$.items)==null?void 0:K.length)||0)},0)," ingredientes"]})]})]},Y.id)),fe.length===0&&a.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),a.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:a.jsx(Xe.Book,{})})]}),a.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),a.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",a.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:o}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&kc.createPortal(a.jsx(wn,{children:i&&ae&&a.jsx(Te.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:x,children:ae?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-6 h-16 transition-all",children:[a.jsx("div",{className:"w-20",children:a.jsx("button",{onClick:()=>{const Y=(ae.sections||[]).map(ne=>({...ne,items:ne.items.filter($=>{var K,ee,M;return ne.type==="ingredients"?((K=$.name)==null?void 0:K.trim())||((ee=$.quantity)==null?void 0:ee.trim()):(M=$.text)==null?void 0:M.trim()})}));j(i,{sections:Y}),s(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:a.jsx(Xe.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),a.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${I?"text-rose-500":y?"text-zinc-400":"text-zinc-300"}`,children:I?"Falha":y?"Sincronizando...":"Salvo"}),a.jsx("div",{className:"w-16 flex justify-end",children:a.jsx("button",{onClick:()=>{N({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{S(i)},onCancel:()=>N(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:a.jsx(Xe.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})})]}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[a.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[a.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:ae.image?a.jsxs(a.Fragment,{children:[a.jsx(Te.img,{layoutId:`img-${i}`,src:ae.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>v(ae.image)}),a.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:A,disabled:L}),L?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(Xe.Camera,{className:"w-5 h-5"})]})]}):a.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:A}),a.jsx(Xe.Camera,{}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),a.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(Y=>a.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:Y.label}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("input",{value:ae[Y.val],onChange:ne=>j(i,{[Y.val]:ne.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),Y.unit&&a.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:Y.unit})]})]},Y.label))})]}),a.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[a.jsxs("div",{className:"space-y-4 md:space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("select",{value:ae.category,onChange:Y=>j(i,{category:Y.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:n.map(Y=>a.jsx("option",{value:zt(Y),children:zt(Y)},zt(Y)))})}),a.jsx("textarea",{value:ae.name,onChange:Y=>j(i,{name:Y.target.value}),className:"w-full bg-transparent text-4xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:Y=>{Y.target.style.height="auto",Y.target.style.height=Y.target.scrollHeight+"px"}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[a.jsxs("button",{onClick:()=>j(i,{sections:[...ae.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:"py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 hover:bg-white dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-2 group",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),a.jsxs("button",{onClick:()=>j(i,{sections:[...ae.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:"py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 hover:bg-white dark:hover:bg-zinc-800 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm hover:shadow-md transition-all flex items-center justify-center gap-2 group",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),a.jsx(Su,{axis:"y",values:ae.sections||[],onReorder:Y=>j(i,{sections:Y}),className:"space-y-6",children:(ae.sections||[]).map(Y=>a.jsx(vV,{id:Y,children:ne=>a.jsx(EV,{section:Y,onUpdate:$=>j(i,{sections:ae.sections.map(K=>K.id===Y.id?$:K)}),onDelete:()=>j(i,{sections:ae.sections.filter($=>$.id!==Y.id)}),dragControls:ne})},Y.id))}),a.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:a.jsx("button",{onClick:()=>N({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{S(i)},onCancel:()=>N(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),z&&a.jsx(wV,{categories:n,onClose:()=>_(!1),onUpdate:r,onRenameCategory:(Y,ne)=>{t.filter($=>$.category===Y).forEach($=>{j($.id,{category:ne})})}}),a.jsx(wn,{children:p&&a.jsx(yV,{src:p,onClose:()=>v(null),layoutId:`img-${i}`})}),typeof document<"u"&&kc.createPortal(a.jsx(wn,{mode:"wait",children:T&&a.jsxs(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:T.onCancel}),a.jsxs(Te.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${T.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx(Xe.Trash,{})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:T.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:T.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:T.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:T.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${T.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body)]})}function EV({section:t,onUpdate:e,onDelete:n,dragControls:r}){return t.type==="ingredients"?a.jsx(TV,{section:t,onUpdate:e,onDelete:n,dragControls:r}):t.type==="instructions"?a.jsx(NV,{section:t,onUpdate:e,onDelete:n,dragControls:r}):null}function TV({section:t,onUpdate:e,onDelete:n,dragControls:r}){return a.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{onPointerDown:i=>r.start(i),className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100 touch-none",children:a.jsx(Xe.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),a.jsx("input",{value:t.title,onChange:i=>e({...t,title:i.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"})]}),a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(Xe.Trash,{})})]}),a.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:a.jsx(Su,{axis:"y",values:t.items,onReorder:i=>e({...t,items:i}),children:t.items.map(i=>a.jsx(bV,{item:i,onUpdate:s=>e({...t,items:t.items.map(o=>o.id===i.id?s:o)}),onDelete:()=>e({...t,items:t.items.filter(s=>s.id!==i.id)}),onNext:()=>e({...t,items:[...t.items,{id:Date.now(),name:"",quantity:"",unit:"g"}]})},i.id))})}),a.jsxs("button",{onClick:()=>{var o;const i=t.items[t.items.length-1];if(i&&!i.name.trim()&&!i.quantity.trim()){(o=document.getElementById(`ing-name-${i.id}`))==null||o.focus();return}const s={id:Date.now(),name:"",quantity:"",unit:"g"};e({...t,items:[...t.items,s]})},className:"mt-6 w-full py-3 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30",children:[a.jsx(Xe.Plus,{})," Adicionar Ingrediente"]})]})}function NV({section:t,onUpdate:e,onDelete:n,dragControls:r}){return a.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{onPointerDown:i=>r.start(i),className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100 touch-none",children:a.jsx(Xe.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"PR"}),a.jsx("input",{value:t.title,onChange:i=>e({...t,title:i.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-amber-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"TTULO DA SEO"})]}),a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(Xe.Trash,{})})]}),a.jsx(Su,{axis:"y",values:t.items,onReorder:i=>e({...t,items:i}),className:"space-y-3",children:t.items.map((i,s)=>a.jsx(kV,{item:i,index:s,onUpdate:o=>e({...t,items:t.items.map(l=>l.id===i.id?o:l)}),onDelete:()=>e({...t,items:t.items.filter(o=>o.id!==i.id)}),onNext:()=>e({...t,items:[...t.items,{id:Date.now(),text:""}]})},i.id))}),a.jsxs("button",{onClick:()=>{const i=t.items[t.items.length-1];i&&!i.text.trim()||e({...t,items:[...t.items,{id:Date.now(),text:""}]})},className:"mt-6 w-full py-3 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30",children:[a.jsx(Xe.Plus,{})," Adicionar Passo"]})]})}const Wv="padoca_kanban_pro_max",Sl={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},CV=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],Hv={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},e0=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function SV(){const[t,e]=P.useState(()=>{try{const D=localStorage.getItem(Wv);return D?JSON.parse(D):Hv}catch{return Hv}}),[n,r]=P.useState(null),[i,s]=P.useState(!1),[o,l]=P.useState(""),[u,d]=P.useState(0),[h,m]=P.useState(null),[p,v]=P.useState(""),[T,N]=P.useState(null),[z,_]=P.useState(""),[y,w]=P.useState(null),[I,V]=P.useState(!1),[L,b]=P.useState({active:null,target:null,isDragging:!1}),x=qc(0),k=qc(0),C=P.useRef(null),j=4,A=P.useRef(null),S=P.useRef(null),fe=P.useRef({colId:null,index:null}),ae=P.useCallback((D="light")=>{navigator.vibrate&&navigator.vibrate(D==="light"?8:D==="medium"?15:25)},[]),Y=P.useCallback((D,W,X)=>{const R=document.elementsFromPoint(D,W).find(le=>le.hasAttribute("data-column-id"));if(!R)return null;const B=R.getAttribute("data-column-id"),H=R.querySelector("[data-cards-container]");if(!H)return{colId:B,index:0};const J=Array.from(H.querySelectorAll("[data-card-id]")).filter(le=>le.getAttribute("data-card-id")!==X);if(J.length===0)return{colId:B,index:0};for(let le=0;le<J.length;le++){const he=J[le].getBoundingClientRect(),_e=he.top+he.height/2;if(W<_e)return{colId:B,index:le}}return{colId:B,index:J.length}},[]);P.useEffect(()=>{const D=X=>{const F=C.current;if(F&&!L.isDragging){const R=X.clientX-F.startX,B=X.clientY-F.startY;if(Math.sqrt(R*R+B*B)>j){const{card:J,colId:le,rect:he,offsetX:_e,offsetY:dn,cardIndex:qt}=F;x.set(he.left),k.set(he.top),b({active:{id:J.id,sourceColId:le,sourceIndex:qt,data:J,rect:he,offsetX:_e,offsetY:dn},target:{colId:le,index:qt},isDragging:!0}),ae("medium")}return}if(L.isDragging&&L.active){X.preventDefault();const R=X.clientX-L.active.offsetX,B=X.clientY-L.active.offsetY;if(x.set(R),k.set(B),S.current)return;S.current=requestAnimationFrame(()=>{const H=Y(X.clientX,X.clientY,L.active.id);if(S.current=null,H){const J=fe.current;(J.colId!==H.colId||J.index!==H.index)&&(fe.current=H,ae("light"),b(le=>({...le,target:H})))}})}},W=X=>{if(S.current&&(cancelAnimationFrame(S.current),S.current=null),L.isDragging&&L.active){const{active:F,target:R}=L;document.body.style.cursor="";const B=R==null?void 0:R.colId,H=R==null?void 0:R.index;B&&(F.sourceColId!==B||F.sourceIndex!==H)&&(e(le=>{const he=le.columns.map(hn=>({...hn,cards:[...hn.cards]})),_e=he.find(hn=>hn.id===F.sourceColId),dn=he.find(hn=>hn.id===B);if(!_e||!dn)return le;const qt=_e.cards.findIndex(hn=>hn.id===F.id);if(qt===-1)return le;const[Qs]=_e.cards.splice(qt,1);return dn.cards.splice(H,0,Qs),{...le,columns:he}}),ae("medium")),b({active:null,target:null,isDragging:!1}),fe.current={colId:null,index:null}}else if(C.current){const{card:F,colId:R}=C.current;r({...F,columnId:R})}C.current=null};return window.addEventListener("pointermove",D,{passive:!1}),window.addEventListener("pointerup",W),window.addEventListener("pointercancel",W),()=>{window.removeEventListener("pointermove",D),window.removeEventListener("pointerup",W),window.removeEventListener("pointercancel",W),S.current&&cancelAnimationFrame(S.current)}},[L,Y,ae,x,k]);const ne=P.useCallback((D,W,X)=>{var B;if(D.target.closest("button, input, textarea, [data-no-drag]")||D.button&&D.button!==0)return;const F=D.currentTarget,R=F.getBoundingClientRect();C.current={card:W,colId:X,element:F,rect:R,startX:D.clientX,startY:D.clientY,offsetX:D.clientX-R.left,offsetY:D.clientY-R.top,cardIndex:((B=t.columns.find(H=>H.id===X))==null?void 0:B.cards.findIndex(H=>H.id===W.id))??0}},[t.columns]);P.useEffect(()=>{(async()=>{var W;try{const X=await((W=Ie.getKanban)==null?void 0:W.call(Ie));X!=null&&X.columns&&e(X)}catch{}finally{V(!0)}})()},[]),P.useEffect(()=>{if(localStorage.setItem(Wv,JSON.stringify(t)),I){const D=setTimeout(()=>{var W;try{(W=Ie.syncKanban)==null||W.call(Ie,t)}catch{}},2e3);return()=>clearTimeout(D)}},[t,I]);const $=P.useCallback(D=>{if(!p.trim())return;const W={id:`card-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,title:p.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(X=>({...X,columns:X.columns.map(F=>F.id===D?{...F,cards:[...F.cards,W]}:F)})),v(""),m(null),ae("light")},[p,ae]),K=P.useCallback(D=>{e(W=>({...W,columns:W.columns.map(X=>X.id===D.columnId?{...X,cards:X.cards.map(F=>F.id===D.id?D:F)}:X)}))},[]),ee=P.useCallback((D,W)=>{w({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(X=>({...X,columns:X.columns.map(F=>F.id===D?{...F,cards:F.cards.filter(R=>R.id!==W)}:F)})),r(null),w(null),ae("medium")},onCancel:()=>w(null)})},[ae]),M=P.useCallback(()=>{o.trim()&&(e(D=>({...D,columns:[...D.columns,{id:`col-${Date.now()}`,title:o.trim(),cards:[]}]})),l(""),s(!1),ae("light"))},[o,ae]),U=P.useCallback(D=>{if(!z.trim()){N(null);return}e(W=>({...W,columns:W.columns.map(X=>X.id===D?{...X,title:z.trim()}:X)})),N(null)},[z]),re=P.useCallback(D=>{w({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(W=>({...W,columns:W.columns.filter(X=>X.id!==D)})),w(null),ae("medium")},onCancel:()=>w(null)})},[ae]);return a.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[a.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),a.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${I?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${I?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:I?"Cloud Active":"Syncing"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[a.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),a.jsxs("div",{ref:A,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[a.jsx(wn,{mode:"popLayout",children:t.columns.map(D=>a.jsx(jV,{col:D,dragState:L,spring:Sl,zoomLevel:u,renamingColId:T,setRenamingColId:N,renameTitle:z,setRenameTitle:_,renameColumn:U,deleteColumn:re,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:p,setNewCardTitle:v,addCard:$,handleCardPointerDown:ne},D.id))}),i?a.jsxs(Te.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:Sl.enter,className:"flex-shrink-0 w-80 p-6 rounded-[2rem] bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-700 shadow-xl h-min",children:[a.jsx("input",{autoFocus:!0,value:o,onChange:D=>l(D.target.value),onKeyDown:D=>{D.key==="Enter"&&M(),D.key==="Escape"&&(s(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-900 px-4 py-4 rounded-xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-4"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:M,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Criar"}),a.jsx("button",{onClick:()=>{s(!1),l("")},className:"flex-1 bg-zinc-100 dark:bg-zinc-800 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"})]})]}):a.jsx(Te.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>s(!0),className:"flex-shrink-0 w-14 h-14 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-lg flex items-center justify-center text-zinc-400 transition-all",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),a.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:a.jsx(Te.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Sl.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:e0.map((D,W)=>a.jsxs("button",{onClick:()=>{d(W),ae("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${u===W?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[u===W&&a.jsx(Te.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),a.jsx("span",{className:"relative z-10",children:D.label})]},W))})}),a.jsx(zV,{dragState:L,ghostX:x,ghostY:k,spring:Sl}),a.jsx(wn,{children:n&&a.jsx(PV,{card:n,onClose:()=>r(null),onUpdate:K,onDelete:()=>ee(n.columnId,n.id),setConfirmModal:w})}),a.jsx(wn,{children:y&&a.jsx(AV,{...y})})]})}const jV=Jn.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:s,renameTitle:o,setRenameTitle:l,renameColumn:u,deleteColumn:d,addingCardToCol:h,setAddingCardToCol:m,newCardTitle:p,setNewCardTitle:v,addCard:T,handleCardPointerDown:N})=>{var _,y;const z=((_=e.target)==null?void 0:_.colId)===t.id;return a.jsxs(Te.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`
                flex-shrink-0 flex flex-col snap-center
                ${e0[r].width}
                max-h-full rounded-[2rem] md:rounded-[2.5rem]
                bg-white dark:bg-zinc-950
                border border-zinc-200/60 dark:border-white/[0.06]
                shadow-xl shadow-black/[0.03] dark:shadow-black/20
                transition-all duration-300
                ${z?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}
            `,children:[a.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[a.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?a.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:o,onChange:w=>l(w.target.value),onBlur:()=>u(t.id),onKeyDown:w=>{w.key==="Enter"&&u(t.id),w.key==="Escape"&&s(null)}}):a.jsx("h3",{onClick:()=>{s(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),a.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[a.jsx(wn,{mode:"popLayout",children:t.cards.map((w,I)=>a.jsx(IV,{card:w,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:N},w.id))}),a.jsx(wn,{mode:"sync",children:e.isDragging&&z&&e.active&&(()=>{const w=t.cards.filter(I=>I.id!==e.active.id);return e.target.index>=w.length})()&&a.jsx(Te.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((y=e.active.rect)==null?void 0:y.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),h===t.id?a.jsxs(Te.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:n.enter,className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-lg",children:[a.jsx("textarea",{autoFocus:!0,value:p,onChange:w=>v(w.target.value),onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),T(t.id)),w.key==="Escape"&&m(null)},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-3",rows:2}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 text-xs font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>T(t.id),disabled:!p.trim(),className:"px-5 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 text-xs font-bold uppercase tracking-wider rounded-xl shadow-md disabled:opacity-50 hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Adicionar"})]})]}):a.jsx("button",{onClick:()=>{m(t.id),v("")},className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all",children:"+ Carto"})]})]})}),IV=Jn.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:s})=>{var u,d,h,m;const o=((u=n.active)==null?void 0:u.id)===t.id,l=((d=n.target)==null?void 0:d.colId)===e;return n.isDragging&&l&&n.active,a.jsx(Jn.Fragment,{children:!o&&a.jsxs(Te.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:p=>s(p,t,e),className:`
                        relative bg-white dark:bg-zinc-900
                        border border-zinc-200/60 dark:border-white/[0.06]
                        rounded-2xl ${e0[i].cardPadding}
                        shadow-sm hover:shadow-xl dark:shadow-black/10
                        cursor-grab active:cursor-grabbing
                        touch-none select-none
                        hover:border-zinc-300 dark:hover:border-white/10
                        group/card
                    `,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&a.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((p,v)=>a.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:p.color}},v))}),a.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((m=t.checklists)==null?void 0:m.length)>0&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),a.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((p,v)=>p+v.items.filter(T=>T.done).length,0),"/",t.checklists.reduce((p,v)=>p+v.items.length,0)]})]})]})})}),zV=Jn.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return a.jsx(wn,{children:t.isDragging&&t.active&&a.jsx(Te.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),a.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&a.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((s,o)=>a.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:s.color}},o))}),a.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function AV({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return a.jsxs(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[60] flex items-center justify-center p-6",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),a.jsxs(Te.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:t}),a.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed",children:e}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function PV({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var _;const[s,o]=P.useState(t),[l,u]=P.useState(!1),[d,h]=P.useState("");P.useEffect(()=>{n(s)},[s,n]);const m=y=>{var I;const w=(I=s.labels)==null?void 0:I.find(V=>V.id===y.id);o(V=>({...V,labels:w?V.labels.filter(L=>L.id!==y.id):[...V.labels||[],y]}))},p=()=>{d.trim()&&(o(y=>({...y,checklists:[...y.checklists||[],{id:Date.now(),title:d.trim(),items:[]}]})),h(""),u(!1))},v=y=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{o(w=>({...w,checklists:w.checklists.filter(I=>I.id!==y)})),i(null)},onCancel:()=>i(null)})},T=(y,w)=>{o(I=>({...I,checklists:I.checklists.map(V=>V.id===y?{...V,items:V.items.map(L=>L.id===w?{...L,done:!L.done}:L)}:V)}))},N=(y,w)=>{w.trim()&&o(I=>({...I,checklists:I.checklists.map(V=>V.id===y?{...V,items:[...V.items,{id:Date.now(),text:w.trim(),done:!1}]}:V)}))},z=(y,w)=>{o(I=>({...I,checklists:I.checklists.map(V=>V.id===y?{...V,items:V.items.filter(L=>L.id!==w)}:V)}))};return a.jsxs(Te.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center",onClick:e,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-xl"}),a.jsxs(Te.div,{initial:{opacity:0,y:100,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.98},transition:{type:"spring",stiffness:350,damping:30},className:"relative w-full max-w-2xl bg-white dark:bg-zinc-900 rounded-t-[2.5rem] md:rounded-[2.5rem] shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border border-zinc-200/50 dark:border-white/10",onClick:y=>y.stopPropagation(),children:[a.jsxs("div",{className:"shrink-0 p-6 md:p-8 border-b border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"flex gap-2 flex-wrap",children:CV.map(y=>{var w;return a.jsx("button",{onClick:()=>m(y),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(w=s.labels)!=null&&w.find(I=>I.id===y.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:y.color}},y.id)})}),a.jsx("button",{onClick:e,className:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-zinc-400 hover:text-zinc-600 dark:hover:text-white flex items-center justify-center transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("input",{className:"w-full text-2xl md:text-3xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:s.title,onChange:y=>o(w=>({...w,title:y.target.value})),placeholder:"Ttulo do carto"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),a.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:s.description||"",onChange:y=>o(w=>({...w,description:y.target.value}))})]}),(_=s.checklists)==null?void 0:_.map(y=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:y.title}),a.jsx("button",{onClick:()=>v(y.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),a.jsx(Su,{axis:"y",values:y.items,onReorder:w=>{o(I=>({...I,checklists:I.checklists.map(V=>V.id===y.id?{...V,items:w}:V)}))},className:"space-y-2",children:y.items.map(w=>a.jsxs(ju,{value:w,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[a.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),a.jsx("button",{onClick:()=>T(y.id,w.id),className:`w-5 h-5 rounded-lg border-2 flex items-center justify-center transition-all ${w.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:w.done&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsx("span",{className:`flex-1 text-sm ${w.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:w.text}),a.jsx("button",{onClick:()=>z(y.id,w.id),className:"text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},w.id))}),a.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:w=>{w.key==="Enter"&&w.target.value.trim()&&(N(y.id,w.target.value),w.target.value="")}})]},y.id)),l?a.jsxs(Te.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[a.jsx("input",{autoFocus:!0,value:d,onChange:y=>h(y.target.value),onKeyDown:y=>{y.key==="Enter"&&p(),y.key==="Escape"&&u(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:p,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),a.jsx("button",{onClick:()=>u(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):a.jsx("button",{onClick:()=>u(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 transition-colors",children:"+ Nova Checklist"}),a.jsx("div",{className:"pt-6 border-t border-zinc-100 dark:border-white/5",children:a.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20",children:"Excluir Carto"})})]})]})]})}function RV(){const[t,e]=P.useState("pct"),[n,r]=P.useState(()=>localStorage.getItem("padoca_view")||"recipes"),i=s=>{r(s),localStorage.setItem("padoca_view",s)};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-zinc-950 dark:via-zinc-900 dark:to-zinc-950 dark:text-zinc-100",children:a.jsxs("div",{className:"mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[a.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-4 pb-4 mb-6 md:relative md:pt-6",children:[a.jsx("div",{className:"absolute inset-0 bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl md:bg-transparent md:backdrop-blur-none"}),a.jsxs("div",{className:"relative flex flex-col gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl md:text-3xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),a.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 font-medium mt-0.5 hidden md:block",children:"Sistema de produo e gesto"})]}),a.jsx("div",{className:"hidden md:flex items-center gap-3",children:n==="calculator"&&a.jsx(ix,{value:t,onChange:e})})]}),a.jsxs("nav",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 flex items-center gap-1 p-1 bg-zinc-100/90 dark:bg-zinc-800/90 rounded-2xl overflow-x-auto scrollbar-hidden",children:[{key:"kanban",label:"Kanban"},{key:"recipes",label:"Receitas"},{key:"inventory",label:"Estoque"},{key:"costs",label:"Financeiro"},{key:"ficha",label:"Ficha"},{key:"calculator",label:"Produo"}].map(({key:s,label:o})=>a.jsx("button",{onClick:()=>i(s),className:`flex-1 md:flex-none px-4 md:px-5 py-2.5 text-[11px] md:text-xs font-semibold rounded-xl transition-all duration-200 whitespace-nowrap min-w-[70px] ${n===s?"bg-white dark:bg-zinc-700 shadow-md text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}`,children:o},s))}),a.jsx("div",{className:"md:hidden flex-shrink-0",children:n==="calculator"&&a.jsx(ix,{value:t,onChange:e})})]})]})]}),n==="kanban"?a.jsx(SV,{}):n==="recipes"?a.jsx(_V,{}):n==="inventory"?a.jsx(wz,{}):n==="costs"?a.jsx(vz,{}):n==="ficha"?a.jsx(kz,{}):a.jsx(Nz,{inputMode:t,setInputMode:e})]})})}class VV extends Jn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:a.jsxs("div",{className:"max-w-md text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}Xd.createRoot(document.getElementById("root")).render(a.jsx(Jn.StrictMode,{children:a.jsx(VV,{children:a.jsx(RV,{})})}));
