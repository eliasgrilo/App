(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function I1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var A1={exports:{}},mu={},P1={exports:{}},_e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ka=Symbol.for("react.element"),g5=Symbol.for("react.portal"),x5=Symbol.for("react.fragment"),y5=Symbol.for("react.strict_mode"),v5=Symbol.for("react.profiler"),b5=Symbol.for("react.provider"),w5=Symbol.for("react.context"),k5=Symbol.for("react.forward_ref"),_5=Symbol.for("react.suspense"),N5=Symbol.for("react.memo"),j5=Symbol.for("react.lazy"),kg=Symbol.iterator;function C5(t){return t===null||typeof t!="object"?null:(t=kg&&t[kg]||t["@@iterator"],typeof t=="function"?t:null)}var R1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D1=Object.assign,V1={};function ro(t,e,n){this.props=t,this.context=e,this.refs=V1,this.updater=n||R1}ro.prototype.isReactComponent={};ro.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ro.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function M1(){}M1.prototype=ro.prototype;function mp(t,e,n){this.props=t,this.context=e,this.refs=V1,this.updater=n||R1}var gp=mp.prototype=new M1;gp.constructor=mp;D1(gp,ro.prototype);gp.isPureReactComponent=!0;var _g=Array.isArray,L1=Object.prototype.hasOwnProperty,xp={current:null},O1={key:!0,ref:!0,__self:!0,__source:!0};function F1(t,e,n){var r,i={},s=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)L1.call(e,r)&&!O1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ka,type:t,key:s,ref:a,props:i,_owner:xp.current}}function E5(t,e){return{$$typeof:Ka,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ka}function T5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ng=/\/+/g;function gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T5(""+t.key):e.toString(36)}function Xl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ka:case g5:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+gd(a,0):r,_g(i)?(n="",t!=null&&(n=t.replace(Ng,"$&/")+"/"),Xl(i,e,n,"",function(d){return d})):i!=null&&(yp(i)&&(i=E5(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ng,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",_g(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+gd(s,l);a+=Xl(s,e,n,c,i)}else if(c=C5(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+gd(s,l++),a+=Xl(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function _l(t,e,n){if(t==null)return t;var r=[],i=0;return Xl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function S5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kt={current:null},Jl={transition:null},z5={ReactCurrentDispatcher:Kt,ReactCurrentBatchConfig:Jl,ReactCurrentOwner:xp};function B1(){throw Error("act(...) is not supported in production builds of React.")}_e.Children={map:_l,forEach:function(t,e,n){_l(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return _l(t,function(){e++}),e},toArray:function(t){return _l(t,function(e){return e})||[]},only:function(t){if(!yp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_e.Component=ro;_e.Fragment=x5;_e.Profiler=v5;_e.PureComponent=mp;_e.StrictMode=y5;_e.Suspense=_5;_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z5;_e.act=B1;_e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=D1({},t.props),i=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=xp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)L1.call(e,c)&&!O1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ka,type:t.type,key:i,ref:s,props:r,_owner:a}};_e.createContext=function(t){return t={$$typeof:w5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b5,_context:t},t.Consumer=t};_e.createElement=F1;_e.createFactory=function(t){var e=F1.bind(null,t);return e.type=t,e};_e.createRef=function(){return{current:null}};_e.forwardRef=function(t){return{$$typeof:k5,render:t}};_e.isValidElement=yp;_e.lazy=function(t){return{$$typeof:j5,_payload:{_status:-1,_result:t},_init:S5}};_e.memo=function(t,e){return{$$typeof:N5,type:t,compare:e===void 0?null:e}};_e.startTransition=function(t){var e=Jl.transition;Jl.transition={};try{t()}finally{Jl.transition=e}};_e.unstable_act=B1;_e.useCallback=function(t,e){return Kt.current.useCallback(t,e)};_e.useContext=function(t){return Kt.current.useContext(t)};_e.useDebugValue=function(){};_e.useDeferredValue=function(t){return Kt.current.useDeferredValue(t)};_e.useEffect=function(t,e){return Kt.current.useEffect(t,e)};_e.useId=function(){return Kt.current.useId()};_e.useImperativeHandle=function(t,e,n){return Kt.current.useImperativeHandle(t,e,n)};_e.useInsertionEffect=function(t,e){return Kt.current.useInsertionEffect(t,e)};_e.useLayoutEffect=function(t,e){return Kt.current.useLayoutEffect(t,e)};_e.useMemo=function(t,e){return Kt.current.useMemo(t,e)};_e.useReducer=function(t,e,n){return Kt.current.useReducer(t,e,n)};_e.useRef=function(t){return Kt.current.useRef(t)};_e.useState=function(t){return Kt.current.useState(t)};_e.useSyncExternalStore=function(t,e,n){return Kt.current.useSyncExternalStore(t,e,n)};_e.useTransition=function(){return Kt.current.useTransition()};_e.version="18.3.1";P1.exports=_e;var S=P1.exports;const jn=I1(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I5=S,A5=Symbol.for("react.element"),P5=Symbol.for("react.fragment"),R5=Object.prototype.hasOwnProperty,D5=I5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V5={key:!0,ref:!0,__self:!0,__source:!0};function U1(t,e,n){var r,i={},s=null,a=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)R5.call(e,r)&&!V5.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:A5,type:t,key:s,ref:a,props:i,_owner:D5.current}}mu.Fragment=P5;mu.jsx=U1;mu.jsxs=U1;A1.exports=mu;var o=A1.exports,wh={},$1={exports:{}},hn={},W1={exports:{}},q1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,oe){var te=H.length;H.push(oe);e:for(;0<te;){var fe=te-1>>>1,ue=H[fe];if(0<i(ue,oe))H[fe]=oe,H[te]=ue,te=fe;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var oe=H[0],te=H.pop();if(te!==oe){H[0]=te;e:for(var fe=0,ue=H.length,K=ue>>>1;fe<K;){var E=2*(fe+1)-1,F=H[E],U=E+1,J=H[U];if(0>i(F,te))U<ue&&0>i(J,F)?(H[fe]=J,H[U]=te,fe=U):(H[fe]=F,H[E]=te,fe=E);else if(U<ue&&0>i(J,te))H[fe]=J,H[U]=te,fe=U;else break e}}return oe}function i(H,oe){var te=H.sortIndex-oe.sortIndex;return te!==0?te:H.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,p=null,m=3,v=!1,N=!1,z=!1,R=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(H){for(var oe=n(d);oe!==null;){if(oe.callback===null)r(d);else if(oe.startTime<=H)r(d),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=n(d)}}function D(H){if(z=!1,b(H),!N)if(n(c)!==null)N=!0,me(L);else{var oe=n(d);oe!==null&&pe(D,oe.startTime-H)}}function L(H,oe){N=!1,z&&(z=!1,w(y),y=-1),v=!0;var te=m;try{for(b(oe),p=n(c);p!==null&&(!(p.expirationTime>oe)||H&&!A());){var fe=p.callback;if(typeof fe=="function"){p.callback=null,m=p.priorityLevel;var ue=fe(p.expirationTime<=oe);oe=t.unstable_now(),typeof ue=="function"?p.callback=ue:p===n(c)&&r(c),b(oe)}else r(c);p=n(c)}if(p!==null)var K=!0;else{var E=n(d);E!==null&&pe(D,E.startTime-oe),K=!1}return K}finally{p=null,m=te,v=!1}}var O=!1,k=null,y=-1,_=5,j=-1;function A(){return!(t.unstable_now()-j<_)}function P(){if(k!==null){var H=t.unstable_now();j=H;var oe=!0;try{oe=k(!0,H)}finally{oe?I():(O=!1,k=null)}}else O=!1}var I;if(typeof x=="function")I=function(){x(P)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,de=we.port2;we.port1.onmessage=P,I=function(){de.postMessage(null)}}else I=function(){R(P,0)};function me(H){k=H,O||(O=!0,I())}function pe(H,oe){y=R(function(){H(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){N||v||(N=!0,me(L))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(H){switch(m){case 1:case 2:case 3:var oe=3;break;default:oe=m}var te=m;m=oe;try{return H()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var te=m;m=H;try{return oe()}finally{m=te}},t.unstable_scheduleCallback=function(H,oe,te){var fe=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?fe+te:fe):te=fe,H){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=te+ue,H={id:h++,callback:oe,priorityLevel:H,startTime:te,expirationTime:ue,sortIndex:-1},te>fe?(H.sortIndex=te,e(d,H),n(c)===null&&H===n(d)&&(z?(w(y),y=-1):z=!0,pe(D,te-fe))):(H.sortIndex=ue,e(c,H),N||v||(N=!0,me(L))),H},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(H){var oe=m;return function(){var te=m;m=oe;try{return H.apply(this,arguments)}finally{m=te}}}})(q1);W1.exports=q1;var M5=W1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var L5=S,dn=M5;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var H1=new Set,xa={};function Yi(t,e){Us(t,e),Us(t+"Capture",e)}function Us(t,e){for(xa[t]=e,t=0;t<e.length;t++)H1.add(e[t])}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kh=Object.prototype.hasOwnProperty,O5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,jg={},Cg={};function F5(t){return kh.call(Cg,t)?!0:kh.call(jg,t)?!1:O5.test(t)?Cg[t]=!0:(jg[t]=!0,!1)}function B5(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U5(t,e,n,r){if(e===null||typeof e>"u"||B5(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Qt(t,e,n,r,i,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pt[t]=new Qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pt[e]=new Qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pt[t]=new Qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pt[t]=new Qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pt[t]=new Qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pt[t]=new Qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pt[t]=new Qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pt[t]=new Qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pt[t]=new Qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vp=/[\-:]([a-z])/g;function bp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vp,bp);Pt[e]=new Qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vp,bp);Pt[e]=new Qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vp,bp);Pt[e]=new Qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Pt.xlinkHref=new Qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pt[t]=new Qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function wp(t,e,n,r){var i=Pt.hasOwnProperty(e)?Pt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(U5(e,n,i,r)&&(n=null),r||i===null?F5(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var jr=L5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Nl=Symbol.for("react.element"),ps=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),kp=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),G1=Symbol.for("react.provider"),K1=Symbol.for("react.context"),_p=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),jh=Symbol.for("react.suspense_list"),Np=Symbol.for("react.memo"),Dr=Symbol.for("react.lazy"),Q1=Symbol.for("react.offscreen"),Eg=Symbol.iterator;function Io(t){return t===null||typeof t!="object"?null:(t=Eg&&t[Eg]||t["@@iterator"],typeof t=="function"?t:null)}var tt=Object.assign,xd;function $o(t){if(xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xd=e&&e[1]||""}return`
`+xd+t}var yd=!1;function vd(t,e){if(!t||yd)return"";yd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),a=i.length-1,l=s.length-1;1<=a&&0<=l&&i[a]!==s[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==s[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==s[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{yd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$o(t):""}function $5(t){switch(t.tag){case 5:return $o(t.type);case 16:return $o("Lazy");case 13:return $o("Suspense");case 19:return $o("SuspenseList");case 0:case 2:case 15:return t=vd(t.type,!1),t;case 11:return t=vd(t.type.render,!1),t;case 1:return t=vd(t.type,!0),t;default:return""}}function Ch(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ms:return"Fragment";case ps:return"Portal";case _h:return"Profiler";case kp:return"StrictMode";case Nh:return"Suspense";case jh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case K1:return(t.displayName||"Context")+".Consumer";case G1:return(t._context.displayName||"Context")+".Provider";case _p:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Np:return e=t.displayName||null,e!==null?e:Ch(t.type)||"Memo";case Dr:e=t._payload,t=t._init;try{return Ch(t(e))}catch{}}return null}function W5(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ch(e);case 8:return e===kp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ei(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Y1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function q5(t){var e=Y1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jl(t){t._valueTracker||(t._valueTracker=q5(t))}function X1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Y1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Eh(t,e){var n=e.checked;return tt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ei(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function J1(t,e){e=e.checked,e!=null&&wp(t,"checked",e,!1)}function Th(t,e){J1(t,e);var n=ei(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sh(t,e.type,ei(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Sg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sh(t,e,n){(e!=="number"||_c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wo=Array.isArray;function Is(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ei(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return tt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Wo(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ei(n)}}function Z1(t,e){var n=ei(e.value),r=ei(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ig(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function eb(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ih(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?eb(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,tb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},H5=["Webkit","ms","Moz","O"];Object.keys(Jo).forEach(function(t){H5.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jo[e]=Jo[t]})});function nb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jo.hasOwnProperty(t)&&Jo[t]?(""+e).trim():e+"px"}function rb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=nb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var G5=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(G5[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Rh=null;function jp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dh=null,As=null,Ps=null;function Ag(t){if(t=Xa(t)){if(typeof Dh!="function")throw Error(X(280));var e=t.stateNode;e&&(e=bu(e),Dh(t.stateNode,t.type,e))}}function ib(t){As?Ps?Ps.push(t):Ps=[t]:As=t}function sb(){if(As){var t=As,e=Ps;if(Ps=As=null,Ag(t),e)for(t=0;t<e.length;t++)Ag(e[t])}}function ob(t,e){return t(e)}function ab(){}var bd=!1;function lb(t,e,n){if(bd)return t(e,n);bd=!0;try{return ob(t,e,n)}finally{bd=!1,(As!==null||Ps!==null)&&(ab(),sb())}}function va(t,e){var n=t.stateNode;if(n===null)return null;var r=bu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Vh=!1;if(fr)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){Vh=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{Vh=!1}function K5(t,e,n,r,i,s,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Zo=!1,Nc=null,jc=!1,Mh=null,Q5={onError:function(t){Zo=!0,Nc=t}};function Y5(t,e,n,r,i,s,a,l,c){Zo=!1,Nc=null,K5.apply(Q5,arguments)}function X5(t,e,n,r,i,s,a,l,c){if(Y5.apply(this,arguments),Zo){if(Zo){var d=Nc;Zo=!1,Nc=null}else throw Error(X(198));jc||(jc=!0,Mh=d)}}function Xi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function cb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Pg(t){if(Xi(t)!==t)throw Error(X(188))}function J5(t){var e=t.alternate;if(!e){if(e=Xi(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Pg(i),t;if(s===r)return Pg(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function ub(t){return t=J5(t),t!==null?db(t):null}function db(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=db(t);if(e!==null)return e;t=t.sibling}return null}var hb=dn.unstable_scheduleCallback,Rg=dn.unstable_cancelCallback,Z5=dn.unstable_shouldYield,ej=dn.unstable_requestPaint,ct=dn.unstable_now,tj=dn.unstable_getCurrentPriorityLevel,Cp=dn.unstable_ImmediatePriority,fb=dn.unstable_UserBlockingPriority,Cc=dn.unstable_NormalPriority,nj=dn.unstable_LowPriority,pb=dn.unstable_IdlePriority,gu=null,Gn=null;function rj(t){if(Gn&&typeof Gn.onCommitFiberRoot=="function")try{Gn.onCommitFiberRoot(gu,t,void 0,(t.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:oj,ij=Math.log,sj=Math.LN2;function oj(t){return t>>>=0,t===0?32:31-(ij(t)/sj|0)|0}var El=64,Tl=4194304;function qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ec(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=qo(l):(s&=a,s!==0&&(r=qo(s)))}else a=n&~i,a!==0?r=qo(a):s!==0&&(r=qo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Dn(e),i=1<<n,r|=t[n],e&=~i;return r}function aj(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lj(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-Dn(s),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=aj(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function Lh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mb(){var t=El;return El<<=1,!(El&4194240)&&(El=64),t}function wd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dn(e),t[e]=n}function cj(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Dn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Ep(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Dn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var De=0;function gb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xb,Tp,yb,vb,bb,Oh=!1,Sl=[],Ur=null,$r=null,Wr=null,ba=new Map,wa=new Map,Mr=[],uj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dg(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(e.pointerId)}}function Po(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Xa(e),e!==null&&Tp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function dj(t,e,n,r,i){switch(e){case"focusin":return Ur=Po(Ur,t,e,n,r,i),!0;case"dragenter":return $r=Po($r,t,e,n,r,i),!0;case"mouseover":return Wr=Po(Wr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ba.set(s,Po(ba.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wa.set(s,Po(wa.get(s)||null,t,e,n,r,i)),!0}return!1}function wb(t){var e=Ti(t.target);if(e!==null){var n=Xi(e);if(n!==null){if(e=n.tag,e===13){if(e=cb(n),e!==null){t.blockedOn=e,bb(t.priority,function(){yb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Fh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Rh=r,n.target.dispatchEvent(r),Rh=null}else return e=Xa(n),e!==null&&Tp(e),t.blockedOn=n,!1;e.shift()}return!0}function Vg(t,e,n){Zl(t)&&n.delete(e)}function hj(){Oh=!1,Ur!==null&&Zl(Ur)&&(Ur=null),$r!==null&&Zl($r)&&($r=null),Wr!==null&&Zl(Wr)&&(Wr=null),ba.forEach(Vg),wa.forEach(Vg)}function Ro(t,e){t.blockedOn===e&&(t.blockedOn=null,Oh||(Oh=!0,dn.unstable_scheduleCallback(dn.unstable_NormalPriority,hj)))}function ka(t){function e(i){return Ro(i,t)}if(0<Sl.length){Ro(Sl[0],t);for(var n=1;n<Sl.length;n++){var r=Sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ur!==null&&Ro(Ur,t),$r!==null&&Ro($r,t),Wr!==null&&Ro(Wr,t),ba.forEach(e),wa.forEach(e),n=0;n<Mr.length;n++)r=Mr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mr.length&&(n=Mr[0],n.blockedOn===null);)wb(n),n.blockedOn===null&&Mr.shift()}var Rs=jr.ReactCurrentBatchConfig,Tc=!0;function fj(t,e,n,r){var i=De,s=Rs.transition;Rs.transition=null;try{De=1,Sp(t,e,n,r)}finally{De=i,Rs.transition=s}}function pj(t,e,n,r){var i=De,s=Rs.transition;Rs.transition=null;try{De=4,Sp(t,e,n,r)}finally{De=i,Rs.transition=s}}function Sp(t,e,n,r){if(Tc){var i=Fh(t,e,n,r);if(i===null)Id(t,e,r,Sc,n),Dg(t,r);else if(dj(i,t,e,n,r))r.stopPropagation();else if(Dg(t,r),e&4&&-1<uj.indexOf(t)){for(;i!==null;){var s=Xa(i);if(s!==null&&xb(s),s=Fh(t,e,n,r),s===null&&Id(t,e,r,Sc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Id(t,e,r,null,n)}}var Sc=null;function Fh(t,e,n,r){if(Sc=null,t=jp(r),t=Ti(t),t!==null)if(e=Xi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=cb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sc=t,null}function kb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tj()){case Cp:return 1;case fb:return 4;case Cc:case nj:return 16;case pb:return 536870912;default:return 16}default:return 16}}var Or=null,zp=null,ec=null;function _b(){if(ec)return ec;var t,e=zp,n=e.length,r,i="value"in Or?Or.value:Or.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[s-r];r++);return ec=i.slice(t,1<r?1-r:void 0)}function tc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zl(){return!0}function Mg(){return!1}function fn(t){function e(n,r,i,s,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?zl:Mg,this.isPropagationStopped=Mg,this}return tt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=zl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=zl)},persist:function(){},isPersistent:zl}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ip=fn(io),Ya=tt({},io,{view:0,detail:0}),mj=fn(Ya),kd,_d,Do,xu=tt({},Ya,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ap,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(kd=t.screenX-Do.screenX,_d=t.screenY-Do.screenY):_d=kd=0,Do=t),kd)},movementY:function(t){return"movementY"in t?t.movementY:_d}}),Lg=fn(xu),gj=tt({},xu,{dataTransfer:0}),xj=fn(gj),yj=tt({},Ya,{relatedTarget:0}),Nd=fn(yj),vj=tt({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),bj=fn(vj),wj=tt({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),kj=fn(wj),_j=tt({},io,{data:0}),Og=fn(_j),Nj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Cj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ej(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Cj[t])?!!e[t]:!1}function Ap(){return Ej}var Tj=tt({},Ya,{key:function(t){if(t.key){var e=Nj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ap,charCode:function(t){return t.type==="keypress"?tc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sj=fn(Tj),zj=tt({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fg=fn(zj),Ij=tt({},Ya,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ap}),Aj=fn(Ij),Pj=tt({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rj=fn(Pj),Dj=tt({},xu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Vj=fn(Dj),Mj=[9,13,27,32],Pp=fr&&"CompositionEvent"in window,ea=null;fr&&"documentMode"in document&&(ea=document.documentMode);var Lj=fr&&"TextEvent"in window&&!ea,Nb=fr&&(!Pp||ea&&8<ea&&11>=ea),Bg=" ",Ug=!1;function jb(t,e){switch(t){case"keyup":return Mj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function Oj(t,e){switch(t){case"compositionend":return Cb(e);case"keypress":return e.which!==32?null:(Ug=!0,Bg);case"textInput":return t=e.data,t===Bg&&Ug?null:t;default:return null}}function Fj(t,e){if(gs)return t==="compositionend"||!Pp&&jb(t,e)?(t=_b(),ec=zp=Or=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nb&&e.locale!=="ko"?null:e.data;default:return null}}var Bj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $g(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bj[t.type]:e==="textarea"}function Eb(t,e,n,r){ib(r),e=zc(e,"onChange"),0<e.length&&(n=new Ip("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ta=null,_a=null;function Uj(t){Lb(t,0)}function yu(t){var e=vs(t);if(X1(e))return t}function $j(t,e){if(t==="change")return e}var Tb=!1;if(fr){var jd;if(fr){var Cd="oninput"in document;if(!Cd){var Wg=document.createElement("div");Wg.setAttribute("oninput","return;"),Cd=typeof Wg.oninput=="function"}jd=Cd}else jd=!1;Tb=jd&&(!document.documentMode||9<document.documentMode)}function qg(){ta&&(ta.detachEvent("onpropertychange",Sb),_a=ta=null)}function Sb(t){if(t.propertyName==="value"&&yu(_a)){var e=[];Eb(e,_a,t,jp(t)),lb(Uj,e)}}function Wj(t,e,n){t==="focusin"?(qg(),ta=e,_a=n,ta.attachEvent("onpropertychange",Sb)):t==="focusout"&&qg()}function qj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yu(_a)}function Hj(t,e){if(t==="click")return yu(e)}function Gj(t,e){if(t==="input"||t==="change")return yu(e)}function Kj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mn=typeof Object.is=="function"?Object.is:Kj;function Na(t,e){if(Mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!kh.call(e,i)||!Mn(t[i],e[i]))return!1}return!0}function Hg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gg(t,e){var n=Hg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Hg(n)}}function zb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?zb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ib(){for(var t=window,e=_c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_c(t.document)}return e}function Rp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Qj(t){var e=Ib(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&zb(n.ownerDocument.documentElement,n)){if(r!==null&&Rp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Gg(n,s);var a=Gg(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Yj=fr&&"documentMode"in document&&11>=document.documentMode,xs=null,Bh=null,na=null,Uh=!1;function Kg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uh||xs==null||xs!==_c(r)||(r=xs,"selectionStart"in r&&Rp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),na&&Na(na,r)||(na=r,r=zc(Bh,"onSelect"),0<r.length&&(e=new Ip("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xs)))}function Il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ys={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},Ed={},Ab={};fr&&(Ab=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function vu(t){if(Ed[t])return Ed[t];if(!ys[t])return t;var e=ys[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Ab)return Ed[t]=e[n];return t}var Pb=vu("animationend"),Rb=vu("animationiteration"),Db=vu("animationstart"),Vb=vu("transitionend"),Mb=new Map,Qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function di(t,e){Mb.set(t,e),Yi(e,[t])}for(var Td=0;Td<Qg.length;Td++){var Sd=Qg[Td],Xj=Sd.toLowerCase(),Jj=Sd[0].toUpperCase()+Sd.slice(1);di(Xj,"on"+Jj)}di(Pb,"onAnimationEnd");di(Rb,"onAnimationIteration");di(Db,"onAnimationStart");di("dblclick","onDoubleClick");di("focusin","onFocus");di("focusout","onBlur");di(Vb,"onTransitionEnd");Us("onMouseEnter",["mouseout","mouseover"]);Us("onMouseLeave",["mouseout","mouseover"]);Us("onPointerEnter",["pointerout","pointerover"]);Us("onPointerLeave",["pointerout","pointerover"]);Yi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function Yg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,X5(r,e,void 0,t),t.currentTarget=null}function Lb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Yg(i,l,d),s=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Yg(i,l,d),s=c}}}if(jc)throw t=Mh,jc=!1,Mh=null,t}function $e(t,e){var n=e[Gh];n===void 0&&(n=e[Gh]=new Set);var r=t+"__bubble";n.has(r)||(Ob(e,t,2,!1),n.add(r))}function zd(t,e,n){var r=0;e&&(r|=4),Ob(n,t,r,e)}var Al="_reactListening"+Math.random().toString(36).slice(2);function ja(t){if(!t[Al]){t[Al]=!0,H1.forEach(function(n){n!=="selectionchange"&&(Zj.has(n)||zd(n,!1,t),zd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Al]||(e[Al]=!0,zd("selectionchange",!1,e))}}function Ob(t,e,n,r){switch(kb(e)){case 1:var i=fj;break;case 4:i=pj;break;default:i=Sp}n=i.bind(null,e,n,t),i=void 0,!Vh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Id(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Ti(l),a===null)return;if(c=a.tag,c===5||c===6){r=s=a;continue e}l=l.parentNode}}r=r.return}lb(function(){var d=s,h=jp(n),p=[];e:{var m=Mb.get(t);if(m!==void 0){var v=Ip,N=t;switch(t){case"keypress":if(tc(n)===0)break e;case"keydown":case"keyup":v=Sj;break;case"focusin":N="focus",v=Nd;break;case"focusout":N="blur",v=Nd;break;case"beforeblur":case"afterblur":v=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Lg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=xj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Aj;break;case Pb:case Rb:case Db:v=bj;break;case Vb:v=Rj;break;case"scroll":v=mj;break;case"wheel":v=Vj;break;case"copy":case"cut":case"paste":v=kj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Fg}var z=(e&4)!==0,R=!z&&t==="scroll",w=z?m!==null?m+"Capture":null:m;z=[];for(var x=d,b;x!==null;){b=x;var D=b.stateNode;if(b.tag===5&&D!==null&&(b=D,w!==null&&(D=va(x,w),D!=null&&z.push(Ca(x,D,b)))),R)break;x=x.return}0<z.length&&(m=new v(m,N,null,n,h),p.push({event:m,listeners:z}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Rh&&(N=n.relatedTarget||n.fromElement)&&(Ti(N)||N[pr]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(N=n.relatedTarget||n.toElement,v=d,N=N?Ti(N):null,N!==null&&(R=Xi(N),N!==R||N.tag!==5&&N.tag!==6)&&(N=null)):(v=null,N=d),v!==N)){if(z=Lg,D="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(z=Fg,D="onPointerLeave",w="onPointerEnter",x="pointer"),R=v==null?m:vs(v),b=N==null?m:vs(N),m=new z(D,x+"leave",v,n,h),m.target=R,m.relatedTarget=b,D=null,Ti(h)===d&&(z=new z(w,x+"enter",N,n,h),z.target=b,z.relatedTarget=R,D=z),R=D,v&&N)t:{for(z=v,w=N,x=0,b=z;b;b=ls(b))x++;for(b=0,D=w;D;D=ls(D))b++;for(;0<x-b;)z=ls(z),x--;for(;0<b-x;)w=ls(w),b--;for(;x--;){if(z===w||w!==null&&z===w.alternate)break t;z=ls(z),w=ls(w)}z=null}else z=null;v!==null&&Xg(p,m,v,z,!1),N!==null&&R!==null&&Xg(p,R,N,z,!0)}}e:{if(m=d?vs(d):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=$j;else if($g(m))if(Tb)L=Gj;else{L=qj;var O=Wj}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=Hj);if(L&&(L=L(t,d))){Eb(p,L,n,h);break e}O&&O(t,m,d),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&Sh(m,"number",m.value)}switch(O=d?vs(d):window,t){case"focusin":($g(O)||O.contentEditable==="true")&&(xs=O,Bh=d,na=null);break;case"focusout":na=Bh=xs=null;break;case"mousedown":Uh=!0;break;case"contextmenu":case"mouseup":case"dragend":Uh=!1,Kg(p,n,h);break;case"selectionchange":if(Yj)break;case"keydown":case"keyup":Kg(p,n,h)}var k;if(Pp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else gs?jb(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(Nb&&n.locale!=="ko"&&(gs||y!=="onCompositionStart"?y==="onCompositionEnd"&&gs&&(k=_b()):(Or=h,zp="value"in Or?Or.value:Or.textContent,gs=!0)),O=zc(d,y),0<O.length&&(y=new Og(y,t,null,n,h),p.push({event:y,listeners:O}),k?y.data=k:(k=Cb(n),k!==null&&(y.data=k)))),(k=Lj?Oj(t,n):Fj(t,n))&&(d=zc(d,"onBeforeInput"),0<d.length&&(h=new Og("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=k))}Lb(p,e)})}function Ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=va(t,n),s!=null&&r.unshift(Ca(t,s,i)),s=va(t,e),s!=null&&r.push(Ca(t,s,i))),t=t.return}return r}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xg(t,e,n,r,i){for(var s=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=va(n,s),c!=null&&a.unshift(Ca(n,c,l))):i||(c=va(n,s),c!=null&&a.push(Ca(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var e4=/\r\n?/g,t4=/\u0000|\uFFFD/g;function Jg(t){return(typeof t=="string"?t:""+t).replace(e4,`
`).replace(t4,"")}function Pl(t,e,n){if(e=Jg(e),Jg(t)!==e&&n)throw Error(X(425))}function Ic(){}var $h=null,Wh=null;function qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hh=typeof setTimeout=="function"?setTimeout:void 0,n4=typeof clearTimeout=="function"?clearTimeout:void 0,Zg=typeof Promise=="function"?Promise:void 0,r4=typeof queueMicrotask=="function"?queueMicrotask:typeof Zg<"u"?function(t){return Zg.resolve(null).then(t).catch(i4)}:Hh;function i4(t){setTimeout(function(){throw t})}function Ad(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),ka(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ka(e)}function qr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ex(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var so=Math.random().toString(36).slice(2),Hn="__reactFiber$"+so,Ea="__reactProps$"+so,pr="__reactContainer$"+so,Gh="__reactEvents$"+so,s4="__reactListeners$"+so,o4="__reactHandles$"+so;function Ti(t){var e=t[Hn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pr]||n[Hn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ex(t);t!==null;){if(n=t[Hn])return n;t=ex(t)}return e}t=n,n=t.parentNode}return null}function Xa(t){return t=t[Hn]||t[pr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function bu(t){return t[Ea]||null}var Kh=[],bs=-1;function hi(t){return{current:t}}function qe(t){0>bs||(t.current=Kh[bs],Kh[bs]=null,bs--)}function Be(t,e){bs++,Kh[bs]=t.current,t.current=e}var ti={},Bt=hi(ti),tn=hi(!1),Fi=ti;function $s(t,e){var n=t.type.contextTypes;if(!n)return ti;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nn(t){return t=t.childContextTypes,t!=null}function Ac(){qe(tn),qe(Bt)}function tx(t,e,n){if(Bt.current!==ti)throw Error(X(168));Be(Bt,e),Be(tn,n)}function Fb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,W5(t)||"Unknown",i));return tt({},n,r)}function Pc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ti,Fi=Bt.current,Be(Bt,t),Be(tn,tn.current),!0}function nx(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=Fb(t,e,Fi),r.__reactInternalMemoizedMergedChildContext=t,qe(tn),qe(Bt),Be(Bt,t)):qe(tn),Be(tn,n)}var lr=null,wu=!1,Pd=!1;function Bb(t){lr===null?lr=[t]:lr.push(t)}function a4(t){wu=!0,Bb(t)}function fi(){if(!Pd&&lr!==null){Pd=!0;var t=0,e=De;try{var n=lr;for(De=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}lr=null,wu=!1}catch(i){throw lr!==null&&(lr=lr.slice(t+1)),hb(Cp,fi),i}finally{De=e,Pd=!1}}return null}var ws=[],ks=0,Rc=null,Dc=0,xn=[],yn=0,Bi=null,cr=1,ur="";function _i(t,e){ws[ks++]=Dc,ws[ks++]=Rc,Rc=t,Dc=e}function Ub(t,e,n){xn[yn++]=cr,xn[yn++]=ur,xn[yn++]=Bi,Bi=t;var r=cr;t=ur;var i=32-Dn(r)-1;r&=~(1<<i),n+=1;var s=32-Dn(e)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,cr=1<<32-Dn(e)+i|n<<i|r,ur=s+t}else cr=1<<s|n<<i|r,ur=t}function Dp(t){t.return!==null&&(_i(t,1),Ub(t,1,0))}function Vp(t){for(;t===Rc;)Rc=ws[--ks],ws[ks]=null,Dc=ws[--ks],ws[ks]=null;for(;t===Bi;)Bi=xn[--yn],xn[yn]=null,ur=xn[--yn],xn[yn]=null,cr=xn[--yn],xn[yn]=null}var cn=null,ln=null,Ye=!1,Pn=null;function $b(t,e){var n=wn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,cn=t,ln=qr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,cn=t,ln=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Bi!==null?{id:cr,overflow:ur}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,cn=t,ln=null,!0):!1;default:return!1}}function Qh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yh(t){if(Ye){var e=ln;if(e){var n=e;if(!rx(t,e)){if(Qh(t))throw Error(X(418));e=qr(n.nextSibling);var r=cn;e&&rx(t,e)?$b(r,n):(t.flags=t.flags&-4097|2,Ye=!1,cn=t)}}else{if(Qh(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ye=!1,cn=t}}}function ix(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;cn=t}function Rl(t){if(t!==cn)return!1;if(!Ye)return ix(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qh(t.type,t.memoizedProps)),e&&(e=ln)){if(Qh(t))throw Wb(),Error(X(418));for(;e;)$b(t,e),e=qr(e.nextSibling)}if(ix(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ln=qr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ln=null}}else ln=cn?qr(t.stateNode.nextSibling):null;return!0}function Wb(){for(var t=ln;t;)t=qr(t.nextSibling)}function Ws(){ln=cn=null,Ye=!1}function Mp(t){Pn===null?Pn=[t]:Pn.push(t)}var l4=jr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var l=i.refs;a===null?delete l[s]:l[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function Dl(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sx(t){var e=t._init;return e(t._payload)}function qb(t){function e(w,x){if(t){var b=w.deletions;b===null?(w.deletions=[x],w.flags|=16):b.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function i(w,x){return w=Qr(w,x),w.index=0,w.sibling=null,w}function s(w,x,b){return w.index=b,t?(b=w.alternate,b!==null?(b=b.index,b<x?(w.flags|=2,x):b):(w.flags|=2,x)):(w.flags|=1048576,x)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,x,b,D){return x===null||x.tag!==6?(x=Fd(b,w.mode,D),x.return=w,x):(x=i(x,b),x.return=w,x)}function c(w,x,b,D){var L=b.type;return L===ms?h(w,x,b.props.children,D,b.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Dr&&sx(L)===x.type)?(D=i(x,b.props),D.ref=Vo(w,x,b),D.return=w,D):(D=lc(b.type,b.key,b.props,null,w.mode,D),D.ref=Vo(w,x,b),D.return=w,D)}function d(w,x,b,D){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=Bd(b,w.mode,D),x.return=w,x):(x=i(x,b.children||[]),x.return=w,x)}function h(w,x,b,D,L){return x===null||x.tag!==7?(x=Vi(b,w.mode,D,L),x.return=w,x):(x=i(x,b),x.return=w,x)}function p(w,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Fd(""+x,w.mode,b),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Nl:return b=lc(x.type,x.key,x.props,null,w.mode,b),b.ref=Vo(w,null,x),b.return=w,b;case ps:return x=Bd(x,w.mode,b),x.return=w,x;case Dr:var D=x._init;return p(w,D(x._payload),b)}if(Wo(x)||Io(x))return x=Vi(x,w.mode,b,null),x.return=w,x;Dl(w,x)}return null}function m(w,x,b,D){var L=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return L!==null?null:l(w,x,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Nl:return b.key===L?c(w,x,b,D):null;case ps:return b.key===L?d(w,x,b,D):null;case Dr:return L=b._init,m(w,x,L(b._payload),D)}if(Wo(b)||Io(b))return L!==null?null:h(w,x,b,D,null);Dl(w,b)}return null}function v(w,x,b,D,L){if(typeof D=="string"&&D!==""||typeof D=="number")return w=w.get(b)||null,l(x,w,""+D,L);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Nl:return w=w.get(D.key===null?b:D.key)||null,c(x,w,D,L);case ps:return w=w.get(D.key===null?b:D.key)||null,d(x,w,D,L);case Dr:var O=D._init;return v(w,x,b,O(D._payload),L)}if(Wo(D)||Io(D))return w=w.get(b)||null,h(x,w,D,L,null);Dl(x,D)}return null}function N(w,x,b,D){for(var L=null,O=null,k=x,y=x=0,_=null;k!==null&&y<b.length;y++){k.index>y?(_=k,k=null):_=k.sibling;var j=m(w,k,b[y],D);if(j===null){k===null&&(k=_);break}t&&k&&j.alternate===null&&e(w,k),x=s(j,x,y),O===null?L=j:O.sibling=j,O=j,k=_}if(y===b.length)return n(w,k),Ye&&_i(w,y),L;if(k===null){for(;y<b.length;y++)k=p(w,b[y],D),k!==null&&(x=s(k,x,y),O===null?L=k:O.sibling=k,O=k);return Ye&&_i(w,y),L}for(k=r(w,k);y<b.length;y++)_=v(k,w,y,b[y],D),_!==null&&(t&&_.alternate!==null&&k.delete(_.key===null?y:_.key),x=s(_,x,y),O===null?L=_:O.sibling=_,O=_);return t&&k.forEach(function(A){return e(w,A)}),Ye&&_i(w,y),L}function z(w,x,b,D){var L=Io(b);if(typeof L!="function")throw Error(X(150));if(b=L.call(b),b==null)throw Error(X(151));for(var O=L=null,k=x,y=x=0,_=null,j=b.next();k!==null&&!j.done;y++,j=b.next()){k.index>y?(_=k,k=null):_=k.sibling;var A=m(w,k,j.value,D);if(A===null){k===null&&(k=_);break}t&&k&&A.alternate===null&&e(w,k),x=s(A,x,y),O===null?L=A:O.sibling=A,O=A,k=_}if(j.done)return n(w,k),Ye&&_i(w,y),L;if(k===null){for(;!j.done;y++,j=b.next())j=p(w,j.value,D),j!==null&&(x=s(j,x,y),O===null?L=j:O.sibling=j,O=j);return Ye&&_i(w,y),L}for(k=r(w,k);!j.done;y++,j=b.next())j=v(k,w,y,j.value,D),j!==null&&(t&&j.alternate!==null&&k.delete(j.key===null?y:j.key),x=s(j,x,y),O===null?L=j:O.sibling=j,O=j);return t&&k.forEach(function(P){return e(w,P)}),Ye&&_i(w,y),L}function R(w,x,b,D){if(typeof b=="object"&&b!==null&&b.type===ms&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Nl:e:{for(var L=b.key,O=x;O!==null;){if(O.key===L){if(L=b.type,L===ms){if(O.tag===7){n(w,O.sibling),x=i(O,b.props.children),x.return=w,w=x;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Dr&&sx(L)===O.type){n(w,O.sibling),x=i(O,b.props),x.ref=Vo(w,O,b),x.return=w,w=x;break e}n(w,O);break}else e(w,O);O=O.sibling}b.type===ms?(x=Vi(b.props.children,w.mode,D,b.key),x.return=w,w=x):(D=lc(b.type,b.key,b.props,null,w.mode,D),D.ref=Vo(w,x,b),D.return=w,w=D)}return a(w);case ps:e:{for(O=b.key;x!==null;){if(x.key===O)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(w,x.sibling),x=i(x,b.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=Bd(b,w.mode,D),x.return=w,w=x}return a(w);case Dr:return O=b._init,R(w,x,O(b._payload),D)}if(Wo(b))return N(w,x,b,D);if(Io(b))return z(w,x,b,D);Dl(w,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(w,x.sibling),x=i(x,b),x.return=w,w=x):(n(w,x),x=Fd(b,w.mode,D),x.return=w,w=x),a(w)):n(w,x)}return R}var qs=qb(!0),Hb=qb(!1),Vc=hi(null),Mc=null,_s=null,Lp=null;function Op(){Lp=_s=Mc=null}function Fp(t){var e=Vc.current;qe(Vc),t._currentValue=e}function Xh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ds(t,e){Mc=t,Lp=_s=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zt=!0),t.firstContext=null)}function Cn(t){var e=t._currentValue;if(Lp!==t)if(t={context:t,memoizedValue:e,next:null},_s===null){if(Mc===null)throw Error(X(308));_s=t,Mc.dependencies={lanes:0,firstContext:t}}else _s=_s.next=t;return e}var Si=null;function Bp(t){Si===null?Si=[t]:Si.push(t)}function Gb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Bp(e)):(n.next=i.next,i.next=n),e.interleaved=n,mr(t,r)}function mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Vr=!1;function Up(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ze&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,mr(t,n)}return i=r.interleaved,i===null?(e.next=e,Bp(r)):(e.next=i.next,i.next=e),r.interleaved=e,mr(t,n)}function nc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ep(t,n)}}function ox(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=a:s=s.next=a,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Lc(t,e,n,r){var i=t.updateQueue;Vr=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?s=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;a=0,h=d=c=null,l=s;do{var m=l.lane,v=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,z=l;switch(m=e,v=n,z.tag){case 1:if(N=z.payload,typeof N=="function"){p=N.call(v,p,m);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=z.payload,m=typeof N=="function"?N.call(v,p,m):N,m==null)break e;p=tt({},p,m);break e;case 2:Vr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=p):h=h.next=v,a|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);$i|=a,t.lanes=a,t.memoizedState=p}}function ax(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Ja={},Kn=hi(Ja),Ta=hi(Ja),Sa=hi(Ja);function zi(t){if(t===Ja)throw Error(X(174));return t}function $p(t,e){switch(Be(Sa,e),Be(Ta,t),Be(Kn,Ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ih(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ih(e,t)}qe(Kn),Be(Kn,e)}function Hs(){qe(Kn),qe(Ta),qe(Sa)}function Qb(t){zi(Sa.current);var e=zi(Kn.current),n=Ih(e,t.type);e!==n&&(Be(Ta,t),Be(Kn,n))}function Wp(t){Ta.current===t&&(qe(Kn),qe(Ta))}var Ze=hi(0);function Oc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Rd=[];function qp(){for(var t=0;t<Rd.length;t++)Rd[t]._workInProgressVersionPrimary=null;Rd.length=0}var rc=jr.ReactCurrentDispatcher,Dd=jr.ReactCurrentBatchConfig,Ui=0,et=null,yt=null,jt=null,Fc=!1,ra=!1,za=0,c4=0;function Dt(){throw Error(X(321))}function Hp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mn(t[n],e[n]))return!1;return!0}function Gp(t,e,n,r,i,s){if(Ui=s,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rc.current=t===null||t.memoizedState===null?f4:p4,t=n(r,i),ra){s=0;do{if(ra=!1,za=0,25<=s)throw Error(X(301));s+=1,jt=yt=null,e.updateQueue=null,rc.current=m4,t=n(r,i)}while(ra)}if(rc.current=Bc,e=yt!==null&&yt.next!==null,Ui=0,jt=yt=et=null,Fc=!1,e)throw Error(X(300));return t}function Kp(){var t=za!==0;return za=0,t}function Wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?et.memoizedState=jt=t:jt=jt.next=t,jt}function En(){if(yt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=jt===null?et.memoizedState:jt.next;if(e!==null)jt=e,yt=t;else{if(t===null)throw Error(X(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},jt===null?et.memoizedState=jt=t:jt=jt.next=t}return jt}function Ia(t,e){return typeof e=="function"?e(t):e}function Vd(t){var e=En(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=yt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=a=null,c=null,d=s;do{var h=d.lane;if((Ui&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,a=r):c=c.next=p,et.lanes|=h,$i|=h}d=d.next}while(d!==null&&d!==s);c===null?a=r:c.next=l,Mn(r,e.memoizedState)||(Zt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,et.lanes|=s,$i|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Md(t){var e=En(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do s=t(s,a.action),a=a.next;while(a!==i);Mn(s,e.memoizedState)||(Zt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Yb(){}function Xb(t,e){var n=et,r=En(),i=e(),s=!Mn(r.memoizedState,i);if(s&&(r.memoizedState=i,Zt=!0),r=r.queue,Qp(ew.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||jt!==null&&jt.memoizedState.tag&1){if(n.flags|=2048,Aa(9,Zb.bind(null,n,r,i,e),void 0,null),Ct===null)throw Error(X(349));Ui&30||Jb(n,e,i)}return i}function Jb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Zb(t,e,n,r){e.value=n,e.getSnapshot=r,tw(e)&&nw(t)}function ew(t,e,n){return n(function(){tw(e)&&nw(t)})}function tw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mn(t,n)}catch{return!0}}function nw(t){var e=mr(t,1);e!==null&&Vn(e,t,1,-1)}function lx(t){var e=Wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},e.queue=t,t=t.dispatch=h4.bind(null,et,t),[e.memoizedState,t]}function Aa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rw(){return En().memoizedState}function ic(t,e,n,r){var i=Wn();et.flags|=t,i.memoizedState=Aa(1|e,n,void 0,r===void 0?null:r)}function ku(t,e,n,r){var i=En();r=r===void 0?null:r;var s=void 0;if(yt!==null){var a=yt.memoizedState;if(s=a.destroy,r!==null&&Hp(r,a.deps)){i.memoizedState=Aa(e,n,s,r);return}}et.flags|=t,i.memoizedState=Aa(1|e,n,s,r)}function cx(t,e){return ic(8390656,8,t,e)}function Qp(t,e){return ku(2048,8,t,e)}function iw(t,e){return ku(4,2,t,e)}function sw(t,e){return ku(4,4,t,e)}function ow(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aw(t,e,n){return n=n!=null?n.concat([t]):null,ku(4,4,ow.bind(null,e,t),n)}function Yp(){}function lw(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cw(t,e){var n=En();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uw(t,e,n){return Ui&21?(Mn(n,e)||(n=mb(),et.lanes|=n,$i|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zt=!0),t.memoizedState=n)}function u4(t,e){var n=De;De=n!==0&&4>n?n:4,t(!0);var r=Dd.transition;Dd.transition={};try{t(!1),e()}finally{De=n,Dd.transition=r}}function dw(){return En().memoizedState}function d4(t,e,n){var r=Kr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hw(t))fw(e,n);else if(n=Gb(t,e,n,r),n!==null){var i=Ht();Vn(n,t,r,i),pw(n,e,r)}}function h4(t,e,n){var r=Kr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hw(t))fw(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,l=s(a,n);if(i.hasEagerState=!0,i.eagerState=l,Mn(l,a)){var c=e.interleaved;c===null?(i.next=i,Bp(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Gb(t,e,i,r),n!==null&&(i=Ht(),Vn(n,t,r,i),pw(n,e,r))}}function hw(t){var e=t.alternate;return t===et||e!==null&&e===et}function fw(t,e){ra=Fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ep(t,n)}}var Bc={readContext:Cn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},f4={readContext:Cn,useCallback:function(t,e){return Wn().memoizedState=[t,e===void 0?null:e],t},useContext:Cn,useEffect:cx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ic(4194308,4,ow.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ic(4194308,4,t,e)},useInsertionEffect:function(t,e){return ic(4,2,t,e)},useMemo:function(t,e){var n=Wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=d4.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=Wn();return t={current:t},e.memoizedState=t},useState:lx,useDebugValue:Yp,useDeferredValue:function(t){return Wn().memoizedState=t},useTransition:function(){var t=lx(!1),e=t[0];return t=u4.bind(null,t[1]),Wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,i=Wn();if(Ye){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ct===null)throw Error(X(349));Ui&30||Jb(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,cx(ew.bind(null,r,s,t),[t]),r.flags|=2048,Aa(9,Zb.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Wn(),e=Ct.identifierPrefix;if(Ye){var n=ur,r=cr;n=(r&~(1<<32-Dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=c4++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},p4={readContext:Cn,useCallback:lw,useContext:Cn,useEffect:Qp,useImperativeHandle:aw,useInsertionEffect:iw,useLayoutEffect:sw,useMemo:cw,useReducer:Vd,useRef:rw,useState:function(){return Vd(Ia)},useDebugValue:Yp,useDeferredValue:function(t){var e=En();return uw(e,yt.memoizedState,t)},useTransition:function(){var t=Vd(Ia)[0],e=En().memoizedState;return[t,e]},useMutableSource:Yb,useSyncExternalStore:Xb,useId:dw,unstable_isNewReconciler:!1},m4={readContext:Cn,useCallback:lw,useContext:Cn,useEffect:Qp,useImperativeHandle:aw,useInsertionEffect:iw,useLayoutEffect:sw,useMemo:cw,useReducer:Md,useRef:rw,useState:function(){return Md(Ia)},useDebugValue:Yp,useDeferredValue:function(t){var e=En();return yt===null?e.memoizedState=t:uw(e,yt.memoizedState,t)},useTransition:function(){var t=Md(Ia)[0],e=En().memoizedState;return[t,e]},useMutableSource:Yb,useSyncExternalStore:Xb,useId:dw,unstable_isNewReconciler:!1};function In(t,e){if(t&&t.defaultProps){e=tt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Jh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:tt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _u={isMounted:function(t){return(t=t._reactInternals)?Xi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=Kr(t),s=dr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(Vn(e,t,i,r),nc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ht(),i=Kr(t),s=dr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Hr(t,s,i),e!==null&&(Vn(e,t,i,r),nc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ht(),r=Kr(t),i=dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Hr(t,i,r),e!==null&&(Vn(e,t,r,n),nc(e,t,r))}};function ux(t,e,n,r,i,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,a):e.prototype&&e.prototype.isPureReactComponent?!Na(n,r)||!Na(i,s):!0}function mw(t,e,n){var r=!1,i=ti,s=e.contextType;return typeof s=="object"&&s!==null?s=Cn(s):(i=nn(e)?Fi:Bt.current,r=e.contextTypes,s=(r=r!=null)?$s(t,i):ti),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_u,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function dx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_u.enqueueReplaceState(e,e.state,null)}function Zh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Up(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Cn(s):(s=nn(e)?Fi:Bt.current,i.context=$s(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Jh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&_u.enqueueReplaceState(i,i.state,null),Lc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gs(t,e){try{var n="",r=e;do n+=$5(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ld(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ef(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var g4=typeof WeakMap=="function"?WeakMap:Map;function gw(t,e,n){n=dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$c||($c=!0,df=r),ef(t,e)},n}function xw(t,e,n){n=dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ef(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){ef(t,e),typeof r!="function"&&(Gr===null?Gr=new Set([this]):Gr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function hx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new g4;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=z4.bind(null,t,e,n),e.then(t,t))}function fx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function px(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=dr(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var x4=jr.ReactCurrentOwner,Zt=!1;function $t(t,e,n,r){e.child=t===null?Hb(e,null,n,r):qs(e,t.child,n,r)}function mx(t,e,n,r,i){n=n.render;var s=e.ref;return Ds(e,i),r=Gp(t,e,n,r,s,i),n=Kp(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gr(t,e,i)):(Ye&&n&&Dp(e),e.flags|=1,$t(t,e,r,i),e.child)}function gx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!i0(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,yw(t,e,s,r,i)):(t=lc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var a=s.memoizedProps;if(n=n.compare,n=n!==null?n:Na,n(a,r)&&t.ref===e.ref)return gr(t,e,i)}return e.flags|=1,t=Qr(s,r),t.ref=e.ref,t.return=e,e.child=t}function yw(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Na(s,r)&&t.ref===e.ref)if(Zt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Zt=!0);else return e.lanes=t.lanes,gr(t,e,i)}return tf(t,e,n,r,i)}function vw(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Be(js,an),an|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Be(js,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Be(js,an),an|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Be(js,an),an|=r;return $t(t,e,i,n),e.child}function bw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tf(t,e,n,r,i){var s=nn(n)?Fi:Bt.current;return s=$s(e,s),Ds(e,i),n=Gp(t,e,n,r,s,i),r=Kp(),t!==null&&!Zt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,gr(t,e,i)):(Ye&&r&&Dp(e),e.flags|=1,$t(t,e,n,i),e.child)}function xx(t,e,n,r,i){if(nn(n)){var s=!0;Pc(e)}else s=!1;if(Ds(e,i),e.stateNode===null)sc(t,e),mw(e,n,r),Zh(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=Cn(d):(d=nn(n)?Fi:Bt.current,d=$s(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&dx(e,a,r,d),Vr=!1;var m=e.memoizedState;a.state=m,Lc(e,r,a,i),c=e.memoizedState,l!==r||m!==c||tn.current||Vr?(typeof h=="function"&&(Jh(e,n,h,r),c=e.memoizedState),(l=Vr||ux(e,n,l,r,m,c,d))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Kb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:In(e.type,l),a.props=d,p=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=Cn(c):(c=nn(n)?Fi:Bt.current,c=$s(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||m!==c)&&dx(e,a,r,c),Vr=!1,m=e.memoizedState,a.state=m,Lc(e,r,a,i);var N=e.memoizedState;l!==p||m!==N||tn.current||Vr?(typeof v=="function"&&(Jh(e,n,v,r),N=e.memoizedState),(d=Vr||ux(e,n,d,r,m,N,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return nf(t,e,n,r,s,i)}function nf(t,e,n,r,i,s){bw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&nx(e,n,!1),gr(t,e,s);r=e.stateNode,x4.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=qs(e,t.child,null,s),e.child=qs(e,null,l,s)):$t(t,e,l,s),e.memoizedState=r.state,i&&nx(e,n,!0),e.child}function ww(t){var e=t.stateNode;e.pendingContext?tx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tx(t,e.context,!1),$p(t,e.containerInfo)}function yx(t,e,n,r,i){return Ws(),Mp(i),e.flags|=256,$t(t,e,n,r),e.child}var rf={dehydrated:null,treeContext:null,retryLane:0};function sf(t){return{baseLanes:t,cachePool:null,transitions:null}}function kw(t,e,n){var r=e.pendingProps,i=Ze.current,s=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Be(Ze,i&1),t===null)return Yh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,s?(r=e.mode,s=e.child,a={mode:"hidden",children:a},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Cu(a,r,0,null),t=Vi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=sf(n),e.memoizedState=rf,t):Xp(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return y4(t,e,a,r,l,i,n);if(s){s=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Qr(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Qr(l,s):(s=Vi(s,a,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,a=t.child.memoizedState,a=a===null?sf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~n,e.memoizedState=rf,r}return s=t.child,t=s.sibling,r=Qr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Xp(t,e){return e=Cu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vl(t,e,n,r){return r!==null&&Mp(r),qs(e,t.child,null,n),t=Xp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function y4(t,e,n,r,i,s,a){if(n)return e.flags&256?(e.flags&=-257,r=Ld(Error(X(422))),Vl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Cu({mode:"visible",children:r.children},i,0,null),s=Vi(s,i,a,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&qs(e,t.child,null,a),e.child.memoizedState=sf(a),e.memoizedState=rf,s);if(!(e.mode&1))return Vl(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=Ld(s,r,void 0),Vl(t,e,a,r)}if(l=(a&t.childLanes)!==0,Zt||l){if(r=Ct,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,mr(t,i),Vn(r,t,i,-1))}return r0(),r=Ld(Error(X(421))),Vl(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=I4.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ln=qr(i.nextSibling),cn=e,Ye=!0,Pn=null,t!==null&&(xn[yn++]=cr,xn[yn++]=ur,xn[yn++]=Bi,cr=t.id,ur=t.overflow,Bi=e),e=Xp(e,r.children),e.flags|=4096,e)}function vx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xh(t.return,e,n)}function Od(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function _w(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if($t(t,e,r.children,n),r=Ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&vx(t,n,e);else if(t.tag===19)vx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Be(Ze,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Oc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Od(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Oc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Od(e,!0,n,null,s);break;case"together":Od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function sc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),$i|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function v4(t,e,n){switch(e.tag){case 3:ww(e),Ws();break;case 5:Qb(e);break;case 1:nn(e.type)&&Pc(e);break;case 4:$p(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Be(Vc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Be(Ze,Ze.current&1),e.flags|=128,null):n&e.child.childLanes?kw(t,e,n):(Be(Ze,Ze.current&1),t=gr(t,e,n),t!==null?t.sibling:null);Be(Ze,Ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _w(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Be(Ze,Ze.current),r)break;return null;case 22:case 23:return e.lanes=0,vw(t,e,n)}return gr(t,e,n)}var Nw,of,jw,Cw;Nw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};of=function(){};jw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,zi(Kn.current);var s=null;switch(n){case"input":i=Eh(t,i),r=Eh(t,r),s=[];break;case"select":i=tt({},i,{value:void 0}),r=tt({},r,{value:void 0}),s=[];break;case"textarea":i=zh(t,i),r=zh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ic)}Ah(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xa.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&$e("scroll",t),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};Cw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function b4(t,e,n){var r=e.pendingProps;switch(Vp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(e),null;case 1:return nn(e.type)&&Ac(),Vt(e),null;case 3:return r=e.stateNode,Hs(),qe(tn),qe(Bt),qp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Rl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pn!==null&&(pf(Pn),Pn=null))),of(t,e),Vt(e),null;case 5:Wp(e);var i=zi(Sa.current);if(n=e.type,t!==null&&e.stateNode!=null)jw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return Vt(e),null}if(t=zi(Kn.current),Rl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Hn]=e,r[Ea]=s,t=(e.mode&1)!==0,n){case"dialog":$e("cancel",r),$e("close",r);break;case"iframe":case"object":case"embed":$e("load",r);break;case"video":case"audio":for(i=0;i<Ho.length;i++)$e(Ho[i],r);break;case"source":$e("error",r);break;case"img":case"image":case"link":$e("error",r),$e("load",r);break;case"details":$e("toggle",r);break;case"input":Tg(r,s),$e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},$e("invalid",r);break;case"textarea":zg(r,s),$e("invalid",r)}Ah(n,s),i=null;for(var a in s)if(s.hasOwnProperty(a)){var l=s[a];a==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Pl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Pl(r.textContent,l,t),i=["children",""+l]):xa.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&$e("scroll",r)}switch(n){case"input":jl(r),Sg(r,s,!0);break;case"textarea":jl(r),Ig(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ic)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=eb(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Hn]=e,t[Ea]=r,Nw(t,e,!1,!1),e.stateNode=t;e:{switch(a=Ph(n,r),n){case"dialog":$e("cancel",t),$e("close",t),i=r;break;case"iframe":case"object":case"embed":$e("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ho.length;i++)$e(Ho[i],t);i=r;break;case"source":$e("error",t),i=r;break;case"img":case"image":case"link":$e("error",t),$e("load",t),i=r;break;case"details":$e("toggle",t),i=r;break;case"input":Tg(t,r),i=Eh(t,r),$e("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=tt({},r,{value:void 0}),$e("invalid",t);break;case"textarea":zg(t,r),i=zh(t,r),$e("invalid",t);break;default:i=r}Ah(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?rb(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&tb(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ya(t,c):typeof c=="number"&&ya(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(xa.hasOwnProperty(s)?c!=null&&s==="onScroll"&&$e("scroll",t):c!=null&&wp(t,s,c,a))}switch(n){case"input":jl(t),Sg(t,r,!1);break;case"textarea":jl(t),Ig(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ei(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Is(t,!!r.multiple,s,!1):r.defaultValue!=null&&Is(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ic)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vt(e),null;case 6:if(t&&e.stateNode!=null)Cw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=zi(Sa.current),zi(Kn.current),Rl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Hn]=e,(s=r.nodeValue!==n)&&(t=cn,t!==null))switch(t.tag){case 3:Pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Pl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hn]=e,e.stateNode=r}return Vt(e),null;case 13:if(qe(Ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&ln!==null&&e.mode&1&&!(e.flags&128))Wb(),Ws(),e.flags|=98560,s=!1;else if(s=Rl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Hn]=e}else Ws(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vt(e),s=!1}else Pn!==null&&(pf(Pn),Pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ze.current&1?vt===0&&(vt=3):r0())),e.updateQueue!==null&&(e.flags|=4),Vt(e),null);case 4:return Hs(),of(t,e),t===null&&ja(e.stateNode.containerInfo),Vt(e),null;case 10:return Fp(e.type._context),Vt(e),null;case 17:return nn(e.type)&&Ac(),Vt(e),null;case 19:if(qe(Ze),s=e.memoizedState,s===null)return Vt(e),null;if(r=(e.flags&128)!==0,a=s.rendering,a===null)if(r)Mo(s,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Oc(t),a!==null){for(e.flags|=128,Mo(s,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Be(Ze,Ze.current&1|2),e.child}t=t.sibling}s.tail!==null&&ct()>Ks&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Oc(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Ye)return Vt(e),null}else 2*ct()-s.renderingStartTime>Ks&&n!==1073741824&&(e.flags|=128,r=!0,Mo(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(n=s.last,n!==null?n.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ct(),e.sibling=null,n=Ze.current,Be(Ze,r?n&1|2:n&1),e):(Vt(e),null);case 22:case 23:return n0(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(Vt(e),e.subtreeFlags&6&&(e.flags|=8192)):Vt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function w4(t,e){switch(Vp(e),e.tag){case 1:return nn(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Hs(),qe(tn),qe(Bt),qp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Wp(e),null;case 13:if(qe(Ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Ws()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ze),null;case 4:return Hs(),null;case 10:return Fp(e.type._context),null;case 22:case 23:return n0(),null;case 24:return null;default:return null}}var Ml=!1,Ot=!1,k4=typeof WeakSet=="function"?WeakSet:Set,le=null;function Ns(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function af(t,e,n){try{n()}catch(r){st(t,e,r)}}var bx=!1;function _4(t,e){if($h=Tc,t=Ib(),Rp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(l=a+i),p!==s||r!==0&&p.nodeType!==3||(c=a+r),p.nodeType===3&&(a+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++d===i&&(l=a),m===s&&++h===r&&(c=a),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wh={focusedElem:t,selectionRange:n},Tc=!1,le=e;le!==null;)if(e=le,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,le=t;else for(;le!==null;){e=le;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var z=N.memoizedProps,R=N.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?z:In(e.type,z),R);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(D){st(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,le=t;break}le=e.return}return N=bx,bx=!1,N}function ia(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&af(e,n,s)}i=i.next}while(i!==r)}}function Nu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function lf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ew(t){var e=t.alternate;e!==null&&(t.alternate=null,Ew(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hn],delete e[Ea],delete e[Gh],delete e[s4],delete e[o4])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tw(t){return t.tag===5||t.tag===3||t.tag===4}function wx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ic));else if(r!==4&&(t=t.child,t!==null))for(cf(t,e,n),t=t.sibling;t!==null;)cf(t,e,n),t=t.sibling}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}var Et=null,An=!1;function Pr(t,e,n){for(n=n.child;n!==null;)Sw(t,e,n),n=n.sibling}function Sw(t,e,n){if(Gn&&typeof Gn.onCommitFiberUnmount=="function")try{Gn.onCommitFiberUnmount(gu,n)}catch{}switch(n.tag){case 5:Ot||Ns(n,e);case 6:var r=Et,i=An;Et=null,Pr(t,e,n),Et=r,An=i,Et!==null&&(An?(t=Et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Et.removeChild(n.stateNode));break;case 18:Et!==null&&(An?(t=Et,n=n.stateNode,t.nodeType===8?Ad(t.parentNode,n):t.nodeType===1&&Ad(t,n),ka(t)):Ad(Et,n.stateNode));break;case 4:r=Et,i=An,Et=n.stateNode.containerInfo,An=!0,Pr(t,e,n),Et=r,An=i;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&af(n,e,a),i=i.next}while(i!==r)}Pr(t,e,n);break;case 1:if(!Ot&&(Ns(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){st(n,e,l)}Pr(t,e,n);break;case 21:Pr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Pr(t,e,n),Ot=r):Pr(t,e,n);break;default:Pr(t,e,n)}}function kx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new k4),e.forEach(function(r){var i=A4.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Et=l.stateNode,An=!1;break e;case 3:Et=l.stateNode.containerInfo,An=!0;break e;case 4:Et=l.stateNode.containerInfo,An=!0;break e}l=l.return}if(Et===null)throw Error(X(160));Sw(s,a,i),Et=null,An=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){st(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zw(e,t),e=e.sibling}function zw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Tn(e,t),Bn(t),r&4){try{ia(3,t,t.return),Nu(3,t)}catch(z){st(t,t.return,z)}try{ia(5,t,t.return)}catch(z){st(t,t.return,z)}}break;case 1:Tn(e,t),Bn(t),r&512&&n!==null&&Ns(n,n.return);break;case 5:if(Tn(e,t),Bn(t),r&512&&n!==null&&Ns(n,n.return),t.flags&32){var i=t.stateNode;try{ya(i,"")}catch(z){st(t,t.return,z)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,a=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&J1(i,s),Ph(l,a);var d=Ph(l,s);for(a=0;a<c.length;a+=2){var h=c[a],p=c[a+1];h==="style"?rb(i,p):h==="dangerouslySetInnerHTML"?tb(i,p):h==="children"?ya(i,p):wp(i,h,p,d)}switch(l){case"input":Th(i,s);break;case"textarea":Z1(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?Is(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?Is(i,!!s.multiple,s.defaultValue,!0):Is(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ea]=s}catch(z){st(t,t.return,z)}}break;case 6:if(Tn(e,t),Bn(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(z){st(t,t.return,z)}}break;case 3:if(Tn(e,t),Bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ka(e.containerInfo)}catch(z){st(t,t.return,z)}break;case 4:Tn(e,t),Bn(t);break;case 13:Tn(e,t),Bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(e0=ct())),r&4&&kx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(d=Ot)||h,Tn(e,t),Ot=d):Tn(e,t),Bn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(le=t,h=t.child;h!==null;){for(p=le=h;le!==null;){switch(m=le,v=m.child,m.tag){case 0:case 11:case 14:case 15:ia(4,m,m.return);break;case 1:Ns(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(z){st(r,n,z)}}break;case 5:Ns(m,m.return);break;case 22:if(m.memoizedState!==null){Nx(p);continue}}v!==null?(v.return=m,le=v):Nx(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=nb("display",a))}catch(z){st(t,t.return,z)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(z){st(t,t.return,z)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Tn(e,t),Bn(t),r&4&&kx(t);break;case 21:break;default:Tn(e,t),Bn(t)}}function Bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tw(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ya(i,""),r.flags&=-33);var s=wx(t);uf(t,s,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=wx(t);cf(t,l,a);break;default:throw Error(X(161))}}catch(c){st(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function N4(t,e,n){le=t,Iw(t)}function Iw(t,e,n){for(var r=(t.mode&1)!==0;le!==null;){var i=le,s=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Ml;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ot;l=Ml;var d=Ot;if(Ml=a,(Ot=c)&&!d)for(le=i;le!==null;)a=le,c=a.child,a.tag===22&&a.memoizedState!==null?jx(i):c!==null?(c.return=a,le=c):jx(i);for(;s!==null;)le=s,Iw(s),s=s.sibling;le=i,Ml=l,Ot=d}_x(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,le=s):_x(t)}}function _x(t){for(;le!==null;){var e=le;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Nu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:In(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&ax(e,s,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ax(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ka(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Ot||e.flags&512&&lf(e)}catch(m){st(e,e.return,m)}}if(e===t){le=null;break}if(n=e.sibling,n!==null){n.return=e.return,le=n;break}le=e.return}}function Nx(t){for(;le!==null;){var e=le;if(e===t){le=null;break}var n=e.sibling;if(n!==null){n.return=e.return,le=n;break}le=e.return}}function jx(t){for(;le!==null;){var e=le;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Nu(4,e)}catch(c){st(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){st(e,i,c)}}var s=e.return;try{lf(e)}catch(c){st(e,s,c)}break;case 5:var a=e.return;try{lf(e)}catch(c){st(e,a,c)}}}catch(c){st(e,e.return,c)}if(e===t){le=null;break}var l=e.sibling;if(l!==null){l.return=e.return,le=l;break}le=e.return}}var j4=Math.ceil,Uc=jr.ReactCurrentDispatcher,Jp=jr.ReactCurrentOwner,_n=jr.ReactCurrentBatchConfig,ze=0,Ct=null,ht=null,At=0,an=0,js=hi(0),vt=0,Pa=null,$i=0,ju=0,Zp=0,sa=null,Jt=null,e0=0,Ks=1/0,or=null,$c=!1,df=null,Gr=null,Ll=!1,Fr=null,Wc=0,oa=0,hf=null,oc=-1,ac=0;function Ht(){return ze&6?ct():oc!==-1?oc:oc=ct()}function Kr(t){return t.mode&1?ze&2&&At!==0?At&-At:l4.transition!==null?(ac===0&&(ac=mb()),ac):(t=De,t!==0||(t=window.event,t=t===void 0?16:kb(t.type)),t):1}function Vn(t,e,n,r){if(50<oa)throw oa=0,hf=null,Error(X(185));Qa(t,n,r),(!(ze&2)||t!==Ct)&&(t===Ct&&(!(ze&2)&&(ju|=n),vt===4&&Lr(t,At)),rn(t,r),n===1&&ze===0&&!(e.mode&1)&&(Ks=ct()+500,wu&&fi()))}function rn(t,e){var n=t.callbackNode;lj(t,e);var r=Ec(t,t===Ct?At:0);if(r===0)n!==null&&Rg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Rg(n),e===1)t.tag===0?a4(Cx.bind(null,t)):Bb(Cx.bind(null,t)),r4(function(){!(ze&6)&&fi()}),n=null;else{switch(gb(r)){case 1:n=Cp;break;case 4:n=fb;break;case 16:n=Cc;break;case 536870912:n=pb;break;default:n=Cc}n=Ow(n,Aw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Aw(t,e){if(oc=-1,ac=0,ze&6)throw Error(X(327));var n=t.callbackNode;if(Vs()&&t.callbackNode!==n)return null;var r=Ec(t,t===Ct?At:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=qc(t,r);else{e=r;var i=ze;ze|=2;var s=Rw();(Ct!==t||At!==e)&&(or=null,Ks=ct()+500,Di(t,e));do try{T4();break}catch(l){Pw(t,l)}while(!0);Op(),Uc.current=s,ze=i,ht!==null?e=0:(Ct=null,At=0,e=vt)}if(e!==0){if(e===2&&(i=Lh(t),i!==0&&(r=i,e=ff(t,i))),e===1)throw n=Pa,Di(t,0),Lr(t,r),rn(t,ct()),n;if(e===6)Lr(t,r);else{if(i=t.current.alternate,!(r&30)&&!C4(i)&&(e=qc(t,r),e===2&&(s=Lh(t),s!==0&&(r=s,e=ff(t,s))),e===1))throw n=Pa,Di(t,0),Lr(t,r),rn(t,ct()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:Ni(t,Jt,or);break;case 3:if(Lr(t,r),(r&130023424)===r&&(e=e0+500-ct(),10<e)){if(Ec(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ht(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Hh(Ni.bind(null,t,Jt,or),e);break}Ni(t,Jt,or);break;case 4:if(Lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Dn(r);s=1<<a,a=e[a],a>i&&(i=a),r&=~s}if(r=i,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*j4(r/1960))-r,10<r){t.timeoutHandle=Hh(Ni.bind(null,t,Jt,or),r);break}Ni(t,Jt,or);break;case 5:Ni(t,Jt,or);break;default:throw Error(X(329))}}}return rn(t,ct()),t.callbackNode===n?Aw.bind(null,t):null}function ff(t,e){var n=sa;return t.current.memoizedState.isDehydrated&&(Di(t,e).flags|=256),t=qc(t,e),t!==2&&(e=Jt,Jt=n,e!==null&&pf(e)),t}function pf(t){Jt===null?Jt=t:Jt.push.apply(Jt,t)}function C4(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Mn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lr(t,e){for(e&=~Zp,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dn(e),r=1<<n;t[n]=-1,e&=~r}}function Cx(t){if(ze&6)throw Error(X(327));Vs();var e=Ec(t,0);if(!(e&1))return rn(t,ct()),null;var n=qc(t,e);if(t.tag!==0&&n===2){var r=Lh(t);r!==0&&(e=r,n=ff(t,r))}if(n===1)throw n=Pa,Di(t,0),Lr(t,e),rn(t,ct()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ni(t,Jt,or),rn(t,ct()),null}function t0(t,e){var n=ze;ze|=1;try{return t(e)}finally{ze=n,ze===0&&(Ks=ct()+500,wu&&fi())}}function Wi(t){Fr!==null&&Fr.tag===0&&!(ze&6)&&Vs();var e=ze;ze|=1;var n=_n.transition,r=De;try{if(_n.transition=null,De=1,t)return t()}finally{De=r,_n.transition=n,ze=e,!(ze&6)&&fi()}}function n0(){an=js.current,qe(js)}function Di(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,n4(n)),ht!==null)for(n=ht.return;n!==null;){var r=n;switch(Vp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ac();break;case 3:Hs(),qe(tn),qe(Bt),qp();break;case 5:Wp(r);break;case 4:Hs();break;case 13:qe(Ze);break;case 19:qe(Ze);break;case 10:Fp(r.type._context);break;case 22:case 23:n0()}n=n.return}if(Ct=t,ht=t=Qr(t.current,null),At=an=e,vt=0,Pa=null,Zp=ju=$i=0,Jt=sa=null,Si!==null){for(e=0;e<Si.length;e++)if(n=Si[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var a=s.next;s.next=i,r.next=a}n.pending=r}Si=null}return t}function Pw(t,e){do{var n=ht;try{if(Op(),rc.current=Bc,Fc){for(var r=et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Fc=!1}if(Ui=0,jt=yt=et=null,ra=!1,za=0,Jp.current=null,n===null||n.return===null){vt=1,Pa=e,ht=null;break}e:{var s=t,a=n.return,l=n,c=e;if(e=At,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=fx(a);if(v!==null){v.flags&=-257,px(v,a,l,s,e),v.mode&1&&hx(s,d,e),e=v,c=d;var N=e.updateQueue;if(N===null){var z=new Set;z.add(c),e.updateQueue=z}else N.add(c);break e}else{if(!(e&1)){hx(s,d,e),r0();break e}c=Error(X(426))}}else if(Ye&&l.mode&1){var R=fx(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),px(R,a,l,s,e),Mp(Gs(c,l));break e}}s=c=Gs(c,l),vt!==4&&(vt=2),sa===null?sa=[s]:sa.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var w=gw(s,c,e);ox(s,w);break e;case 1:l=c;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Gr===null||!Gr.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=xw(s,l,e);ox(s,D);break e}}s=s.return}while(s!==null)}Vw(n)}catch(L){e=L,ht===n&&n!==null&&(ht=n=n.return);continue}break}while(!0)}function Rw(){var t=Uc.current;return Uc.current=Bc,t===null?Bc:t}function r0(){(vt===0||vt===3||vt===2)&&(vt=4),Ct===null||!($i&268435455)&&!(ju&268435455)||Lr(Ct,At)}function qc(t,e){var n=ze;ze|=2;var r=Rw();(Ct!==t||At!==e)&&(or=null,Di(t,e));do try{E4();break}catch(i){Pw(t,i)}while(!0);if(Op(),ze=n,Uc.current=r,ht!==null)throw Error(X(261));return Ct=null,At=0,vt}function E4(){for(;ht!==null;)Dw(ht)}function T4(){for(;ht!==null&&!Z5();)Dw(ht)}function Dw(t){var e=Lw(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?Vw(t):ht=e,Jp.current=null}function Vw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=w4(n,e),n!==null){n.flags&=32767,ht=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ht=null;return}}else if(n=b4(n,e,an),n!==null){ht=n;return}if(e=e.sibling,e!==null){ht=e;return}ht=e=t}while(e!==null);vt===0&&(vt=5)}function Ni(t,e,n){var r=De,i=_n.transition;try{_n.transition=null,De=1,S4(t,e,n,r)}finally{_n.transition=i,De=r}return null}function S4(t,e,n,r){do Vs();while(Fr!==null);if(ze&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(cj(t,s),t===Ct&&(ht=Ct=null,At=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ll||(Ll=!0,Ow(Cc,function(){return Vs(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=_n.transition,_n.transition=null;var a=De;De=1;var l=ze;ze|=4,Jp.current=null,_4(t,n),zw(n,t),Qj(Wh),Tc=!!$h,Wh=$h=null,t.current=n,N4(n),ej(),ze=l,De=a,_n.transition=s}else t.current=n;if(Ll&&(Ll=!1,Fr=t,Wc=i),s=t.pendingLanes,s===0&&(Gr=null),rj(n.stateNode),rn(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($c)throw $c=!1,t=df,df=null,t;return Wc&1&&t.tag!==0&&Vs(),s=t.pendingLanes,s&1?t===hf?oa++:(oa=0,hf=t):oa=0,fi(),null}function Vs(){if(Fr!==null){var t=gb(Wc),e=_n.transition,n=De;try{if(_n.transition=null,De=16>t?16:t,Fr===null)var r=!1;else{if(t=Fr,Fr=null,Wc=0,ze&6)throw Error(X(331));var i=ze;for(ze|=4,le=t.current;le!==null;){var s=le,a=s.child;if(le.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(le=d;le!==null;){var h=le;switch(h.tag){case 0:case 11:case 15:ia(8,h,s)}var p=h.child;if(p!==null)p.return=h,le=p;else for(;le!==null;){h=le;var m=h.sibling,v=h.return;if(Ew(h),h===d){le=null;break}if(m!==null){m.return=v,le=m;break}le=v}}}var N=s.alternate;if(N!==null){var z=N.child;if(z!==null){N.child=null;do{var R=z.sibling;z.sibling=null,z=R}while(z!==null)}}le=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,le=a;else e:for(;le!==null;){if(s=le,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ia(9,s,s.return)}var w=s.sibling;if(w!==null){w.return=s.return,le=w;break e}le=s.return}}var x=t.current;for(le=x;le!==null;){a=le;var b=a.child;if(a.subtreeFlags&2064&&b!==null)b.return=a,le=b;else e:for(a=x;le!==null;){if(l=le,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Nu(9,l)}}catch(L){st(l,l.return,L)}if(l===a){le=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,le=D;break e}le=l.return}}if(ze=i,fi(),Gn&&typeof Gn.onPostCommitFiberRoot=="function")try{Gn.onPostCommitFiberRoot(gu,t)}catch{}r=!0}return r}finally{De=n,_n.transition=e}}return!1}function Ex(t,e,n){e=Gs(n,e),e=gw(t,e,1),t=Hr(t,e,1),e=Ht(),t!==null&&(Qa(t,1,e),rn(t,e))}function st(t,e,n){if(t.tag===3)Ex(t,t,n);else for(;e!==null;){if(e.tag===3){Ex(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gr===null||!Gr.has(r))){t=Gs(n,t),t=xw(e,t,1),e=Hr(e,t,1),t=Ht(),e!==null&&(Qa(e,1,t),rn(e,t));break}}e=e.return}}function z4(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ht(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(At&n)===n&&(vt===4||vt===3&&(At&130023424)===At&&500>ct()-e0?Di(t,0):Zp|=n),rn(t,e)}function Mw(t,e){e===0&&(t.mode&1?(e=Tl,Tl<<=1,!(Tl&130023424)&&(Tl=4194304)):e=1);var n=Ht();t=mr(t,e),t!==null&&(Qa(t,e,n),rn(t,n))}function I4(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mw(t,n)}function A4(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),Mw(t,n)}var Lw;Lw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tn.current)Zt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zt=!1,v4(t,e,n);Zt=!!(t.flags&131072)}else Zt=!1,Ye&&e.flags&1048576&&Ub(e,Dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;sc(t,e),t=e.pendingProps;var i=$s(e,Bt.current);Ds(e,n),i=Gp(null,e,r,t,i,n);var s=Kp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nn(r)?(s=!0,Pc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Up(e),i.updater=_u,e.stateNode=i,i._reactInternals=e,Zh(e,r,t,n),e=nf(null,e,r,!0,s,n)):(e.tag=0,Ye&&s&&Dp(e),$t(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(sc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=R4(r),t=In(r,t),i){case 0:e=tf(null,e,r,t,n);break e;case 1:e=xx(null,e,r,t,n);break e;case 11:e=mx(null,e,r,t,n);break e;case 14:e=gx(null,e,r,In(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),tf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),xx(t,e,r,i,n);case 3:e:{if(ww(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Kb(t,e),Lc(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Gs(Error(X(423)),e),e=yx(t,e,r,n,i);break e}else if(r!==i){i=Gs(Error(X(424)),e),e=yx(t,e,r,n,i);break e}else for(ln=qr(e.stateNode.containerInfo.firstChild),cn=e,Ye=!0,Pn=null,n=Hb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ws(),r===i){e=gr(t,e,n);break e}$t(t,e,r,n)}e=e.child}return e;case 5:return Qb(e),t===null&&Yh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,a=i.children,qh(r,i)?a=null:s!==null&&qh(r,s)&&(e.flags|=32),bw(t,e),$t(t,e,a,n),e.child;case 6:return t===null&&Yh(e),null;case 13:return kw(t,e,n);case 4:return $p(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=qs(e,null,r,n):$t(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),mx(t,e,r,i,n);case 7:return $t(t,e,e.pendingProps,n),e.child;case 8:return $t(t,e,e.pendingProps.children,n),e.child;case 12:return $t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,Be(Vc,r._currentValue),r._currentValue=a,s!==null)if(Mn(s.value,a)){if(s.children===i.children&&!tn.current){e=gr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){a=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=dr(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Xh(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(X(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Xh(a,n,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}$t(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ds(e,n),i=Cn(i),r=r(i),e.flags|=1,$t(t,e,r,n),e.child;case 14:return r=e.type,i=In(r,e.pendingProps),i=In(r.type,i),gx(t,e,r,i,n);case 15:return yw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:In(r,i),sc(t,e),e.tag=1,nn(r)?(t=!0,Pc(e)):t=!1,Ds(e,n),mw(e,r,i),Zh(e,r,i,n),nf(null,e,r,!0,t,n);case 19:return _w(t,e,n);case 22:return vw(t,e,n)}throw Error(X(156,e.tag))};function Ow(t,e){return hb(t,e)}function P4(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(t,e,n,r){return new P4(t,e,n,r)}function i0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function R4(t){if(typeof t=="function")return i0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_p)return 11;if(t===Np)return 14}return 2}function Qr(t,e){var n=t.alternate;return n===null?(n=wn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lc(t,e,n,r,i,s){var a=2;if(r=t,typeof t=="function")i0(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ms:return Vi(n.children,i,s,e);case kp:a=8,i|=8;break;case _h:return t=wn(12,n,e,i|2),t.elementType=_h,t.lanes=s,t;case Nh:return t=wn(13,n,e,i),t.elementType=Nh,t.lanes=s,t;case jh:return t=wn(19,n,e,i),t.elementType=jh,t.lanes=s,t;case Q1:return Cu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case G1:a=10;break e;case K1:a=9;break e;case _p:a=11;break e;case Np:a=14;break e;case Dr:a=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=wn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vi(t,e,n,r){return t=wn(7,t,r,e),t.lanes=n,t}function Cu(t,e,n,r){return t=wn(22,t,r,e),t.elementType=Q1,t.lanes=n,t.stateNode={isHidden:!1},t}function Fd(t,e,n){return t=wn(6,t,null,e),t.lanes=n,t}function Bd(t,e,n){return e=wn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function D4(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wd(0),this.expirationTimes=wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function s0(t,e,n,r,i,s,a,l,c){return t=new D4(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Up(s),t}function V4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ps,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fw(t){if(!t)return ti;t=t._reactInternals;e:{if(Xi(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(nn(n))return Fb(t,n,e)}return e}function Bw(t,e,n,r,i,s,a,l,c){return t=s0(n,r,!0,t,i,s,a,l,c),t.context=Fw(null),n=t.current,r=Ht(),i=Kr(n),s=dr(r,i),s.callback=e??null,Hr(n,s,i),t.current.lanes=i,Qa(t,i,r),rn(t,r),t}function Eu(t,e,n,r){var i=e.current,s=Ht(),a=Kr(i);return n=Fw(n),e.context===null?e.context=n:e.pendingContext=n,e=dr(s,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(i,e,a),t!==null&&(Vn(t,i,a,s),nc(t,i,a)),a}function Hc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function o0(t,e){Tx(t,e),(t=t.alternate)&&Tx(t,e)}function M4(){return null}var Uw=typeof reportError=="function"?reportError:function(t){console.error(t)};function a0(t){this._internalRoot=t}Tu.prototype.render=a0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));Eu(t,e,null,null)};Tu.prototype.unmount=a0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Wi(function(){Eu(null,t,null,null)}),e[pr]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=vb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mr.length&&e!==0&&e<Mr[n].priority;n++);Mr.splice(n,0,t),n===0&&wb(t)}};function l0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sx(){}function L4(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Hc(a);s.call(d)}}var a=Bw(e,r,t,0,null,!1,!1,"",Sx);return t._reactRootContainer=a,t[pr]=a.current,ja(t.nodeType===8?t.parentNode:t),Wi(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Hc(c);l.call(d)}}var c=s0(t,0,!1,null,null,!1,!1,"",Sx);return t._reactRootContainer=c,t[pr]=c.current,ja(t.nodeType===8?t.parentNode:t),Wi(function(){Eu(e,c,n,r)}),c}function zu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if(typeof i=="function"){var l=i;i=function(){var c=Hc(a);l.call(c)}}Eu(e,a,t,i)}else a=L4(n,e,t,i,r);return Hc(a)}xb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=qo(e.pendingLanes);n!==0&&(Ep(e,n|1),rn(e,ct()),!(ze&6)&&(Ks=ct()+500,fi()))}break;case 13:Wi(function(){var r=mr(t,1);if(r!==null){var i=Ht();Vn(r,t,1,i)}}),o0(t,1)}};Tp=function(t){if(t.tag===13){var e=mr(t,134217728);if(e!==null){var n=Ht();Vn(e,t,134217728,n)}o0(t,134217728)}};yb=function(t){if(t.tag===13){var e=Kr(t),n=mr(t,e);if(n!==null){var r=Ht();Vn(n,t,e,r)}o0(t,e)}};vb=function(){return De};bb=function(t,e){var n=De;try{return De=t,e()}finally{De=n}};Dh=function(t,e,n){switch(e){case"input":if(Th(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=bu(r);if(!i)throw Error(X(90));X1(r),Th(r,i)}}}break;case"textarea":Z1(t,n);break;case"select":e=n.value,e!=null&&Is(t,!!n.multiple,e,!1)}};ob=t0;ab=Wi;var O4={usingClientEntryPoint:!1,Events:[Xa,vs,bu,ib,sb,t0]},Lo={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F4={bundleType:Lo.bundleType,version:Lo.version,rendererPackageName:Lo.rendererPackageName,rendererConfig:Lo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ub(t),t===null?null:t.stateNode},findFiberByHostInstance:Lo.findFiberByHostInstance||M4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ol=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ol.isDisabled&&Ol.supportsFiber)try{gu=Ol.inject(F4),Gn=Ol}catch{}}hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O4;hn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l0(e))throw Error(X(200));return V4(t,e,null,n)};hn.createRoot=function(t,e){if(!l0(t))throw Error(X(299));var n=!1,r="",i=Uw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=s0(t,1,!1,null,null,n,!1,r,i),t[pr]=e.current,ja(t.nodeType===8?t.parentNode:t),new a0(e)};hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=ub(e),t=t===null?null:t.stateNode,t};hn.flushSync=function(t){return Wi(t)};hn.hydrate=function(t,e,n){if(!Su(e))throw Error(X(200));return zu(null,t,e,!0,n)};hn.hydrateRoot=function(t,e,n){if(!l0(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",a=Uw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Bw(e,null,t,1,n??null,i,!1,s,a),t[pr]=e.current,ja(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Tu(e)};hn.render=function(t,e,n){if(!Su(e))throw Error(X(200));return zu(null,t,e,!1,n)};hn.unmountComponentAtNode=function(t){if(!Su(t))throw Error(X(40));return t._reactRootContainer?(Wi(function(){zu(null,null,t,!1,function(){t._reactRootContainer=null,t[pr]=null})}),!0):!1};hn.unstable_batchedUpdates=t0;hn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Su(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return zu(t,e,n,!1,r)};hn.version="18.3.1-next-f1338f8080-20240426";function $w(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($w)}catch(t){console.error(t)}}$w(),$1.exports=hn;var bt=$1.exports,zx=bt;wh.createRoot=zx.createRoot,wh.hydrateRoot=zx.hydrateRoot;const c0=S.createContext({});function pi(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const u0=typeof window<"u",d0=u0?S.useLayoutEffect:S.useEffect,Iu=S.createContext(null);function h0(t,e){t.indexOf(e)===-1&&t.push(e)}function f0(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function B4([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}const xr=(t,e,n)=>n>e?e:n<t?t:n;let p0=()=>{};const yr={},Ww=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function qw(t){return typeof t=="object"&&t!==null}const Hw=t=>/^0[^.\s]+$/u.test(t);function m0(t){let e;return()=>(e===void 0&&(e=t()),e)}const Nn=t=>t,U4=(t,e)=>n=>e(t(n)),Za=(...t)=>t.reduce(U4),Ra=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class g0{constructor(){this.subscriptions=[]}add(e){return h0(this.subscriptions,e),()=>f0(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const a=this.subscriptions[s];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Qn=t=>t*1e3,kn=t=>t/1e3;function Gw(t,e){return e?t*(1e3/e):0}const Kw=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,$4=1e-7,W4=12;function q4(t,e,n,r,i){let s,a,l=0;do a=e+(n-e)/2,s=Kw(a,r,i)-t,s>0?n=a:e=a;while(Math.abs(s)>$4&&++l<W4);return a}function el(t,e,n,r){if(t===e&&n===r)return Nn;const i=s=>q4(s,0,1,t,n);return s=>s===0||s===1?s:Kw(i(s),e,r)}const Qw=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Yw=t=>e=>1-t(1-e),Xw=el(.33,1.53,.69,.99),x0=Yw(Xw),Jw=Qw(x0),Zw=t=>(t*=2)<1?.5*x0(t):.5*(2-Math.pow(2,-10*(t-1))),y0=t=>1-Math.sin(Math.acos(t)),e2=Yw(y0),t2=Qw(y0),H4=el(.42,0,1,1),G4=el(0,0,.58,1),n2=el(.42,0,.58,1),K4=t=>Array.isArray(t)&&typeof t[0]!="number",r2=t=>Array.isArray(t)&&typeof t[0]=="number",Q4={linear:Nn,easeIn:H4,easeInOut:n2,easeOut:G4,circIn:y0,circInOut:t2,circOut:e2,backIn:x0,backInOut:Jw,backOut:Xw,anticipate:Zw},Y4=t=>typeof t=="string",Ix=t=>{if(r2(t)){p0(t.length===4);const[e,n,r,i]=t;return el(e,n,r,i)}else if(Y4(t))return Q4[t];return t},Fl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function X4(t,e){let n=new Set,r=new Set,i=!1,s=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,p=!1,m=!1)=>{const N=m&&i?n:r;return p&&a.add(h),N.has(h)||N.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const J4=40;function i2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,a=Fl.reduce((b,D)=>(b[D]=X4(s),b),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:v,postRender:N}=a,z=()=>{const b=yr.useManualTiming?i.timestamp:performance.now();n=!1,yr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(b-i.timestamp,J4),1)),i.timestamp=b,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),p.process(i),m.process(i),v.process(i),N.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(z))},R=()=>{n=!0,r=!0,i.isProcessing||t(z)};return{schedule:Fl.reduce((b,D)=>{const L=a[D];return b[D]=(O,k=!1,y=!1)=>(n||R(),L.schedule(O,k,y)),b},{}),cancel:b=>{for(let D=0;D<Fl.length;D++)a[Fl[D]].cancel(b)},state:i,steps:a}}const{schedule:He,cancel:vr,state:Tt,steps:Ud}=i2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Nn,!0);let cc;function Z4(){cc=void 0}const en={now:()=>(cc===void 0&&en.set(Tt.isProcessing||yr.useManualTiming?Tt.timestamp:performance.now()),cc),set:t=>{cc=t,queueMicrotask(Z4)}},s2=t=>e=>typeof e=="string"&&e.startsWith(t),o2=s2("--"),eC=s2("var(--"),v0=t=>eC(t)?tC.test(t.split("/*")[0].trim()):!1,tC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,oo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Da={...oo,transform:t=>xr(0,1,t)},Bl={...oo,default:1},aa=t=>Math.round(t*1e5)/1e5,b0=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function nC(t){return t==null}const rC=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,w0=(t,e)=>n=>!!(typeof n=="string"&&rC.test(n)&&n.startsWith(t)||e&&!nC(n)&&Object.prototype.hasOwnProperty.call(n,e)),a2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,a,l]=r.match(b0);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},iC=t=>xr(0,255,t),$d={...oo,transform:t=>Math.round(iC(t))},Ii={test:w0("rgb","red"),parse:a2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+$d.transform(t)+", "+$d.transform(e)+", "+$d.transform(n)+", "+aa(Da.transform(r))+")"};function sC(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const mf={test:w0("#"),parse:sC,transform:Ii.transform},tl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Rr=tl("deg"),Yn=tl("%"),ye=tl("px"),oC=tl("vh"),aC=tl("vw"),Ax={...Yn,parse:t=>Yn.parse(t)/100,transform:t=>Yn.transform(t*100)},Cs={test:w0("hsl","hue"),parse:a2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Yn.transform(aa(e))+", "+Yn.transform(aa(n))+", "+aa(Da.transform(r))+")"},dt={test:t=>Ii.test(t)||mf.test(t)||Cs.test(t),parse:t=>Ii.test(t)?Ii.parse(t):Cs.test(t)?Cs.parse(t):mf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ii.transform(t):Cs.transform(t),getAnimatableNone:t=>{const e=dt.parse(t);return e.alpha=0,dt.transform(e)}},lC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function cC(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(b0))==null?void 0:e.length)||0)+(((n=t.match(lC))==null?void 0:n.length)||0)>0}const l2="number",c2="color",uC="var",dC="var(",Px="${}",hC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Va(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(hC,c=>(dt.test(c)?(r.color.push(s),i.push(c2),n.push(dt.parse(c))):c.startsWith(dC)?(r.var.push(s),i.push(uC),n.push(c)):(r.number.push(s),i.push(l2),n.push(parseFloat(c))),++s,Px)).split(Px);return{values:n,split:l,indexes:r,types:i}}function u2(t){return Va(t).values}function d2(t){const{split:e,types:n}=Va(t),r=e.length;return i=>{let s="";for(let a=0;a<r;a++)if(s+=e[a],i[a]!==void 0){const l=n[a];l===l2?s+=aa(i[a]):l===c2?s+=dt.transform(i[a]):s+=i[a]}return s}}const fC=t=>typeof t=="number"?0:dt.test(t)?dt.getAnimatableNone(t):t;function pC(t){const e=u2(t);return d2(t)(e.map(fC))}const ni={test:cC,parse:u2,createTransformer:d2,getAnimatableNone:pC};function Wd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function mC({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,a=0;if(!e)i=s=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=Wd(c,l,t+1/3),s=Wd(c,l,t),a=Wd(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:r}}function Gc(t,e){return n=>n>0?e:t}const Xe=(t,e,n)=>t+(e-t)*n,qd=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},gC=[mf,Ii,Cs],xC=t=>gC.find(e=>e.test(t));function Rx(t){const e=xC(t);if(!e)return!1;let n=e.parse(t);return e===Cs&&(n=mC(n)),n}const Dx=(t,e)=>{const n=Rx(t),r=Rx(e);if(!n||!r)return Gc(t,e);const i={...n};return s=>(i.red=qd(n.red,r.red,s),i.green=qd(n.green,r.green,s),i.blue=qd(n.blue,r.blue,s),i.alpha=Xe(n.alpha,r.alpha,s),Ii.transform(i))},gf=new Set(["none","hidden"]);function yC(t,e){return gf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function vC(t,e){return n=>Xe(t,e,n)}function k0(t){return typeof t=="number"?vC:typeof t=="string"?v0(t)?Gc:dt.test(t)?Dx:kC:Array.isArray(t)?h2:typeof t=="object"?dt.test(t)?Dx:bC:Gc}function h2(t,e){const n=[...t],r=n.length,i=t.map((s,a)=>k0(s)(s,e[a]));return s=>{for(let a=0;a<r;a++)n[a]=i[a](s);return n}}function bC(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=k0(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function wC(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],a=t.indexes[s][r[s]],l=t.values[a]??0;n[i]=l,r[s]++}return n}const kC=(t,e)=>{const n=ni.createTransformer(e),r=Va(t),i=Va(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?gf.has(t)&&!i.values.length||gf.has(e)&&!r.values.length?yC(t,e):Za(h2(wC(r,i),i.values),n):Gc(t,e)};function f2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Xe(t,e,n):k0(t)(t,e)}const _C=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>He.update(e,n),stop:()=>vr(e),now:()=>Tt.isProcessing?Tt.timestamp:en.now()}},p2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Kc=2e4;function _0(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Kc;)e+=n,r=t.next(e);return e>=Kc?1/0:e}function NC(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(_0(r),Kc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:kn(i)}}const jC=5;function m2(t,e,n){const r=Math.max(e-jC,0);return Gw(n-t(r),e-r)}const it={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Hd=.001;function CC({duration:t=it.duration,bounce:e=it.bounce,velocity:n=it.velocity,mass:r=it.mass}){let i,s,a=1-e;a=xr(it.minDamping,it.maxDamping,a),t=xr(it.minDuration,it.maxDuration,kn(t)),a<1?(i=d=>{const h=d*a,p=h*t,m=h-n,v=xf(d,a),N=Math.exp(-p);return Hd-m/v*N},s=d=>{const p=d*a*t,m=p*n+n,v=Math.pow(a,2)*Math.pow(d,2)*t,N=Math.exp(-p),z=xf(Math.pow(d,2),a);return(-i(d)+Hd>0?-1:1)*((m-v)*N)/z}):(i=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-Hd+h*p},s=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const l=5/t,c=TC(i,s,l);if(t=Qn(t),isNaN(c))return{stiffness:it.stiffness,damping:it.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const EC=12;function TC(t,e,n){let r=n;for(let i=1;i<EC;i++)r=r-t(r)/e(r);return r}function xf(t,e){return t*Math.sqrt(1-e*e)}const SC=["duration","bounce"],zC=["stiffness","damping","mass"];function Vx(t,e){return e.some(n=>t[n]!==void 0)}function IC(t){let e={velocity:it.velocity,stiffness:it.stiffness,damping:it.damping,mass:it.mass,isResolvedFromDuration:!1,...t};if(!Vx(t,zC)&&Vx(t,SC))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*xr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:it.mass,stiffness:i,damping:s}}else{const n=CC(t);e={...e,...n,mass:it.mass},e.isResolvedFromDuration=!0}return e}function Qc(t=it.visualDuration,e=it.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:v}=IC({...n,velocity:-kn(n.velocity||0)}),N=m||0,z=d/(2*Math.sqrt(c*h)),R=a-s,w=kn(Math.sqrt(c/h)),x=Math.abs(R)<5;r||(r=x?it.restSpeed.granular:it.restSpeed.default),i||(i=x?it.restDelta.granular:it.restDelta.default);let b;if(z<1){const L=xf(w,z);b=O=>{const k=Math.exp(-z*w*O);return a-k*((N+z*w*R)/L*Math.sin(L*O)+R*Math.cos(L*O))}}else if(z===1)b=L=>a-Math.exp(-w*L)*(R+(N+w*R)*L);else{const L=w*Math.sqrt(z*z-1);b=O=>{const k=Math.exp(-z*w*O),y=Math.min(L*O,300);return a-k*((N+z*w*R)*Math.sinh(y)+L*R*Math.cosh(y))/L}}const D={calculatedDuration:v&&p||null,next:L=>{const O=b(L);if(v)l.done=L>=p;else{let k=L===0?N:0;z<1&&(k=L===0?Qn(N):m2(b,L,O));const y=Math.abs(k)<=r,_=Math.abs(a-O)<=i;l.done=y&&_}return l.value=l.done?a:O,l},toString:()=>{const L=Math.min(_0(D),Kc),O=p2(k=>D.next(L*k).value,L,30);return L+"ms "+O},toTransition:()=>{}};return D}Qc.applyToOptions=t=>{const e=NC(t,100,Qc);return t.ease=e.ease,t.duration=Qn(e.duration),t.type="keyframes",t};function yf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},v=y=>l!==void 0&&y<l||c!==void 0&&y>c,N=y=>l===void 0?c:c===void 0||Math.abs(l-y)<Math.abs(c-y)?l:c;let z=n*e;const R=p+z,w=a===void 0?R:a(R);w!==R&&(z=w-p);const x=y=>-z*Math.exp(-y/r),b=y=>w+x(y),D=y=>{const _=x(y),j=b(y);m.done=Math.abs(_)<=d,m.value=m.done?w:j};let L,O;const k=y=>{v(m.value)&&(L=y,O=Qc({keyframes:[m.value,N(m.value)],velocity:m2(b,y,m.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return k(0),{calculatedDuration:null,next:y=>{let _=!1;return!O&&L===void 0&&(_=!0,D(y),k(y)),L!==void 0&&y>=L?O.next(y-L):(!_&&D(y),m)}}}function AC(t,e,n){const r=[],i=n||yr.mix||f2,s=t.length-1;for(let a=0;a<s;a++){let l=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Nn:e;l=Za(c,l)}r.push(l)}return r}function g2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(p0(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=AC(e,r,i),c=l.length,d=h=>{if(a&&h<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=Ra(t[p],t[p+1],h);return l[p](m)};return n?h=>d(xr(t[0],t[s-1],h)):d}function PC(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Ra(0,e,r);t.push(Xe(n,1,i))}}function RC(t){const e=[0];return PC(e,t.length-1),e}function DC(t,e){return t.map(n=>n*e)}function VC(t,e){return t.map(()=>e||n2).splice(0,t.length-1)}function la({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=K4(r)?r.map(Ix):Ix(r),s={done:!1,value:e[0]},a=DC(n&&n.length===e.length?n:RC(e),t),l=g2(a,e,{ease:Array.isArray(i)?i:VC(e,i)});return{calculatedDuration:t,next:c=>(s.value=l(c),s.done=c>=t,s)}}const MC=t=>t!==null;function N0(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(MC),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const LC={decay:yf,inertia:yf,tween:la,keyframes:la,spring:Qc};function x2(t){typeof t.type=="string"&&(t.type=LC[t.type])}class j0{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const OC=t=>t/100;class C0 extends j0{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==en.now()&&this.tick(en.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;x2(e);const{type:n=la,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:a=0}=e;let{keyframes:l}=e;const c=n||la;c!==la&&typeof l[0]!="number"&&(this.mixKeyframes=Za(OC,f2(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=_0(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:v,type:N,onUpdate:z,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-d*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let b=this.currentTime,D=r;if(p){const y=Math.min(this.currentTime,i)/l;let _=Math.floor(y),j=y%1;!j&&y>=1&&(j=1),j===1&&_--,_=Math.min(_,p+1),!!(_%2)&&(m==="reverse"?(j=1-j,v&&(j-=v/l)):m==="mirror"&&(D=a)),b=xr(0,1,j)*l}const L=x?{done:!1,value:h[0]}:D.next(b);s&&(L.value=s(L.value));let{done:O}=L;!x&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return k&&N!==yf&&(L.value=N0(h,this.options,R,this.speed)),z&&z(L.value),k&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return kn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kn(e)}get time(){return kn(this.currentTime)}set time(e){var n;e=Qn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(en.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=kn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=_C,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(en.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function FC(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ai=t=>t*180/Math.PI,vf=t=>{const e=Ai(Math.atan2(t[1],t[0]));return bf(e)},BC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:vf,rotateZ:vf,skewX:t=>Ai(Math.atan(t[1])),skewY:t=>Ai(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},bf=t=>(t=t%360,t<0&&(t+=360),t),Mx=vf,Lx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Ox=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),UC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Lx,scaleY:Ox,scale:t=>(Lx(t)+Ox(t))/2,rotateX:t=>bf(Ai(Math.atan2(t[6],t[5]))),rotateY:t=>bf(Ai(Math.atan2(-t[2],t[0]))),rotateZ:Mx,rotate:Mx,skewX:t=>Ai(Math.atan(t[4])),skewY:t=>Ai(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function wf(t){return t.includes("scale")?1:0}function kf(t,e){if(!t||t==="none")return wf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=UC,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=BC,i=l}if(!i)return wf(e);const s=r[e],a=i[1].split(",").map(WC);return typeof s=="function"?s(a):a[s]}const $C=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return kf(n,e)};function WC(t){return parseFloat(t.trim())}const ao=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],lo=new Set(ao),Fx=t=>t===oo||t===ye,qC=new Set(["x","y","z"]),HC=ao.filter(t=>!qC.has(t));function GC(t){const e=[];return HC.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Mi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>kf(e,"x"),y:(t,{transform:e})=>kf(e,"y")};Mi.translateX=Mi.x;Mi.translateY=Mi.y;const Li=new Set;let _f=!1,Nf=!1,jf=!1;function y2(){if(Nf){const t=Array.from(Li).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=GC(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,a])=>{var l;(l=r.getValue(s))==null||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Nf=!1,_f=!1,Li.forEach(t=>t.complete(jf)),Li.clear()}function v2(){Li.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Nf=!0)})}function KC(){jf=!0,v2(),y2(),jf=!1}class E0{constructor(e,n,r,i,s,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Li.add(this),_f||(_f=!0,He.read(v2),He.resolveKeyframes(y2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),a=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&s===void 0&&i.set(e[0])}FC(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Li.delete(this)}cancel(){this.state==="scheduled"&&(Li.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const QC=t=>t.startsWith("--");function YC(t,e,n){QC(e)?t.style.setProperty(e,n):t.style[e]=n}const XC=m0(()=>window.ScrollTimeline!==void 0),JC={};function ZC(t,e){const n=m0(t);return()=>JC[e]??n()}const b2=ZC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Go=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Bx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Go([0,.65,.55,1]),circOut:Go([.55,0,1,.45]),backIn:Go([.31,.01,.66,-.59]),backOut:Go([.33,1.53,.69,.99])};function w2(t,e){if(t)return typeof t=="function"?b2()?p2(t,e):"ease-out":r2(t)?Go(t):Array.isArray(t)?t.map(n=>w2(n,e)||Bx.easeOut):Bx[t]}function eE(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:a="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const p=w2(l,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function k2(t){return typeof t=="function"&&"applyToOptions"in t}function tE({type:t,...e}){return k2(t)&&b2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class nE extends j0{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=a,this.options=e,p0(typeof e.type!="string");const d=tE(e);this.animation=eE(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=N0(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):YC(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return kn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+kn(e)}get time(){return kn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Qn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&XC()?(this.animation.timeline=e,Nn):n(this)}}const _2={anticipate:Zw,backInOut:Jw,circInOut:t2};function rE(t){return t in _2}function iE(t){typeof t.ease=="string"&&rE(t.ease)&&(t.ease=_2[t.ease])}const Ux=10;class sE extends nE{constructor(e){iE(e),x2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new C0({...a,autoplay:!1}),c=Qn(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Ux).value,l.sample(c).value,Ux),l.stop()}}const $x=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ni.test(t)||t==="0")&&!t.startsWith("url("));function oE(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function aE(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=$x(i,e),l=$x(s,e);return!a||!l?!1:oE(t)||(n==="spring"||k2(n))&&r}function Cf(t){t.duration=0,t.type="keyframes"}const lE=new Set(["opacity","clipPath","filter","transform"]),cE=m0(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function uE(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:a}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return cE()&&n&&lE.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&s!==0&&a!=="inertia"}const dE=40;class hE extends j0{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:a="loop",keyframes:l,name:c,motionValue:d,element:h,...p}){var N;super(),this.stop=()=>{var z,R;this._animation&&(this._animation.stop(),(z=this.stopTimeline)==null||z.call(this)),(R=this.keyframeResolver)==null||R.cancel()},this.createdAt=en.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:a,name:c,motionValue:d,element:h,...p},v=(h==null?void 0:h.KeyframeResolver)||E0;this.keyframeResolver=new v(l,(z,R,w)=>this.onKeyframesResolved(z,R,m,!w),c,d,h),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:a,velocity:l,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=en.now(),aE(e,s,a,l)||((yr.instantAnimations||!c)&&(h==null||h(N0(e,r,n))),e[0]=e[e.length-1],Cf(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>dE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!d&&uE(m)?new sE({...m,element:m.motionValue.owner.current}):new C0(m);v.finished.then(()=>this.notifyFinished()).catch(Nn),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),KC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const fE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function pE(t){const e=fE.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function N2(t,e,n=1){const[r,i]=pE(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const a=s.trim();return Ww(a)?parseFloat(a):a}return v0(i)?N2(i,e,n+1):i}function T0(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const j2=new Set(["width","height","top","left","right","bottom",...ao]),mE={test:t=>t==="auto",parse:t=>t},C2=t=>e=>e.test(t),E2=[oo,ye,Yn,Rr,aC,oC,mE],Wx=t=>E2.find(C2(t));function gE(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Hw(t):!0}const xE=new Set(["brightness","contrast","saturate","opacity"]);function yE(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(b0)||[];if(!r)return t;const i=n.replace(r,"");let s=xE.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const vE=/\b([a-z-]*)\(.*?\)/gu,Ef={...ni,getAnimatableNone:t=>{const e=t.match(vE);return e?e.map(yE).join(" "):t}},qx={...oo,transform:Math.round},bE={rotate:Rr,rotateX:Rr,rotateY:Rr,rotateZ:Rr,scale:Bl,scaleX:Bl,scaleY:Bl,scaleZ:Bl,skew:Rr,skewX:Rr,skewY:Rr,distance:ye,translateX:ye,translateY:ye,translateZ:ye,x:ye,y:ye,z:ye,perspective:ye,transformPerspective:ye,opacity:Da,originX:Ax,originY:Ax,originZ:ye},S0={borderWidth:ye,borderTopWidth:ye,borderRightWidth:ye,borderBottomWidth:ye,borderLeftWidth:ye,borderRadius:ye,radius:ye,borderTopLeftRadius:ye,borderTopRightRadius:ye,borderBottomRightRadius:ye,borderBottomLeftRadius:ye,width:ye,maxWidth:ye,height:ye,maxHeight:ye,top:ye,right:ye,bottom:ye,left:ye,padding:ye,paddingTop:ye,paddingRight:ye,paddingBottom:ye,paddingLeft:ye,margin:ye,marginTop:ye,marginRight:ye,marginBottom:ye,marginLeft:ye,backgroundPositionX:ye,backgroundPositionY:ye,...bE,zIndex:qx,fillOpacity:Da,strokeOpacity:Da,numOctaves:qx},wE={...S0,color:dt,backgroundColor:dt,outlineColor:dt,fill:dt,stroke:dt,borderColor:dt,borderTopColor:dt,borderRightColor:dt,borderBottomColor:dt,borderLeftColor:dt,filter:Ef,WebkitFilter:Ef},T2=t=>wE[t];function S2(t,e){let n=T2(t);return n!==Ef&&(n=ni),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const kE=new Set(["auto","none","0"]);function _E(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!kE.has(s)&&Va(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=S2(n,i)}class NE extends E0{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),v0(d))){const h=N2(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!j2.has(r)||e.length!==2)return;const[i,s]=e,a=Wx(i),l=Wx(s);if(a!==l)if(Fx(a)&&Fx(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else Mi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||gE(e[i]))&&r.push(i);r.length&&_E(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Mi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,a=r[s];r[s]=Mi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function jE(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const z2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function I2(t){return qw(t)&&"offsetHeight"in t}const Hx=30,CE=t=>!isNaN(parseFloat(t)),ca={current:void 0};class EE{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=en.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=en.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=CE(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new g0);const r=this.events[e].add(n);return e==="change"?()=>{r(),He.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return ca.current&&ca.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=en.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Hx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Hx);return Gw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qi(t,e){return new EE(t,e)}const{schedule:z0}=i2(queueMicrotask,!1),zn={x:!1,y:!1};function A2(){return zn.x||zn.y}function TE(t){return t==="x"||t==="y"?zn[t]?null:(zn[t]=!0,()=>{zn[t]=!1}):zn.x||zn.y?null:(zn.x=zn.y=!0,()=>{zn.x=zn.y=!1})}function P2(t,e){const n=jE(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Gx(t){return!(t.pointerType==="touch"||A2())}function SE(t,e,n={}){const[r,i,s]=P2(t,n),a=l=>{if(!Gx(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=p=>{Gx(p)&&(d(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",a,i)}),s}const R2=(t,e)=>e?t===e?!0:R2(t,e.parentElement):!1,I0=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,zE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function IE(t){return zE.has(t.tagName)||t.tabIndex!==-1}const uc=new WeakSet;function Kx(t){return e=>{e.key==="Enter"&&t(e)}}function Gd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const AE=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Kx(()=>{if(uc.has(n))return;Gd(n,"down");const i=Kx(()=>{Gd(n,"up")}),s=()=>Gd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Qx(t){return I0(t)&&!A2()}function PE(t,e,n={}){const[r,i,s]=P2(t,n),a=l=>{const c=l.currentTarget;if(!Qx(l))return;uc.add(c);const d=e(c,l),h=(v,N)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),uc.has(c)&&uc.delete(c),Qx(v)&&typeof d=="function"&&d(v,{success:N})},p=v=>{h(v,c===window||c===document||n.useGlobalTarget||R2(c,v.target))},m=v=>{h(v,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,i),I2(l)&&(l.addEventListener("focus",d=>AE(d,i)),!IE(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function D2(t){return qw(t)&&"ownerSVGElement"in t}function RE(t){return D2(t)&&t.tagName==="svg"}function DE(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],a=t[3+n],l=g2(i,s,a);return e?l(r):l}const It=t=>!!(t&&t.getVelocity),VE=[...E2,dt,ni],ME=t=>VE.find(C2(t)),Au=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Yx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function LE(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Yx(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Yx(t[i],null)}}}}function OE(...t){return S.useCallback(LE(...t),t)}class FE extends S.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=I2(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function BE({children:t,isPresent:e,anchorX:n,root:r}){const i=S.useId(),s=S.useRef(null),a=S.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=S.useContext(Au),c=OE(s,t==null?void 0:t.ref);return S.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:v}=a.current;if(e||!s.current||!d||!h)return;const N=n==="left"?`left: ${m}`:`right: ${v}`;s.current.dataset.motionPopId=i;const z=document.createElement("style");l&&(z.nonce=l);const R=r??document.head;return R.appendChild(z),z.sheet&&z.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${N}px !important;
            top: ${p}px !important;
          }
        `),()=>{R.contains(z)&&R.removeChild(z)}},[e]),o.jsx(FE,{isPresent:e,childRef:s,sizeRef:a,children:S.cloneElement(t,{ref:c})})}const UE=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:a,anchorX:l,root:c})=>{const d=pi($E),h=S.useId();let p=!0,m=S.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:v=>{d.set(v,!0);for(const N of d.values())if(!N)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return s&&p&&(m={...m}),S.useMemo(()=>{d.forEach((v,N)=>d.set(N,!1))},[n]),S.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),a==="popLayout"&&(t=o.jsx(BE,{isPresent:n,anchorX:l,root:c,children:t})),o.jsx(Iu.Provider,{value:m,children:t})};function $E(){return new Map}function V2(t=!0){const e=S.useContext(Iu);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=S.useId();S.useEffect(()=>{if(t)return i(s)},[t]);const a=S.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,a]:[!0]}const Ul=t=>t.key||"";function Xx(t){const e=[];return S.Children.forEach(t,n=>{S.isValidElement(n)&&e.push(n)}),e}const Ce=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[d,h]=V2(a),p=S.useMemo(()=>Xx(t),[t]),m=a&&!d?[]:p.map(Ul),v=S.useRef(!0),N=S.useRef(p),z=pi(()=>new Map),[R,w]=S.useState(p),[x,b]=S.useState(p);d0(()=>{v.current=!1,N.current=p;for(let O=0;O<x.length;O++){const k=Ul(x[O]);m.includes(k)?z.delete(k):z.get(k)!==!0&&z.set(k,!1)}},[x,m.length,m.join("-")]);const D=[];if(p!==R){let O=[...p];for(let k=0;k<x.length;k++){const y=x[k],_=Ul(y);m.includes(_)||(O.splice(k,0,y),D.push(y))}return s==="wait"&&D.length&&(O=D),b(Xx(O)),w(p),null}const{forceRender:L}=S.useContext(c0);return o.jsx(o.Fragment,{children:x.map(O=>{const k=Ul(O),y=a&&!d?!1:p===x||m.includes(k),_=()=>{if(z.has(k))z.set(k,!0);else return;let j=!0;z.forEach(A=>{A||(j=!1)}),j&&(L==null||L(),b(N.current),a&&(h==null||h()),r&&r())};return o.jsx(UE,{isPresent:y,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:y?void 0:_,anchorX:l,children:O},k)})})},M2=S.createContext({strict:!1}),Jx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qs={};for(const t in Jx)Qs[t]={isEnabled:e=>Jx[t].some(n=>!!e[n])};function WE(t){for(const e in t)Qs[e]={...Qs[e],...t[e]}}const qE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Yc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||qE.has(t)}let L2=t=>!Yc(t);function HE(t){typeof t=="function"&&(L2=e=>e.startsWith("on")?!Yc(e):t(e))}try{HE(require("@emotion/is-prop-valid").default)}catch{}function GE(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(L2(i)||n===!0&&Yc(i)||!e&&!Yc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Pu=S.createContext({});function Ru(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ma(t){return typeof t=="string"||Array.isArray(t)}const A0=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],P0=["initial",...A0];function Du(t){return Ru(t.animate)||P0.some(e=>Ma(t[e]))}function O2(t){return!!(Du(t)||t.variants)}function KE(t,e){if(Du(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ma(n)?n:void 0,animate:Ma(r)?r:void 0}}return t.inherit!==!1?e:{}}function QE(t){const{initial:e,animate:n}=KE(t,S.useContext(Pu));return S.useMemo(()=>({initial:e,animate:n}),[Zx(e),Zx(n)])}function Zx(t){return Array.isArray(t)?t.join(" "):t}function ey(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Oo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ye.test(t))t=parseFloat(t);else return t;const n=ey(t,e.target.x),r=ey(t,e.target.y);return`${n}% ${r}%`}},YE={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ni.parse(t);if(i.length>5)return r;const s=ni.createTransformer(t),a=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=l,i[1+a]/=c;const d=Xe(l,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),s(i)}},Tf={borderRadius:{...Oo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Oo,borderTopRightRadius:Oo,borderBottomLeftRadius:Oo,borderBottomRightRadius:Oo,boxShadow:YE};function F2(t,{layout:e,layoutId:n}){return lo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Tf[t]||t==="opacity")}const XE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},JE=ao.length;function ZE(t,e,n){let r="",i=!0;for(let s=0;s<JE;s++){const a=ao[s],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=z2(l,S0[a]);if(!c){i=!1;const h=XE[a]||a;r+=`${h}(${d}) `}n&&(e[a]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function R0(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let a=!1,l=!1;for(const c in e){const d=e[c];if(lo.has(c)){a=!0;continue}else if(o2(c)){i[c]=d;continue}else{const h=z2(d,S0[c]);c.startsWith("origin")?(l=!0,s[c]=h):r[c]=h}}if(e.transform||(a||n?r.transform=ZE(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${c} ${d} ${h}`}}const D0=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function B2(t,e,n){for(const r in e)!It(e[r])&&!F2(r,n)&&(t[r]=e[r])}function eT({transformTemplate:t},e){return S.useMemo(()=>{const n=D0();return R0(n,e,t),Object.assign({},n.vars,n.style)},[e])}function tT(t,e){const n=t.style||{},r={};return B2(r,n,t),Object.assign(r,eT(t,e)),r}function nT(t,e){const n={},r=tT(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const rT={offset:"stroke-dashoffset",array:"stroke-dasharray"},iT={offset:"strokeDashoffset",array:"strokeDasharray"};function sT(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?rT:iT;t[s.offset]=ye.transform(-r);const a=ye.transform(e),l=ye.transform(n);t[s.array]=`${a} ${l}`}function U2(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:a=0,...l},c,d,h){if(R0(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&sT(p,i,s,a,!1)}const $2=()=>({...D0(),attrs:{}}),W2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function oT(t,e,n,r){const i=S.useMemo(()=>{const s=$2();return U2(s,e,W2(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};B2(s,t.style,t),i.style={...s,...i.style}}return i}const aT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function V0(t){return typeof t!="string"||t.includes("-")?!1:!!(aT.indexOf(t)>-1||/[A-Z]/u.test(t))}function lT(t,e,n,{latestValues:r},i,s=!1){const l=(V0(t)?oT:nT)(e,r,i,t),c=GE(e,typeof t=="string",s),d=t!==S.Fragment?{...c,...l,ref:n}:{},{children:h}=e,p=S.useMemo(()=>It(h)?h.get():h,[h]);return S.createElement(t,{...d,children:p})}function ty(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function M0(t,e,n,r){if(typeof e=="function"){const[i,s]=ty(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=ty(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function dc(t){return It(t)?t.get():t}function cT({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:uT(n,r,i,t),renderState:e()}}function uT(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=dc(s[m]);let{initial:a,animate:l}=t;const c=Du(t),d=O2(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const p=h?l:a;if(p&&typeof p!="boolean"&&!Ru(p)){const m=Array.isArray(p)?p:[p];for(let v=0;v<m.length;v++){const N=M0(t,m[v]);if(N){const{transitionEnd:z,transition:R,...w}=N;for(const x in w){let b=w[x];if(Array.isArray(b)){const D=h?b.length-1:0;b=b[D]}b!==null&&(i[x]=b)}for(const x in z)i[x]=z[x]}}}return i}const q2=t=>(e,n)=>{const r=S.useContext(Pu),i=S.useContext(Iu),s=()=>cT(t,e,r,i);return n?s():pi(s)};function L0(t,e,n){var s;const{style:r}=t,i={};for(const a in r)(It(r[a])||e.style&&It(e.style[a])||F2(a,t)||((s=n==null?void 0:n.getValue(a))==null?void 0:s.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const dT=q2({scrapeMotionValuesFromProps:L0,createRenderState:D0});function H2(t,e,n){const r=L0(t,e,n);for(const i in t)if(It(t[i])||It(e[i])){const s=ao.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const hT=q2({scrapeMotionValuesFromProps:H2,createRenderState:$2}),fT=Symbol.for("motionComponentSymbol");function Es(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function pT(t,e,n){return S.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Es(n)&&(n.current=r))},[e])}const O0=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mT="framerAppearId",G2="data-"+O0(mT),K2=S.createContext({});function gT(t,e,n,r,i){var z,R;const{visualElement:s}=S.useContext(Pu),a=S.useContext(M2),l=S.useContext(Iu),c=S.useContext(Au).reducedMotion,d=S.useRef(null);r=r||a.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,p=S.useContext(K2);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&xT(d.current,n,i,p);const m=S.useRef(!1);S.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const v=n[G2],N=S.useRef(!!v&&!((z=window.MotionHandoffIsComplete)!=null&&z.call(window,v))&&((R=window.MotionHasOptimisedAnimation)==null?void 0:R.call(window,v)));return d0(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),N.current&&h.animationState&&h.animationState.animateChanges())}),S.useEffect(()=>{h&&(!N.current&&h.animationState&&h.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,v)}),N.current=!1),h.enteringChildren=void 0)}),h}function xT(t,e,n,r){const{layoutId:i,layout:s,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Q2(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!a||l&&Es(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function Q2(t){if(t)return t.options.allowProjection!==!1?t.projection:Q2(t.parent)}function Kd(t,{forwardMotionProps:e=!1}={},n,r){n&&WE(n);const i=V0(t)?hT:dT;function s(l,c){let d;const h={...S.useContext(Au),...l,layoutId:yT(l)},{isStatic:p}=h,m=QE(l),v=i(l,p);if(!p&&u0){vT();const N=bT(h);d=N.MeasureLayout,m.visualElement=gT(t,v,h,r,N.ProjectionNode)}return o.jsxs(Pu.Provider,{value:m,children:[d&&m.visualElement?o.jsx(d,{visualElement:m.visualElement,...h}):null,lT(t,l,pT(v,m.visualElement,c),v,p,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=S.forwardRef(s);return a[fT]=t,a}function yT({layoutId:t}){const e=S.useContext(c0).id;return e&&t!==void 0?e+"-"+t:t}function vT(t,e){S.useContext(M2).strict}function bT(t){const{drag:e,layout:n}=Qs;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function wT(t,e){if(typeof Proxy>"u")return Kd;const n=new Map,r=(s,a)=>Kd(s,a,t,e),i=(s,a)=>r(s,a);return new Proxy(i,{get:(s,a)=>a==="create"?r:(n.has(a)||n.set(a,Kd(a,void 0,t,e)),n.get(a))})}function Y2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function kT({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function _T(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Qd(t){return t===void 0||t===1}function Sf({scale:t,scaleX:e,scaleY:n}){return!Qd(t)||!Qd(e)||!Qd(n)}function ji(t){return Sf(t)||X2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function X2(t){return ny(t.x)||ny(t.y)}function ny(t){return t&&t!=="0%"}function Xc(t,e,n){const r=t-n,i=e*r;return n+i}function ry(t,e,n,r,i){return i!==void 0&&(t=Xc(t,i,r)),Xc(t,n,r)+e}function zf(t,e=0,n=1,r,i){t.min=ry(t.min,e,n,r,i),t.max=ry(t.max,e,n,r,i)}function J2(t,{x:e,y:n}){zf(t.x,e.translate,e.scale,e.originPoint),zf(t.y,n.translate,n.scale,n.originPoint)}const iy=.999999999999,sy=1.0000000000001;function NT(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,a;for(let l=0;l<i;l++){s=n[l],a=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Ss(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,J2(t,a)),r&&ji(s.latestValues)&&Ss(t,s.latestValues))}e.x<sy&&e.x>iy&&(e.x=1),e.y<sy&&e.y>iy&&(e.y=1)}function Ts(t,e){t.min=t.min+e,t.max=t.max+e}function oy(t,e,n,r,i=.5){const s=Xe(t.min,t.max,i);zf(t,e,n,s,r)}function Ss(t,e){oy(t.x,e.x,e.scaleX,e.scale,e.originX),oy(t.y,e.y,e.scaleY,e.scale,e.originY)}function Z2(t,e){return Y2(_T(t.getBoundingClientRect(),e))}function jT(t,e,n){const r=Z2(t,n),{scroll:i}=e;return i&&(Ts(r.x,i.offset.x),Ts(r.y,i.offset.y)),r}const ay=()=>({translate:0,scale:1,origin:0,originPoint:0}),zs=()=>({x:ay(),y:ay()}),ly=()=>({min:0,max:0}),xt=()=>({x:ly(),y:ly()}),If={current:null},ek={current:!1};function CT(){if(ek.current=!0,!!u0)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>If.current=t.matches;t.addEventListener("change",e),e()}else If.current=!1}const ET=new WeakMap;function TT(t,e,n){for(const r in e){const i=e[r],s=n[r];if(It(i))t.addValue(r,i);else if(It(s))t.addValue(r,qi(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,qi(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const cy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ST{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=E0,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=en.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,He.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Du(n),this.isVariantNode=O2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const v=p[m];c[m]!==void 0&&It(v)&&v.set(c[m])}}mount(e){var n;this.current=e,ET.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),ek.current||CT(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:If.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),vr(this.notifyUpdate),vr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=lo.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&He.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Qs){const n=Qs[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<cy.length;r++){const i=cy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,a=e[s];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=TT(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=qi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Ww(r)||Hw(r))?r=parseFloat(r):!ME(r)&&ni.test(n)&&(r=S2(e,n)),this.setBaseTarget(e,It(r)?r.get():r)),It(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=M0(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!It(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new g0),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){z0.render(this.render)}}class tk extends ST{constructor(){super(...arguments),this.KeyframeResolver=NE}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;It(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function nk(t,{style:e,vars:n},r,i){const s=t.style;let a;for(a in e)s[a]=e[a];i==null||i.applyProjectionStyles(s,r);for(a in n)s.setProperty(a,n[a])}function zT(t){return window.getComputedStyle(t)}class IT extends tk{constructor(){super(...arguments),this.type="html",this.renderInstance=nk}readValueFromInstance(e,n){var r;if(lo.has(n))return(r=this.projection)!=null&&r.isProjecting?wf(n):$C(e,n);{const i=zT(e),s=(o2(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Z2(e,n)}build(e,n,r){R0(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return L0(e,n,r)}}const rk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AT(t,e,n,r){nk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(rk.has(i)?i:O0(i),e.attrs[i])}class PT extends tk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(lo.has(n)){const r=T2(n);return r&&r.default||0}return n=rk.has(n)?n:O0(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return H2(e,n,r)}build(e,n,r){U2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){AT(e,n,r,i)}mount(e){this.isSVGTag=W2(e.tagName),super.mount(e)}}const RT=(t,e)=>V0(t)?new PT(e):new IT(e,{allowProjection:t!==S.Fragment});function Ms(t,e,n){const r=t.getProps();return M0(r,e,n!==void 0?n:r.custom,t)}const Af=t=>Array.isArray(t);function DT(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,qi(n))}function VT(t){return Af(t)?t[t.length-1]||0:t}function MT(t,e){const n=Ms(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const a in s){const l=VT(s[a]);DT(t,a,l)}}function LT(t){return!!(It(t)&&t.add)}function Pf(t,e){const n=t.getValue("willChange");if(LT(n))return n.add(e);if(!n&&yr.WillChange){const r=new yr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function ik(t){return t.props[G2]}const OT=t=>t!==null;function FT(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(OT),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const BT={type:"spring",stiffness:500,damping:25,restSpeed:10},UT=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$T={type:"keyframes",duration:.8},WT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},qT=(t,{keyframes:e})=>e.length>2?$T:lo.has(t)?t.startsWith("scale")?UT(e[1]):BT:WT;function HT({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const F0=(t,e,n,r={},i,s)=>a=>{const l=T0(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Qn(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};HT(l)||Object.assign(h,qT(t,h)),h.duration&&(h.duration=Qn(h.duration)),h.repeatDelay&&(h.repeatDelay=Qn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(Cf(h),h.delay===0&&(p=!0)),(yr.instantAnimations||yr.skipAnimations)&&(p=!0,Cf(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&e.get()!==void 0){const m=FT(h.keyframes,l);if(m!==void 0){He.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new C0(h):new hE(h)};function GT({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function sk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const p=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||d&&GT(d,h))continue;const v={delay:n,...T0(s||{},h)},N=p.get();if(N!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===N&&!v.velocity)continue;let z=!1;if(window.MotionHandoffAnimation){const w=ik(t);if(w){const x=window.MotionHandoffAnimation(w,h,He);x!==null&&(v.startTime=x,z=!0)}}Pf(t,h),p.start(F0(h,p,m,t.shouldReduceMotion&&j2.has(h)?{type:!1}:v,t,z));const R=p.animation;R&&c.push(R)}return a&&Promise.all(c).then(()=>{He.update(()=>{a&&MT(t,a)})}),c}function ok(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),a=t.size,l=(a-1)*r;return typeof n=="function"?n(s,a):i===1?s*r:l-s*r}function Rf(t,e,n={}){var c;const r=Ms(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(sk(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=i;return KT(t,e,d,h,p,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,a]:[a,s];return d().then(()=>h())}else return Promise.all([s(),a(n.delay)])}function KT(t,e,n=0,r=0,i=0,s=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Rf(c,e,{...a,delay:n+(typeof r=="function"?0:r)+ok(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function QT(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Rf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Rf(t,e,n);else{const i=typeof e=="function"?Ms(t,e,n.custom):e;r=Promise.all(sk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function ak(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const YT=P0.length;function lk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?lk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<YT;n++){const r=P0[n],i=t.props[r];(Ma(i)||i===!1)&&(e[r]=i)}return e}const XT=[...A0].reverse(),JT=A0.length;function ZT(t){return e=>Promise.all(e.map(({animation:n,options:r})=>QT(t,n,r)))}function eS(t){let e=ZT(t),n=uy(),r=!0;const i=c=>(d,h)=>{var m;const p=Ms(t,h,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:v,transitionEnd:N,...z}=p;d={...d,...z,...N}}return d};function s(c){e=c(t)}function a(c){const{props:d}=t,h=lk(t.parent)||{},p=[],m=new Set;let v={},N=1/0;for(let R=0;R<JT;R++){const w=XT[R],x=n[w],b=d[w]!==void 0?d[w]:h[w],D=Ma(b),L=w===c?x.isActive:null;L===!1&&(N=R);let O=b===h[w]&&b!==d[w]&&D;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),x.protectedKeys={...v},!x.isActive&&L===null||!b&&!x.prevProp||Ru(b)||typeof b=="boolean")continue;const k=tS(x.prevProp,b);let y=k||w===c&&x.isActive&&!O&&D||R>N&&D,_=!1;const j=Array.isArray(b)?b:[b];let A=j.reduce(i(w),{});L===!1&&(A={});const{prevResolvedValues:P={}}=x,I={...P,...A},we=pe=>{y=!0,m.has(pe)&&(_=!0,m.delete(pe)),x.needsAnimating[pe]=!0;const H=t.getValue(pe);H&&(H.liveStyle=!1)};for(const pe in I){const H=A[pe],oe=P[pe];if(v.hasOwnProperty(pe))continue;let te=!1;Af(H)&&Af(oe)?te=!ak(H,oe):te=H!==oe,te?H!=null?we(pe):m.add(pe):H!==void 0&&m.has(pe)?we(pe):x.protectedKeys[pe]=!0}x.prevProp=b,x.prevResolvedValues=A,x.isActive&&(v={...v,...A}),r&&t.blockInitialAnimation&&(y=!1);const de=O&&k;y&&(!de||_)&&p.push(...j.map(pe=>{const H={type:w};if(typeof pe=="string"&&r&&!de&&t.manuallyAnimateOnMount&&t.parent){const{parent:oe}=t,te=Ms(oe,pe);if(oe.enteringChildren&&te){const{delayChildren:fe}=te.transition||{};H.delay=ok(oe.enteringChildren,t,fe)}}return{animation:pe,options:H}}))}if(m.size){const R={};if(typeof d.initial!="boolean"){const w=Ms(t,Array.isArray(d.initial)?d.initial[0]:d.initial);w&&w.transition&&(R.transition=w.transition)}m.forEach(w=>{const x=t.getBaseTarget(w),b=t.getValue(w);b&&(b.liveStyle=!0),R[w]=x??null}),p.push({animation:R})}let z=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(z=!1),r=!1,z?e(p):Promise.resolve()}function l(c,d){var p;if(n[c].isActive===d)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(m=>{var v;return(v=m.animationState)==null?void 0:v.setActive(c,d)}),n[c].isActive=d;const h=a(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=uy()}}}function tS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!ak(e,t):!1}function ki(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function uy(){return{animate:ki(!0),whileInView:ki(),whileHover:ki(),whileTap:ki(),whileDrag:ki(),whileFocus:ki(),exit:ki()}}class mi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class nS extends mi{constructor(e){super(e),e.animationState||(e.animationState=eS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ru(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let rS=0;class iS extends mi{constructor(){super(...arguments),this.id=rS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const sS={animation:{Feature:nS},exit:{Feature:iS}};function La(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function nl(t){return{point:{x:t.pageX,y:t.pageY}}}const oS=t=>e=>I0(e)&&t(e,nl(e));function ua(t,e,n,r){return La(t,e,oS(n),r)}const ck=1e-4,aS=1-ck,lS=1+ck,uk=.01,cS=0-uk,uS=0+uk;function qt(t){return t.max-t.min}function dS(t,e,n){return Math.abs(t-e)<=n}function dy(t,e,n,r=.5){t.origin=r,t.originPoint=Xe(e.min,e.max,t.origin),t.scale=qt(n)/qt(e),t.translate=Xe(n.min,n.max,t.origin)-t.originPoint,(t.scale>=aS&&t.scale<=lS||isNaN(t.scale))&&(t.scale=1),(t.translate>=cS&&t.translate<=uS||isNaN(t.translate))&&(t.translate=0)}function da(t,e,n,r){dy(t.x,e.x,n.x,r?r.originX:void 0),dy(t.y,e.y,n.y,r?r.originY:void 0)}function hy(t,e,n){t.min=n.min+e.min,t.max=t.min+qt(e)}function hS(t,e,n){hy(t.x,e.x,n.x),hy(t.y,e.y,n.y)}function fy(t,e,n){t.min=e.min-n.min,t.max=t.min+qt(e)}function Jc(t,e,n){fy(t.x,e.x,n.x),fy(t.y,e.y,n.y)}function gn(t){return[t("x"),t("y")]}const dk=({current:t})=>t?t.ownerDocument.defaultView:null,py=(t,e)=>Math.abs(t-e);function fS(t,e){const n=py(t.x,e.x),r=py(t.y,e.y);return Math.sqrt(n**2+r**2)}class hk{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Xd(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,N=fS(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!N)return;const{point:z}=m,{timestamp:R}=Tt;this.history.push({...z,timestamp:R});const{onStart:w,onMove:x}=this.handlers;v||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Yd(v,this.transformPagePoint),He.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:N,onSessionEnd:z,resumeAnimation:R}=this.handlers;if(this.dragSnapToOrigin&&R&&R(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Xd(m.type==="pointercancel"?this.lastMoveEventInfo:Yd(v,this.transformPagePoint),this.history);this.startEvent&&N&&N(m,w),z&&z(m,w)},!I0(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const l=nl(e),c=Yd(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=Tt;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,Xd(c,this.history)),this.removeListeners=Za(ua(this.contextWindow,"pointermove",this.handlePointerMove),ua(this.contextWindow,"pointerup",this.handlePointerUp),ua(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),vr(this.updatePoint)}}function Yd(t,e){return e?{point:e(t.point)}:t}function my(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Xd({point:t},e){return{point:t,delta:my(t,fk(e)),offset:my(t,pS(e)),velocity:mS(e,.1)}}function pS(t){return t[0]}function fk(t){return t[t.length-1]}function mS(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=fk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Qn(e)));)n--;if(!r)return{x:0,y:0};const s=kn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const a={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function gS(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Xe(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Xe(n,t,r.max):Math.min(t,n)),t}function gy(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function xS(t,{top:e,left:n,bottom:r,right:i}){return{x:gy(t.x,n,i),y:gy(t.y,e,r)}}function xy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function yS(t,e){return{x:xy(t.x,e.x),y:xy(t.y,e.y)}}function vS(t,e){let n=.5;const r=qt(t),i=qt(e);return i>r?n=Ra(e.min,e.max-r,t.min):r>i&&(n=Ra(t.min,t.max-i,e.min)),xr(0,1,n)}function bS(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Df=.35;function wS(t=Df){return t===!1?t=0:t===!0&&(t=Df),{x:yy(t,"left","right"),y:yy(t,"top","bottom")}}function yy(t,e,n){return{min:vy(t,e),max:vy(t,n)}}function vy(t,e){return typeof t=="number"?t:t[e]||0}const kS=new WeakMap;class _S{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nl(p).point)},a=(p,m)=>{const{drag:v,dragPropagation:N,onDragStart:z}=this.getProps();if(v&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TE(v),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gn(w=>{let x=this.getAxisMotionValue(w).get()||0;if(Yn.test(x)){const{projection:b}=this.visualElement;if(b&&b.layout){const D=b.layout.layoutBox[w];D&&(x=qt(D)*(parseFloat(x)/100))}}this.originPoint[w]=x}),z&&He.postRender(()=>z(p,m)),Pf(this.visualElement,"transform");const{animationState:R}=this.visualElement;R&&R.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:N,onDirectionLock:z,onDrag:R}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:w}=m;if(N&&this.currentDirection===null){this.currentDirection=NS(w),this.currentDirection!==null&&z&&z(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),R&&R(p,m)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>gn(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new hk(e,{onSessionStart:s,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:dk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&He.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!$l(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=gS(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&Es(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=xS(r.layoutBox,e):this.constraints=!1,this.elastic=wS(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=bS(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Es(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=jT(r,i.root,this.visualElement.getTransformPagePoint());let a=yS(i.layout.layoutBox,s);if(n){const l=n(kT(a));this.hasMutatedConstraints=!!l,l&&(a=Y2(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=gn(h=>{if(!$l(h,n,this.currentDirection))return;let p=c&&c[h]||{};a&&(p={min:0,max:0});const m=i?200:1e6,v=i?40:1e7,N={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,N)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Pf(this.visualElement,e),r.start(F0(e,r,0,n,this.visualElement,!1))}stopAnimation(){gn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){gn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){gn(n=>{const{drag:r}=this.getProps();if(!$l(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[n];s.set(e[n]-Xe(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Es(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gn(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();i[a]=vS({min:c,max:c},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gn(a=>{if(!$l(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];l.set(Xe(c,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;kS.set(this.visualElement,this);const e=this.visualElement.current,n=ua(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Es(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),He.read(r);const a=La(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(gn(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())});return()=>{a(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:a=Df,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:a,dragMomentum:l}}}function $l(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function NS(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class jS extends mi{constructor(e){super(e),this.removeGroupControls=Nn,this.removeListeners=Nn,this.controls=new _S(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Nn}unmount(){this.removeGroupControls(),this.removeListeners()}}const by=t=>(e,n)=>{t&&He.postRender(()=>t(e,n))};class CS extends mi{constructor(){super(...arguments),this.removePointerDownListener=Nn}onPointerDown(e){this.session=new hk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:dk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:by(e),onStart:by(n),onMove:r,onEnd:(s,a)=>{delete this.session,i&&He.postRender(()=>i(s,a))}}}mount(){this.removePointerDownListener=ua(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const hc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Jd=!1;class ES extends S.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Jd&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),hc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:a}=r;return a&&(a.isPresent=s,Jd=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||He.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),z0.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Jd=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function pk(t){const[e,n]=V2(),r=S.useContext(c0);return o.jsx(ES,{...t,layoutGroup:r,switchLayoutGroup:S.useContext(K2),isPresent:e,safeToRemove:n})}function TS(t,e,n){const r=It(t)?t:qi(t);return r.start(F0("",r,e,n)),r.animation}const SS=(t,e)=>t.depth-e.depth;class zS{constructor(){this.children=[],this.isDirty=!1}add(e){h0(this.children,e),this.isDirty=!0}remove(e){f0(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(SS),this.isDirty=!1,this.children.forEach(e)}}function IS(t,e){const n=en.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(vr(r),t(s-e))};return He.setup(r,!0),()=>vr(r)}const mk=["TopLeft","TopRight","BottomLeft","BottomRight"],AS=mk.length,wy=t=>typeof t=="string"?parseFloat(t):t,ky=t=>typeof t=="number"||ye.test(t);function PS(t,e,n,r,i,s){i?(t.opacity=Xe(0,n.opacity??1,RS(r)),t.opacityExit=Xe(e.opacity??1,0,DS(r))):s&&(t.opacity=Xe(e.opacity??1,n.opacity??1,r));for(let a=0;a<AS;a++){const l=`border${mk[a]}Radius`;let c=_y(e,l),d=_y(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||ky(c)===ky(d)?(t[l]=Math.max(Xe(wy(c),wy(d),r),0),(Yn.test(d)||Yn.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=Xe(e.rotate||0,n.rotate||0,r))}function _y(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const RS=gk(0,.5,e2),DS=gk(.5,.95,Nn);function gk(t,e,n){return r=>r<t?0:r>e?1:n(Ra(t,e,r))}function Ny(t,e){t.min=e.min,t.max=e.max}function Sn(t,e){Ny(t.x,e.x),Ny(t.y,e.y)}function jy(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Cy(t,e,n,r,i){return t-=e,t=Xc(t,1/n,r),i!==void 0&&(t=Xc(t,1/i,r)),t}function VS(t,e=0,n=1,r=.5,i,s=t,a=t){if(Yn.test(e)&&(e=parseFloat(e),e=Xe(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Xe(s.min,s.max,r);t===s&&(l-=e),t.min=Cy(t.min,e,n,l,i),t.max=Cy(t.max,e,n,l,i)}function Ey(t,e,[n,r,i],s,a){VS(t,e[n],e[r],e[i],e.scale,s,a)}const MS=["x","scaleX","originX"],LS=["y","scaleY","originY"];function Ty(t,e,n,r){Ey(t.x,e,MS,n?n.x:void 0,r?r.x:void 0),Ey(t.y,e,LS,n?n.y:void 0,r?r.y:void 0)}function Sy(t){return t.translate===0&&t.scale===1}function xk(t){return Sy(t.x)&&Sy(t.y)}function zy(t,e){return t.min===e.min&&t.max===e.max}function OS(t,e){return zy(t.x,e.x)&&zy(t.y,e.y)}function Iy(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function yk(t,e){return Iy(t.x,e.x)&&Iy(t.y,e.y)}function Ay(t){return qt(t.x)/qt(t.y)}function Py(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class FS{constructor(){this.members=[]}add(e){h0(this.members,e),e.scheduleRender()}remove(e){if(f0(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function BS(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||s||a)&&(r=`translate3d(${i}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:v,skewY:N}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),v&&(r+=`skewX(${v}deg) `),N&&(r+=`skewY(${N}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Zd=["","X","Y","Z"],US=1e3;let $S=0;function eh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function vk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ik(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",He,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&vk(r)}function bk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e==null?void 0:e()){this.id=$S++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(HS),this.nodes.forEach(YS),this.nodes.forEach(XS),this.nodes.forEach(GS)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new zS)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new g0),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=D2(a)&&!RE(a),this.instance=a;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;He.read(()=>{p=window.innerWidth}),t(a,()=>{const v=window.innerWidth;v!==p&&(p=v,this.root.updateBlockedByResize=!0,h&&h(),h=IS(m,250),hc.hasAnimatedSinceResize&&(hc.hasAnimatedSinceResize=!1,this.nodes.forEach(Vy)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||d.getDefaultTransition()||nz,{onLayoutAnimationStart:z,onLayoutAnimationComplete:R}=d.getProps(),w=!this.targetLayout||!yk(this.targetLayout,v),x=!p&&m;if(this.options.layoutRoot||this.resumeFrom||x||p&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...T0(N,"layout"),onPlay:z,onComplete:R};(d.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(h,x)}else p||Vy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),vr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(JS),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&vk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ry);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Dy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(QS),this.nodes.forEach(WS),this.nodes.forEach(qS)):this.nodes.forEach(Dy),this.clearAllSnapshots();const l=en.now();Tt.delta=xr(0,1e3/60,l-Tt.timestamp),Tt.timestamp=l,Tt.isProcessing=!0,Ud.update.process(Tt),Ud.preRender.process(Tt),Ud.render.process(Tt),Tt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,z0.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(KS),this.sharedNodes.forEach(ZS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,He.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){He.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!qt(this.snapshot.measuredBox.x)&&!qt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=xt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!xk(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&this.instance&&(l||ji(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),rz(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:a}=this.options;if(!a)return xt();const l=a.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(iz))){const{scroll:h}=this.root;h&&(Ts(l.x,h.offset.x),Ts(l.y,h.offset.y))}return l}removeElementScroll(a){var c;const l=xt();if(Sn(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Sn(l,a),Ts(l.x,p.offset.x),Ts(l.y,p.offset.y))}return l}applyTransform(a,l=!1){const c=xt();Sn(c,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ss(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ji(h.latestValues)&&Ss(c,h.latestValues)}return ji(this.latestValues)&&Ss(c,this.latestValues),c}removeTransform(a){const l=xt();Sn(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!ji(d.latestValues))continue;Sf(d.latestValues)&&d.updateSnapshot();const h=xt(),p=d.measurePageBox();Sn(h,p),Ty(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return ji(this.latestValues)&&Ty(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Tt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!this.layout||!(h||p))return;this.resolvedRelativeTargetAt=Tt.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=xt(),this.targetWithTransforms=xt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),hS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Sn(this.target,this.layout.layoutBox),J2(this.target,this.targetDelta)):Sn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Sf(this.parent.latestValues)||X2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xt(),this.relativeTargetOrigin=xt(),Jc(this.relativeTargetOrigin,l,c),Sn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var N;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Tt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Sn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;NT(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=xt());const{target:v}=a;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(jy(this.prevProjectionDelta.x,this.projectionDelta.x),jy(this.prevProjectionDelta.y,this.projectionDelta.y)),da(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!Py(this.projectionDelta.x,this.prevProjectionDelta.x)||!Py(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=zs(),this.projectionDelta=zs(),this.projectionDeltaWithTransform=zs()}setAnimationOrigin(a,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},p=zs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=xt(),v=c?c.source:void 0,N=this.layout?this.layout.source:void 0,z=v!==N,R=this.getStack(),w=!R||R.members.length<=1,x=!!(z&&!w&&this.options.crossfade===!0&&!this.path.some(tz));this.animationProgress=0;let b;this.mixTargetDelta=D=>{const L=D/1e3;My(p.x,a.x,L),My(p.y,a.y,L),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Jc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),ez(this.relativeTarget,this.relativeTargetOrigin,m,L),b&&OS(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=xt()),Sn(b,this.relativeTarget)),z&&(this.animationValues=h,PS(h,d,this.latestValues,L,x,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(vr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=He.update(()=>{hc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=qi(0)),this.currentAnimation=TS(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),a.onUpdate&&a.onUpdate(h)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(US),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=a;if(!(!l||!c||!d)){if(this!==a&&this.layout&&d&&wk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||xt();const p=qt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+p;const m=qt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}Sn(l,c),Ss(l,h),da(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new FS),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&eh("z",a,d,this.animationValues);for(let h=0;h<Zd.length;h++)eh(`rotate${Zd[h]}`,a,d,this.animationValues),eh(`skew${Zd[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=dc(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=dc(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!ji(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=BS(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),a.transform=p;const{x:m,y:v}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?a.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const N in Tf){if(h[N]===void 0)continue;const{correct:z,applyTo:R,isCSSVariable:w}=Tf[N],x=p==="none"?h[N]:z(h[N],d);if(R){const b=R.length;for(let D=0;D<b;D++)a[R[D]]=x}else w?this.options.visualElement.renderState.vars[N]=x:a[N]=x}this.options.layoutId&&(a.pointerEvents=d===this?dc(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Ry),this.root.sharedNodes.clear()}}}function WS(t){t.updateLayout()}function qS(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,a=e.source!==t.layout.source;s==="size"?gn(p=>{const m=a?e.measuredBox[p]:e.layoutBox[p],v=qt(m);m.min=r[p].min,m.max=m.min+v}):wk(s,e.layoutBox,r)&&gn(p=>{const m=a?e.measuredBox[p]:e.layoutBox[p],v=qt(r[p]);m.max=m.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+v)});const l=zs();da(l,r,e.layoutBox);const c=zs();a?da(c,t.applyTransform(i,!0),e.measuredBox):da(c,r,e.layoutBox);const d=!xk(l);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:v}=p;if(m&&v){const N=xt();Jc(N,e.layoutBox,m.layoutBox);const z=xt();Jc(z,r,v.layoutBox),yk(N,z)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=z,t.relativeTargetOrigin=N,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function HS(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function GS(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function KS(t){t.clearSnapshot()}function Ry(t){t.clearMeasurements()}function Dy(t){t.isLayoutDirty=!1}function QS(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Vy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function YS(t){t.resolveTargetDelta()}function XS(t){t.calcProjection()}function JS(t){t.resetSkewAndRotation()}function ZS(t){t.removeLeadSnapshot()}function My(t,e,n){t.translate=Xe(e.translate,0,n),t.scale=Xe(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ly(t,e,n,r){t.min=Xe(e.min,n.min,r),t.max=Xe(e.max,n.max,r)}function ez(t,e,n,r){Ly(t.x,e.x,n.x,r),Ly(t.y,e.y,n.y,r)}function tz(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const nz={duration:.45,ease:[.4,0,.1,1]},Oy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Fy=Oy("applewebkit/")&&!Oy("chrome/")?Math.round:Nn;function By(t){t.min=Fy(t.min),t.max=Fy(t.max)}function rz(t){By(t.x),By(t.y)}function wk(t,e,n){return t==="position"||t==="preserve-aspect"&&!dS(Ay(e),Ay(n),.2)}function iz(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const sz=bk({attachResizeListener:(t,e)=>La(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),th={current:void 0},kk=bk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!th.current){const t=new sz({});t.mount(window),t.setOptions({layoutScroll:!0}),th.current=t}return th.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),oz={pan:{Feature:CS},drag:{Feature:jS,ProjectionNode:kk,MeasureLayout:pk}};function Uy(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&He.postRender(()=>s(e,nl(e)))}class az extends mi{mount(){const{current:e}=this.node;e&&(this.unmount=SE(e,(n,r)=>(Uy(this.node,r,"Start"),i=>Uy(this.node,i,"End"))))}unmount(){}}class lz extends mi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Za(La(this.node.current,"focus",()=>this.onFocus()),La(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $y(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&He.postRender(()=>s(e,nl(e)))}class cz extends mi{mount(){const{current:e}=this.node;e&&(this.unmount=PE(e,(n,r)=>($y(this.node,r,"Start"),(i,{success:s})=>$y(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Vf=new WeakMap,nh=new WeakMap,uz=t=>{const e=Vf.get(t.target);e&&e(t)},dz=t=>{t.forEach(uz)};function hz({root:t,...e}){const n=t||document;nh.has(n)||nh.set(n,{});const r=nh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(dz,{root:t,...e})),r[i]}function fz(t,e,n){const r=hz(e);return Vf.set(t,n),r.observe(t),()=>{Vf.delete(t),r.unobserve(t)}}const pz={some:0,all:1};class mz extends mi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:pz[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(c)};return fz(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(gz(e,n))&&this.startObserver()}unmount(){}}function gz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const xz={inView:{Feature:mz},tap:{Feature:cz},focus:{Feature:lz},hover:{Feature:az}},yz={layout:{ProjectionNode:kk,MeasureLayout:pk}},vz={...sS,...xz,...oz,...yz},ee=wT(vz,RT);function Zc(t){const e=pi(()=>qi(t)),{isStatic:n}=S.useContext(Au);if(n){const[,r]=S.useState(t);S.useEffect(()=>e.on("change",r),[])}return e}function _k(t,e){const n=Zc(e()),r=()=>n.set(e());return r(),d0(()=>{const i=()=>He.preRender(r,!1,!0),s=t.map(a=>a.on("change",i));return()=>{s.forEach(a=>a()),vr(r)}}),n}function bz(t){ca.current=[],t();const e=_k(ca.current,t);return ca.current=void 0,e}function wz(t,e,n,r){if(typeof t=="function")return bz(t);const i=typeof e=="function"?e:DE(e,n,r);return Array.isArray(t)?Wy(t,i):Wy([t],([s])=>i(s))}function Wy(t,e){const n=pi(()=>[]);return _k(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class kz{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const _z=()=>new kz;function B0(){return pi(_z)}const Nk=S.createContext(null);function Nz(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const s=r>0?1:-1,a=t[i+s];if(!a)return t;const l=t[i],c=a.layout,d=Xe(c.min,c.max,.5);return s===1&&l.layout.max+n>d||s===-1&&l.layout.min+n<d?B4(t,i,i+s):t}function jz({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},a){const l=pi(()=>ee[e]),c=[],d=S.useRef(!1),h={axis:n,registerItem:(p,m)=>{const v=c.findIndex(N=>p===N.value);v!==-1?c[v].layout=m[n]:c.push({value:p,layout:m[n]}),c.sort(Ez)},updateOrder:(p,m,v)=>{if(d.current)return;const N=Nz(c,p,m,v);c!==N&&(d.current=!0,r(N.map(Cz).filter(z=>i.indexOf(z)!==-1)))}};return S.useEffect(()=>{d.current=!1}),o.jsx(l,{...s,ref:a,ignoreStrict:!0,children:o.jsx(Nk.Provider,{value:h,children:t})})}const Vu=S.forwardRef(jz);function Cz(t){return t.value}function Ez(t,e){return t.layout.min-e.layout.min}function qy(t,e=0){return It(t)?t:Zc(e)}function Tz({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...a},l){const c=pi(()=>ee[r]),d=S.useContext(Nk),h={x:qy(e.x),y:qy(e.y)},p=wz([h.x,h.y],([z,R])=>z||R?1:"unset"),{axis:m,registerItem:v,updateOrder:N}=d;return o.jsx(c,{drag:m,...a,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:p},layout:s,onDrag:(z,R)=>{const{velocity:w}=R;w[m]&&N(n,h[m].get(),w[m]),i&&i(z,R)},onLayoutMeasure:z=>v(n,z),ref:l,ignoreStrict:!0,children:t})}const Mu=S.forwardRef(Tz);function Hy({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return o.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>o.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const pn=t=>{S.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth,n=window.getComputedStyle(document.body).overflow,r=window.getComputedStyle(document.body).paddingRight;return document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${parseInt(r||0)+e}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=r}},[t])},Sz=()=>{};var Gy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zz=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},Ck={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|d>>6,v=d&63;c||(v=64,a||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(jk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zz(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||p==null)throw new Iz;const m=s<<2|l>>4;if(r.push(m),d!==64){const v=l<<4&240|d>>2;if(r.push(v),p!==64){const N=d<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Iz extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Az=function(t){const e=jk(t);return Ck.encodeByteArray(e,!0)},eu=function(t){return Az(t).replace(/\./g,"")},Pz=function(t){try{return Ck.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rz(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dz=()=>Rz().__FIREBASE_DEFAULTS__,Vz=()=>{if(typeof process>"u"||typeof Gy>"u")return;const t=Gy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Mz=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pz(t[1]);return e&&JSON.parse(e)},U0=()=>{try{return Sz()||Dz()||Vz()||Mz()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Lz=t=>{var e,n;return(n=(e=U0())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Oz=t=>{const e=Lz(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ek=()=>{var t;return(t=U0())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fz{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $0(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Bz(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[eu(JSON.stringify(n)),eu(JSON.stringify(a)),""].join(".")}const ha={};function $z(){const t={prod:[],emulator:[]};for(const e of Object.keys(ha))ha[e]?t.emulator.push(e):t.prod.push(e);return t}function Wz(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ky=!1;function qz(t,e){if(typeof window>"u"||typeof document>"u"||!$0(window.location.host)||ha[t]===e||ha[t]||Ky)return;ha[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=$z().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Ky=!0,a()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=Wz(r),v=n("text"),N=document.getElementById(v)||document.createElement("span"),z=n("learnmore"),R=document.getElementById(z)||document.createElement("a"),w=n("preprendIcon"),x=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const b=m.element;l(b),h(R,z);const D=d();c(x,w),b.append(x,N,R,D),document.body.appendChild(b)}s?(N.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hz(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gz(){var e;const t=(e=U0())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Kz(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qz(){return!Gz()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tk(){try{return typeof indexedDB=="object"}catch{return!1}}function Sk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function Yz(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xz="FirebaseError";class gi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Xz,Object.setPrototypeOf(this,gi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Lu.prototype.create)}}class Lu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Jz(s,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new gi(i,l,r)}}function Jz(t,e){return t.replace(Zz,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Zz=/\{\$([^}]+)}/g;function Oa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],a=e[i];if(Qy(s)&&Qy(a)){if(!Oa(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eI=1e3,tI=2,nI=4*60*60*1e3,rI=.5;function Yy(t,e=eI,n=tI){const r=e*Math.pow(n,t),i=Math.round(rI*r*(Math.random()-.5)*2);return Math.min(nI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(t){return t&&t._delegate?t._delegate:t}class wr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Fz;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(oI(e))try{this.getOrInitializeService({instanceIdentifier:Ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ci){return this.instances.has(e)}getOptions(e=Ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ci){return this.component?this.component.multipleInstances?e:Ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sI(t){return t===Ci?void 0:t}function oI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new iI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const lI={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},cI=Se.INFO,uI={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},dI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=uI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class W0{constructor(e){this.name=e,this._logLevel=cI,this._logHandler=dI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const hI=(t,e)=>e.some(n=>t instanceof n);let Xy,Jy;function fI(){return Xy||(Xy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pI(){return Jy||(Jy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zk=new WeakMap,Mf=new WeakMap,Ik=new WeakMap,rh=new WeakMap,q0=new WeakMap;function mI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",a)},s=()=>{n(Yr(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&zk.set(n,t)}).catch(()=>{}),q0.set(e,t),e}function gI(t){if(Mf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",a),t.removeEventListener("abort",a)},s=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",a),t.addEventListener("abort",a)});Mf.set(t,e)}let Lf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Mf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ik.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xI(t){Lf=t(Lf)}function yI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ih(this),e,...n);return Ik.set(r,e.sort?e.sort():[e]),Yr(r)}:pI().includes(t)?function(...e){return t.apply(ih(this),e),Yr(zk.get(this))}:function(...e){return Yr(t.apply(ih(this),e))}}function vI(t){return typeof t=="function"?yI(t):(t instanceof IDBTransaction&&gI(t),hI(t,fI())?new Proxy(t,Lf):t)}function Yr(t){if(t instanceof IDBRequest)return mI(t);if(rh.has(t))return rh.get(t);const e=vI(t);return e!==t&&(rh.set(t,e),q0.set(e,t)),e}const ih=t=>q0.get(t);function Ak(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(t,e),l=Yr(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Yr(a.result),c.oldVersion,c.newVersion,Yr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const bI=["get","getKey","getAll","getAllKeys","count"],wI=["put","add","delete","clear"],sh=new Map;function Zy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sh.get(e))return sh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=wI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||bI.includes(n)))return;const s=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return sh.set(e,s),s}xI(t=>({...t,get:(e,n,r)=>Zy(e,n)||t.get(e,n,r),has:(e,n)=>!!Zy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_I(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _I(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Of="@firebase/app",ev="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr=new W0("@firebase/app"),NI="@firebase/app-compat",jI="@firebase/analytics-compat",CI="@firebase/analytics",EI="@firebase/app-check-compat",TI="@firebase/app-check",SI="@firebase/auth",zI="@firebase/auth-compat",II="@firebase/database",AI="@firebase/data-connect",PI="@firebase/database-compat",RI="@firebase/functions",DI="@firebase/functions-compat",VI="@firebase/installations",MI="@firebase/installations-compat",LI="@firebase/messaging",OI="@firebase/messaging-compat",FI="@firebase/performance",BI="@firebase/performance-compat",UI="@firebase/remote-config",$I="@firebase/remote-config-compat",WI="@firebase/storage",qI="@firebase/storage-compat",HI="@firebase/firestore",GI="@firebase/ai",KI="@firebase/firestore-compat",QI="firebase",YI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff="[DEFAULT]",XI={[Of]:"fire-core",[NI]:"fire-core-compat",[CI]:"fire-analytics",[jI]:"fire-analytics-compat",[TI]:"fire-app-check",[EI]:"fire-app-check-compat",[SI]:"fire-auth",[zI]:"fire-auth-compat",[II]:"fire-rtdb",[AI]:"fire-data-connect",[PI]:"fire-rtdb-compat",[RI]:"fire-fn",[DI]:"fire-fn-compat",[VI]:"fire-iid",[MI]:"fire-iid-compat",[LI]:"fire-fcm",[OI]:"fire-fcm-compat",[FI]:"fire-perf",[BI]:"fire-perf-compat",[UI]:"fire-rc",[$I]:"fire-rc-compat",[WI]:"fire-gcs",[qI]:"fire-gcs-compat",[HI]:"fire-fst",[KI]:"fire-fst-compat",[GI]:"fire-vertex","fire-js":"fire-js",[QI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Map,JI=new Map,Bf=new Map;function tv(t,e){try{t.container.addComponent(e)}catch(n){kr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ri(t){const e=t.name;if(Bf.has(e))return kr.debug(`There were multiple attempts to register component ${e}.`),!1;Bf.set(e,t);for(const n of tu.values())tv(n,t);for(const n of JI.values())tv(n,t);return!0}function rl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ZI(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new Lu("app","Firebase",eA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new wr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=YI;function Pk(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Ff,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Xr.create("bad-app-name",{appName:String(i)});if(n||(n=Ek()),!n)throw Xr.create("no-options");const s=tu.get(i);if(s){if(Oa(n,s.options)&&Oa(r,s.config))return s;throw Xr.create("duplicate-app",{appName:i})}const a=new aI(i);for(const c of Bf.values())a.addComponent(c);const l=new tA(n,r,a);return tu.set(i,l),l}function Rk(t=Ff){const e=tu.get(t);if(!e&&t===Ff&&Ek())return Pk();if(!e)throw Xr.create("no-app",{appName:t});return e}function Xn(t,e,n){let r=XI[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),kr.warn(a.join(" "));return}ri(new wr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="firebase-heartbeat-database",iA=1,Fa="firebase-heartbeat-store";let oh=null;function Dk(){return oh||(oh=Ak(rA,iA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),oh}async function sA(t){try{const n=(await Dk()).transaction(Fa),r=await n.objectStore(Fa).get(Vk(t));return await n.done,r}catch(e){if(e instanceof gi)kr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});kr.warn(n.message)}}}async function nv(t,e){try{const r=(await Dk()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,Vk(t)),await r.done}catch(n){if(n instanceof gi)kr.warn(n.message);else{const r=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});kr.warn(r.message)}}}function Vk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA=1024,aA=30;class lA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>aA){const a=dA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){kr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rv(),{heartbeatsToSend:r,unsentEntries:i}=cA(this._heartbeatsCache.heartbeats),s=eu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return kr.warn(n),""}}}function rv(){return new Date().toISOString().substring(0,10)}function cA(t,e=oA){const n=[];let r=t.slice();for(const i of t){const s=n.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),iv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Tk()?Sk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function iv(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}function dA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){ri(new wr("platform-logger",e=>new kI(e),"PRIVATE")),ri(new wr("heartbeat",e=>new lA(e),"PRIVATE")),Xn(Of,ev,t),Xn(Of,ev,"esm2020"),Xn("fire-js","")}hA("");var fA="firebase",pA="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(fA,pA,"app");const Mk="@firebase/installations",H0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=1e4,Ok=`w:${H0}`,Fk="FIS_v2",mA="https://firebaseinstallations.googleapis.com/v1",gA=60*60*1e3,xA="installations",yA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Hi=new Lu(xA,yA,vA);function Bk(t){return t instanceof gi&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk({projectId:t}){return`${mA}/projects/${t}/installations`}function $k(t){return{token:t.token,requestStatus:2,expiresIn:wA(t.expiresIn),creationTime:Date.now()}}async function Wk(t,e){const r=(await e.json()).error;return Hi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function qk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bA(t,{refreshToken:e}){const n=qk(t);return n.append("Authorization",kA(e)),n}async function Hk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function wA(t){return Number(t.replace("s","000"))}function kA(t){return`${Fk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Uk(t),i=qk(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={fid:n,authVersion:Fk,appId:t.appId,sdkVersion:Ok},l={method:"POST",headers:i,body:JSON.stringify(a)},c=await Hk(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:$k(d.authToken)}}else throw await Wk("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jA=/^[cdef][\w-]{21}$/,Uf="";function CA(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=EA(t);return jA.test(n)?n:Uf}catch{return Uf}}function EA(t){return NA(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ou(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new Map;function Qk(t,e){const n=Ou(t);Yk(n,e),TA(n,e)}function Yk(t,e){const n=Kk.get(t);if(n)for(const r of n)r(e)}function TA(t,e){const n=SA();n&&n.postMessage({key:t,fid:e}),zA()}let Pi=null;function SA(){return!Pi&&"BroadcastChannel"in self&&(Pi=new BroadcastChannel("[Firebase] FID Change"),Pi.onmessage=t=>{Yk(t.data.key,t.data.fid)}),Pi}function zA(){Kk.size===0&&Pi&&(Pi.close(),Pi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA="firebase-installations-database",AA=1,Gi="firebase-installations-store";let ah=null;function G0(){return ah||(ah=Ak(IA,AA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Gi)}}})),ah}async function nu(t,e){const n=Ou(t),i=(await G0()).transaction(Gi,"readwrite"),s=i.objectStore(Gi),a=await s.get(n);return await s.put(e,n),await i.done,(!a||a.fid!==e.fid)&&Qk(t,e.fid),e}async function Xk(t){const e=Ou(t),r=(await G0()).transaction(Gi,"readwrite");await r.objectStore(Gi).delete(e),await r.done}async function Fu(t,e){const n=Ou(t),i=(await G0()).transaction(Gi,"readwrite"),s=i.objectStore(Gi),a=await s.get(n),l=e(a);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!a||a.fid!==l.fid)&&Qk(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K0(t){let e;const n=await Fu(t.appConfig,r=>{const i=PA(r),s=RA(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Uf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function PA(t){const e=t||{fid:CA(),registrationStatus:0};return Jk(e)}function RA(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Hi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=DA(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:VA(t)}:{installationEntry:e}}async function DA(t,e){try{const n=await _A(t,e);return nu(t.appConfig,n)}catch(n){throw Bk(n)&&n.customData.serverCode===409?await Xk(t.appConfig):await nu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function VA(t){let e=await sv(t.appConfig);for(;e.registrationStatus===1;)await Gk(100),e=await sv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await K0(t);return r||n}return e}function sv(t){return Fu(t,e=>{if(!e)throw Hi.create("installation-not-found");return Jk(e)})}function Jk(t){return MA(t)?{fid:t.fid,registrationStatus:0}:t}function MA(t){return t.registrationStatus===1&&t.registrationTime+Lk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA({appConfig:t,heartbeatServiceProvider:e},n){const r=OA(t,n),i=bA(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={installation:{sdkVersion:Ok,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(a)},c=await Hk(()=>fetch(r,l));if(c.ok){const d=await c.json();return $k(d)}else throw await Wk("Generate Auth Token",c)}function OA(t,{fid:e}){return`${Uk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q0(t,e=!1){let n;const r=await Fu(t.appConfig,s=>{if(!Zk(s))throw Hi.create("not-registered");const a=s.authToken;if(!e&&UA(a))return s;if(a.requestStatus===1)return n=FA(t,e),s;{if(!navigator.onLine)throw Hi.create("app-offline");const l=WA(s);return n=BA(t,l),l}});return n?await n:r.authToken}async function FA(t,e){let n=await ov(t.appConfig);for(;n.authToken.requestStatus===1;)await Gk(100),n=await ov(t.appConfig);const r=n.authToken;return r.requestStatus===0?Q0(t,e):r}function ov(t){return Fu(t,e=>{if(!Zk(e))throw Hi.create("not-registered");const n=e.authToken;return qA(n)?{...e,authToken:{requestStatus:0}}:e})}async function BA(t,e){try{const n=await LA(t,e),r={...e,authToken:n};return await nu(t.appConfig,r),n}catch(n){if(Bk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Xk(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await nu(t.appConfig,r)}throw n}}function Zk(t){return t!==void 0&&t.registrationStatus===2}function UA(t){return t.requestStatus===2&&!$A(t)}function $A(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+gA}function WA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function qA(t){return t.requestStatus===1&&t.requestTime+Lk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(t){const e=t,{installationEntry:n,registrationPromise:r}=await K0(e);return r?r.catch(console.error):Q0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GA(t,e=!1){const n=t;return await KA(n),(await Q0(n,e)).token}async function KA(t){const{registrationPromise:e}=await K0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){if(!t||!t.options)throw lh("App Configuration");if(!t.name)throw lh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw lh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function lh(t){return Hi.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_="installations",YA="installations-internal",XA=t=>{const e=t.getProvider("app").getImmediate(),n=QA(e),r=rl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},JA=t=>{const e=t.getProvider("app").getImmediate(),n=rl(e,e_).getImmediate();return{getId:()=>HA(n),getToken:i=>GA(n,i)}};function ZA(){ri(new wr(e_,XA,"PUBLIC")),ri(new wr(YA,JA,"PRIVATE"))}ZA();Xn(Mk,H0);Xn(Mk,H0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ru="analytics",e3="firebase_id",t3="origin",n3=60*1e3,r3="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt=new W0("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i3={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},un=new Lu("analytics","Analytics",i3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){if(!t.startsWith(Y0)){const e=un.create("invalid-gtag-resource",{gtagURL:t});return Gt.warn(e.message),""}return t}function t_(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function o3(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function a3(t,e){const n=o3("firebase-js-sdk-policy",{createScriptURL:s3}),r=document.createElement("script"),i=`${Y0}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function l3(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function c3(t,e,n,r,i,s){const a=r[i];try{if(a)await e[a];else{const c=(await t_(n)).find(d=>d.measurementId===i);c&&await e[c.appId]}}catch(l){Gt.error(l)}t("config",i,s)}async function u3(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const l=await t_(n);for(const c of a){const d=l.find(p=>p.measurementId===c),h=d&&e[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Gt.error(s)}}function d3(t,e,n,r){async function i(s,...a){try{if(s==="event"){const[l,c]=a;await u3(t,e,n,l,c)}else if(s==="config"){const[l,c]=a;await c3(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=a;t("consent",l,c)}else if(s==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(s==="set"){const[l]=a;t("set",l)}else t(s,...a)}catch(l){Gt.error(l)}}return i}function h3(t,e,n,r,i){let s=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=d3(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function f3(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Y0)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=30,m3=1e3;class g3{constructor(e={},n=m3){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const n_=new g3;function x3(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function y3(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:x3(n)},i=r3.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let l="";try{const c=await s.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw un.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function v3(t,e=n_,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw un.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw un.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new k3;return setTimeout(async()=>{l.abort()},n3),r_({appId:r,apiKey:i,measurementId:s},a,l,e)}async function r_(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=n_){var l;const{appId:s,measurementId:a}=t;try{await b3(r,e)}catch(c){if(a)return Gt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:a};throw c}try{const c=await y3(t);return i.deleteThrottleMetadata(s),c}catch(c){const d=c;if(!w3(d)){if(i.deleteThrottleMetadata(s),a)return Gt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?Yy(n,i.intervalMillis,p3):Yy(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,p),Gt.debug(`Calling attemptFetch again in ${h} millis`),r_(t,p,r,i)}}function b3(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function w3(t){if(!(t instanceof gi)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class k3{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function _3(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,a={...r,send_to:s};t("event",n,a)}}async function N3(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j3(){if(Tk())try{await Sk()}catch(t){return Gt.warn(un.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Gt.warn(un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function C3(t,e,n,r,i,s,a){const l=v3(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Gt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Gt.error(m)),e.push(l);const c=j3().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);f3(s)||a3(s,d.measurementId),i("js",new Date);const p=(a==null?void 0:a.config)??{};return p[t3]="firebase",p.update=!0,h!=null&&(p[e3]=h),i("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e){this.app=e}_delete(){return delete Ls[this.app.options.appId],Promise.resolve()}}let Ls={},av=[];const lv={};let ch="dataLayer",T3="gtag",cv,X0,uv=!1;function S3(){const t=[];if(Kz()&&t.push("This is a browser extension environment."),Yz()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=un.create("invalid-analytics-context",{errorInfo:e});Gt.warn(n.message)}}function z3(t,e,n){S3();const r=t.options.appId;if(!r)throw un.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Gt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw un.create("no-api-key");if(Ls[r]!=null)throw un.create("already-exists",{id:r});if(!uv){l3(ch);const{wrappedGtag:s,gtagCore:a}=h3(Ls,av,lv,ch,T3);X0=s,cv=a,uv=!0}return Ls[r]=C3(t,av,lv,e,cv,ch,n),new E3(t)}function I3(t=Rk()){t=br(t);const e=rl(t,ru);return e.isInitialized()?e.getImmediate():A3(t)}function A3(t,e={}){const n=rl(t,ru);if(n.isInitialized()){const i=n.getImmediate();if(Oa(e,n.getOptions()))return i;throw un.create("already-initialized")}return n.initialize({options:e})}function P3(t,e,n){t=br(t),N3(X0,Ls[t.app.options.appId],e,n).catch(r=>Gt.error(r))}function R3(t,e,n,r){t=br(t),_3(X0,Ls[t.app.options.appId],e,n,r).catch(i=>Gt.error(i))}const dv="@firebase/analytics",hv="0.10.19";function D3(){ri(new wr(ru,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return z3(r,i,n)},"PUBLIC")),ri(new wr("analytics-internal",t,"PRIVATE")),Xn(dv,hv),Xn(dv,hv,"esm2020");function t(e){try{const n=e.getProvider(ru).getImmediate();return{logEvent:(r,i,s)=>R3(n,r,i,s),setUserProperties:(r,i)=>P3(n,r,i)}}catch(n){throw un.create("interop-component-reg-failed",{reason:n})}}}D3();var fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,i_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,y){function _(){}_.prototype=y.prototype,k.F=y.prototype,k.prototype=new _,k.prototype.constructor=k,k.D=function(j,A,P){for(var I=Array(arguments.length-2),we=2;we<arguments.length;we++)I[we-2]=arguments[we];return y.prototype[A].apply(j,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,y,_){_||(_=0);const j=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)j[A]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(A=0;A<16;++A)j[A]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=k.g[0],_=k.g[1],A=k.g[2];let P=k.g[3],I;I=y+(P^_&(A^P))+j[0]+3614090360&4294967295,y=_+(I<<7&4294967295|I>>>25),I=P+(A^y&(_^A))+j[1]+3905402710&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(_^P&(y^_))+j[2]+606105819&4294967295,A=P+(I<<17&4294967295|I>>>15),I=_+(y^A&(P^y))+j[3]+3250441966&4294967295,_=A+(I<<22&4294967295|I>>>10),I=y+(P^_&(A^P))+j[4]+4118548399&4294967295,y=_+(I<<7&4294967295|I>>>25),I=P+(A^y&(_^A))+j[5]+1200080426&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(_^P&(y^_))+j[6]+2821735955&4294967295,A=P+(I<<17&4294967295|I>>>15),I=_+(y^A&(P^y))+j[7]+4249261313&4294967295,_=A+(I<<22&4294967295|I>>>10),I=y+(P^_&(A^P))+j[8]+1770035416&4294967295,y=_+(I<<7&4294967295|I>>>25),I=P+(A^y&(_^A))+j[9]+2336552879&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(_^P&(y^_))+j[10]+4294925233&4294967295,A=P+(I<<17&4294967295|I>>>15),I=_+(y^A&(P^y))+j[11]+2304563134&4294967295,_=A+(I<<22&4294967295|I>>>10),I=y+(P^_&(A^P))+j[12]+1804603682&4294967295,y=_+(I<<7&4294967295|I>>>25),I=P+(A^y&(_^A))+j[13]+4254626195&4294967295,P=y+(I<<12&4294967295|I>>>20),I=A+(_^P&(y^_))+j[14]+2792965006&4294967295,A=P+(I<<17&4294967295|I>>>15),I=_+(y^A&(P^y))+j[15]+1236535329&4294967295,_=A+(I<<22&4294967295|I>>>10),I=y+(A^P&(_^A))+j[1]+4129170786&4294967295,y=_+(I<<5&4294967295|I>>>27),I=P+(_^A&(y^_))+j[6]+3225465664&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^_&(P^y))+j[11]+643717713&4294967295,A=P+(I<<14&4294967295|I>>>18),I=_+(P^y&(A^P))+j[0]+3921069994&4294967295,_=A+(I<<20&4294967295|I>>>12),I=y+(A^P&(_^A))+j[5]+3593408605&4294967295,y=_+(I<<5&4294967295|I>>>27),I=P+(_^A&(y^_))+j[10]+38016083&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^_&(P^y))+j[15]+3634488961&4294967295,A=P+(I<<14&4294967295|I>>>18),I=_+(P^y&(A^P))+j[4]+3889429448&4294967295,_=A+(I<<20&4294967295|I>>>12),I=y+(A^P&(_^A))+j[9]+568446438&4294967295,y=_+(I<<5&4294967295|I>>>27),I=P+(_^A&(y^_))+j[14]+3275163606&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^_&(P^y))+j[3]+4107603335&4294967295,A=P+(I<<14&4294967295|I>>>18),I=_+(P^y&(A^P))+j[8]+1163531501&4294967295,_=A+(I<<20&4294967295|I>>>12),I=y+(A^P&(_^A))+j[13]+2850285829&4294967295,y=_+(I<<5&4294967295|I>>>27),I=P+(_^A&(y^_))+j[2]+4243563512&4294967295,P=y+(I<<9&4294967295|I>>>23),I=A+(y^_&(P^y))+j[7]+1735328473&4294967295,A=P+(I<<14&4294967295|I>>>18),I=_+(P^y&(A^P))+j[12]+2368359562&4294967295,_=A+(I<<20&4294967295|I>>>12),I=y+(_^A^P)+j[5]+4294588738&4294967295,y=_+(I<<4&4294967295|I>>>28),I=P+(y^_^A)+j[8]+2272392833&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^_)+j[11]+1839030562&4294967295,A=P+(I<<16&4294967295|I>>>16),I=_+(A^P^y)+j[14]+4259657740&4294967295,_=A+(I<<23&4294967295|I>>>9),I=y+(_^A^P)+j[1]+2763975236&4294967295,y=_+(I<<4&4294967295|I>>>28),I=P+(y^_^A)+j[4]+1272893353&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^_)+j[7]+4139469664&4294967295,A=P+(I<<16&4294967295|I>>>16),I=_+(A^P^y)+j[10]+3200236656&4294967295,_=A+(I<<23&4294967295|I>>>9),I=y+(_^A^P)+j[13]+681279174&4294967295,y=_+(I<<4&4294967295|I>>>28),I=P+(y^_^A)+j[0]+3936430074&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^_)+j[3]+3572445317&4294967295,A=P+(I<<16&4294967295|I>>>16),I=_+(A^P^y)+j[6]+76029189&4294967295,_=A+(I<<23&4294967295|I>>>9),I=y+(_^A^P)+j[9]+3654602809&4294967295,y=_+(I<<4&4294967295|I>>>28),I=P+(y^_^A)+j[12]+3873151461&4294967295,P=y+(I<<11&4294967295|I>>>21),I=A+(P^y^_)+j[15]+530742520&4294967295,A=P+(I<<16&4294967295|I>>>16),I=_+(A^P^y)+j[2]+3299628645&4294967295,_=A+(I<<23&4294967295|I>>>9),I=y+(A^(_|~P))+j[0]+4096336452&4294967295,y=_+(I<<6&4294967295|I>>>26),I=P+(_^(y|~A))+j[7]+1126891415&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~_))+j[14]+2878612391&4294967295,A=P+(I<<15&4294967295|I>>>17),I=_+(P^(A|~y))+j[5]+4237533241&4294967295,_=A+(I<<21&4294967295|I>>>11),I=y+(A^(_|~P))+j[12]+1700485571&4294967295,y=_+(I<<6&4294967295|I>>>26),I=P+(_^(y|~A))+j[3]+2399980690&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~_))+j[10]+4293915773&4294967295,A=P+(I<<15&4294967295|I>>>17),I=_+(P^(A|~y))+j[1]+2240044497&4294967295,_=A+(I<<21&4294967295|I>>>11),I=y+(A^(_|~P))+j[8]+1873313359&4294967295,y=_+(I<<6&4294967295|I>>>26),I=P+(_^(y|~A))+j[15]+4264355552&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~_))+j[6]+2734768916&4294967295,A=P+(I<<15&4294967295|I>>>17),I=_+(P^(A|~y))+j[13]+1309151649&4294967295,_=A+(I<<21&4294967295|I>>>11),I=y+(A^(_|~P))+j[4]+4149444226&4294967295,y=_+(I<<6&4294967295|I>>>26),I=P+(_^(y|~A))+j[11]+3174756917&4294967295,P=y+(I<<10&4294967295|I>>>22),I=A+(y^(P|~_))+j[2]+718787259&4294967295,A=P+(I<<15&4294967295|I>>>17),I=_+(P^(A|~y))+j[9]+3951481745&4294967295,k.g[0]=k.g[0]+y&4294967295,k.g[1]=k.g[1]+(A+(I<<21&4294967295|I>>>11))&4294967295,k.g[2]=k.g[2]+A&4294967295,k.g[3]=k.g[3]+P&4294967295}r.prototype.v=function(k,y){y===void 0&&(y=k.length);const _=y-this.blockSize,j=this.C;let A=this.h,P=0;for(;P<y;){if(A==0)for(;P<=_;)i(this,k,P),P+=this.blockSize;if(typeof k=="string"){for(;P<y;)if(j[A++]=k.charCodeAt(P++),A==this.blockSize){i(this,j),A=0;break}}else for(;P<y;)if(j[A++]=k[P++],A==this.blockSize){i(this,j),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var y=1;y<k.length-8;++y)k[y]=0;y=this.o*8;for(var _=k.length-8;_<k.length;++_)k[_]=y&255,y/=256;for(this.v(k),k=Array(16),y=0,_=0;_<4;++_)for(let j=0;j<32;j+=8)k[y++]=this.g[_]>>>j&255;return k};function s(k,y){var _=l;return Object.prototype.hasOwnProperty.call(_,k)?_[k]:_[k]=y(k)}function a(k,y){this.h=y;const _=[];let j=!0;for(let A=k.length-1;A>=0;A--){const P=k[A]|0;j&&P==y||(_[A]=P,j=!1)}this.g=_}var l={};function c(k){return-128<=k&&k<128?s(k,function(y){return new a([y|0],y<0?-1:0)}):new a([k|0],k<0?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return p;if(k<0)return R(d(-k));const y=[];let _=1;for(let j=0;k>=_;j++)y[j]=k/_|0,_*=4294967296;return new a(y,0)}function h(k,y){if(k.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(k.charAt(0)=="-")return R(h(k.substring(1),y));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=d(Math.pow(y,8));let j=p;for(let P=0;P<k.length;P+=8){var A=Math.min(8,k.length-P);const I=parseInt(k.substring(P,P+A),y);A<8?(A=d(Math.pow(y,A)),j=j.j(A).add(d(I))):(j=j.j(_),j=j.add(d(I)))}return j}var p=c(0),m=c(1),v=c(16777216);t=a.prototype,t.m=function(){if(z(this))return-R(this).m();let k=0,y=1;for(let _=0;_<this.g.length;_++){const j=this.i(_);k+=(j>=0?j:4294967296+j)*y,y*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(z(this))return"-"+R(this).toString(k);const y=d(Math.pow(k,6));var _=this;let j="";for(;;){const A=D(_,y).g;_=w(_,A.j(y));let P=((_.g.length>0?_.g[0]:_.h)>>>0).toString(k);if(_=A,N(_))return P+j;for(;P.length<6;)P="0"+P;j=P+j}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(let y=0;y<k.g.length;y++)if(k.g[y]!=0)return!1;return!0}function z(k){return k.h==-1}t.l=function(k){return k=w(this,k),z(k)?-1:N(k)?0:1};function R(k){const y=k.g.length,_=[];for(let j=0;j<y;j++)_[j]=~k.g[j];return new a(_,~k.h).add(m)}t.abs=function(){return z(this)?R(this):this},t.add=function(k){const y=Math.max(this.g.length,k.g.length),_=[];let j=0;for(let A=0;A<=y;A++){let P=j+(this.i(A)&65535)+(k.i(A)&65535),I=(P>>>16)+(this.i(A)>>>16)+(k.i(A)>>>16);j=I>>>16,P&=65535,I&=65535,_[A]=I<<16|P}return new a(_,_[_.length-1]&-2147483648?-1:0)};function w(k,y){return k.add(R(y))}t.j=function(k){if(N(this)||N(k))return p;if(z(this))return z(k)?R(this).j(R(k)):R(R(this).j(k));if(z(k))return R(this.j(R(k)));if(this.l(v)<0&&k.l(v)<0)return d(this.m()*k.m());const y=this.g.length+k.g.length,_=[];for(var j=0;j<2*y;j++)_[j]=0;for(j=0;j<this.g.length;j++)for(let A=0;A<k.g.length;A++){const P=this.i(j)>>>16,I=this.i(j)&65535,we=k.i(A)>>>16,de=k.i(A)&65535;_[2*j+2*A]+=I*de,x(_,2*j+2*A),_[2*j+2*A+1]+=P*de,x(_,2*j+2*A+1),_[2*j+2*A+1]+=I*we,x(_,2*j+2*A+1),_[2*j+2*A+2]+=P*we,x(_,2*j+2*A+2)}for(k=0;k<y;k++)_[k]=_[2*k+1]<<16|_[2*k];for(k=y;k<2*y;k++)_[k]=0;return new a(_,0)};function x(k,y){for(;(k[y]&65535)!=k[y];)k[y+1]+=k[y]>>>16,k[y]&=65535,y++}function b(k,y){this.g=k,this.h=y}function D(k,y){if(N(y))throw Error("division by zero");if(N(k))return new b(p,p);if(z(k))return y=D(R(k),y),new b(R(y.g),R(y.h));if(z(y))return y=D(k,R(y)),new b(R(y.g),y.h);if(k.g.length>30){if(z(k)||z(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,j=y;j.l(k)<=0;)_=L(_),j=L(j);var A=O(_,1),P=O(j,1);for(j=O(j,2),_=O(_,2);!N(j);){var I=P.add(j);I.l(k)<=0&&(A=A.add(_),P=I),j=O(j,1),_=O(_,1)}return y=w(k,A.j(y)),new b(A,y)}for(A=p;k.l(y)>=0;){for(_=Math.max(1,Math.floor(k.m()/y.m())),j=Math.ceil(Math.log(_)/Math.LN2),j=j<=48?1:Math.pow(2,j-48),P=d(_),I=P.j(y);z(I)||I.l(k)>0;)_-=j,P=d(_),I=P.j(y);N(P)&&(P=m),A=A.add(P),k=w(k,I)}return new b(A,k)}t.B=function(k){return D(this,k).h},t.and=function(k){const y=Math.max(this.g.length,k.g.length),_=[];for(let j=0;j<y;j++)_[j]=this.i(j)&k.i(j);return new a(_,this.h&k.h)},t.or=function(k){const y=Math.max(this.g.length,k.g.length),_=[];for(let j=0;j<y;j++)_[j]=this.i(j)|k.i(j);return new a(_,this.h|k.h)},t.xor=function(k){const y=Math.max(this.g.length,k.g.length),_=[];for(let j=0;j<y;j++)_[j]=this.i(j)^k.i(j);return new a(_,this.h^k.h)};function L(k){const y=k.g.length+1,_=[];for(let j=0;j<y;j++)_[j]=k.i(j)<<1|k.i(j-1)>>>31;return new a(_,k.h)}function O(k,y){const _=y>>5;y%=32;const j=k.g.length-_,A=[];for(let P=0;P<j;P++)A[P]=y>0?k.i(P+_)>>>y|k.i(P+_+1)<<32-y:k.i(P+_);return new a(A,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,i_=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,Jr=a}).apply(typeof fv<"u"?fv:typeof self<"u"?self:typeof window<"u"?window:{});var Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var s_,Ko,o_,fc,$f,a_,l_,c_;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Wl=="object"&&Wl];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var C=0;C<u.length-1;C++){var B=u[C];if(!(B in g))break e;g=g[B]}u=u[u.length-1],C=g[u],f=f(C),f!=C&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(f){var g=[],C;for(C in f)Object.prototype.hasOwnProperty.call(f,C)&&g.push([C,f[C]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function c(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){return d=c,d.apply(null,arguments)}function h(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var C=g.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function p(u,f){function g(){}g.prototype=f.prototype,u.Z=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(C,B,$){for(var ne=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)ne[ke-2]=arguments[ke];return f.prototype[B].apply(C,ne)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function v(u){const f=u.length;if(f>0){const g=Array(f);for(let C=0;C<f;C++)g[C]=u[C];return g}return[]}function N(u,f){for(let C=1;C<arguments.length;C++){const B=arguments[C];var g=typeof B;if(g=g!="object"?g:B?Array.isArray(B)?"array":g:"null",g=="array"||g=="object"&&typeof B.length=="number"){g=u.length||0;const $=B.length||0;u.length=g+$;for(let ne=0;ne<$;ne++)u[g+ne]=B[ne]}else u.push(B)}}class z{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function R(u){a.setTimeout(()=>{throw u},0)}function w(){var u=k;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class x{constructor(){this.h=this.g=null}add(f,g){const C=b.get();C.set(f,g),this.h?this.h.next=C:this.g=C,this.h=C}}var b=new z(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,O=!1,k=new x,y=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(_)}};function _(){for(var u;u=w();){try{u.h.call(u.g)}catch(g){R(g)}var f=b;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}O=!1}function j(){this.u=this.u,this.C=this.C}j.prototype.u=!1,j.prototype.dispose=function(){this.u||(this.u=!0,this.N())},j.prototype[Symbol.dispose]=function(){this.dispose()},j.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return u}();function I(u){return/^[\s\xa0]*$/.test(u)}function we(u,f){A.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}p(we,A),we.prototype.init=function(u,f){const g=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&we.Z.h.call(this)},we.prototype.h=function(){we.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),me=0;function pe(u,f,g,C,B){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!C,this.ha=B,this.key=++me,this.da=this.fa=!1}function H(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function oe(u,f,g){for(const C in u)f.call(g,u[C],C,u)}function te(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function fe(u){const f={};for(const g in u)f[g]=u[g];return f}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function K(u,f){let g,C;for(let B=1;B<arguments.length;B++){C=arguments[B];for(g in C)u[g]=C[g];for(let $=0;$<ue.length;$++)g=ue[$],Object.prototype.hasOwnProperty.call(C,g)&&(u[g]=C[g])}}function E(u){this.src=u,this.g={},this.h=0}E.prototype.add=function(u,f,g,C,B){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const ne=U(u,f,C,B);return ne>-1?(f=u[ne],g||(f.fa=!1)):(f=new pe(f,this.src,$,!!C,B),f.fa=g,u.push(f)),f};function F(u,f){const g=f.type;if(g in u.g){var C=u.g[g],B=Array.prototype.indexOf.call(C,f,void 0),$;($=B>=0)&&Array.prototype.splice.call(C,B,1),$&&(H(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function U(u,f,g,C){for(let B=0;B<u.length;++B){const $=u[B];if(!$.da&&$.listener==f&&$.capture==!!g&&$.ha==C)return B}return-1}var J="closure_lm_"+(Math.random()*1e6|0),T={};function V(u,f,g,C,B){if(Array.isArray(f)){for(let $=0;$<f.length;$++)V(u,f[$],g,C,B);return null}return g=sn(g),u&&u[de]?u.J(f,g,l(C)?!!C.capture:!1,B):W(u,f,g,!1,C,B)}function W(u,f,g,C,B,$){if(!f)throw Error("Invalid event type");const ne=l(B)?!!B.capture:!!B;let ke=Me(u);if(ke||(u[J]=ke=new E(u)),g=ke.add(f,g,C,ne,$),g.proxy)return g;if(C=Z(),g.proxy=C,C.src=u,C.listener=g,u.addEventListener)P||(B=ne),B===void 0&&(B=!1),u.addEventListener(f.toString(),C,B);else if(u.attachEvent)u.attachEvent(ge(f.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return g}function Z(){function u(g){return f.call(u.src,u.listener,g)}const f=Re;return u}function ie(u,f,g,C,B){if(Array.isArray(f))for(var $=0;$<f.length;$++)ie(u,f[$],g,C,B);else C=l(C)?!!C.capture:!!C,g=sn(g),u&&u[de]?(u=u.i,$=String(f).toString(),$ in u.g&&(f=u.g[$],g=U(f,g,C,B),g>-1&&(H(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete u.g[$],u.h--)))):u&&(u=Me(u))&&(f=u.g[f.toString()],u=-1,f&&(u=U(f,g,C,B)),(g=u>-1?f[u]:null)&&ce(g))}function ce(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[de])F(f.i,u);else{var g=u.type,C=u.proxy;f.removeEventListener?f.removeEventListener(g,C,u.capture):f.detachEvent?f.detachEvent(ge(g),C):f.addListener&&f.removeListener&&f.removeListener(C),(g=Me(f))?(F(g,u),g.h==0&&(g.src=null,f[J]=null)):H(u)}}}function ge(u){return u in T?T[u]:T[u]="on"+u}function Re(u,f){if(u.da)u=!0;else{f=new we(f,this);const g=u.listener,C=u.ha||u.src;u.fa&&ce(u),u=g.call(C,f)}return u}function Me(u){return u=u[J],u instanceof E?u:null}var Ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function sn(u){return typeof u=="function"?u:(u[Ie]||(u[Ie]=function(f){return u.handleEvent(f)}),u[Ie])}function Oe(){j.call(this),this.i=new E(this),this.M=this,this.G=null}p(Oe,j),Oe.prototype[de]=!0,Oe.prototype.removeEventListener=function(u,f,g,C){ie(this,u,f,g,C)};function Ge(u,f){var g,C=u.G;if(C)for(g=[];C;C=C.G)g.push(C);if(u=u.M,C=f.type||f,typeof f=="string")f=new A(f,u);else if(f instanceof A)f.target=f.target||u;else{var B=f;f=new A(C,u),K(f,B)}B=!0;let $,ne;if(g)for(ne=g.length-1;ne>=0;ne--)$=f.g=g[ne],B=Cr($,C,!0,f)&&B;if($=f.g=u,B=Cr($,C,!0,f)&&B,B=Cr($,C,!1,f)&&B,g)for(ne=0;ne<g.length;ne++)$=f.g=g[ne],B=Cr($,C,!1,f)&&B}Oe.prototype.N=function(){if(Oe.Z.N.call(this),this.i){var u=this.i;for(const f in u.g){const g=u.g[f];for(let C=0;C<g.length;C++)H(g[C]);delete u.g[f],u.h--}}this.G=null},Oe.prototype.J=function(u,f,g,C){return this.i.add(String(u),f,!1,g,C)},Oe.prototype.K=function(u,f,g,C){return this.i.add(String(u),f,!0,g,C)};function Cr(u,f,g,C){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let B=!0;for(let $=0;$<f.length;++$){const ne=f[$];if(ne&&!ne.da&&ne.capture==g){const ke=ne.listener,gt=ne.ha||ne.src;ne.fa&&F(u.i,ne),B=ke.call(gt,C)!==!1&&B}}return B&&!C.defaultPrevented}function mn(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:a.setTimeout(u,f||0)}function ul(u){u.g=mn(()=>{u.g=null,u.i&&(u.i=!1,ul(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class td extends j{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ul(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xi(u){j.call(this),this.h=u,this.g={}}p(xi,j);var mo=[];function go(u){oe(u.g,function(f,g){this.g.hasOwnProperty(g)&&ce(f)},u),u.g={}}xi.prototype.N=function(){xi.Z.N.call(this),go(this)},xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rs=a.JSON.stringify,dl=a.JSON.parse,M=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Y(){}function Q(){}var re={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Je(){A.call(this,"d")}p(Je,A);function Ee(){A.call(this,"c")}p(Ee,A);var Ke={},hl=null;function is(){return hl=hl||new Oe}Ke.Ia="serverreachability";function Rm(u){A.call(this,Ke.Ia,u)}p(Rm,A);function xo(u){const f=is();Ge(f,new Rm(f))}Ke.STAT_EVENT="statevent";function Dm(u,f){A.call(this,Ke.STAT_EVENT,u),this.stat=f}p(Dm,A);function Ut(u){const f=is();Ge(f,new Dm(f,u))}Ke.Ja="timingevent";function Vm(u,f){A.call(this,Ke.Ja,u),this.size=f}p(Vm,A);function yo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function vo(){this.g=!0}vo.prototype.ua=function(){this.g=!1};function KN(u,f,g,C,B,$){u.info(function(){if(u.g)if($){var ne="",ke=$.split("&");for(let Le=0;Le<ke.length;Le++){var gt=ke[Le].split("=");if(gt.length>1){const kt=gt[0];gt=gt[1];const Fn=kt.split("_");ne=Fn.length>=2&&Fn[1]=="type"?ne+(kt+"="+gt+"&"):ne+(kt+"=redacted&")}}}else ne=null;else ne=$;return"XMLHTTP REQ ("+C+") [attempt "+B+"]: "+f+`
`+g+`
`+ne})}function QN(u,f,g,C,B,$,ne){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+B+"]: "+f+`
`+g+`
`+$+" "+ne})}function ss(u,f,g,C){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+XN(u,g)+(C?" "+C:"")})}function YN(u,f){u.info(function(){return"TIMEOUT: "+f})}vo.prototype.info=function(){};function XN(u,f){if(!u.g)return f;if(!f)return null;try{const $=JSON.parse(f);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var g=$[u];if(!(g.length<2)){var C=g[1];if(Array.isArray(C)&&!(C.length<1)){var B=C[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ne=1;ne<C.length;ne++)C[ne]=""}}}}return rs($)}catch{return f}}var fl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Mm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Lm;function nd(){}p(nd,Y),nd.prototype.g=function(){return new XMLHttpRequest},Lm=new nd;function bo(u){return encodeURIComponent(String(u))}function JN(u){var f=1;u=u.split(":");const g=[];for(;f>0&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function Er(u,f,g,C){this.j=u,this.i=f,this.l=g,this.S=C||1,this.V=new xi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Om}function Om(){this.i=null,this.g="",this.h=!1}var Fm={},rd={};function id(u,f,g){u.M=1,u.A=ml(On(f)),u.u=g,u.R=!0,Bm(u,null)}function Bm(u,f){u.F=Date.now(),pl(u),u.B=On(u.A);var g=u.B,C=u.S;Array.isArray(C)||(C=[String(C)]),eg(g.i,"t",C),u.C=0,g=u.j.L,u.h=new Om,u.g=yg(u.j,g?f:null,!u.u),u.P>0&&(u.O=new td(d(u.Y,u,u.g),u.P)),f=u.V,g=u.g,C=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(mo[0]=B.toString()),B=mo);for(let $=0;$<B.length;$++){const ne=V(g,B[$],C||f.handleEvent,!1,f.h||f);if(!ne)break;f.g[ne.key]=ne}f=u.J?fe(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),xo(),KN(u.i,u.v,u.B,u.l,u.S,u.u)}Er.prototype.ba=function(u){u=u.target;const f=this.O;f&&zr(u)==3?f.j():this.Y(u)},Er.prototype.Y=function(u){try{if(u==this.g)e:{const ke=zr(this.g),gt=this.g.ya(),Le=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||ag(this.g)))){this.K||ke!=4||gt==7||(gt==8||Le<=0?xo(3):xo(2)),sd(this);var f=this.g.ca();this.X=f;var g=ZN(this);if(this.o=f==200,QN(this.i,this.v,this.B,this.l,this.S,ke,f),this.o){if(this.U&&!this.L){t:{if(this.g){var C,B=this.g;if((C=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(C)){var $=C;break t}}$=null}if(u=$)ss(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,od(this,u);else{this.o=!1,this.m=3,Ut(12),yi(this),wo(this);break e}}if(this.R){u=!0;let kt;for(;!this.K&&this.C<g.length;)if(kt=e5(this,g),kt==rd){ke==4&&(this.m=4,Ut(14),u=!1),ss(this.i,this.l,null,"[Incomplete Response]");break}else if(kt==Fm){this.m=4,Ut(15),ss(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else ss(this.i,this.l,kt,null),od(this,kt);if(Um(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||g.length!=0||this.h.h||(this.m=1,Ut(16),u=!1),this.o=this.o&&u,!u)ss(this.i,this.l,g,"[Invalid Chunked Response]"),yi(this),wo(this);else if(g.length>0&&!this.W){this.W=!0;var ne=this.j;ne.g==this&&ne.aa&&!ne.P&&(ne.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),pd(ne),ne.P=!0,Ut(11))}}else ss(this.i,this.l,g,null),od(this,g);ke==4&&yi(this),this.o&&!this.K&&(ke==4?pg(this.j,this):(this.o=!1,pl(this)))}else p5(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ut(12)):(this.m=0,Ut(13)),yi(this),wo(this)}}}catch{}finally{}};function ZN(u){if(!Um(u))return u.g.la();const f=ag(u.g);if(f==="")return"";let g="";const C=f.length,B=zr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return yi(u),wo(u),"";u.h.i=new a.TextDecoder}for(let $=0;$<C;$++)u.h.h=!0,g+=u.h.i.decode(f[$],{stream:!(B&&$==C-1)});return f.length=0,u.h.g+=g,u.C=0,u.h.g}function Um(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function e5(u,f){var g=u.C,C=f.indexOf(`
`,g);return C==-1?rd:(g=Number(f.substring(g,C)),isNaN(g)?Fm:(C+=1,C+g>f.length?rd:(f=f.slice(C,C+g),u.C=C+g,f)))}Er.prototype.cancel=function(){this.K=!0,yi(this)};function pl(u){u.T=Date.now()+u.H,$m(u,u.H)}function $m(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=yo(d(u.aa,u),f)}function sd(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Er.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(YN(this.i,this.B),this.M!=2&&(xo(),Ut(17)),yi(this),this.m=2,wo(this)):$m(this,this.T-u)};function wo(u){u.j.I==0||u.K||pg(u.j,u)}function yi(u){sd(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,go(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function od(u,f){try{var g=u.j;if(g.I!=0&&(g.g==u||ad(g.h,u))){if(!u.L&&ad(g.h,u)&&g.I==3){try{var C=g.Ba.g.parse(f)}catch{C=null}if(Array.isArray(C)&&C.length==3){var B=C;if(B[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)bl(g),yl(g);else break e;fd(g),Ut(18)}}else g.xa=B[1],0<g.xa-g.K&&B[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=yo(d(g.Va,g),6e3));Hm(g.h)<=1&&g.ta&&(g.ta=void 0)}else bi(g,11)}else if((u.L||g.g==u)&&bl(g),!I(f))for(B=g.Ba.g.parse(f),f=0;f<B.length;f++){let Le=B[f];const kt=Le[0];if(!(kt<=g.K))if(g.K=kt,Le=Le[1],g.I==2)if(Le[0]=="c"){g.M=Le[1],g.ba=Le[2];const Fn=Le[3];Fn!=null&&(g.ka=Fn,g.j.info("VER="+g.ka));const wi=Le[4];wi!=null&&(g.za=wi,g.j.info("SVER="+g.za));const Ir=Le[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(C=1.5*Ir,g.O=C,g.j.info("backChannelRequestTimeoutMs_="+C)),C=g;const Ar=u.g;if(Ar){const kl=Ar.g?Ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var $=C.h;$.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(ld($,$.h),$.h=null))}if(C.G){const md=Ar.g?Ar.g.getResponseHeader("X-HTTP-Session-Id"):null;md&&(C.wa=md,Ue(C.J,C.G,md))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),C=g;var ne=u;if(C.na=xg(C,C.L?C.ba:null,C.W),ne.L){Gm(C.h,ne);var ke=ne,gt=C.O;gt&&(ke.H=gt),ke.D&&(sd(ke),pl(ke)),C.g=ne}else hg(C);g.i.length>0&&vl(g)}else Le[0]!="stop"&&Le[0]!="close"||bi(g,7);else g.I==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?bi(g,7):hd(g):Le[0]!="noop"&&g.l&&g.l.qa(Le),g.A=0)}}xo(4)}catch{}}var t5=class{constructor(u,f){this.g=u,this.map=f}};function Wm(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function qm(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Hm(u){return u.h?1:u.g?u.g.size:0}function ad(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function ld(u,f){u.g?u.g.add(f):u.h=f}function Gm(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Wm.prototype.cancel=function(){if(this.i=Km(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Km(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.G);return f}return v(u.i)}var Qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function n5(u,f){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const C=u[g].indexOf("=");let B,$=null;C>=0?(B=u[g].substring(0,C),$=u[g].substring(C+1)):B=u[g],f(B,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Tr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof Tr?(this.l=u.l,ko(this,u.j),this.o=u.o,this.g=u.g,_o(this,u.u),this.h=u.h,cd(this,tg(u.i)),this.m=u.m):u&&(f=String(u).match(Qm))?(this.l=!1,ko(this,f[1]||"",!0),this.o=No(f[2]||""),this.g=No(f[3]||"",!0),_o(this,f[4]),this.h=No(f[5]||"",!0),cd(this,f[6]||"",!0),this.m=No(f[7]||"")):(this.l=!1,this.i=new Co(null,this.l))}Tr.prototype.toString=function(){const u=[];var f=this.j;f&&u.push(jo(f,Ym,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(jo(f,Ym,!0),"@"),u.push(bo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(jo(g,g.charAt(0)=="/"?s5:i5,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",jo(g,a5)),u.join("")},Tr.prototype.resolve=function(u){const f=On(this);let g=!!u.j;g?ko(f,u.j):g=!!u.o,g?f.o=u.o:g=!!u.g,g?f.g=u.g:g=u.u!=null;var C=u.h;if(g)_o(f,u.u);else if(g=!!u.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var B=f.h.lastIndexOf("/");B!=-1&&(C=f.h.slice(0,B+1)+C)}if(B=C,B==".."||B==".")C="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){C=B.lastIndexOf("/",0)==0,B=B.split("/");const $=[];for(let ne=0;ne<B.length;){const ke=B[ne++];ke=="."?C&&ne==B.length&&$.push(""):ke==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),C&&ne==B.length&&$.push("")):($.push(ke),C=!0)}C=$.join("/")}else C=B}return g?f.h=C:g=u.i.toString()!=="",g?cd(f,tg(u.i)):g=!!u.m,g&&(f.m=u.m),f};function On(u){return new Tr(u)}function ko(u,f,g){u.j=g?No(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function _o(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function cd(u,f,g){f instanceof Co?(u.i=f,l5(u.i,u.l)):(g||(f=jo(f,o5)),u.i=new Co(f,u.l))}function Ue(u,f,g){u.i.set(f,g)}function ml(u){return Ue(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function No(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function jo(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,r5),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function r5(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ym=/[#\/\?@]/g,i5=/[#\?:]/g,s5=/[#\?]/g,o5=/[#\?@]/g,a5=/#/g;function Co(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function vi(u){u.g||(u.g=new Map,u.h=0,u.i&&n5(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Co.prototype,t.add=function(u,f){vi(this),this.i=null,u=os(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function Xm(u,f){vi(u),f=os(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function Jm(u,f){return vi(u),f=os(u,f),u.g.has(f)}t.forEach=function(u,f){vi(this),this.g.forEach(function(g,C){g.forEach(function(B){u.call(f,B,C,this)},this)},this)};function Zm(u,f){vi(u);let g=[];if(typeof f=="string")Jm(u,f)&&(g=g.concat(u.g.get(os(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)g=g.concat(u[f]);return g}t.set=function(u,f){return vi(this),this.i=null,u=os(this,u),Jm(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=Zm(this,u),u.length>0?String(u[0]):f):f};function eg(u,f,g){Xm(u,f),g.length>0&&(u.i=null,u.g.set(os(u,f),v(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(let C=0;C<f.length;C++){var g=f[C];const B=bo(g);g=Zm(this,g);for(let $=0;$<g.length;$++){let ne=B;g[$]!==""&&(ne+="="+bo(g[$])),u.push(ne)}}return this.i=u.join("&")};function tg(u){const f=new Co;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function os(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function l5(u,f){f&&!u.j&&(vi(u),u.i=null,u.g.forEach(function(g,C){const B=C.toLowerCase();C!=B&&(Xm(this,C),eg(this,B,g))},u)),u.j=f}function c5(u,f){const g=new vo;if(a.Image){const C=new Image;C.onload=h(Sr,g,"TestLoadImage: loaded",!0,f,C),C.onerror=h(Sr,g,"TestLoadImage: error",!1,f,C),C.onabort=h(Sr,g,"TestLoadImage: abort",!1,f,C),C.ontimeout=h(Sr,g,"TestLoadImage: timeout",!1,f,C),a.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else f(!1)}function u5(u,f){const g=new vo,C=new AbortController,B=setTimeout(()=>{C.abort(),Sr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:C.signal}).then($=>{clearTimeout(B),$.ok?Sr(g,"TestPingServer: ok",!0,f):Sr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(B),Sr(g,"TestPingServer: error",!1,f)})}function Sr(u,f,g,C,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),C(g)}catch{}}function d5(){this.g=new M}function ud(u){this.i=u.Sb||null,this.h=u.ab||!1}p(ud,Y),ud.prototype.g=function(){return new gl(this.i,this.h)};function gl(u,f){Oe.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(gl,Oe),t=gl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,To(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||a).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Eo(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,To(this)),this.g&&(this.readyState=3,To(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ng(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ng(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?Eo(this):To(this),this.readyState==3&&ng(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Eo(this))},t.Na=function(u){this.g&&(this.response=u,Eo(this))},t.ga=function(){this.g&&Eo(this)};function Eo(u){u.readyState=4,u.l=null,u.j=null,u.B=null,To(u)}t.setRequestHeader=function(u,f){this.A.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function To(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(gl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function rg(u){let f="";return oe(u,function(g,C){f+=C,f+=":",f+=g,f+=`\r
`}),f}function dd(u,f,g){e:{for(C in g){var C=!1;break e}C=!0}C||(g=rg(g),typeof u=="string"?g!=null&&bo(g):Ue(u,f,g))}function rt(u){Oe.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(rt,Oe);var h5=/^https?$/i,f5=["POST","PUT"];t=rt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,f,g,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Lm.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch($){ig(this,$);return}if(u=g||"",g=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var B in C)g.set(B,C[B]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const $ of C.keys())g.set($,C.get($));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),B=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(f5,f,void 0)>=0)||C||B||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,ne]of g)this.g.setRequestHeader($,ne);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){ig(this,$)}};function ig(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,sg(u),xl(u)}function sg(u){u.A||(u.A=!0,Ge(u,"complete"),Ge(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ge(this,"complete"),Ge(this,"abort"),xl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xl(this,!0)),rt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?og(this):this.Xa())},t.Xa=function(){og(this)};function og(u){if(u.h&&typeof s<"u"){if(u.v&&zr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ge(u,"readystatechange"),zr(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var C;if(C=$===0){let ne=String(u.D).match(Qm)[1]||null;!ne&&a.self&&a.self.location&&(ne=a.self.location.protocol.slice(0,-1)),C=!h5.test(ne?ne.toLowerCase():"")}g=C}if(g)Ge(u,"complete"),Ge(u,"success");else{u.o=6;try{var B=zr(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",sg(u)}}finally{xl(u)}}}}function xl(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,f||Ge(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zr(u){return u.g?u.g.readyState:0}t.ca=function(){try{return zr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),dl(f)}};function ag(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function p5(u){const f={};u=(u.g&&zr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(I(u[C]))continue;var g=JN(u[C]);const B=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=f[B]||[];f[B]=$,$.push(g)}te(f,function(C){return C.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function So(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function lg(u){this.za=0,this.i=[],this.j=new vo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=So("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=So("baseRetryDelayMs",5e3,u),this.Za=So("retryDelaySeedMs",1e4,u),this.Ta=So("forwardChannelMaxRetries",2,u),this.va=So("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Wm(u&&u.concurrentRequestLimit),this.Ba=new d5,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=lg.prototype,t.ka=8,t.I=1,t.connect=function(u,f,g,C){Ut(0),this.W=u,this.H=f||{},g&&C!==void 0&&(this.H.OSID=g,this.H.OAID=C),this.F=this.X,this.J=xg(this,null,this.W),vl(this)};function hd(u){if(cg(u),u.I==3){var f=u.V++,g=On(u.J);if(Ue(g,"SID",u.M),Ue(g,"RID",f),Ue(g,"TYPE","terminate"),zo(u,g),f=new Er(u,u.j,f),f.M=2,f.A=ml(On(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.A,g=!0),g||(f.g=yg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),pl(f)}gg(u)}function yl(u){u.g&&(pd(u),u.g.cancel(),u.g=null)}function cg(u){yl(u),u.v&&(a.clearTimeout(u.v),u.v=null),bl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function vl(u){if(!qm(u.h)&&!u.m){u.m=!0;var f=u.Ea;L||y(),O||(L(),O=!0),k.add(f,u),u.D=0}}function m5(u,f){return Hm(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=yo(d(u.Ea,u,f),mg(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new Er(this,this.j,u);let $=this.o;if(this.U&&($?($=fe($),K($,this.U)):$=this.U),this.u!==null||this.R||(B.J=$,$=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var C=this.i[g];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(f+=C,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=dg(this,B,f),g=On(this.J),Ue(g,"RID",u),Ue(g,"CVER",22),this.G&&Ue(g,"X-HTTP-Session-Id",this.G),zo(this,g),$&&(this.R?f="headers="+bo(rg($))+"&"+f:this.u&&dd(g,this.u,$)),ld(this.h,B),this.Ra&&Ue(g,"TYPE","init"),this.S?(Ue(g,"$req",f),Ue(g,"SID","null"),B.U=!0,id(B,g,null)):id(B,g,f),this.I=2}}else this.I==3&&(u?ug(this,u):this.i.length==0||qm(this.h)||ug(this))};function ug(u,f){var g;f?g=f.l:g=u.V++;const C=On(u.J);Ue(C,"SID",u.M),Ue(C,"RID",g),Ue(C,"AID",u.K),zo(u,C),u.u&&u.o&&dd(C,u.u,u.o),g=new Er(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),f&&(u.i=f.G.concat(u.i)),f=dg(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),ld(u.h,g),id(g,C,f)}function zo(u,f){u.H&&oe(u.H,function(g,C){Ue(f,C,g)}),u.l&&oe({},function(g,C){Ue(f,C,g)})}function dg(u,f,g){g=Math.min(u.i.length,g);const C=u.l?d(u.l.Ka,u.l,u):null;e:{var B=u.i;let ke=-1;for(;;){const gt=["count="+g];ke==-1?g>0?(ke=B[0].g,gt.push("ofs="+ke)):ke=0:gt.push("ofs="+ke);let Le=!0;for(let kt=0;kt<g;kt++){var $=B[kt].g;const Fn=B[kt].map;if($-=ke,$<0)ke=Math.max(0,B[kt].g-100),Le=!1;else try{$="req"+$+"_"||"";try{var ne=Fn instanceof Map?Fn:Object.entries(Fn);for(const[wi,Ir]of ne){let Ar=Ir;l(Ir)&&(Ar=rs(Ir)),gt.push($+wi+"="+encodeURIComponent(Ar))}}catch(wi){throw gt.push($+"type="+encodeURIComponent("_badmap")),wi}}catch{C&&C(Fn)}}if(Le){ne=gt.join("&");break e}}ne=void 0}return u=u.i.splice(0,g),f.G=u,ne}function hg(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;L||y(),O||(L(),O=!0),k.add(f,u),u.A=0}}function fd(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=yo(d(u.Da,u),mg(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,fg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=yo(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ut(10),yl(this),fg(this))};function pd(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function fg(u){u.g=new Er(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=On(u.na);Ue(f,"RID","rpc"),Ue(f,"SID",u.M),Ue(f,"AID",u.K),Ue(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ue(f,"TO",u.ia),Ue(f,"TYPE","xmlhttp"),zo(u,f),u.u&&u.o&&dd(f,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=ml(On(f)),g.u=null,g.R=!0,Bm(g,u)}t.Va=function(){this.C!=null&&(this.C=null,yl(this),fd(this),Ut(19))};function bl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function pg(u,f){var g=null;if(u.g==f){bl(u),pd(u),u.g=null;var C=2}else if(ad(u.h,f))g=f.G,Gm(u.h,f),C=1;else return;if(u.I!=0){if(f.o)if(C==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var B=u.D;C=is(),Ge(C,new Vm(C,g)),vl(u)}else hg(u);else if(B=f.m,B==3||B==0&&f.X>0||!(C==1&&m5(u,f)||C==2&&fd(u)))switch(g&&g.length>0&&(f=u.h,f.i=f.i.concat(g)),B){case 1:bi(u,5);break;case 4:bi(u,10);break;case 3:bi(u,6);break;default:bi(u,2)}}}function mg(u,f){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*f}function bi(u,f){if(u.j.info("Error code "+f),f==2){var g=d(u.bb,u),C=u.Ua;const B=!C;C=new Tr(C||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ko(C,"https"),ml(C),B?c5(C.toString(),g):u5(C.toString(),g)}else Ut(2);u.I=0,u.l&&u.l.pa(f),gg(u),cg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ut(2)):(this.j.info("Failed to ping google.com"),Ut(1))};function gg(u){if(u.I=0,u.ja=[],u.l){const f=Km(u.h);(f.length!=0||u.i.length!=0)&&(N(u.ja,f),N(u.ja,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.oa()}}function xg(u,f,g){var C=g instanceof Tr?On(g):new Tr(g);if(C.g!="")f&&(C.g=f+"."+C.g),_o(C,C.u);else{var B=a.location;C=B.protocol,f=f?f+"."+B.hostname:B.hostname,B=+B.port;const $=new Tr(null);C&&ko($,C),f&&($.g=f),B&&_o($,B),g&&($.h=g),C=$}return g=u.G,f=u.wa,g&&f&&Ue(C,g,f),Ue(C,"VER",u.ka),zo(u,C),C}function yg(u,f,g){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new rt(new ud({ab:g})):new rt(u.ma),f.Fa(u.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function vg(){}t=vg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function wl(){}wl.prototype.g=function(u,f){return new on(u,f)};function on(u,f){Oe.call(this),this.g=new lg(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!I(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!I(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new as(this)}p(on,Oe),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){hd(this.g)},on.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=rs(u),u=g);f.i.push(new t5(f.Ya++,u)),f.I==3&&vl(f)},on.prototype.N=function(){this.g.l=null,delete this.j,hd(this.g),delete this.g,on.Z.N.call(this)};function bg(u){Je.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}p(bg,Je);function wg(){Ee.call(this),this.status=1}p(wg,Ee);function as(u){this.g=u}p(as,vg),as.prototype.ra=function(){Ge(this.g,"a")},as.prototype.qa=function(u){Ge(this.g,new bg(u))},as.prototype.pa=function(u){Ge(this.g,new wg)},as.prototype.oa=function(){Ge(this.g,"b")},wl.prototype.createWebChannel=wl.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,c_=function(){return new wl},l_=function(){return is()},a_=Ke,$f={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},fl.NO_ERROR=0,fl.TIMEOUT=8,fl.HTTP_ERROR=6,fc=fl,Mm.COMPLETE="complete",o_=Mm,Q.EventType=re,re.OPEN="a",re.CLOSE="b",re.ERROR="c",re.MESSAGE="d",Oe.prototype.listen=Oe.prototype.J,Ko=Q,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,s_=rt}).apply(typeof Wl<"u"?Wl:typeof self<"u"?self:typeof window<"u"?window:{});const pv="@firebase/firestore",mv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lt.UNAUTHENTICATED=new Lt(null),Lt.GOOGLE_CREDENTIALS=new Lt("google-credentials-uid"),Lt.FIRST_PARTY=new Lt("first-party-uid"),Lt.MOCK_USER=new Lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let co="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ki=new W0("@firebase/firestore");function us(){return Ki.logLevel}function ae(t,...e){if(Ki.logLevel<=Se.DEBUG){const n=e.map(J0);Ki.debug(`Firestore (${co}): ${t}`,...n)}}function _r(t,...e){if(Ki.logLevel<=Se.ERROR){const n=e.map(J0);Ki.error(`Firestore (${co}): ${t}`,...n)}}function Ys(t,...e){if(Ki.logLevel<=Se.WARN){const n=e.map(J0);Ki.warn(`Firestore (${co}): ${t}`,...n)}}function J0(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,u_(t,r,n)}function u_(t,e,n){let r=`FIRESTORE (${co}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw _r(r),new Error(r)}function Pe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||u_(e,i,r)}function be(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends gi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V3{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lt.UNAUTHENTICATED))}shutdown(){}}class M3{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class L3{constructor(e){this.t=e,this.currentUser=Lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Pe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new hr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Pe(typeof r.accessToken=="string",31837,{l:r}),new d_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Pe(e===null||typeof e=="string",2055,{h:e}),new Lt(e)}}class O3{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Lt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class F3{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new O3(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class gv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class B3{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ZI(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Pe(this.o===void 0,3512);const r=s=>{s.error!=null&&ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,ae("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new gv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Pe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new gv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=U3(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function Ne(t,e){return t<e?-1:t>e?1:0}function Wf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return uh(i)===uh(s)?Ne(i,s):uh(i)?1:-1}return Ne(t.length,e.length)}const $3=55296,W3=57343;function uh(t){const e=t.charCodeAt(0);return e>=$3&&e<=W3}function Xs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="__name__";class qn{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return qn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=qn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Ne(e.length,n.length)}static compareSegments(e,n){const r=qn.isNumericId(e),i=qn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?qn.extractNumericId(e).compare(qn.extractNumericId(n)):Wf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class Fe extends qn{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const q3=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zt extends qn{construct(e,n,r){return new zt(e,n,r)}static isValidIdentifier(e){return q3.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===xv}static keyField(){return new zt([xv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new se(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new se(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(s(),i++)}if(s(),a)throw new se(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zt(n)}static emptyPath(){return new zt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(Fe.fromString(e))}static fromName(e){return new he(Fe.fromString(e).popFirst(5))}static empty(){return new he(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new Fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h_(t,e,n){if(!n)throw new se(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function H3(t,e,n,r){if(e===!0&&r===!0)throw new se(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yv(t){if(!he.isDocumentKey(t))throw new se(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vv(t){if(he.isDocumentKey(t))throw new se(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function f_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Bu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function ii(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Bu(t);throw new se(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t,e){const n={typeString:t};return e&&(n.value=e),n}function il(t,e){if(!f_(t))throw new se(q.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new se(q.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bv=-62135596800,wv=1e6;class We{static now(){return We.fromMillis(Date.now())}static fromDate(e){return We.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wv);return new We(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<bv)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wv}_compareTo(e){return this.seconds===e.seconds?Ne(this.nanoseconds,e.nanoseconds):Ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:We._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(il(e,We._jsonSchema))return new We(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-bv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:pt("string",We._jsonSchemaVersion),seconds:pt("number"),nanoseconds:pt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new We(0,0))}static max(){return new ve(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ba=-1;function G3(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ve.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new si(i,he.empty(),e)}function K3(t){return new si(t.readTime,t.key,Ba)}class si{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new si(ve.min(),he.empty(),Ba)}static max(){return new si(ve.max(),he.empty(),Ba)}}function Q3(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=he.comparator(t.documentKey,e.documentKey),n!==0?n:Ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X3{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==Y3)throw t;ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new G((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof G?n:G.resolve(n)}catch(n){return G.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):G.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):G.reject(n)}static resolve(e){return new G((n,r)=>{n(e)})}static reject(e){return new G((n,r)=>{r(e)})}static waitFor(e){return new G((n,r)=>{let i=0,s=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++s,a&&s===i&&n()},c=>r(c))}),a=!0,s===i&&n()})}static or(e){let n=G.resolve(!1);for(const r of e)n=n.next(i=>i?G.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new G((r,i)=>{const s=e.length,a=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===s&&r(a)},h=>i(h))}})}static doWhile(e,n){return new G((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function J3(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ho(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Uu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=-1;function $u(t){return t==null}function iu(t){return t===0&&1/t==-1/0}function Z3(t){return typeof t=="number"&&Number.isInteger(t)&&!iu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p_="";function eP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=kv(e)),e=tP(t.get(n),e);return kv(e)}function tP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case p_:n+="";break;default:n+=s}}return n}function kv(t){return t+p_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ji(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function m_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new nt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ql(this.root,e,this.comparator,!0)}}class ql{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??St.RED,this.left=i??St.EMPTY,this.right=s??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new St(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return St.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nv(this.data.getIterator())}getIteratorFrom(e){return new Nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class Nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this.fields=e,e.sort(zt.comparator)}static empty(){return new Rn([])}unionWith(e){let n=new wt(zt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Rn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new g_("Invalid base64 string: "+s):s}}(e);return new Rt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new Rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Rt.EMPTY_BYTE_STRING=new Rt("");const nP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function oi(t){if(Pe(!!t,39018),typeof t=="string"){let e=0;const n=nP.exec(t);if(Pe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ai(t){return typeof t=="string"?Rt.fromBase64String(t):Rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="server_timestamp",y_="__type__",v_="__previous_value__",b_="__local_write_time__";function tm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[y_])==null?void 0:r.stringValue)===x_}function Wu(t){const e=t.mapValue.fields[v_];return tm(e)?Wu(e):e}function Ua(t){const e=oi(t.mapValue.fields[b_].timestampValue);return new We(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,i,s,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const su="(default)";class $a{constructor(e,n){this.projectId=e,this.database=n||su}static empty(){return new $a("","")}get isDefaultDatabase(){return this.database===su}isEqual(e){return e instanceof $a&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_="__type__",iP="__max__",Hl={mapValue:{}},k_="__vector__",ou="value";function li(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tm(t)?4:oP(t)?9007199254740991:sP(t)?10:11:xe(28295,{value:t})}function rr(t,e){if(t===e)return!0;const n=li(t);if(n!==li(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ua(t).isEqual(Ua(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=oi(i.timestampValue),l=oi(s.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ai(i.bytesValue).isEqual(ai(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return lt(i.geoPointValue.latitude)===lt(s.geoPointValue.latitude)&&lt(i.geoPointValue.longitude)===lt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return lt(i.integerValue)===lt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=lt(i.doubleValue),l=lt(s.doubleValue);return a===l?iu(a)===iu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Xs(t.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},l=s.mapValue.fields||{};if(_v(a)!==_v(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!rr(a[c],l[c])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function Wa(t,e){return(t.values||[]).find(n=>rr(n,e))!==void 0}function Js(t,e){if(t===e)return 0;const n=li(t),r=li(e);if(n!==r)return Ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ne(t.booleanValue,e.booleanValue);case 2:return function(s,a){const l=lt(s.integerValue||s.doubleValue),c=lt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return jv(t.timestampValue,e.timestampValue);case 4:return jv(Ua(t),Ua(e));case 5:return Wf(t.stringValue,e.stringValue);case 6:return function(s,a){const l=ai(s),c=ai(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,a){const l=s.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=Ne(l[d],c[d]);if(h!==0)return h}return Ne(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,a){const l=Ne(lt(s.latitude),lt(a.latitude));return l!==0?l:Ne(lt(s.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cv(t.arrayValue,e.arrayValue);case 10:return function(s,a){var m,v,N,z;const l=s.fields||{},c=a.fields||{},d=(m=l[ou])==null?void 0:m.arrayValue,h=(v=c[ou])==null?void 0:v.arrayValue,p=Ne(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((z=h==null?void 0:h.values)==null?void 0:z.length)||0);return p!==0?p:Cv(d,h)}(t.mapValue,e.mapValue);case 11:return function(s,a){if(s===Hl.mapValue&&a===Hl.mapValue)return 0;if(s===Hl.mapValue)return 1;if(a===Hl.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=Wf(c[p],h[p]);if(m!==0)return m;const v=Js(l[c[p]],d[h[p]]);if(v!==0)return v}return Ne(c.length,h.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ne(t,e);const n=oi(t),r=oi(e),i=Ne(n.seconds,r.seconds);return i!==0?i:Ne(n.nanos,r.nanos)}function Cv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Js(n[i],r[i]);if(s)return s}return Ne(n.length,r.length)}function Zs(t){return qf(t)}function qf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=oi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ai(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return he.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=qf(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${qf(n.fields[a])}`;return i+"}"}(t.mapValue):xe(61005,{value:t})}function pc(t){switch(li(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Wu(t);return e?16+pc(e):16;case 5:return 2*t.stringValue.length;case 6:return ai(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+pc(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ji(r.fields,(s,a)=>{i+=s.length+pc(a)}),i}(t.mapValue);default:throw xe(13486,{value:t})}}function Ev(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hf(t){return!!t&&"integerValue"in t}function nm(t){return!!t&&"arrayValue"in t}function Tv(t){return!!t&&"nullValue"in t}function Sv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mc(t){return!!t&&"mapValue"in t}function sP(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[w_])==null?void 0:r.stringValue)===k_}function fa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ji(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fa(t.arrayValue.values[n]);return e}return{...t}}function oP(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===iP}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fa(n)}setAll(e){let n=zt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=fa(a):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());mc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];mc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ji(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new vn(fa(this.value))}}function __(t){const e=[];return Ji(t.fields,(n,r)=>{const i=new zt([n]);if(mc(r)){const s=__(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Rn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,r,i,s,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Ft(e,0,ve.min(),ve.min(),ve.min(),vn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ft(e,1,n,ve.min(),r,i,0)}static newNoDocument(e,n){return new Ft(e,2,n,ve.min(),ve.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,ve.min(),ve.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ve.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n){this.position=e,this.inclusive=n}}function zv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],a=t.position[i];if(s.field.isKeyField()?r=he.comparator(he.fromName(a.referenceValue),n.key):r=Js(a,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Iv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e,n="asc"){this.field=e,this.dir=n}}function aP(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{}class ft extends N_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cP(e,n,r):n==="array-contains"?new hP(e,r):n==="in"?new fP(e,r):n==="not-in"?new pP(e,r):n==="array-contains-any"?new mP(e,r):new ft(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new uP(e,r):new dP(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Js(n,this.value)):n!==null&&li(this.value)===li(n)&&this.matchesComparison(Js(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ln extends N_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ln(e,n)}matches(e){return j_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function j_(t){return t.op==="and"}function C_(t){return lP(t)&&j_(t)}function lP(t){for(const e of t.filters)if(e instanceof Ln)return!1;return!0}function Gf(t){if(t instanceof ft)return t.field.canonicalString()+t.op.toString()+Zs(t.value);if(C_(t))return t.filters.map(e=>Gf(e)).join(",");{const e=t.filters.map(n=>Gf(n)).join(",");return`${t.op}(${e})`}}function E_(t,e){return t instanceof ft?function(r,i){return i instanceof ft&&r.op===i.op&&r.field.isEqual(i.field)&&rr(r.value,i.value)}(t,e):t instanceof Ln?function(r,i){return i instanceof Ln&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,l)=>s&&E_(a,i.filters[l]),!0):!1}(t,e):void xe(19439)}function T_(t){return t instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Zs(n.value)}`}(t):t instanceof Ln?function(n){return n.op.toString()+" {"+n.getFilters().map(T_).join(" ,")+"}"}(t):"Filter"}class cP extends ft{constructor(e,n,r){super(e,n,r),this.key=he.fromName(r.referenceValue)}matches(e){const n=he.comparator(e.key,this.key);return this.matchesComparison(n)}}class uP extends ft{constructor(e,n){super(e,"in",n),this.keys=S_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class dP extends ft{constructor(e,n){super(e,"not-in",n),this.keys=S_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function S_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>he.fromName(r.referenceValue))}class hP extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nm(n)&&Wa(n.arrayValue,this.value)}}class fP extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Wa(this.value.arrayValue,n)}}class pP extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(Wa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Wa(this.value.arrayValue,n)}}class mP extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Wa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n=null,r=[],i=[],s=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=l,this.Te=null}}function Av(t,e=null,n=[],r=[],i=null,s=null,a=null){return new gP(t,e,n,r,i,s,a)}function rm(t){const e=be(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Gf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zs(r)).join(",")),e.Te=n}return e.Te}function im(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!aP(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!E_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Iv(t.startAt,e.startAt)&&Iv(t.endAt,e.endAt)}function Kf(t){return he.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n=null,r=[],i=[],s=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xP(t,e,n,r,i,s,a,l){return new fo(t,e,n,r,i,s,a,l)}function sm(t){return new fo(t)}function Pv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function z_(t){return t.collectionGroup!==null}function pa(t){const e=be(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new wt(zt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new qa(s,r))}),n.has(zt.keyField().canonicalString())||e.Ie.push(new qa(zt.keyField(),r))}return e.Ie}function Jn(t){const e=be(t);return e.Ee||(e.Ee=yP(e,pa(t))),e.Ee}function yP(t,e){if(t.limitType==="F")return Av(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new qa(i.field,s)});const n=t.endAt?new au(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new au(t.startAt.position,t.startAt.inclusive):null;return Av(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Qf(t,e){const n=t.filters.concat([e]);return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Yf(t,e,n){return new fo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qu(t,e){return im(Jn(t),Jn(e))&&t.limitType===e.limitType}function I_(t){return`${rm(Jn(t))}|lt:${t.limitType}`}function ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>T_(i)).join(", ")}]`),$u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Zs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Zs(i)).join(",")),`Target(${r})`}(Jn(t))}; limitType=${t.limitType})`}function Hu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):he.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of pa(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const d=zv(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,pa(r),i)||r.endAt&&!function(a,l,c){const d=zv(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,pa(r),i))}(t,e)}function vP(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function A_(t){return(e,n)=>{let r=!1;for(const i of pa(t)){const s=bP(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function bP(t,e,n){const r=t.field.isKeyField()?he.comparator(e.key,n.key):function(s,a,l){const c=a.data.field(s),d=l.data.field(s);return c!==null&&d!==null?Js(c,d):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ji(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return m_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wP=new nt(he.comparator);function Nr(){return wP}const P_=new nt(he.comparator);function Qo(...t){let e=P_;for(const n of t)e=e.insert(n.key,n);return e}function R_(t){let e=P_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ri(){return ma()}function D_(){return ma()}function ma(){return new Zi(t=>t.toString(),(t,e)=>t.isEqual(e))}const kP=new nt(he.comparator),_P=new wt(he.comparator);function je(...t){let e=_P;for(const n of t)e=e.add(n);return e}const NP=new wt(Ne);function jP(){return NP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iu(e)?"-0":e}}function V_(t){return{integerValue:""+t}}function CP(t,e){return Z3(e)?V_(e):om(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(){this._=void 0}}function EP(t,e,n){return t instanceof lu?function(i,s){const a={fields:{[y_]:{stringValue:x_},[b_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&tm(s)&&(s=Wu(s)),s&&(a.fields[v_]=s),{mapValue:a}}(n,e):t instanceof Ha?L_(t,e):t instanceof Ga?O_(t,e):function(i,s){const a=M_(i,s),l=Rv(a)+Rv(i.Ae);return Hf(a)&&Hf(i.Ae)?V_(l):om(i.serializer,l)}(t,e)}function TP(t,e,n){return t instanceof Ha?L_(t,e):t instanceof Ga?O_(t,e):n}function M_(t,e){return t instanceof cu?function(r){return Hf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class lu extends Gu{}class Ha extends Gu{constructor(e){super(),this.elements=e}}function L_(t,e){const n=F_(e);for(const r of t.elements)n.some(i=>rr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ga extends Gu{constructor(e){super(),this.elements=e}}function O_(t,e){let n=F_(e);for(const r of t.elements)n=n.filter(i=>!rr(i,r));return{arrayValue:{values:n}}}class cu extends Gu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Rv(t){return lt(t.integerValue||t.doubleValue)}function F_(t){return nm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function SP(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ha&&i instanceof Ha||r instanceof Ga&&i instanceof Ga?Xs(r.elements,i.elements,rr):r instanceof cu&&i instanceof cu?rr(r.Ae,i.Ae):r instanceof lu&&i instanceof lu}(t.transform,e.transform)}class zP{constructor(e,n){this.version=e,this.transformResults=n}}class Zn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ku{}function B_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new am(t.key,Zn.none()):new sl(t.key,t.data,Zn.none());{const n=t.data,r=vn.empty();let i=new wt(zt.comparator);for(let s of e.fields)if(!i.has(s)){let a=n.field(s);a===null&&s.length>1&&(s=s.popLast(),a=n.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new es(t.key,r,new Rn(i.toArray()),Zn.none())}}function IP(t,e,n){t instanceof sl?function(i,s,a){const l=i.value.clone(),c=Vv(i.fieldTransforms,s,a.transformResults);l.setAll(c),s.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof es?function(i,s,a){if(!gc(i.precondition,s))return void s.convertToUnknownDocument(a.version);const l=Vv(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(U_(i)),c.setAll(l),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ga(t,e,n,r){return t instanceof sl?function(s,a,l,c){if(!gc(s.precondition,a))return l;const d=s.value.clone(),h=Mv(s.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof es?function(s,a,l,c){if(!gc(s.precondition,a))return l;const d=Mv(s.fieldTransforms,c,a),h=a.data;return h.setAll(U_(s)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,a,l){return gc(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function AP(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=M_(r.transform,i||null);s!=null&&(n===null&&(n=vn.empty()),n.set(r.field,s))}return n||null}function Dv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xs(r,i,(s,a)=>SP(s,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends Ku{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class es extends Ku{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function U_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Vv(t,e,n){const r=new Map;Pe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],a=s.transform,l=e.data.field(s.field);r.set(s.field,TP(a,l,n[i]))}return r}function Mv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,a=n.data.field(i.field);r.set(i.field,EP(s,a,e))}return r}class am extends Ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PP extends Ku{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RP{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&IP(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ga(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ga(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=D_();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let l=this.applyToLocalView(a,s.mutatedFields);l=n.has(i.key)?null:l;const c=B_(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(ve.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Xs(this.mutations,e.mutations,(n,r)=>Dv(n,r))&&Xs(this.baseMutations,e.baseMutations,(n,r)=>Dv(n,r))}}class lm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Pe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return kP}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new lm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ut,Te;function MP(t){switch(t){case q.OK:return xe(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function $_(t){if(t===void 0)return _r("GRPC error has no .code"),q.UNKNOWN;switch(t){case ut.OK:return q.OK;case ut.CANCELLED:return q.CANCELLED;case ut.UNKNOWN:return q.UNKNOWN;case ut.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ut.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ut.INTERNAL:return q.INTERNAL;case ut.UNAVAILABLE:return q.UNAVAILABLE;case ut.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ut.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ut.NOT_FOUND:return q.NOT_FOUND;case ut.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ut.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ut.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ut.ABORTED:return q.ABORTED;case ut.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ut.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ut.DATA_LOSS:return q.DATA_LOSS;default:return xe(39323,{code:t})}}(Te=ut||(ut={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=new Jr([4294967295,4294967295],0);function Lv(t){const e=LP().encode(t),n=new i_;return n.update(e),new Uint8Array(n.digest())}function Ov(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Jr([n,r],0),new Jr([i,s],0)]}class cm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yo(`Invalid padding: ${n}`);if(r<0)throw new Yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Jr.fromNumber(r)));return i.compare(OP)===1&&(i=new Jr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Lv(e),[r,i]=Ov(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new cm(s,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Lv(e),[r,i]=Ov(n);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ol.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Qu(ve.min(),i,new nt(Ne),Nr(),je())}}class ol{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ol(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class W_{constructor(e,n){this.targetId=e,this.Ce=n}}class q_{constructor(e,n,r=Rt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Fv{constructor(){this.ve=0,this.Fe=Bv(),this.Me=Rt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=je(),n=je(),r=je();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:xe(38017,{changeType:s})}}),new ol(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Bv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Pe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class FP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.Je=Gl(),this.He=Gl(),this.Ye=new nt(Ne)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Kf(s))if(r===0){const a=new he(s.path);this.et(n,a,Ft.newNoDocument(a,ve.min()))}else Pe(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let a,l;try{a=ai(r).toUint8Array()}catch(c){if(c instanceof g_)return Ys("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new cm(a,i,s)}catch(c){return Ys(c instanceof Yo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,a)=>{const l=this.ot(a);if(l){if(s.current&&Kf(l.target)){const c=new he(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Ft.newNoDocument(c,e))}s.Be&&(n.set(a,s.ke()),s.qe())}});let r=je();this.He.forEach((s,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,a)=>a.setReadTime(e));const i=new Qu(e,n,this.Ye,this.je,r);return this.je=Nr(),this.Je=Gl(),this.He=Gl(),this.Ye=new nt(Ne),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Fv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new wt(Ne),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new wt(Ne),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ae("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Gl(){return new nt(he.comparator)}function Bv(){return new nt(he.comparator)}const BP={asc:"ASCENDING",desc:"DESCENDING"},UP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$P={and:"AND",or:"OR"};class WP{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Xf(t,e){return t.useProto3Json||$u(e)?e:{value:e}}function uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qP(t,e){return uu(t,e.toTimestamp())}function er(t){return Pe(!!t,49232),ve.fromTimestamp(function(n){const r=oi(n);return new We(r.seconds,r.nanos)}(t))}function um(t,e){return Jf(t,e).canonicalString()}function Jf(t,e){const n=function(i){return new Fe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function G_(t){const e=Fe.fromString(t);return Pe(J_(e),10190,{key:e.toString()}),e}function Zf(t,e){return um(t.databaseId,e.path)}function dh(t,e){const n=G_(e);if(n.get(1)!==t.databaseId.projectId)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new he(Q_(n))}function K_(t,e){return um(t.databaseId,e)}function HP(t){const e=G_(t);return e.length===4?Fe.emptyPath():Q_(e)}function ep(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Q_(t){return Pe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Uv(t,e,n){return{name:Zf(t,e),fields:n.value.mapValue.fields}}function GP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:xe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Pe(h===void 0||typeof h=="string",58123),Rt.fromBase64String(h||"")):(Pe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Rt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?q.UNKNOWN:$_(d.code);return new se(h,d.message||"")}(a);n=new q_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=dh(t,r.document.name),s=er(r.document.updateTime),a=r.document.createTime?er(r.document.createTime):ve.min(),l=new vn({mapValue:{fields:r.document.fields}}),c=Ft.newFoundDocument(i,s,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new xc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=dh(t,r.document),s=r.readTime?er(r.readTime):ve.min(),a=Ft.newNoDocument(i,s),l=r.removedTargetIds||[];n=new xc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=dh(t,r.document),s=r.removedTargetIds||[];n=new xc([],s,i,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new VP(i,s),l=r.targetId;n=new W_(l,a)}}return n}function KP(t,e){let n;if(e instanceof sl)n={update:Uv(t,e.key,e.value)};else if(e instanceof am)n={delete:Zf(t,e.key)};else if(e instanceof es)n={update:Uv(t,e.key,e.data),updateMask:rR(e.fieldMask)};else{if(!(e instanceof PP))return xe(16599,{Vt:e.type});n={verify:Zf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const l=a.transform;if(l instanceof lu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ha)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ga)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof cu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw xe(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:qP(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xe(27497)}(t,e.precondition)),n}function QP(t,e){return t&&t.length>0?(Pe(e!==void 0,14353),t.map(n=>function(i,s){let a=i.updateTime?er(i.updateTime):er(s);return a.isEqual(ve.min())&&(a=er(s)),new zP(a,i.transformResults||[])}(n,e))):[]}function YP(t,e){return{documents:[K_(t,e.path)]}}function XP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=K_(t,i);const s=function(d){if(d.length!==0)return X_(Ln.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:hs(m.field),direction:eR(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Xf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function JP(t){let e=HP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Pe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=Y_(p);return m instanceof Ln&&C_(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(N){return new qa(fs(N.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,$u(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,v=p.values||[];return new au(v,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,v=p.values||[];return new au(v,m)}(n.endAt)),xP(e,i,a,s,l,"F",c,d)}function ZP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Y_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fs(n.unaryFilter.field);return ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fs(n.unaryFilter.field);return ft.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fs(n.unaryFilter.field);return ft.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=fs(n.unaryFilter.field);return ft.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return ft.create(fs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Ln.create(n.compositeFilter.filters.map(r=>Y_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function eR(t){return BP[t]}function tR(t){return UP[t]}function nR(t){return $P[t]}function hs(t){return{fieldPath:t.canonicalString()}}function fs(t){return zt.fromServerFormat(t.fieldPath)}function X_(t){return t instanceof ft?function(n){if(n.op==="=="){if(Sv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NAN"}};if(Tv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NAN"}};if(Tv(n.value))return{unaryFilter:{field:hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:hs(n.field),op:tR(n.op),value:n.value}}}(t):t instanceof Ln?function(n){const r=n.getFilters().map(i=>X_(i));return r.length===1?r[0]:{compositeFilter:{op:nR(n.op),filters:r}}}(t):xe(54877,{filter:t})}function rR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function J_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,r,i,s=ve.min(),a=ve.min(),l=Rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.yt=e}}function sR(t){const e=JP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Yf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(){this.Cn=new aR}addToCollectionParentIndex(e,n){return this.Cn.add(n),G.resolve()}getCollectionParents(e,n){return G.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return G.resolve()}deleteFieldIndex(e,n){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,n){return G.resolve()}getDocumentsMatchingTarget(e,n){return G.resolve(null)}getIndexType(e,n){return G.resolve(0)}getFieldIndexes(e,n){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,n){return G.resolve(si.min())}getMinOffsetFromCollectionGroup(e,n){return G.resolve(si.min())}updateCollectionGroup(e,n,r){return G.resolve()}updateIndexEntries(e,n){return G.resolve()}}class aR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new wt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new wt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Z_=41943040;class Xt{static withCacheSize(e){return new Xt(e,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xt.DEFAULT_COLLECTION_PERCENTILE=10,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xt.DEFAULT=new Xt(Z_,Xt.DEFAULT_COLLECTION_PERCENTILE,Xt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xt.DISABLED=new Xt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new eo(0)}static cr(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="LruGarbageCollector",lR=1048576;function qv([t,e],[n,r]){const i=Ne(t,n);return i===0?Ne(e,r):i}class cR{constructor(e){this.Ir=e,this.buffer=new wt(qv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();qv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uR{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ae(Wv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ho(n)?ae(Wv,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)})}}class dR{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return G.resolve(Uu.ce);const r=new cR(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ae("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve($v)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$v):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),us()<=Se.DEBUG&&ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function hR(t,e){return new dR(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.changes=new Zi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?G.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ga(r.mutation,i,Rn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=Ri();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let a=Qo();return s.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ri();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let s=Nr();const a=ma(),l=function(){return ma()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof es)?s=s.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),ga(h.mutation,d,h.mutation.getFieldMask(),We.now())):a.set(d.key,Rn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new pR(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ma();let i=new nt((a,l)=>a-l),s=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||Rn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const p=(i.get(l.batchId)||je()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=D_();h.forEach(m=>{if(!s.has(m)){const v=B_(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,p))}return G.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return he.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):z_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):G.resolve(Ri());let l=Ba,c=s;return a.next(d=>G.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(h)?G.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,je())).next(h=>({batchId:l,changes:R_(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new he(n)).next(r=>{let i=Qo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let a=Qo();return this.indexManager.getCollectionParents(e,s).next(l=>G.forEach(l,c=>{const d=function(p,m){return new fo(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(a=>{s.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Ft.newInvalidDocument(h)))});let l=Qo();return a.forEach((c,d)=>{const h=s.get(c);h!==void 0&&ga(h.mutation,d,Rn.empty(),We.now()),Hu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return G.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:er(i.createTime)}}(n)),G.resolve()}getNamedQuery(e,n){return G.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:sR(i.bundledQuery),readTime:er(i.readTime)}}(n)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this.overlays=new nt(he.comparator),this.qr=new Map}getOverlay(e,n){return G.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ri();return G.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),G.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),G.resolve()}getOverlaysForCollection(e,n,r){const i=Ri(),s=n.length+1,a=new he(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return G.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new nt((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Ri(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ri(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return G.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new DP(n,r));let s=this.qr.get(n);s===void 0&&(s=je(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.sessionToken=Rt.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.Qr=new wt(Nt.$r),this.Ur=new wt(Nt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Nt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Nt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new he(new Fe([])),r=new Nt(n,e),i=new Nt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),s.push(a.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new he(new Fe([])),r=new Nt(n,e),i=new Nt(n,e+1);let s=je();return this.Ur.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const n=new Nt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Nt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return he.comparator(e.key,n.key)||Ne(e.Yr,n.Yr)}static Kr(e,n){return Ne(e.Yr,n.Yr)||he.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new wt(Nt.$r)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new RP(s,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new Nt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return G.resolve(a)}lookupMutationBatch(e,n){return G.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return G.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?em:this.tr-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Nt(n,0),i=new Nt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],a=>{const l=this.Xr(a.Yr);s.push(l)}),G.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new wt(Ne);return n.forEach(i=>{const s=new Nt(i,0),a=new Nt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],l=>{r=r.add(l.Yr)})}),G.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;he.isDocumentKey(s)||(s=s.child(""));const a=new Nt(new he(s),0);let l=new wt(Ne);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},a),G.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Pe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return G.forEach(n.mutations,i=>{const s=new Nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Nt(n,0),i=this.Zr.firstAfterOrEqual(r);return G.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.ri=e,this.docs=function(){return new nt(he.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return G.resolve(r?r.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let r=Nr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ft.newInvalidDocument(i))}),G.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Nr();const a=n.path,l=new he(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||Q3(K3(h),r)<=0||(i.has(h.key)||Hu(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return G.resolve(s)}getAllFromCollectionGroup(e,n,r,i){xe(9500)}ii(e,n){return G.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wR(this)}getSize(e){return G.resolve(this.size)}}class wR extends fR{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),G.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.persistence=e,this.si=new Zi(n=>rm(n),im),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new dm,this.targetCount=0,this.ai=eo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),G.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new eo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,G.resolve()}updateTargetData(e,n){return this.Pr(n),G.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),G.waitFor(s).next(()=>i)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return G.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),G.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),G.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),G.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return G.resolve(r)}containsKey(e,n){return G.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eN{constructor(e,n){this.ui={},this.overlays={},this.ci=new Uu(0),this.li=!1,this.li=!0,this.hi=new yR,this.referenceDelegate=e(this),this.Pi=new kR(this),this.indexManager=new oR,this.remoteDocumentCache=function(i){return new bR(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new iR(n),this.Ii=new gR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new vR(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ae("MemoryPersistence","Starting transaction:",e);const i=new _R(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return G.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class _R extends X3{constructor(e){super(),this.currentSequenceNumber=e}}class hm{constructor(e){this.persistence=e,this.Ri=new dm,this.Vi=null}static mi(e){return new hm(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),G.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),G.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.fi,r=>{const i=he.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,ve.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return G.or([()=>G.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class du{constructor(e,n){this.persistence=e,this.pi=new Zi(r=>eP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=hR(this,n)}static mi(e,n){return new du(e,n)}Ei(){}di(e){return G.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return G.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?G.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,s.removeEntry(a,ve.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),G.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=pc(e.data.value)),n}br(e,n,r){return G.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return G.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=je(),i=je();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new fm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return Qz()?8:J3(Hz())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new NR;return this.Ss(e,n,a).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(us()<=Se.DEBUG&&ae("QueryEngine","SDK will not create cache indexes for query:",ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),G.resolve()):(us()<=Se.DEBUG&&ae("QueryEngine","Query:",ds(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(us()<=Se.DEBUG&&ae("QueryEngine","The SDK decides to create cache indexes for query:",ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(n))):G.resolve())}ys(e,n){if(Pv(n))return G.resolve(null);let r=Jn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Yf(n,null,"F"),r=Jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=je(...s);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,Yf(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,i){return Pv(n)||i.isEqual(ve.min())?G.resolve(null):this.ps.getDocuments(e,r).next(s=>{const a=this.Ds(n,s);return this.Cs(n,a,r,i)?G.resolve(null):(us()<=Se.DEBUG&&ae("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ds(n)),this.vs(e,a,n,G3(i,Ba)).next(l=>l))})}Ds(e,n){let r=new wt(A_(e));return n.forEach((i,s)=>{Hu(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return us()<=Se.DEBUG&&ae("QueryEngine","Using full collection scan to execute query:",ds(n)),this.ps.getDocumentsMatchingQuery(e,n,si.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm="LocalStore",CR=3e8;class ER{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new nt(Ne),this.xs=new Zi(s=>rm(s),im),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mR(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function TR(t,e,n,r){return new ER(t,e,n,r)}async function tN(t,e){const n=be(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],l=[];let c=je();for(const d of i){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of s){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function SR(t,e){const n=be(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const p=d.batch,m=p.keys();let v=G.resolve();return m.forEach(N=>{v=v.next(()=>h.getEntry(c,N)).next(z=>{const R=d.docVersions.get(N);Pe(R!==null,48541),z.version.compareTo(R)<0&&(p.applyToRemoteDocument(z,d),z.isValidDocument()&&(z.setReadTime(d.commitVersion),h.addEntry(z)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=je();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function nN(t){const e=be(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function zR(t,e){const n=be(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Rt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(z,R,w){return z.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=CR?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,v,h)&&l.push(n.Pi.updateTargetData(s,v))});let c=Nr(),d=je();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(IR(s,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(ve.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return G.waitFor(l).next(()=>a.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Ms=i,s))}function IR(t,e,n){let r=je(),i=je();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let a=Nr();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(ve.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):ae(pm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:i}})}function AR(t,e){const n=be(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=em),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PR(t,e){const n=be(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,G.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new Br(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function tp(t,e,n){const r=be(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!ho(a))throw a;ae(pm,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Hv(t,e,n){const r=be(t);let i=ve.min(),s=je();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const p=be(c),m=p.xs.get(h);return m!==void 0?G.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)}(r,a,Jn(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:ve.min(),n?s:je())).next(l=>(RR(r,vP(e),l),{documents:l,Qs:s})))}function RR(t,e,n){let r=t.Os.get(e)||ve.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class Gv{constructor(){this.activeTargetIds=jP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DR{constructor(){this.Mo=new Gv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Gv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="ConnectivityMonitor";class Qv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ae(Kv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ae(Kv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl=null;function np(){return Kl===null?Kl=function(){return 268435456+Math.round(2147483648*Math.random())}():Kl++,"0x"+Kl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="RestConnection",MR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class LR{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===su?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const a=np(),l=this.zo(e,n.toUriEncodedString());ae(hh,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:d}=new URL(l),h=$0(d);return this.Jo(e,l,c,r,h).then(p=>(ae(hh,`Received RPC '${e}' ${a}: `,p),p),p=>{throw Ys(hh,`RPC '${e}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,s,a){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+co}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=MR[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class FR extends LR{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const a=np();return new Promise((l,c)=>{const d=new s_;d.setWithCredentials(!0),d.listenOnce(o_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fc.NO_ERROR:const p=d.getResponseJson();ae(Mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),l(p);break;case fc.TIMEOUT:ae(Mt,`RPC '${e}' ${a} timed out`),c(new se(q.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const m=d.getStatus();if(ae(Mt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const N=v==null?void 0:v.error;if(N&&N.status&&N.message){const z=function(w){const x=w.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(x)>=0?x:q.UNKNOWN}(N.status);c(new se(z,N.message))}else c(new se(q.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new se(q.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{ae(Mt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);ae(Mt,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=np(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=c_(),l=l_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=s.join("");ae(Mt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=a.createWebChannel(h,c);this.I_(p);let m=!1,v=!1;const N=new OR({Yo:R=>{v?ae(Mt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(ae(Mt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),ae(Mt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},Zo:()=>p.close()}),z=(R,w,x)=>{R.listen(w,b=>{try{x(b)}catch(D){setTimeout(()=>{throw D},0)}})};return z(p,Ko.EventType.OPEN,()=>{v||(ae(Mt,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),z(p,Ko.EventType.CLOSE,()=>{v||(v=!0,ae(Mt,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(p))}),z(p,Ko.EventType.ERROR,R=>{v||(v=!0,Ys(Mt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),N.a_(new se(q.UNAVAILABLE,"The operation could not be completed")))}),z(p,Ko.EventType.MESSAGE,R=>{var w;if(!v){const x=R.data[0];Pe(!!x,16349);const b=x,D=(b==null?void 0:b.error)||((w=b[0])==null?void 0:w.error);if(D){ae(Mt,`RPC '${e}' stream ${i} received error:`,D);const L=D.status;let O=function(_){const j=ut[_];if(j!==void 0)return $_(j)}(L),k=D.message;O===void 0&&(O=q.INTERNAL,k="Unknown error status: "+L+" with message "+D.message),v=!0,N.a_(new se(O,k)),p.close()}else ae(Mt,`RPC '${e}' stream ${i} received:`,x),N.u_(x)}}),z(l,a_.STAT_EVENT,R=>{R.stat===$f.PROXY?ae(Mt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===$f.NOPROXY&&ae(Mt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function fh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){return new WP(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&ae("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="PersistentStream";class iN{constructor(e,n,r,i,s,a,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new rN(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(_r(n.toString()),_r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new se(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ae(Yv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ae(Yv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BR extends iN{constructor(e,n,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=GP(this.serializer,e),r=function(s){if(!("targetChange"in s))return ve.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?ve.min():a.readTime?er(a.readTime):ve.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=ep(this.serializer),n.addTarget=function(s,a){let l;const c=a.target;if(l=Kf(c)?{documents:YP(s,c)}:{query:XP(s,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=H_(s,a.resumeToken);const d=Xf(s,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(ve.min())>0){l.readTime=uu(s,a.snapshotVersion.toTimestamp());const d=Xf(s,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=ZP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=ep(this.serializer),n.removeTarget=e,this.q_(n)}}class UR extends iN{constructor(e,n,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Pe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Pe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Pe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=QP(e.writeResults,e.commitTime),r=er(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=ep(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{}class WR extends $R{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Go(e,Jf(n,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new se(q.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Jf(n,r),i,a,l,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(q.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(_r(n),this.aa=!1):ae("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qi="RemoteStore";class HR{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ts(this)&&(ae(Qi,"Restarting streams for network reachability change."),await async function(c){const d=be(c);d.Ea.add(4),await al(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Xu(d)}(this))})}),this.Ra=new qR(r,i)}}async function Xu(t){if(ts(t))for(const e of t.da)await e(!0)}async function al(t){for(const e of t.da)await e(!1)}function sN(t,e){const n=be(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ym(n)?xm(n):po(n).O_()&&gm(n,e))}function mm(t,e){const n=be(t),r=po(n);n.Ia.delete(e),r.O_()&&oN(n,e),n.Ia.size===0&&(r.O_()?r.L_():ts(n)&&n.Ra.set("Unknown"))}function gm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ve.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(t).Y_(e)}function oN(t,e){t.Va.Ue(e),po(t).Z_(e)}function xm(t){t.Va=new FP({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),po(t).start(),t.Ra.ua()}function ym(t){return ts(t)&&!po(t).x_()&&t.Ia.size>0}function ts(t){return be(t).Ea.size===0}function aN(t){t.Va=void 0}async function GR(t){t.Ra.set("Online")}async function KR(t){t.Ia.forEach((e,n)=>{gm(t,e)})}async function QR(t,e){aN(t),ym(t)?(t.Ra.ha(e),xm(t)):t.Ra.set("Unknown")}async function YR(t,e,n){if(t.Ra.set("Online"),e instanceof q_&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){ae(Qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hu(t,r)}else if(e instanceof xc?t.Va.Ze(e):e instanceof W_?t.Va.st(e):t.Va.tt(e),!n.isEqual(ve.min()))try{const r=await nN(t.localStore);n.compareTo(r)>=0&&await function(s,a){const l=s.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Rt.EMPTY_BYTE_STRING,h.snapshotVersion)),oN(s,c);const p=new Br(h.target,c,d,h.sequenceNumber);gm(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ae(Qi,"Failed to raise snapshot:",r),await hu(t,r)}}async function hu(t,e,n){if(!ho(e))throw e;t.Ea.add(1),await al(t),t.Ra.set("Offline"),n||(n=()=>nN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ae(Qi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Xu(t)})}function lN(t,e){return e().catch(n=>hu(t,n,e))}async function Ju(t){const e=be(t),n=ci(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:em;for(;XR(e);)try{const i=await AR(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,JR(e,i)}catch(i){await hu(e,i)}cN(e)&&uN(e)}function XR(t){return ts(t)&&t.Ta.length<10}function JR(t,e){t.Ta.push(e);const n=ci(t);n.O_()&&n.X_&&n.ea(e.mutations)}function cN(t){return ts(t)&&!ci(t).x_()&&t.Ta.length>0}function uN(t){ci(t).start()}async function ZR(t){ci(t).ra()}async function e6(t){const e=ci(t);for(const n of t.Ta)e.ea(n.mutations)}async function t6(t,e,n){const r=t.Ta.shift(),i=lm.from(r,e,n);await lN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ju(t)}async function n6(t,e){e&&ci(t).X_&&await async function(r,i){if(function(a){return MP(a)&&a!==q.ABORTED}(i.code)){const s=r.Ta.shift();ci(r).B_(),await lN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ju(r)}}(t,e),cN(t)&&uN(t)}async function Xv(t,e){const n=be(t);n.asyncQueue.verifyOperationInProgress(),ae(Qi,"RemoteStore received new credentials");const r=ts(n);n.Ea.add(3),await al(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Xu(n)}async function r6(t,e){const n=be(t);e?(n.Ea.delete(2),await Xu(n)):e||(n.Ea.add(2),await al(n),n.Ra.set("Unknown"))}function po(t){return t.ma||(t.ma=function(n,r,i){const s=be(n);return s.sa(),new BR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:GR.bind(null,t),t_:KR.bind(null,t),r_:QR.bind(null,t),H_:YR.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ym(t)?xm(t):t.Ra.set("Unknown")):(await t.ma.stop(),aN(t))})),t.ma}function ci(t){return t.fa||(t.fa=function(n,r,i){const s=be(n);return s.sa(),new UR(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ZR.bind(null,t),r_:n6.bind(null,t),ta:e6.bind(null,t),na:t6.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ju(t)):(await t.fa.stop(),t.Ta.length>0&&(ae(Qi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const a=Date.now()+r,l=new vm(e,n,a,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bm(t,e){if(_r("AsyncQueue",`${e}: ${t}`),ho(t))return new se(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{static emptySet(e){return new Os(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||he.comparator(n.key,r.key):(n,r)=>he.comparator(n.key,r.key),this.keyedMap=Qo(),this.sortedSet=new nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Os)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Os;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jv{constructor(){this.ga=new nt(he.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class to{constructor(e,n,r,i,s,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new to(e,n,Os.emptySet(n),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class s6{constructor(){this.queries=Zv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=be(n),s=i.queries;i.queries=Zv(),s.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new se(q.ABORTED,"Firestore shutting down"))}}function Zv(){return new Zi(t=>I_(t),qu)}async function dN(t,e){const n=be(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new i6,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=bm(a,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&wm(n)}async function hN(t,e){const n=be(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function o6(t,e){const n=be(t);let r=!1;for(const i of e){const s=i.query,a=n.queries.get(s);if(a){for(const l of a.Sa)l.Fa(i)&&(r=!0);a.wa=i}}r&&wm(n)}function a6(t,e,n){const r=be(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function wm(t){t.Ca.forEach(e=>{e.next()})}var rp,e1;(e1=rp||(rp={})).Ma="default",e1.Cache="cache";class fN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new to(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e){this.key=e}}class mN{constructor(e){this.key=e}}class l6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=je(),this.mutatedKeys=je(),this.eu=A_(e),this.tu=new Os(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Jv,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),v=Hu(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),z=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let R=!1;m&&v?m.data.isEqual(v.data)?N!==z&&(r.track({type:3,doc:v}),R=!0):this.su(m,v)||(r.track({type:2,doc:v}),R=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(c||d)&&(l=!0)),R&&(v?(a=a.add(v),s=z?s.add(h):s.delete(h)):(a=a.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,p)=>function(v,N){const z=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:R})}};return z(v)-z(N)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new to(this.query,e.tu,s,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=je(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new mN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new pN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return to.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const km="SyncEngine";class c6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class u6{constructor(e){this.key=e,this.hu=!1}}class d6{constructor(e,n,r,i,s,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Zi(l=>I_(l),qu),this.Iu=new Map,this.Eu=new Set,this.du=new nt(he.comparator),this.Au=new Map,this.Ru=new dm,this.Vu={},this.mu=new Map,this.fu=eo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function h6(t,e,n=!0){const r=wN(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await gN(r,e,n,!0),i}async function f6(t,e){const n=wN(t);await gN(n,e,!0,!1)}async function gN(t,e,n,r){const i=await PR(t.localStore,Jn(e)),s=i.targetId,a=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await p6(t,e,s,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&sN(t.remoteStore,i),l}async function p6(t,e,n,r,i){t.pu=(p,m,v)=>async function(z,R,w,x){let b=R.view.ru(w);b.Cs&&(b=await Hv(z.localStore,R.query,!1).then(({documents:k})=>R.view.ru(k,b)));const D=x&&x.targetChanges.get(R.targetId),L=x&&x.targetMismatches.get(R.targetId)!=null,O=R.view.applyChanges(b,z.isPrimaryClient,D,L);return n1(z,R.targetId,O.au),O.snapshot}(t,p,m,v);const s=await Hv(t.localStore,e,!0),a=new l6(e,s.Qs),l=a.ru(s.documents),c=ol.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,c);n1(t,n,d.au);const h=new c6(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function m6(t,e,n){const r=be(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(a=>!qu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await tp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&mm(r.remoteStore,i.targetId),ip(r,i.targetId)}).catch(uo)):(ip(r,i.targetId),await tp(r.localStore,i.targetId,!0))}async function g6(t,e){const n=be(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mm(n.remoteStore,r.targetId))}async function x6(t,e,n){const r=N6(t);try{const i=await function(a,l){const c=be(a),d=We.now(),h=l.reduce((v,N)=>v.add(N.key),je());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let N=Nr(),z=je();return c.Ns.getEntries(v,h).next(R=>{N=R,N.forEach((w,x)=>{x.isValidDocument()||(z=z.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,N)).next(R=>{p=R;const w=[];for(const x of l){const b=AP(x,p.get(x.key).overlayedDocument);b!=null&&w.push(new es(x.key,b,__(b.value.mapValue),Zn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,w,l)}).next(R=>{m=R;const w=R.applyToLocalDocumentSet(p,z);return c.documentOverlayCache.saveOverlays(v,R.batchId,w)})}).then(()=>({batchId:m.batchId,changes:R_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new nt(Ne)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,i.batchId,n),await ll(r,i.changes),await Ju(r.remoteStore)}catch(i){const s=bm(i,"Failed to persist write");n.reject(s)}}async function xN(t,e){const n=be(t);try{const r=await zR(n.localStore,e);e.targetChanges.forEach((i,s)=>{const a=n.Au.get(s);a&&(Pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?Pe(a.hu,14607):i.removedDocuments.size>0&&(Pe(a.hu,42227),a.hu=!1))}),await ll(n,r,e)}catch(r){await uo(r)}}function t1(t,e,n){const r=be(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=be(a);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(d=!0)}),d&&wm(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function y6(t,e,n){const r=be(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new nt(he.comparator);a=a.insert(s,Ft.newNoDocument(s,ve.min()));const l=je().add(s),c=new Qu(ve.min(),new Map,new nt(Ne),a,l);await xN(r,c),r.du=r.du.remove(s),r.Au.delete(e),_m(r)}else await tp(r.localStore,e,!1).then(()=>ip(r,e,n)).catch(uo)}async function v6(t,e){const n=be(t),r=e.batch.batchId;try{const i=await SR(n.localStore,e);vN(n,r,null),yN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ll(n,i)}catch(i){await uo(i)}}async function b6(t,e,n){const r=be(t);try{const i=await function(a,l){const c=be(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(Pe(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);vN(r,e,n),yN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ll(r,i)}catch(i){await uo(i)}}function yN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function vN(t,e,n){const r=be(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||bN(t,r)})}function bN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(mm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),_m(t))}function n1(t,e,n){for(const r of n)r instanceof pN?(t.Ru.addReference(r.key,e),w6(t,r)):r instanceof mN?(ae(km,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||bN(t,r.key)):xe(19791,{wu:r})}function w6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ae(km,"New document in limbo: "+n),t.Eu.add(r),_m(t))}function _m(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new he(Fe.fromString(e)),r=t.fu.next();t.Au.set(r,new u6(n)),t.du=t.du.insert(n,r),sN(t.remoteStore,new Br(Jn(sm(n.path)),r,"TargetPurposeLimboResolution",Uu.ce))}}async function ll(t,e,n){const r=be(t),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=fm.As(c.targetId,d);s.push(p)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(c,d){const h=be(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>G.forEach(d,m=>G.forEach(m.Es,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>G.forEach(m.ds,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!ho(p))throw p;ae(pm,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const v=h.Ms.get(m),N=v.snapshotVersion,z=v.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(m,z)}}}(r.localStore,s))}async function k6(t,e){const n=be(t);if(!n.currentUser.isEqual(e)){ae(km,"User change. New user:",e.toKey());const r=await tN(n.localStore,e);n.currentUser=e,function(s,a){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new se(q.CANCELLED,a))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ll(n,r.Ls)}}function _6(t,e){const n=be(t),r=n.Au.get(e);if(r&&r.hu)return je().add(r.key);{let i=je();const s=n.Iu.get(e);if(!s)return i;for(const a of s){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function wN(t){const e=be(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y6.bind(null,e),e.Pu.H_=o6.bind(null,e.eventManager),e.Pu.yu=a6.bind(null,e.eventManager),e}function N6(t){const e=be(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=v6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=b6.bind(null,e),e}class fu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return TR(this.persistence,new jR,e.initialUser,this.serializer)}Cu(e){return new eN(hm.mi,this.serializer)}Du(e){return new DR}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fu.provider={build:()=>new fu};class j6 extends fu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Pe(this.persistence.referenceDelegate instanceof du,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uR(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Xt.withCacheSize(this.cacheSizeBytes):Xt.DEFAULT;return new eN(r=>du.mi(r,n),this.serializer)}}class sp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>t1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=k6.bind(null,this.syncEngine),await r6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new s6}()}createDatastore(e){const n=Yu(e.databaseInfo.databaseId),r=function(s){return new FR(s)}(e.databaseInfo);return function(s,a,l,c){return new WR(s,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,a,l){return new HR(r,i,s,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>t1(this.syncEngine,n,0),function(){return Qv.v()?new Qv:new VR}())}createSyncEngine(e,n){return function(i,s,a,l,c,d,h){const p=new d6(i,s,a,l,c,d);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=be(i);ae(Qi,"RemoteStore shutting down."),s.Ea.add(5),await al(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}sp.provider={build:()=>new sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="FirestoreClient";class C6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Lt.UNAUTHENTICATED,this.clientId=Z0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{ae(ui,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(ae(ui,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=bm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ph(t,e){t.asyncQueue.verifyOperationInProgress(),ae(ui,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await tN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function r1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await E6(t);ae(ui,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xv(e.remoteStore,i)),t._onlineComponents=e}async function E6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ae(ui,"Using user provided OfflineComponentProvider");try{await ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ys("Error using user provided cache. Falling back to memory cache: "+n),await ph(t,new fu)}}else ae(ui,"Using default OfflineComponentProvider"),await ph(t,new j6(void 0));return t._offlineComponents}async function _N(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ae(ui,"Using user provided OnlineComponentProvider"),await r1(t,t._uninitializedComponentsProvider._online)):(ae(ui,"Using default OnlineComponentProvider"),await r1(t,new sp))),t._onlineComponents}function T6(t){return _N(t).then(e=>e.syncEngine)}async function NN(t){const e=await _N(t),n=e.eventManager;return n.onListen=h6.bind(null,e.syncEngine),n.onUnlisten=m6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=f6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=g6.bind(null,e.syncEngine),n}function S6(t,e,n={}){const r=new hr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const h=new kN({next:m=>{h.Nu(),a.enqueueAndForget(()=>hN(s,p));const v=m.docs.has(l);!v&&m.fromCache?d.reject(new se(q.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?d.reject(new se(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new fN(sm(l.path),h,{includeMetadataChanges:!0,qa:!0});return dN(s,p)}(await NN(t),t.asyncQueue,e,n,r)),r.promise}function z6(t,e,n={}){const r=new hr;return t.asyncQueue.enqueueAndForget(async()=>function(s,a,l,c,d){const h=new kN({next:m=>{h.Nu(),a.enqueueAndForget(()=>hN(s,p)),m.fromCache&&c.source==="server"?d.reject(new se(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new fN(l,h,{includeMetadataChanges:!0,qa:!0});return dN(s,p)}(await NN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="firestore.googleapis.com",s1=!0;class o1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new se(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=CN,this.ssl=s1}else this.host=e.host,this.ssl=e.ssl??s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Z_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lR)throw new se(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new se(q.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new V3;switch(r.type){case"firstParty":return new F3(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=i1.get(n);r&&(ae("ComponentProvider","Removing Datastore"),i1.delete(n),r.terminate())}(this),Promise.resolve()}}function I6(t,e,n,r={}){var d;t=ii(t,Zu);const i=$0(e),s=t._getSettings(),a={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(Bz(`https://${l}`),qz("Firestore",!0)),s.host!==CN&&s.host!==l&&Ys("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!Oa(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Lt.MOCK_USER;else{h=Uz(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new se(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Lt(m)}t._authCredentials=new M3(new d_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class mt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new mt(this.firestore,e,this._key)}toJSON(){return{type:mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(il(n,mt._jsonSchema))return new mt(e,r||null,new he(Fe.fromString(n.referencePath)))}}mt._jsonSchemaVersion="firestore/documentReference/1.0",mt._jsonSchema={type:pt("string",mt._jsonSchemaVersion),referencePath:pt("string")};class Zr extends ns{constructor(e,n,r){super(e,n,sm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new he(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function mh(t,e,...n){if(t=br(t),h_("collection","path",e),t instanceof Zu){const r=Fe.fromString(e,...n);return vv(r),new Zr(t,null,r)}{if(!(t instanceof mt||t instanceof Zr))throw new se(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return vv(r),new Zr(t.firestore,null,r)}}function ot(t,e,...n){if(t=br(t),arguments.length===1&&(e=Z0.newId()),h_("doc","path",e),t instanceof Zu){const r=Fe.fromString(e,...n);return yv(r),new mt(t,null,new he(r))}{if(!(t instanceof mt||t instanceof Zr))throw new se(q.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return yv(r),new mt(t.firestore,t instanceof Zr?t.converter:null,new he(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1="AsyncQueue";class l1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new rN(this,"async_queue_retry"),this._c=()=>{const r=fh();r&&ae(a1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=fh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=fh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new hr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ho(e))throw e;ae(a1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,_r("INTERNAL UNHANDLED ERROR: ",c1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=vm.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&xe(47125,{Pc:c1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function c1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class cl extends Zu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new l1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l1(e),this._firestoreClient=void 0,await e}}}function A6(t,e){const n=typeof t=="object"?t:Rk(),r=typeof t=="string"?t:su,i=rl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=Oz("firestore");s&&I6(i,...s)}return i}function Nm(t){if(t._terminated)throw new se(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||P6(t),t._firestoreClient}function P6(t){var r,i,s;const e=t._freezeSettings(),n=function(l,c,d,h){return new rP(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,jN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new C6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new bn(Rt.fromBase64String(e))}catch(n){throw new se(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new bn(Rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(il(e,bn._jsonSchema))return bn.fromBase64String(e.bytes)}}bn._jsonSchemaVersion="firestore/bytes/1.0",bn._jsonSchema={type:pt("string",bn._jsonSchemaVersion),bytes:pt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ne(this._lat,e._lat)||Ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tr._jsonSchemaVersion}}static fromJSON(e){if(il(e,tr._jsonSchema))return new tr(e.latitude,e.longitude)}}tr._jsonSchemaVersion="firestore/geoPoint/1.0",tr._jsonSchema={type:pt("string",tr._jsonSchemaVersion),latitude:pt("number"),longitude:pt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:nr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(il(e,nr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new nr(e.vectorValues);throw new se(q.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}nr._jsonSchemaVersion="firestore/vectorValue/1.0",nr._jsonSchema={type:pt("string",nr._jsonSchemaVersion),vectorValues:pt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R6=/^__.*__$/;class D6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new es(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}function TN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:t})}}class Cm{constructor(e,n,r,i,s,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Cm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return pu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TN(this.Ac)&&R6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class V6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yu(e)}Cc(e,n,r,i=!1){return new Cm({Ac:e,methodName:n,Dc:r,path:zt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SN(t){const e=t._freezeSettings(),n=Yu(t._databaseId);return new V6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function M6(t,e,n,r,i,s={}){const a=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);AN("Data must be an object, but it was:",a,r);const l=zN(r,a);let c,d;if(s.merge)c=new Rn(a.fieldMask),d=a.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=O6(e,p,n);if(!a.contains(m))throw new se(q.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);B6(h,m)||h.push(m)}c=new Rn(h),d=a.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=a.fieldTransforms;return new D6(new vn(l),c,d)}function L6(t,e,n,r=!1){return Em(n,t.Cc(r?4:3,e))}function Em(t,e){if(IN(t=br(t)))return AN("Unsupported field value:",e,t),zN(t,e);if(t instanceof EN)return function(r,i){if(!TN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const l of r){let c=Em(l,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=br(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return CP(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=We.fromDate(r);return{timestampValue:uu(i.serializer,s)}}if(r instanceof We){const s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:uu(i.serializer,s)}}if(r instanceof tr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof bn)return{bytesValue:H_(i.serializer,r._byteString)};if(r instanceof mt){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:um(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof nr)return function(a,l){return{mapValue:{fields:{[w_]:{stringValue:k_},[ou]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return om(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${Bu(r)}`)}(t,e)}function zN(t,e){const n={};return m_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ji(t,(r,i)=>{const s=Em(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof tr||t instanceof bn||t instanceof mt||t instanceof EN||t instanceof nr)}function AN(t,e,n){if(!IN(n)||!f_(n)){const r=Bu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function O6(t,e,n){if((e=br(e))instanceof jm)return e._internalPath;if(typeof e=="string")return PN(t,e);throw pu("Field path arguments must be of type string or ",t,!1,void 0,n)}const F6=new RegExp("[~\\*/\\[\\]]");function PN(t,e,n){if(e.search(F6)>=0)throw pu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jm(...e.split("."))._internalPath}catch{throw pu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pu(t,e,n,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new se(q.INVALID_ARGUMENT,l+t+c)}function B6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new U6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class U6 extends RN{data(){return super.data()}}function Tm(t,e){return typeof e=="string"?PN(t,e):e instanceof jm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Sm{}class DN extends Sm{}function u1(t,e,...n){let r=[];e instanceof Sm&&r.push(e),r=r.concat(n),function(s){const a=s.filter(c=>c instanceof Im).length,l=s.filter(c=>c instanceof zm).length;if(a>1||a>0&&l>0)throw new se(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class zm extends DN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zm(e,n,r)}_apply(e){const n=this._parse(e);return VN(e._query,n),new ns(e.firestore,e.converter,Qf(e._query,n))}_parse(e){const n=SN(e.firestore);return function(s,a,l,c,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new se(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){f1(p,h);const N=[];for(const z of p)N.push(h1(c,s,z));m={arrayValue:{values:N}}}else m=h1(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||f1(p,h),m=L6(l,a,p,h==="in"||h==="not-in");return ft.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Im extends Sm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Im(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Ln.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let a=i;const l=s.getFlattenedFilters();for(const c of l)VN(a,c),a=Qf(a,c)}(e._query,n),new ns(e.firestore,e.converter,Qf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Am extends DN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Am(e,n)}_apply(e){const n=function(i,s,a){if(i.startAt!==null)throw new se(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new se(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new qa(s,a)}(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new fo(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function d1(t,e="asc"){const n=e,r=Tm("orderBy",t);return Am._create(r,n)}function h1(t,e,n){if(typeof(n=br(n))=="string"){if(n==="")throw new se(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!z_(e)&&n.indexOf("/")!==-1)throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Fe.fromString(n));if(!he.isDocumentKey(r))throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ev(t,new he(r))}if(n instanceof mt)return Ev(t,n._key);throw new se(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Bu(n)}.`)}function f1(t,e){if(!Array.isArray(t)||t.length===0)throw new se(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function VN(t,e){const n=function(i,s){for(const a of i)for(const l of a.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class W6{convertValue(e,n="none"){switch(li(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ji(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[ou].arrayValue)==null?void 0:i.values)==null?void 0:s.map(a=>lt(a.doubleValue));return new nr(n)}convertGeoPoint(e){return new tr(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Wu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ua(e));default:return null}}convertTimestamp(e){const n=oi(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Pe(J_(r),9688,{name:e});const i=new $a(r.get(1),r.get(3)),s=new he(r.popFirst(5));return i.isEqual(n)||_r(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Xo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oi extends RN{constructor(e,n,r,i,s,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tm("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Oi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Oi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oi._jsonSchema={type:pt("string",Oi._jsonSchemaVersion),bundleSource:pt("string","DocumentSnapshot"),bundleName:pt("string"),bundle:pt("string")};class yc extends Oi{data(e={}){return super.data(e)}}class Fs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Xo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yc(this._firestore,this._userDataWriter,r.key,r,new Xo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new yc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new yc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Xo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:H6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(q.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Z0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function H6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t){t=ii(t,mt);const e=ii(t.firestore,cl);return S6(Nm(e),t._key).then(n=>G6(e,t,n))}Fs._jsonSchemaVersion="firestore/querySnapshot/1.0",Fs._jsonSchema={type:pt("string",Fs._jsonSchemaVersion),bundleSource:pt("string","QuerySnapshot"),bundleName:pt("string"),bundle:pt("string")};class MN extends W6{constructor(e){super(),this.firestore=e}convertBytes(e){return new bn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new mt(this.firestore,null,n)}}function gh(t){t=ii(t,ns);const e=ii(t.firestore,cl),n=Nm(e),r=new MN(e);return $6(t._query),z6(n,t._query).then(i=>new Fs(e,r,t,i))}function Un(t,e,n){t=ii(t,mt);const r=ii(t.firestore,cl),i=q6(t.converter,e,n);return LN(r,[M6(SN(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Zn.none())])}function p1(t){return LN(ii(t.firestore,cl),[new am(t._key,Zn.none())])}function LN(t,e){return function(r,i){const s=new hr;return r.asyncQueue.enqueueAndForget(async()=>x6(await T6(r),i,s)),s.promise}(Nm(t),e)}function G6(t,e,n){const r=n.docs.get(e._key),i=new MN(t);return new Oi(t,i,e._key,r,new Xo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){co=i})(nA),ri(new wr("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),l=new cl(new L3(r.getProvider("auth-internal")),new B3(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new se(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new $a(d.options.projectId,h)}(a,i),a);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Xn(pv,mv,e),Xn(pv,mv,"esm2020")})();const K6={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},ON=Pk(K6);I3(ON);const Qe=A6(ON),Ve={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},$n=t=>JSON.parse(JSON.stringify(t)),Ae={async saveRecipe(t,e){try{return await Un(ot(Qe,Ve.RECIPES,t),$n({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=u1(mh(Qe,Ve.RECIPES),d1("updatedAt","desc")),e=await gh(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await p1(ot(Qe,Ve.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Un(ot(Qe,Ve.SETTINGS,"inventory_v2"),$n({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await ir(ot(Qe,Ve.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await ir(ot(Qe,Ve.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Un(ot(Qe,Ve.SETTINGS,"costs_data"),$n({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await ir(ot(Qe,Ve.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Un(ot(Qe,Ve.SETTINGS,"ficha_tecnica"),$n({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await ir(ot(Qe,Ve.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Un(ot(Qe,Ve.SETTINGS,"global_config"),$n({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await ir(ot(Qe,Ve.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Un(ot(Qe,Ve.SETTINGS,Ve.RECIPES_V2),$n({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await ir(ot(Qe,Ve.SETTINGS,Ve.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Un(ot(Qe,Ve.RECIPES_V3,String(t)),$n({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=u1(mh(Qe,Ve.RECIPES_V3),d1("updatedAt","desc"));t=await gh(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await gh(mh(Qe,Ve.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await p1(ot(Qe,Ve.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Un(ot(Qe,Ve.SETTINGS,Ve.KANBAN),$n({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await ir(ot(Qe,Ve.SETTINGS,Ve.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Un(ot(Qe,Ve.SETTINGS,"recipe_categories"),$n({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await ir(ot(Qe,Ve.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}},async syncSuppliers(t){try{return await Un(ot(Qe,Ve.SETTINGS,"suppliers"),$n({suppliers:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing suppliers:",e),!1}},async getSuppliers(){try{const t=await ir(ot(Qe,Ve.SETTINGS,"suppliers"));return t.exists()?t.data():null}catch(t){return console.error("Error getting suppliers:",t),null}}};function Q6(){const[t,e]=S.useState([]),[n,r]=S.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,s]=S.useState(!1),[a,l]=S.useState(null),[c,d]=S.useState(null),[h,p]=S.useState(!1),[m,v]=S.useState(""),[N,z]=S.useState("Global Investment Matrix"),[R,w]=S.useState(!1),[x,b]=S.useState(.13),[D,L]=S.useState(!1),[O,k]=S.useState(null),y=S.useRef(null),_=S.useCallback((T,V="success")=>{y.current&&clearTimeout(y.current),k({message:T,type:V}),y.current=setTimeout(()=>k(null),3500)},[]),[j,A]=S.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),P=S.useRef(null);S.useEffect(()=>{try{const T=localStorage.getItem("padoca_costs_v1"),V=localStorage.getItem("padoca_costs_categories"),W=localStorage.getItem("padoca_costs_title"),Z=localStorage.getItem("padoca_global_tax");let ie=T?JSON.parse(T):[],ce=V?JSON.parse(V):null;W&&z(W),Z&&b(Number(Z)),ce&&(ce=ce.map(ge=>ge==="Pessoal"?"Maquinrio":ge),r(ce)),ie&&(ie=ie.map(ge=>({...ge,category:ge.category==="Pessoal"?"Maquinrio":ge.category})),e(ie))}catch(T){console.error("Load failed",T)}},[]);const[I,we]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const V=await Ae.getCosts();V&&(V.costs&&e(V.costs),V.categories&&r(V.categories));const W=await Ae.getGlobalSettings();W&&W.taxRate!==void 0&&(b(W.taxRate),localStorage.setItem("padoca_global_tax",W.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{we(!0)}})()},[]),S.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),I&&Ae.syncCosts(t,n)},[t,n,I]),S.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),S.useEffect(()=>{localStorage.setItem("padoca_costs_title",N)},[N]),S.useEffect(()=>{localStorage.setItem("padoca_global_tax",x.toString()),I&&Ae.syncGlobalSettings({taxRate:x}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:x}}))},[x,I]);const de=T=>(Number(T)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),me=S.useMemo(()=>{const T=t.reduce((W,Z)=>{const ie=Number(Z.quantity)||1,ce=(Number(Z.amount)||0)*ie;return W.total+=ce,Z.type==="Fixo"?W.fixed+=ce:W.variable+=ce,W},{total:0,fixed:0,variable:0}),V=T.total*x;return{...T,hst:V,grandTotal:T.total+V}},[t]),pe=S.useMemo(()=>n.reduce((T,V)=>{const W=t.filter(Z=>Z.category===V);return W.length>0&&(T[V]=W),T},{}),[t,n]),H=T=>{if(T.preventDefault(),!j.description||!j.amount)return;const V=n.includes(j.category)?j.category:n[0],W={...j,category:V,amount:Number(j.amount),quantity:Number(j.quantity)||1};e(a?Z=>Z.map(ie=>ie.id===a?{...W,id:a}:ie):Z=>[...Z,{...W,id:Date.now().toString()}]),te()},oe=T=>{d({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(V=>V.filter(W=>W.id!==T)),_("Despesa removida com sucesso."),d(null)},onCancel:()=>d(null)})},te=()=>{s(!1),l(null),A({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},fe=T=>{A({description:T.description||"",amount:T.amount||"",quantity:T.quantity||1,category:T.category||n[0],type:T.type||"Varivel",link:T.link||"",date:T.date||new Date().toISOString().split("T")[0]}),l(T.id),s(!0)},ue=()=>{m&&(n.includes(m)||(r(T=>[...T,m]),_("Categoria adicionada.")),v(""))},K=T=>{d({title:"Remover Categoria",message:`A categoria "${T}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(V=>V.filter(W=>W!==T)),_("Categoria removida."),d(null)},onCancel:()=>d(null)})},E=()=>{try{const T=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],V=t.map(ge=>{const Re=Number(ge.quantity)||1,Me=Number(ge.amount)||0,Ie=Re*Me;return[ge.id,ge.date||"-",`"${ge.description.replace(/"/g,'""')}"`,Re,Me.toFixed(2).replace(".",","),Ie.toFixed(2).replace(".",","),`"${ge.category}"`,ge.type,`"${ge.link||""}"`]}),W="\uFEFF"+[T.join(";"),...V.map(ge=>ge.join(";"))].join(`
`),Z=new Blob([W],{type:"text/csv;charset=utf-8;"}),ie=URL.createObjectURL(Z),ce=document.createElement("a");ce.href=ie,ce.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,ce.click(),_("Relatrio Excel exportado!")}catch{_("Erro ao exportar CSV")}},F=()=>{try{const T=JSON.stringify({version:"1",costs:t,categories:n},null,2),V=new Blob([T],{type:"application/json"}),W=URL.createObjectURL(V),Z=document.createElement("a");Z.href=W,Z.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,Z.click(),_("Backup realizado com sucesso!")}catch{_("Erro ao realizar backup")}},U=T=>{var Z;const V=(Z=T.target.files)==null?void 0:Z[0];if(!V)return;const W=new FileReader;W.onload=ie=>{try{const ce=JSON.parse(String(ie.target.result||"{}"));if(ce.costs&&Array.isArray(ce.costs))e(ce.costs),ce.categories&&r(ce.categories),_("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{_("Arquivo de backup invlido")}},W.readAsText(V),T.target.value=""},J=()=>{d({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),_("Banco de dados limpo."),d(null)},onCancel:()=>d(null)})};return o.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[o.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),o.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[o.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),o.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),o.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[o.jsx("div",{className:"md:col-span-2 relative group",children:o.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[o.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex justify-between items-start mb-12",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[R?o.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:N,onChange:T=>z(T.target.value),onBlur:()=>w(!1),onKeyDown:T=>T.key==="Enter"&&w(!1),autoFocus:!0}):o.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>w(!0),children:N}),o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),o.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),o.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),o.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),o.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:de(me.grandTotal)})]})]}),o.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:de(me.total)})]}),o.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[D?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:x*100,onChange:T=>b(Number(T.target.value)/100),onBlur:()=>L(!1),onKeyDown:T=>T.key==="Enter"&&L(!1),autoFocus:!0}),o.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):o.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>L(!0),children:["Tax Impact (",(x*100).toFixed(0),"%)"]}),o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:de(me.hst)})]})]})]})}),o.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),o.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),o.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:de(me.fixed)})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[o.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),o.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(me.fixed/me.total*100||0).toFixed(0),"%"]})]}),o.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${me.fixed/me.total*100||0}%`}})})]})]}),o.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),o.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),o.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:de(me.variable)})]}),o.jsxs("div",{className:"mt-6",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[o.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),o.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(me.variable/me.total*100||0).toFixed(0),"%"]})]}),o.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${me.variable/me.total*100||0}%`}})})]})]})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[o.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:o.jsxs("div",{children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),o.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),o.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[o.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[o.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),o.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),o.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),o.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),o.jsx("div",{className:"col-span-2"})]}),o.jsx("div",{className:"space-y-6",children:t.length===0?o.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),o.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(pe).map(([T,V])=>o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[o.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:T}),o.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),o.jsx("div",{className:"space-y-3 md:space-y-1",children:V.map(W=>o.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[o.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[o.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${W.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),o.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[o.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:W.description}),o.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:W.date}),W.link&&o.jsx("a",{href:W.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),o.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:o.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[W.quantity," unit  ",W.type.slice(0,1)]})}),o.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[o.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:de((Number(W.amount)||0)*(Number(W.quantity)||1))}),o.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[de(W.amount)," / item"]})]}),o.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[o.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:de((Number(W.amount)||0)*(Number(W.quantity)||1)*(1+x))}),o.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),o.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[o.jsxs("button",{onClick:()=>fe(W),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),o.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),o.jsxs("button",{onClick:()=>oe(W.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),o.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},W.id))})]},T))})]})]}),o.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[o.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[o.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[o.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),o.jsxs("div",{children:[o.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),o.jsx("button",{onClick:E,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),o.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsxs("div",{className:"flex justify-between items-center mb-6",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),o.jsx("button",{onClick:J,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[o.jsx("button",{onClick:F,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),o.jsx("button",{onClick:()=>{var T;return(T=P.current)==null?void 0:T.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),o.jsx("input",{ref:P,type:"file",accept:"application/json",className:"hidden",onChange:U})]})]})]}),o.jsx(Ce,{children:i&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:te}),o.jsxs(ee.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[80vh]",children:[o.jsx(Y6,{}),o.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:o.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),o.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[o.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:a?"Editar Despesa":"Nova Despesa"}),o.jsx("button",{onClick:te,className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?o.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[o.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((T,V)=>o.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${V!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[o.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:T}),o.jsx("button",{onClick:()=>K(T),className:"w-11 h-11 flex items-center justify-center text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl touch-manipulation transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},T))}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:m,onChange:T=>v(T.target.value)}),o.jsx("button",{className:"h-12 w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold flex items-center justify-center touch-manipulation active:scale-95 transition-transform",onClick:ue,children:"+"})]}),o.jsx("button",{onClick:()=>p(!1),className:"w-full py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all touch-manipulation hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl",children:"Pronto"})]}):o.jsxs("form",{onSubmit:H,className:"space-y-6 px-4 animate-fade-in",children:[o.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[o.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[o.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),o.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:j.description,onChange:T=>A({...j,description:T.target.value}),placeholder:"Mixer, Aluguel..."})]}),o.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[o.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),o.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:j.link,onChange:T=>A({...j,link:T.target.value}),placeholder:"Opcional..."})]}),o.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[o.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),o.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:j.quantity,onChange:T=>A({...j,quantity:T.target.value})})]}),o.jsxs("div",{className:"flex items-center px-4 py-3",children:[o.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),o.jsxs("div",{className:"flex items-center flex-1",children:[o.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),o.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:j.amount,onChange:T=>A({...j,amount:T.target.value})})]})]})]}),o.jsx("div",{className:"px-1",children:o.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(T=>o.jsx("button",{type:"button",onClick:()=>A({...j,type:T}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${j.type===T?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:T},T))})}),o.jsxs("div",{className:"space-y-3 px-1",children:[o.jsxs("div",{className:"flex justify-between items-center px-1",children:[o.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),o.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(T=>o.jsx("button",{type:"button",onClick:()=>A({...j,category:T}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${j.category===T?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:T},T))})]}),o.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[o.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),o.jsx("button",{type:"button",onClick:te,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),o.jsx(Ce,{children:O&&bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${O.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":O.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${O.type==="error"?"bg-white animate-pulse":O.type==="success"?"bg-white":"bg-indigo-400"}`}),o.jsx("span",{className:"text-sm font-semibold tracking-tight",children:O.message})]}),document.body)}),o.jsx(Ce,{children:c&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:c.onCancel}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${c.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.type==="danger"?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:c.title}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:c.message}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:c.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:c.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${c.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}function Y6(){return pn(!0),null}const ar="padoca_inventory_v2",xh=["Ingredientes","Embalagens","Utenslios","Outros"],yh=["Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function X6(){var mo,go,rs,dl;const[t,e]=S.useState(()=>{try{const M=localStorage.getItem(ar);if(M)return JSON.parse(M);const Y=localStorage.getItem("padoca_inventory");return Y?JSON.parse(Y).map(re=>({...re,packageQuantity:re.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=S.useState(()=>{try{const M=localStorage.getItem(ar+"_categories");return M?JSON.parse(M):xh}catch{return xh}}),[i,s]=S.useState(!1),[a,l]=S.useState("synced");S.useEffect(()=>{(async()=>{try{const Y=await Ae.getInventory();Y&&(Array.isArray(Y.items)&&e(Y.items),Array.isArray(Y.categories)&&r(Y.categories));const Q=await Ae.getGlobalSettings();Q&&Q.taxRate!==void 0&&d(Q.taxRate)}catch(Y){console.warn("Inventory cloud load failed",Y)}finally{s(!0)}})()},[]);const[c,d]=S.useState(()=>{const M=localStorage.getItem("padoca_global_tax");return M?Number(M):.13});S.useEffect(()=>{const M=Y=>{Y.detail&&Y.detail.taxRate!==void 0&&d(Y.detail.taxRate)};return window.addEventListener("global-settings-updated",M),()=>window.removeEventListener("global-settings-updated",M)},[]);const[h,p]=S.useState(!1),[m,v]=S.useState(null),[N,z]=S.useState(""),[R,w]=S.useState(null),[x,b]=S.useState(null),[D,L]=S.useState(null),O=S.useRef(null),k=S.useCallback((M,Y="success")=>{O.current&&clearTimeout(O.current),L({message:M,type:Y}),O.current=setTimeout(()=>L(null),3500)},[]),[y,_]=S.useState(()=>{try{const M=localStorage.getItem(ar+"_subcategories");return M?JSON.parse(M):yh}catch{return yh}}),[j,A]=S.useState(!1),[P,I]=S.useState(""),[we,de]=S.useState(""),[me,pe]=S.useState("all"),[H,oe]=S.useState(""),[te,fe]=S.useState(null),[ue,K]=S.useState([]),[E,F]=S.useState(""),[U,J]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const Y=await Ae.getSuppliers();Y!=null&&Y.suppliers&&K(Y.suppliers)}catch(Y){console.error("Error loading suppliers:",Y)}})()},[]);const T=S.useMemo(()=>{if(!E.trim())return ue.slice(0,8);const M=E.toLowerCase();return ue.filter(Y=>{var Q,re;return((Q=Y.name)==null?void 0:Q.toLowerCase().includes(M))||((re=Y.company)==null?void 0:re.toLowerCase().includes(M))}).slice(0,8)},[ue,E]),[V,W]=S.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""});S.useEffect(()=>{if(localStorage.setItem(ar,JSON.stringify(t)),localStorage.setItem(ar+"_categories",JSON.stringify(n)),localStorage.setItem(ar+"_subcategories",JSON.stringify(y)),i){l("syncing");const M=setTimeout(async()=>{try{const Y=await Ae.syncInventory(t,n);l(Y?"synced":"error")}catch{l("error")}},1500);return()=>clearTimeout(M)}window.dispatchEvent(new Event("inventory-updated"))},[t,n,y,i]);const Z=M=>(Number(M.packageQuantity)||0)*(Number(M.packageCount)||1),ie=M=>{const Y=Z(M),Q=Number(M.minStock)||0,re=Number(M.maxStock)||0;return Q>0&&Y<Q?"low":Q>0&&Y<=Q*1.2?"warning":re>0&&Y>re?"high":"ok"},ce=M=>(Number(M.packageCount)||1)*(Number(M.pricePerUnit)||0),ge=S.useMemo(()=>{const M=t.reduce((re,Je)=>re+ce(Je),0),Y=t.length,Q=t.reduce((re,Je)=>{const Ee=ce(Je);return re[Je.category]=(re[Je.category]||0)+Ee,re},{});return{totalValue:M,itemCount:Y,byCategory:Q,taxImpact:M*c,grandTotal:M*(1+c)}},[t,c]),Re=M=>(Number(M)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),Me=()=>{if(!V.name.trim())return;const M={id:Date.now(),name:V.name.trim(),packageQuantity:Number(V.packageQuantity)||0,packageCount:Number(V.packageCount)||1,unit:V.unit,pricePerUnit:Number(V.pricePerUnit)||0,category:V.category,subcategory:V.category==="Ingredientes"?V.subcategory:null,purchaseDate:V.purchaseDate,supplierId:V.supplierId,supplierName:V.supplierName,minStock:Number(V.minStock)||0,maxStock:Number(V.maxStock)||0,createdAt:new Date().toISOString()};e(Y=>[...Y,M]),W({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),F(""),p(!1)},Ie=(M,Y,Q)=>{e(re=>re.map(Je=>Je.id!==M?Je:{...Je,[Y]:["name","unit","category","subcategory","purchaseDate"].includes(Y)?Q:Number(Q)||0}))},sn=M=>{b({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(Y=>Y.filter(Q=>Q.id!==M)),v(null),b(null)},onCancel:()=>b(null)})},Oe=S.useMemo(()=>{let M=t;if(N.trim()){const Y=N.toLowerCase().trim();M=M.filter(Q=>Q.name.toLowerCase().includes(Y)||Q.subcategory&&Q.subcategory.toLowerCase().includes(Y))}return R&&(M=M.filter(Y=>Y.subcategory===R)),M},[t,N,R]),Ge=S.useMemo(()=>n.reduce((M,Y)=>{const Q=Oe.filter(re=>re.category===Y);return Q.length>0&&(M[Y]=Q),M},{}),[Oe,n]),Cr=jn.useRef(null),mn=()=>{try{const M=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],Y=t.map(Ke=>{const hl=(Number(Ke.packageQuantity)||0)*(Number(Ke.packageCount)||1),is=(Number(Ke.packageCount)||1)*(Number(Ke.pricePerUnit)||0);return[Ke.id,`"${Ke.name.replace(/"/g,'""')}"`,`"${Ke.category}"`,Ke.packageQuantity,Ke.unit,Ke.packageCount,hl,Number(Ke.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),is.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),Q="\uFEFF"+[M.join(";"),...Y.map(Ke=>Ke.join(";"))].join(`
`),re=new Blob([Q],{type:"text/csv;charset=utf-8;"}),Je=URL.createObjectURL(re),Ee=document.createElement("a");Ee.href=Je,Ee.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,Ee.click(),k("Relatrio de Estoque exportado!","success")}catch(M){console.error(M),k("Erro ao exportar CSV","error")}},ul=()=>{try{const M=JSON.stringify({version:"2",items:t,categories:n},null,2),Y=new Blob([M],{type:"application/json"}),Q=URL.createObjectURL(Y),re=document.createElement("a");re.href=Q,re.download=`padoca_estoque_backup_${new Date().toISOString().split("T")[0]}.json`,re.click(),k("Backup de Estoque realizado!","success")}catch{k("Erro ao realizar backup","error")}},td=M=>{var re;const Y=(re=M.target.files)==null?void 0:re[0];if(!Y)return;const Q=new FileReader;Q.onload=Je=>{try{const Ee=JSON.parse(String(Je.target.result||"{}"));if(Ee.items&&Array.isArray(Ee.items))e(Ee.items),Ee.categories&&r(Ee.categories),k("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{k("Arquivo de backup invlido","error")}},Q.readAsText(Y),M.target.value=""},xi=()=>{b({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(ar,"[]"),b(null)},onCancel:()=>b(null)})};return o.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[o.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),o.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${a==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":a==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[o.jsx("div",{className:`w-1 h-1 rounded-full ${a==="syncing"?"bg-amber-500":a==="error"?"bg-red-500":"bg-emerald-500"}`}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:a==="syncing"?"Cloud Syncing":a==="error"?"Sync Error":"Cloud Active"})]})]}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),o.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),o.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[o.jsx("div",{className:"md:col-span-2 relative group",children:o.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[o.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex justify-between items-start mb-12",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),o.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),o.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),o.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),o.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:Re(ge.grandTotal)})]})]}),o.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:Re(ge.totalValue)})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(c*100).toFixed(0),"%)"]}),o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:Re(ge.taxImpact)})]})]})]})}),o.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((M,Y)=>{const Q={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},re=Q[M]||Q.Outros,Je=ge.byCategory[M]||0,Ee=Je*(1+c),Ke=(Je/ge.totalValue*100||0).toFixed(0);return o.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${re.pulse} ${re.shadow}`}),o.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:M})]}),o.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:Re(Ee)}),o.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",Re(Je)," + ",(c*100).toFixed(0),"% tax)"]})]}),o.jsxs("div",{className:"mt-4",children:[o.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[o.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),o.jsxs("span",{className:`text-[8px] font-bold ${re.text}`,children:[Ke,"%"]})]}),o.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:o.jsx("div",{className:`h-full ${re.bg} transition-all duration-1000`,style:{width:`${Ke}%`}})})]})]},M)})})]}),h&&bt.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"40px"},children:[o.jsx(Ql,{}),o.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>p(!1)}),o.jsxs("div",{className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl max-h-[80vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-zinc-100 dark:border-zinc-800 flex-shrink-0",children:[o.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Item"}),o.jsx("button",{onClick:()=>p(!1),className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar",children:[o.jsxs("div",{className:"sm:col-span-2 lg:col-span-12",children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Item"}),o.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"Ex: Farinha de Trigo",value:V.name,onChange:M=>W(Y=>({...Y,name:M.target.value})),autoFocus:!0})]}),o.jsxs("div",{className:"lg:col-span-12 grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Qtd/Pacote"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"25",value:V.packageQuantity,onChange:M=>W(Y=>({...Y,packageQuantity:M.target.value}))}),o.jsxs("select",{className:"w-24 px-2 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all text-center appearance-none",value:V.unit,onChange:M=>W(Y=>({...Y,unit:M.target.value})),children:[o.jsx("option",{value:"kg",children:"kg"}),o.jsx("option",{value:"g",children:"g"}),o.jsx("option",{value:"L",children:"L"}),o.jsx("option",{value:"ml",children:"ml"}),o.jsx("option",{value:"un",children:"un"}),o.jsx("option",{value:"cx",children:"cx"})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"N Pacotes"}),o.jsx("input",{type:"number",min:"1",inputMode:"numeric",pattern:"[0-9]*",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"1",value:V.packageCount,onChange:M=>W(Y=>({...Y,packageCount:M.target.value}))})]})]}),o.jsxs("div",{className:"lg:col-span-6",children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Pacote"}),o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500 font-medium",children:"$"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0.00",value:V.pricePerUnit,onChange:M=>W(Y=>({...Y,pricePerUnit:M.target.value}))})]})]}),o.jsxs("div",{className:V.category==="Ingredientes"?"lg:col-span-6":"lg:col-span-12",children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Categoria"}),o.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:V.category,onChange:M=>W(Y=>({...Y,category:M.target.value,subcategory:M.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(M=>o.jsx("option",{value:M,children:M},M))})]}),V.category==="Ingredientes"&&o.jsxs("div",{className:"lg:col-span-6",children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Subcategoria"}),o.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:V.subcategory,onChange:M=>W(Y=>({...Y,subcategory:M.target.value})),children:y.map(M=>o.jsx("option",{value:M,children:M},M))})]})]}),o.jsxs("div",{className:"mt-5",children:[o.jsx("label",{className:"block text-xs font-bold text-violet-500 uppercase tracking-widest mb-3",children:"Fornecedor"}),o.jsx("div",{className:"relative",children:V.supplierId?o.jsxs("div",{className:"flex items-center gap-3 px-4 py-4 rounded-2xl bg-violet-50 dark:bg-violet-500/10 border border-violet-200 dark:border-violet-500/20",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-sm font-bold shadow-lg shadow-violet-500/25",children:((go=(mo=V.supplierName)==null?void 0:mo.charAt(0))==null?void 0:go.toUpperCase())||"?"}),o.jsx("div",{className:"flex-1",children:o.jsx("p",{className:"font-bold text-violet-700 dark:text-violet-300",children:V.supplierName})}),o.jsx("button",{onClick:()=>{W(M=>({...M,supplierId:null,supplierName:""})),F("")},className:"w-10 h-10 flex items-center justify-center rounded-xl text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}):o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-violet-500/20 transition-all placeholder:text-zinc-300",placeholder:"Buscar fornecedor...",value:E,onChange:M=>{F(M.target.value),J(!0)},onFocus:()=>J(!0)}),U&&T.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-2xl max-h-48 overflow-y-auto z-[100]",children:T.map(M=>{var Y,Q;return o.jsxs("button",{onClick:()=>{W(re=>({...re,supplierId:M.id,supplierName:M.name})),F(""),J(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors first:rounded-t-2xl last:rounded-b-2xl",children:[o.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:((Q=(Y=M.name)==null?void 0:Y.charAt(0))==null?void 0:Q.toUpperCase())||"?"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-bold text-zinc-900 dark:text-white truncate",children:M.name}),M.company&&o.jsx("p",{className:"text-xs text-zinc-500 truncate",children:M.company})]})]},M.id)})}),U&&ue.length===0&&o.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-2xl p-4 text-center z-[100]",children:[o.jsx("p",{className:"text-sm text-zinc-500",children:"Nenhum fornecedor cadastrado"}),o.jsx("p",{className:"text-xs text-zinc-400 mt-1",children:"Adicione fornecedores na aba Fornecedores"})]})]})})]}),o.jsxs("div",{className:"mt-6 p-5 rounded-2xl bg-amber-50/50 dark:bg-amber-500/5 border border-amber-200/50 dark:border-amber-500/10",children:[o.jsx("h4",{className:"text-xs font-bold text-amber-600 dark:text-amber-400 uppercase tracking-widest mb-4",children:"Limites de Estoque"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Mnimo"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all placeholder:text-zinc-300",placeholder:"0",value:V.minStock,onChange:M=>W(Y=>({...Y,minStock:M.target.value}))}),o.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-amber-500/50 text-sm font-bold pointer-events-none",children:V.unit})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Mximo"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all placeholder:text-zinc-300",placeholder:"0",value:V.maxStock,onChange:M=>W(Y=>({...Y,maxStock:M.target.value}))}),o.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-amber-500/50 text-sm font-bold pointer-events-none",children:V.unit})]})]})]}),o.jsx("p",{className:"text-xs text-amber-600/70 dark:text-amber-400/50 mt-3",children:"Deixe em 0 para desativar alertas"})]}),V.packageQuantity&&V.packageCount&&o.jsx("div",{className:"mt-6 p-5 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 shadow-inner",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Resumo"}),o.jsxs("div",{className:"text-right",children:[o.jsxs("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-300",children:[Number(V.packageQuantity)*Number(V.packageCount)," ",V.unit," Total"]}),V.pricePerUnit&&o.jsx("div",{className:"text-2xl font-bold text-zinc-900 dark:text-white mt-1 tracking-tight tabular-nums",children:Re(Number(V.packageCount)*Number(V.pricePerUnit))})]})]})}),o.jsxs("div",{className:"flex gap-3 mt-8 safe-area-bottom",children:[o.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),o.jsx("button",{onClick:Me,disabled:!V.name.trim(),className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/10 hover:shadow-xl hover:shadow-zinc-900/20 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar ao Estoque"})]})]})]}),document.body),o.jsx("section",{className:"relative z-10 mb-6",children:o.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:N,onChange:M=>z(M.target.value)}),N&&o.jsx("button",{onClick:()=>z(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[o.jsx("button",{onClick:()=>w(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${R===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),y.map(M=>o.jsx("button",{onClick:()=>w(R===M?null:M),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${R===M?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:M},M))]}),(N||R)&&o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[o.jsxs("span",{className:"text-xs text-zinc-500",children:[Oe.length," ",Oe.length===1?"resultado":"resultados"]}),o.jsx("button",{onClick:()=>{z(""),w(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(Ge).length>0?o.jsx("div",{className:"space-y-8",children:Object.entries(Ge).map(([M,Y])=>o.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[o.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[o.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:M}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:Re((ge.byCategory[M]||0)*(1+c))}),o.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:o.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[Y.length," ",Y.length===1?"item":"itens"]})})]})]}),o.jsxs("div",{className:"hidden md:block",children:[o.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[o.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),o.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),o.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),o.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),o.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),o.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),o.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:Y.map(Q=>o.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:m===Q.id?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"col-span-2",children:o.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:Q.name,onChange:re=>Ie(Q.id,"name",re.target.value)})}),o.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[o.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:Q.packageQuantity,onChange:re=>Ie(Q.id,"packageQuantity",re.target.value)}),o.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:Q.unit,onChange:re=>Ie(Q.id,"unit",re.target.value),children:[o.jsx("option",{value:"kg",children:"kg"}),o.jsx("option",{value:"g",children:"g"}),o.jsx("option",{value:"L",children:"L"}),o.jsx("option",{value:"ml",children:"ml"}),o.jsx("option",{value:"un",children:"un"}),o.jsx("option",{value:"cx",children:"cx"})]})]}),o.jsx("div",{className:"col-span-1",children:o.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:Q.packageCount,onChange:re=>Ie(Q.id,"packageCount",re.target.value)})}),Q.category==="Ingredientes"&&o.jsx("div",{className:"col-span-2",children:o.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:Q.subcategory||"",onChange:re=>Ie(Q.id,"subcategory",re.target.value),children:y.map(re=>o.jsx("option",{value:re,children:re},re))})}),Q.category!=="Ingredientes"&&o.jsx("div",{className:"col-span-2 text-right",children:o.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[Z(Q)," ",Q.unit]})}),o.jsx("div",{className:"col-span-2",children:o.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:Q.pricePerUnit,onChange:re=>Ie(Q.id,"pricePerUnit",re.target.value)})}),o.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[o.jsx("button",{onClick:()=>v(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),o.jsx("button",{onClick:()=>sn(Q.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[ie(Q)==="low"&&o.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-rose-500 shadow-[0_0_6px_rgba(244,63,94,0.5)] animate-pulse",title:"Estoque baixo"}),ie(Q)==="warning"&&o.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-amber-500 shadow-[0_0_6px_rgba(245,158,11,0.4)]",title:"Prximo do mnimo"}),ie(Q)==="high"&&o.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_6px_rgba(59,130,246,0.4)]",title:"Acima do mximo"}),o.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:Q.name})]}),o.jsx("div",{className:"col-span-2 text-center",children:o.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[Q.packageQuantity," ",Q.unit]})}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[Q.packageCount,""]})}),o.jsx("div",{className:"col-span-2 text-right",children:o.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[Z(Q)," ",Q.unit]})}),o.jsx("div",{className:"col-span-2 text-right",children:o.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:Re(Q.pricePerUnit)})}),o.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[o.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:Re(ce(Q)*(1+c))}),o.jsx("button",{onClick:()=>v(Q.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},Q.id))})]}),o.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:Y.map(Q=>{const re=ie(Q),Je=re==="low"?"border-l-4 border-l-rose-500":re==="warning"?"border-l-4 border-l-amber-500":re==="high"?"border-l-4 border-l-blue-500":"";return o.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${Je} ${m===Q.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:m===Q.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),o.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>v(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),o.jsx("button",{onClick:()=>sn(Q.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:Q.name,onChange:Ee=>Ie(Q.id,"name",Ee.target.value)})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),o.jsx("div",{className:"flex gap-2",children:o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:Q.packageQuantity,onChange:Ee=>Ie(Q.id,"packageQuantity",Ee.target.value)})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:Q.unit,onChange:Ee=>Ie(Q.id,"unit",Ee.target.value),children:[o.jsx("option",{value:"kg",children:"kg"}),o.jsx("option",{value:"g",children:"g"}),o.jsx("option",{value:"L",children:"L"}),o.jsx("option",{value:"ml",children:"ml"}),o.jsx("option",{value:"un",children:"un"}),o.jsx("option",{value:"cx",children:"cx"})]}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),o.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:Q.packageCount,onChange:Ee=>Ie(Q.id,"packageCount",Ee.target.value)})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),o.jsxs("div",{className:"relative group",children:[o.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:Q.pricePerUnit,onChange:Ee=>Ie(Q.id,"pricePerUnit",Ee.target.value)})]})]})]}),Q.category==="Ingredientes"&&o.jsxs("div",{children:[o.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),o.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:Q.subcategory||"",onChange:Ee=>Ie(Q.id,"subcategory",Ee.target.value),children:y.map(Ee=>o.jsx("option",{value:Ee,children:Ee},Ee))})]})]}):o.jsxs("div",{onClick:()=>v(Q.id),className:"group cursor-pointer",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:Q.name}),o.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[Z(Q)," ",Q.unit," em estoque"]})]}),o.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[Q.packageCount," pcts"]})]}),o.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),o.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:Re(Q.pricePerUnit)})]}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),o.jsx("div",{className:"flex items-baseline gap-1",children:o.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:Re(ce(Q)*(1+c))})})]})]})]})},Q.id)})}),o.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[o.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",M]}),o.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:Re((ge.byCategory[M]||0)*(1+c))})]})]},M))}):o.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[o.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),o.jsx("button",{onClick:()=>p(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),o.jsx("section",{className:"relative z-10 mt-8",children:o.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center gap-4 mb-6",children:[o.jsx("h2",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gesto de Estoque"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:mn,className:"px-3 py-2 text-[9px] font-bold text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 uppercase tracking-widest transition-colors",children:"CSV"}),o.jsx("button",{onClick:ul,className:"px-3 py-2 text-[9px] font-bold text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300 uppercase tracking-widest transition-colors",children:"JSON"})]})]}),o.jsx("div",{className:"flex p-1 bg-zinc-100 dark:bg-zinc-800 rounded-2xl mb-4 overflow-x-auto",children:[{id:"all",label:"Todos",count:t.length},{id:"noLimits",label:"Sem Limites",count:t.filter(M=>!M.minStock&&!M.maxStock).length},{id:"alerts",label:"Alertas",count:t.filter(M=>["low","warning","high"].includes(ie(M))).length},{id:"ok",label:"OK",count:t.filter(M=>ie(M)==="ok"&&(M.minStock||M.maxStock)).length}].map(M=>o.jsxs("button",{onClick:()=>pe(M.id),className:`flex-1 min-w-[80px] px-4 py-3 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${me===M.id?"bg-white dark:bg-zinc-900 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[M.label,o.jsx("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full text-[9px] ${me===M.id?"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400":"bg-zinc-200/50 dark:bg-zinc-700 text-zinc-500"}`,children:M.count})]},M.id))}),o.jsxs("div",{className:"relative mb-6",children:[o.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),o.jsx("input",{type:"text",placeholder:"Buscar item...",value:H,onChange:M=>oe(M.target.value),className:"w-full pl-12 pr-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all"})]}),o.jsxs("div",{className:"space-y-2 max-h-[400px] overflow-y-auto custom-scrollbar",children:[t.filter(M=>me==="noLimits"?!M.minStock&&!M.maxStock:me==="alerts"?["low","warning","high"].includes(ie(M)):me==="ok"?ie(M)==="ok"&&(M.minStock||M.maxStock):!0).filter(M=>H.trim()?M.name.toLowerCase().includes(H.toLowerCase()):!0).map(M=>{const Y=ie(M),re={low:{bg:"bg-rose-50 dark:bg-rose-500/10",border:"border-rose-200 dark:border-rose-500/30",dot:"bg-rose-500",text:"text-rose-600 dark:text-rose-400"},warning:{bg:"bg-amber-50 dark:bg-amber-500/10",border:"border-amber-200 dark:border-amber-500/30",dot:"bg-amber-500",text:"text-amber-600 dark:text-amber-400"},high:{bg:"bg-blue-50 dark:bg-blue-500/10",border:"border-blue-200 dark:border-blue-500/30",dot:"bg-blue-500",text:"text-blue-600 dark:text-blue-400"},ok:{bg:"bg-zinc-50 dark:bg-zinc-800/50",border:"border-zinc-200 dark:border-zinc-700",dot:"bg-emerald-500",text:"text-zinc-600 dark:text-zinc-400"}}[Y];return o.jsx("div",{onClick:()=>fe(M),className:`p-4 rounded-2xl ${re.bg} border ${re.border} cursor-pointer hover:shadow-md transition-all active:scale-[0.99]`,children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:`flex-shrink-0 w-3 h-3 rounded-full ${re.dot} ${Y==="low"?"animate-pulse shadow-[0_0_8px_rgba(244,63,94,0.5)]":""}`}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h4",{className:"font-bold text-zinc-900 dark:text-white truncate",children:M.name}),o.jsxs("p",{className:"text-xs text-zinc-500",children:["Atual: ",o.jsxs("span",{className:`font-bold ${re.text}`,children:[Z(M)," ",M.unit]})]})]}),o.jsxs("div",{className:"flex items-center gap-3 text-xs",children:[o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-zinc-400 uppercase mb-0.5",children:"Mn"}),o.jsx("div",{className:`font-bold ${M.minStock?re.text:"text-zinc-300 dark:text-zinc-600"}`,children:M.minStock||""})]}),o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-[9px] font-bold text-zinc-400 uppercase mb-0.5",children:"Mx"}),o.jsx("div",{className:`font-bold ${M.maxStock?re.text:"text-zinc-300 dark:text-zinc-600"}`,children:M.maxStock||""})]}),o.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})},M.id)}),t.length===0&&o.jsx("div",{className:"text-center py-12 text-zinc-400",children:o.jsx("p",{className:"text-sm",children:"Nenhum item no estoque"})})]}),o.jsxs("div",{className:"pt-6 mt-6 border-t border-zinc-100 dark:border-white/5",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>A(!0),className:"py-4 bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20 text-indigo-600 dark:text-indigo-400 rounded-2xl text-[10px] font-bold uppercase tracking-widest hover:bg-indigo-100 dark:hover:bg-indigo-500/20 transition-all flex items-center justify-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Categorias"]}),o.jsxs("button",{onClick:xi,className:"py-4 bg-rose-50 dark:bg-rose-500/10 border border-rose-100 dark:border-rose-500/20 text-rose-500 rounded-2xl text-[10px] font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-all flex items-center justify-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Limpar Tudo"]})]}),o.jsx("input",{ref:Cr,type:"file",accept:"application/json",className:"hidden",onChange:td})]})]})}),te&&bt.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"40px"},children:[o.jsx(Ql,{}),o.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>fe(null)}),o.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[o.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Configurar Limites"}),o.jsx("button",{onClick:()=>fe(null),className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"p-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:`inline-flex w-16 h-16 rounded-2xl items-center justify-center text-2xl font-bold text-white mb-4 ${ie(te)==="low"?"bg-gradient-to-br from-rose-500 to-rose-600":ie(te)==="warning"?"bg-gradient-to-br from-amber-500 to-amber-600":ie(te)==="high"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-emerald-500 to-emerald-600"}`,children:((dl=(rs=te.name)==null?void 0:rs.charAt(0))==null?void 0:dl.toUpperCase())||"?"}),o.jsx("h4",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:te.name}),o.jsxs("p",{className:"text-sm text-zinc-500 mt-1",children:["Estoque atual: ",o.jsxs("span",{className:"font-bold text-zinc-900 dark:text-white",children:[Z(te)," ",te.unit]})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mnimo"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:te.minStock||"",onChange:M=>{Ie(te.id,"minStock",M.target.value),fe(Y=>({...Y,minStock:Number(M.target.value)||0}))}}),o.jsx("p",{className:"text-[10px] text-amber-500 text-center mt-1",children:te.unit})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mximo"}),o.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition-all",placeholder:"0",value:te.maxStock||"",onChange:M=>{Ie(te.id,"maxStock",M.target.value),fe(Y=>({...Y,maxStock:Number(M.target.value)||0}))}}),o.jsx("p",{className:"text-[10px] text-blue-500 text-center mt-1",children:te.unit})]})]}),o.jsx("button",{onClick:()=>fe(null),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-sm font-bold uppercase tracking-wider shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Salvar Limites"})]})]})]}),document.body),j&&o.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[o.jsx(Ql,{}),o.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>A(!1)}),o.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[o.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:o.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),o.jsx("button",{onClick:()=>A(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("div",{className:"space-y-4 mb-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),o.jsx("div",{className:"space-y-2",children:n.map((M,Y)=>o.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[o.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:M}),o.jsx("button",{onClick:()=>{b({title:"Excluir Categoria",message:`Excluir categoria "${M}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(Q=>Q.filter(re=>re!==M)),e(Q=>Q.map(re=>re.category===M?{...re,category:"Outros"}:re)),b(null),k("Categoria removida","success")},onCancel:()=>b(null)})},className:"w-11 h-11 flex items-center justify-center rounded-xl text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all touch-manipulation",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Y))})]}),o.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[o.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:P,onChange:M=>I(M.target.value),onKeyDown:M=>{M.key==="Enter"&&P.trim()&&(n.includes(P.trim())||(r(Y=>[...Y,P.trim()]),I("")))}}),o.jsx("button",{onClick:()=>{P.trim()&&!n.includes(P.trim())&&(r(M=>[...M,P.trim()]),I(""))},disabled:!P.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),o.jsx("button",{onClick:()=>{b({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(xh),b(null),k("Categorias restauradas","success")},onCancel:()=>b(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),o.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),o.jsx("div",{className:"space-y-2",children:y.map((M,Y)=>o.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[o.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:M}),o.jsx("button",{onClick:()=>{b({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${M}"?`,type:"danger",onConfirm:()=>{_(Q=>Q.filter(re=>re!==M)),b(null),k("Subcategoria removida","success")},onCancel:()=>b(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Y))})]}),o.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[o.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:we,onChange:M=>de(M.target.value),onKeyDown:M=>{M.key==="Enter"&&we.trim()&&(y.includes(we.trim())||(_(Y=>[...Y,we.trim()]),de("")))}}),o.jsx("button",{onClick:()=>{we.trim()&&!y.includes(we.trim())&&(_(M=>[...M,we.trim()]),de(""))},disabled:!we.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),o.jsx("div",{className:"pt-4",children:o.jsx("button",{onClick:()=>{b({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{_(yh),b(null),k("Subcategorias restauradas","success")},onCancel:()=>b(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),o.jsx(Ce,{children:x&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[o.jsx(Ql,{}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:x.title}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:x.message}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),o.jsx(Ce,{children:D&&bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${D.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":D.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${D.type==="error"?"bg-white animate-pulse":D.type==="success"?"bg-white":"bg-indigo-400"}`}),o.jsx("span",{className:"text-sm font-semibold tracking-tight",children:D.message})]}),document.body)})]})}function J6(){const[t,e]=S.useState([]),n=()=>{try{const r=localStorage.getItem(ar);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return S.useEffect(()=>{n();const r=s=>{s.key===ar&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}function Ql(){return pn(!0),null}const m1="fichaTecnica_pizzas",vc={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},vh=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,s=n*r;if(i<=0)return 0;const a=s/i,l=vc[t.unit]||1;return a/l};function bh(){return pn(!0),null}function Z6({newPizzaName:t,setNewPizzaName:e,setIsCreatingPizza:n,handleCreatePizza:r}){return pn(!0),bt.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center",children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:()=>{n(!1),e("")}}),o.jsxs(ee.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30,mass:.8},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-2xl overflow-hidden mt-16 md:mt-20 mx-4 md:mx-0 rounded-2xl",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[o.jsxs("div",{className:"flex items-center justify-between px-5 pt-4 pb-2",children:[o.jsx("div",{className:"w-12"}),o.jsx("h3",{className:"text-[17px] font-semibold text-zinc-900 dark:text-white",children:"Nova Pizza"}),o.jsx("button",{onClick:()=>{n(!1),e("")},className:"w-12 h-12 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-4"}),o.jsxs("div",{className:"px-6 py-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-14 h-14 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center shrink-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-zinc-400 dark:text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsx("div",{children:o.jsx("p",{className:"text-[15px] text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})})]}),o.jsx("div",{className:"mb-6",children:o.jsx("input",{type:"text",className:"w-full h-14 px-5 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[17px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Ex: Margherita",value:t,onChange:i=>e(i.target.value),autoFocus:!0,onKeyDown:i=>i.key==="Enter"&&r()})}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{n(!1),e("")},className:"flex-1 h-14 rounded-2xl font-semibold text-[17px] text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),o.jsx("button",{onClick:r,disabled:!t.trim(),className:"flex-[1.5] h-14 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-[17px] hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-lg shadow-zinc-900/20 dark:shadow-white/10 touch-manipulation",children:"Criar"})]})]}),o.jsx("div",{style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"}})]})]}),document.body)}const g1={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function e9(){const[t,e]=S.useState(()=>{try{const E=localStorage.getItem(m1);return E?JSON.parse(E):[g1]}catch{return[g1]}}),[n,r]=S.useState(!1);S.useEffect(()=>{(async()=>{try{const F=await Ae.getPizzas();F&&F.length>0&&e(F.map(U=>({...U,ingredients:Array.isArray(U.ingredients)?U.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,s]=S.useState(null),[a,l]=S.useState(null),[c,d]=S.useState(!1),[h,p]=S.useState(!1),[m,v]=S.useState(""),[N,z]=S.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[R,w]=S.useState(null),[x,b]=S.useState(null),[D,L]=S.useState(null),[O,k]=S.useState(null),y=S.useRef(null);S.useCallback((E,F="success")=>{y.current&&clearTimeout(y.current),k({message:E,type:F}),y.current=setTimeout(()=>k(null),3500)},[]);const _=J6();S.useEffect(()=>{localStorage.setItem(m1,JSON.stringify(t)),n&&Ae.syncPizzas(t)},[t,n]);const j=S.useMemo(()=>t.find(E=>E.id===i)||null,[t,i]),A=(E=[])=>{if(!Array.isArray(E))return{totalCost:0,costPerPizza:0};const F=E.reduce((U,J)=>U+ue(J),0);return{totalCost:F,costPerPizza:F}},P=E=>(Number(E)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),I=E=>{const F=Number(E)||0;return F<.01&&F>0?F.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):F.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},we=()=>{if(!m.trim())return;const E={id:Date.now(),name:m.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(F=>[...F,E]),v(""),p(!1),s(E.id)},de=E=>{const F=t.find(U=>U.id===E);b({title:"Excluir Pizza",message:`A pizza "${(F==null?void 0:F.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e(U=>U.filter(J=>J.id!==E)),i===E&&s(null),b(null)},onCancel:()=>b(null)})},me=E=>{const F=t.find(U=>U.id===E);F&&L({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:F.name,onConfirm:U=>{U&&U!==F.name&&e(J=>J.map(T=>T.id===E?{...T,name:U.trim()}:T)),L(null)},onCancel:()=>L(null)})},pe=E=>{if(z(F=>({...F,name:E})),w(null),!!Array.isArray(_)&&E&&E.trim().length>0){const F=E.toLowerCase().trim(),U=_.find(J=>!J||!J.name?!1:J.name.toLowerCase()===F);if(U){w(U);const J=vh(U),T=vc[N.unit]||1,V=J*T;z(W=>({...W,pricePerUnit:V.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:U.id}))}}},H=E=>{z(F=>{const U={...F,unit:E};if(R){const J=vh(R),T=vc[E]||1,V=J*T;U.pricePerUnit=V.toFixed(6),U.isSyncedFromInventory=!0}return U})},oe=(E=!1)=>{if(!j||!N.name.trim()||!N.quantity)return;const F={id:Date.now(),name:N.name.trim(),quantity:Number(N.quantity)||0,unit:N.unit,pricePerUnit:Number(N.pricePerUnit)||0,inventoryItemId:N.inventoryItemId};e(U=>U.map(J=>J.id===i?{...J,ingredients:[...J.ingredients||[],F]}:J)),z({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null),E?setTimeout(()=>{var U;(U=document.getElementById("cat-ing-name-input"))==null||U.focus()},50):d(!1)},te=(E,F,U)=>{j&&e(J=>J.map(T=>T.id!==i?T:{...T,ingredients:(T.ingredients||[]).map(V=>V.id!==E?V:{...V,[F]:F==="name"||F==="unit"?U:Number(U)||0})}))},fe=E=>{j&&(e(F=>F.map(U=>U.id!==i?U:{...U,ingredients:(U.ingredients||[]).filter(J=>J.id!==E)})),l(null))},ue=E=>(Number(E.quantity)||0)*(Number(E.pricePerUnit)||0),K=j?A(j.ingredients):{totalCost:0,costPerPizza:0};return o.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[o.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),o.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[o.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),o.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),o.jsx(Ce,{children:h&&o.jsx(Z6,{newPizzaName:m,setNewPizzaName:v,setIsCreatingPizza:p,handleCreatePizza:we})}),!i&&o.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(E=>{const F=A(E.ingredients);return o.jsxs("div",{onClick:()=>s(E.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex items-start justify-between mb-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:E.name}),o.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[E.ingredients.length," ingrediente",E.ingredients.length!==1?"s":""]})]}),o.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[o.jsx("button",{onClick:U=>{U.stopPropagation(),me(E.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),o.jsx("button",{onClick:U=>{U.stopPropagation(),de(E.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),o.jsxs("div",{className:"mb-6",children:[o.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),o.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:P(F.totalCost)})]}),o.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),o.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:o.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[E.ingredients.length," itens"]})})]})]})]},E.id)}),t.length===0&&o.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[o.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),o.jsx("button",{onClick:()=>p(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),j&&o.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:()=>s(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:j.name}),o.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[j.ingredients.length," ingrediente",j.ingredients.length!==1?"s":""," cadastrado",j.ingredients.length!==1?"s":""]})]})]}),o.jsx("div",{className:"relative group",children:o.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[o.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex justify-between items-start mb-12",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),o.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),o.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),o.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),o.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:P(K.totalCost)})]})]}),o.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:j.ingredients.length}),o.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:P(K.costPerPizza)}),o.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!c&&o.jsxs("button",{onClick:()=>d(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),c&&o.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[o.jsx(bh,{}),o.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{d(!1),z({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)}}),o.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[o.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:o.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),o.jsx("button",{onClick:()=>{d(!1),z({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),o.jsxs("div",{className:"relative mb-5",children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:E=>{var F;E.key==="Enter"&&(E.preventDefault(),(F=document.getElementById("cat-ing-qty-input"))==null||F.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${R?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:N.name,onChange:E=>{const F=E.target.value;z(U=>({...U,name:F})),R&&F!==R.name&&(w(null),z(U=>({...U,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),pe(F)},autoFocus:!0}),R&&o.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),N.name.length>0&&!R&&o.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const E=_.filter(F=>F.name.toLowerCase().includes(N.name.toLowerCase())).slice(0,6);return E.length===0&&N.name.length>1?o.jsxs("div",{className:"p-5 text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),o.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',N.name,'" ao Estoque primeiro']})]}):E.map((F,U)=>o.jsxs("button",{onClick:()=>{w(F);const J=vh(F),T=vc[N.unit]||1,V=J*T;z(W=>({...W,name:F.name,pricePerUnit:V.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:F.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${U!==E.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:F.name}),o.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[F.packageQuantity*F.packageCount," ",F.unit]})]}),o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},F.id))})()})]}),R&&o.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:R.name}),o.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",R.packageQuantity*R.packageCount," ",R.unit,"  ",P(R.packageCount*R.pricePerUnit)]})]})]})}),!R&&o.jsxs("div",{className:"mb-5",children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),o.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:N.unit,onChange:E=>H(E.target.value),children:[o.jsx("option",{value:"g",children:"g"}),o.jsx("option",{value:"kg",children:"kg"}),o.jsx("option",{value:"ml",children:"ml"}),o.jsx("option",{value:"L",children:"L"}),o.jsx("option",{value:"un",children:"un"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),o.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:E=>{E.key==="Enter"&&(E.preventDefault(),oe(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:N.quantity,onChange:E=>z(F=>({...F,quantity:E.target.value}))})]}),R&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),o.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:N.unit})]})]}),R&&N.quantity&&o.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[o.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),o.jsxs("div",{className:"flex items-end justify-between",children:[o.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[N.quantity," ",N.unit,"  ",I(N.pricePerUnit),"/",N.unit]}),o.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:P(Number(N.quantity)*Number(N.pricePerUnit))})]})]}),o.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[o.jsx("button",{onClick:()=>{d(!1),z({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),o.jsx("button",{onClick:oe,disabled:!N.name||!N.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),j.ingredients.length>0&&o.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[o.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[o.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),o.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),o.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),o.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),o.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),o.jsx("div",{className:"col-span-1"})]}),o.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:j.ingredients.map(E=>o.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:a===E.id?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"col-span-4",children:o.jsx("input",{id:`edit-ing-name-${E.id}`,autoFocus:!0,onKeyDown:F=>{var U;F.key==="Enter"&&(F.preventDefault(),(U=document.getElementById(`edit-ing-qty-${E.id}`))==null||U.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:E.name,onChange:F=>te(E.id,"name",F.target.value),onBlur:()=>{!E.name.trim()&&(!E.quantity||E.quantity===0)&&fe(E.id)}})}),o.jsx("div",{className:"col-span-2",children:o.jsx("input",{id:`edit-ing-qty-${E.id}`,onKeyDown:F=>{var U;F.key==="Enter"&&(F.preventDefault(),(U=document.getElementById(`edit-ing-price-${E.id}`))==null||U.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:E.quantity,onChange:F=>te(E.id,"quantity",F.target.value),onBlur:()=>{!E.name.trim()&&(!E.quantity||E.quantity===0)&&fe(E.id)}})}),o.jsx("div",{className:"col-span-1",children:o.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:E.unit,onChange:F=>te(E.id,"unit",F.target.value),children:[o.jsx("option",{value:"g",children:"g"}),o.jsx("option",{value:"kg",children:"kg"}),o.jsx("option",{value:"ml",children:"ml"}),o.jsx("option",{value:"L",children:"L"}),o.jsx("option",{value:"un",children:"un"})]})}),o.jsx("div",{className:"col-span-2",children:o.jsx("input",{id:`edit-ing-price-${E.id}`,onKeyDown:F=>{F.key==="Enter"&&(F.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:E.pricePerUnit,onChange:F=>te(E.id,"pricePerUnit",F.target.value)})}),o.jsx("div",{className:"col-span-2 text-right",children:o.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:P(ue(E))})}),o.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[o.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsx("button",{onClick:()=>fe(E.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"col-span-4",children:o.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:E.name})}),o.jsx("div",{className:"col-span-2 text-right",children:o.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:E.quantity})}),o.jsx("div",{className:"col-span-1 text-center",children:o.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:E.unit})}),o.jsx("div",{className:"col-span-2 text-right",children:o.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(E.pricePerUnit)||0)})}),o.jsx("div",{className:"col-span-2 text-right",children:o.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:P(ue(E))})}),o.jsx("div",{className:"col-span-1 flex justify-end",children:o.jsx("button",{onClick:()=>l(E.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},E.id))}),o.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[o.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),o.jsx("div",{className:"col-span-2 text-right",children:o.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:P(K.totalCost)})}),o.jsx("div",{className:"col-span-1"})]})]}),j.ingredients.length>0&&o.jsxs("div",{className:"md:hidden space-y-4",children:[j.ingredients.map(E=>o.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${a===E.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:a===E.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),o.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),o.jsx("button",{onClick:()=>fe(E.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),o.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:E.name,onChange:F=>te(E.id,"name",F.target.value),onBlur:()=>{!E.name.trim()&&(!E.quantity||E.quantity===0)&&fe(E.id)}})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),o.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:E.quantity,onChange:F=>te(E.id,"quantity",F.target.value),onBlur:()=>{!E.name.trim()&&(!E.quantity||E.quantity===0)&&fe(E.id)}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:E.unit,onChange:F=>te(E.id,"unit",F.target.value),children:[o.jsx("option",{value:"g",children:"g"}),o.jsx("option",{value:"kg",children:"kg"}),o.jsx("option",{value:"ml",children:"ml"}),o.jsx("option",{value:"L",children:"L"}),o.jsx("option",{value:"un",children:"un"})]}),o.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),o.jsx("div",{className:"relative group",children:o.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:E.pricePerUnit,onChange:F=>te(E.id,"pricePerUnit",F.target.value)})})]})]}):o.jsxs("div",{onClick:()=>l(E.id),className:"group cursor-pointer",children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:E.name}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[E.quantity," ",E.unit]}),o.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(E.pricePerUnit)||0),"/",E.unit]})]})]}),o.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx("button",{onClick:F=>{F.stopPropagation(),l(E.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),o.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),o.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:P(ue(E))})]})]})},E.id)),o.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),o.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:P(K.totalCost)})]})})]}),j.ingredients.length===0&&!c&&o.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[o.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),o.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),o.jsx(Ce,{children:x&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[o.jsx(bh,{}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:x.type==="danger"?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:x.title}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:x.message}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),o.jsx(Ce,{children:D&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[o.jsx(bh,{}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:D.onCancel}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[o.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:D.title}),o.jsx("input",{autoFocus:!0,defaultValue:D.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:D.placeholder,onKeyDown:E=>{E.key==="Enter"&&D.onConfirm(E.target.value)}}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:D.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:E=>{const F=E.target.closest(".relative").querySelector("input");D.onConfirm(F.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),o.jsx(Ce,{children:O&&bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${O.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":O.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${O.type==="error"?"bg-white animate-pulse":O.type==="success"?"bg-white":"bg-indigo-400"}`}),o.jsx("span",{className:"text-sm font-semibold tracking-tight",children:O.message})]}),document.body)})]})}function sr({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:s="0",pattern:a,inputMode:l}){const c=Number(e)||0,d=r==="g"&&Math.abs(c)>=1e3,h=d?"kg":r,p=()=>d?Math.round(c/1e3).toString():Math.round(c).toString(),[m,v]=S.useState(""),[N,z]=S.useState(!1);S.useEffect(()=>{N||v(e==null?"":p())},[e,N,d]);const R=b=>{const D=b.target.value;v(D);const L=parseFloat(D)||0;n==null||n(L)},w=()=>z(!0),x=()=>{z(!1),e!=null&&v(p())};return o.jsxs("label",{className:"block",children:[o.jsx("div",{className:"label mb-1",children:t}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:a,value:m,onChange:R,onFocus:w,onBlur:x,placeholder:s}),h&&o.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function Bs({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:s,step:a=.1,decimals:l=1,maxPct:c=null}){const d=Math.max(i||0,1),h=k=>d*(Number(k)||0)/100,p=k=>(Number(k)||0)/d*100,m=h(e),v=r==="grams"&&Math.abs(m)>=1e3,N=r==="grams"?v?"kg":"g":"%",z=()=>{const k=Number(e)||0;if(r==="grams"){const y=h(k);return v?y/1e3:y<10?y:Math.round(y)}return k},[R,w]=S.useState(()=>{if(e===""||e===null||e===void 0)return"";const k=z();return v?k.toFixed(2):k.toString()}),[x,b]=S.useState(!1);S.useEffect(()=>{if(!x)if(e===""||e===null||e===void 0)w("");else{const k=z();if(r==="grams"){const y=h(Number(e)||0);w(v?k.toFixed(2):y<10?y.toFixed(2):Math.round(y).toString())}else w(Number(k).toFixed(l))}},[e,r,i,x,v]);const D=k=>{const y=k.target.value;if(w(y),y===""){n==null||n("");return}let _=parseFloat(y);if(!Number.isNaN(_)){_=Math.max(0,_),r==="pct"&&c!==null&&_>c&&(_=c,w(_.toString()));let j=_;r==="grams"&&v&&(j=_*1e3);const A=r==="grams"?p(j):_;n==null||n(A)}},L=()=>{b(!0)},O=()=>{if(b(!1),R===""||R===null){w("");return}const k=parseFloat(R);if(!Number.isNaN(k))if(r==="grams"){const y=h(Number(e)||0);w(v||y<10?k.toFixed(2):Math.round(k).toString())}else w(k.toFixed(l))};return o.jsxs("label",{className:"block",children:[o.jsx("div",{className:"label mb-1",children:t}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:s,step:r==="grams"?1:a,value:R,onChange:D,onFocus:L,onBlur:O,placeholder:"0"}),o.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:N})]})]})}function t9({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const a=["None","ADY","IDY","CY"];function l(c,d,h){r==null||r({...n,[c]:{...n[c],[d]:h}})}return o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"label",children:"Tipos de Fermentos"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(c=>o.jsxs("label",{className:"button "+(t===c?"primary":""),children:[o.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:c,checked:t===c,onChange:()=>e==null?void 0:e(c)}),c]},c))}),t==="ADY"&&o.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:o.jsx(Bs,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:c=>l("ADY","yeastPct",c),mode:i,flourWeight:s,name:"ADY-yeast",decimals:3})}),t==="IDY"&&o.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:o.jsx(Bs,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:c=>l("IDY","yeastPct",c),mode:i,flourWeight:s,name:"IDY-yeast",decimals:3})}),t==="CY"&&o.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:o.jsx(Bs,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:c=>l("CY","yeastPct",c),mode:i,flourWeight:s,name:"CY-yeast",decimals:3})}),t==="None"&&o.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function n9({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const a=["None","Poolish","Biga","Levain"];function l(m,v,N){r==null||r({...n,[m]:{...n[m],[v]:Number.isNaN(N)?"":N}})}const c=i==="grams"?"g":"%",d=m=>s*(Number(m==null?void 0:m.pct)||0)/100,h=(m,v=0,N="")=>{let z=Number(m);if(!Number.isFinite(z))return"";let R=N,w=v;N==="g"&&Math.abs(z)>=1e3&&(z=z/1e3,R="kg",w=2);const x=z.toLocaleString("pt-BR",{minimumFractionDigits:w,maximumFractionDigits:w});return R?`${x} ${R}`:x},p=m=>{const v=n[m];if(!v)return null;const N=d(v),z=N*(Number(v.hydration)||0)/100;return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[o.jsx(Bs,{label:`Farinha Pref. (${c})`,value:v.pct,onChange:R=>l(m,"pct",R),mode:i,flourWeight:s,name:`${m}-pct`}),o.jsx(Bs,{label:`gua (${c})`,value:v.hydration,onChange:R=>l(m,"hydration",Math.min(200,Math.max(0,R))),mode:i,flourWeight:N>0?N:s,name:`${m}-hydration`}),typeof v.yeastPct<"u"&&o.jsx(Bs,{label:`Fermento (${c})`,value:v.yeastPct,onChange:R=>l(m,"yeastPct",R),mode:i,flourWeight:N>0?N:s,name:`${m}-yeast`,decimals:2}),typeof v.inoculationPct<"u"&&o.jsxs("label",{className:"block",children:[o.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:v.inoculationPct,onChange:R=>l(m,"inoculationPct",parseFloat(R.target.value)),step:1}),o.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),o.jsxs("label",{className:"block",children:[o.jsx("div",{className:"label mb-1",children:"Tempo"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:v.time_h,onChange:R=>l(m,"time_h",parseFloat(R.target.value))}),o.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),o.jsxs("label",{className:"block",children:[o.jsx("div",{className:"label mb-1",children:"Temp."}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:v.temp_C,onChange:R=>l(m,"temp_C",parseFloat(R.target.value))}),o.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&o.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[o.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),o.jsx("span",{className:"ml-2 font-semibold",children:h(N,0,"g")})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),o.jsx("span",{className:"ml-2 font-semibold",children:h(z,0,"g")})]}),o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),o.jsx("span",{className:"ml-2 font-semibold",children:h(N+z,0,"g")})]})]})]})]})};return o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"label",children:"Tipo de Fermentao"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(m=>o.jsxs("label",{className:"button "+(t===m?"primary":""),children:[o.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:m,checked:t===m,onChange:()=>e==null?void 0:e(m)}),m]},m))}),t==="Poolish"&&p("poolish"),t==="Biga"&&p("biga"),t==="Levain"&&p("levain"),t==="None"&&o.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function r9(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function Fo(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function i9({inputMode:t,setInputMode:e}){const[n,r]=S.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,s]=S.useState({}),a=S.useRef(null),[l,c]=S.useState("synced"),[d,h]=S.useState(null),[p,m]=S.useState(null),[v,N]=S.useState(null),z=S.useRef(null),R=S.useCallback((T,V="success")=>{z.current&&clearTimeout(z.current),N({message:T,type:V}),z.current=setTimeout(()=>N(null),3500)},[]),[w,x]=S.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});S.useEffect(()=>{(async()=>{const V=r9();s(V);try{const W=await Ae.getAllRecipes();if(Object.keys(W).length>0){const Z={...V,...W};s(Z),Fo(Z)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function b(T,V){r(W=>({...W,[T]:typeof V=="number"&&Number.isNaN(V)?"":V}))}function D(T){r(V=>({...V,preferment:T}))}function L(T){r(V=>({...V,yeastType:T}))}function O(T,V){t==="grams"?x(W=>({...W,[T]:Number(V)||0})):b(T,V)}function k(T){x(V=>({...V,flour:Number(T)||0}))}const y=S.useMemo(()=>{var Z;const T=ie=>Number(ie)||0,V=((Z=n.yeastType)==null?void 0:Z[n.yeastSelection])||{},W=T(V.yeastPct);return 100+T(n.water)+T(n.sugar)+T(n.salt)+T(n.oliveOil)+T(n.oil)+T(n.milk)+T(n.butter)+T(n.diastatic)+W},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),_=S.useMemo(()=>{const T=Number(n.doughBalls)||0,V=Number(n.ballWeight)||0;return T*V},[n.doughBalls,n.ballWeight]),j=S.useMemo(()=>{const T=Number(_)||0,V=Number(y)||100;return V<=0?0:T*100/V},[_,y]),A=S.useMemo(()=>{var ie;const T=j,V=ce=>T*(Number(ce)||0)/100,W=((ie=n.yeastType)==null?void 0:ie[n.yeastSelection])||{},Z=Number(W.yeastPct)||0;return{flour:T,water:V(n.water),sugar:V(n.sugar),salt:V(n.salt),oliveOil:V(n.oliveOil),oil:V(n.oil),milk:V(n.milk),butter:V(n.butter),diastatic:V(n.diastatic),yeast:T*Z/100,total:T+V(n.water)+V(n.sugar)+V(n.salt)+V(n.oliveOil)+V(n.oil)+V(n.milk)+V(n.butter)+V(n.diastatic)+T*Z/100}},[j,n]),P=S.useMemo(()=>{if(t==="grams"){const T=(Number(w.flour)||0)+(Number(w.water)||0)+(Number(w.sugar)||0)+(Number(w.salt)||0)+(Number(w.oliveOil)||0)+(Number(w.oil)||0)+(Number(w.milk)||0)+(Number(w.butter)||0)+(Number(w.diastatic)||0)+(Number(w.yeast)||0);return{flour:w.flour,water:w.water,sugar:w.sugar,salt:w.salt,oliveOil:w.oliveOil,oil:w.oil,milk:w.milk,butter:w.butter,diastatic:w.diastatic,yeast:w.yeast,total:T}}return A},[t,w,A]),I=S.useMemo(()=>{const T=Number(P.flour)||0;if(T<=0)return 0;const V=Number(P.water)||0,W=Number(P.milk)||0;return(V+W)/T*100},[P.flour,P.water,P.milk]),we=String(n.prefermentType||"").toLowerCase(),de=n.preferment&&n.preferment[we]?n.preferment[we]:null,me=de?j*(Number(de.pct)||0)/100:0,pe=me*(Number(de==null?void 0:de.hydration)||0)/100,H=me+pe;function oe(){m({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:T=>{if(!T)return;const V={...i,[T]:n};s(V),Fo(V),Ae.saveRecipe(T,n).then(W=>{W&&c("synced")}),m(null)},onCancel:()=>m(null)})}function te(T){const V=i[T];V&&r(V)}function fe(T){h({title:"Excluir Receita",message:`A receita "${T}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const V={...i};delete V[T],s(V),Fo(V),Ae.deleteRecipe(T),h(null)},onCancel:()=>h(null)})}function ue(T){m({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:T,onConfirm:V=>{if(!V||V===T)return;const W={...i};W[V]=W[T];const Z=W[T];delete W[T],s(W),Fo(W),Ae.deleteRecipe(T),Ae.saveRecipe(V,Z),m(null)},onCancel:()=>m(null)})}function K(){const T=JSON.stringify({inputs:n,recipes:i},null,2),V=new Blob([T],{type:"application/json"}),W=URL.createObjectURL(V),Z=document.createElement("a");Z.href=W,Z.download="padoca_pizza_recipes.json",Z.click(),URL.revokeObjectURL(W)}function E(T){var Z;const V=(Z=T.target.files)==null?void 0:Z[0];if(!V)return;const W=new FileReader;W.onload=ie=>{try{const ce=JSON.parse(String(ie.target.result||"{}"));ce.inputs&&r(ce.inputs),ce.recipes&&(s(ce.recipes),Fo(ce.recipes)),R("Importao concluda!","success")}catch{R("Arquivo invlido.","error")}},W.readAsText(V),T.target.value=""}function F(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function U(T,V=0,W=""){let Z=Number(T);if(!Number.isFinite(Z))return"";let ie=W,ce=V;W==="g"&&Math.abs(Z)>=1e3&&(Z=Z/1e3,ie="kg",ce=2);const ge=Z.toLocaleString("pt-BR",{minimumFractionDigits:ce,maximumFractionDigits:ce});return ie?`${ge} ${ie}`:ge}function J(T){return(Number(T)||0)>.001}return o.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[o.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),o.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),o.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[o.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),o.jsx("div",{className:"relative group",children:o.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[o.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:"flex justify-between items-start mb-12",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),o.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),o.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[o.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),o.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),o.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:U(P.total,0,"g")})]})]}),o.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),o.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),o.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),o.jsx("div",{className:"flex items-baseline gap-1",children:o.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:U(_,0,"g")})})]}),o.jsxs("div",{className:"flex flex-col gap-1.5",children:[o.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),o.jsx("div",{className:"flex items-baseline gap-1",children:o.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(P.total)||0)-(Number(_)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:U((Number(P.total)||0)-(Number(_)||0),1,"g")})})]})]})]})}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),o.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:T=>{const V=parseFloat(T.target.value);b("doughBalls",Math.round(V))}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),o.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:T=>{const V=parseFloat(T.target.value);if(t==="grams"){const Z=j*y/100;let ie=V>0?Math.round(Z/V):1;ie<1&&(ie=1);const ce=Math.round(Z/ie);r(ge=>({...ge,ballWeight:ce,doughBalls:ie}))}else b("ballWeight",Math.round(V))}})]})]})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),o.jsx(n9,{value:n.prefermentType,onChange:T=>b("prefermentType",T),data:n.preferment,onDataChange:D,inputMode:t,flourWeight:j})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&o.jsx(sr,{label:"Farinha Total",value:w.flour,onChange:k,unit:"g"}),o.jsx(sr,{label:"gua",value:t==="grams"?w.water:n.water,onChange:T=>O("water",T),unit:t==="grams"?"g":"%"}),o.jsx(sr,{label:"Sal",value:t==="grams"?w.salt:n.salt,onChange:T=>O("salt",T),unit:t==="grams"?"g":"%"}),o.jsx(sr,{label:"Azeite",value:t==="grams"?w.oliveOil:n.oliveOil,onChange:T=>O("oliveOil",T),unit:t==="grams"?"g":"%"}),o.jsx(sr,{label:"Acar",value:t==="grams"?w.sugar:n.sugar,onChange:T=>O("sugar",T),unit:t==="grams"?"g":"%"}),o.jsx(sr,{label:"leo",value:t==="grams"?w.oil:n.oil,onChange:T=>O("oil",T),unit:t==="grams"?"g":"%"}),o.jsx(sr,{label:"Leite",value:t==="grams"?w.milk:n.milk,onChange:T=>O("milk",T),unit:t==="grams"?"g":"%"}),o.jsx(sr,{label:"Manteiga",value:t==="grams"?w.butter:n.butter,onChange:T=>O("butter",T),unit:t==="grams"?"g":"%"}),o.jsx(sr,{label:"Malte",value:t==="grams"?w.diastatic:n.diastatic,onChange:T=>O("diastatic",T),unit:t==="grams"?"g":"%"})]})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),o.jsx(t9,{value:n.yeastSelection,onChange:T=>b("yeastSelection",T),data:n.yeastType,onDataChange:L,inputMode:t,flourWeight:j})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),o.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:T=>b("RT_h",parseFloat(T.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),o.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:T=>b("RT_C",parseFloat(T.target.value))})]})]})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),o.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),o.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:T=>b("CT_h",parseFloat(T.target.value))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),o.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:T=>b("CT_C",parseFloat(T.target.value))})]})]})]}),n.prefermentType!=="None"&&de&&o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),o.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:U(de.pct,1,"%")})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(me,0,"g")})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(pe,0,"g")})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(H,0,"g")})]})]}),(typeof de.yeastPct<"u"||typeof de.inoculationPct<"u"||typeof de.time_h<"u"||typeof de.temp_C<"u")&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof de.yeastPct<"u"&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),o.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(me*(Number(de.yeastPct)||0)/100,2,"g")})]}),typeof de.inoculationPct<"u"&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),o.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(de.inoculationPct,1,"%")})]}),typeof de.time_h<"u"&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),o.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(de.time_h,0,"h")})]}),typeof de.temp_C<"u"&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),o.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(de.temp_C,0,"C")})]})]})]})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),o.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[J(P.flour)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.flour-me,0,"g")})]}),J(P.water)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.water-pe,0,"g")})]}),n.prefermentType!=="None"&&de&&o.jsxs("div",{children:[o.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(H,0,"g")})]}),J(P.salt)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.salt,1,"g")})]}),J(P.sugar)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.sugar,1,"g")})]}),J(P.oliveOil)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.oliveOil,1,"g")})]}),J(P.oil)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.oil,1,"g")})]}),J(P.milk)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.milk,1,"g")})]}),J(P.butter)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.butter,1,"g")})]}),J(P.diastatic)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.diastatic,1,"g")})]}),J(P.yeast)&&o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),o.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.yeast,2,"g")})]})]}),o.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),o.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(P.total,0,"g")})]}),o.jsxs("div",{children:[o.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),o.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(I,1,"%")})]})]})]})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),o.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[o.jsx("button",{onClick:oe,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),o.jsx("button",{onClick:()=>{var T;return(T=a.current)==null?void 0:T.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),o.jsx("button",{onClick:K,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),o.jsx("button",{onClick:F,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),o.jsx("input",{ref:a,type:"file",accept:"application/json",className:"hidden",onChange:E})]}),o.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[o.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?o.jsxs("div",{className:"text-center py-10",children:[o.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),o.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):o.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([T])=>o.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[o.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:T}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>te(T),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),o.jsx("button",{onClick:()=>ue(T),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),o.jsx("button",{onClick:()=>fe(T),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},T))})]}),o.jsx(Ce,{children:d&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[o.jsx(x1,{}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:d.onCancel}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${d.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.type==="danger"?o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:d.title}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:d.message}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:d.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:d.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${d.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),o.jsx(Ce,{children:p&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[o.jsx(x1,{}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:p.onCancel}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:p.title}),o.jsx("input",{autoFocus:!0,defaultValue:p.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:p.placeholder,onKeyDown:T=>{T.key==="Enter"&&p.onConfirm(T.target.value)}}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:p.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:T=>{const V=T.target.closest(".relative").querySelector("input");p.onConfirm(V.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),o.jsx(Ce,{children:v&&bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${v.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":v.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${v.type==="error"?"bg-white animate-pulse":v.type==="success"?"bg-white":"bg-indigo-400"}`}),o.jsx("span",{className:"text-sm font-semibold tracking-tight",children:v.message})]}),document.body)})]})}function x1(){return pn(!0),null}const s9=10*1024*1024,o9=15e3,a9=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>s9){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const a=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},o9),l=new Image;l.onload=()=>{clearTimeout(a);try{const c=document.createElement("canvas");let d=l.width,h=l.height;d>e&&(h=e/d*h,d=e),c.width=d,c.height=h;const p=c.getContext("2d");if(!p){i(new Error("Falha ao criar contexto de imagem."));return}p.drawImage(l,0,0,d,h);const m=c.toDataURL("image/jpeg",n);if(!m||m==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(m)}catch(c){i(new Error("Erro ao processar imagem: "+c.message))}},l.onerror=()=>{clearTimeout(a),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t});var op=function(t,e){return op=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},op(t,e)};function l9(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");op(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var _t=function(){return _t=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_t.apply(this,arguments)};var y1=!1,Ei,ap,lp,bc,wc,FN,kc,cp,up,dp,BN,hp,fp,UN,$N;function Yt(){if(!y1){y1=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(hp=/\b(iPhone|iP[ao]d)/.exec(t),fp=/\b(iP[ao]d)/.exec(t),dp=/Android/i.exec(t),UN=/FBAN\/\w+;/i.exec(t),$N=/Mobile/i.exec(t),BN=!!/Win64/.exec(t),e){Ei=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Ei&&document&&document.documentMode&&(Ei=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);FN=r?parseFloat(r[1])+4:Ei,ap=e[2]?parseFloat(e[2]):NaN,lp=e[3]?parseFloat(e[3]):NaN,bc=e[4]?parseFloat(e[4]):NaN,bc?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),wc=e&&e[1]?parseFloat(e[1]):NaN):wc=NaN}else Ei=ap=lp=wc=bc=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);kc=i?parseFloat(i[1].replace("_",".")):!0}else kc=!1;cp=!!n[2],up=!!n[3]}else kc=cp=up=!1}}var pp={ie:function(){return Yt()||Ei},ieCompatibilityMode:function(){return Yt()||FN>Ei},ie64:function(){return pp.ie()&&BN},firefox:function(){return Yt()||ap},opera:function(){return Yt()||lp},webkit:function(){return Yt()||bc},safari:function(){return pp.webkit()},chrome:function(){return Yt()||wc},windows:function(){return Yt()||cp},osx:function(){return Yt()||kc},linux:function(){return Yt()||up},iphone:function(){return Yt()||hp},mobile:function(){return Yt()||hp||fp||dp||$N},nativeApp:function(){return Yt()||UN},android:function(){return Yt()||dp},ipad:function(){return Yt()||fp}},c9=pp,u9=!!(typeof window<"u"&&window.document&&window.document.createElement),d9={canUseDOM:u9},h9=d9,WN=h9,qN;WN.canUseDOM&&(qN=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function f9(t,e){if(!WN.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&qN&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var p9=f9,m9=c9,g9=p9,v1=10,b1=40,w1=800;function HN(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*v1,i=n*v1,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=b1,i*=b1):(r*=w1,i*=w1)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}HN.getEventType=function(){return m9.firefox()?"DOMMouseScroll":g9("wheel")?"wheel":"mousewheel"};var x9=HN,y9=x9;const v9=I1(y9);function b9(t,e,n,r,i,s){s===void 0&&(s=0);var a=no(t,e,s),l=a.width,c=a.height,d=Math.min(l,n),h=Math.min(c,r);return d>h*i?{width:h*i,height:h}:{width:d,height:d/i}}function w9(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function Bo(t,e,n,r,i){i===void 0&&(i=0);var s=no(e.width,e.height,i),a=s.width,l=s.height;return{x:k1(t.x,a,n.width,r),y:k1(t.y,l,n.height,r)}}function k1(t,e,n,r){var i=e*r/2-n/2;return ed(t,-i,i)}function _1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function N1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function k9(t,e,n,r,i,s,a){s===void 0&&(s=0),a===void 0&&(a=!0);var l=a?_9:N9,c=no(e.width,e.height,s),d=no(e.naturalWidth,e.naturalHeight,s),h={x:l(100,((c.width-n.width/i)/2-t.x/i)/c.width*100),y:l(100,((c.height-n.height/i)/2-t.y/i)/c.height*100),width:l(100,n.width/c.width*100/i),height:l(100,n.height/c.height*100/i)},p=Math.round(l(d.width,h.width*d.width/100)),m=Math.round(l(d.height,h.height*d.height/100)),v=d.width>=d.height*r,N=v?{width:Math.round(m*r),height:m}:{width:p,height:Math.round(p/r)},z=_t(_t({},N),{x:Math.round(l(d.width-N.width,h.x*d.width/100)),y:Math.round(l(d.height-N.height,h.y*d.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:z}}function _9(t,e){return Math.min(t,Math.max(0,e))}function N9(t,e){return e}function j9(t,e,n,r,i,s){var a=no(e.width,e.height,n),l=ed(r.width/a.width*(100/t.width),i,s),c={x:l*a.width/2-r.width/2-a.width*l*(t.x/100),y:l*a.height/2-r.height/2-a.height*l*(t.y/100)};return{crop:c,zoom:l}}function C9(t,e,n){var r=w9(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function E9(t,e,n,r,i,s){n===void 0&&(n=0);var a=no(e.naturalWidth,e.naturalHeight,n),l=ed(C9(t,e,r),i,s),c=r.height>r.width?r.height/t.height:r.width/t.width,d={x:((a.width-t.width)/2-t.x)*c,y:((a.height-t.height)/2-t.y)*c};return{crop:d,zoom:l}}function j1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function T9(t){return t*Math.PI/180}function no(t,e,n){var r=T9(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function ed(t,e,n){return Math.min(Math.max(t,e),n)}function Yl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var S9=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,z9=1,I9=3,A9=1,P9=function(t){l9(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=S.createRef(),n.imageRef=S.createRef(),n.videoRef=S.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=j9(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=i.crop,a=i.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(a)}else if(n.props.initialCroppedAreaPixels){var l=E9(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=l.crop,a=l.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(a)}},n.computeSizes=function(){var r,i,s,a,l,c,d=n.imageRef.current||n.videoRef.current;if(d&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,p=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,m=((s=n.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((a=n.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,v=d.offsetWidth<p||d.offsetHeight<m,N=p/m,z=void 0;if(v)switch(n.state.mediaObjectFit){default:case"contain":z=h>N?{width:n.containerRect.height*N,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/N};break;case"horizontal-cover":z={width:n.containerRect.width,height:n.containerRect.width/N};break;case"vertical-cover":z={width:n.containerRect.height*N,height:n.containerRect.height};break}else z={width:d.offsetWidth,height:d.offsetHeight};n.mediaSize=_t(_t({},z),{naturalWidth:p,naturalHeight:m}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var R=n.props.cropSize?n.props.cropSize:b9(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((l=n.state.cropSize)===null||l===void 0?void 0:l.height)!==R.height||((c=n.state.cropSize)===null||c===void 0?void 0:c.width)!==R.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(R),n.setState({cropSize:R},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(R),R}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),s=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(s,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var a=n.gestureRotationStart+r.rotation;n.props.onRotationChange(a)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,s,a=r.x,l=r.y;n.dragStartPosition={x:a,y:l},n.dragStartCrop=_t({},n.props.crop),(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i)},n.onDrag=function(r){var i=r.x,s=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||s===void 0)){var a=i-n.dragStartPosition.x,l=s-n.dragStartPosition.y,c={x:n.dragStartCrop.x+a,y:n.dragStartCrop.y+l},d=n.props.restrictPosition?Bo(c,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):c;n.props.onCropChange(d)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),s=v9(r).pixelY,a=n.props.zoom-s*n.props.zoomSpeed/200;n.setNewZoom(a,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=n.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=n.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},n.getPointOnContainer=function(r,i){var s=r.x,a=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(s-i.x),y:n.containerRect.height/2-(a-i.y)}},n.getPointOnMedia=function(r){var i=r.x,s=r.y,a=n.props,l=a.crop,c=a.zoom;return{x:(i+l.x)/c,y:(s+l.y)/c}},n.setNewZoom=function(r,i,s){var a=s===void 0?{}:s,l=a.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!n.state.cropSize||!n.props.onZoomChange)){var d=ed(r,n.props.minZoom,n.props.maxZoom);if(c){var h=n.getPointOnContainer(i,n.containerPosition),p=n.getPointOnMedia(h),m={x:p.x*d-h.x,y:p.y*d-h.y},v=n.props.restrictPosition?Bo(m,n.mediaSize,n.state.cropSize,d,n.props.rotation):m;n.props.onCropChange(v)}n.props.onZoomChange(d)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?Bo(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return k9(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,s),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.recomputeCropPosition=function(){var r,i;if(n.state.cropSize){var s=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((i=n.previousCropSize)===null||i===void 0)&&i.height)){var a=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(a){var l=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;s={x:n.props.crop.x*l,y:n.props.crop.y*c}}}var d=n.props.restrictPosition?Bo(s,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):s;n.previousCropSize=n.state.cropSize,n.props.onCropChange(d),n.emitCropData()}},n.onKeyDown=function(r){var i,s,a=n.props,l=a.crop,c=a.onCropChange,d=a.keyboardStep,h=a.zoom,p=a.rotation,m=d;if(n.state.cropSize){r.shiftKey&&(m*=.2);var v=_t({},l);switch(r.key){case"ArrowUp":v.y-=m,r.preventDefault();break;case"ArrowDown":v.y+=m,r.preventDefault();break;case"ArrowLeft":v.x-=m,r.preventDefault();break;case"ArrowRight":v.x+=m,r.preventDefault();break;default:return}n.props.restrictPosition&&(v=Bo(v,n.mediaSize,n.state.cropSize,h,p)),r.repeat||(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i),c(v)}},n.onKeyUp=function(r){var i,s;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(s=(i=n.props).onInteractionEnd)===null||s===void 0||s.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=S9,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,s,a,l,c,d,h,p;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((s=n.cropSize)===null||s===void 0?void 0:s.width)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.width)?this.computeSizes():(((l=n.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=n.crop)===null||d===void 0?void 0:d.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((p=this.videoRef.current)===null||p===void 0||p.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,s;if(this.props.objectFit==="cover"){var a=this.imageRef.current||this.videoRef.current;if(a&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,d=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,h=c/d;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=_1(r,i),this.lastPinchRotation=N1(r,i),this.onDragStart(j1(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]),a=j1(i,s);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=_1(i,s),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,a,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var d=N1(i,s),h=r.props.rotation+(d-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=d})}},e.prototype.render=function(){var n=this,r,i=this.props,s=i.image,a=i.video,l=i.mediaProps,c=i.cropperProps,d=i.transform,h=i.crop,p=h.x,m=h.y,v=i.rotation,N=i.zoom,z=i.cropShape,R=i.showGrid,w=i.roundCropAreaPixels,x=i.style,b=x.containerStyle,D=x.cropAreaStyle,L=x.mediaStyle,O=i.classes,k=O.containerClassName,y=O.cropAreaClassName,_=O.mediaClassName,j=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return S.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(P){return n.containerRef=P},"data-testid":"container",style:b,className:Yl("reactEasyCrop_Container",k)},s?S.createElement("img",_t({alt:"",className:Yl("reactEasyCrop_Image",j==="contain"&&"reactEasyCrop_Contain",j==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",j==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{src:s,ref:this.imageRef,style:_t(_t({},L),{transform:d||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(v,"deg) scale(").concat(N,")")}),onLoad:this.onMediaLoad})):a&&S.createElement("video",_t({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Yl("reactEasyCrop_Video",j==="contain"&&"reactEasyCrop_Contain",j==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",j==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:_t(_t({},L),{transform:d||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(v,"deg) scale(").concat(N,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(A){return S.createElement("source",_t({key:A.src},A))})),this.state.cropSize&&S.createElement("div",_t({ref:this.cropperRef,style:_t(_t({},D),{width:w?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:w?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Yl("reactEasyCrop_CropArea",z==="round"&&"reactEasyCrop_CropAreaRound",R&&"reactEasyCrop_CropAreaGrid",y)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:I9,minZoom:z9,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:A9},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(S.Component);const R9=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",i=>n(i)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function GN(t){return t*Math.PI/180}function D9(t,e,n){const r=GN(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function V9(t,e,n=0,r={horizontal:!1,vertical:!1}){const i=await R9(t),s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return null;const l=GN(n),{width:c,height:d}=D9(i.width,i.height,n);s.width=c,s.height=d,a.translate(c/2,d/2),a.rotate(l),a.scale(r.horizontal?-1:1,r.vertical?-1:1),a.translate(-i.width/2,-i.height/2),a.drawImage(i,0,0);const h=a.getImageData(e.x,e.y,e.width,e.height);return s.width=e.width,s.height=e.height,a.putImageData(h,0,0),s.toDataURL("image/jpeg",.9)}const M9=()=>{const[t,e]=S.useState(null),n=S.useRef(null),r=S.useCallback((a,l="error")=>{n.current&&clearTimeout(n.current),e({message:a,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),i=S.useMemo(()=>({error:a=>r(a,"error"),success:a=>r(a,"success"),info:a=>r(a,"info")}),[r]),s=t?bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),o.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:i,ToastUI:s}},at={Camera:()=>o.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:t=>o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>o.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>o.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},L9=({src:t,onClose:e})=>(pn(!0),bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[o.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:o.jsx(at.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),o.jsx(ee.img,{src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:n=>n.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body)),O9=({imageSrc:t,onCancel:e,onCropComplete:n})=>{const[r,i]=S.useState({x:0,y:0}),[s,a]=S.useState(1),[l,c]=S.useState(null),[d,h]=S.useState(!1);pn(!0);const p=(v,N)=>{c(N)},m=async()=>{try{const v=await V9(t,l);n(v)}catch(v){console.error(v)}};return bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black flex flex-col",children:[o.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[20001] px-6 py-12 flex justify-between items-center bg-gradient-to-b from-black/80 via-black/40 to-transparent pointer-events-none",children:[o.jsx("button",{onClick:e,className:"pointer-events-auto px-5 py-2.5 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/10 text-white text-sm font-semibold transition-all active:scale-95",children:"Cancelar"}),o.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest opacity-80 mt-1",children:"Redimensionar"}),o.jsx("button",{onClick:m,className:"pointer-events-auto px-6 py-2.5 rounded-full bg-white text-black text-sm font-bold transition-all hover:bg-zinc-100 active:scale-95 shadow-[0_4px_24px_rgba(255,255,255,0.2)]",children:"OK"})]}),o.jsx("div",{className:"relative flex-1 bg-black",children:o.jsx(P9,{image:t,crop:r,zoom:s,aspect:4/5,onCropChange:i,onZoomChange:a,onCropComplete:p,showGrid:d,onInteractionStart:()=>h(!0),onInteractionEnd:()=>h(!1),classes:{containerClassName:"bg-black",mediaClassName:"object-contain",cropAreaClassName:"border border-white/40 shadow-[0_0_0_1000px_rgba(0,0,0,0.7)]"}})}),o.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[20001] px-8 py-16 flex flex-col items-center bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none",children:[o.jsxs("div",{className:"w-full max-w-xs flex items-center gap-6 pointer-events-auto",children:[o.jsx("button",{onClick:()=>a(Math.max(1,s-.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:o.jsx(at.Camera,{className:"w-4 h-4"})}),o.jsx("input",{type:"range",value:s,min:1,max:3,step:.01,onChange:v=>a(parseFloat(v.target.value)),className:"range-slider accent-white"}),o.jsx("button",{onClick:()=>a(Math.min(3,s+.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:o.jsx(at.Plus,{className:"w-4 h-4"})})]}),o.jsx("div",{className:"mt-8 flex gap-1 items-center opacity-30 select-none",children:[1,1.5,2,2.5,3].map(v=>o.jsx("div",{className:`w-1 h-3 rounded-full transition-all duration-300 ${s>=v?"bg-white h-5 opacity-100":"bg-white/40"}`},v))})]}),o.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/20 rounded-full z-[20002]"})]}),document.body)},F9=({id:t,children:e})=>{const n=B0();return o.jsx(Mu,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},B9=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,s]=S.useState(""),[a,l]=S.useState(null),[c,d]=S.useState(""),[h,p]=S.useState(null),[m,v]=S.useState(null),[N,z]=S.useState(!1),R=S.useRef(null);pn(!0);const w=["#FF3B30","#FF9500","#FFCC00","#34C759","#00C7BE","#007AFF","#5856D6","#AF52DE","#FF2D55","#8E8E93"],x=y=>typeof y=="string"?{name:y,color:"#007AFF"}:{name:y.name||"Sem nome",color:y.color||"#007AFF"},b=()=>{const y=i.trim();!y||t.some(j=>Wt(j)===y)||(n([...t,{name:y,color:"#007AFF"}]),s(""))},D=y=>{const _=c.trim(),j=Wt(y);if(!_||_===j){l(null);return}if(t.some(P=>Wt(P)===_)){l(null);return}r(j,_),n(t.map(P=>{const I=x(P);return I.name===j?{...I,name:_}:I})),l(null)},L=(y,_)=>{const j=Wt(y);n(t.map(A=>{const P=x(A);return P.name===j?{...P,color:_}:P})),v(null)},O=y=>{const _=Wt(y);n(t.filter(j=>Wt(j)!==_)),r(_,"Outros"),p(null)},k=(y,_)=>{z(!1),(_.offset.y>100||_.velocity.y>500)&&e()};return bt.createPortal(o.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-stretch md:items-center justify-center",children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:e}),o.jsxs(ee.div,{ref:R,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:.8},drag:window.innerWidth>=768?"y":!1,dragConstraints:{top:0,bottom:0},dragElastic:{top:0,bottom:.7},onDragStart:()=>z(!0),onDragEnd:k,className:"relative w-full h-full md:h-auto md:max-w-md md:max-h-[80vh] bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-[0_-10px_60px_rgba(0,0,0,0.25)] dark:shadow-[0_-10px_60px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",style:{paddingTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[o.jsx("div",{className:"flex justify-center pt-3 pb-2 shrink-0 cursor-grab active:cursor-grabbing md:hidden touch-manipulation",children:o.jsx(ee.div,{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600",animate:{scale:N?1.1:1,backgroundColor:N?"#007AFF":void 0},transition:{duration:.15}})}),o.jsxs("div",{className:"flex items-center justify-between px-6 pt-4 md:pt-6 pb-4 shrink-0",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-[22px] font-bold text-zinc-900 dark:text-white tracking-tight leading-tight",children:"Categorias"}),o.jsx("p",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400 mt-0.5",children:"Organize suas receitas"})]}),o.jsx("button",{onClick:e,className:"w-12 h-12 -mr-2 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"px-6 pb-5 shrink-0",children:o.jsxs("div",{className:"flex gap-3",children:[o.jsx("div",{className:"flex-1 relative",children:o.jsx("input",{type:"text",value:i,onChange:y=>s(y.target.value),onKeyDown:y=>y.key==="Enter"&&b(),className:"w-full h-12 px-4 rounded-xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[16px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Nova categoria..."})}),o.jsx("button",{onClick:b,disabled:!i.trim(),className:"w-12 h-12 flex items-center justify-center bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation shadow-lg shadow-blue-500/25",children:o.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),o.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-6"}),o.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-4 py-4",children:t.length===0?o.jsxs("div",{className:"text-center py-12",children:[o.jsx("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),o.jsx("p",{className:"text-[15px] font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhuma categoria ainda"})]}):o.jsx("div",{className:"space-y-2",children:t.map((y,_)=>{const{name:j,color:A}=x(y),P=j+_;return o.jsxs(ee.div,{layout:!0,className:"group relative",children:[o.jsxs("div",{className:"flex items-center gap-3 py-3 px-3 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[o.jsx("button",{onClick:()=>v(m===P?null:P),className:"w-12 h-12 rounded-xl flex items-center justify-center touch-manipulation hover:bg-white dark:hover:bg-zinc-700 transition-colors active:scale-95",children:o.jsx("div",{className:"w-7 h-7 rounded-full shadow-sm transition-transform hover:scale-110",style:{backgroundColor:A}})}),o.jsx("div",{className:"flex-1 min-w-0",children:a===P?o.jsx("input",{autoFocus:!0,value:c,onChange:I=>d(I.target.value),onBlur:()=>D(y),onKeyDown:I=>{I.key==="Enter"&&D(y),I.key==="Escape"&&l(null)},className:"w-full h-10 px-3 -ml-3 bg-white dark:bg-zinc-700 rounded-lg outline-none text-[16px] font-semibold text-zinc-900 dark:text-white ring-2 ring-blue-500"}):o.jsx("button",{onClick:()=>{l(P),d(j)},className:"text-left w-full py-2 text-[16px] font-semibold text-zinc-900 dark:text-white truncate touch-manipulation",children:j})}),o.jsx("button",{onClick:()=>p(y),className:"w-12 h-12 flex items-center justify-center rounded-xl text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all active:scale-95 touch-manipulation",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),o.jsx(Ce,{children:m===P&&o.jsxs(o.Fragment,{children:[o.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:30},className:"md:hidden fixed inset-x-0 bottom-0 z-[80] bg-white dark:bg-zinc-800 rounded-t-3xl shadow-[0_-20px_60px_rgba(0,0,0,0.3)] p-6",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 24px)"},children:[o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600"})}),o.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white text-center mb-5",children:"Escolha uma Cor"}),o.jsx("div",{className:"grid grid-cols-5 gap-4 mb-6",children:w.map(I=>o.jsx("button",{onClick:()=>L(y,I),className:`aspect-square rounded-full transition-all active:scale-90 touch-manipulation ${A===I?"ring-[3px] ring-offset-4 ring-offset-white dark:ring-offset-zinc-800 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:I}},I))}),o.jsx("button",{onClick:()=>v(null),className:"w-full h-14 bg-zinc-100 dark:bg-zinc-700 rounded-2xl text-[17px] font-semibold text-zinc-900 dark:text-white active:bg-zinc-200 dark:active:bg-zinc-600 transition-colors touch-manipulation",children:"Fechar"})]}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 z-[75] bg-black/40",onClick:()=>v(null)}),o.jsx(ee.div,{initial:{opacity:0,scale:.95,y:-8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-8},transition:{duration:.15},className:"hidden md:block absolute left-3 top-full mt-2 z-[80] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:o.jsx("div",{className:"grid grid-cols-5 gap-2",children:w.map(I=>o.jsx("button",{onClick:()=>L(y,I),className:`w-8 h-8 rounded-full transition-all hover:scale-110 active:scale-95 ${A===I?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:I}},I))})})]})})]},P)})})}),o.jsx(Ce,{children:h&&o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:o.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:"w-full max-w-[280px] bg-white/95 dark:bg-zinc-800/95 backdrop-blur-xl rounded-[20px] overflow-hidden shadow-2xl",children:[o.jsxs("div",{className:"p-6 text-center",children:[o.jsx("div",{className:"w-14 h-14 bg-rose-100 dark:bg-rose-900/40 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),o.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 leading-relaxed",children:['"',Wt(h),'" ser removida. Receitas sero movidas para "Outros".']})]}),o.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:o.jsx("button",{onClick:()=>p(null),className:"w-full h-12 text-[17px] font-normal text-blue-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors touch-manipulation",children:"Cancelar"})}),o.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:o.jsx("button",{onClick:()=>O(h),className:"w-full h-12 text-[17px] font-semibold text-rose-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors active:bg-rose-50 dark:active:bg-rose-900/20 touch-manipulation",children:"Excluir"})})]})})})]})]}),document.body)},U9=jn.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:i})=>{const s=B0(),[a,l]=S.useState(!1);return o.jsx(Mu,{value:t,dragListener:i,dragControls:s,className:`group relative mb-2 transition-all duration-300 ease-out ${i?"":"cursor-pointer"}`,onClick:()=>!i&&l(!a),children:o.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${i?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":a?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[i&&o.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:c=>s.start(c),children:o.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[o.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),o.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),o.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!i&&o.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${a?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:a&&o.jsx(at.Check,{className:"w-3 h-3 text-white"})}),i?o.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:c=>e({...t,name:c.target.value}),onKeyDown:c=>{if(c.key==="Enter"){c.preventDefault();const d=document.getElementById(`ing-qty-${t.id}`);d&&d.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):o.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${a?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),o.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[i?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:o.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:c=>{const d=c.target.value;(d===""||/^[0-9.,]*$/.test(d))&&e({...t,quantity:d})},onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),o.jsx("select",{value:t.unit,onChange:c=>e({...t,unit:c.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(c=>o.jsx("option",{value:c,children:c},c))})]}):o.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${a?"opacity-50":""}`,children:[o.jsx("span",{children:t.quantity}),o.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),i&&o.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),$9=jn.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i,isEditing:s})=>{const a=B0(),[l,c]=S.useState(!1);return o.jsx(Mu,{value:t,dragListener:s,dragControls:a,className:`group relative mb-2 transition-all duration-300 ease-out ${s?"":"cursor-pointer"}`,onClick:()=>!s&&c(!l),children:o.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${s?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[s&&o.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:d=>a.start(d),children:o.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[o.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),o.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),o.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),o.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),o.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!s&&l?o.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:o.jsx(at.Check,{className:"w-3 h-3 text-white"})}):o.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),s?o.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:d=>n({...t,text:d.target.value}),onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:d=>{d.target.style.height="auto",d.target.style.height=d.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):o.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),s&&o.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),Wt=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",C1=(t,e)=>{const n=t.find(r=>Wt(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function W9(){const{toast:t,ToastUI:e}=M9(),[n,r]=S.useState([]),[i,s]=S.useState(["Tradicionais","Especiais","Veganas","Doces"]),[a,l]=S.useState(null),[c,d]=S.useState(!1),[h,p]=S.useState("Todas"),[m,v]=S.useState(!0),[N,z]=S.useState(null),[R,w]=S.useState(null),[x,b]=S.useState(null),[D,L]=S.useState(!1),[O,k]=S.useState(!1),[y,_]=S.useState(!1),[j,A]=S.useState(!1),[P,I]=S.useState(null),we=S.useRef(null);S.useRef(null);const de=S.useRef({}),me=S.useRef({});S.useEffect(()=>{let E=!0;return(async()=>{try{const U=await Ae.getRecipesV3();if(!E)return;Array.isArray(U)&&U.length>0?r(U.map(J=>{let T=Array.isArray(J.sections)?J.sections:[];return T.length===0&&(Array.isArray(J.ingredientSections)||Array.isArray(J.instructionSections))&&(T=[...Array.isArray(J.ingredientSections)?J.ingredientSections.map(V=>({...V,type:"ingredients"})):[],...Array.isArray(J.instructionSections)?J.instructionSections.map(V=>({...V,type:"instructions"})):[]]),T.length>0&&(T=T.map(V=>({...V,items:Array.isArray(V.items)?V.items.filter(W=>{var Z,ie,ce;return V.type==="ingredients"?((Z=W.name)==null?void 0:Z.trim())||((ie=W.quantity)==null?void 0:ie.trim()):(ce=W.text)==null?void 0:ce.trim()}):[]}))),{id:String(J.id),name:J.name||"Sem nome",category:J.category||"Outros",prepTime:J.prepTime??0,cookTime:J.cookTime??0,temperature:J.temperature??180,image:J.image||null,sections:T,createdAt:J.createdAt||new Date().toISOString(),updatedAt:J.updatedAt||new Date().toISOString()}})):r([])}catch{E&&r([])}try{const U=await Ae.getRecipeCategories();E&&U&&Array.isArray(U)&&s(U)}catch{}E&&(v(!1),z(null))})(),()=>{E=!1}},[]),S.useEffect(()=>{if(m)return;const E=setTimeout(()=>{Ae.syncRecipeCategories(i)},1e3);return()=>clearTimeout(E)},[i,m]);const pe=(E,F)=>{const U=String(E);k(!0),_(!1),r(J=>J.map(T=>String(T.id)===U?{...T,...F,updatedAt:new Date().toISOString()}:T)),de.current[U]={...de.current[U]||{},...F,updatedAt:new Date().toISOString()},me.current[U]&&clearTimeout(me.current[U]),me.current[U]=setTimeout(async()=>{const J=de.current[U];if(!J){k(!1);return}delete de.current[U],delete me.current[U];try{await Ae.syncRecipeV3(U,J,!0)||_(!0)}catch{_(!0)}finally{Object.keys(de.current).length===0&&k(!1)}},1200)},H=E=>{const F=E.target.files[0];if(!F)return;if(!a){t.error("Nenhuma receita selecionada.");return}const U=new FileReader;U.onload=()=>{I(U.result)},U.readAsDataURL(F),E.target.value=null},oe=async E=>{try{A(!0),I(null);const F=await a9(E);pe(a,{image:F}),t.success("Imagem atualizada!")}catch(F){console.error(F),t.error("Erro ao processar imagem.")}finally{A(!1)}},te=async E=>{const F=String(E);b(null),r(U=>U.filter(J=>String(J.id)!==F)),String(a)===F&&l(null);try{if(!await Ae.deleteRecipeV3(F))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},fe=S.useMemo(()=>n.filter(E=>h==="Todas"||E.category===h),[n,h]),ue=S.useMemo(()=>n.find(E=>String(E.id)===String(a)),[n,a]),K=S.useCallback(()=>{if(ue&&ue.sections){const E=ue.sections.map(F=>F.type==="ingredients"?{...F,items:(F.items||[]).filter(U=>U.name.trim()||U.quantity.trim())}:F.type==="instructions"?{...F,items:(F.items||[]).filter(U=>U.text.trim())}:F);pe(a,{sections:E})}d(!1)},[ue,a,pe]);return m?o.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):N?o.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:o.jsxs("div",{className:"text-center max-w-sm",children:[o.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:N}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):o.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[o.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),o.jsx(Ce,{children:!a&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),o.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${y?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":O?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[o.jsx("div",{className:`w-1 h-1 rounded-full ${y?"bg-rose-500":O?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:y?"Erro de Sync":O?"Sincronizando":"Cloud Active"})]})]}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),o.jsxs("button",{onClick:()=>{const E=String(Date.now()),F={id:E,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([F,...n]),l(E),d(!0),Ae.syncRecipeV3(E,F)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[o.jsx(at.Plus,{}),"Criar Nova Receita"]})]}),o.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:o.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...i].map(E=>o.jsx("button",{onClick:()=>p(Wt(E)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===Wt(E)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:Wt(E)},Wt(E))),o.jsx("button",{onClick:()=>L(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:o.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[fe.map(E=>o.jsxs(ee.div,{onClick:()=>{l(E.id),d(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[o.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[E.image?o.jsx(ee.img,{src:E.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):o.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),o.jsx("div",{className:"absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/5 via-transparent to-transparent animate-[spin_20s_linear_infinite] opacity-60"}),o.jsx("div",{className:"absolute bottom-[-50%] right-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/5 via-transparent to-transparent animate-[spin_25s_linear_infinite_reverse] opacity-60"}),o.jsx(ee.div,{animate:{opacity:[.2,.5,.2]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent"}),o.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:o.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:o.jsx(at.Camera,{})})})]}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),o.jsx("button",{onClick:F=>{F.stopPropagation(),b({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${E.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{te(E.id)},onCancel:()=>b(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:o.jsx(at.Trash,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"px-2 pb-4",children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${C1(i,E.category)}15`,color:C1(i,E.category)},children:E.category}),o.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsx(at.Clock,{}),E.prepTime+E.cookTime,"m"]}),E.temperature>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),E.temperature,""]})]})]})]}),o.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:E.name}),o.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(E.sections||[]).filter(F=>F.type==="ingredients").reduce((F,U)=>{var J;return F+(((J=U.items)==null?void 0:J.length)||0)},0)," ingredientes"]})]})]},E.id)),fe.length===0&&o.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[o.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),o.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:o.jsx(at.Book,{})})]}),o.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),o.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",o.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&bt.createPortal(o.jsx(Ce,{children:a&&ue&&o.jsx(ee.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:we,children:ue?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[o.jsx("div",{className:"flex-1 flex justify-start",children:o.jsx("button",{onClick:()=>{const E=(ue.sections||[]).map(F=>({...F,items:F.items.filter(U=>{var J,T,V;return F.type==="ingredients"?((J=U.name)==null?void 0:J.trim())||((T=U.quantity)==null?void 0:T.trim()):(V=U.text)==null?void 0:V.trim()})}));pe(a,{sections:E}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:o.jsx(at.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),o.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${y?"text-rose-500":O?"text-zinc-400":"text-zinc-300"}`,children:y?"Falha":O?"Sincronizando...":"Salvo"}),o.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[o.jsx("button",{onClick:()=>c?K():d(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${c?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:c?"Concludo":"Editar"}),o.jsx("button",{onClick:()=>{b({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{te(a)},onCancel:()=>b(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:o.jsx(at.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),o.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[o.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[o.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:ue.image?o.jsxs(o.Fragment,{children:[o.jsx(ee.img,{src:ue.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>w(ue.image)}),o.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:H,disabled:j}),j?o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):o.jsx(at.Camera,{className:"w-5 h-5"})]})]}):o.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[o.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:H}),o.jsx(at.Camera,{}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),o.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(E=>o.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[o.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:E.label}),o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("input",{value:ue[E.val],onChange:F=>pe(a,{[E.val]:F.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),E.unit&&o.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:E.unit})]})]},E.label))})]}),o.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[o.jsxs("div",{className:"space-y-4 md:space-y-6",children:[o.jsx("div",{className:"flex items-center gap-4",children:o.jsx("select",{value:ue.category,onChange:E=>pe(a,{category:E.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:i.map(E=>o.jsx("option",{value:Wt(E),children:Wt(E)},Wt(E)))})}),o.jsx("textarea",{value:ue.name,onChange:E=>pe(a,{name:E.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:E=>{E.target.style.height="auto",E.target.style.height=E.target.scrollHeight+"px"}})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[o.jsxs("button",{disabled:!c,onClick:()=>pe(a,{sections:[...ue.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),o.jsxs("button",{disabled:!c,onClick:()=>pe(a,{sections:[...ue.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[o.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),o.jsx(Vu,{axis:"y",values:ue.sections||[],onReorder:E=>pe(a,{sections:E}),className:"space-y-6",children:(ue.sections||[]).map(E=>o.jsx(F9,{id:E,children:F=>o.jsx(H9,{section:E,onUpdate:U=>pe(a,{sections:ue.sections.map(J=>J.id===E.id?U:J)}),onDelete:()=>pe(a,{sections:ue.sections.filter(U=>U.id!==E.id)}),dragControls:F,isEditing:c})},E.id))}),o.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:o.jsx("button",{onClick:()=>b({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{te(a)},onCancel:()=>b(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),D&&o.jsx(B9,{categories:i,onClose:()=>L(!1),onUpdate:s,onRenameCategory:(E,F)=>{n.filter(U=>U.category===E).forEach(U=>{pe(U.id,{category:F})})}},"recipe-cat-modal"),o.jsx(Ce,{children:R&&o.jsx(L9,{src:R,onClose:()=>w(null)})}),typeof document<"u"&&bt.createPortal(o.jsx(Ce,{mode:"wait",children:x&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[o.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:x.onCancel}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[o.jsx(q9,{}),o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${x.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:o.jsx(at.Trash,{})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:x.title}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:x.message}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:x.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:x.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${x.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),o.jsx(Ce,{children:P&&o.jsx(O9,{imageSrc:P,onCancel:()=>I(null),onCropComplete:oe})}),e]})}function q9(){return pn(!0),null}function H9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){return t.type==="ingredients"?o.jsx(G9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):t.type==="instructions"?o.jsx(K9,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):null}function G9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=jn.useRef(null),a=jn.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],c]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const d=document.getElementById(`ing-name-${l}`);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.focus())})})},[t,e]);return o.jsxs("div",{ref:s,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:o.jsx(at.Bars,{className:"w-5 h-5"})}),o.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),i?o.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):o.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&o.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:o.jsx(at.Trash,{})})]}),o.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:o.jsx(Vu,{axis:"y",values:t.items,onReorder:l=>i&&e({...t,items:l}),children:t.items.map(l=>o.jsx(U9,{item:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===l.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==l.id)}),onNext:()=>{l.name.trim()&&a()},isEditing:i},l.id))})}),i&&o.jsxs("button",{type:"button",onClick:a,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[o.jsx(at.Plus,{})," Adicionar Ingrediente"]})]})}function K9({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=jn.useCallback(()=>{const a=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:a,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const c=document.getElementById(`instr-text-${a}`);c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.focus())})})},[t,e]);return o.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[o.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[o.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:a=>r.start(a),children:o.jsx(at.Bars,{className:"w-5 h-5"})}),o.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),i?o.jsx("input",{value:t.title,onChange:a=>e({...t,title:a.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):o.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&o.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:o.jsx(at.Trash,{})})]}),o.jsx(Vu,{axis:"y",values:t.items,onReorder:a=>i&&e({...t,items:a}),className:"space-y-3",children:t.items.map((a,l)=>o.jsx($9,{item:a,index:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===a.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==a.id)}),onNext:()=>{a.text.trim()&&s()},isEditing:i},a.id))}),i&&o.jsxs("button",{type:"button",onClick:s,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[o.jsx(at.Plus,{})," Adicionar Passo"]})]})}const E1="padoca_kanban_pro_max",Uo={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},Q9=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],T1={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},Pm=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function Y9(){var J;const[t,e]=S.useState(()=>{try{const T=localStorage.getItem(E1);return T?JSON.parse(T):T1}catch{return T1}}),[n,r]=S.useState(null),[i,s]=S.useState(!1),[a,l]=S.useState(""),[c,d]=S.useState(0),[h,p]=S.useState(null),[m,v]=S.useState(""),[N,z]=S.useState(null),[R,w]=S.useState(""),[x,b]=S.useState(null),[D,L]=S.useState(!1),[O,k]=S.useState(null),y=S.useRef(null);S.useCallback((T,V="success")=>{y.current&&clearTimeout(y.current),k({message:T,type:V}),y.current=setTimeout(()=>k(null),3500)},[]);const[_,j]=S.useState({active:null,target:null,isDragging:!1}),A=Zc(0),P=Zc(0),I=S.useRef(null),we=4,de=S.useRef(null),me=S.useRef(null),pe=S.useRef({colId:null,index:null}),H=S.useCallback((T="light")=>{navigator.vibrate&&navigator.vibrate(T==="light"?8:T==="medium"?15:25)},[]),oe=S.useCallback((T,V,W)=>{const ie=document.elementsFromPoint(T,V).find(Me=>Me.hasAttribute("data-column-id"));if(!ie)return null;const ce=ie.getAttribute("data-column-id"),ge=ie.querySelector("[data-cards-container]");if(!ge)return{colId:ce,index:0};const Re=Array.from(ge.querySelectorAll("[data-card-id]")).filter(Me=>Me.getAttribute("data-card-id")!==W);if(Re.length===0)return{colId:ce,index:0};for(let Me=0;Me<Re.length;Me++){const Ie=Re[Me].getBoundingClientRect(),sn=Ie.top+Ie.height/2;if(V<sn)return{colId:ce,index:Me}}return{colId:ce,index:Re.length}},[]);S.useEffect(()=>{const T=W=>{const Z=I.current;if(Z&&!_.isDragging){const ie=W.clientX-Z.startX,ce=W.clientY-Z.startY;if(Math.sqrt(ie*ie+ce*ce)>we){const{card:Re,colId:Me,rect:Ie,offsetX:sn,offsetY:Oe,cardIndex:Ge}=Z;A.set(Ie.left),P.set(Ie.top),j({active:{id:Re.id,sourceColId:Me,sourceIndex:Ge,data:Re,rect:Ie,offsetX:sn,offsetY:Oe},target:{colId:Me,index:Ge},isDragging:!0}),H("medium")}return}if(_.isDragging&&_.active){W.preventDefault();const ie=W.clientX-_.active.offsetX,ce=W.clientY-_.active.offsetY;if(A.set(ie),P.set(ce),me.current)return;me.current=requestAnimationFrame(()=>{const ge=oe(W.clientX,W.clientY,_.active.id);if(me.current=null,ge){const Re=pe.current;(Re.colId!==ge.colId||Re.index!==ge.index)&&(pe.current=ge,H("light"),j(Me=>({...Me,target:ge})))}})}},V=W=>{if(me.current&&(cancelAnimationFrame(me.current),me.current=null),_.isDragging&&_.active){const{active:Z,target:ie}=_;document.body.style.cursor="";const ce=ie==null?void 0:ie.colId,ge=ie==null?void 0:ie.index;ce&&(Z.sourceColId!==ce||Z.sourceIndex!==ge)&&(e(Me=>{const Ie=Me.columns.map(mn=>({...mn,cards:[...mn.cards]})),sn=Ie.find(mn=>mn.id===Z.sourceColId),Oe=Ie.find(mn=>mn.id===ce);if(!sn||!Oe)return Me;const Ge=sn.cards.findIndex(mn=>mn.id===Z.id);if(Ge===-1)return Me;const[Cr]=sn.cards.splice(Ge,1);return Oe.cards.splice(ge,0,Cr),{...Me,columns:Ie}}),H("medium")),j({active:null,target:null,isDragging:!1}),pe.current={colId:null,index:null}}else if(I.current){const{card:Z,colId:ie}=I.current;r({...Z,columnId:ie})}I.current=null};return window.addEventListener("pointermove",T,{passive:!1}),window.addEventListener("pointerup",V),window.addEventListener("pointercancel",V),()=>{window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",V),window.removeEventListener("pointercancel",V),me.current&&cancelAnimationFrame(me.current)}},[_,oe,H,A,P]);const te=S.useCallback((T,V,W)=>{var ce;if(T.target.closest("button, input, textarea, [data-no-drag]")||T.button&&T.button!==0)return;const Z=T.currentTarget,ie=Z.getBoundingClientRect();I.current={card:V,colId:W,element:Z,rect:ie,startX:T.clientX,startY:T.clientY,offsetX:T.clientX-ie.left,offsetY:T.clientY-ie.top,cardIndex:((ce=t.columns.find(ge=>ge.id===W))==null?void 0:ce.cards.findIndex(ge=>ge.id===V.id))??0}},[t.columns]);S.useEffect(()=>{(async()=>{var V;try{const W=await((V=Ae.getKanban)==null?void 0:V.call(Ae));W!=null&&W.columns&&e(W)}catch{}finally{L(!0)}})()},[]),S.useEffect(()=>{if(localStorage.setItem(E1,JSON.stringify(t)),D){const T=setTimeout(()=>{var V;try{(V=Ae.syncKanban)==null||V.call(Ae,t)}catch{}},2e3);return()=>clearTimeout(T)}},[t,D]);const fe=S.useCallback(T=>{if(!m.trim())return;const V={id:`card - ${Date.now()} -${Math.random().toString(36).substr(2,9)} `,title:m.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(W=>({...W,columns:W.columns.map(Z=>Z.id===T?{...Z,cards:[...Z.cards,V]}:Z)})),v(""),p(null),H("light")},[m,H]),ue=S.useCallback(T=>{e(V=>({...V,columns:V.columns.map(W=>W.id===T.columnId?{...W,cards:W.cards.map(Z=>Z.id===T.id?T:Z)}:W)}))},[]),K=S.useCallback((T,V)=>{b({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(W=>({...W,columns:W.columns.map(Z=>Z.id===T?{...Z,cards:Z.cards.filter(ie=>ie.id!==V)}:Z)})),r(null),b(null),H("medium")},onCancel:()=>b(null)})},[H]),E=S.useCallback(()=>{a.trim()&&(e(T=>({...T,columns:[...T.columns,{id:`col - ${Date.now()} `,title:a.trim(),cards:[]}]})),l(""),s(!1),H("light"))},[a,H]),F=S.useCallback(T=>{if(!R.trim()){z(null);return}e(V=>({...V,columns:V.columns.map(W=>W.id===T?{...W,title:R.trim()}:W)})),z(null)},[R]),U=S.useCallback(T=>{b({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(V=>({...V,columns:V.columns.filter(W=>W.id!==T)})),b(null),H("medium")},onCancel:()=>b(null)})},[H]);return o.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[o.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:o.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),o.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${D?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[o.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${D?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:D?"Cloud Active":"Syncing"})]})]}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),o.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[o.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),o.jsxs("div",{ref:de,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[o.jsx(Ce,{mode:"popLayout",children:t.columns.map(T=>o.jsx(X9,{col:T,dragState:_,spring:Uo,zoomLevel:c,renamingColId:N,setRenamingColId:z,renameTitle:R,setRenameTitle:w,renameColumn:F,deleteColumn:U,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:v,addCard:fe,handleCardPointerDown:te},T.id))}),o.jsx(ee.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(!0),className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-lg hover:shadow-xl flex items-center justify-center text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-all",children:o.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),o.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:o.jsx(ee.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Uo.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:Pm.map((T,V)=>o.jsxs("button",{onClick:()=>{d(V),H("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${c===V?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[c===V&&o.jsx(ee.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),o.jsx("span",{className:"relative z-10",children:T.label})]},V))})}),o.jsx(Z9,{dragState:_,ghostX:A,ghostY:P,spring:Uo}),o.jsx(Ce,{children:n&&o.jsx(tD,{card:n,onClose:()=>r(null),onUpdate:ue,onDelete:()=>K(n.columnId,n.id),setConfirmModal:b})}),o.jsx(Ce,{children:x&&o.jsx(eD,{...x})}),bt.createPortal(o.jsx(Ce,{children:i&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{s(!1),l("")}}),o.jsxs(ee.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Uo.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 tracking-tight",children:"Nova Lista"}),o.jsx("input",{autoFocus:!0,value:a,onChange:T=>l(T.target.value),onKeyDown:T=>{T.key==="Enter"&&E(),T.key==="Escape"&&(s(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-6"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{s(!1),l("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),o.jsx("button",{onClick:E,disabled:!a.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Criar Lista"})]})]})]})}),document.body),bt.createPortal(o.jsx(Ce,{children:h&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{p(null),v("")}}),o.jsxs(ee.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Uo.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2 tracking-tight",children:"Novo Carto"}),o.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:(J=t.columns.find(T=>T.id===h))==null?void 0:J.title}),o.jsx("textarea",{autoFocus:!0,value:m,onChange:T=>v(T.target.value),onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),fe(h)),T.key==="Escape"&&(p(null),v(""))},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-6",rows:3}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:()=>{p(null),v("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),o.jsx("button",{onClick:()=>fe(h),disabled:!m.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Adicionar"})]})]})]})}),document.body),o.jsx(Ce,{children:O&&bt.createPortal(o.jsxs(ee.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${O.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":O.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${O.type==="error"?"bg-white animate-pulse":O.type==="success"?"bg-white":"bg-indigo-400"}`}),o.jsx("span",{className:"text-sm font-semibold tracking-tight",children:O.message})]}),document.body)})]})}const X9=jn.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:s,renameTitle:a,setRenameTitle:l,renameColumn:c,deleteColumn:d,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:v,addCard:N,handleCardPointerDown:z})=>{var w,x;const R=((w=e.target)==null?void 0:w.colId)===t.id;return o.jsxs(ee.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`flex-shrink-0 flex flex-col snap-center ${Pm[r].width} max-h-full rounded-[2rem] md:rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/60 dark:border-white/[0.06] shadow-xl shadow-black/[0.03] dark:shadow-black/20 transition-all duration-300 ${R?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}`,children:[o.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[o.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?o.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:a,onChange:b=>l(b.target.value),onBlur:()=>c(t.id),onKeyDown:b=>{b.key==="Enter"&&c(t.id),b.key==="Escape"&&s(null)}}):o.jsx("h3",{onClick:()=>{s(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),o.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),o.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[o.jsx(Ce,{mode:"popLayout",children:t.cards.map((b,D)=>o.jsx(J9,{card:b,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:z},b.id))}),o.jsx(Ce,{mode:"sync",children:e.isDragging&&R&&e.active&&(()=>{const b=t.cards.filter(D=>D.id!==e.active.id);return e.target.index>=b.length})()&&o.jsx(ee.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((x=e.active.rect)==null?void 0:x.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),o.jsx("button",{onClick:()=>{p(t.id),v("")},className:"w-full min-h-[48px] py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-[0.98] touch-manipulation",children:"+ Carto"})]})]})}),J9=jn.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:s})=>{var c,d,h,p;const a=((c=n.active)==null?void 0:c.id)===t.id,l=((d=n.target)==null?void 0:d.colId)===e;return n.isDragging&&l&&n.active,o.jsx(jn.Fragment,{children:!a&&o.jsxs(ee.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:m=>s(m,t,e),className:`relative bg-white dark:bg-zinc-900 border border-zinc-200/60 dark:border-white/[0.06] rounded-2xl ${Pm[i].cardPadding} shadow-sm hover:shadow-xl dark:shadow-black/10 cursor-grab active:cursor-grabbing touch-none select-none hover:border-zinc-300 dark:hover:border-white/10 group/card`,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&o.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((m,v)=>o.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:m.color}},v))}),o.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((p=t.checklists)==null?void 0:p.length)>0&&o.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),o.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((m,v)=>m+v.items.filter(N=>N.done).length,0),"/",t.checklists.reduce((m,v)=>m+v.items.length,0)]})]})]})})}),Z9=jn.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return o.jsx(Ce,{children:t.isDragging&&t.active&&o.jsx(ee.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:o.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),o.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&o.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((s,a)=>o.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:s.color}},a))}),o.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function eD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return pn(!0),o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),o.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function tD({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var w;pn(!0);const[s,a]=S.useState(t),[l,c]=S.useState(!1),[d,h]=S.useState("");S.useEffect(()=>{n(s)},[s,n]);const p=x=>{var D;const b=(D=s.labels)==null?void 0:D.find(L=>L.id===x.id);a(L=>({...L,labels:b?L.labels.filter(O=>O.id!==x.id):[...L.labels||[],x]}))},m=()=>{d.trim()&&(a(x=>({...x,checklists:[...x.checklists||[],{id:Date.now(),title:d.trim(),items:[]}]})),h(""),c(!1))},v=x=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{a(b=>({...b,checklists:b.checklists.filter(D=>D.id!==x)})),i(null)},onCancel:()=>i(null)})},N=(x,b)=>{a(D=>({...D,checklists:D.checklists.map(L=>L.id===x?{...L,items:L.items.map(O=>O.id===b?{...O,done:!O.done}:O)}:L)}))},z=(x,b)=>{b.trim()&&a(D=>({...D,checklists:D.checklists.map(L=>L.id===x?{...L,items:[...L.items,{id:Date.now(),text:b.trim(),done:!1}]}:L)}))},R=(x,b)=>{a(D=>({...D,checklists:D.checklists.map(L=>L.id===x?{...L,items:L.items.filter(O=>O.id!==b)}:L)}))};return o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4",onClick:e,children:[o.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-xl"}),o.jsxs(ee.div,{initial:{opacity:0,y:100,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.98},transition:{type:"spring",stiffness:350,damping:30},className:"relative w-full max-w-2xl bg-white dark:bg-zinc-900 rounded-[2.5rem] shadow-2xl max-h-[85vh] flex flex-col overflow-hidden border border-zinc-200/50 dark:border-white/10",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{className:"shrink-0 p-6 md:p-8 border-b border-zinc-100 dark:border-white/5",children:[o.jsxs("div",{className:"flex justify-between items-start mb-6",children:[o.jsx("div",{className:"flex gap-2 flex-wrap",children:Q9.map(x=>{var b;return o.jsx("button",{onClick:()=>p(x),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(b=s.labels)!=null&&b.find(D=>D.id===x.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:x.color}},x.id)})}),o.jsx("button",{onClick:e,className:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-zinc-400 hover:text-zinc-600 dark:hover:text-white flex items-center justify-center transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("input",{className:"w-full text-2xl md:text-3xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:s.title,onChange:x=>a(b=>({...b,title:x.target.value})),placeholder:"Ttulo do carto"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 custom-scrollbar",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),o.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:s.description||"",onChange:x=>a(b=>({...b,description:x.target.value}))})]}),(w=s.checklists)==null?void 0:w.map(x=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-3",children:[o.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:x.title}),o.jsx("button",{onClick:()=>v(x.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),o.jsx(Vu,{axis:"y",values:x.items,onReorder:b=>{a(D=>({...D,checklists:D.checklists.map(L=>L.id===x.id?{...L,items:b}:L)}))},className:"space-y-2",children:x.items.map(b=>o.jsxs(Mu,{value:b,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[o.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),o.jsx("button",{onClick:()=>N(x.id,b.id),className:`w-5 h-5 rounded-lg border-2 flex items-center justify-center transition-all ${b.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:b.done&&o.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),o.jsx("span",{className:`flex-1 text-sm ${b.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:b.text}),o.jsx("button",{onClick:()=>R(x.id,b.id),className:"text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},b.id))}),o.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:b=>{b.key==="Enter"&&b.target.value.trim()&&(z(x.id,b.target.value),b.target.value="")}})]},x.id)),l?o.jsxs(ee.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[o.jsx("input",{autoFocus:!0,value:d,onChange:x=>h(x.target.value),onKeyDown:x=>{x.key==="Enter"&&m(),x.key==="Escape"&&c(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:m,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),o.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):o.jsx("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 transition-colors",children:"+ Nova Checklist"}),o.jsx("div",{className:"pt-6 border-t border-zinc-100 dark:border-white/5",children:o.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20",children:"Excluir Carto"})})]})]})]})}const S1="padoca_suppliers";function z1(){return pn(!0),null}function nD({message:t,type:e,onClose:n}){return S.useEffect(()=>{const r=setTimeout(n,3e3);return()=>clearTimeout(r)},[n]),o.jsxs(ee.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${e==="error"?"bg-rose-500/90 border-rose-400/20 text-white":e==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[o.jsx("div",{className:`w-2 h-2 rounded-full ${e==="error"?"bg-white animate-pulse":e==="success"?"bg-white":"bg-indigo-400"}`}),o.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t})]})}function rD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return pn(!0),o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-start md:items-center justify-center p-4 pt-24 md:pt-20",children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),o.jsxs(ee.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[o.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?o.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):o.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),o.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),o.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function iD(){var te,fe,ue;const[t,e]=S.useState(()=>{try{const K=localStorage.getItem(S1);return K?JSON.parse(K):[]}catch{return[]}}),[n,r]=S.useState(!1),[i,s]=S.useState(null),[a,l]=S.useState(null),[c,d]=S.useState(""),[h,p]=S.useState(null),[m,v]=S.useState(null),[N,z]=S.useState("synced"),[R,w]=S.useState(!1),[x,b]=S.useState({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[]}),[D,L]=S.useState([]),[O,k]=S.useState("");S.useEffect(()=>{(async()=>{try{const E=await Ae.getInventory();E!=null&&E.items&&L(E.items)}catch(E){console.error("Error loading inventory:",E)}})()},[]),S.useEffect(()=>{(async()=>{try{const E=await Ae.getSuppliers();E!=null&&E.suppliers&&e(E.suppliers)}catch(E){console.error("Error loading suppliers:",E)}finally{w(!0)}})()},[]),S.useEffect(()=>{if(localStorage.setItem(S1,JSON.stringify(t)),R){z("syncing");const K=setTimeout(async()=>{try{const E=await Ae.syncSuppliers(t);z(E?"synced":"error")}catch{z("error")}},1500);return()=>clearTimeout(K)}},[t,R]);const y=S.useCallback((K,E="success")=>{v({message:K,type:E})},[]),_=S.useMemo(()=>{if(!c.trim())return t;const K=c.toLowerCase();return t.filter(E=>{var F,U,J;return((F=E.name)==null?void 0:F.toLowerCase().includes(K))||((U=E.company)==null?void 0:U.toLowerCase().includes(K))||((J=E.email)==null?void 0:J.toLowerCase().includes(K))})},[t,c]),j=S.useMemo(()=>{if(!O.trim())return D.slice(0,10);const K=O.toLowerCase();return D.filter(E=>{var F;return(F=E.name)==null?void 0:F.toLowerCase().includes(K)}).slice(0,10)},[D,O]),A=()=>{b({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[]}),s(null),r(!0)},P=K=>{b({name:K.name||"",company:K.company||"",email:K.email||"",phone:K.phone||"",whatsapp:K.whatsapp||"",address:K.address||"",notes:K.notes||"",linkedItems:K.linkedItems||[]}),s(K),l(null),r(!0)},I=()=>{if(!x.name.trim()){y("Nome  obrigatrio","error");return}if(i)e(K=>K.map(E=>E.id===i.id?{...E,...x,updatedAt:new Date().toISOString()}:E)),y("Fornecedor atualizado!");else{const K={id:Date.now().toString(),...x,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(E=>[K,...E]),y("Fornecedor adicionado!")}r(!1),s(null)},we=K=>{p({title:"Excluir Fornecedor",message:`Deseja excluir "${K.name}"? Esta ao no pode ser desfeita.`,type:"danger",onConfirm:()=>{e(E=>E.filter(F=>F.id!==K.id)),l(null),p(null),y("Fornecedor excludo")},onCancel:()=>p(null)})},de=K=>{x.linkedItems.find(E=>E.itemId===K.id)||(b(E=>({...E,linkedItems:[...E.linkedItems,{itemId:K.id,itemName:K.name}]})),k(""))},me=K=>{b(E=>({...E,linkedItems:E.linkedItems.filter(F=>F.itemId!==K)}))},pe=K=>{window.open(`tel:${K}`,"_self")},H=K=>{window.open(`mailto:${K}`,"_self")},oe=K=>{const E=K.replace(/\D/g,"");window.open(`https://wa.me/${E}`,"_blank")};return o.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-violet-500/20",children:[o.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[o.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-violet-500/5 blur-[120px] rounded-full"}),o.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"})]}),o.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[o.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Fornecedores"}),o.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${N==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":N==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[o.jsx("div",{className:`w-1 h-1 rounded-full ${N==="syncing"?"bg-amber-500":N==="error"?"bg-red-500":"bg-emerald-500"}`}),o.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:N==="syncing"?"Syncing":N==="error"?"Error":"Cloud Active"})]})]}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto de fornecedores e contatos"})]}),o.jsxs("button",{onClick:A,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[o.jsx("svg",{className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Fornecedor"]})]}),o.jsx("section",{className:"relative z-10",children:o.jsx("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:o.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),o.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:c,onChange:K=>d(K.target.value)})]})})}),o.jsx("section",{className:"relative z-10",children:_.length===0?o.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum fornecedor"}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione seu primeiro fornecedor para comear"}),o.jsx("button",{onClick:A,className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Adicionar Fornecedor"})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:_.map(K=>{var E,F,U;return o.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},onClick:()=>l(K),className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all cursor-pointer group",children:[o.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[o.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-violet-500/25",children:((F=(E=K.name)==null?void 0:E.charAt(0))==null?void 0:F.toUpperCase())||"?"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:K.name}),K.company&&o.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:K.company})]})]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[K.phone&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[o.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),o.jsx("span",{className:"truncate",children:K.phone})]}),K.email&&o.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[o.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("span",{className:"truncate",children:K.email})]})]}),((U=K.linkedItems)==null?void 0:U.length)>0&&o.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[o.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),o.jsxs("span",{className:"text-xs font-bold text-violet-600 dark:text-violet-400",children:[K.linkedItems.length," ",K.linkedItems.length===1?"item":"itens"]})]})]},K.id)})})}),bt.createPortal(o.jsx(Ce,{children:n&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[o.jsx(z1,{}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>r(!1)}),o.jsxs(ee.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col",style:{maxHeight:"calc(100vh - 100px)"},children:[o.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 px-6 py-5 border-b border-zinc-100 dark:border-white/5 flex items-center justify-between z-10 shrink-0",children:[o.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:i?"Editar Fornecedor":"Novo Fornecedor"}),o.jsx("button",{onClick:()=>r(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto flex-1",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Informaes"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome *"}),o.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome do fornecedor",value:x.name,onChange:K=>b(E=>({...E,name:K.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Empresa"}),o.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome da empresa",value:x.company,onChange:K=>b(E=>({...E,company:K.target.value}))})]})]}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[o.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Contato"}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Telefone"}),o.jsx("input",{type:"tel",inputMode:"tel",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"(00) 00000-0000",value:x.phone,onChange:K=>b(E=>({...E,phone:K.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Email"}),o.jsx("input",{type:"email",inputMode:"email",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"email@exemplo.com",value:x.email,onChange:K=>b(E=>({...E,email:K.target.value}))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Endereo"}),o.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Endereo completo",value:x.address,onChange:K=>b(E=>({...E,address:K.target.value}))})]})]}),o.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[o.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Itens Vinculados"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Buscar item do estoque...",value:O,onChange:K=>k(K.target.value)}),O&&j.length>0&&o.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-xl max-h-40 overflow-y-auto z-20",children:j.map(K=>o.jsxs("button",{onClick:()=>de(K),className:"w-full px-4 py-3 text-left text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors flex items-center justify-between",children:[o.jsx("span",{children:K.name}),o.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]},K.id))})]}),x.linkedItems.length>0&&o.jsx("div",{className:"space-y-2",children:x.linkedItems.map(K=>o.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[o.jsx("span",{className:"text-sm font-medium text-violet-700 dark:text-violet-300",children:K.itemName}),o.jsx("button",{onClick:()=>me(K.itemId),className:"w-8 h-8 flex items-center justify-center rounded-lg text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:o.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},K.itemId))})]}),o.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[o.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Observaes"}),o.jsx("textarea",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all resize-none",rows:3,placeholder:"Notas adicionais...",value:x.notes,onChange:K=>b(E=>({...E,notes:K.target.value}))})]})]}),o.jsxs("div",{className:"bg-white dark:bg-zinc-900 px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3 shrink-0",children:[o.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),o.jsx("button",{onClick:I,className:"flex-[2] py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg shadow-zinc-900/10 hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:i?"Salvar":"Adicionar"})]})]})]})}),document.body),bt.createPortal(o.jsx(Ce,{children:a&&o.jsxs(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[o.jsx(z1,{}),o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>l(null)}),o.jsxs(ee.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col overflow-hidden",style:{maxHeight:"calc(100vh - 100px)"},children:[o.jsxs("div",{className:"relative px-6 py-8 text-center border-b border-zinc-100 dark:border-white/5",children:[o.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:o.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),o.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-xl shadow-violet-500/30 mx-auto mb-4",children:((fe=(te=a.name)==null?void 0:te.charAt(0))==null?void 0:fe.toUpperCase())||"?"}),o.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-1",children:a.name}),a.company&&o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:a.company})]}),o.jsx("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-white/5",children:o.jsxs("div",{className:"flex gap-3",children:[a.phone&&o.jsxs("button",{onClick:()=>pe(a.phone),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[o.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),o.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Ligar"})]}),a.email&&o.jsxs("button",{onClick:()=>H(a.email),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[o.jsx("svg",{className:"w-6 h-6 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),o.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Email"})]}),a.whatsapp&&o.jsxs("button",{onClick:()=>oe(a.whatsapp),className:"flex-1 py-4 px-4 bg-emerald-50 dark:bg-emerald-500/10 rounded-2xl flex flex-col items-center gap-2 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95 touch-manipulation",children:[o.jsx("svg",{className:"w-6 h-6 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),o.jsx("span",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"WhatsApp"})]})]})}),o.jsxs("div",{className:"px-6 py-5 space-y-4",children:[a.address&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Endereo"}),o.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:a.address})]}),((ue=a.linkedItems)==null?void 0:ue.length)>0&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Itens Fornecidos"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:a.linkedItems.map(K=>o.jsx("span",{className:"px-3 py-1.5 bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 rounded-lg text-xs font-bold",children:K.itemName},K.itemId))})]}),a.notes&&o.jsxs("div",{children:[o.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),o.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:a.notes})]})]}),o.jsxs("div",{className:"px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[o.jsx("button",{onClick:()=>P(a),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:"Editar"}),o.jsx("button",{onClick:()=>we(a),className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-all active:scale-[0.98] touch-manipulation",children:"Excluir"})]})]})]})}),document.body),o.jsx(Ce,{children:h&&o.jsx(rD,{...h})}),o.jsx(Ce,{children:m&&o.jsx(nD,{...m,onClose:()=>v(null)})})]})}const sD=[{key:"kanban",label:"Kanban",icon:oD},{key:"recipes",label:"Receitas",icon:aD},{key:"inventory",label:"Estoque",icon:lD},{key:"suppliers",label:"Fornecedores",icon:hD},{key:"costs",label:"Financeiro",icon:cD},{key:"ficha",label:"Ficha",icon:uD},{key:"calculator",label:"Produo",icon:dD}];function oD({active:t}){return o.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function aD({active:t}){return o.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function lD({active:t}){return o.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function cD({active:t}){return o.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function uD({active:t}){return o.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function dD({active:t}){return o.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}function hD({active:t}){return o.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}const cs={type:"spring",stiffness:500,damping:35,mass:.8},fD={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function pD(){const[t,e]=S.useState("pct"),[n,r]=S.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[i,s]=S.useState(!1);S.useEffect(()=>{s(!0)},[]);const a=l=>{l!==n&&(r(l),localStorage.setItem("padoca_view",l))};return o.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${i?"opacity-100":"opacity-0"}`,children:[o.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[o.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),o.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),o.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),o.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[o.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-4 pb-4 mb-6 md:relative md:pt-8 md:mb-8",children:[o.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),o.jsxs("div",{className:"relative flex flex-col gap-5",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...cs},children:[o.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),o.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),o.jsx(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...cs},className:"hidden md:flex items-center gap-3",children:o.jsx(Ce,{mode:"wait",children:n==="calculator"&&o.jsx(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:cs,children:o.jsx(Hy,{value:t,onChange:e})})})})]}),o.jsxs("nav",{className:"flex items-center gap-2",children:[o.jsx(ee.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...cs},className:"flex-1 flex items-center gap-1 p-1.5 bg-zinc-100/90 dark:bg-zinc-900/90 backdrop-blur-xl rounded-2xl overflow-x-auto scrollbar-hidden border border-zinc-200/50 dark:border-white/5 shadow-sm",children:sD.map(({key:l,label:c,icon:d})=>{const h=n===l;return o.jsxs("button",{onClick:()=>a(l),className:`relative flex-1 md:flex-none flex items-center justify-center gap-2 px-4 md:px-5 py-3 text-[10px] md:text-[11px] font-semibold rounded-xl transition-all duration-200 whitespace-nowrap min-w-[60px] ${h?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}`,children:[h&&o.jsx(ee.div,{layoutId:"nav-active",className:"absolute inset-0 bg-white dark:bg-zinc-800 rounded-xl shadow-lg shadow-zinc-900/5 dark:shadow-black/20",transition:cs}),o.jsx("span",{className:"relative z-10 hidden md:block",children:o.jsx(d,{active:h})}),o.jsx("span",{className:"relative z-10 uppercase tracking-wider",children:c})]},l)})}),o.jsx(Ce,{mode:"wait",children:n==="calculator"&&o.jsx(ee.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:cs,className:"md:hidden flex-shrink-0",children:o.jsx(Hy,{value:t,onChange:e})})})]})]})]}),o.jsx(Ce,{mode:"wait",children:o.jsx(ee.main,{initial:"initial",animate:"enter",exit:"exit",variants:fD,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="kanban"?o.jsx(Y9,{}):n==="recipes"?o.jsx(W9,{}):n==="inventory"?o.jsx(X6,{}):n==="suppliers"?o.jsx(iD,{}):n==="costs"?o.jsx(Q6,{}):n==="ficha"?o.jsx(e9,{}):o.jsx(i9,{inputMode:t,setInputMode:e})},n)})]})]})}class mD extends jn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:o.jsxs("div",{className:"max-w-md text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:o.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),o.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}wh.createRoot(document.getElementById("root")).render(o.jsx(jn.StrictMode,{children:o.jsx(mD,{children:o.jsx(pD,{})})}));
