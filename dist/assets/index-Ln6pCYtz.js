(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function E1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var T1={exports:{}},nu={},C1={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ma=Symbol.for("react.element"),pE=Symbol.for("react.portal"),mE=Symbol.for("react.fragment"),gE=Symbol.for("react.strict_mode"),xE=Symbol.for("react.profiler"),yE=Symbol.for("react.provider"),vE=Symbol.for("react.context"),wE=Symbol.for("react.forward_ref"),bE=Symbol.for("react.suspense"),kE=Symbol.for("react.memo"),_E=Symbol.for("react.lazy"),yg=Symbol.iterator;function NE(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var j1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S1=Object.assign,I1={};function Gs(t,e,n){this.props=t,this.context=e,this.refs=I1,this.updater=n||j1}Gs.prototype.isReactComponent={};Gs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Gs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function z1(){}z1.prototype=Gs.prototype;function sp(t,e,n){this.props=t,this.context=e,this.refs=I1,this.updater=n||j1}var op=sp.prototype=new z1;op.constructor=sp;S1(op,Gs.prototype);op.isPureReactComponent=!0;var vg=Array.isArray,A1=Object.prototype.hasOwnProperty,ap={current:null},P1={key:!0,ref:!0,__self:!0,__source:!0};function R1(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)A1.call(e,r)&&!P1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ma,type:t,key:s,ref:o,props:i,_owner:ap.current}}function EE(t,e){return{$$typeof:Ma,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ma}function TE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var wg=/\/+/g;function sd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?TE(""+t.key):e.toString(36)}function Ll(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ma:case pE:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+sd(o,0):r,vg(i)?(n="",t!=null&&(n=t.replace(wg,"$&/")+"/"),Ll(i,e,n,"",function(d){return d})):i!=null&&(lp(i)&&(i=EE(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(wg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",vg(t))for(var l=0;l<t.length;l++){s=t[l];var c=r+sd(s,l);o+=Ll(s,e,n,c,i)}else if(c=NE(t),typeof c=="function")for(t=c.call(t),l=0;!(s=t.next()).done;)s=s.value,c=r+sd(s,l++),o+=Ll(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ul(t,e,n){if(t==null)return t;var r=[],i=0;return Ll(t,r,"","",function(s){return e.call(n,s,i++)}),r}function CE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},Ol={transition:null},jE={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:ap};function D1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:ul,forEach:function(t,e,n){ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!lp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=Gs;ve.Fragment=mE;ve.Profiler=xE;ve.PureComponent=sp;ve.StrictMode=gE;ve.Suspense=bE;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jE;ve.act=D1;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=S1({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=ap.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)A1.call(e,c)&&!P1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ma,type:t.type,key:i,ref:s,props:r,_owner:o}};ve.createContext=function(t){return t={$$typeof:vE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:yE,_context:t},t.Consumer=t};ve.createElement=R1;ve.createFactory=function(t){var e=R1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:wE,render:t}};ve.isValidElement=lp;ve.lazy=function(t){return{$$typeof:_E,_payload:{_status:-1,_result:t},_init:CE}};ve.memo=function(t,e){return{$$typeof:kE,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=Ol.transition;Ol.transition={};try{t()}finally{Ol.transition=e}};ve.unstable_act=D1;ve.useCallback=function(t,e){return Bt.current.useCallback(t,e)};ve.useContext=function(t){return Bt.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};ve.useEffect=function(t,e){return Bt.current.useEffect(t,e)};ve.useId=function(){return Bt.current.useId()};ve.useImperativeHandle=function(t,e,n){return Bt.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return Bt.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return Bt.current.useReducer(t,e,n)};ve.useRef=function(t){return Bt.current.useRef(t)};ve.useState=function(t){return Bt.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return Bt.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return Bt.current.useTransition()};ve.version="18.3.1";C1.exports=ve;var I=C1.exports;const xn=E1(I);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE=I,IE=Symbol.for("react.element"),zE=Symbol.for("react.fragment"),AE=Object.prototype.hasOwnProperty,PE=SE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,RE={key:!0,ref:!0,__self:!0,__source:!0};function V1(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)AE.call(e,r)&&!RE.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:IE,type:t,key:s,ref:o,props:i,_owner:PE.current}}nu.Fragment=zE;nu.jsx=V1;nu.jsxs=V1;T1.exports=nu;var a=T1.exports,dh={},M1={exports:{}},on={},L1={exports:{}},O1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,se){var te=Y.length;Y.push(se);e:for(;0<te;){var ue=te-1>>>1,he=Y[ue];if(0<i(he,se))Y[ue]=se,Y[te]=he,te=ue;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var se=Y[0],te=Y.pop();if(te!==se){Y[0]=te;e:for(var ue=0,he=Y.length,Ee=he>>>1;ue<Ee;){var R=2*(ue+1)-1,B=Y[R],U=R+1,W=Y[U];if(0>i(B,te))U<he&&0>i(W,B)?(Y[ue]=W,Y[U]=te,ue=U):(Y[ue]=B,Y[R]=te,ue=R);else if(U<he&&0>i(W,te))Y[ue]=W,Y[U]=te,ue=U;else break e}}return se}function i(Y,se){var te=Y.sortIndex-se.sortIndex;return te!==0?te:Y.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,p=null,m=3,v=!1,N=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Y){for(var se=n(d);se!==null;){if(se.callback===null)r(d);else if(se.startTime<=Y)r(d),se.sortIndex=se.expirationTime,e(c,se);else break;se=n(d)}}function D(Y){if(C=!1,w(Y),!N)if(n(c)!==null)N=!0,ie(V);else{var se=n(d);se!==null&&le(D,se.startTime-Y)}}function V(Y,se){N=!1,C&&(C=!1,b(x),x=-1),v=!0;var te=m;try{for(w(se),p=n(c);p!==null&&(!(p.expirationTime>se)||Y&&!z());){var ue=p.callback;if(typeof ue=="function"){p.callback=null,m=p.priorityLevel;var he=ue(p.expirationTime<=se);se=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(c)&&r(c),w(se)}else r(c);p=n(c)}if(p!==null)var Ee=!0;else{var R=n(d);R!==null&&le(D,R.startTime-se),Ee=!1}return Ee}finally{p=null,m=te,v=!1}}var O=!1,k=null,x=-1,_=5,E=-1;function z(){return!(t.unstable_now()-E<_)}function A(){if(k!==null){var Y=t.unstable_now();E=Y;var se=!0;try{se=k(!0,Y)}finally{se?j():(O=!1,k=null)}}else O=!1}var j;if(typeof y=="function")j=function(){y(A)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ce=xe.port2;xe.port1.onmessage=A,j=function(){ce.postMessage(null)}}else j=function(){P(A,0)};function ie(Y){k=Y,O||(O=!0,j())}function le(Y,se){x=P(function(){Y(t.unstable_now())},se)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){N||v||(N=!0,ie(V))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var se=3;break;default:se=m}var te=m;m=se;try{return Y()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,se){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var te=m;m=Y;try{return se()}finally{m=te}},t.unstable_scheduleCallback=function(Y,se,te){var ue=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ue+te:ue):te=ue,Y){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=te+he,Y={id:h++,callback:se,priorityLevel:Y,startTime:te,expirationTime:he,sortIndex:-1},te>ue?(Y.sortIndex=te,e(d,Y),n(c)===null&&Y===n(d)&&(C?(b(x),x=-1):C=!0,le(D,te-ue))):(Y.sortIndex=he,e(c,Y),N||v||(N=!0,ie(V))),Y},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Y){var se=m;return function(){var te=m;m=se;try{return Y.apply(this,arguments)}finally{m=te}}}})(O1);L1.exports=O1;var DE=L1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE=I,rn=DE;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F1=new Set,oa={};function Ui(t,e){As(t,e),As(t+"Capture",e)}function As(t,e){for(oa[t]=e,t=0;t<e.length;t++)F1.add(e[t])}var sr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hh=Object.prototype.hasOwnProperty,ME=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bg={},kg={};function LE(t){return hh.call(kg,t)?!0:hh.call(bg,t)?!1:ME.test(t)?kg[t]=!0:(bg[t]=!0,!1)}function OE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FE(t,e,n,r){if(e===null||typeof e>"u"||OE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ut(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Tt[t]=new Ut(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Tt[e]=new Ut(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Tt[t]=new Ut(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Tt[t]=new Ut(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Tt[t]=new Ut(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Tt[t]=new Ut(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Tt[t]=new Ut(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Tt[t]=new Ut(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Tt[t]=new Ut(t,5,!1,t.toLowerCase(),null,!1,!1)});var cp=/[\-:]([a-z])/g;function up(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(cp,up);Tt[e]=new Ut(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(cp,up);Tt[e]=new Ut(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(cp,up);Tt[e]=new Ut(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Tt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!1,!1)});Tt.xlinkHref=new Ut("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Tt[t]=new Ut(t,1,!1,t.toLowerCase(),null,!0,!0)});function dp(t,e,n,r){var i=Tt.hasOwnProperty(e)?Tt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FE(e,n,i,r)&&(n=null),r||i===null?LE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var xr=VE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dl=Symbol.for("react.element"),is=Symbol.for("react.portal"),ss=Symbol.for("react.fragment"),hp=Symbol.for("react.strict_mode"),fh=Symbol.for("react.profiler"),B1=Symbol.for("react.provider"),U1=Symbol.for("react.context"),fp=Symbol.for("react.forward_ref"),ph=Symbol.for("react.suspense"),mh=Symbol.for("react.suspense_list"),pp=Symbol.for("react.memo"),Cr=Symbol.for("react.lazy"),$1=Symbol.for("react.offscreen"),_g=Symbol.iterator;function bo(t){return t===null||typeof t!="object"?null:(t=_g&&t[_g]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,od;function Ao(t){if(od===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);od=e&&e[1]||""}return`
`+od+t}var ad=!1;function ld(t,e){if(!t||ad)return"";ad=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{ad=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ao(t):""}function BE(t){switch(t.tag){case 5:return Ao(t.type);case 16:return Ao("Lazy");case 13:return Ao("Suspense");case 19:return Ao("SuspenseList");case 0:case 2:case 15:return t=ld(t.type,!1),t;case 11:return t=ld(t.type.render,!1),t;case 1:return t=ld(t.type,!0),t;default:return""}}function gh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ss:return"Fragment";case is:return"Portal";case fh:return"Profiler";case hp:return"StrictMode";case ph:return"Suspense";case mh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case U1:return(t.displayName||"Context")+".Consumer";case B1:return(t._context.displayName||"Context")+".Provider";case fp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pp:return e=t.displayName||null,e!==null?e:gh(t.type)||"Memo";case Cr:e=t._payload,t=t._init;try{return gh(t(e))}catch{}}return null}function UE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gh(e);case 8:return e===hp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function W1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $E(t){var e=W1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hl(t){t._valueTracker||(t._valueTracker=$E(t))}function q1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=W1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function xh(t,e){var n=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ng(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function H1(t,e){e=e.checked,e!=null&&dp(t,"checked",e,!1)}function yh(t,e){H1(t,e);var n=Hr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vh(t,e.type,n):e.hasOwnProperty("defaultValue")&&vh(t,e.type,Hr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Eg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vh(t,e,n){(e!=="number"||uc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Po=Array.isArray;function bs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function wh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Po(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hr(n)}}function G1(t,e){var n=Hr(e.value),r=Hr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Cg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function K1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?K1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fl,Q1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fl=fl||document.createElement("div"),fl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Bo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WE=["Webkit","ms","Moz","O"];Object.keys(Bo).forEach(function(t){WE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Bo[e]=Bo[t]})});function Y1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Bo.hasOwnProperty(t)&&Bo[t]?(""+e).trim():e+"px"}function X1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Y1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var qE=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kh(t,e){if(e){if(qE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function _h(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nh=null;function mp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Eh=null,ks=null,_s=null;function jg(t){if(t=Fa(t)){if(typeof Eh!="function")throw Error(X(280));var e=t.stateNode;e&&(e=au(e),Eh(t.stateNode,t.type,e))}}function J1(t){ks?_s?_s.push(t):_s=[t]:ks=t}function Z1(){if(ks){var t=ks,e=_s;if(_s=ks=null,jg(t),e)for(t=0;t<e.length;t++)jg(e[t])}}function ew(t,e){return t(e)}function tw(){}var cd=!1;function nw(t,e,n){if(cd)return t(e,n);cd=!0;try{return ew(t,e,n)}finally{cd=!1,(ks!==null||_s!==null)&&(tw(),Z1())}}function la(t,e){var n=t.stateNode;if(n===null)return null;var r=au(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Th=!1;if(sr)try{var ko={};Object.defineProperty(ko,"passive",{get:function(){Th=!0}}),window.addEventListener("test",ko,ko),window.removeEventListener("test",ko,ko)}catch{Th=!1}function HE(t,e,n,r,i,s,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Uo=!1,dc=null,hc=!1,Ch=null,GE={onError:function(t){Uo=!0,dc=t}};function KE(t,e,n,r,i,s,o,l,c){Uo=!1,dc=null,HE.apply(GE,arguments)}function QE(t,e,n,r,i,s,o,l,c){if(KE.apply(this,arguments),Uo){if(Uo){var d=dc;Uo=!1,dc=null}else throw Error(X(198));hc||(hc=!0,Ch=d)}}function $i(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sg(t){if($i(t)!==t)throw Error(X(188))}function YE(t){var e=t.alternate;if(!e){if(e=$i(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Sg(i),t;if(s===r)return Sg(i),e;s=s.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function iw(t){return t=YE(t),t!==null?sw(t):null}function sw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=sw(t);if(e!==null)return e;t=t.sibling}return null}var ow=rn.unstable_scheduleCallback,Ig=rn.unstable_cancelCallback,XE=rn.unstable_shouldYield,JE=rn.unstable_requestPaint,tt=rn.unstable_now,ZE=rn.unstable_getCurrentPriorityLevel,gp=rn.unstable_ImmediatePriority,aw=rn.unstable_UserBlockingPriority,fc=rn.unstable_NormalPriority,eT=rn.unstable_LowPriority,lw=rn.unstable_IdlePriority,ru=null,Ln=null;function tT(t){if(Ln&&typeof Ln.onCommitFiberRoot=="function")try{Ln.onCommitFiberRoot(ru,t,void 0,(t.current.flags&128)===128)}catch{}}var Cn=Math.clz32?Math.clz32:iT,nT=Math.log,rT=Math.LN2;function iT(t){return t>>>=0,t===0?32:31-(nT(t)/rT|0)|0}var pl=64,ml=4194304;function Ro(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ro(l):(s&=o,s!==0&&(r=Ro(s)))}else o=n&~i,o!==0?r=Ro(o):s!==0&&(r=Ro(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Cn(e),i=1<<n,r|=t[n],e&=~i;return r}function sT(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oT(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Cn(s),l=1<<o,c=i[o];c===-1?(!(l&n)||l&r)&&(i[o]=sT(l,e)):c<=e&&(t.expiredLanes|=l),s&=~l}}function jh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function cw(){var t=pl;return pl<<=1,!(pl&4194240)&&(pl=64),t}function ud(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function La(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Cn(e),t[e]=n}function aT(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Cn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function xp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Cn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Se=0;function uw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var dw,yp,hw,fw,pw,Sh=!1,gl=[],Rr=null,Dr=null,Vr=null,ca=new Map,ua=new Map,Sr=[],lT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zg(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":Vr=null;break;case"pointerover":case"pointerout":ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function _o(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Fa(e),e!==null&&yp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function cT(t,e,n,r,i){switch(e){case"focusin":return Rr=_o(Rr,t,e,n,r,i),!0;case"dragenter":return Dr=_o(Dr,t,e,n,r,i),!0;case"mouseover":return Vr=_o(Vr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ca.set(s,_o(ca.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,ua.set(s,_o(ua.get(s)||null,t,e,n,r,i)),!0}return!1}function mw(t){var e=wi(t.target);if(e!==null){var n=$i(e);if(n!==null){if(e=n.tag,e===13){if(e=rw(n),e!==null){t.blockedOn=e,pw(t.priority,function(){hw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ih(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nh=r,n.target.dispatchEvent(r),Nh=null}else return e=Fa(n),e!==null&&yp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ag(t,e,n){Fl(t)&&n.delete(e)}function uT(){Sh=!1,Rr!==null&&Fl(Rr)&&(Rr=null),Dr!==null&&Fl(Dr)&&(Dr=null),Vr!==null&&Fl(Vr)&&(Vr=null),ca.forEach(Ag),ua.forEach(Ag)}function No(t,e){t.blockedOn===e&&(t.blockedOn=null,Sh||(Sh=!0,rn.unstable_scheduleCallback(rn.unstable_NormalPriority,uT)))}function da(t){function e(i){return No(i,t)}if(0<gl.length){No(gl[0],t);for(var n=1;n<gl.length;n++){var r=gl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&No(Rr,t),Dr!==null&&No(Dr,t),Vr!==null&&No(Vr,t),ca.forEach(e),ua.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)mw(n),n.blockedOn===null&&Sr.shift()}var Ns=xr.ReactCurrentBatchConfig,mc=!0;function dT(t,e,n,r){var i=Se,s=Ns.transition;Ns.transition=null;try{Se=1,vp(t,e,n,r)}finally{Se=i,Ns.transition=s}}function hT(t,e,n,r){var i=Se,s=Ns.transition;Ns.transition=null;try{Se=4,vp(t,e,n,r)}finally{Se=i,Ns.transition=s}}function vp(t,e,n,r){if(mc){var i=Ih(t,e,n,r);if(i===null)wd(t,e,r,gc,n),zg(t,r);else if(cT(i,t,e,n,r))r.stopPropagation();else if(zg(t,r),e&4&&-1<lT.indexOf(t)){for(;i!==null;){var s=Fa(i);if(s!==null&&dw(s),s=Ih(t,e,n,r),s===null&&wd(t,e,r,gc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else wd(t,e,r,null,n)}}var gc=null;function Ih(t,e,n,r){if(gc=null,t=mp(r),t=wi(t),t!==null)if(e=$i(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gc=t,null}function gw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ZE()){case gp:return 1;case aw:return 4;case fc:case eT:return 16;case lw:return 536870912;default:return 16}default:return 16}}var zr=null,wp=null,Bl=null;function xw(){if(Bl)return Bl;var t,e=wp,n=e.length,r,i="value"in zr?zr.value:zr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Bl=i.slice(t,1<r?1-r:void 0)}function Ul(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xl(){return!0}function Pg(){return!1}function an(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xl:Pg,this.isPropagationStopped=Pg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),e}var Ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bp=an(Ks),Oa=Ge({},Ks,{view:0,detail:0}),fT=an(Oa),dd,hd,Eo,iu=Ge({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Eo&&(Eo&&t.type==="mousemove"?(dd=t.screenX-Eo.screenX,hd=t.screenY-Eo.screenY):hd=dd=0,Eo=t),dd)},movementY:function(t){return"movementY"in t?t.movementY:hd}}),Rg=an(iu),pT=Ge({},iu,{dataTransfer:0}),mT=an(pT),gT=Ge({},Oa,{relatedTarget:0}),fd=an(gT),xT=Ge({},Ks,{animationName:0,elapsedTime:0,pseudoElement:0}),yT=an(xT),vT=Ge({},Ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wT=an(vT),bT=Ge({},Ks,{data:0}),Dg=an(bT),kT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_T={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},NT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ET(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=NT[t])?!!e[t]:!1}function kp(){return ET}var TT=Ge({},Oa,{key:function(t){if(t.key){var e=kT[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ul(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_T[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kp,charCode:function(t){return t.type==="keypress"?Ul(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ul(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CT=an(TT),jT=Ge({},iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vg=an(jT),ST=Ge({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kp}),IT=an(ST),zT=Ge({},Ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),AT=an(zT),PT=Ge({},iu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),RT=an(PT),DT=[9,13,27,32],_p=sr&&"CompositionEvent"in window,$o=null;sr&&"documentMode"in document&&($o=document.documentMode);var VT=sr&&"TextEvent"in window&&!$o,yw=sr&&(!_p||$o&&8<$o&&11>=$o),Mg=" ",Lg=!1;function vw(t,e){switch(t){case"keyup":return DT.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ww(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var os=!1;function MT(t,e){switch(t){case"compositionend":return ww(e);case"keypress":return e.which!==32?null:(Lg=!0,Mg);case"textInput":return t=e.data,t===Mg&&Lg?null:t;default:return null}}function LT(t,e){if(os)return t==="compositionend"||!_p&&vw(t,e)?(t=xw(),Bl=wp=zr=null,os=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yw&&e.locale!=="ko"?null:e.data;default:return null}}var OT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Og(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!OT[t.type]:e==="textarea"}function bw(t,e,n,r){J1(r),e=xc(e,"onChange"),0<e.length&&(n=new bp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Wo=null,ha=null;function FT(t){Aw(t,0)}function su(t){var e=cs(t);if(q1(e))return t}function BT(t,e){if(t==="change")return e}var kw=!1;if(sr){var pd;if(sr){var md="oninput"in document;if(!md){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),md=typeof Fg.oninput=="function"}pd=md}else pd=!1;kw=pd&&(!document.documentMode||9<document.documentMode)}function Bg(){Wo&&(Wo.detachEvent("onpropertychange",_w),ha=Wo=null)}function _w(t){if(t.propertyName==="value"&&su(ha)){var e=[];bw(e,ha,t,mp(t)),nw(FT,e)}}function UT(t,e,n){t==="focusin"?(Bg(),Wo=e,ha=n,Wo.attachEvent("onpropertychange",_w)):t==="focusout"&&Bg()}function $T(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return su(ha)}function WT(t,e){if(t==="click")return su(e)}function qT(t,e){if(t==="input"||t==="change")return su(e)}function HT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:HT;function fa(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!hh.call(e,i)||!Sn(t[i],e[i]))return!1}return!0}function Ug(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $g(t,e){var n=Ug(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ug(n)}}function Nw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Nw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ew(){for(var t=window,e=uc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uc(t.document)}return e}function Np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function GT(t){var e=Ew(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Nw(n.ownerDocument.documentElement,n)){if(r!==null&&Np(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=$g(n,s);var o=$g(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var KT=sr&&"documentMode"in document&&11>=document.documentMode,as=null,zh=null,qo=null,Ah=!1;function Wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ah||as==null||as!==uc(r)||(r=as,"selectionStart"in r&&Np(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qo&&fa(qo,r)||(qo=r,r=xc(zh,"onSelect"),0<r.length&&(e=new bp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=as)))}function yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ls={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},gd={},Tw={};sr&&(Tw=document.createElement("div").style,"AnimationEvent"in window||(delete ls.animationend.animation,delete ls.animationiteration.animation,delete ls.animationstart.animation),"TransitionEvent"in window||delete ls.transitionend.transition);function ou(t){if(gd[t])return gd[t];if(!ls[t])return t;var e=ls[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tw)return gd[t]=e[n];return t}var Cw=ou("animationend"),jw=ou("animationiteration"),Sw=ou("animationstart"),Iw=ou("transitionend"),zw=new Map,qg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ri(t,e){zw.set(t,e),Ui(e,[t])}for(var xd=0;xd<qg.length;xd++){var yd=qg[xd],QT=yd.toLowerCase(),YT=yd[0].toUpperCase()+yd.slice(1);ri(QT,"on"+YT)}ri(Cw,"onAnimationEnd");ri(jw,"onAnimationIteration");ri(Sw,"onAnimationStart");ri("dblclick","onDoubleClick");ri("focusin","onFocus");ri("focusout","onBlur");ri(Iw,"onTransitionEnd");As("onMouseEnter",["mouseout","mouseover"]);As("onMouseLeave",["mouseout","mouseover"]);As("onPointerEnter",["pointerout","pointerover"]);As("onPointerLeave",["pointerout","pointerover"]);Ui("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ui("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ui("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ui("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ui("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Do="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XT=new Set("cancel close invalid load scroll toggle".split(" ").concat(Do));function Hg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,QE(r,e,void 0,t),t.currentTarget=null}function Aw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==s&&i.isPropagationStopped())break e;Hg(i,l,d),s=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==s&&i.isPropagationStopped())break e;Hg(i,l,d),s=c}}}if(hc)throw t=Ch,hc=!1,Ch=null,t}function Me(t,e){var n=e[Mh];n===void 0&&(n=e[Mh]=new Set);var r=t+"__bubble";n.has(r)||(Pw(e,t,2,!1),n.add(r))}function vd(t,e,n){var r=0;e&&(r|=4),Pw(n,t,r,e)}var vl="_reactListening"+Math.random().toString(36).slice(2);function pa(t){if(!t[vl]){t[vl]=!0,F1.forEach(function(n){n!=="selectionchange"&&(XT.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vl]||(e[vl]=!0,vd("selectionchange",!1,e))}}function Pw(t,e,n,r){switch(gw(e)){case 1:var i=dT;break;case 4:i=hT;break;default:i=vp}n=i.bind(null,e,n,t),i=void 0,!Th||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function wd(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=wi(l),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}l=l.parentNode}}r=r.return}nw(function(){var d=s,h=mp(n),p=[];e:{var m=zw.get(t);if(m!==void 0){var v=bp,N=t;switch(t){case"keypress":if(Ul(n)===0)break e;case"keydown":case"keyup":v=CT;break;case"focusin":N="focus",v=fd;break;case"focusout":N="blur",v=fd;break;case"beforeblur":case"afterblur":v=fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Rg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=mT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=IT;break;case Cw:case jw:case Sw:v=yT;break;case Iw:v=AT;break;case"scroll":v=fT;break;case"wheel":v=RT;break;case"copy":case"cut":case"paste":v=wT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Vg}var C=(e&4)!==0,P=!C&&t==="scroll",b=C?m!==null?m+"Capture":null:m;C=[];for(var y=d,w;y!==null;){w=y;var D=w.stateNode;if(w.tag===5&&D!==null&&(w=D,b!==null&&(D=la(y,b),D!=null&&C.push(ma(y,D,w)))),P)break;y=y.return}0<C.length&&(m=new v(m,N,null,n,h),p.push({event:m,listeners:C}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Nh&&(N=n.relatedTarget||n.fromElement)&&(wi(N)||N[or]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(N=n.relatedTarget||n.toElement,v=d,N=N?wi(N):null,N!==null&&(P=$i(N),N!==P||N.tag!==5&&N.tag!==6)&&(N=null)):(v=null,N=d),v!==N)){if(C=Rg,D="onMouseLeave",b="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(C=Vg,D="onPointerLeave",b="onPointerEnter",y="pointer"),P=v==null?m:cs(v),w=N==null?m:cs(N),m=new C(D,y+"leave",v,n,h),m.target=P,m.relatedTarget=w,D=null,wi(h)===d&&(C=new C(b,y+"enter",N,n,h),C.target=w,C.relatedTarget=P,D=C),P=D,v&&N)t:{for(C=v,b=N,y=0,w=C;w;w=Ji(w))y++;for(w=0,D=b;D;D=Ji(D))w++;for(;0<y-w;)C=Ji(C),y--;for(;0<w-y;)b=Ji(b),w--;for(;y--;){if(C===b||b!==null&&C===b.alternate)break t;C=Ji(C),b=Ji(b)}C=null}else C=null;v!==null&&Gg(p,m,v,C,!1),N!==null&&P!==null&&Gg(p,P,N,C,!0)}}e:{if(m=d?cs(d):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var V=BT;else if(Og(m))if(kw)V=qT;else{V=$T;var O=UT}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=WT);if(V&&(V=V(t,d))){bw(p,V,n,h);break e}O&&O(t,m,d),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&vh(m,"number",m.value)}switch(O=d?cs(d):window,t){case"focusin":(Og(O)||O.contentEditable==="true")&&(as=O,zh=d,qo=null);break;case"focusout":qo=zh=as=null;break;case"mousedown":Ah=!0;break;case"contextmenu":case"mouseup":case"dragend":Ah=!1,Wg(p,n,h);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":Wg(p,n,h)}var k;if(_p)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else os?vw(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(yw&&n.locale!=="ko"&&(os||x!=="onCompositionStart"?x==="onCompositionEnd"&&os&&(k=xw()):(zr=h,wp="value"in zr?zr.value:zr.textContent,os=!0)),O=xc(d,x),0<O.length&&(x=new Dg(x,t,null,n,h),p.push({event:x,listeners:O}),k?x.data=k:(k=ww(n),k!==null&&(x.data=k)))),(k=VT?MT(t,n):LT(t,n))&&(d=xc(d,"onBeforeInput"),0<d.length&&(h=new Dg("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=k))}Aw(p,e)})}function ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=la(t,n),s!=null&&r.unshift(ma(t,s,i)),s=la(t,e),s!=null&&r.push(ma(t,s,i))),t=t.return}return r}function Ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gg(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=la(n,s),c!=null&&o.unshift(ma(n,c,l))):i||(c=la(n,s),c!=null&&o.push(ma(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var JT=/\r\n?/g,ZT=/\u0000|\uFFFD/g;function Kg(t){return(typeof t=="string"?t:""+t).replace(JT,`
`).replace(ZT,"")}function wl(t,e,n){if(e=Kg(e),Kg(t)!==e&&n)throw Error(X(425))}function yc(){}var Ph=null,Rh=null;function Dh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vh=typeof setTimeout=="function"?setTimeout:void 0,eC=typeof clearTimeout=="function"?clearTimeout:void 0,Qg=typeof Promise=="function"?Promise:void 0,tC=typeof queueMicrotask=="function"?queueMicrotask:typeof Qg<"u"?function(t){return Qg.resolve(null).then(t).catch(nC)}:Vh;function nC(t){setTimeout(function(){throw t})}function bd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);da(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Yg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qs=Math.random().toString(36).slice(2),Mn="__reactFiber$"+Qs,ga="__reactProps$"+Qs,or="__reactContainer$"+Qs,Mh="__reactEvents$"+Qs,rC="__reactListeners$"+Qs,iC="__reactHandles$"+Qs;function wi(t){var e=t[Mn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Mn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Yg(t);t!==null;){if(n=t[Mn])return n;t=Yg(t)}return e}t=n,n=t.parentNode}return null}function Fa(t){return t=t[Mn]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function cs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function au(t){return t[ga]||null}var Lh=[],us=-1;function ii(t){return{current:t}}function Oe(t){0>us||(t.current=Lh[us],Lh[us]=null,us--)}function De(t,e){us++,Lh[us]=t.current,t.current=e}var Gr={},Rt=ii(Gr),Kt=ii(!1),Ai=Gr;function Ps(t,e){var n=t.type.contextTypes;if(!n)return Gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Qt(t){return t=t.childContextTypes,t!=null}function vc(){Oe(Kt),Oe(Rt)}function Xg(t,e,n){if(Rt.current!==Gr)throw Error(X(168));De(Rt,e),De(Kt,n)}function Rw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(X(108,UE(t)||"Unknown",i));return Ge({},n,r)}function wc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,Ai=Rt.current,De(Rt,t),De(Kt,Kt.current),!0}function Jg(t,e,n){var r=t.stateNode;if(!r)throw Error(X(169));n?(t=Rw(t,e,Ai),r.__reactInternalMemoizedMergedChildContext=t,Oe(Kt),Oe(Rt),De(Rt,t)):Oe(Kt),De(Kt,n)}var er=null,lu=!1,kd=!1;function Dw(t){er===null?er=[t]:er.push(t)}function sC(t){lu=!0,Dw(t)}function si(){if(!kd&&er!==null){kd=!0;var t=0,e=Se;try{var n=er;for(Se=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}er=null,lu=!1}catch(i){throw er!==null&&(er=er.slice(t+1)),ow(gp,si),i}finally{Se=e,kd=!1}}return null}var ds=[],hs=0,bc=null,kc=0,cn=[],un=0,Pi=null,tr=1,nr="";function mi(t,e){ds[hs++]=kc,ds[hs++]=bc,bc=t,kc=e}function Vw(t,e,n){cn[un++]=tr,cn[un++]=nr,cn[un++]=Pi,Pi=t;var r=tr;t=nr;var i=32-Cn(r)-1;r&=~(1<<i),n+=1;var s=32-Cn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,tr=1<<32-Cn(e)+i|n<<i|r,nr=s+t}else tr=1<<s|n<<i|r,nr=t}function Ep(t){t.return!==null&&(mi(t,1),Vw(t,1,0))}function Tp(t){for(;t===bc;)bc=ds[--hs],ds[hs]=null,kc=ds[--hs],ds[hs]=null;for(;t===Pi;)Pi=cn[--un],cn[un]=null,nr=cn[--un],cn[un]=null,tr=cn[--un],cn[un]=null}var tn=null,en=null,$e=!1,En=null;function Mw(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Zg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,en=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,en=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Pi!==null?{id:tr,overflow:nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,en=null,!0):!1;default:return!1}}function Oh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Fh(t){if($e){var e=en;if(e){var n=e;if(!Zg(t,e)){if(Oh(t))throw Error(X(418));e=Mr(n.nextSibling);var r=tn;e&&Zg(t,e)?Mw(r,n):(t.flags=t.flags&-4097|2,$e=!1,tn=t)}}else{if(Oh(t))throw Error(X(418));t.flags=t.flags&-4097|2,$e=!1,tn=t}}}function ex(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function bl(t){if(t!==tn)return!1;if(!$e)return ex(t),$e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dh(t.type,t.memoizedProps)),e&&(e=en)){if(Oh(t))throw Lw(),Error(X(418));for(;e;)Mw(t,e),e=Mr(e.nextSibling)}if(ex(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){en=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}en=null}}else en=tn?Mr(t.stateNode.nextSibling):null;return!0}function Lw(){for(var t=en;t;)t=Mr(t.nextSibling)}function Rs(){en=tn=null,$e=!1}function Cp(t){En===null?En=[t]:En.push(t)}var oC=xr.ReactCurrentBatchConfig;function To(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function kl(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tx(t){var e=t._init;return e(t._payload)}function Ow(t){function e(b,y){if(t){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function n(b,y){if(!t)return null;for(;y!==null;)e(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function i(b,y){return b=Br(b,y),b.index=0,b.sibling=null,b}function s(b,y,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,y,w,D){return y===null||y.tag!==6?(y=Sd(w,b.mode,D),y.return=b,y):(y=i(y,w),y.return=b,y)}function c(b,y,w,D){var V=w.type;return V===ss?h(b,y,w.props.children,D,w.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Cr&&tx(V)===y.type)?(D=i(y,w.props),D.ref=To(b,y,w),D.return=b,D):(D=Ql(w.type,w.key,w.props,null,b.mode,D),D.ref=To(b,y,w),D.return=b,D)}function d(b,y,w,D){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Id(w,b.mode,D),y.return=b,y):(y=i(y,w.children||[]),y.return=b,y)}function h(b,y,w,D,V){return y===null||y.tag!==7?(y=ji(w,b.mode,D,V),y.return=b,y):(y=i(y,w),y.return=b,y)}function p(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Sd(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case dl:return w=Ql(y.type,y.key,y.props,null,b.mode,w),w.ref=To(b,null,y),w.return=b,w;case is:return y=Id(y,b.mode,w),y.return=b,y;case Cr:var D=y._init;return p(b,D(y._payload),w)}if(Po(y)||bo(y))return y=ji(y,b.mode,w,null),y.return=b,y;kl(b,y)}return null}function m(b,y,w,D){var V=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:l(b,y,""+w,D);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case dl:return w.key===V?c(b,y,w,D):null;case is:return w.key===V?d(b,y,w,D):null;case Cr:return V=w._init,m(b,y,V(w._payload),D)}if(Po(w)||bo(w))return V!==null?null:h(b,y,w,D,null);kl(b,w)}return null}function v(b,y,w,D,V){if(typeof D=="string"&&D!==""||typeof D=="number")return b=b.get(w)||null,l(y,b,""+D,V);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case dl:return b=b.get(D.key===null?w:D.key)||null,c(y,b,D,V);case is:return b=b.get(D.key===null?w:D.key)||null,d(y,b,D,V);case Cr:var O=D._init;return v(b,y,w,O(D._payload),V)}if(Po(D)||bo(D))return b=b.get(w)||null,h(y,b,D,V,null);kl(y,D)}return null}function N(b,y,w,D){for(var V=null,O=null,k=y,x=y=0,_=null;k!==null&&x<w.length;x++){k.index>x?(_=k,k=null):_=k.sibling;var E=m(b,k,w[x],D);if(E===null){k===null&&(k=_);break}t&&k&&E.alternate===null&&e(b,k),y=s(E,y,x),O===null?V=E:O.sibling=E,O=E,k=_}if(x===w.length)return n(b,k),$e&&mi(b,x),V;if(k===null){for(;x<w.length;x++)k=p(b,w[x],D),k!==null&&(y=s(k,y,x),O===null?V=k:O.sibling=k,O=k);return $e&&mi(b,x),V}for(k=r(b,k);x<w.length;x++)_=v(k,b,x,w[x],D),_!==null&&(t&&_.alternate!==null&&k.delete(_.key===null?x:_.key),y=s(_,y,x),O===null?V=_:O.sibling=_,O=_);return t&&k.forEach(function(z){return e(b,z)}),$e&&mi(b,x),V}function C(b,y,w,D){var V=bo(w);if(typeof V!="function")throw Error(X(150));if(w=V.call(w),w==null)throw Error(X(151));for(var O=V=null,k=y,x=y=0,_=null,E=w.next();k!==null&&!E.done;x++,E=w.next()){k.index>x?(_=k,k=null):_=k.sibling;var z=m(b,k,E.value,D);if(z===null){k===null&&(k=_);break}t&&k&&z.alternate===null&&e(b,k),y=s(z,y,x),O===null?V=z:O.sibling=z,O=z,k=_}if(E.done)return n(b,k),$e&&mi(b,x),V;if(k===null){for(;!E.done;x++,E=w.next())E=p(b,E.value,D),E!==null&&(y=s(E,y,x),O===null?V=E:O.sibling=E,O=E);return $e&&mi(b,x),V}for(k=r(b,k);!E.done;x++,E=w.next())E=v(k,b,x,E.value,D),E!==null&&(t&&E.alternate!==null&&k.delete(E.key===null?x:E.key),y=s(E,y,x),O===null?V=E:O.sibling=E,O=E);return t&&k.forEach(function(A){return e(b,A)}),$e&&mi(b,x),V}function P(b,y,w,D){if(typeof w=="object"&&w!==null&&w.type===ss&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case dl:e:{for(var V=w.key,O=y;O!==null;){if(O.key===V){if(V=w.type,V===ss){if(O.tag===7){n(b,O.sibling),y=i(O,w.props.children),y.return=b,b=y;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Cr&&tx(V)===O.type){n(b,O.sibling),y=i(O,w.props),y.ref=To(b,O,w),y.return=b,b=y;break e}n(b,O);break}else e(b,O);O=O.sibling}w.type===ss?(y=ji(w.props.children,b.mode,D,w.key),y.return=b,b=y):(D=Ql(w.type,w.key,w.props,null,b.mode,D),D.ref=To(b,y,w),D.return=b,b=D)}return o(b);case is:e:{for(O=w.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(b,y.sibling),y=i(y,w.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else e(b,y);y=y.sibling}y=Id(w,b.mode,D),y.return=b,b=y}return o(b);case Cr:return O=w._init,P(b,y,O(w._payload),D)}if(Po(w))return N(b,y,w,D);if(bo(w))return C(b,y,w,D);kl(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(b,y.sibling),y=i(y,w),y.return=b,b=y):(n(b,y),y=Sd(w,b.mode,D),y.return=b,b=y),o(b)):n(b,y)}return P}var Ds=Ow(!0),Fw=Ow(!1),_c=ii(null),Nc=null,fs=null,jp=null;function Sp(){jp=fs=Nc=null}function Ip(t){var e=_c.current;Oe(_c),t._currentValue=e}function Bh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Es(t,e){Nc=t,jp=fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function yn(t){var e=t._currentValue;if(jp!==t)if(t={context:t,memoizedValue:e,next:null},fs===null){if(Nc===null)throw Error(X(308));fs=t,Nc.dependencies={lanes:0,firstContext:t}}else fs=fs.next=t;return e}var bi=null;function zp(t){bi===null?bi=[t]:bi.push(t)}function Bw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,zp(e)):(n.next=i.next,i.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var jr=!1;function Ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ar(t,n)}return i=r.interleaved,i===null?(e.next=e,zp(r)):(e.next=i.next,i.next=e),r.interleaved=e,ar(t,n)}function $l(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xp(t,n)}}function nx(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ec(t,e,n,r){var i=t.updateQueue;jr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?s=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(s!==null){var p=i.baseState;o=0,h=d=c=null,l=s;do{var m=l.lane,v=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,C=l;switch(m=e,v=n,C.tag){case 1:if(N=C.payload,typeof N=="function"){p=N.call(v,p,m);break e}p=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=C.payload,m=typeof N=="function"?N.call(v,p,m):N,m==null)break e;p=Ge({},p,m);break e;case 2:jr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,c=p):h=h.next=v,o|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(c=p),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Di|=o,t.lanes=o,t.memoizedState=p}}function rx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var Ba={},On=ii(Ba),xa=ii(Ba),ya=ii(Ba);function ki(t){if(t===Ba)throw Error(X(174));return t}function Pp(t,e){switch(De(ya,e),De(xa,t),De(On,Ba),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=bh(e,t)}Oe(On),De(On,e)}function Vs(){Oe(On),Oe(xa),Oe(ya)}function $w(t){ki(ya.current);var e=ki(On.current),n=bh(e,t.type);e!==n&&(De(xa,t),De(On,n))}function Rp(t){xa.current===t&&(Oe(On),Oe(xa))}var qe=ii(0);function Tc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _d=[];function Dp(){for(var t=0;t<_d.length;t++)_d[t]._workInProgressVersionPrimary=null;_d.length=0}var Wl=xr.ReactCurrentDispatcher,Nd=xr.ReactCurrentBatchConfig,Ri=0,He=null,ht=null,yt=null,Cc=!1,Ho=!1,va=0,aC=0;function jt(){throw Error(X(321))}function Vp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function Mp(t,e,n,r,i,s){if(Ri=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wl.current=t===null||t.memoizedState===null?dC:hC,t=n(r,i),Ho){s=0;do{if(Ho=!1,va=0,25<=s)throw Error(X(301));s+=1,yt=ht=null,e.updateQueue=null,Wl.current=fC,t=n(r,i)}while(Ho)}if(Wl.current=jc,e=ht!==null&&ht.next!==null,Ri=0,yt=ht=He=null,Cc=!1,e)throw Error(X(300));return t}function Lp(){var t=va!==0;return va=0,t}function Dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?He.memoizedState=yt=t:yt=yt.next=t,yt}function vn(){if(ht===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var e=yt===null?He.memoizedState:yt.next;if(e!==null)yt=e,ht=t;else{if(t===null)throw Error(X(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},yt===null?He.memoizedState=yt=t:yt=yt.next=t}return yt}function wa(t,e){return typeof e=="function"?e(t):e}function Ed(t){var e=vn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=ht,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,c=null,d=s;do{var h=d.lane;if((Ri&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,He.lanes|=h,Di|=h}d=d.next}while(d!==null&&d!==s);c===null?o=r:c.next=l,Sn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,Di|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Td(t){var e=vn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Sn(s,e.memoizedState)||(Ht=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Ww(){}function qw(t,e){var n=He,r=vn(),i=e(),s=!Sn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ht=!0),r=r.queue,Op(Kw.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,ba(9,Gw.bind(null,n,r,i,e),void 0,null),vt===null)throw Error(X(349));Ri&30||Hw(n,e,i)}return i}function Hw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Gw(t,e,n,r){e.value=n,e.getSnapshot=r,Qw(e)&&Yw(t)}function Kw(t,e,n){return n(function(){Qw(e)&&Yw(t)})}function Qw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function Yw(t){var e=ar(t,1);e!==null&&jn(e,t,1,-1)}function ix(t){var e=Dn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},e.queue=t,t=t.dispatch=uC.bind(null,He,t),[e.memoizedState,t]}function ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Xw(){return vn().memoizedState}function ql(t,e,n,r){var i=Dn();He.flags|=t,i.memoizedState=ba(1|e,n,void 0,r===void 0?null:r)}function cu(t,e,n,r){var i=vn();r=r===void 0?null:r;var s=void 0;if(ht!==null){var o=ht.memoizedState;if(s=o.destroy,r!==null&&Vp(r,o.deps)){i.memoizedState=ba(e,n,s,r);return}}He.flags|=t,i.memoizedState=ba(1|e,n,s,r)}function sx(t,e){return ql(8390656,8,t,e)}function Op(t,e){return cu(2048,8,t,e)}function Jw(t,e){return cu(4,2,t,e)}function Zw(t,e){return cu(4,4,t,e)}function eb(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function tb(t,e,n){return n=n!=null?n.concat([t]):null,cu(4,4,eb.bind(null,e,t),n)}function Fp(){}function nb(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function rb(t,e){var n=vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Vp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ib(t,e,n){return Ri&21?(Sn(n,e)||(n=cw(),He.lanes|=n,Di|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function lC(t,e){var n=Se;Se=n!==0&&4>n?n:4,t(!0);var r=Nd.transition;Nd.transition={};try{t(!1),e()}finally{Se=n,Nd.transition=r}}function sb(){return vn().memoizedState}function cC(t,e,n){var r=Fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ob(t))ab(e,n);else if(n=Bw(t,e,n,r),n!==null){var i=Ot();jn(n,t,r,i),lb(n,e,r)}}function uC(t,e,n){var r=Fr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ob(t))ab(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Sn(l,o)){var c=e.interleaved;c===null?(i.next=i,zp(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Bw(t,e,i,r),n!==null&&(i=Ot(),jn(n,t,r,i),lb(n,e,r))}}function ob(t){var e=t.alternate;return t===He||e!==null&&e===He}function ab(t,e){Ho=Cc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function lb(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,xp(t,n)}}var jc={readContext:yn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},dC={readContext:yn,useCallback:function(t,e){return Dn().memoizedState=[t,e===void 0?null:e],t},useContext:yn,useEffect:sx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ql(4194308,4,eb.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ql(4194308,4,t,e)},useInsertionEffect:function(t,e){return ql(4,2,t,e)},useMemo:function(t,e){var n=Dn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Dn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=cC.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Dn();return t={current:t},e.memoizedState=t},useState:ix,useDebugValue:Fp,useDeferredValue:function(t){return Dn().memoizedState=t},useTransition:function(){var t=ix(!1),e=t[0];return t=lC.bind(null,t[1]),Dn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=Dn();if($e){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),vt===null)throw Error(X(349));Ri&30||Hw(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,sx(Kw.bind(null,r,s,t),[t]),r.flags|=2048,ba(9,Gw.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Dn(),e=vt.identifierPrefix;if($e){var n=nr,r=tr;n=(r&~(1<<32-Cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=va++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=aC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},hC={readContext:yn,useCallback:nb,useContext:yn,useEffect:Op,useImperativeHandle:tb,useInsertionEffect:Jw,useLayoutEffect:Zw,useMemo:rb,useReducer:Ed,useRef:Xw,useState:function(){return Ed(wa)},useDebugValue:Fp,useDeferredValue:function(t){var e=vn();return ib(e,ht.memoizedState,t)},useTransition:function(){var t=Ed(wa)[0],e=vn().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:qw,useId:sb,unstable_isNewReconciler:!1},fC={readContext:yn,useCallback:nb,useContext:yn,useEffect:Op,useImperativeHandle:tb,useInsertionEffect:Jw,useLayoutEffect:Zw,useMemo:rb,useReducer:Td,useRef:Xw,useState:function(){return Td(wa)},useDebugValue:Fp,useDeferredValue:function(t){var e=vn();return ht===null?e.memoizedState=t:ib(e,ht.memoizedState,t)},useTransition:function(){var t=Td(wa)[0],e=vn().memoizedState;return[t,e]},useMutableSource:Ww,useSyncExternalStore:qw,useId:sb,unstable_isNewReconciler:!1};function _n(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Uh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ge({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var uu={isMounted:function(t){return(t=t._reactInternals)?$i(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=Fr(t),s=rr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(jn(e,t,i,r),$l(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),i=Fr(t),s=rr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(jn(e,t,i,r),$l(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=Fr(t),i=rr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(jn(e,t,r,n),$l(e,t,r))}};function ox(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(i,s):!0}function cb(t,e,n){var r=!1,i=Gr,s=e.contextType;return typeof s=="object"&&s!==null?s=yn(s):(i=Qt(e)?Ai:Rt.current,r=e.contextTypes,s=(r=r!=null)?Ps(t,i):Gr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=uu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ax(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&uu.enqueueReplaceState(e,e.state,null)}function $h(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ap(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=yn(s):(s=Qt(e)?Ai:Rt.current,i.context=Ps(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Uh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&uu.enqueueReplaceState(i,i.state,null),Ec(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Ms(t,e){try{var n="",r=e;do n+=BE(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Cd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var pC=typeof WeakMap=="function"?WeakMap:Map;function ub(t,e,n){n=rr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ic||(Ic=!0,ef=r),Wh(t,e)},n}function db(t,e,n){n=rr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Wh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Wh(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function lx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new pC;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=jC.bind(null,t,e,n),e.then(t,t))}function cx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ux(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=rr(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var mC=xr.ReactCurrentOwner,Ht=!1;function Vt(t,e,n,r){e.child=t===null?Fw(e,null,n,r):Ds(e,t.child,n,r)}function dx(t,e,n,r,i){n=n.render;var s=e.ref;return Es(e,i),r=Mp(t,e,n,r,s,i),n=Lp(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):($e&&n&&Ep(e),e.flags|=1,Vt(t,e,r,i),e.child)}function hx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Kp(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,hb(t,e,s,r,i)):(t=Ql(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(o,r)&&t.ref===e.ref)return lr(t,e,i)}return e.flags|=1,t=Br(s,r),t.ref=e.ref,t.return=e,e.child=t}function hb(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(fa(s,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,lr(t,e,i)}return qh(t,e,n,r,i)}function fb(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(ms,Zt),Zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(ms,Zt),Zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,De(ms,Zt),Zt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,De(ms,Zt),Zt|=r;return Vt(t,e,i,n),e.child}function pb(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qh(t,e,n,r,i){var s=Qt(n)?Ai:Rt.current;return s=Ps(e,s),Es(e,i),n=Mp(t,e,n,r,s,i),r=Lp(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,lr(t,e,i)):($e&&r&&Ep(e),e.flags|=1,Vt(t,e,n,i),e.child)}function fx(t,e,n,r,i){if(Qt(n)){var s=!0;wc(e)}else s=!1;if(Es(e,i),e.stateNode===null)Hl(t,e),cb(e,n,r),$h(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=yn(d):(d=Qt(n)?Ai:Rt.current,d=Ps(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&ax(e,o,r,d),jr=!1;var m=e.memoizedState;o.state=m,Ec(e,r,o,i),c=e.memoizedState,l!==r||m!==c||Kt.current||jr?(typeof h=="function"&&(Uh(e,n,h,r),c=e.memoizedState),(l=jr||ox(e,n,l,r,m,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Uw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:_n(e.type,l),o.props=d,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=yn(c):(c=Qt(n)?Ai:Rt.current,c=Ps(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&ax(e,o,r,c),jr=!1,m=e.memoizedState,o.state=m,Ec(e,r,o,i);var N=e.memoizedState;l!==p||m!==N||Kt.current||jr?(typeof v=="function"&&(Uh(e,n,v,r),N=e.memoizedState),(d=jr||ox(e,n,d,r,m,N,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Hh(t,e,n,r,s,i)}function Hh(t,e,n,r,i,s){pb(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Jg(e,n,!1),lr(t,e,s);r=e.stateNode,mC.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ds(e,t.child,null,s),e.child=Ds(e,null,l,s)):Vt(t,e,l,s),e.memoizedState=r.state,i&&Jg(e,n,!0),e.child}function mb(t){var e=t.stateNode;e.pendingContext?Xg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xg(t,e.context,!1),Pp(t,e.containerInfo)}function px(t,e,n,r,i){return Rs(),Cp(i),e.flags|=256,Vt(t,e,n,r),e.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Kh(t){return{baseLanes:t,cachePool:null,transitions:null}}function gb(t,e,n){var r=e.pendingProps,i=qe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),De(qe,i&1),t===null)return Fh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=fu(o,r,0,null),t=ji(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Kh(n),e.memoizedState=Gh,t):Bp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return gC(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Br(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Br(l,s):(s=ji(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Kh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gh,r}return s=t.child,t=s.sibling,r=Br(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Bp(t,e){return e=fu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _l(t,e,n,r){return r!==null&&Cp(r),Ds(e,t.child,null,n),t=Bp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function gC(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Cd(Error(X(422))),_l(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=fu({mode:"visible",children:r.children},i,0,null),s=ji(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Ds(e,t.child,null,o),e.child.memoizedState=Kh(o),e.memoizedState=Gh,s);if(!(e.mode&1))return _l(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(X(419)),r=Cd(s,r,void 0),_l(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ht||l){if(r=vt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,ar(t,i),jn(r,t,i,-1))}return Gp(),r=Cd(Error(X(421))),_l(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=SC.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,en=Mr(i.nextSibling),tn=e,$e=!0,En=null,t!==null&&(cn[un++]=tr,cn[un++]=nr,cn[un++]=Pi,tr=t.id,nr=t.overflow,Pi=e),e=Bp(e,r.children),e.flags|=4096,e)}function mx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bh(t.return,e,n)}function jd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function xb(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vt(t,e,r.children,n),r=qe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mx(t,n,e);else if(t.tag===19)mx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(De(qe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Tc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),jd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Tc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}jd(e,!0,n,null,s);break;case"together":jd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Hl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Br(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Br(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xC(t,e,n){switch(e.tag){case 3:mb(e),Rs();break;case 5:$w(e);break;case 1:Qt(e.type)&&wc(e);break;case 4:Pp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;De(_c,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(De(qe,qe.current&1),e.flags|=128,null):n&e.child.childLanes?gb(t,e,n):(De(qe,qe.current&1),t=lr(t,e,n),t!==null?t.sibling:null);De(qe,qe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return xb(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De(qe,qe.current),r)break;return null;case 22:case 23:return e.lanes=0,fb(t,e,n)}return lr(t,e,n)}var yb,Qh,vb,wb;yb=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qh=function(){};vb=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ki(On.current);var s=null;switch(n){case"input":i=xh(t,i),r=xh(t,r),s=[];break;case"select":i=Ge({},i,{value:void 0}),r=Ge({},r,{value:void 0}),s=[];break;case"textarea":i=wh(t,i),r=wh(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yc)}kh(n,r);var o;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(oa.hasOwnProperty(d)?s||(s=[]):(s=s||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(s=s||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(oa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Me("scroll",t),s||l===c||(s=[])):(s=s||[]).push(d,c))}n&&(s=s||[]).push("style",n);var d=s;(e.updateQueue=d)&&(e.flags|=4)}};wb=function(t,e,n,r){n!==r&&(e.flags|=4)};function Co(t,e){if(!$e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function St(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function yC(t,e,n){var r=e.pendingProps;switch(Tp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(e),null;case 1:return Qt(e.type)&&vc(),St(e),null;case 3:return r=e.stateNode,Vs(),Oe(Kt),Oe(Rt),Dp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,En!==null&&(rf(En),En=null))),Qh(t,e),St(e),null;case 5:Rp(e);var i=ki(ya.current);if(n=e.type,t!==null&&e.stateNode!=null)vb(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(X(166));return St(e),null}if(t=ki(On.current),bl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Mn]=e,r[ga]=s,t=(e.mode&1)!==0,n){case"dialog":Me("cancel",r),Me("close",r);break;case"iframe":case"object":case"embed":Me("load",r);break;case"video":case"audio":for(i=0;i<Do.length;i++)Me(Do[i],r);break;case"source":Me("error",r);break;case"img":case"image":case"link":Me("error",r),Me("load",r);break;case"details":Me("toggle",r);break;case"input":Ng(r,s),Me("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Me("invalid",r);break;case"textarea":Tg(r,s),Me("invalid",r)}kh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&wl(r.textContent,l,t),i=["children",""+l]):oa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Me("scroll",r)}switch(n){case"input":hl(r),Eg(r,s,!0);break;case"textarea":hl(r),Cg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=yc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=K1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Mn]=e,t[ga]=r,yb(t,e,!1,!1),e.stateNode=t;e:{switch(o=_h(n,r),n){case"dialog":Me("cancel",t),Me("close",t),i=r;break;case"iframe":case"object":case"embed":Me("load",t),i=r;break;case"video":case"audio":for(i=0;i<Do.length;i++)Me(Do[i],t);i=r;break;case"source":Me("error",t),i=r;break;case"img":case"image":case"link":Me("error",t),Me("load",t),i=r;break;case"details":Me("toggle",t),i=r;break;case"input":Ng(t,r),i=xh(t,r),Me("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ge({},r,{value:void 0}),Me("invalid",t);break;case"textarea":Tg(t,r),i=wh(t,r),Me("invalid",t);break;default:i=r}kh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var c=l[s];s==="style"?X1(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Q1(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&aa(t,c):typeof c=="number"&&aa(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(oa.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Me("scroll",t):c!=null&&dp(t,s,c,o))}switch(n){case"input":hl(t),Eg(t,r,!1);break;case"textarea":hl(t),Cg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?bs(t,!!r.multiple,s,!1):r.defaultValue!=null&&bs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=yc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return St(e),null;case 6:if(t&&e.stateNode!=null)wb(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(X(166));if(n=ki(ya.current),ki(On.current),bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Mn]=e,(s=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:wl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&wl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Mn]=e,e.stateNode=r}return St(e),null;case 13:if(Oe(qe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($e&&en!==null&&e.mode&1&&!(e.flags&128))Lw(),Rs(),e.flags|=98560,s=!1;else if(s=bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Mn]=e}else Rs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;St(e),s=!1}else En!==null&&(rf(En),En=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||qe.current&1?ft===0&&(ft=3):Gp())),e.updateQueue!==null&&(e.flags|=4),St(e),null);case 4:return Vs(),Qh(t,e),t===null&&pa(e.stateNode.containerInfo),St(e),null;case 10:return Ip(e.type._context),St(e),null;case 17:return Qt(e.type)&&vc(),St(e),null;case 19:if(Oe(qe),s=e.memoizedState,s===null)return St(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Co(s,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tc(t),o!==null){for(e.flags|=128,Co(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return De(qe,qe.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>Ls&&(e.flags|=128,r=!0,Co(s,!1),e.lanes=4194304)}else{if(!r)if(t=Tc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Co(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!$e)return St(e),null}else 2*tt()-s.renderingStartTime>Ls&&n!==1073741824&&(e.flags|=128,r=!0,Co(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=qe.current,De(qe,r?n&1|2:n&1),e):(St(e),null);case 22:case 23:return Hp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Zt&1073741824&&(St(e),e.subtreeFlags&6&&(e.flags|=8192)):St(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function vC(t,e){switch(Tp(e),e.tag){case 1:return Qt(e.type)&&vc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vs(),Oe(Kt),Oe(Rt),Dp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rp(e),null;case 13:if(Oe(qe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Rs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Oe(qe),null;case 4:return Vs(),null;case 10:return Ip(e.type._context),null;case 22:case 23:return Hp(),null;case 24:return null;default:return null}}var Nl=!1,At=!1,wC=typeof WeakSet=="function"?WeakSet:Set,ae=null;function ps(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Je(t,e,r)}else n.current=null}function Yh(t,e,n){try{n()}catch(r){Je(t,e,r)}}var gx=!1;function bC(t,e){if(Ph=mc,t=Ew(),Np(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var v;p!==n||i!==0&&p.nodeType!==3||(l=o+i),p!==s||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(v=p.firstChild)!==null;)m=p,p=v;for(;;){if(p===t)break t;if(m===n&&++d===i&&(l=o),m===s&&++h===r&&(c=o),(v=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rh={focusedElem:t,selectionRange:n},mc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var C=N.memoizedProps,P=N.memoizedState,b=e.stateNode,y=b.getSnapshotBeforeUpdate(e.elementType===e.type?C:_n(e.type,C),P);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(D){Je(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return N=gx,gx=!1,N}function Go(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Yh(e,n,s)}i=i.next}while(i!==r)}}function du(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Xh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bb(t){var e=t.alternate;e!==null&&(t.alternate=null,bb(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Mn],delete e[ga],delete e[Mh],delete e[rC],delete e[iC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function kb(t){return t.tag===5||t.tag===3||t.tag===4}function xx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||kb(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yc));else if(r!==4&&(t=t.child,t!==null))for(Jh(t,e,n),t=t.sibling;t!==null;)Jh(t,e,n),t=t.sibling}function Zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zh(t,e,n),t=t.sibling;t!==null;)Zh(t,e,n),t=t.sibling}var wt=null,Nn=!1;function Nr(t,e,n){for(n=n.child;n!==null;)_b(t,e,n),n=n.sibling}function _b(t,e,n){if(Ln&&typeof Ln.onCommitFiberUnmount=="function")try{Ln.onCommitFiberUnmount(ru,n)}catch{}switch(n.tag){case 5:At||ps(n,e);case 6:var r=wt,i=Nn;wt=null,Nr(t,e,n),wt=r,Nn=i,wt!==null&&(Nn?(t=wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):wt.removeChild(n.stateNode));break;case 18:wt!==null&&(Nn?(t=wt,n=n.stateNode,t.nodeType===8?bd(t.parentNode,n):t.nodeType===1&&bd(t,n),da(t)):bd(wt,n.stateNode));break;case 4:r=wt,i=Nn,wt=n.stateNode.containerInfo,Nn=!0,Nr(t,e,n),wt=r,Nn=i;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Yh(n,e,o),i=i.next}while(i!==r)}Nr(t,e,n);break;case 1:if(!At&&(ps(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Je(n,e,l)}Nr(t,e,n);break;case 21:Nr(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,Nr(t,e,n),At=r):Nr(t,e,n);break;default:Nr(t,e,n)}}function yx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wC),e.forEach(function(r){var i=IC.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,Nn=!1;break e;case 3:wt=l.stateNode.containerInfo,Nn=!0;break e;case 4:wt=l.stateNode.containerInfo,Nn=!0;break e}l=l.return}if(wt===null)throw Error(X(160));_b(s,o,i),wt=null,Nn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){Je(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Nb(e,t),e=e.sibling}function Nb(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wn(e,t),Rn(t),r&4){try{Go(3,t,t.return),du(3,t)}catch(C){Je(t,t.return,C)}try{Go(5,t,t.return)}catch(C){Je(t,t.return,C)}}break;case 1:wn(e,t),Rn(t),r&512&&n!==null&&ps(n,n.return);break;case 5:if(wn(e,t),Rn(t),r&512&&n!==null&&ps(n,n.return),t.flags&32){var i=t.stateNode;try{aa(i,"")}catch(C){Je(t,t.return,C)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&H1(i,s),_h(l,o);var d=_h(l,s);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?X1(i,p):h==="dangerouslySetInnerHTML"?Q1(i,p):h==="children"?aa(i,p):dp(i,h,p,d)}switch(l){case"input":yh(i,s);break;case"textarea":G1(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?bs(i,!!s.multiple,v,!1):m!==!!s.multiple&&(s.defaultValue!=null?bs(i,!!s.multiple,s.defaultValue,!0):bs(i,!!s.multiple,s.multiple?[]:"",!1))}i[ga]=s}catch(C){Je(t,t.return,C)}}break;case 6:if(wn(e,t),Rn(t),r&4){if(t.stateNode===null)throw Error(X(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(C){Je(t,t.return,C)}}break;case 3:if(wn(e,t),Rn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(C){Je(t,t.return,C)}break;case 4:wn(e,t),Rn(t);break;case 13:wn(e,t),Rn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Wp=tt())),r&4&&yx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(d=At)||h,wn(e,t),At=d):wn(e,t),Rn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(p=ae=h;ae!==null;){switch(m=ae,v=m.child,m.tag){case 0:case 11:case 14:case 15:Go(4,m,m.return);break;case 1:ps(m,m.return);var N=m.stateNode;if(typeof N.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(C){Je(r,n,C)}}break;case 5:ps(m,m.return);break;case 22:if(m.memoizedState!==null){wx(p);continue}}v!==null?(v.return=m,ae=v):wx(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{i=p.stateNode,d?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Y1("display",o))}catch(C){Je(t,t.return,C)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(C){Je(t,t.return,C)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:wn(e,t),Rn(t),r&4&&yx(t);break;case 21:break;default:wn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(kb(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(aa(i,""),r.flags&=-33);var s=xx(t);Zh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=xx(t);Jh(t,l,o);break;default:throw Error(X(161))}}catch(c){Je(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kC(t,e,n){ae=t,Eb(t)}function Eb(t,e,n){for(var r=(t.mode&1)!==0;ae!==null;){var i=ae,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Nl;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||At;l=Nl;var d=At;if(Nl=o,(At=c)&&!d)for(ae=i;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?bx(i):c!==null?(c.return=o,ae=c):bx(i);for(;s!==null;)ae=s,Eb(s),s=s.sibling;ae=i,Nl=l,At=d}vx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ae=s):vx(t)}}function vx(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||du(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:_n(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rx(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&da(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}At||e.flags&512&&Xh(e)}catch(m){Je(e,e.return,m)}}if(e===t){ae=null;break}if(n=e.sibling,n!==null){n.return=e.return,ae=n;break}ae=e.return}}function wx(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ae=n;break}ae=e.return}}function bx(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{du(4,e)}catch(c){Je(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Je(e,i,c)}}var s=e.return;try{Xh(e)}catch(c){Je(e,s,c)}break;case 5:var o=e.return;try{Xh(e)}catch(c){Je(e,o,c)}}}catch(c){Je(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var _C=Math.ceil,Sc=xr.ReactCurrentDispatcher,Up=xr.ReactCurrentOwner,mn=xr.ReactCurrentBatchConfig,Te=0,vt=null,it=null,Et=0,Zt=0,ms=ii(0),ft=0,ka=null,Di=0,hu=0,$p=0,Ko=null,qt=null,Wp=0,Ls=1/0,Jn=null,Ic=!1,ef=null,Or=null,El=!1,Ar=null,zc=0,Qo=0,tf=null,Gl=-1,Kl=0;function Ot(){return Te&6?tt():Gl!==-1?Gl:Gl=tt()}function Fr(t){return t.mode&1?Te&2&&Et!==0?Et&-Et:oC.transition!==null?(Kl===0&&(Kl=cw()),Kl):(t=Se,t!==0||(t=window.event,t=t===void 0?16:gw(t.type)),t):1}function jn(t,e,n,r){if(50<Qo)throw Qo=0,tf=null,Error(X(185));La(t,n,r),(!(Te&2)||t!==vt)&&(t===vt&&(!(Te&2)&&(hu|=n),ft===4&&Ir(t,Et)),Yt(t,r),n===1&&Te===0&&!(e.mode&1)&&(Ls=tt()+500,lu&&si()))}function Yt(t,e){var n=t.callbackNode;oT(t,e);var r=pc(t,t===vt?Et:0);if(r===0)n!==null&&Ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ig(n),e===1)t.tag===0?sC(kx.bind(null,t)):Dw(kx.bind(null,t)),tC(function(){!(Te&6)&&si()}),n=null;else{switch(uw(r)){case 1:n=gp;break;case 4:n=aw;break;case 16:n=fc;break;case 536870912:n=lw;break;default:n=fc}n=Pb(n,Tb.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Tb(t,e){if(Gl=-1,Kl=0,Te&6)throw Error(X(327));var n=t.callbackNode;if(Ts()&&t.callbackNode!==n)return null;var r=pc(t,t===vt?Et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ac(t,r);else{e=r;var i=Te;Te|=2;var s=jb();(vt!==t||Et!==e)&&(Jn=null,Ls=tt()+500,Ci(t,e));do try{TC();break}catch(l){Cb(t,l)}while(!0);Sp(),Sc.current=s,Te=i,it!==null?e=0:(vt=null,Et=0,e=ft)}if(e!==0){if(e===2&&(i=jh(t),i!==0&&(r=i,e=nf(t,i))),e===1)throw n=ka,Ci(t,0),Ir(t,r),Yt(t,tt()),n;if(e===6)Ir(t,r);else{if(i=t.current.alternate,!(r&30)&&!NC(i)&&(e=Ac(t,r),e===2&&(s=jh(t),s!==0&&(r=s,e=nf(t,s))),e===1))throw n=ka,Ci(t,0),Ir(t,r),Yt(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(X(345));case 2:gi(t,qt,Jn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Wp+500-tt(),10<e)){if(pc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ot(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vh(gi.bind(null,t,qt,Jn),e);break}gi(t,qt,Jn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Cn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_C(r/1960))-r,10<r){t.timeoutHandle=Vh(gi.bind(null,t,qt,Jn),r);break}gi(t,qt,Jn);break;case 5:gi(t,qt,Jn);break;default:throw Error(X(329))}}}return Yt(t,tt()),t.callbackNode===n?Tb.bind(null,t):null}function nf(t,e){var n=Ko;return t.current.memoizedState.isDehydrated&&(Ci(t,e).flags|=256),t=Ac(t,e),t!==2&&(e=qt,qt=n,e!==null&&rf(e)),t}function rf(t){qt===null?qt=t:qt.push.apply(qt,t)}function NC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Sn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~$p,e&=~hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Cn(e),r=1<<n;t[n]=-1,e&=~r}}function kx(t){if(Te&6)throw Error(X(327));Ts();var e=pc(t,0);if(!(e&1))return Yt(t,tt()),null;var n=Ac(t,e);if(t.tag!==0&&n===2){var r=jh(t);r!==0&&(e=r,n=nf(t,r))}if(n===1)throw n=ka,Ci(t,0),Ir(t,e),Yt(t,tt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gi(t,qt,Jn),Yt(t,tt()),null}function qp(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(Ls=tt()+500,lu&&si())}}function Vi(t){Ar!==null&&Ar.tag===0&&!(Te&6)&&Ts();var e=Te;Te|=1;var n=mn.transition,r=Se;try{if(mn.transition=null,Se=1,t)return t()}finally{Se=r,mn.transition=n,Te=e,!(Te&6)&&si()}}function Hp(){Zt=ms.current,Oe(ms)}function Ci(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,eC(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(Tp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vc();break;case 3:Vs(),Oe(Kt),Oe(Rt),Dp();break;case 5:Rp(r);break;case 4:Vs();break;case 13:Oe(qe);break;case 19:Oe(qe);break;case 10:Ip(r.type._context);break;case 22:case 23:Hp()}n=n.return}if(vt=t,it=t=Br(t.current,null),Et=Zt=e,ft=0,ka=null,$p=hu=Di=0,qt=Ko=null,bi!==null){for(e=0;e<bi.length;e++)if(n=bi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}bi=null}return t}function Cb(t,e){do{var n=it;try{if(Sp(),Wl.current=jc,Cc){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Cc=!1}if(Ri=0,yt=ht=He=null,Ho=!1,va=0,Up.current=null,n===null||n.return===null){ft=1,ka=e,it=null;break}e:{var s=t,o=n.return,l=n,c=e;if(e=Et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=cx(o);if(v!==null){v.flags&=-257,ux(v,o,l,s,e),v.mode&1&&lx(s,d,e),e=v,c=d;var N=e.updateQueue;if(N===null){var C=new Set;C.add(c),e.updateQueue=C}else N.add(c);break e}else{if(!(e&1)){lx(s,d,e),Gp();break e}c=Error(X(426))}}else if($e&&l.mode&1){var P=cx(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),ux(P,o,l,s,e),Cp(Ms(c,l));break e}}s=c=Ms(c,l),ft!==4&&(ft=2),Ko===null?Ko=[s]:Ko.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var b=ub(s,c,e);nx(s,b);break e;case 1:l=c;var y=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Or===null||!Or.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var D=db(s,l,e);nx(s,D);break e}}s=s.return}while(s!==null)}Ib(n)}catch(V){e=V,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function jb(){var t=Sc.current;return Sc.current=jc,t===null?jc:t}function Gp(){(ft===0||ft===3||ft===2)&&(ft=4),vt===null||!(Di&268435455)&&!(hu&268435455)||Ir(vt,Et)}function Ac(t,e){var n=Te;Te|=2;var r=jb();(vt!==t||Et!==e)&&(Jn=null,Ci(t,e));do try{EC();break}catch(i){Cb(t,i)}while(!0);if(Sp(),Te=n,Sc.current=r,it!==null)throw Error(X(261));return vt=null,Et=0,ft}function EC(){for(;it!==null;)Sb(it)}function TC(){for(;it!==null&&!XE();)Sb(it)}function Sb(t){var e=Ab(t.alternate,t,Zt);t.memoizedProps=t.pendingProps,e===null?Ib(t):it=e,Up.current=null}function Ib(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=vC(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,it=null;return}}else if(n=yC(n,e,Zt),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ft===0&&(ft=5)}function gi(t,e,n){var r=Se,i=mn.transition;try{mn.transition=null,Se=1,CC(t,e,n,r)}finally{mn.transition=i,Se=r}return null}function CC(t,e,n,r){do Ts();while(Ar!==null);if(Te&6)throw Error(X(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(aT(t,s),t===vt&&(it=vt=null,Et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||El||(El=!0,Pb(fc,function(){return Ts(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=mn.transition,mn.transition=null;var o=Se;Se=1;var l=Te;Te|=4,Up.current=null,bC(t,n),Nb(n,t),GT(Rh),mc=!!Ph,Rh=Ph=null,t.current=n,kC(n),JE(),Te=l,Se=o,mn.transition=s}else t.current=n;if(El&&(El=!1,Ar=t,zc=i),s=t.pendingLanes,s===0&&(Or=null),tT(n.stateNode),Yt(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ic)throw Ic=!1,t=ef,ef=null,t;return zc&1&&t.tag!==0&&Ts(),s=t.pendingLanes,s&1?t===tf?Qo++:(Qo=0,tf=t):Qo=0,si(),null}function Ts(){if(Ar!==null){var t=uw(zc),e=mn.transition,n=Se;try{if(mn.transition=null,Se=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,zc=0,Te&6)throw Error(X(331));var i=Te;for(Te|=4,ae=t.current;ae!==null;){var s=ae,o=s.child;if(ae.flags&16){var l=s.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(ae=d;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Go(8,h,s)}var p=h.child;if(p!==null)p.return=h,ae=p;else for(;ae!==null;){h=ae;var m=h.sibling,v=h.return;if(bb(h),h===d){ae=null;break}if(m!==null){m.return=v,ae=m;break}ae=v}}}var N=s.alternate;if(N!==null){var C=N.child;if(C!==null){N.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}ae=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ae=o;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Go(9,s,s.return)}var b=s.sibling;if(b!==null){b.return=s.return,ae=b;break e}ae=s.return}}var y=t.current;for(ae=y;ae!==null;){o=ae;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ae=w;else e:for(o=y;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:du(9,l)}}catch(V){Je(l,l.return,V)}if(l===o){ae=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,ae=D;break e}ae=l.return}}if(Te=i,si(),Ln&&typeof Ln.onPostCommitFiberRoot=="function")try{Ln.onPostCommitFiberRoot(ru,t)}catch{}r=!0}return r}finally{Se=n,mn.transition=e}}return!1}function _x(t,e,n){e=Ms(n,e),e=ub(t,e,1),t=Lr(t,e,1),e=Ot(),t!==null&&(La(t,1,e),Yt(t,e))}function Je(t,e,n){if(t.tag===3)_x(t,t,n);else for(;e!==null;){if(e.tag===3){_x(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Ms(n,t),t=db(e,t,1),e=Lr(e,t,1),t=Ot(),e!==null&&(La(e,1,t),Yt(e,t));break}}e=e.return}}function jC(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ot(),t.pingedLanes|=t.suspendedLanes&n,vt===t&&(Et&n)===n&&(ft===4||ft===3&&(Et&130023424)===Et&&500>tt()-Wp?Ci(t,0):$p|=n),Yt(t,e)}function zb(t,e){e===0&&(t.mode&1?(e=ml,ml<<=1,!(ml&130023424)&&(ml=4194304)):e=1);var n=Ot();t=ar(t,e),t!==null&&(La(t,e,n),Yt(t,n))}function SC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),zb(t,n)}function IC(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(e),zb(t,n)}var Ab;Ab=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,xC(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,$e&&e.flags&1048576&&Vw(e,kc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Hl(t,e),t=e.pendingProps;var i=Ps(e,Rt.current);Es(e,n),i=Mp(null,e,r,t,i,n);var s=Lp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(r)?(s=!0,wc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ap(e),i.updater=uu,e.stateNode=i,i._reactInternals=e,$h(e,r,t,n),e=Hh(null,e,r,!0,s,n)):(e.tag=0,$e&&s&&Ep(e),Vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Hl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=AC(r),t=_n(r,t),i){case 0:e=qh(null,e,r,t,n);break e;case 1:e=fx(null,e,r,t,n);break e;case 11:e=dx(null,e,r,t,n);break e;case 14:e=hx(null,e,r,_n(r.type,t),n);break e}throw Error(X(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),qh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),fx(t,e,r,i,n);case 3:e:{if(mb(e),t===null)throw Error(X(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Uw(t,e),Ec(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Ms(Error(X(423)),e),e=px(t,e,r,n,i);break e}else if(r!==i){i=Ms(Error(X(424)),e),e=px(t,e,r,n,i);break e}else for(en=Mr(e.stateNode.containerInfo.firstChild),tn=e,$e=!0,En=null,n=Fw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Rs(),r===i){e=lr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return $w(e),t===null&&Fh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Dh(r,i)?o=null:s!==null&&Dh(r,s)&&(e.flags|=32),pb(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&Fh(e),null;case 13:return gb(t,e,n);case 4:return Pp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ds(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),dx(t,e,r,i,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,De(_c,r._currentValue),r._currentValue=o,s!==null)if(Sn(s.value,o)){if(s.children===i.children&&!Kt.current){e=lr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=rr(-1,n&-n),c.tag=2;var d=s.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Bh(s.return,n,e),l.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(X(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Bh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Es(e,n),i=yn(i),r=r(i),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,i=_n(r,e.pendingProps),i=_n(r.type,i),hx(t,e,r,i,n);case 15:return hb(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:_n(r,i),Hl(t,e),e.tag=1,Qt(r)?(t=!0,wc(e)):t=!1,Es(e,n),cb(e,r,i),$h(e,r,i,n),Hh(null,e,r,!0,t,n);case 19:return xb(t,e,n);case 22:return fb(t,e,n)}throw Error(X(156,e.tag))};function Pb(t,e){return ow(t,e)}function zC(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new zC(t,e,n,r)}function Kp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function AC(t){if(typeof t=="function")return Kp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fp)return 11;if(t===pp)return 14}return 2}function Br(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ql(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Kp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ss:return ji(n.children,i,s,e);case hp:o=8,i|=8;break;case fh:return t=fn(12,n,e,i|2),t.elementType=fh,t.lanes=s,t;case ph:return t=fn(13,n,e,i),t.elementType=ph,t.lanes=s,t;case mh:return t=fn(19,n,e,i),t.elementType=mh,t.lanes=s,t;case $1:return fu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case B1:o=10;break e;case U1:o=9;break e;case fp:o=11;break e;case pp:o=14;break e;case Cr:o=16,r=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=fn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ji(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function fu(t,e,n,r){return t=fn(22,t,r,e),t.elementType=$1,t.lanes=n,t.stateNode={isHidden:!1},t}function Sd(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function Id(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PC(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Qp(t,e,n,r,i,s,o,l,c){return t=new PC(t,e,n,l,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(s),t}function RC(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:is,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rb(t){if(!t)return Gr;t=t._reactInternals;e:{if($i(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(Qt(n))return Rw(t,n,e)}return e}function Db(t,e,n,r,i,s,o,l,c){return t=Qp(n,r,!0,t,i,s,o,l,c),t.context=Rb(null),n=t.current,r=Ot(),i=Fr(n),s=rr(r,i),s.callback=e??null,Lr(n,s,i),t.current.lanes=i,La(t,i,r),Yt(t,r),t}function pu(t,e,n,r){var i=e.current,s=Ot(),o=Fr(i);return n=Rb(n),e.context===null?e.context=n:e.pendingContext=n,e=rr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,o),t!==null&&(jn(t,i,o,s),$l(t,i,o)),o}function Pc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Yp(t,e){Nx(t,e),(t=t.alternate)&&Nx(t,e)}function DC(){return null}var Vb=typeof reportError=="function"?reportError:function(t){console.error(t)};function Xp(t){this._internalRoot=t}mu.prototype.render=Xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));pu(t,e,null,null)};mu.prototype.unmount=Xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Vi(function(){pu(null,t,null,null)}),e[or]=null}};function mu(t){this._internalRoot=t}mu.prototype.unstable_scheduleHydration=function(t){if(t){var e=fw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&mw(t)}};function Jp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ex(){}function VC(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var d=Pc(o);s.call(d)}}var o=Db(e,r,t,0,null,!1,!1,"",Ex);return t._reactRootContainer=o,t[or]=o.current,pa(t.nodeType===8?t.parentNode:t),Vi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Pc(c);l.call(d)}}var c=Qp(t,0,!1,null,null,!1,!1,"",Ex);return t._reactRootContainer=c,t[or]=c.current,pa(t.nodeType===8?t.parentNode:t),Vi(function(){pu(e,c,n,r)}),c}function xu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var c=Pc(o);l.call(c)}}pu(e,o,t,i)}else o=VC(n,e,t,i,r);return Pc(o)}dw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ro(e.pendingLanes);n!==0&&(xp(e,n|1),Yt(e,tt()),!(Te&6)&&(Ls=tt()+500,si()))}break;case 13:Vi(function(){var r=ar(t,1);if(r!==null){var i=Ot();jn(r,t,1,i)}}),Yp(t,1)}};yp=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Ot();jn(e,t,134217728,n)}Yp(t,134217728)}};hw=function(t){if(t.tag===13){var e=Fr(t),n=ar(t,e);if(n!==null){var r=Ot();jn(n,t,e,r)}Yp(t,e)}};fw=function(){return Se};pw=function(t,e){var n=Se;try{return Se=t,e()}finally{Se=n}};Eh=function(t,e,n){switch(e){case"input":if(yh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=au(r);if(!i)throw Error(X(90));q1(r),yh(r,i)}}}break;case"textarea":G1(t,n);break;case"select":e=n.value,e!=null&&bs(t,!!n.multiple,e,!1)}};ew=qp;tw=Vi;var MC={usingClientEntryPoint:!1,Events:[Fa,cs,au,J1,Z1,qp]},jo={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LC={bundleType:jo.bundleType,version:jo.version,rendererPackageName:jo.rendererPackageName,rendererConfig:jo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=iw(t),t===null?null:t.stateNode},findFiberByHostInstance:jo.findFiberByHostInstance||DC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tl.isDisabled&&Tl.supportsFiber)try{ru=Tl.inject(LC),Ln=Tl}catch{}}on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MC;on.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jp(e))throw Error(X(200));return RC(t,e,null,n)};on.createRoot=function(t,e){if(!Jp(t))throw Error(X(299));var n=!1,r="",i=Vb;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Qp(t,1,!1,null,null,n,!1,r,i),t[or]=e.current,pa(t.nodeType===8?t.parentNode:t),new Xp(e)};on.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=iw(e),t=t===null?null:t.stateNode,t};on.flushSync=function(t){return Vi(t)};on.hydrate=function(t,e,n){if(!gu(e))throw Error(X(200));return xu(null,t,e,!0,n)};on.hydrateRoot=function(t,e,n){if(!Jp(t))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Vb;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Db(e,null,t,1,n??null,i,!1,s,o),t[or]=e.current,pa(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new mu(e)};on.render=function(t,e,n){if(!gu(e))throw Error(X(200));return xu(null,t,e,!1,n)};on.unmountComponentAtNode=function(t){if(!gu(t))throw Error(X(40));return t._reactRootContainer?(Vi(function(){xu(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};on.unstable_batchedUpdates=qp;on.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gu(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return xu(t,e,n,!1,r)};on.version="18.3.1-next-f1338f8080-20240426";function Mb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Mb)}catch(t){console.error(t)}}Mb(),M1.exports=on;var sn=M1.exports,Tx=sn;dh.createRoot=Tx.createRoot,dh.hydrateRoot=Tx.hydrateRoot;const Zp=I.createContext({});function oi(t){const e=I.useRef(null);return e.current===null&&(e.current=t()),e.current}const em=typeof window<"u",tm=em?I.useLayoutEffect:I.useEffect,yu=I.createContext(null);function nm(t,e){t.indexOf(e)===-1&&t.push(e)}function rm(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function OC([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[s]=t.splice(e,1);t.splice(i,0,s)}return t}const cr=(t,e,n)=>n>e?e:n<t?t:n;let im=()=>{};const ur={},Lb=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Ob(t){return typeof t=="object"&&t!==null}const Fb=t=>/^0[^.\s]+$/u.test(t);function sm(t){let e;return()=>(e===void 0&&(e=t()),e)}const gn=t=>t,FC=(t,e)=>n=>e(t(n)),Ua=(...t)=>t.reduce(FC),_a=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class om{constructor(){this.subscriptions=[]}add(e){return nm(this.subscriptions,e),()=>rm(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fn=t=>t*1e3,pn=t=>t/1e3;function Bb(t,e){return e?t*(1e3/e):0}const Ub=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,BC=1e-7,UC=12;function $C(t,e,n,r,i){let s,o,l=0;do o=e+(n-e)/2,s=Ub(o,r,i)-t,s>0?n=o:e=o;while(Math.abs(s)>BC&&++l<UC);return o}function $a(t,e,n,r){if(t===e&&n===r)return gn;const i=s=>$C(s,0,1,t,n);return s=>s===0||s===1?s:Ub(i(s),e,r)}const $b=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Wb=t=>e=>1-t(1-e),qb=$a(.33,1.53,.69,.99),am=Wb(qb),Hb=$b(am),Gb=t=>(t*=2)<1?.5*am(t):.5*(2-Math.pow(2,-10*(t-1))),lm=t=>1-Math.sin(Math.acos(t)),Kb=Wb(lm),Qb=$b(lm),WC=$a(.42,0,1,1),qC=$a(0,0,.58,1),Yb=$a(.42,0,.58,1),HC=t=>Array.isArray(t)&&typeof t[0]!="number",Xb=t=>Array.isArray(t)&&typeof t[0]=="number",GC={linear:gn,easeIn:WC,easeInOut:Yb,easeOut:qC,circIn:lm,circInOut:Qb,circOut:Kb,backIn:am,backInOut:Hb,backOut:qb,anticipate:Gb},KC=t=>typeof t=="string",Cx=t=>{if(Xb(t)){im(t.length===4);const[e,n,r,i]=t;return $a(e,n,r,i)}else if(KC(t))return GC[t];return t},Cl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function QC(t,e){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,p=!1,m=!1)=>{const N=m&&i?n:r;return p&&o.add(h),N.has(h)||N.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const YC=40;function Jb(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Cl.reduce((w,D)=>(w[D]=QC(s),w),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:v,postRender:N}=o,C=()=>{const w=ur.useManualTiming?i.timestamp:performance.now();n=!1,ur.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(w-i.timestamp,YC),1)),i.timestamp=w,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),p.process(i),m.process(i),v.process(i),N.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(C))},P=()=>{n=!0,r=!0,i.isProcessing||t(C)};return{schedule:Cl.reduce((w,D)=>{const V=o[D];return w[D]=(O,k=!1,x=!1)=>(n||P(),V.schedule(O,k,x)),w},{}),cancel:w=>{for(let D=0;D<Cl.length;D++)o[Cl[D]].cancel(w)},state:i,steps:o}}const{schedule:Fe,cancel:dr,state:bt,steps:zd}=Jb(typeof requestAnimationFrame<"u"?requestAnimationFrame:gn,!0);let Yl;function XC(){Yl=void 0}const Gt={now:()=>(Yl===void 0&&Gt.set(bt.isProcessing||ur.useManualTiming?bt.timestamp:performance.now()),Yl),set:t=>{Yl=t,queueMicrotask(XC)}},Zb=t=>e=>typeof e=="string"&&e.startsWith(t),e2=Zb("--"),JC=Zb("var(--"),cm=t=>JC(t)?ZC.test(t.split("/*")[0].trim()):!1,ZC=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ys={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Na={...Ys,transform:t=>cr(0,1,t)},jl={...Ys,default:1},Yo=t=>Math.round(t*1e5)/1e5,um=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function ej(t){return t==null}const tj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dm=(t,e)=>n=>!!(typeof n=="string"&&tj.test(n)&&n.startsWith(t)||e&&!ej(n)&&Object.prototype.hasOwnProperty.call(n,e)),t2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(um);return{[t]:parseFloat(i),[e]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},nj=t=>cr(0,255,t),Ad={...Ys,transform:t=>Math.round(nj(t))},_i={test:dm("rgb","red"),parse:t2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ad.transform(t)+", "+Ad.transform(e)+", "+Ad.transform(n)+", "+Yo(Na.transform(r))+")"};function rj(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const sf={test:dm("#"),parse:rj,transform:_i.transform},Wa=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Tr=Wa("deg"),Bn=Wa("%"),pe=Wa("px"),ij=Wa("vh"),sj=Wa("vw"),jx={...Bn,parse:t=>Bn.parse(t)/100,transform:t=>Bn.transform(t*100)},gs={test:dm("hsl","hue"),parse:t2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Bn.transform(Yo(e))+", "+Bn.transform(Yo(n))+", "+Yo(Na.transform(r))+")"},rt={test:t=>_i.test(t)||sf.test(t)||gs.test(t),parse:t=>_i.test(t)?_i.parse(t):gs.test(t)?gs.parse(t):sf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?_i.transform(t):gs.transform(t),getAnimatableNone:t=>{const e=rt.parse(t);return e.alpha=0,rt.transform(e)}},oj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function aj(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(um))==null?void 0:e.length)||0)+(((n=t.match(oj))==null?void 0:n.length)||0)>0}const n2="number",r2="color",lj="var",cj="var(",Sx="${}",uj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ea(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=e.replace(uj,c=>(rt.test(c)?(r.color.push(s),i.push(r2),n.push(rt.parse(c))):c.startsWith(cj)?(r.var.push(s),i.push(lj),n.push(c)):(r.number.push(s),i.push(n2),n.push(parseFloat(c))),++s,Sx)).split(Sx);return{values:n,split:l,indexes:r,types:i}}function i2(t){return Ea(t).values}function s2(t){const{split:e,types:n}=Ea(t),r=e.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=e[o],i[o]!==void 0){const l=n[o];l===n2?s+=Yo(i[o]):l===r2?s+=rt.transform(i[o]):s+=i[o]}return s}}const dj=t=>typeof t=="number"?0:rt.test(t)?rt.getAnimatableNone(t):t;function hj(t){const e=i2(t);return s2(t)(e.map(dj))}const Kr={test:aj,parse:i2,createTransformer:s2,getAnimatableNone:hj};function Pd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function fj({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,s=0,o=0;if(!e)i=s=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=Pd(c,l,t+1/3),s=Pd(c,l,t),o=Pd(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Rc(t,e){return n=>n>0?e:t}const We=(t,e,n)=>t+(e-t)*n,Rd=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},pj=[sf,_i,gs],mj=t=>pj.find(e=>e.test(t));function Ix(t){const e=mj(t);if(!e)return!1;let n=e.parse(t);return e===gs&&(n=fj(n)),n}const zx=(t,e)=>{const n=Ix(t),r=Ix(e);if(!n||!r)return Rc(t,e);const i={...n};return s=>(i.red=Rd(n.red,r.red,s),i.green=Rd(n.green,r.green,s),i.blue=Rd(n.blue,r.blue,s),i.alpha=We(n.alpha,r.alpha,s),_i.transform(i))},of=new Set(["none","hidden"]);function gj(t,e){return of.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function xj(t,e){return n=>We(t,e,n)}function hm(t){return typeof t=="number"?xj:typeof t=="string"?cm(t)?Rc:rt.test(t)?zx:wj:Array.isArray(t)?o2:typeof t=="object"?rt.test(t)?zx:yj:Rc}function o2(t,e){const n=[...t],r=n.length,i=t.map((s,o)=>hm(s)(s,e[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function yj(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=hm(t[i])(t[i],e[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function vj(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const s=e.types[i],o=t.indexes[s][r[s]],l=t.values[o]??0;n[i]=l,r[s]++}return n}const wj=(t,e)=>{const n=Kr.createTransformer(e),r=Ea(t),i=Ea(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?of.has(t)&&!i.values.length||of.has(e)&&!r.values.length?gj(t,e):Ua(o2(vj(r,i),i.values),n):Rc(t,e)};function a2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?We(t,e,n):hm(t)(t,e)}const bj=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>Fe.update(e,n),stop:()=>dr(e),now:()=>bt.isProcessing?bt.timestamp:Gt.now()}},l2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let s=0;s<i;s++)r+=Math.round(t(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Dc=2e4;function fm(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Dc;)e+=n,r=t.next(e);return e>=Dc?1/0:e}function kj(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(fm(r),Dc);return{type:"keyframes",ease:s=>r.next(i*s).value/e,duration:pn(i)}}const _j=5;function c2(t,e,n){const r=Math.max(e-_j,0);return Bb(n-t(r),e-r)}const Xe={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Dd=.001;function Nj({duration:t=Xe.duration,bounce:e=Xe.bounce,velocity:n=Xe.velocity,mass:r=Xe.mass}){let i,s,o=1-e;o=cr(Xe.minDamping,Xe.maxDamping,o),t=cr(Xe.minDuration,Xe.maxDuration,pn(t)),o<1?(i=d=>{const h=d*o,p=h*t,m=h-n,v=af(d,o),N=Math.exp(-p);return Dd-m/v*N},s=d=>{const p=d*o*t,m=p*n+n,v=Math.pow(o,2)*Math.pow(d,2)*t,N=Math.exp(-p),C=af(Math.pow(d,2),o);return(-i(d)+Dd>0?-1:1)*((m-v)*N)/C}):(i=d=>{const h=Math.exp(-d*t),p=(d-n)*t+1;return-Dd+h*p},s=d=>{const h=Math.exp(-d*t),p=(n-d)*(t*t);return h*p});const l=5/t,c=Tj(i,s,l);if(t=Fn(t),isNaN(c))return{stiffness:Xe.stiffness,damping:Xe.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:t}}}const Ej=12;function Tj(t,e,n){let r=n;for(let i=1;i<Ej;i++)r=r-t(r)/e(r);return r}function af(t,e){return t*Math.sqrt(1-e*e)}const Cj=["duration","bounce"],jj=["stiffness","damping","mass"];function Ax(t,e){return e.some(n=>t[n]!==void 0)}function Sj(t){let e={velocity:Xe.velocity,stiffness:Xe.stiffness,damping:Xe.damping,mass:Xe.mass,isResolvedFromDuration:!1,...t};if(!Ax(t,jj)&&Ax(t,Cj))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*cr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Xe.mass,stiffness:i,damping:s}}else{const n=Nj(t);e={...e,...n,mass:Xe.mass},e.isResolvedFromDuration=!0}return e}function Vc(t=Xe.visualDuration,e=Xe.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:v}=Sj({...n,velocity:-pn(n.velocity||0)}),N=m||0,C=d/(2*Math.sqrt(c*h)),P=o-s,b=pn(Math.sqrt(c/h)),y=Math.abs(P)<5;r||(r=y?Xe.restSpeed.granular:Xe.restSpeed.default),i||(i=y?Xe.restDelta.granular:Xe.restDelta.default);let w;if(C<1){const V=af(b,C);w=O=>{const k=Math.exp(-C*b*O);return o-k*((N+C*b*P)/V*Math.sin(V*O)+P*Math.cos(V*O))}}else if(C===1)w=V=>o-Math.exp(-b*V)*(P+(N+b*P)*V);else{const V=b*Math.sqrt(C*C-1);w=O=>{const k=Math.exp(-C*b*O),x=Math.min(V*O,300);return o-k*((N+C*b*P)*Math.sinh(x)+V*P*Math.cosh(x))/V}}const D={calculatedDuration:v&&p||null,next:V=>{const O=w(V);if(v)l.done=V>=p;else{let k=V===0?N:0;C<1&&(k=V===0?Fn(N):c2(w,V,O));const x=Math.abs(k)<=r,_=Math.abs(o-O)<=i;l.done=x&&_}return l.value=l.done?o:O,l},toString:()=>{const V=Math.min(fm(D),Dc),O=l2(k=>D.next(V*k).value,V,30);return V+"ms "+O},toTransition:()=>{}};return D}Vc.applyToOptions=t=>{const e=kj(t,100,Vc);return t.ease=e.ease,t.duration=Fn(e.duration),t.type="keyframes",t};function lf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},v=x=>l!==void 0&&x<l||c!==void 0&&x>c,N=x=>l===void 0?c:c===void 0||Math.abs(l-x)<Math.abs(c-x)?l:c;let C=n*e;const P=p+C,b=o===void 0?P:o(P);b!==P&&(C=b-p);const y=x=>-C*Math.exp(-x/r),w=x=>b+y(x),D=x=>{const _=y(x),E=w(x);m.done=Math.abs(_)<=d,m.value=m.done?b:E};let V,O;const k=x=>{v(m.value)&&(V=x,O=Vc({keyframes:[m.value,N(m.value)],velocity:c2(w,x,m.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return k(0),{calculatedDuration:null,next:x=>{let _=!1;return!O&&V===void 0&&(_=!0,D(x),k(x)),V!==void 0&&x>=V?O.next(x-V):(!_&&D(x),m)}}}function Ij(t,e,n){const r=[],i=n||ur.mix||a2,s=t.length-1;for(let o=0;o<s;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||gn:e;l=Ua(c,l)}r.push(l)}return r}function u2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const s=t.length;if(im(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Ij(e,r,i),c=l.length,d=h=>{if(o&&h<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=_a(t[p],t[p+1],h);return l[p](m)};return n?h=>d(cr(t[0],t[s-1],h)):d}function zj(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=_a(0,e,r);t.push(We(n,1,i))}}function Aj(t){const e=[0];return zj(e,t.length-1),e}function Pj(t,e){return t.map(n=>n*e)}function Rj(t,e){return t.map(()=>e||Yb).splice(0,t.length-1)}function Xo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=HC(r)?r.map(Cx):Cx(r),s={done:!1,value:e[0]},o=Pj(n&&n.length===e.length?n:Aj(e),t),l=u2(o,e,{ease:Array.isArray(i)?i:Rj(e,i)});return{calculatedDuration:t,next:c=>(s.value=l(c),s.done=c>=t,s)}}const Dj=t=>t!==null;function pm(t,{repeat:e,repeatType:n="loop"},r,i=1){const s=t.filter(Dj),l=i<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const Vj={decay:lf,inertia:lf,tween:Xo,keyframes:Xo,spring:Vc};function d2(t){typeof t.type=="string"&&(t.type=Vj[t.type])}class mm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Mj=t=>t/100;class gm extends mm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==Gt.now()&&this.tick(Gt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;d2(e);const{type:n=Xo,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=e;let{keyframes:l}=e;const c=n||Xo;c!==Xo&&typeof l[0]!="number"&&(this.mixKeyframes=Ua(Mj,a2(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=fm(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:v,type:N,onUpdate:C,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const b=this.currentTime-d*(this.playbackSpeed>=0?1:-1),y=this.playbackSpeed>=0?b<0:b>i;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let w=this.currentTime,D=r;if(p){const x=Math.min(this.currentTime,i)/l;let _=Math.floor(x),E=x%1;!E&&x>=1&&(E=1),E===1&&_--,_=Math.min(_,p+1),!!(_%2)&&(m==="reverse"?(E=1-E,v&&(E-=v/l)):m==="mirror"&&(D=o)),w=cr(0,1,E)*l}const V=y?{done:!1,value:h[0]}:D.next(w);s&&(V.value=s(V.value));let{done:O}=V;!y&&c!==null&&(O=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return k&&N!==lf&&(V.value=pm(h,this.options,P,this.speed)),C&&C(V.value),k&&this.finish(),V}then(e,n){return this.finished.then(e,n)}get duration(){return pn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+pn(e)}get time(){return pn(this.currentTime)}set time(e){var n;e=Fn(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Gt.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=pn(this.currentTime))}play(){var i,s;if(this.isStopped)return;const{driver:e=bj,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(i=this.options).onPlay)==null||s.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Gt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Lj(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ni=t=>t*180/Math.PI,cf=t=>{const e=Ni(Math.atan2(t[1],t[0]));return uf(e)},Oj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:cf,rotateZ:cf,skewX:t=>Ni(Math.atan(t[1])),skewY:t=>Ni(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},uf=t=>(t=t%360,t<0&&(t+=360),t),Px=cf,Rx=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Dx=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Fj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Rx,scaleY:Dx,scale:t=>(Rx(t)+Dx(t))/2,rotateX:t=>uf(Ni(Math.atan2(t[6],t[5]))),rotateY:t=>uf(Ni(Math.atan2(-t[2],t[0]))),rotateZ:Px,rotate:Px,skewX:t=>Ni(Math.atan(t[4])),skewY:t=>Ni(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function df(t){return t.includes("scale")?1:0}function hf(t,e){if(!t||t==="none")return df(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Fj,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Oj,i=l}if(!i)return df(e);const s=r[e],o=i[1].split(",").map(Uj);return typeof s=="function"?s(o):o[s]}const Bj=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return hf(n,e)};function Uj(t){return parseFloat(t.trim())}const Xs=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Js=new Set(Xs),Vx=t=>t===Ys||t===pe,$j=new Set(["x","y","z"]),Wj=Xs.filter(t=>!$j.has(t));function qj(t){const e=[];return Wj.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Si={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>hf(e,"x"),y:(t,{transform:e})=>hf(e,"y")};Si.translateX=Si.x;Si.translateY=Si.y;const Ii=new Set;let ff=!1,pf=!1,mf=!1;function h2(){if(pf){const t=Array.from(Ii).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=qj(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{var l;(l=r.getValue(s))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}pf=!1,ff=!1,Ii.forEach(t=>t.complete(mf)),Ii.clear()}function f2(){Ii.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(pf=!0)})}function Hj(){mf=!0,f2(),h2(),mf=!1}class xm{constructor(e,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ii.add(this),ff||(ff=!0,Fe.read(f2),Fe.resolveKeyframes(h2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const s=i==null?void 0:i.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),i&&s===void 0&&i.set(e[0])}Lj(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ii.delete(this)}cancel(){this.state==="scheduled"&&(Ii.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Gj=t=>t.startsWith("--");function Kj(t,e,n){Gj(e)?t.style.setProperty(e,n):t.style[e]=n}const Qj=sm(()=>window.ScrollTimeline!==void 0),Yj={};function Xj(t,e){const n=sm(t);return()=>Yj[e]??n()}const p2=Xj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Vo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,Mx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vo([0,.65,.55,1]),circOut:Vo([.55,0,1,.45]),backIn:Vo([.31,.01,.66,-.59]),backOut:Vo([.33,1.53,.69,.99])};function m2(t,e){if(t)return typeof t=="function"?p2()?l2(t,e):"ease-out":Xb(t)?Vo(t):Array.isArray(t)?t.map(n=>m2(n,e)||Mx.easeOut):Mx[t]}function Jj(t,e,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const p=m2(l,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function g2(t){return typeof t=="function"&&"applyToOptions"in t}function Zj({type:t,...e}){return g2(t)&&p2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class eS extends mm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,im(typeof e.type!="string");const d=Zj(e);this.animation=Jj(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=pm(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):Kj(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return pn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+pn(e)}get time(){return pn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Fn(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&Qj()?(this.animation.timeline=e,gn):n(this)}}const x2={anticipate:Gb,backInOut:Hb,circInOut:Qb};function tS(t){return t in x2}function nS(t){typeof t.ease=="string"&&tS(t.ease)&&(t.ease=x2[t.ease])}const Lx=10;class rS extends eS{constructor(e){nS(e),d2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new gm({...o,autoplay:!1}),c=Fn(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Lx).value,l.sample(c).value,Lx),l.stop()}}const Ox=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Kr.test(t)||t==="0")&&!t.startsWith("url("));function iS(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function sS(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=Ox(i,e),l=Ox(s,e);return!o||!l?!1:iS(t)||(n==="spring"||g2(n))&&r}function gf(t){t.duration=0,t.type="keyframes"}const oS=new Set(["opacity","clipPath","filter","transform"]),aS=sm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function lS(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return aS()&&n&&oS.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const cS=40;class uS extends mm{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:c,motionValue:d,element:h,...p}){var N;super(),this.stop=()=>{var C,P;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=Gt.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:d,element:h,...p},v=(h==null?void 0:h.KeyframeResolver)||xm;this.keyframeResolver=new v(l,(C,P,b)=>this.onKeyframesResolved(C,P,m,!b),c,d,h),(N=this.keyframeResolver)==null||N.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Gt.now(),sS(e,s,o,l)||((ur.instantAnimations||!c)&&(h==null||h(pm(e,r,n))),e[0]=e[e.length-1],gf(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>cS?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},v=!d&&lS(m)?new rS({...m,element:m.motionValue.owner.current}):new gm(m);v.finished.then(()=>this.notifyFinished()).catch(gn),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),Hj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const dS=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function hS(t){const e=dS.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function y2(t,e,n=1){const[r,i]=hS(t);if(!r)return;const s=window.getComputedStyle(e).getPropertyValue(r);if(s){const o=s.trim();return Lb(o)?parseFloat(o):o}return cm(i)?y2(i,e,n+1):i}function ym(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const v2=new Set(["width","height","top","left","right","bottom",...Xs]),fS={test:t=>t==="auto",parse:t=>t},w2=t=>e=>e.test(t),b2=[Ys,pe,Bn,Tr,sj,ij,fS],Fx=t=>b2.find(w2(t));function pS(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Fb(t):!0}const mS=new Set(["brightness","contrast","saturate","opacity"]);function gS(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(um)||[];if(!r)return t;const i=n.replace(r,"");let s=mS.has(e)?1:0;return r!==n&&(s*=100),e+"("+s+i+")"}const xS=/\b([a-z-]*)\(.*?\)/gu,xf={...Kr,getAnimatableNone:t=>{const e=t.match(xS);return e?e.map(gS).join(" "):t}},Bx={...Ys,transform:Math.round},yS={rotate:Tr,rotateX:Tr,rotateY:Tr,rotateZ:Tr,scale:jl,scaleX:jl,scaleY:jl,scaleZ:jl,skew:Tr,skewX:Tr,skewY:Tr,distance:pe,translateX:pe,translateY:pe,translateZ:pe,x:pe,y:pe,z:pe,perspective:pe,transformPerspective:pe,opacity:Na,originX:jx,originY:jx,originZ:pe},vm={borderWidth:pe,borderTopWidth:pe,borderRightWidth:pe,borderBottomWidth:pe,borderLeftWidth:pe,borderRadius:pe,radius:pe,borderTopLeftRadius:pe,borderTopRightRadius:pe,borderBottomRightRadius:pe,borderBottomLeftRadius:pe,width:pe,maxWidth:pe,height:pe,maxHeight:pe,top:pe,right:pe,bottom:pe,left:pe,padding:pe,paddingTop:pe,paddingRight:pe,paddingBottom:pe,paddingLeft:pe,margin:pe,marginTop:pe,marginRight:pe,marginBottom:pe,marginLeft:pe,backgroundPositionX:pe,backgroundPositionY:pe,...yS,zIndex:Bx,fillOpacity:Na,strokeOpacity:Na,numOctaves:Bx},vS={...vm,color:rt,backgroundColor:rt,outlineColor:rt,fill:rt,stroke:rt,borderColor:rt,borderTopColor:rt,borderRightColor:rt,borderBottomColor:rt,borderLeftColor:rt,filter:xf,WebkitFilter:xf},k2=t=>vS[t];function _2(t,e){let n=k2(t);return n!==xf&&(n=Kr),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const wS=new Set(["auto","none","0"]);function bS(t,e,n){let r=0,i;for(;r<t.length&&!i;){const s=t[r];typeof s=="string"&&!wS.has(s)&&Ea(s).values.length&&(i=t[r]),r++}if(i&&n)for(const s of e)t[s]=_2(n,i)}class kS extends xm{constructor(e,n,r,i,s){super(e,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),cm(d))){const h=y2(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!v2.has(r)||e.length!==2)return;const[i,s]=e,o=Fx(i),l=Fx(s);if(o!==l)if(Vx(o)&&Vx(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else Si[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||pS(e[i]))&&r.push(i);r.length&&bS(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Si[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Si[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function _S(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const N2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function E2(t){return Ob(t)&&"offsetHeight"in t}const Ux=30,NS=t=>!isNaN(parseFloat(t)),Jo={current:void 0};class ES{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var s;const i=Gt.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Gt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=NS(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new om);const r=this.events[e].add(n);return e==="change"?()=>{r(),Fe.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Jo.current&&Jo.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Gt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Ux)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ux);return Bb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Mi(t,e){return new ES(t,e)}const{schedule:wm}=Jb(queueMicrotask,!1),kn={x:!1,y:!1};function T2(){return kn.x||kn.y}function TS(t){return t==="x"||t==="y"?kn[t]?null:(kn[t]=!0,()=>{kn[t]=!1}):kn.x||kn.y?null:(kn.x=kn.y=!0,()=>{kn.x=kn.y=!1})}function C2(t,e){const n=_S(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function $x(t){return!(t.pointerType==="touch"||T2())}function CS(t,e,n={}){const[r,i,s]=C2(t,n),o=l=>{if(!$x(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=p=>{$x(p)&&(d(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const j2=(t,e)=>e?t===e?!0:j2(t,e.parentElement):!1,bm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,jS=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function SS(t){return jS.has(t.tagName)||t.tabIndex!==-1}const Xl=new WeakSet;function Wx(t){return e=>{e.key==="Enter"&&t(e)}}function Vd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const IS=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Wx(()=>{if(Xl.has(n))return;Vd(n,"down");const i=Wx(()=>{Vd(n,"up")}),s=()=>Vd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function qx(t){return bm(t)&&!T2()}function zS(t,e,n={}){const[r,i,s]=C2(t,n),o=l=>{const c=l.currentTarget;if(!qx(l))return;Xl.add(c);const d=e(c,l),h=(v,N)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Xl.has(c)&&Xl.delete(c),qx(v)&&typeof d=="function"&&d(v,{success:N})},p=v=>{h(v,c===window||c===document||n.useGlobalTarget||j2(c,v.target))},m=v=>{h(v,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),E2(l)&&(l.addEventListener("focus",d=>IS(d,i)),!SS(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function S2(t){return Ob(t)&&"ownerSVGElement"in t}function AS(t){return S2(t)&&t.tagName==="svg"}function PS(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],s=t[2+n],o=t[3+n],l=u2(i,s,o);return e?l(r):l}const Nt=t=>!!(t&&t.getVelocity),RS=[...b2,rt,Kr],DS=t=>RS.find(w2(t)),vu=I.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function Hx(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function VS(...t){return e=>{let n=!1;const r=t.map(i=>{const s=Hx(i,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():Hx(t[i],null)}}}}function MS(...t){return I.useCallback(VS(...t),t)}class LS extends I.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=E2(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function OS({children:t,isPresent:e,anchorX:n,root:r}){const i=I.useId(),s=I.useRef(null),o=I.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=I.useContext(vu),c=MS(s,t==null?void 0:t.ref);return I.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:v}=o.current;if(e||!s.current||!d||!h)return;const N=n==="left"?`left: ${m}`:`right: ${v}`;s.current.dataset.motionPopId=i;const C=document.createElement("style");l&&(C.nonce=l);const P=r??document.head;return P.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${N}px !important;
            top: ${p}px !important;
          }
        `),()=>{P.contains(C)&&P.removeChild(C)}},[e]),a.jsx(LS,{isPresent:e,childRef:s,sizeRef:o,children:I.cloneElement(t,{ref:c})})}const FS=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:c})=>{const d=oi(BS),h=I.useId();let p=!0,m=I.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:v=>{d.set(v,!0);for(const N of d.values())if(!N)return;r&&r()},register:v=>(d.set(v,!1),()=>d.delete(v))}),[n,d,r]);return s&&p&&(m={...m}),I.useMemo(()=>{d.forEach((v,N)=>d.set(N,!1))},[n]),I.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(t=a.jsx(OS,{isPresent:n,anchorX:l,root:c,children:t})),a.jsx(yu.Provider,{value:m,children:t})};function BS(){return new Map}function I2(t=!0){const e=I.useContext(yu);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,s=I.useId();I.useEffect(()=>{if(t)return i(s)},[t]);const o=I.useCallback(()=>t&&r&&r(s),[s,r,t]);return!n&&r?[!1,o]:[!0]}const Sl=t=>t.key||"";function Gx(t){const e=[];return I.Children.forEach(t,n=>{I.isValidElement(n)&&e.push(n)}),e}const je=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[d,h]=I2(o),p=I.useMemo(()=>Gx(t),[t]),m=o&&!d?[]:p.map(Sl),v=I.useRef(!0),N=I.useRef(p),C=oi(()=>new Map),[P,b]=I.useState(p),[y,w]=I.useState(p);tm(()=>{v.current=!1,N.current=p;for(let O=0;O<y.length;O++){const k=Sl(y[O]);m.includes(k)?C.delete(k):C.get(k)!==!0&&C.set(k,!1)}},[y,m.length,m.join("-")]);const D=[];if(p!==P){let O=[...p];for(let k=0;k<y.length;k++){const x=y[k],_=Sl(x);m.includes(_)||(O.splice(k,0,x),D.push(x))}return s==="wait"&&D.length&&(O=D),w(Gx(O)),b(p),null}const{forceRender:V}=I.useContext(Zp);return a.jsx(a.Fragment,{children:y.map(O=>{const k=Sl(O),x=o&&!d?!1:p===y||m.includes(k),_=()=>{if(C.has(k))C.set(k,!0);else return;let E=!0;C.forEach(z=>{z||(E=!1)}),E&&(V==null||V(),w(N.current),o&&(h==null||h()),r&&r())};return a.jsx(FS,{isPresent:x,initial:!v.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:x?void 0:_,anchorX:l,children:O},k)})})},z2=I.createContext({strict:!1}),Kx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Os={};for(const t in Kx)Os[t]={isEnabled:e=>Kx[t].some(n=>!!e[n])};function US(t){for(const e in t)Os[e]={...Os[e],...t[e]}}const $S=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Mc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||$S.has(t)}let A2=t=>!Mc(t);function WS(t){typeof t=="function"&&(A2=e=>e.startsWith("on")?!Mc(e):t(e))}try{WS(require("@emotion/is-prop-valid").default)}catch{}function qS(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(A2(i)||n===!0&&Mc(i)||!e&&!Mc(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const wu=I.createContext({});function bu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Ta(t){return typeof t=="string"||Array.isArray(t)}const km=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_m=["initial",...km];function ku(t){return bu(t.animate)||_m.some(e=>Ta(t[e]))}function P2(t){return!!(ku(t)||t.variants)}function HS(t,e){if(ku(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Ta(n)?n:void 0,animate:Ta(r)?r:void 0}}return t.inherit!==!1?e:{}}function GS(t){const{initial:e,animate:n}=HS(t,I.useContext(wu));return I.useMemo(()=>({initial:e,animate:n}),[Qx(e),Qx(n)])}function Qx(t){return Array.isArray(t)?t.join(" "):t}function Yx(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const So={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pe.test(t))t=parseFloat(t);else return t;const n=Yx(t,e.target.x),r=Yx(t,e.target.y);return`${n}% ${r}%`}},KS={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=Kr.parse(t);if(i.length>5)return r;const s=Kr.createTransformer(t),o=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const d=We(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}},yf={borderRadius:{...So,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:So,borderTopRightRadius:So,borderBottomLeftRadius:So,borderBottomRightRadius:So,boxShadow:KS};function R2(t,{layout:e,layoutId:n}){return Js.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yf[t]||t==="opacity")}const QS={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YS=Xs.length;function XS(t,e,n){let r="",i=!0;for(let s=0;s<YS;s++){const o=Xs[s],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=N2(l,vm[o]);if(!c){i=!1;const h=QS[o]||o;r+=`${h}(${d}) `}n&&(e[o]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Nm(t,e,n){const{style:r,vars:i,transformOrigin:s}=t;let o=!1,l=!1;for(const c in e){const d=e[c];if(Js.has(c)){o=!0;continue}else if(e2(c)){i[c]=d;continue}else{const h=N2(d,vm[c]);c.startsWith("origin")?(l=!0,s[c]=h):r[c]=h}}if(e.transform||(o||n?r.transform=XS(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${c} ${d} ${h}`}}const Em=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function D2(t,e,n){for(const r in e)!Nt(e[r])&&!R2(r,n)&&(t[r]=e[r])}function JS({transformTemplate:t},e){return I.useMemo(()=>{const n=Em();return Nm(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ZS(t,e){const n=t.style||{},r={};return D2(r,n,t),Object.assign(r,JS(t,e)),r}function e5(t,e){const n={},r=ZS(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const t5={offset:"stroke-dashoffset",array:"stroke-dasharray"},n5={offset:"strokeDashoffset",array:"strokeDasharray"};function r5(t,e,n=1,r=0,i=!0){t.pathLength=1;const s=i?t5:n5;t[s.offset]=pe.transform(-r);const o=pe.transform(e),l=pe.transform(n);t[s.array]=`${o} ${l}`}function V2(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},c,d,h){if(Nm(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&r5(p,i,s,o,!1)}const M2=()=>({...Em(),attrs:{}}),L2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function i5(t,e,n,r){const i=I.useMemo(()=>{const s=M2();return V2(s,e,L2(r),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};D2(s,t.style,t),i.style={...s,...i.style}}return i}const s5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tm(t){return typeof t!="string"||t.includes("-")?!1:!!(s5.indexOf(t)>-1||/[A-Z]/u.test(t))}function o5(t,e,n,{latestValues:r},i,s=!1){const l=(Tm(t)?i5:e5)(e,r,i,t),c=qS(e,typeof t=="string",s),d=t!==I.Fragment?{...c,...l,ref:n}:{},{children:h}=e,p=I.useMemo(()=>Nt(h)?h.get():h,[h]);return I.createElement(t,{...d,children:p})}function Xx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Cm(t,e,n,r){if(typeof e=="function"){const[i,s]=Xx(r);e=e(n!==void 0?n:t.custom,i,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,s]=Xx(r);e=e(n!==void 0?n:t.custom,i,s)}return e}function Jl(t){return Nt(t)?t.get():t}function a5({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:l5(n,r,i,t),renderState:e()}}function l5(t,e,n,r){const i={},s=r(t,{});for(const m in s)i[m]=Jl(s[m]);let{initial:o,animate:l}=t;const c=ku(t),d=P2(t);e&&d&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!bu(p)){const m=Array.isArray(p)?p:[p];for(let v=0;v<m.length;v++){const N=Cm(t,m[v]);if(N){const{transitionEnd:C,transition:P,...b}=N;for(const y in b){let w=b[y];if(Array.isArray(w)){const D=h?w.length-1:0;w=w[D]}w!==null&&(i[y]=w)}for(const y in C)i[y]=C[y]}}}return i}const O2=t=>(e,n)=>{const r=I.useContext(wu),i=I.useContext(yu),s=()=>a5(t,e,r,i);return n?s():oi(s)};function jm(t,e,n){var s;const{style:r}=t,i={};for(const o in r)(Nt(r[o])||e.style&&Nt(e.style[o])||R2(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(i[o]=r[o]);return i}const c5=O2({scrapeMotionValuesFromProps:jm,createRenderState:Em});function F2(t,e,n){const r=jm(t,e,n);for(const i in t)if(Nt(t[i])||Nt(e[i])){const s=Xs.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=t[i]}return r}const u5=O2({scrapeMotionValuesFromProps:F2,createRenderState:M2}),d5=Symbol.for("motionComponentSymbol");function xs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function h5(t,e,n){return I.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):xs(n)&&(n.current=r))},[e])}const Sm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),f5="framerAppearId",B2="data-"+Sm(f5),U2=I.createContext({});function p5(t,e,n,r,i){var C,P;const{visualElement:s}=I.useContext(wu),o=I.useContext(z2),l=I.useContext(yu),c=I.useContext(vu).reducedMotion,d=I.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,p=I.useContext(U2);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&m5(d.current,n,i,p);const m=I.useRef(!1);I.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const v=n[B2],N=I.useRef(!!v&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,v))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,v)));return tm(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),N.current&&h.animationState&&h.animationState.animateChanges())}),I.useEffect(()=>{h&&(!N.current&&h.animationState&&h.animationState.animateChanges(),N.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)==null||b.call(window,v)}),N.current=!1),h.enteringChildren=void 0)}),h}function m5(t,e,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:$2(t.parent)),t.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&xs(l),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function $2(t){if(t)return t.options.allowProjection!==!1?t.projection:$2(t.parent)}function Md(t,{forwardMotionProps:e=!1}={},n,r){n&&US(n);const i=Tm(t)?u5:c5;function s(l,c){let d;const h={...I.useContext(vu),...l,layoutId:g5(l)},{isStatic:p}=h,m=GS(l),v=i(l,p);if(!p&&em){x5();const N=y5(h);d=N.MeasureLayout,m.visualElement=p5(t,v,h,r,N.ProjectionNode)}return a.jsxs(wu.Provider,{value:m,children:[d&&m.visualElement?a.jsx(d,{visualElement:m.visualElement,...h}):null,o5(t,l,h5(v,m.visualElement,c),v,p,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=I.forwardRef(s);return o[d5]=t,o}function g5({layoutId:t}){const e=I.useContext(Zp).id;return e&&t!==void 0?e+"-"+t:t}function x5(t,e){I.useContext(z2).strict}function y5(t){const{drag:e,layout:n}=Os;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function v5(t,e){if(typeof Proxy>"u")return Md;const n=new Map,r=(s,o)=>Md(s,o,t,e),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,Md(o,void 0,t,e)),n.get(o))})}function W2({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function w5({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function b5(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ld(t){return t===void 0||t===1}function vf({scale:t,scaleX:e,scaleY:n}){return!Ld(t)||!Ld(e)||!Ld(n)}function xi(t){return vf(t)||q2(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function q2(t){return Jx(t.x)||Jx(t.y)}function Jx(t){return t&&t!=="0%"}function Lc(t,e,n){const r=t-n,i=e*r;return n+i}function Zx(t,e,n,r,i){return i!==void 0&&(t=Lc(t,i,r)),Lc(t,n,r)+e}function wf(t,e=0,n=1,r,i){t.min=Zx(t.min,e,n,r,i),t.max=Zx(t.max,e,n,r,i)}function H2(t,{x:e,y:n}){wf(t.x,e.translate,e.scale,e.originPoint),wf(t.y,n.translate,n.scale,n.originPoint)}const ey=.999999999999,ty=1.0000000000001;function k5(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&vs(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,H2(t,o)),r&&xi(s.latestValues)&&vs(t,s.latestValues))}e.x<ty&&e.x>ey&&(e.x=1),e.y<ty&&e.y>ey&&(e.y=1)}function ys(t,e){t.min=t.min+e,t.max=t.max+e}function ny(t,e,n,r,i=.5){const s=We(t.min,t.max,i);wf(t,e,n,s,r)}function vs(t,e){ny(t.x,e.x,e.scaleX,e.scale,e.originX),ny(t.y,e.y,e.scaleY,e.scale,e.originY)}function G2(t,e){return W2(b5(t.getBoundingClientRect(),e))}function _5(t,e,n){const r=G2(t,n),{scroll:i}=e;return i&&(ys(r.x,i.offset.x),ys(r.y,i.offset.y)),r}const ry=()=>({translate:0,scale:1,origin:0,originPoint:0}),ws=()=>({x:ry(),y:ry()}),iy=()=>({min:0,max:0}),dt=()=>({x:iy(),y:iy()}),bf={current:null},K2={current:!1};function N5(){if(K2.current=!0,!!em)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>bf.current=t.matches;t.addEventListener("change",e),e()}else bf.current=!1}const E5=new WeakMap;function T5(t,e,n){for(const r in e){const i=e[r],s=n[r];if(Nt(i))t.addValue(r,i);else if(Nt(s))t.addValue(r,Mi(i,{owner:t}));else if(s!==i)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=t.getStaticValue(r);t.addValue(r,Mi(o!==void 0?o:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const sy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class C5{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=xm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Gt.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Fe.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=ku(n),this.isVariantNode=P2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const v=p[m];c[m]!==void 0&&Nt(v)&&v.set(c[m])}}mount(e){var n;this.current=e,E5.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),K2.current||N5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:bf.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),dr(this.notifyUpdate),dr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Js.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Fe.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Os){const n=Os[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<sy.length;r++){const i=sy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=e[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=T5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Mi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Lb(r)||Fb(r))?r=parseFloat(r):!DS(r)&&Kr.test(n)&&(r=_2(e,n)),this.setBaseTarget(e,Nt(r)?r.get():r)),Nt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=Cm(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Nt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new om),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){wm.render(this.render)}}class Q2 extends C5{constructor(){super(...arguments),this.KeyframeResolver=kS}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Nt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Y2(t,{style:e,vars:n},r,i){const s=t.style;let o;for(o in e)s[o]=e[o];i==null||i.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function j5(t){return window.getComputedStyle(t)}class S5 extends Q2{constructor(){super(...arguments),this.type="html",this.renderInstance=Y2}readValueFromInstance(e,n){var r;if(Js.has(n))return(r=this.projection)!=null&&r.isProjecting?df(n):Bj(e,n);{const i=j5(e),s=(e2(n)?i.getPropertyValue(n):i[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return G2(e,n)}build(e,n,r){Nm(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return jm(e,n,r)}}const X2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function I5(t,e,n,r){Y2(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(X2.has(i)?i:Sm(i),e.attrs[i])}class z5 extends Q2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=dt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Js.has(n)){const r=k2(n);return r&&r.default||0}return n=X2.has(n)?n:Sm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return F2(e,n,r)}build(e,n,r){V2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){I5(e,n,r,i)}mount(e){this.isSVGTag=L2(e.tagName),super.mount(e)}}const A5=(t,e)=>Tm(t)?new z5(e):new S5(e,{allowProjection:t!==I.Fragment});function Cs(t,e,n){const r=t.getProps();return Cm(r,e,n!==void 0?n:r.custom,t)}const kf=t=>Array.isArray(t);function P5(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Mi(n))}function R5(t){return kf(t)?t[t.length-1]||0:t}function D5(t,e){const n=Cs(t,e);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=R5(s[o]);P5(t,o,l)}}function V5(t){return!!(Nt(t)&&t.add)}function _f(t,e){const n=t.getValue("willChange");if(V5(n))return n.add(e);if(!n&&ur.WillChange){const r=new ur.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function J2(t){return t.props[B2]}const M5=t=>t!==null;function L5(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(M5),s=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[s]}const O5={type:"spring",stiffness:500,damping:25,restSpeed:10},F5=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),B5={type:"keyframes",duration:.8},U5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$5=(t,{keyframes:e})=>e.length>2?B5:Js.has(t)?t.startsWith("scale")?F5(e[1]):O5:U5;function W5({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const Im=(t,e,n,r={},i,s)=>o=>{const l=ym(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Fn(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:s?void 0:i};W5(l)||Object.assign(h,$5(t,h)),h.duration&&(h.duration=Fn(h.duration)),h.repeatDelay&&(h.repeatDelay=Fn(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(gf(h),h.delay===0&&(p=!0)),(ur.instantAnimations||ur.skipAnimations)&&(p=!0,gf(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&e.get()!==void 0){const m=L5(h.keyframes,l);if(m!==void 0){Fe.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new gm(h):new uS(h)};function q5({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Z2(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(s=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const p=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||d&&q5(d,h))continue;const v={delay:n,...ym(s||{},h)},N=p.get();if(N!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===N&&!v.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const b=J2(t);if(b){const y=window.MotionHandoffAnimation(b,h,Fe);y!==null&&(v.startTime=y,C=!0)}}_f(t,h),p.start(Im(h,p,m,t.shouldReduceMotion&&v2.has(h)?{type:!1}:v,t,C));const P=p.animation;P&&c.push(P)}return o&&Promise.all(c).then(()=>{Fe.update(()=>{o&&D5(t,o)})}),c}function ek(t,e,n,r=0,i=1){const s=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function Nf(t,e,n={}){var c;const r=Cs(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(Z2(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=i;return H5(t,e,d,h,p,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[s,o]:[o,s];return d().then(()=>h())}else return Promise.all([s(),o(n.delay)])}function H5(t,e,n=0,r=0,i=0,s=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(Nf(c,e,{...o,delay:n+(typeof r=="function"?0:r)+ek(t.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function G5(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(s=>Nf(t,s,n));r=Promise.all(i)}else if(typeof e=="string")r=Nf(t,e,n);else{const i=typeof e=="function"?Cs(t,e,n.custom):e;r=Promise.all(Z2(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function tk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const K5=_m.length;function nk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?nk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<K5;n++){const r=_m[n],i=t.props[r];(Ta(i)||i===!1)&&(e[r]=i)}return e}const Q5=[...km].reverse(),Y5=km.length;function X5(t){return e=>Promise.all(e.map(({animation:n,options:r})=>G5(t,n,r)))}function J5(t){let e=X5(t),n=oy(),r=!0;const i=c=>(d,h)=>{var m;const p=Cs(t,h,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:v,transitionEnd:N,...C}=p;d={...d,...C,...N}}return d};function s(c){e=c(t)}function o(c){const{props:d}=t,h=nk(t.parent)||{},p=[],m=new Set;let v={},N=1/0;for(let P=0;P<Y5;P++){const b=Q5[P],y=n[b],w=d[b]!==void 0?d[b]:h[b],D=Ta(w),V=b===c?y.isActive:null;V===!1&&(N=P);let O=w===h[b]&&w!==d[b]&&D;if(O&&r&&t.manuallyAnimateOnMount&&(O=!1),y.protectedKeys={...v},!y.isActive&&V===null||!w&&!y.prevProp||bu(w)||typeof w=="boolean")continue;const k=Z5(y.prevProp,w);let x=k||b===c&&y.isActive&&!O&&D||P>N&&D,_=!1;const E=Array.isArray(w)?w:[w];let z=E.reduce(i(b),{});V===!1&&(z={});const{prevResolvedValues:A={}}=y,j={...A,...z},xe=le=>{x=!0,m.has(le)&&(_=!0,m.delete(le)),y.needsAnimating[le]=!0;const Y=t.getValue(le);Y&&(Y.liveStyle=!1)};for(const le in j){const Y=z[le],se=A[le];if(v.hasOwnProperty(le))continue;let te=!1;kf(Y)&&kf(se)?te=!tk(Y,se):te=Y!==se,te?Y!=null?xe(le):m.add(le):Y!==void 0&&m.has(le)?xe(le):y.protectedKeys[le]=!0}y.prevProp=w,y.prevResolvedValues=z,y.isActive&&(v={...v,...z}),r&&t.blockInitialAnimation&&(x=!1);const ce=O&&k;x&&(!ce||_)&&p.push(...E.map(le=>{const Y={type:b};if(typeof le=="string"&&r&&!ce&&t.manuallyAnimateOnMount&&t.parent){const{parent:se}=t,te=Cs(se,le);if(se.enteringChildren&&te){const{delayChildren:ue}=te.transition||{};Y.delay=ek(se.enteringChildren,t,ue)}}return{animation:le,options:Y}}))}if(m.size){const P={};if(typeof d.initial!="boolean"){const b=Cs(t,Array.isArray(d.initial)?d.initial[0]:d.initial);b&&b.transition&&(P.transition=b.transition)}m.forEach(b=>{const y=t.getBaseTarget(b),w=t.getValue(b);w&&(w.liveStyle=!0),P[b]=y??null}),p.push({animation:P})}let C=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(p):Promise.resolve()}function l(c,d){var p;if(n[c].isActive===d)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(m=>{var v;return(v=m.animationState)==null?void 0:v.setActive(c,d)}),n[c].isActive=d;const h=o(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=oy()}}}function Z5(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!tk(e,t):!1}function pi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function oy(){return{animate:pi(!0),whileInView:pi(),whileHover:pi(),whileTap:pi(),whileDrag:pi(),whileFocus:pi(),exit:pi()}}class ai{constructor(e){this.isMounted=!1,this.node=e}update(){}}class e4 extends ai{constructor(e){super(e),e.animationState||(e.animationState=J5(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();bu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let t4=0;class n4 extends ai{constructor(){super(...arguments),this.id=t4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const r4={animation:{Feature:e4},exit:{Feature:n4}};function Ca(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function qa(t){return{point:{x:t.pageX,y:t.pageY}}}const i4=t=>e=>bm(e)&&t(e,qa(e));function Zo(t,e,n,r){return Ca(t,e,i4(n),r)}const rk=1e-4,s4=1-rk,o4=1+rk,ik=.01,a4=0-ik,l4=0+ik;function Lt(t){return t.max-t.min}function c4(t,e,n){return Math.abs(t-e)<=n}function ay(t,e,n,r=.5){t.origin=r,t.originPoint=We(e.min,e.max,t.origin),t.scale=Lt(n)/Lt(e),t.translate=We(n.min,n.max,t.origin)-t.originPoint,(t.scale>=s4&&t.scale<=o4||isNaN(t.scale))&&(t.scale=1),(t.translate>=a4&&t.translate<=l4||isNaN(t.translate))&&(t.translate=0)}function ea(t,e,n,r){ay(t.x,e.x,n.x,r?r.originX:void 0),ay(t.y,e.y,n.y,r?r.originY:void 0)}function ly(t,e,n){t.min=n.min+e.min,t.max=t.min+Lt(e)}function u4(t,e,n){ly(t.x,e.x,n.x),ly(t.y,e.y,n.y)}function cy(t,e,n){t.min=e.min-n.min,t.max=t.min+Lt(e)}function Oc(t,e,n){cy(t.x,e.x,n.x),cy(t.y,e.y,n.y)}function ln(t){return[t("x"),t("y")]}const sk=({current:t})=>t?t.ownerDocument.defaultView:null,uy=(t,e)=>Math.abs(t-e);function d4(t,e){const n=uy(t.x,e.x),r=uy(t.y,e.y);return Math.sqrt(n**2+r**2)}class ok{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Fd(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,N=d4(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!N)return;const{point:C}=m,{timestamp:P}=bt;this.history.push({...C,timestamp:P});const{onStart:b,onMove:y}=this.handlers;v||(b&&b(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Od(v,this.transformPagePoint),Fe.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:N,onSessionEnd:C,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=Fd(m.type==="pointercancel"?this.lastMoveEventInfo:Od(v,this.transformPagePoint),this.history);this.startEvent&&N&&N(m,b),C&&C(m,b)},!bm(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=qa(e),c=Od(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=bt;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,Fd(c,this.history)),this.removeListeners=Ua(Zo(this.contextWindow,"pointermove",this.handlePointerMove),Zo(this.contextWindow,"pointerup",this.handlePointerUp),Zo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),dr(this.updatePoint)}}function Od(t,e){return e?{point:e(t.point)}:t}function dy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Fd({point:t},e){return{point:t,delta:dy(t,ak(e)),offset:dy(t,h4(e)),velocity:f4(e,.1)}}function h4(t){return t[0]}function ak(t){return t[t.length-1]}function f4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=ak(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Fn(e)));)n--;if(!r)return{x:0,y:0};const s=pn(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function p4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?We(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?We(n,t,r.max):Math.min(t,n)),t}function hy(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function m4(t,{top:e,left:n,bottom:r,right:i}){return{x:hy(t.x,n,i),y:hy(t.y,e,r)}}function fy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function g4(t,e){return{x:fy(t.x,e.x),y:fy(t.y,e.y)}}function x4(t,e){let n=.5;const r=Lt(t),i=Lt(e);return i>r?n=_a(e.min,e.max-r,t.min):r>i&&(n=_a(t.min,t.max-i,e.min)),cr(0,1,n)}function y4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Ef=.35;function v4(t=Ef){return t===!1?t=0:t===!0&&(t=Ef),{x:py(t,"left","right"),y:py(t,"top","bottom")}}function py(t,e,n){return{min:my(t,e),max:my(t,n)}}function my(t,e){return typeof t=="number"?t:t[e]||0}const w4=new WeakMap;class b4{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=dt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(qa(p).point)},o=(p,m)=>{const{drag:v,dragPropagation:N,onDragStart:C}=this.getProps();if(v&&!N&&(this.openDragLock&&this.openDragLock(),this.openDragLock=TS(v),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ln(b=>{let y=this.getAxisMotionValue(b).get()||0;if(Bn.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const D=w.layout.layoutBox[b];D&&(y=Lt(D)*(parseFloat(y)/100))}}this.originPoint[b]=y}),C&&Fe.postRender(()=>C(p,m)),_f(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:N,onDirectionLock:C,onDrag:P}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:b}=m;if(N&&this.currentDirection===null){this.currentDirection=k4(b),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,b),this.updateAxis("y",m.point,b),this.visualElement.render(),P&&P(p,m)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ln(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new ok(e,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:sk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Fe.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Il(e,i,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=p4(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,i=this.constraints;e&&xs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=m4(r.layoutBox,e):this.constraints=!1,this.elastic=v4(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ln(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=y4(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!xs(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=_5(r,i.root,this.visualElement.getTransformPagePoint());let o=g4(i.layout.layoutBox,s);if(n){const l=n(w5(o));this.hasMutatedConstraints=!!l,l&&(o=W2(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=ln(h=>{if(!Il(h,n,this.currentDirection))return;let p=c&&c[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,v=i?40:1e7,N={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,N)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return _f(this.visualElement,e),r.start(Im(e,r,0,n,this.visualElement,!1))}stopAnimation(){ln(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ln(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ln(n=>{const{drag:r}=this.getProps();if(!Il(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(e[n]-We(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!xs(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ln(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=x4({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ln(o=>{if(!Il(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:d}=this.constraints[o];l.set(We(c,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;w4.set(this.visualElement,this);const e=this.visualElement.current,n=Zo(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();xs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Fe.read(r);const o=Ca(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(ln(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=Ef,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Il(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function k4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class _4 extends ai{constructor(e){super(e),this.removeGroupControls=gn,this.removeListeners=gn,this.controls=new b4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||gn}unmount(){this.removeGroupControls(),this.removeListeners()}}const gy=t=>(e,n)=>{t&&Fe.postRender(()=>t(e,n))};class N4 extends ai{constructor(){super(...arguments),this.removePointerDownListener=gn}onPointerDown(e){this.session=new ok(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:gy(e),onStart:gy(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Fe.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Zo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Zl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Bd=!1;class E4 extends I.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=e;s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Bd&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Zl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Bd=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Fe.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),wm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;Bd=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function lk(t){const[e,n]=I2(),r=I.useContext(Zp);return a.jsx(E4,{...t,layoutGroup:r,switchLayoutGroup:I.useContext(U2),isPresent:e,safeToRemove:n})}function T4(t,e,n){const r=Nt(t)?t:Mi(t);return r.start(Im("",r,e,n)),r.animation}const C4=(t,e)=>t.depth-e.depth;class j4{constructor(){this.children=[],this.isDirty=!1}add(e){nm(this.children,e),this.isDirty=!0}remove(e){rm(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(C4),this.isDirty=!1,this.children.forEach(e)}}function S4(t,e){const n=Gt.now(),r=({timestamp:i})=>{const s=i-n;s>=e&&(dr(r),t(s-e))};return Fe.setup(r,!0),()=>dr(r)}const ck=["TopLeft","TopRight","BottomLeft","BottomRight"],I4=ck.length,xy=t=>typeof t=="string"?parseFloat(t):t,yy=t=>typeof t=="number"||pe.test(t);function z4(t,e,n,r,i,s){i?(t.opacity=We(0,n.opacity??1,A4(r)),t.opacityExit=We(e.opacity??1,0,P4(r))):s&&(t.opacity=We(e.opacity??1,n.opacity??1,r));for(let o=0;o<I4;o++){const l=`border${ck[o]}Radius`;let c=vy(e,l),d=vy(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||yy(c)===yy(d)?(t[l]=Math.max(We(xy(c),xy(d),r),0),(Bn.test(d)||Bn.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=We(e.rotate||0,n.rotate||0,r))}function vy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const A4=uk(0,.5,Kb),P4=uk(.5,.95,gn);function uk(t,e,n){return r=>r<t?0:r>e?1:n(_a(t,e,r))}function wy(t,e){t.min=e.min,t.max=e.max}function bn(t,e){wy(t.x,e.x),wy(t.y,e.y)}function by(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function ky(t,e,n,r,i){return t-=e,t=Lc(t,1/n,r),i!==void 0&&(t=Lc(t,1/i,r)),t}function R4(t,e=0,n=1,r=.5,i,s=t,o=t){if(Bn.test(e)&&(e=parseFloat(e),e=We(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=We(s.min,s.max,r);t===s&&(l-=e),t.min=ky(t.min,e,n,l,i),t.max=ky(t.max,e,n,l,i)}function _y(t,e,[n,r,i],s,o){R4(t,e[n],e[r],e[i],e.scale,s,o)}const D4=["x","scaleX","originX"],V4=["y","scaleY","originY"];function Ny(t,e,n,r){_y(t.x,e,D4,n?n.x:void 0,r?r.x:void 0),_y(t.y,e,V4,n?n.y:void 0,r?r.y:void 0)}function Ey(t){return t.translate===0&&t.scale===1}function dk(t){return Ey(t.x)&&Ey(t.y)}function Ty(t,e){return t.min===e.min&&t.max===e.max}function M4(t,e){return Ty(t.x,e.x)&&Ty(t.y,e.y)}function Cy(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function hk(t,e){return Cy(t.x,e.x)&&Cy(t.y,e.y)}function jy(t){return Lt(t.x)/Lt(t.y)}function Sy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class L4{constructor(){this.members=[]}add(e){nm(this.members,e),e.scheduleRender()}remove(e){if(rm(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function O4(t,e,n){let r="";const i=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:v,skewY:N}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),v&&(r+=`skewX(${v}deg) `),N&&(r+=`skewY(${N}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Ud=["","X","Y","Z"],F4=1e3;let B4=0;function $d(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function fk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=J2(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",Fe,!(i||s))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&fk(r)}function pk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=B4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(W4),this.nodes.forEach(K4),this.nodes.forEach(Q4),this.nodes.forEach(q4)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new j4)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new om),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=S2(o)&&!AS(o),this.instance=o;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;Fe.read(()=>{p=window.innerWidth}),t(o,()=>{const v=window.innerWidth;v!==p&&(p=v,this.root.updateBlockedByResize=!0,h&&h(),h=S4(m,250),Zl.hasAnimatedSinceResize&&(Zl.hasAnimatedSinceResize=!1,this.nodes.forEach(Ay)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||d.getDefaultTransition()||eI,{onLayoutAnimationStart:C,onLayoutAnimationComplete:P}=d.getProps(),b=!this.targetLayout||!hk(this.targetLayout,v),y=!p&&m;if(this.options.layoutRoot||this.resumeFrom||y||p&&(b||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={...ym(N,"layout"),onPlay:C,onComplete:P};(d.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(h,y)}else p||Ay(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),dr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Y4),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&fk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Iy);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(zy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(G4),this.nodes.forEach(U4),this.nodes.forEach($4)):this.nodes.forEach(zy),this.clearAllSnapshots();const l=Gt.now();bt.delta=cr(0,1e3/60,l-bt.timestamp),bt.timestamp=l,bt.isProcessing=!0,zd.update.process(bt),zd.preRender.process(bt),zd.render.process(bt),bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,wm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(H4),this.sharedNodes.forEach(X4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lt(this.snapshot.measuredBox.x)&&!Lt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!dk(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||xi(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),tI(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:o}=this.options;if(!o)return dt();const l=o.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(nI))){const{scroll:h}=this.root;h&&(ys(l.x,h.offset.x),ys(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=dt();if(bn(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&bn(l,o),ys(l.x,p.offset.x),ys(l.y,p.offset.y))}return l}applyTransform(o,l=!1){const c=dt();bn(c,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&vs(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),xi(h.latestValues)&&vs(c,h.latestValues)}return xi(this.latestValues)&&vs(c,this.latestValues),c}removeTransform(o){const l=dt();bn(l,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!xi(d.latestValues))continue;vf(d.latestValues)&&d.updateSnapshot();const h=dt(),p=d.measurePageBox();bn(h,p),Ny(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return xi(this.latestValues)&&Ny(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var v;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!this.layout||!(h||p))return;this.resolvedRelativeTargetAt=bt.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=dt(),this.targetWithTransforms=dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),u4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):bn(this.target,this.layout.layoutBox),H2(this.target,this.targetDelta)):bn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||vf(this.parent.latestValues)||q2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=dt(),this.relativeTargetOrigin=dt(),Oc(this.relativeTargetOrigin,l,c),bn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var N;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===bt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;bn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;k5(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=dt());const{target:v}=o;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(by(this.prevProjectionDelta.x,this.projectionDelta.x),by(this.prevProjectionDelta.y,this.projectionDelta.y)),ea(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!Sy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Sy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ws(),this.projectionDelta=ws(),this.projectionDeltaWithTransform=ws()}setAnimationOrigin(o,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},p=ws();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=dt(),v=c?c.source:void 0,N=this.layout?this.layout.source:void 0,C=v!==N,P=this.getStack(),b=!P||P.members.length<=1,y=!!(C&&!b&&this.options.crossfade===!0&&!this.path.some(Z4));this.animationProgress=0;let w;this.mixTargetDelta=D=>{const V=D/1e3;Py(p.x,o.x,V),Py(p.y,o.y,V),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Oc(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),J4(this.relativeTarget,this.relativeTargetOrigin,m,V),w&&M4(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=dt()),bn(w,this.relativeTarget)),C&&(this.animationValues=h,z4(h,d,this.latestValues,V,y,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(dr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fe.update(()=>{Zl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Mi(0)),this.currentAnimation=T4(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(F4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=o;if(!(!l||!c||!d)){if(this!==o&&this.layout&&d&&mk(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||dt();const p=Lt(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+p;const m=Lt(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}bn(l,c),vs(l,h),ea(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new L4),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&$d("z",o,d,this.animationValues);for(let h=0;h<Ud.length;h++)$d(`rotate${Ud[h]}`,o,d,this.animationValues),$d(`skew${Ud[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Jl(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Jl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!xi(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=O4(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),o.transform=p;const{x:m,y:v}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const N in yf){if(h[N]===void 0)continue;const{correct:C,applyTo:P,isCSSVariable:b}=yf[N],y=p==="none"?h[N]:C(h[N],d);if(P){const w=P.length;for(let D=0;D<w;D++)o[P[D]]=y}else b?this.options.visualElement.renderState.vars[N]=y:o[N]=y}this.options.layoutId&&(o.pointerEvents=d===this?Jl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Iy),this.root.sharedNodes.clear()}}}function U4(t){t.updateLayout()}function $4(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?ln(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],v=Lt(m);m.min=r[p].min,m.max=m.min+v}):mk(s,e.layoutBox,r)&&ln(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],v=Lt(r[p]);m.max=m.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+v)});const l=ws();ea(l,r,e.layoutBox);const c=ws();o?ea(c,t.applyTransform(i,!0),e.measuredBox):ea(c,r,e.layoutBox);const d=!dk(l);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:v}=p;if(m&&v){const N=dt();Oc(N,e.layoutBox,m.layoutBox);const C=dt();Oc(C,r,v.layoutBox),hk(N,C)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=C,t.relativeTargetOrigin=N,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function W4(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function q4(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function H4(t){t.clearSnapshot()}function Iy(t){t.clearMeasurements()}function zy(t){t.isLayoutDirty=!1}function G4(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Ay(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function K4(t){t.resolveTargetDelta()}function Q4(t){t.calcProjection()}function Y4(t){t.resetSkewAndRotation()}function X4(t){t.removeLeadSnapshot()}function Py(t,e,n){t.translate=We(e.translate,0,n),t.scale=We(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ry(t,e,n,r){t.min=We(e.min,n.min,r),t.max=We(e.max,n.max,r)}function J4(t,e,n,r){Ry(t.x,e.x,n.x,r),Ry(t.y,e.y,n.y,r)}function Z4(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const eI={duration:.45,ease:[.4,0,.1,1]},Dy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Vy=Dy("applewebkit/")&&!Dy("chrome/")?Math.round:gn;function My(t){t.min=Vy(t.min),t.max=Vy(t.max)}function tI(t){My(t.x),My(t.y)}function mk(t,e,n){return t==="position"||t==="preserve-aspect"&&!c4(jy(e),jy(n),.2)}function nI(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const rI=pk({attachResizeListener:(t,e)=>Ca(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Wd={current:void 0},gk=pk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Wd.current){const t=new rI({});t.mount(window),t.setOptions({layoutScroll:!0}),Wd.current=t}return Wd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),iI={pan:{Feature:N4},drag:{Feature:_4,ProjectionNode:gk,MeasureLayout:lk}};function Ly(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Fe.postRender(()=>s(e,qa(e)))}class sI extends ai{mount(){const{current:e}=this.node;e&&(this.unmount=CS(e,(n,r)=>(Ly(this.node,r,"Start"),i=>Ly(this.node,i,"End"))))}unmount(){}}class oI extends ai{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ua(Ca(this.node.current,"focus",()=>this.onFocus()),Ca(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Oy(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Fe.postRender(()=>s(e,qa(e)))}class aI extends ai{mount(){const{current:e}=this.node;e&&(this.unmount=zS(e,(n,r)=>(Oy(this.node,r,"Start"),(i,{success:s})=>Oy(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Tf=new WeakMap,qd=new WeakMap,lI=t=>{const e=Tf.get(t.target);e&&e(t)},cI=t=>{t.forEach(lI)};function uI({root:t,...e}){const n=t||document;qd.has(n)||qd.set(n,{});const r=qd.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(cI,{root:t,...e})),r[i]}function dI(t,e,n){const r=uI(e);return Tf.set(t,n),r.observe(t),()=>{Tf.delete(t),r.unobserve(t)}}const hI={some:0,all:1};class fI extends ai{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:hI[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(c)};return dI(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(pI(e,n))&&this.startObserver()}unmount(){}}function pI({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const mI={inView:{Feature:fI},tap:{Feature:aI},focus:{Feature:oI},hover:{Feature:sI}},gI={layout:{ProjectionNode:gk,MeasureLayout:lk}},xI={...r4,...mI,...iI,...gI},ne=v5(xI,A5);function Fc(t){const e=oi(()=>Mi(t)),{isStatic:n}=I.useContext(vu);if(n){const[,r]=I.useState(t);I.useEffect(()=>e.on("change",r),[])}return e}function xk(t,e){const n=Fc(e()),r=()=>n.set(e());return r(),tm(()=>{const i=()=>Fe.preRender(r,!1,!0),s=t.map(o=>o.on("change",i));return()=>{s.forEach(o=>o()),dr(r)}}),n}function yI(t){Jo.current=[],t();const e=xk(Jo.current,t);return Jo.current=void 0,e}function vI(t,e,n,r){if(typeof t=="function")return yI(t);const i=typeof e=="function"?e:PS(e,n,r);return Array.isArray(t)?Fy(t,i):Fy([t],([s])=>i(s))}function Fy(t,e){const n=oi(()=>[]);return xk(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class wI{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const bI=()=>new wI;function zm(){return oi(bI)}const yk=I.createContext(null);function kI(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const s=r>0?1:-1,o=t[i+s];if(!o)return t;const l=t[i],c=o.layout,d=We(c.min,c.max,.5);return s===1&&l.layout.max+n>d||s===-1&&l.layout.min+n<d?OC(t,i,i+s):t}function _I({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...s},o){const l=oi(()=>ne[e]),c=[],d=I.useRef(!1),h={axis:n,registerItem:(p,m)=>{const v=c.findIndex(N=>p===N.value);v!==-1?c[v].layout=m[n]:c.push({value:p,layout:m[n]}),c.sort(EI)},updateOrder:(p,m,v)=>{if(d.current)return;const N=kI(c,p,m,v);c!==N&&(d.current=!0,r(N.map(NI).filter(C=>i.indexOf(C)!==-1)))}};return I.useEffect(()=>{d.current=!1}),a.jsx(l,{...s,ref:o,ignoreStrict:!0,children:a.jsx(yk.Provider,{value:h,children:t})})}const _u=I.forwardRef(_I);function NI(t){return t.value}function EI(t,e){return t.layout.min-e.layout.min}function By(t,e=0){return Nt(t)?t:Fc(e)}function TI({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:s=!0,...o},l){const c=oi(()=>ne[r]),d=I.useContext(yk),h={x:By(e.x),y:By(e.y)},p=vI([h.x,h.y],([C,P])=>C||P?1:"unset"),{axis:m,registerItem:v,updateOrder:N}=d;return a.jsx(c,{drag:m,...o,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:p},layout:s,onDrag:(C,P)=>{const{velocity:b}=P;b[m]&&N(n,h[m].get(),b[m]),i&&i(C,P)},onLayoutMeasure:C=>v(n,C),ref:l,ignoreStrict:!0,children:t})}const Nu=I.forwardRef(TI);function Uy({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return a.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>a.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const zn=t=>{I.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth,n=window.getComputedStyle(document.body).overflow,r=window.getComputedStyle(document.body).paddingRight;return document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${parseInt(r||0)+e}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=r}},[t])},CI=()=>{};var $y={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},jI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},wk={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=s>>2,p=(s&3)<<4|l>>4;let m=(l&15)<<2|d>>6,v=d&63;c||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vk(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):jI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||d==null||p==null)throw new SI;const m=s<<2|l>>4;if(r.push(m),d!==64){const v=l<<4&240|d>>2;if(r.push(v),p!==64){const N=d<<6&192|p;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class SI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const II=function(t){const e=vk(t);return wk.encodeByteArray(e,!0)},Bc=function(t){return II(t).replace(/\./g,"")},zI=function(t){try{return wk.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=()=>AI().__FIREBASE_DEFAULTS__,RI=()=>{if(typeof process>"u"||typeof $y>"u")return;const t=$y.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},DI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zI(t[1]);return e&&JSON.parse(e)},Am=()=>{try{return CI()||PI()||RI()||DI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VI=t=>{var e,n;return(n=(e=Am())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},MI=t=>{const e=VI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},bk=()=>{var t;return(t=Am())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function OI(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Bc(JSON.stringify(n)),Bc(JSON.stringify(o)),""].join(".")}const ta={};function BI(){const t={prod:[],emulator:[]};for(const e of Object.keys(ta))ta[e]?t.emulator.push(e):t.prod.push(e);return t}function UI(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Wy=!1;function $I(t,e){if(typeof window>"u"||typeof document>"u"||!Pm(window.location.host)||ta[t]===e||ta[t]||Wy)return;ta[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=BI().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Wy=!0,o()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=UI(r),v=n("text"),N=document.getElementById(v)||document.createElement("span"),C=n("learnmore"),P=document.getElementById(C)||document.createElement("a"),b=n("preprendIcon"),y=document.getElementById(b)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const w=m.element;l(w),h(P,C);const D=d();c(y,b),w.append(y,N,P,D),document.body.appendChild(w)}s?(N.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qI(){var e;const t=(e=Am())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function HI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GI(){return!qI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function kk(){try{return typeof indexedDB=="object"}catch{return!1}}function _k(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}function KI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="FirebaseError";class li extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QI,Object.setPrototypeOf(this,li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eu.prototype.create)}}class Eu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?YI(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new li(i,l,r)}}function YI(t,e){return t.replace(XI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const XI=/\{\$([^}]+)}/g;function ja(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(qy(s)&&qy(o)){if(!ja(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function qy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI=1e3,ZI=2,ez=4*60*60*1e3,tz=.5;function Hy(t,e=JI,n=ZI){const r=e*Math.pow(n,t),i=Math.round(tz*r*(Math.random()-.5)*2);return Math.min(ez,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(t){return t&&t._delegate?t._delegate:t}class fr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new LI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iz(e))try{this.getOrInitializeService({instanceIdentifier:yi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yi){return this.instances.has(e)}getOptions(e=yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:rz(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=yi){return this.component?this.component.multipleInstances?e:yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rz(t){return t===yi?void 0:t}function iz(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sz{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nz(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Ne||(Ne={}));const oz={debug:Ne.DEBUG,verbose:Ne.VERBOSE,info:Ne.INFO,warn:Ne.WARN,error:Ne.ERROR,silent:Ne.SILENT},az=Ne.INFO,lz={[Ne.DEBUG]:"log",[Ne.VERBOSE]:"log",[Ne.INFO]:"info",[Ne.WARN]:"warn",[Ne.ERROR]:"error"},cz=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=lz[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rm{constructor(e){this.name=e,this._logLevel=az,this._logHandler=cz,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?oz[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ne.DEBUG,...e),this._logHandler(this,Ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ne.VERBOSE,...e),this._logHandler(this,Ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ne.INFO,...e),this._logHandler(this,Ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ne.WARN,...e),this._logHandler(this,Ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ne.ERROR,...e),this._logHandler(this,Ne.ERROR,...e)}}const uz=(t,e)=>e.some(n=>t instanceof n);let Gy,Ky;function dz(){return Gy||(Gy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hz(){return Ky||(Ky=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nk=new WeakMap,Cf=new WeakMap,Ek=new WeakMap,Hd=new WeakMap,Dm=new WeakMap;function fz(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ur(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Nk.set(n,t)}).catch(()=>{}),Dm.set(e,t),e}function pz(t){if(Cf.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Cf.set(t,e)}let jf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Cf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Ek.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mz(t){jf=t(jf)}function gz(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gd(this),e,...n);return Ek.set(r,e.sort?e.sort():[e]),Ur(r)}:hz().includes(t)?function(...e){return t.apply(Gd(this),e),Ur(Nk.get(this))}:function(...e){return Ur(t.apply(Gd(this),e))}}function xz(t){return typeof t=="function"?gz(t):(t instanceof IDBTransaction&&pz(t),uz(t,dz())?new Proxy(t,jf):t)}function Ur(t){if(t instanceof IDBRequest)return fz(t);if(Hd.has(t))return Hd.get(t);const e=xz(t);return e!==t&&(Hd.set(t,e),Dm.set(e,t)),e}const Gd=t=>Dm.get(t);function Tk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ur(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Ur(o.result),c.oldVersion,c.newVersion,Ur(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const yz=["get","getKey","getAll","getAllKeys","count"],vz=["put","add","delete","clear"],Kd=new Map;function Qy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kd.get(e))return Kd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=vz.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||yz.includes(n)))return;const s=async function(o,...l){const c=this.transaction(o,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return Kd.set(e,s),s}mz(t=>({...t,get:(e,n,r)=>Qy(e,n)||t.get(e,n,r),has:(e,n)=>!!Qy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wz{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bz(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function bz(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sf="@firebase/app",Yy="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pr=new Rm("@firebase/app"),kz="@firebase/app-compat",_z="@firebase/analytics-compat",Nz="@firebase/analytics",Ez="@firebase/app-check-compat",Tz="@firebase/app-check",Cz="@firebase/auth",jz="@firebase/auth-compat",Sz="@firebase/database",Iz="@firebase/data-connect",zz="@firebase/database-compat",Az="@firebase/functions",Pz="@firebase/functions-compat",Rz="@firebase/installations",Dz="@firebase/installations-compat",Vz="@firebase/messaging",Mz="@firebase/messaging-compat",Lz="@firebase/performance",Oz="@firebase/performance-compat",Fz="@firebase/remote-config",Bz="@firebase/remote-config-compat",Uz="@firebase/storage",$z="@firebase/storage-compat",Wz="@firebase/firestore",qz="@firebase/ai",Hz="@firebase/firestore-compat",Gz="firebase",Kz="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const If="[DEFAULT]",Qz={[Sf]:"fire-core",[kz]:"fire-core-compat",[Nz]:"fire-analytics",[_z]:"fire-analytics-compat",[Tz]:"fire-app-check",[Ez]:"fire-app-check-compat",[Cz]:"fire-auth",[jz]:"fire-auth-compat",[Sz]:"fire-rtdb",[Iz]:"fire-data-connect",[zz]:"fire-rtdb-compat",[Az]:"fire-fn",[Pz]:"fire-fn-compat",[Rz]:"fire-iid",[Dz]:"fire-iid-compat",[Vz]:"fire-fcm",[Mz]:"fire-fcm-compat",[Lz]:"fire-perf",[Oz]:"fire-perf-compat",[Fz]:"fire-rc",[Bz]:"fire-rc-compat",[Uz]:"fire-gcs",[$z]:"fire-gcs-compat",[Wz]:"fire-fst",[Hz]:"fire-fst-compat",[qz]:"fire-vertex","fire-js":"fire-js",[Gz]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uc=new Map,Yz=new Map,zf=new Map;function Xy(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qr(t){const e=t.name;if(zf.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;zf.set(e,t);for(const n of Uc.values())Xy(n,t);for(const n of Yz.values())Xy(n,t);return!0}function Ha(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xz(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Eu("app","Firebase",Jz);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=Kz;function Ck(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:If,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=bk()),!n)throw $r.create("no-options");const s=Uc.get(i);if(s){if(ja(n,s.options)&&ja(r,s.config))return s;throw $r.create("duplicate-app",{appName:i})}const o=new sz(i);for(const c of zf.values())o.addComponent(c);const l=new Zz(n,r,o);return Uc.set(i,l),l}function jk(t=If){const e=Uc.get(t);if(!e&&t===If&&bk())return Ck();if(!e)throw $r.create("no-app",{appName:t});return e}function Un(t,e,n){let r=Qz[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(o.join(" "));return}Qr(new fr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="firebase-heartbeat-database",nA=1,Sa="firebase-heartbeat-store";let Qd=null;function Sk(){return Qd||(Qd=Tk(tA,nA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Qd}async function rA(t){try{const n=(await Sk()).transaction(Sa),r=await n.objectStore(Sa).get(Ik(t));return await n.done,r}catch(e){if(e instanceof li)pr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pr.warn(n.message)}}}async function Jy(t,e){try{const r=(await Sk()).transaction(Sa,"readwrite");await r.objectStore(Sa).put(e,Ik(t)),await r.done}catch(n){if(n instanceof li)pr.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});pr.warn(r.message)}}}function Ik(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA=1024,sA=30;class oA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new lA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Zy();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>sA){const o=cA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Zy(),{heartbeatsToSend:r,unsentEntries:i}=aA(this._heartbeatsCache.heartbeats),s=Bc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pr.warn(n),""}}}function Zy(){return new Date().toISOString().substring(0,10)}function aA(t,e=iA){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ev(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ev(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class lA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return kk()?_k().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Jy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ev(t){return Bc(JSON.stringify({version:2,heartbeats:t})).length}function cA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){Qr(new fr("platform-logger",e=>new wz(e),"PRIVATE")),Qr(new fr("heartbeat",e=>new oA(e),"PRIVATE")),Un(Sf,Yy,t),Un(Sf,Yy,"esm2020"),Un("fire-js","")}uA("");var dA="firebase",hA="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un(dA,hA,"app");const zk="@firebase/installations",Vm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=1e4,Pk=`w:${Vm}`,Rk="FIS_v2",fA="https://firebaseinstallations.googleapis.com/v1",pA=60*60*1e3,mA="installations",gA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Li=new Eu(mA,gA,xA);function Dk(t){return t instanceof li&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk({projectId:t}){return`${fA}/projects/${t}/installations`}function Mk(t){return{token:t.token,requestStatus:2,expiresIn:vA(t.expiresIn),creationTime:Date.now()}}async function Lk(t,e){const r=(await e.json()).error;return Li.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Ok({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function yA(t,{refreshToken:e}){const n=Ok(t);return n.append("Authorization",wA(e)),n}async function Fk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vA(t){return Number(t.replace("s","000"))}function wA(t){return`${Rk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Vk(t),i=Ok(t),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={fid:n,authVersion:Rk,appId:t.appId,sdkVersion:Pk},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await Fk(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Mk(d.authToken)}}else throw await Lk("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=/^[cdef][\w-]{21}$/,Af="";function NA(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=EA(t);return _A.test(n)?n:Af}catch{return Af}}function EA(t){return kA(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new Map;function $k(t,e){const n=Tu(t);Wk(n,e),TA(n,e)}function Wk(t,e){const n=Uk.get(t);if(n)for(const r of n)r(e)}function TA(t,e){const n=CA();n&&n.postMessage({key:t,fid:e}),jA()}let Ei=null;function CA(){return!Ei&&"BroadcastChannel"in self&&(Ei=new BroadcastChannel("[Firebase] FID Change"),Ei.onmessage=t=>{Wk(t.data.key,t.data.fid)}),Ei}function jA(){Uk.size===0&&Ei&&(Ei.close(),Ei=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA="firebase-installations-database",IA=1,Oi="firebase-installations-store";let Yd=null;function Mm(){return Yd||(Yd=Tk(SA,IA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Oi)}}})),Yd}async function $c(t,e){const n=Tu(t),i=(await Mm()).transaction(Oi,"readwrite"),s=i.objectStore(Oi),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&$k(t,e.fid),e}async function qk(t){const e=Tu(t),r=(await Mm()).transaction(Oi,"readwrite");await r.objectStore(Oi).delete(e),await r.done}async function Cu(t,e){const n=Tu(t),i=(await Mm()).transaction(Oi,"readwrite"),s=i.objectStore(Oi),o=await s.get(n),l=e(o);return l===void 0?await s.delete(n):await s.put(l,n),await i.done,l&&(!o||o.fid!==l.fid)&&$k(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lm(t){let e;const n=await Cu(t.appConfig,r=>{const i=zA(r),s=AA(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Af?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function zA(t){const e=t||{fid:NA(),registrationStatus:0};return Hk(e)}function AA(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Li.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=PA(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:RA(t)}:{installationEntry:e}}async function PA(t,e){try{const n=await bA(t,e);return $c(t.appConfig,n)}catch(n){throw Dk(n)&&n.customData.serverCode===409?await qk(t.appConfig):await $c(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function RA(t){let e=await tv(t.appConfig);for(;e.registrationStatus===1;)await Bk(100),e=await tv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Lm(t);return r||n}return e}function tv(t){return Cu(t,e=>{if(!e)throw Li.create("installation-not-found");return Hk(e)})}function Hk(t){return DA(t)?{fid:t.fid,registrationStatus:0}:t}function DA(t){return t.registrationStatus===1&&t.registrationTime+Ak<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA({appConfig:t,heartbeatServiceProvider:e},n){const r=MA(t,n),i=yA(t,n),s=e.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const o={installation:{sdkVersion:Pk,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await Fk(()=>fetch(r,l));if(c.ok){const d=await c.json();return Mk(d)}else throw await Lk("Generate Auth Token",c)}function MA(t,{fid:e}){return`${Vk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(t,e=!1){let n;const r=await Cu(t.appConfig,s=>{if(!Gk(s))throw Li.create("not-registered");const o=s.authToken;if(!e&&FA(o))return s;if(o.requestStatus===1)return n=LA(t,e),s;{if(!navigator.onLine)throw Li.create("app-offline");const l=UA(s);return n=OA(t,l),l}});return n?await n:r.authToken}async function LA(t,e){let n=await nv(t.appConfig);for(;n.authToken.requestStatus===1;)await Bk(100),n=await nv(t.appConfig);const r=n.authToken;return r.requestStatus===0?Om(t,e):r}function nv(t){return Cu(t,e=>{if(!Gk(e))throw Li.create("not-registered");const n=e.authToken;return $A(n)?{...e,authToken:{requestStatus:0}}:e})}async function OA(t,e){try{const n=await VA(t,e),r={...e,authToken:n};return await $c(t.appConfig,r),n}catch(n){if(Dk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await qk(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await $c(t.appConfig,r)}throw n}}function Gk(t){return t!==void 0&&t.registrationStatus===2}function FA(t){return t.requestStatus===2&&!BA(t)}function BA(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pA}function UA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function $A(t){return t.requestStatus===1&&t.requestTime+Ak<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(t){const e=t,{installationEntry:n,registrationPromise:r}=await Lm(e);return r?r.catch(console.error):Om(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qA(t,e=!1){const n=t;return await HA(n),(await Om(n,e)).token}async function HA(t){const{registrationPromise:e}=await Lm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){if(!t||!t.options)throw Xd("App Configuration");if(!t.name)throw Xd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Xd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xd(t){return Li.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="installations",KA="installations-internal",QA=t=>{const e=t.getProvider("app").getImmediate(),n=GA(e),r=Ha(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},YA=t=>{const e=t.getProvider("app").getImmediate(),n=Ha(e,Kk).getImmediate();return{getId:()=>WA(n),getToken:i=>qA(n,i)}};function XA(){Qr(new fr(Kk,QA,"PUBLIC")),Qr(new fr(KA,YA,"PRIVATE"))}XA();Un(zk,Vm);Un(zk,Vm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="analytics",JA="firebase_id",ZA="origin",eP=60*1e3,tP="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Fm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new Rm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},nn=new Eu("analytics","Analytics",nP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(t){if(!t.startsWith(Fm)){const e=nn.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function Qk(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function iP(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function sP(t,e){const n=iP("firebase-js-sdk-policy",{createScriptURL:rP}),r=document.createElement("script"),i=`${Fm}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function oP(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function aP(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const c=(await Qk(n)).find(d=>d.measurementId===i);c&&await e[c.appId]}}catch(l){Ft.error(l)}t("config",i,s)}async function lP(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const l=await Qk(n);for(const c of o){const d=l.find(p=>p.measurementId===c),h=d&&e[d.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Ft.error(s)}}function cP(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[l,c]=o;await lP(t,e,n,l,c)}else if(s==="config"){const[l,c]=o;await aP(t,e,n,r,l,c)}else if(s==="consent"){const[l,c]=o;t("consent",l,c)}else if(s==="get"){const[l,c,d]=o;t("get",l,c,d)}else if(s==="set"){const[l]=o;t("set",l)}else t(s,...o)}catch(l){Ft.error(l)}}return i}function uP(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=cP(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function dP(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Fm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=30,fP=1e3;class pP{constructor(e={},n=fP){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Yk=new pP;function mP(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function gP(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:mP(n)},i=tP.replace("{app-id}",e),s=await fetch(i,r);if(s.status!==200&&s.status!==304){let l="";try{const c=await s.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw nn.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function xP(t,e=Yk,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw nn.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw nn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new wP;return setTimeout(async()=>{l.abort()},eP),Xk({appId:r,apiKey:i,measurementId:s},o,l,e)}async function Xk(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=Yk){var l;const{appId:s,measurementId:o}=t;try{await yP(r,e)}catch(c){if(o)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:o};throw c}try{const c=await gP(t);return i.deleteThrottleMetadata(s),c}catch(c){const d=c;if(!vP(d)){if(i.deleteThrottleMetadata(s),o)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:o};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?Hy(n,i.intervalMillis,hP):Hy(n,i.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(s,p),Ft.debug(`Calling attemptFetch again in ${h} millis`),Xk(t,p,r,i)}}function yP(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vP(t){if(!(t instanceof li)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wP{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function bP(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o={...r,send_to:s};t("event",n,o)}}async function kP(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(){if(kk())try{await _k()}catch(t){return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ft.warn(nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function NP(t,e,n,r,i,s,o){const l=xP(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ft.error(m)),e.push(l);const c=_P().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);dP(s)||sP(s,d.measurementId),i("js",new Date);const p=(o==null?void 0:o.config)??{};return p[ZA]="firebase",p.update=!0,h!=null&&(p[JA]=h),i("config",d.measurementId,p),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.app=e}_delete(){return delete js[this.app.options.appId],Promise.resolve()}}let js={},rv=[];const iv={};let Jd="dataLayer",TP="gtag",sv,Bm,ov=!1;function CP(){const t=[];if(HI()&&t.push("This is a browser extension environment."),KI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=nn.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function jP(t,e,n){CP();const r=t.options.appId;if(!r)throw nn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw nn.create("no-api-key");if(js[r]!=null)throw nn.create("already-exists",{id:r});if(!ov){oP(Jd);const{wrappedGtag:s,gtagCore:o}=uP(js,rv,iv,Jd,TP);Bm=s,sv=o,ov=!0}return js[r]=NP(t,rv,iv,e,sv,Jd,n),new EP(t)}function SP(t=jk()){t=hr(t);const e=Ha(t,Wc);return e.isInitialized()?e.getImmediate():IP(t)}function IP(t,e={}){const n=Ha(t,Wc);if(n.isInitialized()){const i=n.getImmediate();if(ja(e,n.getOptions()))return i;throw nn.create("already-initialized")}return n.initialize({options:e})}function zP(t,e,n){t=hr(t),kP(Bm,js[t.app.options.appId],e,n).catch(r=>Ft.error(r))}function AP(t,e,n,r){t=hr(t),bP(Bm,js[t.app.options.appId],e,n,r).catch(i=>Ft.error(i))}const av="@firebase/analytics",lv="0.10.19";function PP(){Qr(new fr(Wc,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return jP(r,i,n)},"PUBLIC")),Qr(new fr("analytics-internal",t,"PRIVATE")),Un(av,lv),Un(av,lv,"esm2020");function t(e){try{const n=e.getProvider(Wc).getImmediate();return{logEvent:(r,i,s)=>AP(n,r,i,s),setUserProperties:(r,i)=>zP(n,r,i)}}catch(n){throw nn.create("interop-component-reg-failed",{reason:n})}}}PP();var cv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wr,Jk;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,x){function _(){}_.prototype=x.prototype,k.F=x.prototype,k.prototype=new _,k.prototype.constructor=k,k.D=function(E,z,A){for(var j=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)j[xe-2]=arguments[xe];return x.prototype[z].apply(E,j)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,x,_){_||(_=0);const E=Array(16);if(typeof x=="string")for(var z=0;z<16;++z)E[z]=x.charCodeAt(_++)|x.charCodeAt(_++)<<8|x.charCodeAt(_++)<<16|x.charCodeAt(_++)<<24;else for(z=0;z<16;++z)E[z]=x[_++]|x[_++]<<8|x[_++]<<16|x[_++]<<24;x=k.g[0],_=k.g[1],z=k.g[2];let A=k.g[3],j;j=x+(A^_&(z^A))+E[0]+3614090360&4294967295,x=_+(j<<7&4294967295|j>>>25),j=A+(z^x&(_^z))+E[1]+3905402710&4294967295,A=x+(j<<12&4294967295|j>>>20),j=z+(_^A&(x^_))+E[2]+606105819&4294967295,z=A+(j<<17&4294967295|j>>>15),j=_+(x^z&(A^x))+E[3]+3250441966&4294967295,_=z+(j<<22&4294967295|j>>>10),j=x+(A^_&(z^A))+E[4]+4118548399&4294967295,x=_+(j<<7&4294967295|j>>>25),j=A+(z^x&(_^z))+E[5]+1200080426&4294967295,A=x+(j<<12&4294967295|j>>>20),j=z+(_^A&(x^_))+E[6]+2821735955&4294967295,z=A+(j<<17&4294967295|j>>>15),j=_+(x^z&(A^x))+E[7]+4249261313&4294967295,_=z+(j<<22&4294967295|j>>>10),j=x+(A^_&(z^A))+E[8]+1770035416&4294967295,x=_+(j<<7&4294967295|j>>>25),j=A+(z^x&(_^z))+E[9]+2336552879&4294967295,A=x+(j<<12&4294967295|j>>>20),j=z+(_^A&(x^_))+E[10]+4294925233&4294967295,z=A+(j<<17&4294967295|j>>>15),j=_+(x^z&(A^x))+E[11]+2304563134&4294967295,_=z+(j<<22&4294967295|j>>>10),j=x+(A^_&(z^A))+E[12]+1804603682&4294967295,x=_+(j<<7&4294967295|j>>>25),j=A+(z^x&(_^z))+E[13]+4254626195&4294967295,A=x+(j<<12&4294967295|j>>>20),j=z+(_^A&(x^_))+E[14]+2792965006&4294967295,z=A+(j<<17&4294967295|j>>>15),j=_+(x^z&(A^x))+E[15]+1236535329&4294967295,_=z+(j<<22&4294967295|j>>>10),j=x+(z^A&(_^z))+E[1]+4129170786&4294967295,x=_+(j<<5&4294967295|j>>>27),j=A+(_^z&(x^_))+E[6]+3225465664&4294967295,A=x+(j<<9&4294967295|j>>>23),j=z+(x^_&(A^x))+E[11]+643717713&4294967295,z=A+(j<<14&4294967295|j>>>18),j=_+(A^x&(z^A))+E[0]+3921069994&4294967295,_=z+(j<<20&4294967295|j>>>12),j=x+(z^A&(_^z))+E[5]+3593408605&4294967295,x=_+(j<<5&4294967295|j>>>27),j=A+(_^z&(x^_))+E[10]+38016083&4294967295,A=x+(j<<9&4294967295|j>>>23),j=z+(x^_&(A^x))+E[15]+3634488961&4294967295,z=A+(j<<14&4294967295|j>>>18),j=_+(A^x&(z^A))+E[4]+3889429448&4294967295,_=z+(j<<20&4294967295|j>>>12),j=x+(z^A&(_^z))+E[9]+568446438&4294967295,x=_+(j<<5&4294967295|j>>>27),j=A+(_^z&(x^_))+E[14]+3275163606&4294967295,A=x+(j<<9&4294967295|j>>>23),j=z+(x^_&(A^x))+E[3]+4107603335&4294967295,z=A+(j<<14&4294967295|j>>>18),j=_+(A^x&(z^A))+E[8]+1163531501&4294967295,_=z+(j<<20&4294967295|j>>>12),j=x+(z^A&(_^z))+E[13]+2850285829&4294967295,x=_+(j<<5&4294967295|j>>>27),j=A+(_^z&(x^_))+E[2]+4243563512&4294967295,A=x+(j<<9&4294967295|j>>>23),j=z+(x^_&(A^x))+E[7]+1735328473&4294967295,z=A+(j<<14&4294967295|j>>>18),j=_+(A^x&(z^A))+E[12]+2368359562&4294967295,_=z+(j<<20&4294967295|j>>>12),j=x+(_^z^A)+E[5]+4294588738&4294967295,x=_+(j<<4&4294967295|j>>>28),j=A+(x^_^z)+E[8]+2272392833&4294967295,A=x+(j<<11&4294967295|j>>>21),j=z+(A^x^_)+E[11]+1839030562&4294967295,z=A+(j<<16&4294967295|j>>>16),j=_+(z^A^x)+E[14]+4259657740&4294967295,_=z+(j<<23&4294967295|j>>>9),j=x+(_^z^A)+E[1]+2763975236&4294967295,x=_+(j<<4&4294967295|j>>>28),j=A+(x^_^z)+E[4]+1272893353&4294967295,A=x+(j<<11&4294967295|j>>>21),j=z+(A^x^_)+E[7]+4139469664&4294967295,z=A+(j<<16&4294967295|j>>>16),j=_+(z^A^x)+E[10]+3200236656&4294967295,_=z+(j<<23&4294967295|j>>>9),j=x+(_^z^A)+E[13]+681279174&4294967295,x=_+(j<<4&4294967295|j>>>28),j=A+(x^_^z)+E[0]+3936430074&4294967295,A=x+(j<<11&4294967295|j>>>21),j=z+(A^x^_)+E[3]+3572445317&4294967295,z=A+(j<<16&4294967295|j>>>16),j=_+(z^A^x)+E[6]+76029189&4294967295,_=z+(j<<23&4294967295|j>>>9),j=x+(_^z^A)+E[9]+3654602809&4294967295,x=_+(j<<4&4294967295|j>>>28),j=A+(x^_^z)+E[12]+3873151461&4294967295,A=x+(j<<11&4294967295|j>>>21),j=z+(A^x^_)+E[15]+530742520&4294967295,z=A+(j<<16&4294967295|j>>>16),j=_+(z^A^x)+E[2]+3299628645&4294967295,_=z+(j<<23&4294967295|j>>>9),j=x+(z^(_|~A))+E[0]+4096336452&4294967295,x=_+(j<<6&4294967295|j>>>26),j=A+(_^(x|~z))+E[7]+1126891415&4294967295,A=x+(j<<10&4294967295|j>>>22),j=z+(x^(A|~_))+E[14]+2878612391&4294967295,z=A+(j<<15&4294967295|j>>>17),j=_+(A^(z|~x))+E[5]+4237533241&4294967295,_=z+(j<<21&4294967295|j>>>11),j=x+(z^(_|~A))+E[12]+1700485571&4294967295,x=_+(j<<6&4294967295|j>>>26),j=A+(_^(x|~z))+E[3]+2399980690&4294967295,A=x+(j<<10&4294967295|j>>>22),j=z+(x^(A|~_))+E[10]+4293915773&4294967295,z=A+(j<<15&4294967295|j>>>17),j=_+(A^(z|~x))+E[1]+2240044497&4294967295,_=z+(j<<21&4294967295|j>>>11),j=x+(z^(_|~A))+E[8]+1873313359&4294967295,x=_+(j<<6&4294967295|j>>>26),j=A+(_^(x|~z))+E[15]+4264355552&4294967295,A=x+(j<<10&4294967295|j>>>22),j=z+(x^(A|~_))+E[6]+2734768916&4294967295,z=A+(j<<15&4294967295|j>>>17),j=_+(A^(z|~x))+E[13]+1309151649&4294967295,_=z+(j<<21&4294967295|j>>>11),j=x+(z^(_|~A))+E[4]+4149444226&4294967295,x=_+(j<<6&4294967295|j>>>26),j=A+(_^(x|~z))+E[11]+3174756917&4294967295,A=x+(j<<10&4294967295|j>>>22),j=z+(x^(A|~_))+E[2]+718787259&4294967295,z=A+(j<<15&4294967295|j>>>17),j=_+(A^(z|~x))+E[9]+3951481745&4294967295,k.g[0]=k.g[0]+x&4294967295,k.g[1]=k.g[1]+(z+(j<<21&4294967295|j>>>11))&4294967295,k.g[2]=k.g[2]+z&4294967295,k.g[3]=k.g[3]+A&4294967295}r.prototype.v=function(k,x){x===void 0&&(x=k.length);const _=x-this.blockSize,E=this.C;let z=this.h,A=0;for(;A<x;){if(z==0)for(;A<=_;)i(this,k,A),A+=this.blockSize;if(typeof k=="string"){for(;A<x;)if(E[z++]=k.charCodeAt(A++),z==this.blockSize){i(this,E),z=0;break}}else for(;A<x;)if(E[z++]=k[A++],z==this.blockSize){i(this,E),z=0;break}}this.h=z,this.o+=x},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var x=1;x<k.length-8;++x)k[x]=0;x=this.o*8;for(var _=k.length-8;_<k.length;++_)k[_]=x&255,x/=256;for(this.v(k),k=Array(16),x=0,_=0;_<4;++_)for(let E=0;E<32;E+=8)k[x++]=this.g[_]>>>E&255;return k};function s(k,x){var _=l;return Object.prototype.hasOwnProperty.call(_,k)?_[k]:_[k]=x(k)}function o(k,x){this.h=x;const _=[];let E=!0;for(let z=k.length-1;z>=0;z--){const A=k[z]|0;E&&A==x||(_[z]=A,E=!1)}this.g=_}var l={};function c(k){return-128<=k&&k<128?s(k,function(x){return new o([x|0],x<0?-1:0)}):new o([k|0],k<0?-1:0)}function d(k){if(isNaN(k)||!isFinite(k))return p;if(k<0)return P(d(-k));const x=[];let _=1;for(let E=0;k>=_;E++)x[E]=k/_|0,_*=4294967296;return new o(x,0)}function h(k,x){if(k.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(k.charAt(0)=="-")return P(h(k.substring(1),x));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=d(Math.pow(x,8));let E=p;for(let A=0;A<k.length;A+=8){var z=Math.min(8,k.length-A);const j=parseInt(k.substring(A,A+z),x);z<8?(z=d(Math.pow(x,z)),E=E.j(z).add(d(j))):(E=E.j(_),E=E.add(d(j)))}return E}var p=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(C(this))return-P(this).m();let k=0,x=1;for(let _=0;_<this.g.length;_++){const E=this.i(_);k+=(E>=0?E:4294967296+E)*x,x*=4294967296}return k},t.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(N(this))return"0";if(C(this))return"-"+P(this).toString(k);const x=d(Math.pow(k,6));var _=this;let E="";for(;;){const z=D(_,x).g;_=b(_,z.j(x));let A=((_.g.length>0?_.g[0]:_.h)>>>0).toString(k);if(_=z,N(_))return A+E;for(;A.length<6;)A="0"+A;E=A+E}},t.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function N(k){if(k.h!=0)return!1;for(let x=0;x<k.g.length;x++)if(k.g[x]!=0)return!1;return!0}function C(k){return k.h==-1}t.l=function(k){return k=b(this,k),C(k)?-1:N(k)?0:1};function P(k){const x=k.g.length,_=[];for(let E=0;E<x;E++)_[E]=~k.g[E];return new o(_,~k.h).add(m)}t.abs=function(){return C(this)?P(this):this},t.add=function(k){const x=Math.max(this.g.length,k.g.length),_=[];let E=0;for(let z=0;z<=x;z++){let A=E+(this.i(z)&65535)+(k.i(z)&65535),j=(A>>>16)+(this.i(z)>>>16)+(k.i(z)>>>16);E=j>>>16,A&=65535,j&=65535,_[z]=j<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function b(k,x){return k.add(P(x))}t.j=function(k){if(N(this)||N(k))return p;if(C(this))return C(k)?P(this).j(P(k)):P(P(this).j(k));if(C(k))return P(this.j(P(k)));if(this.l(v)<0&&k.l(v)<0)return d(this.m()*k.m());const x=this.g.length+k.g.length,_=[];for(var E=0;E<2*x;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(let z=0;z<k.g.length;z++){const A=this.i(E)>>>16,j=this.i(E)&65535,xe=k.i(z)>>>16,ce=k.i(z)&65535;_[2*E+2*z]+=j*ce,y(_,2*E+2*z),_[2*E+2*z+1]+=A*ce,y(_,2*E+2*z+1),_[2*E+2*z+1]+=j*xe,y(_,2*E+2*z+1),_[2*E+2*z+2]+=A*xe,y(_,2*E+2*z+2)}for(k=0;k<x;k++)_[k]=_[2*k+1]<<16|_[2*k];for(k=x;k<2*x;k++)_[k]=0;return new o(_,0)};function y(k,x){for(;(k[x]&65535)!=k[x];)k[x+1]+=k[x]>>>16,k[x]&=65535,x++}function w(k,x){this.g=k,this.h=x}function D(k,x){if(N(x))throw Error("division by zero");if(N(k))return new w(p,p);if(C(k))return x=D(P(k),x),new w(P(x.g),P(x.h));if(C(x))return x=D(k,P(x)),new w(P(x.g),x.h);if(k.g.length>30){if(C(k)||C(x))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=x;E.l(k)<=0;)_=V(_),E=V(E);var z=O(_,1),A=O(E,1);for(E=O(E,2),_=O(_,2);!N(E);){var j=A.add(E);j.l(k)<=0&&(z=z.add(_),A=j),E=O(E,1),_=O(_,1)}return x=b(k,z.j(x)),new w(z,x)}for(z=p;k.l(x)>=0;){for(_=Math.max(1,Math.floor(k.m()/x.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=E<=48?1:Math.pow(2,E-48),A=d(_),j=A.j(x);C(j)||j.l(k)>0;)_-=E,A=d(_),j=A.j(x);N(A)&&(A=m),z=z.add(A),k=b(k,j)}return new w(z,k)}t.B=function(k){return D(this,k).h},t.and=function(k){const x=Math.max(this.g.length,k.g.length),_=[];for(let E=0;E<x;E++)_[E]=this.i(E)&k.i(E);return new o(_,this.h&k.h)},t.or=function(k){const x=Math.max(this.g.length,k.g.length),_=[];for(let E=0;E<x;E++)_[E]=this.i(E)|k.i(E);return new o(_,this.h|k.h)},t.xor=function(k){const x=Math.max(this.g.length,k.g.length),_=[];for(let E=0;E<x;E++)_[E]=this.i(E)^k.i(E);return new o(_,this.h^k.h)};function V(k){const x=k.g.length+1,_=[];for(let E=0;E<x;E++)_[E]=k.i(E)<<1|k.i(E-1)>>>31;return new o(_,k.h)}function O(k,x){const _=x>>5;x%=32;const E=k.g.length-_,z=[];for(let A=0;A<E;A++)z[A]=x>0?k.i(A+_)>>>x|k.i(A+_+1)<<32-x:k.i(A+_);return new o(z,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Jk=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,Wr=o}).apply(typeof cv<"u"?cv:typeof self<"u"?self:typeof window<"u"?window:{});var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zk,Mo,e_,ec,Pf,t_,n_,r_;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof zl=="object"&&zl];for(var f=0;f<u.length;++f){var g=u[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,f){if(f)e:{var g=r;u=u.split(".");for(var T=0;T<u.length-1;T++){var F=u[T];if(!(F in g))break e;g=g[F]}u=u[u.length-1],T=g[u],f=f(T),f!=T&&f!=null&&e(g,u,{configurable:!0,writable:!0,value:f})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(f){var g=[],T;for(T in f)Object.prototype.hasOwnProperty.call(f,T)&&g.push([T,f[T]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function c(u,f,g){return u.call.apply(u.bind,arguments)}function d(u,f,g){return d=c,d.apply(null,arguments)}function h(u,f){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function p(u,f){function g(){}g.prototype=f.prototype,u.Z=f.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(T,F,$){for(var Z=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)Z[ye-2]=arguments[ye];return f.prototype[F].apply(T,Z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function v(u){const f=u.length;if(f>0){const g=Array(f);for(let T=0;T<f;T++)g[T]=u[T];return g}return[]}function N(u,f){for(let T=1;T<arguments.length;T++){const F=arguments[T];var g=typeof F;if(g=g!="object"?g:F?Array.isArray(F)?"array":g:"null",g=="array"||g=="object"&&typeof F.length=="number"){g=u.length||0;const $=F.length||0;u.length=g+$;for(let Z=0;Z<$;Z++)u[g+Z]=F[Z]}else u.push(F)}}class C{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function P(u){o.setTimeout(()=>{throw u},0)}function b(){var u=k;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class y{constructor(){this.h=this.g=null}add(f,g){const T=w.get();T.set(f,g),this.h?this.h.next=T:this.g=T,this.h=T}}var w=new C(()=>new D,u=>u.reset());class D{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let V,O=!1,k=new y,x=()=>{const u=Promise.resolve(void 0);V=()=>{u.then(_)}};function _(){for(var u;u=b();){try{u.h.call(u.g)}catch(g){P(g)}var f=w;f.j(u),f.h<100&&(f.h++,u.next=f.g,f.g=u)}O=!1}function E(){this.u=this.u,this.C=this.C}E.prototype.u=!1,E.prototype.dispose=function(){this.u||(this.u=!0,this.N())},E.prototype[Symbol.dispose]=function(){this.dispose()},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return u}();function j(u){return/^[\s\xa0]*$/.test(u)}function xe(u,f){z.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,f)}p(xe,z),xe.prototype.init=function(u,f){const g=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget,f||(g=="mouseover"?f=u.fromElement:g=="mouseout"&&(f=u.toElement)),this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ce="closure_listenable_"+(Math.random()*1e6|0),ie=0;function le(u,f,g,T,F){this.listener=u,this.proxy=null,this.src=f,this.type=g,this.capture=!!T,this.ha=F,this.key=++ie,this.da=this.fa=!1}function Y(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function se(u,f,g){for(const T in u)f.call(g,u[T],T,u)}function te(u,f){for(const g in u)f.call(void 0,u[g],g,u)}function ue(u){const f={};for(const g in u)f[g]=u[g];return f}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ee(u,f){let g,T;for(let F=1;F<arguments.length;F++){T=arguments[F];for(g in T)u[g]=T[g];for(let $=0;$<he.length;$++)g=he[$],Object.prototype.hasOwnProperty.call(T,g)&&(u[g]=T[g])}}function R(u){this.src=u,this.g={},this.h=0}R.prototype.add=function(u,f,g,T,F){const $=u.toString();u=this.g[$],u||(u=this.g[$]=[],this.h++);const Z=U(u,f,T,F);return Z>-1?(f=u[Z],g||(f.fa=!1)):(f=new le(f,this.src,$,!!T,F),f.fa=g,u.push(f)),f};function B(u,f){const g=f.type;if(g in u.g){var T=u.g[g],F=Array.prototype.indexOf.call(T,f,void 0),$;($=F>=0)&&Array.prototype.splice.call(T,F,1),$&&(Y(f),u.g[g].length==0&&(delete u.g[g],u.h--))}}function U(u,f,g,T){for(let F=0;F<u.length;++F){const $=u[F];if(!$.da&&$.listener==f&&$.capture==!!g&&$.ha==T)return F}return-1}var W="closure_lm_"+(Math.random()*1e6|0),S={};function L(u,f,g,T,F){if(Array.isArray(f)){for(let $=0;$<f.length;$++)L(u,f[$],g,T,F);return null}return g=Be(g),u&&u[ce]?u.J(f,g,l(T)?!!T.capture:!1,F):G(u,f,g,!1,T,F)}function G(u,f,g,T,F,$){if(!f)throw Error("Invalid event type");const Z=l(F)?!!F.capture:!!F;let ye=ke(u);if(ye||(u[W]=ye=new R(u)),g=ye.add(f,g,T,Z,$),g.proxy)return g;if(T=ee(),g.proxy=T,T.src=u,T.listener=g,u.addEventListener)A||(F=Z),F===void 0&&(F=!1),u.addEventListener(f.toString(),T,F);else if(u.attachEvent)u.attachEvent(H(f.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ee(){function u(g){return f.call(u.src,u.listener,g)}const f=J;return u}function M(u,f,g,T,F){if(Array.isArray(f))for(var $=0;$<f.length;$++)M(u,f[$],g,T,F);else T=l(T)?!!T.capture:!!T,g=Be(g),u&&u[ce]?(u=u.i,$=String(f).toString(),$ in u.g&&(f=u.g[$],g=U(f,g,T,F),g>-1&&(Y(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete u.g[$],u.h--)))):u&&(u=ke(u))&&(f=u.g[f.toString()],u=-1,f&&(u=U(f,g,T,F)),(g=u>-1?f[u]:null)&&q(g))}function q(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[ce])B(f.i,u);else{var g=u.type,T=u.proxy;f.removeEventListener?f.removeEventListener(g,T,u.capture):f.detachEvent?f.detachEvent(H(g),T):f.addListener&&f.removeListener&&f.removeListener(T),(g=ke(f))?(B(g,u),g.h==0&&(g.src=null,f[W]=null)):Y(u)}}}function H(u){return u in S?S[u]:S[u]="on"+u}function J(u,f){if(u.da)u=!0;else{f=new xe(f,this);const g=u.listener,T=u.ha||u.src;u.fa&&q(u),u=g.call(T,f)}return u}function ke(u){return u=u[W],u instanceof R?u:null}var Ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function Be(u){return typeof u=="function"?u:(u[Ie]||(u[Ie]=function(f){return u.handleEvent(f)}),u[Ie])}function Ue(){E.call(this),this.i=new R(this),this.M=this,this.G=null}p(Ue,E),Ue.prototype[ce]=!0,Ue.prototype.removeEventListener=function(u,f,g,T){M(this,u,f,g,T)};function lt(u,f){var g,T=u.G;if(T)for(g=[];T;T=T.G)g.push(T);if(u=u.M,T=f.type||f,typeof f=="string")f=new z(f,u);else if(f instanceof z)f.target=f.target||u;else{var F=f;f=new z(T,u),Ee(f,F)}F=!0;let $,Z;if(g)for(Z=g.length-1;Z>=0;Z--)$=f.g=g[Z],F=Xt($,T,!0,f)&&F;if($=f.g=u,F=Xt($,T,!0,f)&&F,F=Xt($,T,!1,f)&&F,g)for(Z=0;Z<g.length;Z++)$=f.g=g[Z],F=Xt($,T,!1,f)&&F}Ue.prototype.N=function(){if(Ue.Z.N.call(this),this.i){var u=this.i;for(const f in u.g){const g=u.g[f];for(let T=0;T<g.length;T++)Y(g[T]);delete u.g[f],u.h--}}this.G=null},Ue.prototype.J=function(u,f,g,T){return this.i.add(String(u),f,!1,g,T)},Ue.prototype.K=function(u,f,g,T){return this.i.add(String(u),f,!0,g,T)};function Xt(u,f,g,T){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();let F=!0;for(let $=0;$<f.length;++$){const Z=f[$];if(Z&&!Z.da&&Z.capture==g){const ye=Z.listener,ct=Z.ha||Z.src;Z.fa&&B(u.i,Z),F=ye.call(ct,T)!==!1&&F}}return F&&!T.defaultPrevented}function UN(u,f){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(u,f||0)}function N0(u){u.g=UN(()=>{u.g=null,u.i&&(u.i=!1,N0(u))},u.l);const f=u.h;u.h=null,u.m.apply(null,f)}class $N extends E{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:N0(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function io(u){E.call(this),this.h=u,this.g={}}p(io,E);var E0=[];function T0(u){se(u.g,function(f,g){this.g.hasOwnProperty(g)&&q(f)},u),u.g={}}io.prototype.N=function(){io.Z.N.call(this),T0(this)},io.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Uu=o.JSON.stringify,WN=o.JSON.parse,qN=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function C0(){}function j0(){}var so={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $u(){z.call(this,"d")}p($u,z);function Wu(){z.call(this,"c")}p(Wu,z);var ci={},S0=null;function Za(){return S0=S0||new Ue}ci.Ia="serverreachability";function I0(u){z.call(this,ci.Ia,u)}p(I0,z);function oo(u){const f=Za();lt(f,new I0(f))}ci.STAT_EVENT="statevent";function z0(u,f){z.call(this,ci.STAT_EVENT,u),this.stat=f}p(z0,z);function Dt(u){const f=Za();lt(f,new z0(f,u))}ci.Ja="timingevent";function A0(u,f){z.call(this,ci.Ja,u),this.size=f}p(A0,z);function ao(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},f)}function lo(){this.g=!0}lo.prototype.ua=function(){this.g=!1};function HN(u,f,g,T,F,$){u.info(function(){if(u.g)if($){var Z="",ye=$.split("&");for(let ze=0;ze<ye.length;ze++){var ct=ye[ze].split("=");if(ct.length>1){const mt=ct[0];ct=ct[1];const Pn=mt.split("_");Z=Pn.length>=2&&Pn[1]=="type"?Z+(mt+"="+ct+"&"):Z+(mt+"=redacted&")}}}else Z=null;else Z=$;return"XMLHTTP REQ ("+T+") [attempt "+F+"]: "+f+`
`+g+`
`+Z})}function GN(u,f,g,T,F,$,Z){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+F+"]: "+f+`
`+g+`
`+$+" "+Z})}function Qi(u,f,g,T){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+QN(u,g)+(T?" "+T:"")})}function KN(u,f){u.info(function(){return"TIMEOUT: "+f})}lo.prototype.info=function(){};function QN(u,f){if(!u.g)return f;if(!f)return null;try{const $=JSON.parse(f);if($){for(u=0;u<$.length;u++)if(Array.isArray($[u])){var g=$[u];if(!(g.length<2)){var T=g[1];if(Array.isArray(T)&&!(T.length<1)){var F=T[0];if(F!="noop"&&F!="stop"&&F!="close")for(let Z=1;Z<T.length;Z++)T[Z]=""}}}}return Uu($)}catch{return f}}var el={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},P0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},R0;function qu(){}p(qu,C0),qu.prototype.g=function(){return new XMLHttpRequest},R0=new qu;function co(u){return encodeURIComponent(String(u))}function YN(u){var f=1;u=u.split(":");const g=[];for(;f>0&&u.length;)g.push(u.shift()),f--;return u.length&&g.push(u.join(":")),g}function yr(u,f,g,T){this.j=u,this.i=f,this.l=g,this.S=T||1,this.V=new io(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new D0}function D0(){this.i=null,this.g="",this.h=!1}var V0={},Hu={};function Gu(u,f,g){u.M=1,u.A=nl(An(f)),u.u=g,u.R=!0,M0(u,null)}function M0(u,f){u.F=Date.now(),tl(u),u.B=An(u.A);var g=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Y0(g.i,"t",T),u.C=0,g=u.j.L,u.h=new D0,u.g=pg(u.j,g?f:null,!u.u),u.P>0&&(u.O=new $N(d(u.Y,u,u.g),u.P)),f=u.V,g=u.g,T=u.ba;var F="readystatechange";Array.isArray(F)||(F&&(E0[0]=F.toString()),F=E0);for(let $=0;$<F.length;$++){const Z=L(g,F[$],T||f.handleEvent,!1,f.h||f);if(!Z)break;f.g[Z.key]=Z}f=u.J?ue(u.J):{},u.u?(u.v||(u.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,f)):(u.v="GET",u.g.ea(u.B,u.v,null,f)),oo(),HN(u.i,u.v,u.B,u.l,u.S,u.u)}yr.prototype.ba=function(u){u=u.target;const f=this.O;f&&br(u)==3?f.j():this.Y(u)},yr.prototype.Y=function(u){try{if(u==this.g)e:{const ye=br(this.g),ct=this.g.ya(),ze=this.g.ca();if(!(ye<3)&&(ye!=3||this.g&&(this.h.h||this.g.la()||rg(this.g)))){this.K||ye!=4||ct==7||(ct==8||ze<=0?oo(3):oo(2)),Ku(this);var f=this.g.ca();this.X=f;var g=XN(this);if(this.o=f==200,GN(this.i,this.v,this.B,this.l,this.S,ye,f),this.o){if(this.U&&!this.L){t:{if(this.g){var T,F=this.g;if((T=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(T)){var $=T;break t}}$=null}if(u=$)Qi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Qu(this,u);else{this.o=!1,this.m=3,Dt(12),ui(this),uo(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<g.length;)if(mt=JN(this,g),mt==Hu){ye==4&&(this.m=4,Dt(14),u=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==V0){this.m=4,Dt(15),Qi(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else Qi(this.i,this.l,mt,null),Qu(this,mt);if(L0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ye!=4||g.length!=0||this.h.h||(this.m=1,Dt(16),u=!1),this.o=this.o&&u,!u)Qi(this.i,this.l,g,"[Invalid Chunked Response]"),ui(this),uo(this);else if(g.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),rd(Z),Z.P=!0,Dt(11))}}else Qi(this.i,this.l,g,null),Qu(this,g);ye==4&&ui(this),this.o&&!this.K&&(ye==4?ug(this.j,this):(this.o=!1,tl(this)))}else hE(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),ui(this),uo(this)}}}catch{}finally{}};function XN(u){if(!L0(u))return u.g.la();const f=rg(u.g);if(f==="")return"";let g="";const T=f.length,F=br(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ui(u),uo(u),"";u.h.i=new o.TextDecoder}for(let $=0;$<T;$++)u.h.h=!0,g+=u.h.i.decode(f[$],{stream:!(F&&$==T-1)});return f.length=0,u.h.g+=g,u.C=0,u.h.g}function L0(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function JN(u,f){var g=u.C,T=f.indexOf(`
`,g);return T==-1?Hu:(g=Number(f.substring(g,T)),isNaN(g)?V0:(T+=1,T+g>f.length?Hu:(f=f.slice(T,T+g),u.C=T+g,f)))}yr.prototype.cancel=function(){this.K=!0,ui(this)};function tl(u){u.T=Date.now()+u.H,O0(u,u.H)}function O0(u,f){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ao(d(u.aa,u),f)}function Ku(u){u.D&&(o.clearTimeout(u.D),u.D=null)}yr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(KN(this.i,this.B),this.M!=2&&(oo(),Dt(17)),ui(this),this.m=2,uo(this)):O0(this,this.T-u)};function uo(u){u.j.I==0||u.K||ug(u.j,u)}function ui(u){Ku(u);var f=u.O;f&&typeof f.dispose=="function"&&f.dispose(),u.O=null,T0(u.V),u.g&&(f=u.g,u.g=null,f.abort(),f.dispose())}function Qu(u,f){try{var g=u.j;if(g.I!=0&&(g.g==u||Yu(g.h,u))){if(!u.L&&Yu(g.h,u)&&g.I==3){try{var T=g.Ba.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var F=T;if(F[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)al(g),sl(g);else break e;nd(g),Dt(18)}}else g.xa=F[1],0<g.xa-g.K&&F[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ao(d(g.Va,g),6e3));U0(g.h)<=1&&g.ta&&(g.ta=void 0)}else hi(g,11)}else if((u.L||g.g==u)&&al(g),!j(f))for(F=g.Ba.g.parse(f),f=0;f<F.length;f++){let ze=F[f];const mt=ze[0];if(!(mt<=g.K))if(g.K=mt,ze=ze[1],g.I==2)if(ze[0]=="c"){g.M=ze[1],g.ba=ze[2];const Pn=ze[3];Pn!=null&&(g.ka=Pn,g.j.info("VER="+g.ka));const fi=ze[4];fi!=null&&(g.za=fi,g.j.info("SVER="+g.za));const kr=ze[5];kr!=null&&typeof kr=="number"&&kr>0&&(T=1.5*kr,g.O=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const _r=u.g;if(_r){const cl=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cl){var $=T.h;$.g||cl.indexOf("spdy")==-1&&cl.indexOf("quic")==-1&&cl.indexOf("h2")==-1||($.j=$.l,$.g=new Set,$.h&&(Xu($,$.h),$.h=null))}if(T.G){const id=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;id&&(T.wa=id,Ve(T.J,T.G,id))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),T=g;var Z=u;if(T.na=fg(T,T.L?T.ba:null,T.W),Z.L){$0(T.h,Z);var ye=Z,ct=T.O;ct&&(ye.H=ct),ye.D&&(Ku(ye),tl(ye)),T.g=Z}else lg(T);g.i.length>0&&ol(g)}else ze[0]!="stop"&&ze[0]!="close"||hi(g,7);else g.I==3&&(ze[0]=="stop"||ze[0]=="close"?ze[0]=="stop"?hi(g,7):td(g):ze[0]!="noop"&&g.l&&g.l.qa(ze),g.A=0)}}oo(4)}catch{}}var ZN=class{constructor(u,f){this.g=u,this.map=f}};function F0(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function B0(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function U0(u){return u.h?1:u.g?u.g.size:0}function Yu(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Xu(u,f){u.g?u.g.add(f):u.h=f}function $0(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}F0.prototype.cancel=function(){if(this.i=W0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function W0(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let f=u.i;for(const g of u.g.values())f=f.concat(g.G);return f}return v(u.i)}var q0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eE(u,f){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const T=u[g].indexOf("=");let F,$=null;T>=0?(F=u[g].substring(0,T),$=u[g].substring(T+1)):F=u[g],f(F,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function vr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;u instanceof vr?(this.l=u.l,ho(this,u.j),this.o=u.o,this.g=u.g,fo(this,u.u),this.h=u.h,Ju(this,X0(u.i)),this.m=u.m):u&&(f=String(u).match(q0))?(this.l=!1,ho(this,f[1]||"",!0),this.o=po(f[2]||""),this.g=po(f[3]||"",!0),fo(this,f[4]),this.h=po(f[5]||"",!0),Ju(this,f[6]||"",!0),this.m=po(f[7]||"")):(this.l=!1,this.i=new go(null,this.l))}vr.prototype.toString=function(){const u=[];var f=this.j;f&&u.push(mo(f,H0,!0),":");var g=this.g;return(g||f=="file")&&(u.push("//"),(f=this.o)&&u.push(mo(f,H0,!0),"@"),u.push(co(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(mo(g,g.charAt(0)=="/"?rE:nE,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",mo(g,sE)),u.join("")},vr.prototype.resolve=function(u){const f=An(this);let g=!!u.j;g?ho(f,u.j):g=!!u.o,g?f.o=u.o:g=!!u.g,g?f.g=u.g:g=u.u!=null;var T=u.h;if(g)fo(f,u.u);else if(g=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var F=f.h.lastIndexOf("/");F!=-1&&(T=f.h.slice(0,F+1)+T)}if(F=T,F==".."||F==".")T="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){T=F.lastIndexOf("/",0)==0,F=F.split("/");const $=[];for(let Z=0;Z<F.length;){const ye=F[Z++];ye=="."?T&&Z==F.length&&$.push(""):ye==".."?(($.length>1||$.length==1&&$[0]!="")&&$.pop(),T&&Z==F.length&&$.push("")):($.push(ye),T=!0)}T=$.join("/")}else T=F}return g?f.h=T:g=u.i.toString()!=="",g?Ju(f,X0(u.i)):g=!!u.m,g&&(f.m=u.m),f};function An(u){return new vr(u)}function ho(u,f,g){u.j=g?po(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function fo(u,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);u.u=f}else u.u=null}function Ju(u,f,g){f instanceof go?(u.i=f,oE(u.i,u.l)):(g||(f=mo(f,iE)),u.i=new go(f,u.l))}function Ve(u,f,g){u.i.set(f,g)}function nl(u){return Ve(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function po(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function mo(u,f,g){return typeof u=="string"?(u=encodeURI(u).replace(f,tE),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function tE(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var H0=/[#\/\?@]/g,nE=/[#\?:]/g,rE=/[#\?]/g,iE=/[#\?@]/g,sE=/#/g;function go(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function di(u){u.g||(u.g=new Map,u.h=0,u.i&&eE(u.i,function(f,g){u.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=go.prototype,t.add=function(u,f){di(this),this.i=null,u=Yi(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(f),this.h+=1,this};function G0(u,f){di(u),f=Yi(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function K0(u,f){return di(u),f=Yi(u,f),u.g.has(f)}t.forEach=function(u,f){di(this),this.g.forEach(function(g,T){g.forEach(function(F){u.call(f,F,T,this)},this)},this)};function Q0(u,f){di(u);let g=[];if(typeof f=="string")K0(u,f)&&(g=g.concat(u.g.get(Yi(u,f))));else for(u=Array.from(u.g.values()),f=0;f<u.length;f++)g=g.concat(u[f]);return g}t.set=function(u,f){return di(this),this.i=null,u=Yi(this,u),K0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},t.get=function(u,f){return u?(u=Q0(this,u),u.length>0?String(u[0]):f):f};function Y0(u,f,g){G0(u,f),g.length>0&&(u.i=null,u.g.set(Yi(u,f),v(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],f=Array.from(this.g.keys());for(let T=0;T<f.length;T++){var g=f[T];const F=co(g);g=Q0(this,g);for(let $=0;$<g.length;$++){let Z=F;g[$]!==""&&(Z+="="+co(g[$])),u.push(Z)}}return this.i=u.join("&")};function X0(u){const f=new go;return f.i=u.i,u.g&&(f.g=new Map(u.g),f.h=u.h),f}function Yi(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function oE(u,f){f&&!u.j&&(di(u),u.i=null,u.g.forEach(function(g,T){const F=T.toLowerCase();T!=F&&(G0(this,T),Y0(this,F,g))},u)),u.j=f}function aE(u,f){const g=new lo;if(o.Image){const T=new Image;T.onload=h(wr,g,"TestLoadImage: loaded",!0,f,T),T.onerror=h(wr,g,"TestLoadImage: error",!1,f,T),T.onabort=h(wr,g,"TestLoadImage: abort",!1,f,T),T.ontimeout=h(wr,g,"TestLoadImage: timeout",!1,f,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else f(!1)}function lE(u,f){const g=new lo,T=new AbortController,F=setTimeout(()=>{T.abort(),wr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:T.signal}).then($=>{clearTimeout(F),$.ok?wr(g,"TestPingServer: ok",!0,f):wr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(F),wr(g,"TestPingServer: error",!1,f)})}function wr(u,f,g,T,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),T(g)}catch{}}function cE(){this.g=new qN}function Zu(u){this.i=u.Sb||null,this.h=u.ab||!1}p(Zu,C0),Zu.prototype.g=function(){return new rl(this.i,this.h)};function rl(u,f){Ue.call(this),this.H=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(rl,Ue),t=rl.prototype,t.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=f,this.readyState=1,yo(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(f.body=u),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,yo(this)),this.g&&(this.readyState=3,yo(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;J0(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function J0(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?xo(this):yo(this),this.readyState==3&&J0(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,xo(this))},t.Na=function(u){this.g&&(this.response=u,xo(this))},t.ga=function(){this.g&&xo(this)};function xo(u){u.readyState=4,u.l=null,u.j=null,u.B=null,yo(u)}t.setRequestHeader=function(u,f){this.A.append(u,f)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=f.next();return u.join(`\r
`)};function yo(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Z0(u){let f="";return se(u,function(g,T){f+=T,f+=":",f+=g,f+=`\r
`}),f}function ed(u,f,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=Z0(g),typeof u=="string"?g!=null&&co(g):Ve(u,f,g))}function Qe(u){Ue.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Qe,Ue);var uE=/^https?$/i,dE=["POST","PUT"];t=Qe.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,f,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():R0.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch($){eg(this,$);return}if(u=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var F in T)g.set(F,T[F]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const $ of T.keys())g.set($,T.get($));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find($=>$.toLowerCase()=="content-type"),F=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(dE,f,void 0)>=0)||T||F||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$,Z]of g)this.g.setRequestHeader($,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch($){eg(this,$)}};function eg(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.o=5,tg(u),il(u)}function tg(u){u.A||(u.A=!0,lt(u,"complete"),lt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,lt(this,"complete"),lt(this,"abort"),il(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),il(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ng(this):this.Xa())},t.Xa=function(){ng(this)};function ng(u){if(u.h&&typeof s<"u"){if(u.v&&br(u)==4)setTimeout(u.Ca.bind(u),0);else if(lt(u,"readystatechange"),br(u)==4){u.h=!1;try{const $=u.ca();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var T;if(T=$===0){let Z=String(u.D).match(q0)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),T=!uE.test(Z?Z.toLowerCase():"")}g=T}if(g)lt(u,"complete"),lt(u,"success");else{u.o=6;try{var F=br(u)>2?u.g.statusText:""}catch{F=""}u.l=F+" ["+u.ca()+"]",tg(u)}}finally{il(u)}}}}function il(u,f){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,f||lt(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function br(u){return u.g?u.g.readyState:0}t.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),WN(f)}};function rg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function hE(u){const f={};u=(u.g&&br(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(j(u[T]))continue;var g=YN(u[T]);const F=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const $=f[F]||[];f[F]=$,$.push(g)}te(f,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vo(u,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||f}function ig(u){this.za=0,this.i=[],this.j=new lo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vo("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vo("baseRetryDelayMs",5e3,u),this.Za=vo("retryDelaySeedMs",1e4,u),this.Ta=vo("forwardChannelMaxRetries",2,u),this.va=vo("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new F0(u&&u.concurrentRequestLimit),this.Ba=new cE,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=ig.prototype,t.ka=8,t.I=1,t.connect=function(u,f,g,T){Dt(0),this.W=u,this.H=f||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.J=fg(this,null,this.W),ol(this)};function td(u){if(sg(u),u.I==3){var f=u.V++,g=An(u.J);if(Ve(g,"SID",u.M),Ve(g,"RID",f),Ve(g,"TYPE","terminate"),wo(u,g),f=new yr(u,u.j,f),f.M=2,f.A=nl(An(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=pg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),tl(f)}hg(u)}function sl(u){u.g&&(rd(u),u.g.cancel(),u.g=null)}function sg(u){sl(u),u.v&&(o.clearTimeout(u.v),u.v=null),al(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function ol(u){if(!B0(u.h)&&!u.m){u.m=!0;var f=u.Ea;V||x(),O||(V(),O=!0),k.add(f,u),u.D=0}}function fE(u,f){return U0(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=f.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ao(d(u.Ea,u,f),dg(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const F=new yr(this,this.j,u);let $=this.o;if(this.U&&($?($=ue($),Ee($,this.U)):$=this.U),this.u!==null||this.R||(F.J=$,$=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=ag(this,F,f),g=An(this.J),Ve(g,"RID",u),Ve(g,"CVER",22),this.G&&Ve(g,"X-HTTP-Session-Id",this.G),wo(this,g),$&&(this.R?f="headers="+co(Z0($))+"&"+f:this.u&&ed(g,this.u,$)),Xu(this.h,F),this.Ra&&Ve(g,"TYPE","init"),this.S?(Ve(g,"$req",f),Ve(g,"SID","null"),F.U=!0,Gu(F,g,null)):Gu(F,g,f),this.I=2}}else this.I==3&&(u?og(this,u):this.i.length==0||B0(this.h)||og(this))};function og(u,f){var g;f?g=f.l:g=u.V++;const T=An(u.J);Ve(T,"SID",u.M),Ve(T,"RID",g),Ve(T,"AID",u.K),wo(u,T),u.u&&u.o&&ed(T,u.u,u.o),g=new yr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),f&&(u.i=f.G.concat(u.i)),f=ag(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Xu(u.h,g),Gu(g,T,f)}function wo(u,f){u.H&&se(u.H,function(g,T){Ve(f,T,g)}),u.l&&se({},function(g,T){Ve(f,T,g)})}function ag(u,f,g){g=Math.min(u.i.length,g);const T=u.l?d(u.l.Ka,u.l,u):null;e:{var F=u.i;let ye=-1;for(;;){const ct=["count="+g];ye==-1?g>0?(ye=F[0].g,ct.push("ofs="+ye)):ye=0:ct.push("ofs="+ye);let ze=!0;for(let mt=0;mt<g;mt++){var $=F[mt].g;const Pn=F[mt].map;if($-=ye,$<0)ye=Math.max(0,F[mt].g-100),ze=!1;else try{$="req"+$+"_"||"";try{var Z=Pn instanceof Map?Pn:Object.entries(Pn);for(const[fi,kr]of Z){let _r=kr;l(kr)&&(_r=Uu(kr)),ct.push($+fi+"="+encodeURIComponent(_r))}}catch(fi){throw ct.push($+"type="+encodeURIComponent("_badmap")),fi}}catch{T&&T(Pn)}}if(ze){Z=ct.join("&");break e}}Z=void 0}return u=u.i.splice(0,g),f.G=u,Z}function lg(u){if(!u.g&&!u.v){u.Y=1;var f=u.Da;V||x(),O||(V(),O=!0),k.add(f,u),u.A=0}}function nd(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ao(d(u.Da,u),dg(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,cg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ao(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),sl(this),cg(this))};function rd(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function cg(u){u.g=new yr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var f=An(u.na);Ve(f,"RID","rpc"),Ve(f,"SID",u.M),Ve(f,"AID",u.K),Ve(f,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ve(f,"TO",u.ia),Ve(f,"TYPE","xmlhttp"),wo(u,f),u.u&&u.o&&ed(f,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=nl(An(f)),g.u=null,g.R=!0,M0(g,u)}t.Va=function(){this.C!=null&&(this.C=null,sl(this),nd(this),Dt(19))};function al(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function ug(u,f){var g=null;if(u.g==f){al(u),rd(u),u.g=null;var T=2}else if(Yu(u.h,f))g=f.G,$0(u.h,f),T=1;else return;if(u.I!=0){if(f.o)if(T==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var F=u.D;T=Za(),lt(T,new A0(T,g)),ol(u)}else lg(u);else if(F=f.m,F==3||F==0&&f.X>0||!(T==1&&fE(u,f)||T==2&&nd(u)))switch(g&&g.length>0&&(f=u.h,f.i=f.i.concat(g)),F){case 1:hi(u,5);break;case 4:hi(u,10);break;case 3:hi(u,6);break;default:hi(u,2)}}}function dg(u,f){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*f}function hi(u,f){if(u.j.info("Error code "+f),f==2){var g=d(u.bb,u),T=u.Ua;const F=!T;T=new vr(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||ho(T,"https"),nl(T),F?aE(T.toString(),g):lE(T.toString(),g)}else Dt(2);u.I=0,u.l&&u.l.pa(f),hg(u),sg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function hg(u){if(u.I=0,u.ja=[],u.l){const f=W0(u.h);(f.length!=0||u.i.length!=0)&&(N(u.ja,f),N(u.ja,u.i),u.h.i.length=0,v(u.i),u.i.length=0),u.l.oa()}}function fg(u,f,g){var T=g instanceof vr?An(g):new vr(g);if(T.g!="")f&&(T.g=f+"."+T.g),fo(T,T.u);else{var F=o.location;T=F.protocol,f=f?f+"."+F.hostname:F.hostname,F=+F.port;const $=new vr(null);T&&ho($,T),f&&($.g=f),F&&fo($,F),g&&($.h=g),T=$}return g=u.G,f=u.wa,g&&f&&Ve(T,g,f),Ve(T,"VER",u.ka),wo(u,T),T}function pg(u,f,g){if(f&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Aa&&!u.ma?new Qe(new Zu({ab:g})):new Qe(u.ma),f.Fa(u.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mg(){}t=mg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ll(){}ll.prototype.g=function(u,f){return new Jt(u,f)};function Jt(u,f){Ue.call(this),this.g=new ig(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(u?u["X-WebChannel-Client-Profile"]=f.sa:u={"X-WebChannel-Client-Profile":f.sa}),this.g.U=u,(u=f&&f.Qb)&&!j(u)&&(this.g.u=u),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!j(f)&&(this.g.G=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new Xi(this)}p(Jt,Ue),Jt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Jt.prototype.close=function(){td(this.g)},Jt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=Uu(u),u=g);f.i.push(new ZN(f.Ya++,u)),f.I==3&&ol(f)},Jt.prototype.N=function(){this.g.l=null,delete this.j,td(this.g),delete this.g,Jt.Z.N.call(this)};function gg(u){$u.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(const g in f){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}p(gg,$u);function xg(){Wu.call(this),this.status=1}p(xg,Wu);function Xi(u){this.g=u}p(Xi,mg),Xi.prototype.ra=function(){lt(this.g,"a")},Xi.prototype.qa=function(u){lt(this.g,new gg(u))},Xi.prototype.pa=function(u){lt(this.g,new xg)},Xi.prototype.oa=function(){lt(this.g,"b")},ll.prototype.createWebChannel=ll.prototype.g,Jt.prototype.send=Jt.prototype.o,Jt.prototype.open=Jt.prototype.m,Jt.prototype.close=Jt.prototype.close,r_=function(){return new ll},n_=function(){return Za()},t_=ci,Pf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,ec=el,P0.COMPLETE="complete",e_=P0,j0.EventType=so,so.OPEN="a",so.CLOSE="b",so.ERROR="c",so.MESSAGE="d",Ue.prototype.listen=Ue.prototype.J,Mo=j0,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,Zk=Qe}).apply(typeof zl<"u"?zl:typeof self<"u"?self:typeof window<"u"?window:{});const uv="@firebase/firestore",dv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zt.UNAUTHENTICATED=new zt(null),zt.GOOGLE_CREDENTIALS=new zt("google-credentials-uid"),zt.FIRST_PARTY=new zt("first-party-uid"),zt.MOCK_USER=new zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Rm("@firebase/firestore");function es(){return Fi.logLevel}function oe(t,...e){if(Fi.logLevel<=Ne.DEBUG){const n=e.map(Um);Fi.debug(`Firestore (${Zs}): ${t}`,...n)}}function mr(t,...e){if(Fi.logLevel<=Ne.ERROR){const n=e.map(Um);Fi.error(`Firestore (${Zs}): ${t}`,...n)}}function Fs(t,...e){if(Fi.logLevel<=Ne.WARN){const n=e.map(Um);Fi.warn(`Firestore (${Zs}): ${t}`,...n)}}function Um(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,i_(t,r,n)}function i_(t,e,n){let r=`FIRESTORE (${Zs}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mr(r),new Error(r)}function Ce(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||i_(e,i,r)}function ge(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class re extends li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class RP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(zt.UNAUTHENTICATED))}shutdown(){}}class DP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VP{constructor(e){this.t=e,this.currentUser=zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ce(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let s=new ir;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ir,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ir)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ce(typeof r.accessToken=="string",31837,{l:r}),new s_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ce(e===null||typeof e=="string",2055,{h:e}),new zt(e)}}class MP{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class LP{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new MP(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class OP{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xz(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ce(this.o===void 0,3512);const r=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new hv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new hv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $m{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=FP(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function we(t,e){return t<e?-1:t>e?1:0}function Rf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Zd(i)===Zd(s)?we(i,s):Zd(i)?1:-1}return we(t.length,e.length)}const BP=55296,UP=57343;function Zd(t){const e=t.charCodeAt(0);return e>=BP&&e<=UP}function Bs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="__name__";class Vn{constructor(e,n,r){n===void 0?n=0:n>e.length&&fe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&fe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Vn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Vn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Vn.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return we(e.length,n.length)}static compareSegments(e,n){const r=Vn.isNumericId(e),i=Vn.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Vn.extractNumericId(e).compare(Vn.extractNumericId(n)):Rf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wr.fromString(e.substring(4,e.length-2))}}class Pe extends Vn{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new re(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const $P=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends Vn{construct(e,n,r){return new _t(e,n,r)}static isValidIdentifier(e){return $P.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===fv}static keyField(){return new _t([fv])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new re(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new re(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new re(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(n)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.path=e}static fromPath(e){return new de(Pe.fromString(e))}static fromName(e){return new de(Pe.fromString(e).popFirst(5))}static empty(){return new de(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new de(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t,e,n){if(!n)throw new re(K.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function WP(t,e,n,r){if(e===!0&&r===!0)throw new re(K.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pv(t){if(!de.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function mv(t){if(de.isDocumentKey(t))throw new re(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function a_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function ju(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":fe(12329,{type:typeof t})}function Yr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new re(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ju(t);throw new re(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ga(t,e){if(!a_(t))throw new re(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new re(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=-62135596800,xv=1e6;class Le{static now(){return Le.fromMillis(Date.now())}static fromDate(e){return Le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*xv);return new Le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new re(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<gv)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new re(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/xv}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ga(e,Le._jsonSchema))return new Le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Le._jsonSchemaVersion="firestore/timestamp/1.0",Le._jsonSchema={type:ot("string",Le._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{static fromTimestamp(e){return new me(e)}static min(){return new me(new Le(0,0))}static max(){return new me(new Le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia=-1;function qP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=me.fromTimestamp(r===1e9?new Le(n+1,0):new Le(n,r));return new Xr(i,de.empty(),e)}function HP(t){return new Xr(t.readTime,t.key,Ia)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(me.min(),de.empty(),Ia)}static max(){return new Xr(me.max(),de.empty(),Ia)}}function GP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=de.comparator(t.documentKey,e.documentKey),n!==0?n:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eo(t){if(t.code!==K.FAILED_PRECONDITION||t.message!==KP)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&fe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,r)=>{n(e)})}static reject(e){return new Q((n,r)=>{r(e)})}static waitFor(e){return new Q((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=Q.resolve(!1);for(const r of e)n=n.next(i=>i?Q.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new Q((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let c=0;c<s;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new Q((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function YP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function to(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Su.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=-1;function Iu(t){return t==null}function qc(t){return t===0&&1/t==-1/0}function XP(t){return typeof t=="number"&&Number.isInteger(t)&&!qc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l_="";function JP(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=yv(e)),e=ZP(t.get(n),e);return yv(e)}function ZP(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case l_:n+="";break;default:n+=s}}return n}function yv(t){return t+l_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Wi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function c_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){this.comparator=e,this.root=n||kt.EMPTY}insert(e,n){return new Ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,kt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,kt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class kt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??kt.RED,this.left=i??kt.EMPTY,this.right=s??kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new kt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return kt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fe(27949);return e+(this.isRed()?0:1)}}kt.EMPTY=null,kt.RED=!0,kt.BLACK=!1;kt.EMPTY=new class{constructor(){this.size=0}get key(){throw fe(57766)}get value(){throw fe(16141)}get color(){throw fe(16727)}get left(){throw fe(29726)}get right(){throw fe(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new kt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new wv(this.data.getIterator())}getIteratorFrom(e){return new wv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new pt(this.comparator);return n.data=e,n}}class wv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new pt(_t.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new u_("Invalid base64 string: "+s):s}}(e);return new Ct(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ct.EMPTY_BYTE_STRING=new Ct("");const eR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(Ce(!!t,39018),typeof t=="string"){let e=0;const n=eR.exec(t);if(Ce(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Zr(t){return typeof t=="string"?Ct.fromBase64String(t):Ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d_="server_timestamp",h_="__type__",f_="__previous_value__",p_="__local_write_time__";function qm(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[h_])==null?void 0:r.stringValue)===d_}function zu(t){const e=t.mapValue.fields[f_];return qm(e)?zu(e):e}function za(t){const e=Jr(t.mapValue.fields[p_].timestampValue);return new Le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n,r,i,s,o,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Hc="(default)";class Aa{constructor(e,n){this.projectId=e,this.database=n||Hc}static empty(){return new Aa("","")}get isDefaultDatabase(){return this.database===Hc}isEqual(e){return e instanceof Aa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m_="__type__",nR="__max__",Pl={mapValue:{}},g_="__vector__",Gc="value";function ei(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?qm(t)?4:iR(t)?9007199254740991:rR(t)?10:11:fe(28295,{value:t})}function Kn(t,e){if(t===e)return!0;const n=ei(t);if(n!==ei(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return za(t).isEqual(za(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Jr(i.timestampValue),l=Jr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Zr(i.bytesValue).isEqual(Zr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),l=et(s.doubleValue);return o===l?qc(o)===qc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Bs(t.arrayValue.values||[],e.arrayValue.values||[],Kn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(vv(o)!==vv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Kn(o[c],l[c])))return!1;return!0}(t,e);default:return fe(52216,{left:t})}}function Pa(t,e){return(t.values||[]).find(n=>Kn(n,e))!==void 0}function Us(t,e){if(t===e)return 0;const n=ei(t),r=ei(e);if(n!==r)return we(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=et(s.integerValue||s.doubleValue),c=et(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return bv(t.timestampValue,e.timestampValue);case 4:return bv(za(t),za(e));case 5:return Rf(t.stringValue,e.stringValue);case 6:return function(s,o){const l=Zr(s),c=Zr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=we(l[d],c[d]);if(h!==0)return h}return we(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=we(et(s.latitude),et(o.latitude));return l!==0?l:we(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return kv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,v,N,C;const l=s.fields||{},c=o.fields||{},d=(m=l[Gc])==null?void 0:m.arrayValue,h=(v=c[Gc])==null?void 0:v.arrayValue,p=we(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((C=h==null?void 0:h.values)==null?void 0:C.length)||0);return p!==0?p:kv(d,h)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Pl.mapValue&&o===Pl.mapValue)return 0;if(s===Pl.mapValue)return 1;if(o===Pl.mapValue)return-1;const l=s.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=Rf(c[p],h[p]);if(m!==0)return m;const v=Us(l[c[p]],d[h[p]]);if(v!==0)return v}return we(c.length,h.length)}(t.mapValue,e.mapValue);default:throw fe(23264,{he:n})}}function bv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const n=Jr(t),r=Jr(e),i=we(n.seconds,r.seconds);return i!==0?i:we(n.nanos,r.nanos)}function kv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Us(n[i],r[i]);if(s)return s}return we(n.length,r.length)}function $s(t){return Df(t)}function Df(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Zr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return de.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Df(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Df(n.fields[o])}`;return i+"}"}(t.mapValue):fe(61005,{value:t})}function tc(t){switch(ei(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=zu(t);return e?16+tc(e):16;case 5:return 2*t.stringValue.length;case 6:return Zr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+tc(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Wi(r.fields,(s,o)=>{i+=s.length+tc(o)}),i}(t.mapValue);default:throw fe(13486,{value:t})}}function _v(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Vf(t){return!!t&&"integerValue"in t}function Hm(t){return!!t&&"arrayValue"in t}function Nv(t){return!!t&&"nullValue"in t}function Ev(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nc(t){return!!t&&"mapValue"in t}function rR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[m_])==null?void 0:r.stringValue)===g_}function na(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Wi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=na(t.arrayValue.values[n]);return e}return{...t}}function iR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!nc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=na(n)}setAll(e){let n=_t.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=na(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());nc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];nc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Wi(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new dn(na(this.value))}}function x_(t){const e=[];return Wi(t.fields,(n,r)=>{const i=new _t([n]);if(nc(r)){const s=x_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Pt(e,0,me.min(),me.min(),me.min(),dn.empty(),0)}static newFoundDocument(e,n,r,i){return new Pt(e,1,n,me.min(),r,i,0)}static newNoDocument(e,n){return new Pt(e,2,n,me.min(),me.min(),dn.empty(),0)}static newUnknownDocument(e,n){return new Pt(e,3,n,me.min(),me.min(),dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(me.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=me.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n){this.position=e,this.inclusive=n}}function Tv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=de.comparator(de.fromName(o.referenceValue),n.key):r=Us(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n="asc"){this.field=e,this.dir=n}}function sR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{}class st extends y_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aR(e,n,r):n==="array-contains"?new uR(e,r):n==="in"?new dR(e,r):n==="not-in"?new hR(e,r):n==="array-contains-any"?new fR(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lR(e,r):new cR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Us(n,this.value)):n!==null&&ei(this.value)===ei(n)&&this.matchesComparison(Us(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class In extends y_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new In(e,n)}matches(e){return v_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function v_(t){return t.op==="and"}function w_(t){return oR(t)&&v_(t)}function oR(t){for(const e of t.filters)if(e instanceof In)return!1;return!0}function Mf(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+$s(t.value);if(w_(t))return t.filters.map(e=>Mf(e)).join(",");{const e=t.filters.map(n=>Mf(n)).join(",");return`${t.op}(${e})`}}function b_(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&Kn(r.value,i.value)}(t,e):t instanceof In?function(r,i){return i instanceof In&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&b_(o,i.filters[l]),!0):!1}(t,e):void fe(19439)}function k_(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${$s(n.value)}`}(t):t instanceof In?function(n){return n.op.toString()+" {"+n.getFilters().map(k_).join(" ,")+"}"}(t):"Filter"}class aR extends st{constructor(e,n,r){super(e,n,r),this.key=de.fromName(r.referenceValue)}matches(e){const n=de.comparator(e.key,this.key);return this.matchesComparison(n)}}class lR extends st{constructor(e,n){super(e,"in",n),this.keys=__("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cR extends st{constructor(e,n){super(e,"not-in",n),this.keys=__("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function __(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>de.fromName(r.referenceValue))}class uR extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Hm(n)&&Pa(n.arrayValue,this.value)}}class dR extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pa(this.value.arrayValue,n)}}class hR extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Pa(this.value.arrayValue,n)}}class fR extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Hm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function jv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new pR(t,e,n,r,i,s,o)}function Gm(t){const e=ge(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Mf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Iu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>$s(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>$s(r)).join(",")),e.Te=n}return e.Te}function Km(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!b_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Cv(t.startAt,e.startAt)&&Cv(t.endAt,e.endAt)}function Lf(t){return de.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function mR(t,e,n,r,i,s,o,l){return new no(t,e,n,r,i,s,o,l)}function Qm(t){return new no(t)}function Sv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function N_(t){return t.collectionGroup!==null}function ra(t){const e=ge(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pt(_t.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Ra(s,r))}),n.has(_t.keyField().canonicalString())||e.Ie.push(new Ra(_t.keyField(),r))}return e.Ie}function $n(t){const e=ge(t);return e.Ee||(e.Ee=gR(e,ra(t))),e.Ee}function gR(t,e){if(t.limitType==="F")return jv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Ra(i.field,s)});const n=t.endAt?new Kc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Kc(t.startAt.position,t.startAt.inclusive):null;return jv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Of(t,e){const n=t.filters.concat([e]);return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Ff(t,e,n){return new no(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Au(t,e){return Km($n(t),$n(e))&&t.limitType===e.limitType}function E_(t){return`${Gm($n(t))}|lt:${t.limitType}`}function ts(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>k_(i)).join(", ")}]`),Iu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>$s(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>$s(i)).join(",")),`Target(${r})`}($n(t))}; limitType=${t.limitType})`}function Pu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):de.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of ra(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,c){const d=Tv(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,ra(r),i)||r.endAt&&!function(o,l,c){const d=Tv(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,ra(r),i))}(t,e)}function xR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function T_(t){return(e,n)=>{let r=!1;for(const i of ra(t)){const s=yR(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function yR(t,e,n){const r=t.field.isKeyField()?de.comparator(e.key,n.key):function(s,o,l){const c=o.data.field(s),d=l.data.field(s);return c!==null&&d!==null?Us(c,d):fe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return fe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Wi(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return c_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new Ke(de.comparator);function gr(){return vR}const C_=new Ke(de.comparator);function Lo(...t){let e=C_;for(const n of t)e=e.insert(n.key,n);return e}function j_(t){let e=C_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ti(){return ia()}function S_(){return ia()}function ia(){return new qi(t=>t.toString(),(t,e)=>t.isEqual(e))}const wR=new Ke(de.comparator),bR=new pt(de.comparator);function be(...t){let e=bR;for(const n of t)e=e.add(n);return e}const kR=new pt(we);function _R(){return kR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function I_(t){return{integerValue:""+t}}function NR(t,e){return XP(e)?I_(e):Ym(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(){this._=void 0}}function ER(t,e,n){return t instanceof Qc?function(i,s){const o={fields:{[h_]:{stringValue:d_},[p_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&qm(s)&&(s=zu(s)),s&&(o.fields[f_]=s),{mapValue:o}}(n,e):t instanceof Da?A_(t,e):t instanceof Va?P_(t,e):function(i,s){const o=z_(i,s),l=Iv(o)+Iv(i.Ae);return Vf(o)&&Vf(i.Ae)?I_(l):Ym(i.serializer,l)}(t,e)}function TR(t,e,n){return t instanceof Da?A_(t,e):t instanceof Va?P_(t,e):n}function z_(t,e){return t instanceof Yc?function(r){return Vf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Qc extends Ru{}class Da extends Ru{constructor(e){super(),this.elements=e}}function A_(t,e){const n=R_(e);for(const r of t.elements)n.some(i=>Kn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Va extends Ru{constructor(e){super(),this.elements=e}}function P_(t,e){let n=R_(e);for(const r of t.elements)n=n.filter(i=>!Kn(i,r));return{arrayValue:{values:n}}}class Yc extends Ru{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Iv(t){return et(t.integerValue||t.doubleValue)}function R_(t){return Hm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CR(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Da&&i instanceof Da||r instanceof Va&&i instanceof Va?Bs(r.elements,i.elements,Kn):r instanceof Yc&&i instanceof Yc?Kn(r.Ae,i.Ae):r instanceof Qc&&i instanceof Qc}(t.transform,e.transform)}class jR{constructor(e,n){this.version=e,this.transformResults=n}}class Wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Du{}function D_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Xm(t.key,Wn.none()):new Ka(t.key,t.data,Wn.none());{const n=t.data,r=dn.empty();let i=new pt(_t.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Hi(t.key,r,new Tn(i.toArray()),Wn.none())}}function SR(t,e,n){t instanceof Ka?function(i,s,o){const l=i.value.clone(),c=Av(i.fieldTransforms,s,o.transformResults);l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Hi?function(i,s,o){if(!rc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Av(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(V_(i)),c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function sa(t,e,n,r){return t instanceof Ka?function(s,o,l,c){if(!rc(s.precondition,o))return l;const d=s.value.clone(),h=Pv(s.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Hi?function(s,o,l,c){if(!rc(s.precondition,o))return l;const d=Pv(s.fieldTransforms,c,o),h=o.data;return h.setAll(V_(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,l){return rc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function IR(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=z_(r.transform,i||null);s!=null&&(n===null&&(n=dn.empty()),n.set(r.field,s))}return n||null}function zv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bs(r,i,(s,o)=>CR(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends Du{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Hi extends Du{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function V_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Av(t,e,n){const r=new Map;Ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,TR(o,l,n[i]))}return r}function Pv(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ER(s,o,e))}return r}class Xm extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zR extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&SR(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=S_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const c=D_(o,l);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(me.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),be())}isEqual(e){return this.batchId===e.batchId&&Bs(this.mutations,e.mutations,(n,r)=>zv(n,r))&&Bs(this.baseMutations,e.baseMutations,(n,r)=>zv(n,r))}}class Jm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return wR}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Jm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,_e;function DR(t){switch(t){case K.OK:return fe(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return fe(15467,{code:t})}}function M_(t){if(t===void 0)return mr("GRPC error has no .code"),K.UNKNOWN;switch(t){case nt.OK:return K.OK;case nt.CANCELLED:return K.CANCELLED;case nt.UNKNOWN:return K.UNKNOWN;case nt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case nt.INTERNAL:return K.INTERNAL;case nt.UNAVAILABLE:return K.UNAVAILABLE;case nt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case nt.NOT_FOUND:return K.NOT_FOUND;case nt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case nt.ABORTED:return K.ABORTED;case nt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case nt.DATA_LOSS:return K.DATA_LOSS;default:return fe(39323,{code:t})}}(_e=nt||(nt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=new Wr([4294967295,4294967295],0);function Rv(t){const e=VR().encode(t),n=new Jk;return n.update(e),new Uint8Array(n.digest())}function Dv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wr([n,r],0),new Wr([i,s],0)]}class Zm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Oo(`Invalid padding: ${n}`);if(r<0)throw new Oo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Oo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Wr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Wr.fromNumber(r)));return i.compare(MR)===1&&(i=new Wr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Rv(e),[r,i]=Dv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Zm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Rv(e),[r,i]=Dv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Oo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Qa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Vu(me.min(),i,new Ke(we),gr(),be())}}class Qa{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Qa(r,n,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class L_{constructor(e,n){this.targetId=e,this.Ce=n}}class O_{constructor(e,n,r=Ct.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Vv{constructor(){this.ve=0,this.Fe=Mv(),this.Me=Ct.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),n=be(),r=be();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:fe(38017,{changeType:s})}}),new Qa(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=Mv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class LR{constructor(e){this.Ge=e,this.ze=new Map,this.je=gr(),this.Je=Rl(),this.He=Rl(),this.Ye=new Ke(we)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:fe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Lf(s))if(r===0){const o=new de(s.path);this.et(n,o,Pt.newNoDocument(o,me.min()))}else Ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=Zr(r).toUint8Array()}catch(c){if(c instanceof u_)return Fs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Zm(o,i,s)}catch(c){return Fs(c instanceof Oo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Lf(l.target)){const c=new de(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Pt.newNoDocument(c,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=be();this.He.forEach((s,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Vu(e,n,this.Ye,this.je,r);return this.je=gr(),this.Je=Rl(),this.He=Rl(),this.Ye=new Ke(we),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Vv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new pt(we),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new pt(we),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Vv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Rl(){return new Ke(de.comparator)}function Mv(){return new Ke(de.comparator)}const OR={asc:"ASCENDING",desc:"DESCENDING"},FR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BR={and:"AND",or:"OR"};class UR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bf(t,e){return t.useProto3Json||Iu(e)?e:{value:e}}function Xc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function F_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $R(t,e){return Xc(t,e.toTimestamp())}function qn(t){return Ce(!!t,49232),me.fromTimestamp(function(n){const r=Jr(n);return new Le(r.seconds,r.nanos)}(t))}function e0(t,e){return Uf(t,e).canonicalString()}function Uf(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function B_(t){const e=Pe.fromString(t);return Ce(H_(e),10190,{key:e.toString()}),e}function $f(t,e){return e0(t.databaseId,e.path)}function eh(t,e){const n=B_(e);if(n.get(1)!==t.databaseId.projectId)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new re(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new de($_(n))}function U_(t,e){return e0(t.databaseId,e)}function WR(t){const e=B_(t);return e.length===4?Pe.emptyPath():$_(e)}function Wf(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function $_(t){return Ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Lv(t,e,n){return{name:$f(t,e),fields:n.value.mapValue.fields}}function qR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:fe(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(d,h){return d.useProto3Json?(Ce(h===void 0||typeof h=="string",58123),Ct.fromBase64String(h||"")):(Ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Ct.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?K.UNKNOWN:M_(d.code);return new re(h,d.message||"")}(o);n=new O_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=eh(t,r.document.name),s=qn(r.document.updateTime),o=r.document.createTime?qn(r.document.createTime):me.min(),l=new dn({mapValue:{fields:r.document.fields}}),c=Pt.newFoundDocument(i,s,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new ic(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=eh(t,r.document),s=r.readTime?qn(r.readTime):me.min(),o=Pt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new ic([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=eh(t,r.document),s=r.removedTargetIds||[];n=new ic([],s,i,null)}else{if(!("filter"in e))return fe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new RR(i,s),l=r.targetId;n=new L_(l,o)}}return n}function HR(t,e){let n;if(e instanceof Ka)n={update:Lv(t,e.key,e.value)};else if(e instanceof Xm)n={delete:$f(t,e.key)};else if(e instanceof Hi)n={update:Lv(t,e.key,e.data),updateMask:t3(e.fieldMask)};else{if(!(e instanceof zR))return fe(16599,{Vt:e.type});n={verify:$f(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Qc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Da)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Va)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw fe(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$R(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:fe(27497)}(t,e.precondition)),n}function GR(t,e){return t&&t.length>0?(Ce(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?qn(i.updateTime):qn(s);return o.isEqual(me.min())&&(o=qn(s)),new jR(o,i.transformResults||[])}(n,e))):[]}function KR(t,e){return{documents:[U_(t,e.path)]}}function QR(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=U_(t,i);const s=function(d){if(d.length!==0)return q_(In.create(d,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:ns(m.field),direction:JR(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Bf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function YR(t){let e=WR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ce(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){const m=W_(p);return m instanceof In&&w_(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(N){return new Ra(rs(N.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Iu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,v=p.values||[];return new Kc(v,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,v=p.values||[];return new Kc(v,m)}(n.endAt)),mR(e,i,o,s,l,"F",c,d)}function XR(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function W_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=rs(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rs(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rs(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=rs(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fe(61313);default:return fe(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(rs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fe(58110);default:return fe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return In.create(n.compositeFilter.filters.map(r=>W_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return fe(1026)}}(n.compositeFilter.op))}(t):fe(30097,{filter:t})}function JR(t){return OR[t]}function ZR(t){return FR[t]}function e3(t){return BR[t]}function ns(t){return{fieldPath:t.canonicalString()}}function rs(t){return _t.fromServerFormat(t.fieldPath)}function q_(t){return t instanceof st?function(n){if(n.op==="=="){if(Ev(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NAN"}};if(Nv(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ev(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NAN"}};if(Nv(n.value))return{unaryFilter:{field:ns(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ns(n.field),op:ZR(n.op),value:n.value}}}(t):t instanceof In?function(n){const r=n.getFilters().map(i=>q_(i));return r.length===1?r[0]:{compositeFilter:{op:e3(n.op),filters:r}}}(t):fe(54877,{filter:t})}function t3(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function H_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,r,i,s=me.min(),o=me.min(),l=Ct.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3{constructor(e){this.yt=e}}function r3(t){const e=YR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ff(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3{constructor(){this.Cn=new s3}addToCollectionParentIndex(e,n){return this.Cn.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Xr.min())}updateCollectionGroup(e,n,r){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class s3{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new pt(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new pt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},G_=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(G_,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ws(0)}static cr(){return new Ws(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fv="LruGarbageCollector",o3=1048576;function Bv([t,e],[n,r]){const i=we(t,n);return i===0?we(e,r):i}class a3{constructor(e){this.Ir=e,this.buffer=new pt(Bv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Bv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class l3{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){oe(Fv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){to(n)?oe(Fv,"Ignoring IndexedDB error during garbage collection: ",n):await eo(n)}await this.Vr(3e5)})}}class c3{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Q.resolve(Su.ce);const r=new a3(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),Q.resolve(Ov)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ov):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),es()<=Ne.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),Q.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}function u3(t,e){return new c3(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(){this.changes=new qi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Q.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h3{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f3{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&sa(r.mutation,i,Tn.empty(),Le.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,be()).next(()=>r))}getLocalViewOfDocuments(e,n,r=be()){const i=Ti();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Lo();return s.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,be()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=gr();const o=ia(),l=function(){return ia()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Hi)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),sa(h.mutation,d,h.mutation.getFieldMask(),Le.now())):o.set(d.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new h3(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ia();let i=new Ke((o,l)=>o-l),s=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||Tn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const p=(i.get(l.batchId)||be()).add(c);i=i.insert(l.batchId,p)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=S_();h.forEach(m=>{if(!s.has(m)){const v=D_(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return Q.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return de.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):N_(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Q.resolve(Ti());let l=Ia,c=s;return o.next(d=>Q.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),s.get(h)?Q.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,c,d,be())).next(h=>({batchId:l,changes:j_(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new de(n)).next(r=>{let i=Lo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Lo();return this.indexManager.getCollectionParents(e,s).next(l=>Q.forEach(l,c=>{const d=function(p,m){return new no(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Pt.newInvalidDocument(h)))});let l=Lo();return o.forEach((c,d)=>{const h=s.get(c);h!==void 0&&sa(h.mutation,d,Tn.empty(),Le.now()),Pu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Q.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:qn(i.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:r3(i.bundledQuery),readTime:qn(i.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m3{constructor(){this.overlays=new Ke(de.comparator),this.qr=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ti();return Q.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),Q.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),Q.resolve()}getOverlaysForCollection(e,n,r){const i=Ti(),s=n.length+1,o=new de(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Q.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ke((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=Ti(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ti(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return Q.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PR(n,r));let s=this.qr.get(n);s===void 0&&(s=be(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3{constructor(){this.sessionToken=Ct.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(){this.Qr=new pt(xt.$r),this.Ur=new pt(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new xt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new xt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new de(new Pe([])),r=new xt(n,e),i=new xt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new de(new Pe([])),r=new xt(n,e),i=new xt(n,e+1);let s=be();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new xt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return de.comparator(e.key,n.key)||we(e.Yr,n.Yr)}static Kr(e,n){return we(e.Yr,n.Yr)||de.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new pt(xt.$r)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AR(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Zr=this.Zr.add(new xt(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Q.resolve(o)}lookupMutationBatch(e,n){return Q.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return Q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?Wm:this.tr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new xt(n,0),i=new xt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const l=this.Xr(o.Yr);s.push(l)}),Q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new pt(we);return n.forEach(i=>{const s=new xt(i,0),o=new xt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],l=>{r=r.add(l.Yr)})}),Q.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;de.isDocumentKey(s)||(s=s.child(""));const o=new xt(new de(s),0);let l=new pt(we);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},o),Q.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Q.forEach(n.mutations,i=>{const s=new xt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new xt(n,0),i=this.Zr.firstAfterOrEqual(r);return Q.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(e){this.ri=e,this.docs=function(){return new Ke(de.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Q.resolve(r?r.document.mutableCopy():Pt.newInvalidDocument(n))}getEntries(e,n){let r=gr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pt.newInvalidDocument(i))}),Q.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=gr();const o=n.path,l=new de(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||GP(HP(h),r)<=0||(i.has(h.key)||Pu(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Q.resolve(s)}getAllFromCollectionGroup(e,n,r,i){fe(9500)}ii(e,n){return Q.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new v3(this)}getSize(e){return Q.resolve(this.size)}}class v3 extends d3{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),Q.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w3{constructor(e){this.persistence=e,this.si=new qi(n=>Gm(n),Km),this.lastRemoteSnapshotVersion=me.min(),this.highestTargetId=0,this.oi=0,this._i=new t0,this.targetCount=0,this.ai=Ws.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),Q.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Pr(n),Q.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),Q.waitFor(s).next(()=>i)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return Q.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),Q.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),Q.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return Q.resolve(r)}containsKey(e,n){return Q.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e,n){this.ui={},this.overlays={},this.ci=new Su(0),this.li=!1,this.li=!0,this.hi=new g3,this.referenceDelegate=e(this),this.Pi=new w3(this),this.indexManager=new i3,this.remoteDocumentCache=function(i){return new y3(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new n3(n),this.Ii=new p3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new m3,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new x3(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new b3(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return Q.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class b3 extends QP{constructor(e){super(),this.currentSequenceNumber=e}}class n0{constructor(e){this.persistence=e,this.Ri=new t0,this.Vi=null}static mi(e){return new n0(e)}get fi(){if(this.Vi)return this.Vi;throw fe(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),Q.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.fi,r=>{const i=de.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,me.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Q.or([()=>Q.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Jc{constructor(e,n){this.persistence=e,this.pi=new qi(r=>JP(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=u3(this,n)}static mi(e,n){return new Jc(e,n)}Ei(){}di(e){return Q.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return Q.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?Q.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,s.removeEntry(o,me.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),Q.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Q.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=tc(e.data.value)),n}br(e,n,r){return Q.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return Q.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=be(),i=be();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new r0(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _3{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return GI()?8:YP(WI())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new k3;return this.Ss(e,n,o).next(l=>{if(s.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(es()<=Ne.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",ts(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Q.resolve()):(es()<=Ne.DEBUG&&oe("QueryEngine","Query:",ts(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(es()<=Ne.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",ts(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$n(n))):Q.resolve())}ys(e,n){if(Sv(n))return Q.resolve(null);let r=$n(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Ff(n,null,"F"),r=$n(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=be(...s);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,Ff(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,i){return Sv(n)||i.isEqual(me.min())?Q.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?Q.resolve(null):(es()<=Ne.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ts(n)),this.vs(e,o,n,qP(i,Ia)).next(l=>l))})}Ds(e,n){let r=new pt(T_(e));return n.forEach((i,s)=>{Pu(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return es()<=Ne.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",ts(n)),this.ps.getDocumentsMatchingQuery(e,n,Xr.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="LocalStore",N3=3e8;class E3{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ke(we),this.xs=new qi(s=>Gm(s),Km),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new f3(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function T3(t,e,n,r){return new E3(t,e,n,r)}async function Q_(t,e){const n=ge(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let c=be();for(const d of i){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of s){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function C3(t,e){const n=ge(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const p=d.batch,m=p.keys();let v=Q.resolve();return m.forEach(N=>{v=v.next(()=>h.getEntry(c,N)).next(C=>{const P=d.docVersions.get(N);Ce(P!==null,48541),C.version.compareTo(P)<0&&(p.applyToRemoteDocument(C,d),C.isValidDocument()&&(C.setReadTime(d.commitVersion),h.addEntry(C)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=be();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Y_(t){const e=ge(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function j3(t,e){const n=ge(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=i.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Ct.EMPTY_BYTE_STRING,me.min()).withLastLimboFreeSnapshotVersion(me.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(C,P,b){return C.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-C.snapshotVersion.toMicroseconds()>=N3?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(m,v,h)&&l.push(n.Pi.updateTargetData(s,v))});let c=gr(),d=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),l.push(S3(s,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(me.min())){const h=n.Pi.getLastRemoteSnapshotVersion(s).next(p=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(h)}return Q.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,d)).next(()=>c)}).then(s=>(n.Ms=i,s))}function S3(t,e,n){let r=be(),i=be();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=gr();return n.forEach((l,c)=>{const d=s.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(me.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):oe(i0,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:i}})}function I3(t,e){const n=ge(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Wm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function z3(t,e){const n=ge(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,Q.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new Pr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function qf(t,e,n){const r=ge(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!to(o))throw o;oe(i0,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Uv(t,e,n){const r=ge(t);let i=me.min(),s=be();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const p=ge(c),m=p.xs.get(h);return m!==void 0?Q.resolve(p.Ms.get(m)):p.Pi.getTargetData(d,h)}(r,o,$n(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{s=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:me.min(),n?s:be())).next(l=>(A3(r,xR(e),l),{documents:l,Qs:s})))}function A3(t,e,n){let r=t.Os.get(e)||me.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class $v{constructor(){this.activeTargetIds=_R()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class P3{constructor(){this.Mo=new $v,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $v,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv="ConnectivityMonitor";class qv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){oe(Wv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){oe(Wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dl=null;function Hf(){return Dl===null?Dl=function(){return 268435456+Math.round(2147483648*Math.random())}():Dl++,"0x"+Dl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th="RestConnection",D3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class V3{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Hc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Hf(),l=this.zo(e,n.toUriEncodedString());oe(th,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:d}=new URL(l),h=Pm(d);return this.Jo(e,l,c,r,h).then(p=>(oe(th,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Fs(th,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zs}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=D3[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const It="WebChannelConnection";class L3 extends V3{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Hf();return new Promise((l,c)=>{const d=new Zk;d.setWithCredentials(!0),d.listenOnce(e_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ec.NO_ERROR:const p=d.getResponseJson();oe(It,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case ec.TIMEOUT:oe(It,`RPC '${e}' ${o} timed out`),c(new re(K.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const m=d.getStatus();if(oe(It,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const N=v==null?void 0:v.error;if(N&&N.status&&N.message){const C=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(y)>=0?y:K.UNKNOWN}(N.status);c(new re(C,N.message))}else c(new re(K.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new re(K.UNAVAILABLE,"Connection failed."));break;default:fe(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{oe(It,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);oe(It,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=Hf(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=r_(),l=n_(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=s.join("");oe(It,`Creating RPC '${e}' stream ${i}: ${h}`,c);const p=o.createWebChannel(h,c);this.I_(p);let m=!1,v=!1;const N=new M3({Yo:P=>{v?oe(It,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(oe(It,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),oe(It,`RPC '${e}' stream ${i} sending:`,P),p.send(P))},Zo:()=>p.close()}),C=(P,b,y)=>{P.listen(b,w=>{try{y(w)}catch(D){setTimeout(()=>{throw D},0)}})};return C(p,Mo.EventType.OPEN,()=>{v||(oe(It,`RPC '${e}' stream ${i} transport opened.`),N.o_())}),C(p,Mo.EventType.CLOSE,()=>{v||(v=!0,oe(It,`RPC '${e}' stream ${i} transport closed`),N.a_(),this.E_(p))}),C(p,Mo.EventType.ERROR,P=>{v||(v=!0,Fs(It,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),N.a_(new re(K.UNAVAILABLE,"The operation could not be completed")))}),C(p,Mo.EventType.MESSAGE,P=>{var b;if(!v){const y=P.data[0];Ce(!!y,16349);const w=y,D=(w==null?void 0:w.error)||((b=w[0])==null?void 0:b.error);if(D){oe(It,`RPC '${e}' stream ${i} received error:`,D);const V=D.status;let O=function(_){const E=nt[_];if(E!==void 0)return M_(E)}(V),k=D.message;O===void 0&&(O=K.INTERNAL,k="Unknown error status: "+V+" with message "+D.message),v=!0,N.a_(new re(O,k)),p.close()}else oe(It,`RPC '${e}' stream ${i} received:`,y),N.u_(y)}}),C(l,t_.STAT_EVENT,P=>{P.stat===Pf.PROXY?oe(It,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===Pf.NOPROXY&&oe(It,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){return new UR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="PersistentStream";class J_{constructor(e,n,r,i,s,o,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new X_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(mr(n.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new re(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return oe(Hv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(oe(Hv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class O3 extends J_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qR(this.serializer,e),r=function(s){if(!("targetChange"in s))return me.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?me.min():o.readTime?qn(o.readTime):me.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Wf(this.serializer),n.addTarget=function(s,o){let l;const c=o.target;if(l=Lf(c)?{documents:KR(s,c)}:{query:QR(s,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=F_(s,o.resumeToken);const d=Bf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(me.min())>0){l.readTime=Xc(s,o.snapshotVersion.toTimestamp());const d=Bf(s,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=XR(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Wf(this.serializer),n.removeTarget=e,this.q_(n)}}class F3 extends J_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=GR(e.writeResults,e.commitTime),r=qn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Wf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>HR(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{}class U3 extends B3{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,Uf(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new re(K.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,Uf(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new re(K.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class $3{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mr(n),this.aa=!1):oe("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="RemoteStore";class W3{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{Gi(this)&&(oe(Bi,"Restarting streams for network reachability change."),await async function(c){const d=ge(c);d.Ea.add(4),await Ya(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Lu(d)}(this))})}),this.Ra=new $3(r,i)}}async function Lu(t){if(Gi(t))for(const e of t.da)await e(!0)}async function Ya(t){for(const e of t.da)await e(!1)}function Z_(t,e){const n=ge(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),l0(n)?a0(n):ro(n).O_()&&o0(n,e))}function s0(t,e){const n=ge(t),r=ro(n);n.Ia.delete(e),r.O_()&&eN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Gi(n)&&n.Ra.set("Unknown"))}function o0(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(me.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ro(t).Y_(e)}function eN(t,e){t.Va.Ue(e),ro(t).Z_(e)}function a0(t){t.Va=new LR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ro(t).start(),t.Ra.ua()}function l0(t){return Gi(t)&&!ro(t).x_()&&t.Ia.size>0}function Gi(t){return ge(t).Ea.size===0}function tN(t){t.Va=void 0}async function q3(t){t.Ra.set("Online")}async function H3(t){t.Ia.forEach((e,n)=>{o0(t,e)})}async function G3(t,e){tN(t),l0(t)?(t.Ra.ha(e),a0(t)):t.Ra.set("Unknown")}async function K3(t,e,n){if(t.Ra.set("Online"),e instanceof O_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){oe(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Zc(t,r)}else if(e instanceof ic?t.Va.Ze(e):e instanceof L_?t.Va.st(e):t.Va.tt(e),!n.isEqual(me.min()))try{const r=await Y_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=s.Ia.get(c);if(!h)return;s.Ia.set(c,h.withResumeToken(Ct.EMPTY_BYTE_STRING,h.snapshotVersion)),eN(s,c);const p=new Pr(h.target,c,d,h.sequenceNumber);o0(s,p)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){oe(Bi,"Failed to raise snapshot:",r),await Zc(t,r)}}async function Zc(t,e,n){if(!to(e))throw e;t.Ea.add(1),await Ya(t),t.Ra.set("Offline"),n||(n=()=>Y_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe(Bi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Lu(t)})}function nN(t,e){return e().catch(n=>Zc(t,n,e))}async function Ou(t){const e=ge(t),n=ti(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wm;for(;Q3(e);)try{const i=await I3(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,Y3(e,i)}catch(i){await Zc(e,i)}rN(e)&&iN(e)}function Q3(t){return Gi(t)&&t.Ta.length<10}function Y3(t,e){t.Ta.push(e);const n=ti(t);n.O_()&&n.X_&&n.ea(e.mutations)}function rN(t){return Gi(t)&&!ti(t).x_()&&t.Ta.length>0}function iN(t){ti(t).start()}async function X3(t){ti(t).ra()}async function J3(t){const e=ti(t);for(const n of t.Ta)e.ea(n.mutations)}async function Z3(t,e,n){const r=t.Ta.shift(),i=Jm.from(r,e,n);await nN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ou(t)}async function e6(t,e){e&&ti(t).X_&&await async function(r,i){if(function(o){return DR(o)&&o!==K.ABORTED}(i.code)){const s=r.Ta.shift();ti(r).B_(),await nN(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Ou(r)}}(t,e),rN(t)&&iN(t)}async function Gv(t,e){const n=ge(t);n.asyncQueue.verifyOperationInProgress(),oe(Bi,"RemoteStore received new credentials");const r=Gi(n);n.Ea.add(3),await Ya(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Lu(n)}async function t6(t,e){const n=ge(t);e?(n.Ea.delete(2),await Lu(n)):e||(n.Ea.add(2),await Ya(n),n.Ra.set("Unknown"))}function ro(t){return t.ma||(t.ma=function(n,r,i){const s=ge(n);return s.sa(),new O3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:q3.bind(null,t),t_:H3.bind(null,t),r_:G3.bind(null,t),H_:K3.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),l0(t)?a0(t):t.Ra.set("Unknown")):(await t.ma.stop(),tN(t))})),t.ma}function ti(t){return t.fa||(t.fa=function(n,r,i){const s=ge(n);return s.sa(),new F3(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:X3.bind(null,t),r_:e6.bind(null,t),ta:J3.bind(null,t),na:Z3.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ou(t)):(await t.fa.stop(),t.Ta.length>0&&(oe(Bi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ir,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new c0(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new re(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u0(t,e){if(mr("AsyncQueue",`${e}: ${t}`),to(t))return new re(K.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ss{static emptySet(e){return new Ss(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||de.comparator(n.key,r.key):(n,r)=>de.comparator(n.key,r.key),this.keyedMap=Lo(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ss)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ss;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kv{constructor(){this.ga=new Ke(de.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):fe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class qs{constructor(e,n,r,i,s,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new qs(e,n,Ss.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class r6{constructor(){this.queries=Qv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=ge(n),s=i.queries;i.queries=Qv(),s.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new re(K.ABORTED,"Firestore shutting down"))}}function Qv(){return new qi(t=>E_(t),Au)}async function sN(t,e){const n=ge(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new n6,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=u0(o,`Initialization of query '${ts(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&d0(n)}async function oN(t,e){const n=ge(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function i6(t,e){const n=ge(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.Sa)l.Fa(i)&&(r=!0);o.wa=i}}r&&d0(n)}function s6(t,e,n){const r=ge(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function d0(t){t.Ca.forEach(e=>{e.next()})}var Gf,Yv;(Yv=Gf||(Gf={})).Ma="default",Yv.Cache="cache";class aN{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new qs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e){this.key=e}}class cN{constructor(e){this.key=e}}class o6{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=be(),this.mutatedKeys=be(),this.eu=T_(e),this.tu=new Ss(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Kv,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const m=i.get(h),v=Pu(this.query,p)?p:null,N=!!m&&this.mutatedKeys.has(m.key),C=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let P=!1;m&&v?m.data.isEqual(v.data)?N!==C&&(r.track({type:3,doc:v}),P=!0):this.su(m,v)||(r.track({type:2,doc:v}),P=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(l=!0)):!m&&v?(r.track({type:0,doc:v}),P=!0):m&&!v&&(r.track({type:1,doc:m}),P=!0,(c||d)&&(l=!0)),P&&(v?(o=o.add(v),s=C?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(v,N){const C=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fe(20277,{Rt:P})}};return C(v)-C(N)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new qs(this.query,e.tu,s,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Kv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=be(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new cN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new lN(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=be();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qs.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const h0="SyncEngine";class a6{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class l6{constructor(e){this.key=e,this.hu=!1}}class c6{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new qi(l=>E_(l),Au),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(de.comparator),this.Au=new Map,this.Ru=new t0,this.Vu={},this.mu=new Map,this.fu=Ws.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function u6(t,e,n=!0){const r=mN(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await uN(r,e,n,!0),i}async function d6(t,e){const n=mN(t);await uN(n,e,!0,!1)}async function uN(t,e,n,r){const i=await z3(t.localStore,$n(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await h6(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Z_(t.remoteStore,i),l}async function h6(t,e,n,r,i){t.pu=(p,m,v)=>async function(C,P,b,y){let w=P.view.ru(b);w.Cs&&(w=await Uv(C.localStore,P.query,!1).then(({documents:k})=>P.view.ru(k,w)));const D=y&&y.targetChanges.get(P.targetId),V=y&&y.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(w,C.isPrimaryClient,D,V);return Jv(C,P.targetId,O.au),O.snapshot}(t,p,m,v);const s=await Uv(t.localStore,e,!0),o=new o6(e,s.Qs),l=o.ru(s.documents),c=Qa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(l,t.isPrimaryClient,c);Jv(t,n,d.au);const h=new a6(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function f6(t,e,n){const r=ge(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Au(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qf(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&s0(r.remoteStore,i.targetId),Kf(r,i.targetId)}).catch(eo)):(Kf(r,i.targetId),await qf(r.localStore,i.targetId,!0))}async function p6(t,e){const n=ge(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),s0(n.remoteStore,r.targetId))}async function m6(t,e,n){const r=k6(t);try{const i=await function(o,l){const c=ge(o),d=Le.now(),h=l.reduce((v,N)=>v.add(N.key),be());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let N=gr(),C=be();return c.Ns.getEntries(v,h).next(P=>{N=P,N.forEach((b,y)=>{y.isValidDocument()||(C=C.add(b))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,N)).next(P=>{p=P;const b=[];for(const y of l){const w=IR(y,p.get(y.key).overlayedDocument);w!=null&&b.push(new Hi(y.key,w,x_(w.value.mapValue),Wn.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,b,l)}).next(P=>{m=P;const b=P.applyToLocalDocumentSet(p,C);return c.documentOverlayCache.saveOverlays(v,P.batchId,b)})}).then(()=>({batchId:m.batchId,changes:j_(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ke(we)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(r,i.batchId,n),await Xa(r,i.changes),await Ou(r.remoteStore)}catch(i){const s=u0(i,"Failed to persist write");n.reject(s)}}async function dN(t,e){const n=ge(t);try{const r=await j3(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ce(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ce(o.hu,14607):i.removedDocuments.size>0&&(Ce(o.hu,42227),o.hu=!1))}),await Xa(n,r,e)}catch(r){await eo(r)}}function Xv(t,e,n){const r=ge(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const c=ge(o);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(d=!0)}),d&&d0(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function g6(t,e,n){const r=ge(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ke(de.comparator);o=o.insert(s,Pt.newNoDocument(s,me.min()));const l=be().add(s),c=new Vu(me.min(),new Map,new Ke(we),o,l);await dN(r,c),r.du=r.du.remove(s),r.Au.delete(e),f0(r)}else await qf(r.localStore,e,!1).then(()=>Kf(r,e,n)).catch(eo)}async function x6(t,e){const n=ge(t),r=e.batch.batchId;try{const i=await C3(n.localStore,e);fN(n,r,null),hN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Xa(n,i)}catch(i){await eo(i)}}async function y6(t,e,n){const r=ge(t);try{const i=await function(o,l){const c=ge(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(Ce(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);fN(r,e,n),hN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Xa(r,i)}catch(i){await eo(i)}}function hN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function fN(t,e,n){const r=ge(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Kf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||pN(t,r)})}function pN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(s0(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),f0(t))}function Jv(t,e,n){for(const r of n)r instanceof lN?(t.Ru.addReference(r.key,e),v6(t,r)):r instanceof cN?(oe(h0,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||pN(t,r.key)):fe(19791,{wu:r})}function v6(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(oe(h0,"New document in limbo: "+n),t.Eu.add(r),f0(t))}function f0(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new de(Pe.fromString(e)),r=t.fu.next();t.Au.set(r,new l6(n)),t.du=t.du.insert(n,r),Z_(t.remoteStore,new Pr($n(Qm(n.path)),r,"TargetPurposeLimboResolution",Su.ce))}}async function Xa(t,e,n){const r=ge(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){i.push(d);const p=r0.As(c.targetId,d);s.push(p)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(c,d){const h=ge(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Q.forEach(d,m=>Q.forEach(m.Es,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>Q.forEach(m.ds,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!to(p))throw p;oe(i0,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const v=h.Ms.get(m),N=v.snapshotVersion,C=v.withLastLimboFreeSnapshotVersion(N);h.Ms=h.Ms.insert(m,C)}}}(r.localStore,s))}async function w6(t,e){const n=ge(t);if(!n.currentUser.isEqual(e)){oe(h0,"User change. New user:",e.toKey());const r=await Q_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(c=>{c.reject(new re(K.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Xa(n,r.Ls)}}function b6(t,e){const n=ge(t),r=n.Au.get(e);if(r&&r.hu)return be().add(r.key);{let i=be();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function mN(t){const e=ge(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=b6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=g6.bind(null,e),e.Pu.H_=i6.bind(null,e.eventManager),e.Pu.yu=s6.bind(null,e.eventManager),e}function k6(t){const e=ge(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=y6.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return T3(this.persistence,new _3,e.initialUser,this.serializer)}Cu(e){return new K_(n0.mi,this.serializer)}Du(e){return new P3}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class _6 extends eu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ce(this.persistence.referenceDelegate instanceof Jc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new l3(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new K_(r=>Jc.mi(r,n),this.serializer)}}class Qf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=w6.bind(null,this.syncEngine),await t6(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new r6}()}createDatastore(e){const n=Mu(e.databaseInfo.databaseId),r=function(s){return new L3(s)}(e.databaseInfo);return function(s,o,l,c){return new U3(s,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new W3(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Xv(this.syncEngine,n,0),function(){return qv.v()?new qv:new R3}())}createSyncEngine(e,n){return function(i,s,o,l,c,d,h){const p=new c6(i,s,o,l,c,d);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=ge(i);oe(Bi,"RemoteStore shutting down."),s.Ea.add(5),await Ya(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Qf.provider={build:()=>new Qf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ni="FirestoreClient";class N6{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=zt.UNAUTHENTICATED,this.clientId=$m.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{oe(ni,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(oe(ni,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ir;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=u0(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rh(t,e){t.asyncQueue.verifyOperationInProgress(),oe(ni,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Q_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Zv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await E6(t);oe(ni,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Gv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Gv(e.remoteStore,i)),t._onlineComponents=e}async function E6(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe(ni,"Using user provided OfflineComponentProvider");try{await rh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Fs("Error using user provided cache. Falling back to memory cache: "+n),await rh(t,new eu)}}else oe(ni,"Using default OfflineComponentProvider"),await rh(t,new _6(void 0));return t._offlineComponents}async function xN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe(ni,"Using user provided OnlineComponentProvider"),await Zv(t,t._uninitializedComponentsProvider._online)):(oe(ni,"Using default OnlineComponentProvider"),await Zv(t,new Qf))),t._onlineComponents}function T6(t){return xN(t).then(e=>e.syncEngine)}async function yN(t){const e=await xN(t),n=e.eventManager;return n.onListen=u6.bind(null,e.syncEngine),n.onUnlisten=f6.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=d6.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=p6.bind(null,e.syncEngine),n}function C6(t,e,n={}){const r=new ir;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const h=new gN({next:m=>{h.Nu(),o.enqueueAndForget(()=>oN(s,p));const v=m.docs.has(l);!v&&m.fromCache?d.reject(new re(K.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?d.reject(new re(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new aN(Qm(l.path),h,{includeMetadataChanges:!0,qa:!0});return sN(s,p)}(await yN(t),t.asyncQueue,e,n,r)),r.promise}function j6(t,e,n={}){const r=new ir;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,c,d){const h=new gN({next:m=>{h.Nu(),o.enqueueAndForget(()=>oN(s,p)),m.fromCache&&c.source==="server"?d.reject(new re(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new aN(l,h,{includeMetadataChanges:!0,qa:!0});return sN(s,p)}(await yN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="firestore.googleapis.com",t1=!0;class n1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new re(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=wN,this.ssl=t1}else this.host=e.host,this.ssl=e.ssl??t1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=G_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<o3)throw new re(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}WP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new re(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new n1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new re(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new re(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new n1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new RP;switch(r.type){case"firstParty":return new LP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new re(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=e1.get(n);r&&(oe("ComponentProvider","Removing Datastore"),e1.delete(n),r.terminate())}(this),Promise.resolve()}}function S6(t,e,n,r={}){var d;t=Yr(t,Fu);const i=Pm(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(OI(`https://${l}`),$I("Firestore",!0)),s.host!==wN&&s.host!==l&&Fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...s,host:l,ssl:i,emulatorOptions:r};if(!ja(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=zt.MOCK_USER;else{h=FI(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new re(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new zt(m)}t._authCredentials=new DP(new s_(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ki(this.firestore,e,this._query)}}class at{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new at(this.firestore,e,this._key)}toJSON(){return{type:at._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ga(n,at._jsonSchema))return new at(e,r||null,new de(Pe.fromString(n.referencePath)))}}at._jsonSchemaVersion="firestore/documentReference/1.0",at._jsonSchema={type:ot("string",at._jsonSchemaVersion),referencePath:ot("string")};class qr extends Ki{constructor(e,n,r){super(e,n,Qm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new de(e))}withConverter(e){return new qr(this.firestore,e,this._path)}}function ih(t,e,...n){if(t=hr(t),o_("collection","path",e),t instanceof Fu){const r=Pe.fromString(e,...n);return mv(r),new qr(t,null,r)}{if(!(t instanceof at||t instanceof qr))throw new re(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return mv(r),new qr(t.firestore,null,r)}}function ut(t,e,...n){if(t=hr(t),arguments.length===1&&(e=$m.newId()),o_("doc","path",e),t instanceof Fu){const r=Pe.fromString(e,...n);return pv(r),new at(t,null,new de(r))}{if(!(t instanceof at||t instanceof qr))throw new re(K.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return pv(r),new at(t.firestore,t instanceof qr?t.converter:null,new de(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="AsyncQueue";class i1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new X_(this,"async_queue_retry"),this._c=()=>{const r=nh();r&&oe(r1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=nh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=nh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ir;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!to(e))throw e;oe(r1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,mr("INTERNAL UNHANDLED ERROR: ",s1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=c0.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&fe(47125,{Pc:s1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function s1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Ja extends Fu{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new i1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i1(e),this._firestoreClient=void 0,await e}}}function I6(t,e){const n=typeof t=="object"?t:jk(),r=typeof t=="string"?t:Hc,i=Ha(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=MI("firestore");s&&S6(i,...s)}return i}function p0(t){if(t._terminated)throw new re(K.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||z6(t),t._firestoreClient}function z6(t){var r,i,s;const e=t._freezeSettings(),n=function(l,c,d,h){return new tR(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,vN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new N6(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hn(Ct.fromBase64String(e))}catch(n){throw new re(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hn(Ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ga(e,hn._jsonSchema))return hn.fromBase64String(e.bytes)}}hn._jsonSchemaVersion="firestore/bytes/1.0",hn._jsonSchema={type:ot("string",hn._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new re(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new re(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new re(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hn._jsonSchemaVersion}}static fromJSON(e){if(Ga(e,Hn._jsonSchema))return new Hn(e.latitude,e.longitude)}}Hn._jsonSchemaVersion="firestore/geoPoint/1.0",Hn._jsonSchema={type:ot("string",Hn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ga(e,Gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Gn(e.vectorValues);throw new re(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gn._jsonSchemaVersion="firestore/vectorValue/1.0",Gn._jsonSchema={type:ot("string",Gn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=/^__.*__$/;class P6{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ka(e,this.data,n,this.fieldTransforms)}}function kN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fe(40011,{Ac:t})}}class g0{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new g0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return tu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(kN(this.Ac)&&A6.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class R6{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mu(e)}Cc(e,n,r,i=!1){return new g0({Ac:e,methodName:n,Dc:r,path:_t.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _N(t){const e=t._freezeSettings(),n=Mu(t._databaseId);return new R6(t._databaseId,!!e.ignoreUndefinedProperties,n)}function D6(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);TN("Data must be an object, but it was:",o,r);const l=NN(r,o);let c,d;if(s.merge)c=new Tn(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const m=M6(e,p,n);if(!o.contains(m))throw new re(K.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);O6(h,m)||h.push(m)}c=new Tn(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new P6(new dn(l),c,d)}function V6(t,e,n,r=!1){return x0(n,t.Cc(r?4:3,e))}function x0(t,e){if(EN(t=hr(t)))return TN("Unsupported field value:",e,t),NN(t,e);if(t instanceof bN)return function(r,i){if(!kN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let c=x0(l,i.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=hr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return NR(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Le.fromDate(r);return{timestampValue:Xc(i.serializer,s)}}if(r instanceof Le){const s=new Le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Xc(i.serializer,s)}}if(r instanceof Hn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hn)return{bytesValue:F_(i.serializer,r._byteString)};if(r instanceof at){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:e0(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Gn)return function(o,l){return{mapValue:{fields:{[m_]:{stringValue:g_},[Gc]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ym(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${ju(r)}`)}(t,e)}function NN(t,e){const n={};return c_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wi(t,(r,i)=>{const s=x0(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function EN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Le||t instanceof Hn||t instanceof hn||t instanceof at||t instanceof bN||t instanceof Gn)}function TN(t,e,n){if(!EN(n)||!a_(n)){const r=ju(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function M6(t,e,n){if((e=hr(e))instanceof m0)return e._internalPath;if(typeof e=="string")return CN(t,e);throw tu("Field path arguments must be of type string or ",t,!1,void 0,n)}const L6=new RegExp("[~\\*/\\[\\]]");function CN(t,e,n){if(e.search(L6)>=0)throw tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new m0(...e.split("."))._internalPath}catch{throw tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function tu(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new re(K.INVALID_ARGUMENT,l+t+c)}function O6(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new F6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(y0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class F6 extends jN{data(){return super.data()}}function y0(t,e){return typeof e=="string"?CN(t,e):e instanceof m0?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B6(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new re(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class v0{}class SN extends v0{}function o1(t,e,...n){let r=[];e instanceof v0&&r.push(e),r=r.concat(n),function(s){const o=s.filter(c=>c instanceof b0).length,l=s.filter(c=>c instanceof w0).length;if(o>1||o>0&&l>0)throw new re(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class w0 extends SN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new w0(e,n,r)}_apply(e){const n=this._parse(e);return IN(e._query,n),new Ki(e.firestore,e.converter,Of(e._query,n))}_parse(e){const n=_N(e.firestore);return function(s,o,l,c,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new re(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){c1(p,h);const N=[];for(const C of p)N.push(l1(c,s,C));m={arrayValue:{values:N}}}else m=l1(c,s,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||c1(p,h),m=V6(l,o,p,h==="in"||h==="not-in");return st.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class b0 extends v0{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new b0(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:In.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const l=s.getFlattenedFilters();for(const c of l)IN(o,c),o=Of(o,c)}(e._query,n),new Ki(e.firestore,e.converter,Of(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class k0 extends SN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new k0(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new re(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ra(s,o)}(e._query,this._field,this._direction);return new Ki(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new no(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function a1(t,e="asc"){const n=e,r=y0("orderBy",t);return k0._create(r,n)}function l1(t,e,n){if(typeof(n=hr(n))=="string"){if(n==="")throw new re(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!N_(e)&&n.indexOf("/")!==-1)throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!de.isDocumentKey(r))throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _v(t,new de(r))}if(n instanceof at)return _v(t,n._key);throw new re(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ju(n)}.`)}function c1(t,e){if(!Array.isArray(t)||t.length===0)throw new re(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function IN(t,e){const n=function(i,s){for(const o of i)for(const l of o.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new re(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class U6{convertValue(e,n="none"){switch(ei(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Zr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw fe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Wi(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Gc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>et(o.doubleValue));return new Gn(n)}convertGeoPoint(e){return new Hn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=zu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(za(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new Le(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);Ce(H_(r),9688,{name:e});const i=new Aa(r.get(1),r.get(3)),s=new de(r.popFirst(5));return i.isEqual(n)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $6(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zi extends jN{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new sc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(y0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=zi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",zi._jsonSchema={type:ot("string",zi._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class sc extends zi{data(e={}){return super.data(e)}}class Is{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Fo(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new sc(this._firestore,this._userDataWriter,r.key,r,new Fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new re(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const c=new sc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Fo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const c=new sc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Fo(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:W6(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new re(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Is._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$m.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function W6(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fe(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t){t=Yr(t,at);const e=Yr(t.firestore,Ja);return C6(p0(e),t._key).then(n=>q6(e,t,n))}Is._jsonSchemaVersion="firestore/querySnapshot/1.0",Is._jsonSchema={type:ot("string",Is._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class zN extends U6{constructor(e){super(),this.firestore=e}convertBytes(e){return new hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,n)}}function sh(t){t=Yr(t,Ki);const e=Yr(t.firestore,Ja),n=p0(e),r=new zN(e);return B6(t._query),j6(n,t._query).then(i=>new Is(e,r,t,i))}function Qn(t,e,n){t=Yr(t,at);const r=Yr(t.firestore,Ja),i=$6(t.converter,e,n);return AN(r,[D6(_N(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Wn.none())])}function u1(t){return AN(Yr(t.firestore,Ja),[new Xm(t._key,Wn.none())])}function AN(t,e){return function(r,i){const s=new ir;return r.asyncQueue.enqueueAndForget(async()=>m6(await T6(r),i,s)),s.promise}(p0(t),e)}function q6(t,e,n){const r=n.docs.get(e._key),i=new zN(t);return new zi(t,i,e._key,r,new Fo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Zs=i})(eA),Qr(new fr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Ja(new VP(r.getProvider("auth-internal")),new OP(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new re(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Aa(d.options.projectId,h)}(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Un(uv,dv,e),Un(uv,dv,"esm2020")})();const H6={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},PN=Ck(H6);SP(PN);const Ye=I6(PN),Ae={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},Yn=t=>JSON.parse(JSON.stringify(t)),Re={async saveRecipe(t,e){try{return await Qn(ut(Ye,Ae.RECIPES,t),Yn({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=o1(ih(Ye,Ae.RECIPES),a1("updatedAt","desc")),e=await sh(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await u1(ut(Ye,Ae.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Qn(ut(Ye,Ae.SETTINGS,"inventory_v2"),Yn({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await Er(ut(Ye,Ae.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await Er(ut(Ye,Ae.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Qn(ut(Ye,Ae.SETTINGS,"costs_data"),Yn({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await Er(ut(Ye,Ae.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Qn(ut(Ye,Ae.SETTINGS,"ficha_tecnica"),Yn({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await Er(ut(Ye,Ae.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Qn(ut(Ye,Ae.SETTINGS,"global_config"),Yn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await Er(ut(Ye,Ae.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Qn(ut(Ye,Ae.SETTINGS,Ae.RECIPES_V2),Yn({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await Er(ut(Ye,Ae.SETTINGS,Ae.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Qn(ut(Ye,Ae.RECIPES_V3,String(t)),Yn({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=o1(ih(Ye,Ae.RECIPES_V3),a1("updatedAt","desc"));t=await sh(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await sh(ih(Ye,Ae.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await u1(ut(Ye,Ae.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Qn(ut(Ye,Ae.SETTINGS,Ae.KANBAN),Yn({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await Er(ut(Ye,Ae.SETTINGS,Ae.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Qn(ut(Ye,Ae.SETTINGS,"recipe_categories"),Yn({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await Er(ut(Ye,Ae.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}}};function G6(){const[t,e]=I.useState([]),[n,r]=I.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,s]=I.useState(!1),[o,l]=I.useState(null),[c,d]=I.useState(null),[h,p]=I.useState(!1),[m,v]=I.useState(""),[N,C]=I.useState("Global Investment Matrix"),[P,b]=I.useState(!1),[y,w]=I.useState(.13),[D,V]=I.useState(!1),[O,k]=I.useState(null),x=I.useRef(null),_=I.useCallback((S,L="success")=>{x.current&&clearTimeout(x.current),k({message:S,type:L}),x.current=setTimeout(()=>k(null),3500)},[]),[E,z]=I.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),A=I.useRef(null);I.useEffect(()=>{try{const S=localStorage.getItem("padoca_costs_v1"),L=localStorage.getItem("padoca_costs_categories"),G=localStorage.getItem("padoca_costs_title"),ee=localStorage.getItem("padoca_global_tax");let M=S?JSON.parse(S):[],q=L?JSON.parse(L):null;G&&C(G),ee&&w(Number(ee)),q&&(q=q.map(H=>H==="Pessoal"?"Maquinrio":H),r(q)),M&&(M=M.map(H=>({...H,category:H.category==="Pessoal"?"Maquinrio":H.category})),e(M))}catch(S){console.error("Load failed",S)}},[]);const[j,xe]=I.useState(!1);I.useEffect(()=>{(async()=>{try{const L=await Re.getCosts();L&&(L.costs&&e(L.costs),L.categories&&r(L.categories));const G=await Re.getGlobalSettings();G&&G.taxRate!==void 0&&(w(G.taxRate),localStorage.setItem("padoca_global_tax",G.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{xe(!0)}})()},[]),I.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),j&&Re.syncCosts(t,n)},[t,n,j]),I.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),I.useEffect(()=>{localStorage.setItem("padoca_costs_title",N)},[N]),I.useEffect(()=>{localStorage.setItem("padoca_global_tax",y.toString()),j&&Re.syncGlobalSettings({taxRate:y}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:y}}))},[y,j]);const ce=S=>(Number(S)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),ie=I.useMemo(()=>{const S=t.reduce((G,ee)=>{const M=Number(ee.quantity)||1,q=(Number(ee.amount)||0)*M;return G.total+=q,ee.type==="Fixo"?G.fixed+=q:G.variable+=q,G},{total:0,fixed:0,variable:0}),L=S.total*y;return{...S,hst:L,grandTotal:S.total+L}},[t]),le=I.useMemo(()=>n.reduce((S,L)=>{const G=t.filter(ee=>ee.category===L);return G.length>0&&(S[L]=G),S},{}),[t,n]),Y=S=>{if(S.preventDefault(),!E.description||!E.amount)return;const L=n.includes(E.category)?E.category:n[0],G={...E,category:L,amount:Number(E.amount),quantity:Number(E.quantity)||1};e(o?ee=>ee.map(M=>M.id===o?{...G,id:o}:M):ee=>[...ee,{...G,id:Date.now().toString()}]),te()},se=S=>{d({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(L=>L.filter(G=>G.id!==S)),_("Despesa removida com sucesso."),d(null)},onCancel:()=>d(null)})},te=()=>{s(!1),l(null),z({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},ue=S=>{z({description:S.description||"",amount:S.amount||"",quantity:S.quantity||1,category:S.category||n[0],type:S.type||"Varivel",link:S.link||"",date:S.date||new Date().toISOString().split("T")[0]}),l(S.id),s(!0)},he=()=>{m&&(n.includes(m)||(r(S=>[...S,m]),_("Categoria adicionada.")),v(""))},Ee=S=>{d({title:"Remover Categoria",message:`A categoria "${S}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(L=>L.filter(G=>G!==S)),_("Categoria removida."),d(null)},onCancel:()=>d(null)})},R=()=>{try{const S=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],L=t.map(H=>{const J=Number(H.quantity)||1,ke=Number(H.amount)||0,Ie=J*ke;return[H.id,H.date||"-",`"${H.description.replace(/"/g,'""')}"`,J,ke.toFixed(2).replace(".",","),Ie.toFixed(2).replace(".",","),`"${H.category}"`,H.type,`"${H.link||""}"`]}),G="\uFEFF"+[S.join(";"),...L.map(H=>H.join(";"))].join(`
`),ee=new Blob([G],{type:"text/csv;charset=utf-8;"}),M=URL.createObjectURL(ee),q=document.createElement("a");q.href=M,q.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,q.click(),_("Relatrio Excel exportado!")}catch{_("Erro ao exportar CSV")}},B=()=>{try{const S=JSON.stringify({version:"1",costs:t,categories:n},null,2),L=new Blob([S],{type:"application/json"}),G=URL.createObjectURL(L),ee=document.createElement("a");ee.href=G,ee.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,ee.click(),_("Backup realizado com sucesso!")}catch{_("Erro ao realizar backup")}},U=S=>{var ee;const L=(ee=S.target.files)==null?void 0:ee[0];if(!L)return;const G=new FileReader;G.onload=M=>{try{const q=JSON.parse(String(M.target.result||"{}"));if(q.costs&&Array.isArray(q.costs))e(q.costs),q.categories&&r(q.categories),_("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{_("Arquivo de backup invlido")}},G.readAsText(L),S.target.value=""},W=()=>{d({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),_("Banco de dados limpo."),d(null)},onCancel:()=>d(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[P?a.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:N,onChange:S=>C(S.target.value),onBlur:()=>b(!1),onKeyDown:S=>S.key==="Enter"&&b(!1),autoFocus:!0}):a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>b(!0),children:N}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ce(ie.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ce(ie.total)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[D?a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:y*100,onChange:S=>w(Number(S.target.value)/100),onBlur:()=>V(!1),onKeyDown:S=>S.key==="Enter"&&V(!1),autoFocus:!0}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):a.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>V(!0),children:["Tax Impact (",(y*100).toFixed(0),"%)"]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ce(ie.hst)})]})]})]})}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ce(ie.fixed)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(ie.fixed/ie.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${ie.fixed/ie.total*100||0}%`}})})]})]}),a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),a.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ce(ie.variable)})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),a.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(ie.variable/ie.total*100||0).toFixed(0),"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${ie.variable/ie.total*100||0}%`}})})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),a.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),a.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[a.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[a.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),a.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),a.jsx("div",{className:"col-span-2"})]}),a.jsx("div",{className:"space-y-6",children:t.length===0?a.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),a.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(le).map(([S,L])=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:S}),a.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),a.jsx("div",{className:"space-y-3 md:space-y-1",children:L.map(G=>a.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[a.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[a.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${G.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),a.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[a.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:G.description}),a.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:G.date}),G.link&&a.jsx("a",{href:G.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),a.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:a.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[G.quantity," unit  ",G.type.slice(0,1)]})}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:ce((Number(G.amount)||0)*(Number(G.quantity)||1))}),a.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[ce(G.amount)," / item"]})]}),a.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[a.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ce((Number(G.amount)||0)*(Number(G.quantity)||1)*(1+y))}),a.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),a.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[a.jsxs("button",{onClick:()=>ue(G),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),a.jsxs("button",{onClick:()=>se(G.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),a.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},G.id))})]},S))})]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[a.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[a.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),a.jsx("button",{onClick:R,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:W,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[a.jsx("button",{onClick:B,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var S;return(S=A.current)==null?void 0:S.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:A,type:"file",accept:"application/json",className:"hidden",onChange:U})]})]})]}),a.jsx(je,{children:i&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-end md:items-center justify-center p-0 md:p-4",children:[a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:te}),a.jsxs(ne.div,{initial:{y:"100%",opacity:.5},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-t-[2.5rem] md:rounded-[2rem] shadow-[0_10px_40px_rgba(0,0,0,0.2)] border-t border-white/20 dark:border-white/5 flex flex-col overflow-hidden max-h-[85vh] md:max-h-[80vh]",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[a.jsx(K6,{}),a.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:a.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),a.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:o?"Editar Despesa":"Nova Despesa"}),a.jsx("button",{onClick:te,className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?a.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[a.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((S,L)=>a.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${L!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[a.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:S}),a.jsx("button",{onClick:()=>Ee(S),className:"w-11 h-11 flex items-center justify-center text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl touch-manipulation transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},S))}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:m,onChange:S=>v(S.target.value)}),a.jsx("button",{className:"h-12 w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold flex items-center justify-center touch-manipulation active:scale-95 transition-transform",onClick:he,children:"+"})]}),a.jsx("button",{onClick:()=>p(!1),className:"w-full py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all touch-manipulation hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl",children:"Pronto"})]}):a.jsxs("form",{onSubmit:Y,className:"space-y-6 px-4 animate-fade-in",children:[a.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:E.description,onChange:S=>z({...E,description:S.target.value}),placeholder:"Mixer, Aluguel..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:E.link,onChange:S=>z({...E,link:S.target.value}),placeholder:"Opcional..."})]}),a.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),a.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:E.quantity,onChange:S=>z({...E,quantity:S.target.value})})]}),a.jsxs("div",{className:"flex items-center px-4 py-3",children:[a.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),a.jsxs("div",{className:"flex items-center flex-1",children:[a.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),a.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:E.amount,onChange:S=>z({...E,amount:S.target.value})})]})]})]}),a.jsx("div",{className:"px-1",children:a.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(S=>a.jsx("button",{type:"button",onClick:()=>z({...E,type:S}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${E.type===S?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:S},S))})}),a.jsxs("div",{className:"space-y-3 px-1",children:[a.jsxs("div",{className:"flex justify-between items-center px-1",children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),a.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(S=>a.jsx("button",{type:"button",onClick:()=>z({...E,category:S}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${E.category===S?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:S},S))})]}),a.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[a.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),a.jsx("button",{type:"button",onClick:te,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),a.jsx(je,{children:O&&sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${O.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":O.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${O.type==="error"?"bg-white animate-pulse":O.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:O.message})]}),document.body)}),a.jsx(je,{children:c&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:c.onCancel}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${c.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:c.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:c.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:c.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:c.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${c.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}function K6(){return zn(!0),null}const Zn="padoca_inventory_v2",oh=["Ingredientes","Embalagens","Utenslios","Outros"],ah=["Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function Q6(){const[t,e]=I.useState(()=>{try{const M=localStorage.getItem(Zn);if(M)return JSON.parse(M);const q=localStorage.getItem("padoca_inventory");return q?JSON.parse(q).map(J=>({...J,packageQuantity:J.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=I.useState(()=>{try{const M=localStorage.getItem(Zn+"_categories");return M?JSON.parse(M):oh}catch{return oh}}),[i,s]=I.useState(!1),[o,l]=I.useState("synced");I.useEffect(()=>{(async()=>{try{const q=await Re.getInventory();q&&(Array.isArray(q.items)&&e(q.items),Array.isArray(q.categories)&&r(q.categories));const H=await Re.getGlobalSettings();H&&H.taxRate!==void 0&&d(H.taxRate)}catch(q){console.warn("Inventory cloud load failed",q)}finally{s(!0)}})()},[]);const[c,d]=I.useState(()=>{const M=localStorage.getItem("padoca_global_tax");return M?Number(M):.13});I.useEffect(()=>{const M=q=>{q.detail&&q.detail.taxRate!==void 0&&d(q.detail.taxRate)};return window.addEventListener("global-settings-updated",M),()=>window.removeEventListener("global-settings-updated",M)},[]);const[h,p]=I.useState(!1),[m,v]=I.useState(null),[N,C]=I.useState(""),[P,b]=I.useState(null),[y,w]=I.useState(null),[D,V]=I.useState(null),O=I.useRef(null),k=I.useCallback((M,q="success")=>{O.current&&clearTimeout(O.current),V({message:M,type:q}),O.current=setTimeout(()=>V(null),3500)},[]),[x,_]=I.useState(()=>{try{const M=localStorage.getItem(Zn+"_subcategories");return M?JSON.parse(M):ah}catch{return ah}}),[E,z]=I.useState(!1),[A,j]=I.useState(""),[xe,ce]=I.useState(""),[ie,le]=I.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]});I.useEffect(()=>{if(localStorage.setItem(Zn,JSON.stringify(t)),localStorage.setItem(Zn+"_categories",JSON.stringify(n)),localStorage.setItem(Zn+"_subcategories",JSON.stringify(x)),i){l("syncing");const M=setTimeout(async()=>{try{const q=await Re.syncInventory(t,n);l(q?"synced":"error")}catch{l("error")}},1500);return()=>clearTimeout(M)}window.dispatchEvent(new Event("inventory-updated"))},[t,n,x,i]);const Y=M=>(Number(M.packageQuantity)||0)*(Number(M.packageCount)||1),se=M=>(Number(M.packageCount)||1)*(Number(M.pricePerUnit)||0),te=I.useMemo(()=>{const M=t.reduce((J,ke)=>J+se(ke),0),q=t.length,H=t.reduce((J,ke)=>{const Ie=se(ke);return J[ke.category]=(J[ke.category]||0)+Ie,J},{});return{totalValue:M,itemCount:q,byCategory:H,taxImpact:M*c,grandTotal:M*(1+c)}},[t,c]),ue=M=>(Number(M)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),he=()=>{if(!ie.name.trim())return;const M={id:Date.now(),name:ie.name.trim(),packageQuantity:Number(ie.packageQuantity)||0,packageCount:Number(ie.packageCount)||1,unit:ie.unit,pricePerUnit:Number(ie.pricePerUnit)||0,category:ie.category,subcategory:ie.category==="Ingredientes"?ie.subcategory:null,purchaseDate:ie.purchaseDate,createdAt:new Date().toISOString()};e(q=>[...q,M]),le({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0]}),p(!1)},Ee=(M,q,H)=>{e(J=>J.map(ke=>ke.id!==M?ke:{...ke,[q]:["name","unit","category","subcategory","purchaseDate"].includes(q)?H:Number(H)||0}))},R=M=>{w({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(q=>q.filter(H=>H.id!==M)),v(null),w(null)},onCancel:()=>w(null)})},B=I.useMemo(()=>{let M=t;if(N.trim()){const q=N.toLowerCase().trim();M=M.filter(H=>H.name.toLowerCase().includes(q)||H.subcategory&&H.subcategory.toLowerCase().includes(q))}return P&&(M=M.filter(q=>q.subcategory===P)),M},[t,N,P]),U=I.useMemo(()=>n.reduce((M,q)=>{const H=B.filter(J=>J.category===q);return H.length>0&&(M[q]=H),M},{}),[B,n]),W=xn.useRef(null),S=()=>{try{const M=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],q=t.map(Be=>{const Ue=(Number(Be.packageQuantity)||0)*(Number(Be.packageCount)||1),lt=(Number(Be.packageCount)||1)*(Number(Be.pricePerUnit)||0);return[Be.id,`"${Be.name.replace(/"/g,'""')}"`,`"${Be.category}"`,Be.packageQuantity,Be.unit,Be.packageCount,Ue,Number(Be.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),lt.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),H="\uFEFF"+[M.join(";"),...q.map(Be=>Be.join(";"))].join(`
`),J=new Blob([H],{type:"text/csv;charset=utf-8;"}),ke=URL.createObjectURL(J),Ie=document.createElement("a");Ie.href=ke,Ie.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,Ie.click(),k("Relatrio de Estoque exportado!","success")}catch(M){console.error(M),k("Erro ao exportar CSV","error")}},L=()=>{try{const M=JSON.stringify({version:"2",items:t,categories:n},null,2),q=new Blob([M],{type:"application/json"}),H=URL.createObjectURL(q),J=document.createElement("a");J.href=H,J.download=`padoca_estoque_backup_${new Date().toISOString().split("T")[0]}.json`,J.click(),k("Backup de Estoque realizado!","success")}catch{k("Erro ao realizar backup","error")}},G=M=>{var J;const q=(J=M.target.files)==null?void 0:J[0];if(!q)return;const H=new FileReader;H.onload=ke=>{try{const Ie=JSON.parse(String(ke.target.result||"{}"));if(Ie.items&&Array.isArray(Ie.items))e(Ie.items),Ie.categories&&r(Ie.categories),k("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{k("Arquivo de backup invlido","error")}},H.readAsText(q),M.target.value=""},ee=()=>{w({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(Zn,"[]"),w(null)},onCancel:()=>w(null)})};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${o==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":o==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${o==="syncing"?"bg-amber-500":o==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:o==="syncing"?"Cloud Syncing":o==="error"?"Sync Error":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),a.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),a.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[a.jsx("div",{className:"md:col-span-2 relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ue(te.grandTotal)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ue(te.totalValue)})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(c*100).toFixed(0),"%)"]}),a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:ue(te.taxImpact)})]})]})]})}),a.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((M,q)=>{const H={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},J=H[M]||H.Outros,ke=te.byCategory[M]||0,Ie=ke*(1+c),Be=(ke/te.totalValue*100||0).toFixed(0);return a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${J.pulse} ${J.shadow}`}),a.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:M})]}),a.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ue(Ie)}),a.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",ue(ke)," + ",(c*100).toFixed(0),"% tax)"]})]}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[a.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),a.jsxs("span",{className:`text-[8px] font-bold ${J.text}`,children:[Be,"%"]})]}),a.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full ${J.bg} transition-all duration-1000`,style:{width:`${Be}%`}})})]})]},M)})})]}),h&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[a.jsx(lh,{}),a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>p(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 rounded-t-[2rem] md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0 rounded-2xl",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Item"}),a.jsx("button",{onClick:()=>p(!1),className:"p-2 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-12 gap-5",children:[a.jsxs("div",{className:"sm:col-span-2 lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Item"}),a.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"Ex: Farinha de Trigo",value:ie.name,onChange:M=>le(q=>({...q,name:M.target.value})),autoFocus:!0})]}),a.jsxs("div",{className:"lg:col-span-12 grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Qtd/Pacote"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"25",value:ie.packageQuantity,onChange:M=>le(q=>({...q,packageQuantity:M.target.value}))}),a.jsxs("select",{className:"w-24 px-2 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all text-center appearance-none",value:ie.unit,onChange:M=>le(q=>({...q,unit:M.target.value})),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"N Pacotes"}),a.jsx("input",{type:"number",min:"1",inputMode:"numeric",pattern:"[0-9]*",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"1",value:ie.packageCount,onChange:M=>le(q=>({...q,packageCount:M.target.value}))})]})]}),a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Pacote"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500 font-medium",children:"$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right font-bold text-lg focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0.00",value:ie.pricePerUnit,onChange:M=>le(q=>({...q,pricePerUnit:M.target.value}))})]})]}),a.jsxs("div",{className:ie.category==="Ingredientes"?"lg:col-span-6":"lg:col-span-12",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Categoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:ie.category,onChange:M=>le(q=>({...q,category:M.target.value,subcategory:M.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(M=>a.jsx("option",{value:M,children:M},M))})]}),ie.category==="Ingredientes"&&a.jsxs("div",{className:"lg:col-span-6",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none",value:ie.subcategory,onChange:M=>le(q=>({...q,subcategory:M.target.value})),children:x.map(M=>a.jsx("option",{value:M,children:M},M))})]})]}),ie.packageQuantity&&ie.packageCount&&a.jsx("div",{className:"mt-6 p-5 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 shadow-inner",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Resumo"}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-300",children:[Number(ie.packageQuantity)*Number(ie.packageCount)," ",ie.unit," Total"]}),ie.pricePerUnit&&a.jsx("div",{className:"text-2xl font-bold text-zinc-900 dark:text-white mt-1 tracking-tight tabular-nums",children:ue(Number(ie.packageCount)*Number(ie.pricePerUnit))})]})]})}),a.jsxs("div",{className:"flex gap-3 mt-8 safe-area-bottom",children:[a.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:he,disabled:!ie.name.trim(),className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/10 hover:shadow-xl hover:shadow-zinc-900/20 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar ao Estoque"})]})]})]}),a.jsx("section",{className:"relative z-10 mb-6",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:N,onChange:M=>C(M.target.value)}),N&&a.jsx("button",{onClick:()=>C(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[a.jsx("button",{onClick:()=>b(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),x.map(M=>a.jsx("button",{onClick:()=>b(P===M?null:M),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===M?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:M},M))]}),(N||P)&&a.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[a.jsxs("span",{className:"text-xs text-zinc-500",children:[B.length," ",B.length===1?"resultado":"resultados"]}),a.jsx("button",{onClick:()=>{C(""),b(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(U).length>0?a.jsx("div",{className:"space-y-8",children:Object.entries(U).map(([M,q])=>a.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:M}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:ue((te.byCategory[M]||0)*(1+c))}),a.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[q.length," ",q.length===1?"item":"itens"]})})]})]}),a.jsxs("div",{className:"hidden md:block",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[a.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:q.map(H=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:m===H.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:H.name,onChange:J=>Ee(H.id,"name",J.target.value)})}),a.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[a.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.packageQuantity,onChange:J=>Ee(H.id,"packageQuantity",J.target.value)}),a.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:H.unit,onChange:J=>Ee(H.id,"unit",J.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]})]}),a.jsx("div",{className:"col-span-1",children:a.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:H.packageCount,onChange:J=>Ee(H.id,"packageCount",J.target.value)})}),H.category==="Ingredientes"&&a.jsx("div",{className:"col-span-2",children:a.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:H.subcategory||"",onChange:J=>Ee(H.id,"subcategory",J.target.value),children:x.map(J=>a.jsx("option",{value:J,children:J},J))})}),H.category!=="Ingredientes"&&a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[Y(H)," ",H.unit]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.pricePerUnit,onChange:J=>Ee(H.id,"pricePerUnit",J.target.value)})}),a.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[a.jsx("button",{onClick:()=>v(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),a.jsx("button",{onClick:()=>R(H.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-3",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:H.name})}),a.jsx("div",{className:"col-span-2 text-center",children:a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[H.packageQuantity," ",H.unit]})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[H.packageCount,""]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[Y(H)," ",H.unit]})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:ue(H.pricePerUnit)})}),a.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:ue(se(H)*(1+c))}),a.jsx("button",{onClick:()=>v(H.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},H.id))})]}),a.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:q.map(H=>a.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${m===H.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:m===H.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>v(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>R(H.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:H.name,onChange:J=>Ee(H.id,"name",J.target.value)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),a.jsx("div",{className:"flex gap-2",children:a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageQuantity,onChange:J=>Ee(H.id,"packageQuantity",J.target.value)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.unit,onChange:J=>Ee(H.id,"unit",J.target.value),children:[a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"un",children:"un"}),a.jsx("option",{value:"cx",children:"cx"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),a.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageCount,onChange:J=>Ee(H.id,"packageCount",J.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),a.jsxs("div",{className:"relative group",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.pricePerUnit,onChange:J=>Ee(H.id,"pricePerUnit",J.target.value)})]})]})]}),H.category==="Ingredientes"&&a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),a.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:H.subcategory||"",onChange:J=>Ee(H.id,"subcategory",J.target.value),children:x.map(J=>a.jsx("option",{value:J,children:J},J))})]})]}):a.jsxs("div",{onClick:()=>v(H.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:H.name}),a.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[Y(H)," ",H.unit," em estoque"]})]}),a.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[H.packageCount," pcts"]})]}),a.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),a.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:ue(H.pricePerUnit)})]}),a.jsxs("div",{className:"flex flex-col items-end",children:[a.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:ue(se(H)*(1+c))})})]})]})]})},H.id))}),a.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",M]}),a.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:ue((te.byCategory[M]||0)*(1+c))})]})]},M))}):a.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),a.jsx("button",{onClick:()=>p(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),a.jsx("section",{className:"relative z-10 mt-8",children:a.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),a.jsx("button",{onClick:ee,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4",children:[a.jsx("button",{onClick:S,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export CSV"}),a.jsx("button",{onClick:L,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),a.jsx("button",{onClick:()=>{var M;return(M=W.current)==null?void 0:M.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),a.jsx("input",{ref:W,type:"file",accept:"application/json",className:"hidden",onChange:G})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[a.jsx("h3",{className:"text-[10px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest mb-4",children:"Category Management"}),a.jsxs("button",{onClick:()=>z(!0),className:"w-full py-4 md:py-3 bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20 text-indigo-600 dark:text-indigo-400 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-indigo-100 dark:hover:bg-indigo-500/20 transition-all flex items-center justify-center gap-2",children:[a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Gerenciar Categorias e Subcategorias"]})]})]})}),E&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[a.jsx(lh,{}),a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>z(!1)}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:a.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),a.jsx("button",{onClick:()=>z(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),a.jsx("div",{className:"space-y-2",children:n.map((M,q)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:M}),a.jsx("button",{onClick:()=>{w({title:"Excluir Categoria",message:`Excluir categoria "${M}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(H=>H.filter(J=>J!==M)),e(H=>H.map(J=>J.category===M?{...J,category:"Outros"}:J)),w(null),k("Categoria removida","success")},onCancel:()=>w(null)})},className:"w-11 h-11 flex items-center justify-center rounded-xl text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all touch-manipulation",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),a.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[a.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:A,onChange:M=>j(M.target.value),onKeyDown:M=>{M.key==="Enter"&&A.trim()&&(n.includes(A.trim())||(r(q=>[...q,A.trim()]),j("")))}}),a.jsx("button",{onClick:()=>{A.trim()&&!n.includes(A.trim())&&(r(M=>[...M,A.trim()]),j(""))},disabled:!A.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("button",{onClick:()=>{w({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(oh),w(null),k("Categorias restauradas","success")},onCancel:()=>w(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),a.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),a.jsx("div",{className:"space-y-2",children:x.map((M,q)=>a.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[a.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:M}),a.jsx("button",{onClick:()=>{w({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${M}"?`,type:"danger",onConfirm:()=>{_(H=>H.filter(J=>J!==M)),w(null),k("Subcategoria removida","success")},onCancel:()=>w(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},q))})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[a.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:xe,onChange:M=>ce(M.target.value),onKeyDown:M=>{M.key==="Enter"&&xe.trim()&&(x.includes(xe.trim())||(_(q=>[...q,xe.trim()]),ce("")))}}),a.jsx("button",{onClick:()=>{xe.trim()&&!x.includes(xe.trim())&&(_(M=>[...M,xe.trim()]),ce(""))},disabled:!xe.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),a.jsx("div",{className:"pt-4",children:a.jsx("button",{onClick:()=>{w({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{_(ah),w(null),k("Subcategorias restauradas","success")},onCancel:()=>w(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),a.jsx(je,{children:y&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(lh,{}),a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:y.onCancel}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${y.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:y.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:y.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:y.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:y.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${y.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(je,{children:D&&sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${D.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":D.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${D.type==="error"?"bg-white animate-pulse":D.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:D.message})]}),document.body)})]})}function Y6(){const[t,e]=I.useState([]),n=()=>{try{const r=localStorage.getItem(Zn);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return I.useEffect(()=>{n();const r=s=>{s.key===Zn&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}function lh(){return zn(!0),null}const d1="fichaTecnica_pizzas",oc={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},ch=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,s=n*r;if(i<=0)return 0;const o=s/i,l=oc[t.unit]||1;return o/l};function uh(){return zn(!0),null}function X6({newPizzaName:t,setNewPizzaName:e,setIsCreatingPizza:n,handleCreatePizza:r}){return zn(!0),sn.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center",children:[a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:()=>{n(!1),e("")}}),a.jsxs(ne.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30,mass:.8},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-2xl overflow-hidden mt-16 md:mt-20 mx-4 md:mx-0 rounded-2xl",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[a.jsxs("div",{className:"flex items-center justify-between px-5 pt-4 pb-2",children:[a.jsx("div",{className:"w-12"}),a.jsx("h3",{className:"text-[17px] font-semibold text-zinc-900 dark:text-white",children:"Nova Pizza"}),a.jsx("button",{onClick:()=>{n(!1),e("")},className:"w-12 h-12 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-4"}),a.jsxs("div",{className:"px-6 py-6",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-14 h-14 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center shrink-0",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-zinc-400 dark:text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("div",{children:a.jsx("p",{className:"text-[15px] text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})})]}),a.jsx("div",{className:"mb-6",children:a.jsx("input",{type:"text",className:"w-full h-14 px-5 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[17px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Ex: Margherita",value:t,onChange:i=>e(i.target.value),autoFocus:!0,onKeyDown:i=>i.key==="Enter"&&r()})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{n(!1),e("")},className:"flex-1 h-14 rounded-2xl font-semibold text-[17px] text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),a.jsx("button",{onClick:r,disabled:!t.trim(),className:"flex-[1.5] h-14 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-[17px] hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-lg shadow-zinc-900/20 dark:shadow-white/10 touch-manipulation",children:"Criar"})]})]}),a.jsx("div",{style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"}})]})]}),document.body)}const h1={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function J6(){const[t,e]=I.useState(()=>{try{const R=localStorage.getItem(d1);return R?JSON.parse(R):[h1]}catch{return[h1]}}),[n,r]=I.useState(!1);I.useEffect(()=>{(async()=>{try{const B=await Re.getPizzas();B&&B.length>0&&e(B.map(U=>({...U,ingredients:Array.isArray(U.ingredients)?U.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,s]=I.useState(null),[o,l]=I.useState(null),[c,d]=I.useState(!1),[h,p]=I.useState(!1),[m,v]=I.useState(""),[N,C]=I.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[P,b]=I.useState(null),[y,w]=I.useState(null),[D,V]=I.useState(null),[O,k]=I.useState(null),x=I.useRef(null);I.useCallback((R,B="success")=>{x.current&&clearTimeout(x.current),k({message:R,type:B}),x.current=setTimeout(()=>k(null),3500)},[]);const _=Y6();I.useEffect(()=>{localStorage.setItem(d1,JSON.stringify(t)),n&&Re.syncPizzas(t)},[t,n]);const E=I.useMemo(()=>t.find(R=>R.id===i)||null,[t,i]),z=(R=[])=>{if(!Array.isArray(R))return{totalCost:0,costPerPizza:0};const B=R.reduce((U,W)=>U+he(W),0);return{totalCost:B,costPerPizza:B}},A=R=>(Number(R)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),j=R=>{const B=Number(R)||0;return B<.01&&B>0?B.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):B.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},xe=()=>{if(!m.trim())return;const R={id:Date.now(),name:m.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(B=>[...B,R]),v(""),p(!1),s(R.id)},ce=R=>{const B=t.find(U=>U.id===R);w({title:"Excluir Pizza",message:`A pizza "${(B==null?void 0:B.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e(U=>U.filter(W=>W.id!==R)),i===R&&s(null),w(null)},onCancel:()=>w(null)})},ie=R=>{const B=t.find(U=>U.id===R);B&&V({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:B.name,onConfirm:U=>{U&&U!==B.name&&e(W=>W.map(S=>S.id===R?{...S,name:U.trim()}:S)),V(null)},onCancel:()=>V(null)})},le=R=>{if(C(B=>({...B,name:R})),b(null),!!Array.isArray(_)&&R&&R.trim().length>0){const B=R.toLowerCase().trim(),U=_.find(W=>!W||!W.name?!1:W.name.toLowerCase()===B);if(U){b(U);const W=ch(U),S=oc[N.unit]||1,L=W*S;C(G=>({...G,pricePerUnit:L.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:U.id}))}}},Y=R=>{C(B=>{const U={...B,unit:R};if(P){const W=ch(P),S=oc[R]||1,L=W*S;U.pricePerUnit=L.toFixed(6),U.isSyncedFromInventory=!0}return U})},se=(R=!1)=>{if(!E||!N.name.trim()||!N.quantity)return;const B={id:Date.now(),name:N.name.trim(),quantity:Number(N.quantity)||0,unit:N.unit,pricePerUnit:Number(N.pricePerUnit)||0,inventoryItemId:N.inventoryItemId};e(U=>U.map(W=>W.id===i?{...W,ingredients:[...W.ingredients||[],B]}:W)),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null),R?setTimeout(()=>{var U;(U=document.getElementById("cat-ing-name-input"))==null||U.focus()},50):d(!1)},te=(R,B,U)=>{E&&e(W=>W.map(S=>S.id!==i?S:{...S,ingredients:(S.ingredients||[]).map(L=>L.id!==R?L:{...L,[B]:B==="name"||B==="unit"?U:Number(U)||0})}))},ue=R=>{E&&(e(B=>B.map(U=>U.id!==i?U:{...U,ingredients:(U.ingredients||[]).filter(W=>W.id!==R)})),l(null))},he=R=>(Number(R.quantity)||0)*(Number(R.pricePerUnit)||0),Ee=E?z(E.ingredients):{totalCost:0,costPerPizza:0};return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),a.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[a.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),a.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),a.jsx(je,{children:h&&a.jsx(X6,{newPizzaName:m,setNewPizzaName:v,setIsCreatingPizza:p,handleCreatePizza:xe})}),!i&&a.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(R=>{const B=z(R.ingredients);return a.jsxs("div",{onClick:()=>s(R.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex items-start justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:R.name}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[R.ingredients.length," ingrediente",R.ingredients.length!==1?"s":""]})]}),a.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("button",{onClick:U=>{U.stopPropagation(),ie(R.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),a.jsx("button",{onClick:U=>{U.stopPropagation(),ce(R.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),a.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:A(B.totalCost)})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),a.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:a.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[R.ingredients.length," itens"]})})]})]})]},R.id)}),t.length===0&&a.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),a.jsx("button",{onClick:()=>p(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),E&&a.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:()=>s(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:E.name}),a.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[E.ingredients.length," ingrediente",E.ingredients.length!==1?"s":""," cadastrado",E.ingredients.length!==1?"s":""]})]})]}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:A(Ee.totalCost)})]})]}),a.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:E.ingredients.length}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:A(Ee.costPerPizza)}),a.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!c&&a.jsxs("button",{onClick:()=>d(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),c&&a.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[a.jsx(uh,{}),a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)}}),a.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[a.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:a.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),a.jsx("button",{onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),a.jsxs("div",{className:"relative mb-5",children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),a.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:R=>{var B;R.key==="Enter"&&(R.preventDefault(),(B=document.getElementById("cat-ing-qty-input"))==null||B.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${P?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:N.name,onChange:R=>{const B=R.target.value;C(U=>({...U,name:B})),P&&B!==P.name&&(b(null),C(U=>({...U,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),le(B)},autoFocus:!0}),P&&a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),N.name.length>0&&!P&&a.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const R=_.filter(B=>B.name.toLowerCase().includes(N.name.toLowerCase())).slice(0,6);return R.length===0&&N.name.length>1?a.jsxs("div",{className:"p-5 text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),a.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',N.name,'" ao Estoque primeiro']})]}):R.map((B,U)=>a.jsxs("button",{onClick:()=>{b(B);const W=ch(B),S=oc[N.unit]||1,L=W*S;C(G=>({...G,name:B.name,pricePerUnit:L.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:B.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${U!==R.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:B.name}),a.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[B.packageQuantity*B.packageCount," ",B.unit]})]}),a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},B.id))})()})]}),P&&a.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:P.name}),a.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",P.packageQuantity*P.packageCount," ",P.unit,"  ",A(P.packageCount*P.pricePerUnit)]})]})]})}),!P&&a.jsx("div",{className:"space-y-4 mb-5",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Preo por Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 text-sm font-bold",children:"R$"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full pl-10 pr-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all placeholder:text-zinc-300",placeholder:"0,00",value:N.pricePerUnit,onChange:R=>C(B=>({...B,pricePerUnit:R.target.value}))})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:N.unit,onChange:R=>Y(R.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),a.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:R=>{R.key==="Enter"&&(R.preventDefault(),se(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:N.quantity,onChange:R=>C(B=>({...B,quantity:R.target.value}))})]}),P&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),a.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:N.unit})]})]}),P&&N.quantity&&a.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[N.quantity," ",N.unit,"  ",j(N.pricePerUnit),"/",N.unit]}),a.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:A(Number(N.quantity)*Number(N.pricePerUnit))})]})]}),a.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[a.jsx("button",{onClick:()=>{d(!1),C({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),b(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),a.jsx("button",{onClick:se,disabled:!N.name||!N.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),E.ingredients.length>0&&a.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[a.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),a.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),a.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),a.jsx("div",{className:"col-span-1"})]}),a.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:E.ingredients.map(R=>a.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:o===R.id?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("input",{id:`edit-ing-name-${R.id}`,autoFocus:!0,onKeyDown:B=>{var U;B.key==="Enter"&&(B.preventDefault(),(U=document.getElementById(`edit-ing-qty-${R.id}`))==null||U.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:R.name,onChange:B=>te(R.id,"name",B.target.value),onBlur:()=>{!R.name.trim()&&(!R.quantity||R.quantity===0)&&ue(R.id)}})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-qty-${R.id}`,onKeyDown:B=>{var U;B.key==="Enter"&&(B.preventDefault(),(U=document.getElementById(`edit-ing-price-${R.id}`))==null||U.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:R.quantity,onChange:B=>te(R.id,"quantity",B.target.value),onBlur:()=>{!R.name.trim()&&(!R.quantity||R.quantity===0)&&ue(R.id)}})}),a.jsx("div",{className:"col-span-1",children:a.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:R.unit,onChange:B=>te(R.id,"unit",B.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]})}),a.jsx("div",{className:"col-span-2",children:a.jsx("input",{id:`edit-ing-price-${R.id}`,onKeyDown:B=>{B.key==="Enter"&&(B.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:R.pricePerUnit,onChange:B=>te(R.id,"pricePerUnit",B.target.value)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:A(he(R))})}),a.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>ue(R.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"col-span-4",children:a.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:R.name})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:R.quantity})}),a.jsx("div",{className:"col-span-1 text-center",children:a.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:R.unit})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(R.pricePerUnit)||0)})}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:A(he(R))})}),a.jsx("div",{className:"col-span-1 flex justify-end",children:a.jsx("button",{onClick:()=>l(R.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},R.id))}),a.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[a.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),a.jsx("div",{className:"col-span-2 text-right",children:a.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:A(Ee.totalCost)})}),a.jsx("div",{className:"col-span-1"})]})]}),E.ingredients.length>0&&a.jsxs("div",{className:"md:hidden space-y-4",children:[E.ingredients.map(R=>a.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${o===R.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:o===R.id?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)] animate-pulse"}),a.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),a.jsx("button",{onClick:()=>ue(R.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),a.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:R.name,onChange:B=>te(R.id,"name",B.target.value),onBlur:()=>{!R.name.trim()&&(!R.quantity||R.quantity===0)&&ue(R.id)}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),a.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:R.quantity,onChange:B=>te(R.id,"quantity",B.target.value),onBlur:()=>{!R.name.trim()&&(!R.quantity||R.quantity===0)&&ue(R.id)}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:R.unit,onChange:B=>te(R.id,"unit",B.target.value),children:[a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"ml",children:"ml"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"un",children:"un"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),a.jsx("div",{className:"relative group",children:a.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:R.pricePerUnit,onChange:B=>te(R.id,"pricePerUnit",B.target.value)})})]})]}):a.jsxs("div",{onClick:()=>l(R.id),className:"group cursor-pointer",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:R.name}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[R.quantity," ",R.unit]}),a.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(R.pricePerUnit)||0),"/",R.unit]})]})]}),a.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("button",{onClick:B=>{B.stopPropagation(),l(R.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),a.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),a.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:A(he(R))})]})]})},R.id)),a.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),a.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:A(Ee.totalCost)})]})})]}),E.ingredients.length===0&&!c&&a.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[a.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),a.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),a.jsx(je,{children:y&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(uh,{}),a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:y.onCancel}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${y.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:y.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:y.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:y.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:y.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:y.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${y.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(je,{children:D&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(uh,{}),a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:D.onCancel}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:D.title}),a.jsx("input",{autoFocus:!0,defaultValue:D.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:D.placeholder,onKeyDown:R=>{R.key==="Enter"&&D.onConfirm(R.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:D.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:R=>{const B=R.target.closest(".relative").querySelector("input");D.onConfirm(B.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),a.jsx(je,{children:O&&sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${O.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":O.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${O.type==="error"?"bg-white animate-pulse":O.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:O.message})]}),document.body)})]})}function Xn({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:s="0",pattern:o,inputMode:l}){const c=Number(e)||0,d=r==="g"&&Math.abs(c)>=1e3,h=d?"kg":r,p=()=>d?Math.round(c/1e3).toString():Math.round(c).toString(),[m,v]=I.useState(""),[N,C]=I.useState(!1);I.useEffect(()=>{N||v(e==null?"":p())},[e,N,d]);const P=w=>{const D=w.target.value;v(D);const V=parseFloat(D)||0;n==null||n(V)},b=()=>C(!0),y=()=>{C(!1),e!=null&&v(p())};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:o,value:m,onChange:P,onFocus:b,onBlur:y,placeholder:s}),h&&a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function zs({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:s,step:o=.1,decimals:l=1,maxPct:c=null}){const d=Math.max(i||0,1),h=k=>d*(Number(k)||0)/100,p=k=>(Number(k)||0)/d*100,m=h(e),v=r==="grams"&&Math.abs(m)>=1e3,N=r==="grams"?v?"kg":"g":"%",C=()=>{const k=Number(e)||0;if(r==="grams"){const x=h(k);return v?x/1e3:x<10?x:Math.round(x)}return k},[P,b]=I.useState(()=>{if(e===""||e===null||e===void 0)return"";const k=C();return v?k.toFixed(2):k.toString()}),[y,w]=I.useState(!1);I.useEffect(()=>{if(!y)if(e===""||e===null||e===void 0)b("");else{const k=C();if(r==="grams"){const x=h(Number(e)||0);b(v?k.toFixed(2):x<10?x.toFixed(2):Math.round(x).toString())}else b(Number(k).toFixed(l))}},[e,r,i,y,v]);const D=k=>{const x=k.target.value;if(b(x),x===""){n==null||n("");return}let _=parseFloat(x);if(!Number.isNaN(_)){_=Math.max(0,_),r==="pct"&&c!==null&&_>c&&(_=c,b(_.toString()));let E=_;r==="grams"&&v&&(E=_*1e3);const z=r==="grams"?p(E):_;n==null||n(z)}},V=()=>{w(!0)},O=()=>{if(w(!1),P===""||P===null){b("");return}const k=parseFloat(P);if(!Number.isNaN(k))if(r==="grams"){const x=h(Number(e)||0);b(v||x<10?k.toFixed(2):Math.round(k).toString())}else b(k.toFixed(l))};return a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:s,step:r==="grams"?1:o,value:P,onChange:D,onFocus:V,onBlur:O,placeholder:"0"}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:N})]})]})}function Z6({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","ADY","IDY","CY"];function l(c,d,h){r==null||r({...n,[c]:{...n[c],[d]:h}})}return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipos de Fermentos"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>a.jsxs("label",{className:"button "+(t===c?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:c,checked:t===c,onChange:()=>e==null?void 0:e(c)}),c]},c))}),t==="ADY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(zs,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:c=>l("ADY","yeastPct",c),mode:i,flourWeight:s,name:"ADY-yeast",decimals:3})}),t==="IDY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(zs,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:c=>l("IDY","yeastPct",c),mode:i,flourWeight:s,name:"IDY-yeast",decimals:3})}),t==="CY"&&a.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:a.jsx(zs,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:c=>l("CY","yeastPct",c),mode:i,flourWeight:s,name:"CY-yeast",decimals:3})}),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function eD({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:s=1e3}){const o=["None","Poolish","Biga","Levain"];function l(m,v,N){r==null||r({...n,[m]:{...n[m],[v]:Number.isNaN(N)?"":N}})}const c=i==="grams"?"g":"%",d=m=>s*(Number(m==null?void 0:m.pct)||0)/100,h=(m,v=0,N="")=>{let C=Number(m);if(!Number.isFinite(C))return"";let P=N,b=v;N==="g"&&Math.abs(C)>=1e3&&(C=C/1e3,P="kg",b=2);const y=C.toLocaleString("pt-BR",{minimumFractionDigits:b,maximumFractionDigits:b});return P?`${y} ${P}`:y},p=m=>{const v=n[m];if(!v)return null;const N=d(v),C=N*(Number(v.hydration)||0)/100;return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[a.jsx(zs,{label:`Farinha Pref. (${c})`,value:v.pct,onChange:P=>l(m,"pct",P),mode:i,flourWeight:s,name:`${m}-pct`}),a.jsx(zs,{label:`gua (${c})`,value:v.hydration,onChange:P=>l(m,"hydration",Math.min(200,Math.max(0,P))),mode:i,flourWeight:N>0?N:s,name:`${m}-hydration`}),typeof v.yeastPct<"u"&&a.jsx(zs,{label:`Fermento (${c})`,value:v.yeastPct,onChange:P=>l(m,"yeastPct",P),mode:i,flourWeight:N>0?N:s,name:`${m}-yeast`,decimals:2}),typeof v.inoculationPct<"u"&&a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:v.inoculationPct,onChange:P=>l(m,"inoculationPct",parseFloat(P.target.value)),step:1}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Tempo"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:v.time_h,onChange:P=>l(m,"time_h",parseFloat(P.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),a.jsxs("label",{className:"block",children:[a.jsx("div",{className:"label mb-1",children:"Temp."}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:v.temp_C,onChange:P=>l(m,"temp_C",parseFloat(P.target.value))}),a.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&a.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[a.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(N,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(C,0,"g")})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),a.jsx("span",{className:"ml-2 font-semibold",children:h(N+C,0,"g")})]})]})]})]})};return a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"label",children:"Tipo de Fermentao"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(m=>a.jsxs("label",{className:"button "+(t===m?"primary":""),children:[a.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:m,checked:t===m,onChange:()=>e==null?void 0:e(m)}),m]},m))}),t==="Poolish"&&p("poolish"),t==="Biga"&&p("biga"),t==="Levain"&&p("levain"),t==="None"&&a.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function tD(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function Io(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function nD({inputMode:t,setInputMode:e}){const[n,r]=I.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,s]=I.useState({}),o=I.useRef(null),[l,c]=I.useState("synced"),[d,h]=I.useState(null),[p,m]=I.useState(null),[v,N]=I.useState(null),C=I.useRef(null),P=I.useCallback((S,L="success")=>{C.current&&clearTimeout(C.current),N({message:S,type:L}),C.current=setTimeout(()=>N(null),3500)},[]),[b,y]=I.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});I.useEffect(()=>{(async()=>{const L=tD();s(L);try{const G=await Re.getAllRecipes();if(Object.keys(G).length>0){const ee={...L,...G};s(ee),Io(ee)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function w(S,L){r(G=>({...G,[S]:typeof L=="number"&&Number.isNaN(L)?"":L}))}function D(S){r(L=>({...L,preferment:S}))}function V(S){r(L=>({...L,yeastType:S}))}function O(S,L){t==="grams"?y(G=>({...G,[S]:Number(L)||0})):w(S,L)}function k(S){y(L=>({...L,flour:Number(S)||0}))}const x=I.useMemo(()=>{var ee;const S=M=>Number(M)||0,L=((ee=n.yeastType)==null?void 0:ee[n.yeastSelection])||{},G=S(L.yeastPct);return 100+S(n.water)+S(n.sugar)+S(n.salt)+S(n.oliveOil)+S(n.oil)+S(n.milk)+S(n.butter)+S(n.diastatic)+G},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),_=I.useMemo(()=>{const S=Number(n.doughBalls)||0,L=Number(n.ballWeight)||0;return S*L},[n.doughBalls,n.ballWeight]),E=I.useMemo(()=>{const S=Number(_)||0,L=Number(x)||100;return L<=0?0:S*100/L},[_,x]),z=I.useMemo(()=>{var M;const S=E,L=q=>S*(Number(q)||0)/100,G=((M=n.yeastType)==null?void 0:M[n.yeastSelection])||{},ee=Number(G.yeastPct)||0;return{flour:S,water:L(n.water),sugar:L(n.sugar),salt:L(n.salt),oliveOil:L(n.oliveOil),oil:L(n.oil),milk:L(n.milk),butter:L(n.butter),diastatic:L(n.diastatic),yeast:S*ee/100,total:S+L(n.water)+L(n.sugar)+L(n.salt)+L(n.oliveOil)+L(n.oil)+L(n.milk)+L(n.butter)+L(n.diastatic)+S*ee/100}},[E,n]),A=I.useMemo(()=>{if(t==="grams"){const S=(Number(b.flour)||0)+(Number(b.water)||0)+(Number(b.sugar)||0)+(Number(b.salt)||0)+(Number(b.oliveOil)||0)+(Number(b.oil)||0)+(Number(b.milk)||0)+(Number(b.butter)||0)+(Number(b.diastatic)||0)+(Number(b.yeast)||0);return{flour:b.flour,water:b.water,sugar:b.sugar,salt:b.salt,oliveOil:b.oliveOil,oil:b.oil,milk:b.milk,butter:b.butter,diastatic:b.diastatic,yeast:b.yeast,total:S}}return z},[t,b,z]),j=I.useMemo(()=>{const S=Number(A.flour)||0;if(S<=0)return 0;const L=Number(A.water)||0,G=Number(A.milk)||0;return(L+G)/S*100},[A.flour,A.water,A.milk]),xe=String(n.prefermentType||"").toLowerCase(),ce=n.preferment&&n.preferment[xe]?n.preferment[xe]:null,ie=ce?E*(Number(ce.pct)||0)/100:0,le=ie*(Number(ce==null?void 0:ce.hydration)||0)/100,Y=ie+le;function se(){m({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:S=>{if(!S)return;const L={...i,[S]:n};s(L),Io(L),Re.saveRecipe(S,n).then(G=>{G&&c("synced")}),m(null)},onCancel:()=>m(null)})}function te(S){const L=i[S];L&&r(L)}function ue(S){h({title:"Excluir Receita",message:`A receita "${S}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const L={...i};delete L[S],s(L),Io(L),Re.deleteRecipe(S),h(null)},onCancel:()=>h(null)})}function he(S){m({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:S,onConfirm:L=>{if(!L||L===S)return;const G={...i};G[L]=G[S];const ee=G[S];delete G[S],s(G),Io(G),Re.deleteRecipe(S),Re.saveRecipe(L,ee),m(null)},onCancel:()=>m(null)})}function Ee(){const S=JSON.stringify({inputs:n,recipes:i},null,2),L=new Blob([S],{type:"application/json"}),G=URL.createObjectURL(L),ee=document.createElement("a");ee.href=G,ee.download="padoca_pizza_recipes.json",ee.click(),URL.revokeObjectURL(G)}function R(S){var ee;const L=(ee=S.target.files)==null?void 0:ee[0];if(!L)return;const G=new FileReader;G.onload=M=>{try{const q=JSON.parse(String(M.target.result||"{}"));q.inputs&&r(q.inputs),q.recipes&&(s(q.recipes),Io(q.recipes)),P("Importao concluda!","success")}catch{P("Arquivo invlido.","error")}},G.readAsText(L),S.target.value=""}function B(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function U(S,L=0,G=""){let ee=Number(S);if(!Number.isFinite(ee))return"";let M=G,q=L;G==="g"&&Math.abs(ee)>=1e3&&(ee=ee/1e3,M="kg",q=2);const H=ee.toLocaleString("pt-BR",{minimumFractionDigits:q,maximumFractionDigits:q});return M?`${H} ${M}`:H}function W(S){return(Number(S)||0)>.001}return a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),a.jsx("div",{className:"relative group",children:a.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[a.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex justify-between items-start mb-12",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),a.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),a.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),a.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),a.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:U(A.total,0,"g")})]})]}),a.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),a.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:U(_,0,"g")})})]}),a.jsxs("div",{className:"flex flex-col gap-1.5",children:[a.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),a.jsx("div",{className:"flex items-baseline gap-1",children:a.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(A.total)||0)-(Number(_)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:U((Number(A.total)||0)-(Number(_)||0),1,"g")})})]})]})]})}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:S=>{const L=parseFloat(S.target.value);w("doughBalls",Math.round(L))}})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:S=>{const L=parseFloat(S.target.value);if(t==="grams"){const ee=E*x/100;let M=L>0?Math.round(ee/L):1;M<1&&(M=1);const q=Math.round(ee/M);r(H=>({...H,ballWeight:q,doughBalls:M}))}else w("ballWeight",Math.round(L))}})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),a.jsx(eD,{value:n.prefermentType,onChange:S=>w("prefermentType",S),data:n.preferment,onDataChange:D,inputMode:t,flourWeight:E})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&a.jsx(Xn,{label:"Farinha Total",value:b.flour,onChange:k,unit:"g"}),a.jsx(Xn,{label:"gua",value:t==="grams"?b.water:n.water,onChange:S=>O("water",S),unit:t==="grams"?"g":"%"}),a.jsx(Xn,{label:"Sal",value:t==="grams"?b.salt:n.salt,onChange:S=>O("salt",S),unit:t==="grams"?"g":"%"}),a.jsx(Xn,{label:"Azeite",value:t==="grams"?b.oliveOil:n.oliveOil,onChange:S=>O("oliveOil",S),unit:t==="grams"?"g":"%"}),a.jsx(Xn,{label:"Acar",value:t==="grams"?b.sugar:n.sugar,onChange:S=>O("sugar",S),unit:t==="grams"?"g":"%"}),a.jsx(Xn,{label:"leo",value:t==="grams"?b.oil:n.oil,onChange:S=>O("oil",S),unit:t==="grams"?"g":"%"}),a.jsx(Xn,{label:"Leite",value:t==="grams"?b.milk:n.milk,onChange:S=>O("milk",S),unit:t==="grams"?"g":"%"}),a.jsx(Xn,{label:"Manteiga",value:t==="grams"?b.butter:n.butter,onChange:S=>O("butter",S),unit:t==="grams"?"g":"%"}),a.jsx(Xn,{label:"Malte",value:t==="grams"?b.diastatic:n.diastatic,onChange:S=>O("diastatic",S),unit:t==="grams"?"g":"%"})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),a.jsx(Z6,{value:n.yeastSelection,onChange:S=>w("yeastSelection",S),data:n.yeastType,onDataChange:V,inputMode:t,flourWeight:E})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:S=>w("RT_h",parseFloat(S.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:S=>w("RT_C",parseFloat(S.target.value))})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:S=>w("CT_h",parseFloat(S.target.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),a.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:S=>w("CT_C",parseFloat(S.target.value))})]})]})]}),n.prefermentType!=="None"&&ce&&a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:U(ce.pct,1,"%")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(ie,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(le,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(Y,0,"g")})]})]}),(typeof ce.yeastPct<"u"||typeof ce.inoculationPct<"u"||typeof ce.time_h<"u"||typeof ce.temp_C<"u")&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof ce.yeastPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(ie*(Number(ce.yeastPct)||0)/100,2,"g")})]}),typeof ce.inoculationPct<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(ce.inoculationPct,1,"%")})]}),typeof ce.time_h<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(ce.time_h,0,"h")})]}),typeof ce.temp_C<"u"&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),a.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:U(ce.temp_C,0,"C")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),a.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[W(A.flour)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.flour-ie,0,"g")})]}),W(A.water)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.water-le,0,"g")})]}),n.prefermentType!=="None"&&ce&&a.jsxs("div",{children:[a.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(Y,0,"g")})]}),W(A.salt)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.salt,1,"g")})]}),W(A.sugar)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.sugar,1,"g")})]}),W(A.oliveOil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.oliveOil,1,"g")})]}),W(A.oil)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.oil,1,"g")})]}),W(A.milk)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.milk,1,"g")})]}),W(A.butter)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.butter,1,"g")})]}),W(A.diastatic)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.diastatic,1,"g")})]}),W(A.yeast)&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),a.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.yeast,2,"g")})]})]}),a.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(A.total,0,"g")})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),a.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:U(j,1,"%")})]})]})]})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),a.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[a.jsx("button",{onClick:se,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),a.jsx("button",{onClick:()=>{var S;return(S=o.current)==null?void 0:S.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),a.jsx("button",{onClick:Ee,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),a.jsx("button",{onClick:B,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),a.jsx("input",{ref:o,type:"file",accept:"application/json",className:"hidden",onChange:R})]}),a.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[a.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?a.jsxs("div",{className:"text-center py-10",children:[a.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),a.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):a.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([S])=>a.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[a.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:S}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>te(S),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),a.jsx("button",{onClick:()=>he(S),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),a.jsx("button",{onClick:()=>ue(S),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},S))})]}),a.jsx(je,{children:d&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(f1,{}),a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:d.onCancel}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${d.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.type==="danger"?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:d.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:d.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:d.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:d.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${d.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),a.jsx(je,{children:p&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(f1,{}),a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:p.onCancel}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:p.title}),a.jsx("input",{autoFocus:!0,defaultValue:p.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:p.placeholder,onKeyDown:S=>{S.key==="Enter"&&p.onConfirm(S.target.value)}}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:p.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:S=>{const L=S.target.closest(".relative").querySelector("input");p.onConfirm(L.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),a.jsx(je,{children:v&&sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${v.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":v.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${v.type==="error"?"bg-white animate-pulse":v.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:v.message})]}),document.body)})]})}function f1(){return zn(!0),null}const rD=10*1024*1024,iD=15e3,sD=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>rD){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const o=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},iD),l=new Image;l.onload=()=>{clearTimeout(o);try{const c=document.createElement("canvas");let d=l.width,h=l.height;d>e&&(h=e/d*h,d=e),c.width=d,c.height=h;const p=c.getContext("2d");if(!p){i(new Error("Falha ao criar contexto de imagem."));return}p.drawImage(l,0,0,d,h);const m=c.toDataURL("image/jpeg",n);if(!m||m==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(m)}catch(c){i(new Error("Erro ao processar imagem: "+c.message))}},l.onerror=()=>{clearTimeout(o),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t});var Yf=function(t,e){return Yf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Yf(t,e)};function oD(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Yf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var gt=function(){return gt=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},gt.apply(this,arguments)};var p1=!1,vi,Xf,Jf,ac,lc,RN,cc,Zf,ep,tp,DN,np,rp,VN,MN;function $t(){if(!p1){p1=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(np=/\b(iPhone|iP[ao]d)/.exec(t),rp=/\b(iP[ao]d)/.exec(t),tp=/Android/i.exec(t),VN=/FBAN\/\w+;/i.exec(t),MN=/Mobile/i.exec(t),DN=!!/Win64/.exec(t),e){vi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,vi&&document&&document.documentMode&&(vi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);RN=r?parseFloat(r[1])+4:vi,Xf=e[2]?parseFloat(e[2]):NaN,Jf=e[3]?parseFloat(e[3]):NaN,ac=e[4]?parseFloat(e[4]):NaN,ac?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),lc=e&&e[1]?parseFloat(e[1]):NaN):lc=NaN}else vi=Xf=Jf=lc=ac=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);cc=i?parseFloat(i[1].replace("_",".")):!0}else cc=!1;Zf=!!n[2],ep=!!n[3]}else cc=Zf=ep=!1}}var ip={ie:function(){return $t()||vi},ieCompatibilityMode:function(){return $t()||RN>vi},ie64:function(){return ip.ie()&&DN},firefox:function(){return $t()||Xf},opera:function(){return $t()||Jf},webkit:function(){return $t()||ac},safari:function(){return ip.webkit()},chrome:function(){return $t()||lc},windows:function(){return $t()||Zf},osx:function(){return $t()||cc},linux:function(){return $t()||ep},iphone:function(){return $t()||np},mobile:function(){return $t()||np||rp||tp||MN},nativeApp:function(){return $t()||VN},android:function(){return $t()||tp},ipad:function(){return $t()||rp}},aD=ip,lD=!!(typeof window<"u"&&window.document&&window.document.createElement),cD={canUseDOM:lD},uD=cD,LN=uD,ON;LN.canUseDOM&&(ON=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function dD(t,e){if(!LN.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&ON&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var hD=dD,fD=aD,pD=hD,m1=10,g1=40,x1=800;function FN(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*m1,i=n*m1,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=g1,i*=g1):(r*=x1,i*=x1)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}FN.getEventType=function(){return fD.firefox()?"DOMMouseScroll":pD("wheel")?"wheel":"mousewheel"};var mD=FN,gD=mD;const xD=E1(gD);function yD(t,e,n,r,i,s){s===void 0&&(s=0);var o=Hs(t,e,s),l=o.width,c=o.height,d=Math.min(l,n),h=Math.min(c,r);return d>h*i?{width:h*i,height:h}:{width:d,height:d/i}}function vD(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function zo(t,e,n,r,i){i===void 0&&(i=0);var s=Hs(e.width,e.height,i),o=s.width,l=s.height;return{x:y1(t.x,o,n.width,r),y:y1(t.y,l,n.height,r)}}function y1(t,e,n,r){var i=e*r/2-n/2;return Bu(t,-i,i)}function v1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function w1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function wD(t,e,n,r,i,s,o){s===void 0&&(s=0),o===void 0&&(o=!0);var l=o?bD:kD,c=Hs(e.width,e.height,s),d=Hs(e.naturalWidth,e.naturalHeight,s),h={x:l(100,((c.width-n.width/i)/2-t.x/i)/c.width*100),y:l(100,((c.height-n.height/i)/2-t.y/i)/c.height*100),width:l(100,n.width/c.width*100/i),height:l(100,n.height/c.height*100/i)},p=Math.round(l(d.width,h.width*d.width/100)),m=Math.round(l(d.height,h.height*d.height/100)),v=d.width>=d.height*r,N=v?{width:Math.round(m*r),height:m}:{width:p,height:Math.round(p/r)},C=gt(gt({},N),{x:Math.round(l(d.width-N.width,h.x*d.width/100)),y:Math.round(l(d.height-N.height,h.y*d.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:C}}function bD(t,e){return Math.min(t,Math.max(0,e))}function kD(t,e){return e}function _D(t,e,n,r,i,s){var o=Hs(e.width,e.height,n),l=Bu(r.width/o.width*(100/t.width),i,s),c={x:l*o.width/2-r.width/2-o.width*l*(t.x/100),y:l*o.height/2-r.height/2-o.height*l*(t.y/100)};return{crop:c,zoom:l}}function ND(t,e,n){var r=vD(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function ED(t,e,n,r,i,s){n===void 0&&(n=0);var o=Hs(e.naturalWidth,e.naturalHeight,n),l=Bu(ND(t,e,r),i,s),c=r.height>r.width?r.height/t.height:r.width/t.width,d={x:((o.width-t.width)/2-t.x)*c,y:((o.height-t.height)/2-t.y)*c};return{crop:d,zoom:l}}function b1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function TD(t){return t*Math.PI/180}function Hs(t,e,n){var r=TD(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function Bu(t,e,n){return Math.min(Math.max(t,e),n)}function Vl(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var CD=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,jD=1,SD=3,ID=1,zD=function(t){oD(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=I.createRef(),n.imageRef=I.createRef(),n.videoRef=I.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=_D(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=i.crop,o=i.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var l=ED(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=l.crop,o=l.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var r,i,s,o,l,c,d=n.imageRef.current||n.videoRef.current;if(d&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,p=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,m=((s=n.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,v=d.offsetWidth<p||d.offsetHeight<m,N=p/m,C=void 0;if(v)switch(n.state.mediaObjectFit){default:case"contain":C=h>N?{width:n.containerRect.height*N,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/N};break;case"horizontal-cover":C={width:n.containerRect.width,height:n.containerRect.width/N};break;case"vertical-cover":C={width:n.containerRect.height*N,height:n.containerRect.height};break}else C={width:d.offsetWidth,height:d.offsetHeight};n.mediaSize=gt(gt({},C),{naturalWidth:p,naturalHeight:m}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var P=n.props.cropSize?n.props.cropSize:yD(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((l=n.state.cropSize)===null||l===void 0?void 0:l.height)!==P.height||((c=n.state.cropSize)===null||c===void 0?void 0:c.width)!==P.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(P),n.setState({cropSize:P},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(P),P}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),s=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(s,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+r.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,s,o=r.x,l=r.y;n.dragStartPosition={x:o,y:l},n.dragStartCrop=gt({},n.props.crop),(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i)},n.onDrag=function(r){var i=r.x,s=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||s===void 0)){var o=i-n.dragStartPosition.x,l=s-n.dragStartPosition.y,c={x:n.dragStartCrop.x+o,y:n.dragStartCrop.y+l},d=n.props.restrictPosition?zo(c,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):c;n.props.onCropChange(d)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),s=xD(r).pixelY,o=n.props.zoom-s*n.props.zoomSpeed/200;n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=n.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=n.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},n.getPointOnContainer=function(r,i){var s=r.x,o=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(s-i.x),y:n.containerRect.height/2-(o-i.y)}},n.getPointOnMedia=function(r){var i=r.x,s=r.y,o=n.props,l=o.crop,c=o.zoom;return{x:(i+l.x)/c,y:(s+l.y)/c}},n.setNewZoom=function(r,i,s){var o=s===void 0?{}:s,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!n.state.cropSize||!n.props.onZoomChange)){var d=Bu(r,n.props.minZoom,n.props.maxZoom);if(c){var h=n.getPointOnContainer(i,n.containerPosition),p=n.getPointOnMedia(h),m={x:p.x*d-h.x,y:p.y*d-h.y},v=n.props.restrictPosition?zo(m,n.mediaSize,n.state.cropSize,d,n.props.rotation):m;n.props.onCropChange(v)}n.props.onZoomChange(d)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?zo(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return wD(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,s),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.recomputeCropPosition=function(){var r,i;if(n.state.cropSize){var s=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((i=n.previousCropSize)===null||i===void 0)&&i.height)){var o=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(o){var l=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;s={x:n.props.crop.x*l,y:n.props.crop.y*c}}}var d=n.props.restrictPosition?zo(s,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):s;n.previousCropSize=n.state.cropSize,n.props.onCropChange(d),n.emitCropData()}},n.onKeyDown=function(r){var i,s,o=n.props,l=o.crop,c=o.onCropChange,d=o.keyboardStep,h=o.zoom,p=o.rotation,m=d;if(n.state.cropSize){r.shiftKey&&(m*=.2);var v=gt({},l);switch(r.key){case"ArrowUp":v.y-=m,r.preventDefault();break;case"ArrowDown":v.y+=m,r.preventDefault();break;case"ArrowLeft":v.x-=m,r.preventDefault();break;case"ArrowRight":v.x+=m,r.preventDefault();break;default:return}n.props.restrictPosition&&(v=zo(v,n.mediaSize,n.state.cropSize,h,p)),r.repeat||(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i),c(v)}},n.onKeyUp=function(r){var i,s;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(s=(i=n.props).onInteractionEnd)===null||s===void 0||s.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=CD,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,s,o,l,c,d,h,p;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((s=n.cropSize)===null||s===void 0?void 0:s.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=n.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=n.crop)===null||d===void 0?void 0:d.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((p=this.videoRef.current)===null||p===void 0||p.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,s;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,d=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,h=c/d;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=v1(r,i),this.lastPinchRotation=w1(r,i),this.onDragStart(b1(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]),o=b1(i,s);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=v1(i,s),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var d=w1(i,s),h=r.props.rotation+(d-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=d})}},e.prototype.render=function(){var n=this,r,i=this.props,s=i.image,o=i.video,l=i.mediaProps,c=i.cropperProps,d=i.transform,h=i.crop,p=h.x,m=h.y,v=i.rotation,N=i.zoom,C=i.cropShape,P=i.showGrid,b=i.roundCropAreaPixels,y=i.style,w=y.containerStyle,D=y.cropAreaStyle,V=y.mediaStyle,O=i.classes,k=O.containerClassName,x=O.cropAreaClassName,_=O.mediaClassName,E=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return I.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(A){return n.containerRef=A},"data-testid":"container",style:w,className:Vl("reactEasyCrop_Container",k)},s?I.createElement("img",gt({alt:"",className:Vl("reactEasyCrop_Image",E==="contain"&&"reactEasyCrop_Contain",E==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",E==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{src:s,ref:this.imageRef,style:gt(gt({},V),{transform:d||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(v,"deg) scale(").concat(N,")")}),onLoad:this.onMediaLoad})):o&&I.createElement("video",gt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Vl("reactEasyCrop_Video",E==="contain"&&"reactEasyCrop_Contain",E==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",E==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",_)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:gt(gt({},V),{transform:d||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(v,"deg) scale(").concat(N,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(z){return I.createElement("source",gt({key:z.src},z))})),this.state.cropSize&&I.createElement("div",gt({ref:this.cropperRef,style:gt(gt({},D),{width:b?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:b?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Vl("reactEasyCrop_CropArea",C==="round"&&"reactEasyCrop_CropAreaRound",P&&"reactEasyCrop_CropAreaGrid",x)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:SD,minZoom:jD,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:ID},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(I.Component);const AD=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",i=>n(i)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function BN(t){return t*Math.PI/180}function PD(t,e,n){const r=BN(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function RD(t,e,n=0,r={horizontal:!1,vertical:!1}){const i=await AD(t),s=document.createElement("canvas"),o=s.getContext("2d");if(!o)return null;const l=BN(n),{width:c,height:d}=PD(i.width,i.height,n);s.width=c,s.height=d,o.translate(c/2,d/2),o.rotate(l),o.scale(r.horizontal?-1:1,r.vertical?-1:1),o.translate(-i.width/2,-i.height/2),o.drawImage(i,0,0);const h=o.getImageData(e.x,e.y,e.width,e.height);return s.width=e.width,s.height=e.height,o.putImageData(h,0,0),s.toDataURL("image/jpeg",.9)}const DD=()=>{const[t,e]=I.useState(null),n=I.useRef(null),r=I.useCallback((o,l="error")=>{n.current&&clearTimeout(n.current),e({message:o,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),i=I.useMemo(()=>({error:o=>r(o,"error"),success:o=>r(o,"success"),info:o=>r(o,"info")}),[r]),s=t?sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:i,ToastUI:s}},Ze={Camera:()=>a.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:t=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>a.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},VD=({src:t,onClose:e})=>(zn(!0),sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[a.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:a.jsx(Ze.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),a.jsx(ne.img,{src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:n=>n.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body)),MD=({imageSrc:t,onCancel:e,onCropComplete:n})=>{const[r,i]=I.useState({x:0,y:0}),[s,o]=I.useState(1),[l,c]=I.useState(null),[d,h]=I.useState(!1);zn(!0);const p=(v,N)=>{c(N)},m=async()=>{try{const v=await RD(t,l);n(v)}catch(v){console.error(v)}};return sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black flex flex-col",children:[a.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[20001] px-6 py-12 flex justify-between items-center bg-gradient-to-b from-black/80 via-black/40 to-transparent pointer-events-none",children:[a.jsx("button",{onClick:e,className:"pointer-events-auto px-5 py-2.5 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/10 text-white text-sm font-semibold transition-all active:scale-95",children:"Cancelar"}),a.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest opacity-80 mt-1",children:"Redimensionar"}),a.jsx("button",{onClick:m,className:"pointer-events-auto px-6 py-2.5 rounded-full bg-white text-black text-sm font-bold transition-all hover:bg-zinc-100 active:scale-95 shadow-[0_4px_24px_rgba(255,255,255,0.2)]",children:"OK"})]}),a.jsx("div",{className:"relative flex-1 bg-black",children:a.jsx(zD,{image:t,crop:r,zoom:s,aspect:4/5,onCropChange:i,onZoomChange:o,onCropComplete:p,showGrid:d,onInteractionStart:()=>h(!0),onInteractionEnd:()=>h(!1),classes:{containerClassName:"bg-black",mediaClassName:"object-contain",cropAreaClassName:"border border-white/40 shadow-[0_0_0_1000px_rgba(0,0,0,0.7)]"}})}),a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[20001] px-8 py-16 flex flex-col items-center bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none",children:[a.jsxs("div",{className:"w-full max-w-xs flex items-center gap-6 pointer-events-auto",children:[a.jsx("button",{onClick:()=>o(Math.max(1,s-.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:a.jsx(Ze.Camera,{className:"w-4 h-4"})}),a.jsx("input",{type:"range",value:s,min:1,max:3,step:.01,onChange:v=>o(parseFloat(v.target.value)),className:"range-slider accent-white"}),a.jsx("button",{onClick:()=>o(Math.min(3,s+.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:a.jsx(Ze.Plus,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"mt-8 flex gap-1 items-center opacity-30 select-none",children:[1,1.5,2,2.5,3].map(v=>a.jsx("div",{className:`w-1 h-3 rounded-full transition-all duration-300 ${s>=v?"bg-white h-5 opacity-100":"bg-white/40"}`},v))})]}),a.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/20 rounded-full z-[20002]"})]}),document.body)},LD=({id:t,children:e})=>{const n=zm();return a.jsx(Nu,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},OD=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,s]=I.useState(""),[o,l]=I.useState(null),[c,d]=I.useState(""),[h,p]=I.useState(null),[m,v]=I.useState(null),[N,C]=I.useState(!1),P=I.useRef(null);zn(!0);const b=["#FF3B30","#FF9500","#FFCC00","#34C759","#00C7BE","#007AFF","#5856D6","#AF52DE","#FF2D55","#8E8E93"],y=x=>typeof x=="string"?{name:x,color:"#007AFF"}:{name:x.name||"Sem nome",color:x.color||"#007AFF"},w=()=>{const x=i.trim();!x||t.some(E=>Mt(E)===x)||(n([...t,{name:x,color:"#007AFF"}]),s(""))},D=x=>{const _=c.trim(),E=Mt(x);if(!_||_===E){l(null);return}if(t.some(A=>Mt(A)===_)){l(null);return}r(E,_),n(t.map(A=>{const j=y(A);return j.name===E?{...j,name:_}:j})),l(null)},V=(x,_)=>{const E=Mt(x);n(t.map(z=>{const A=y(z);return A.name===E?{...A,color:_}:A})),v(null)},O=x=>{const _=Mt(x);n(t.filter(E=>Mt(E)!==_)),r(_,"Outros"),p(null)},k=(x,_)=>{C(!1),(_.offset.y>100||_.velocity.y>500)&&e()};return sn.createPortal(a.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-stretch md:items-center justify-center",children:[a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:e}),a.jsxs(ne.div,{ref:P,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:.8},drag:window.innerWidth>=768?"y":!1,dragConstraints:{top:0,bottom:0},dragElastic:{top:0,bottom:.7},onDragStart:()=>C(!0),onDragEnd:k,className:"relative w-full h-full md:h-auto md:max-w-md md:max-h-[80vh] bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-[0_-10px_60px_rgba(0,0,0,0.25)] dark:shadow-[0_-10px_60px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",style:{paddingTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[a.jsx("div",{className:"flex justify-center pt-3 pb-2 shrink-0 cursor-grab active:cursor-grabbing md:hidden touch-manipulation",children:a.jsx(ne.div,{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600",animate:{scale:N?1.1:1,backgroundColor:N?"#007AFF":void 0},transition:{duration:.15}})}),a.jsxs("div",{className:"flex items-center justify-between px-6 pt-4 md:pt-6 pb-4 shrink-0",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-[22px] font-bold text-zinc-900 dark:text-white tracking-tight leading-tight",children:"Categorias"}),a.jsx("p",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400 mt-0.5",children:"Organize suas receitas"})]}),a.jsx("button",{onClick:e,className:"w-12 h-12 -mr-2 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"px-6 pb-5 shrink-0",children:a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-1 relative",children:a.jsx("input",{type:"text",value:i,onChange:x=>s(x.target.value),onKeyDown:x=>x.key==="Enter"&&w(),className:"w-full h-12 px-4 rounded-xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[16px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Nova categoria..."})}),a.jsx("button",{onClick:w,disabled:!i.trim(),className:"w-12 h-12 flex items-center justify-center bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation shadow-lg shadow-blue-500/25",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),a.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-6"}),a.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-4 py-4",children:t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),a.jsx("p",{className:"text-[15px] font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhuma categoria ainda"})]}):a.jsx("div",{className:"space-y-2",children:t.map((x,_)=>{const{name:E,color:z}=y(x),A=E+_;return a.jsxs(ne.div,{layout:!0,className:"group relative",children:[a.jsxs("div",{className:"flex items-center gap-3 py-3 px-3 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[a.jsx("button",{onClick:()=>v(m===A?null:A),className:"w-12 h-12 rounded-xl flex items-center justify-center touch-manipulation hover:bg-white dark:hover:bg-zinc-700 transition-colors active:scale-95",children:a.jsx("div",{className:"w-7 h-7 rounded-full shadow-sm transition-transform hover:scale-110",style:{backgroundColor:z}})}),a.jsx("div",{className:"flex-1 min-w-0",children:o===A?a.jsx("input",{autoFocus:!0,value:c,onChange:j=>d(j.target.value),onBlur:()=>D(x),onKeyDown:j=>{j.key==="Enter"&&D(x),j.key==="Escape"&&l(null)},className:"w-full h-10 px-3 -ml-3 bg-white dark:bg-zinc-700 rounded-lg outline-none text-[16px] font-semibold text-zinc-900 dark:text-white ring-2 ring-blue-500"}):a.jsx("button",{onClick:()=>{l(A),d(E)},className:"text-left w-full py-2 text-[16px] font-semibold text-zinc-900 dark:text-white truncate touch-manipulation",children:E})}),a.jsx("button",{onClick:()=>p(x),className:"w-12 h-12 flex items-center justify-center rounded-xl text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all active:scale-95 touch-manipulation",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),a.jsx(je,{children:m===A&&a.jsxs(a.Fragment,{children:[a.jsxs(ne.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:30},className:"md:hidden fixed inset-x-0 bottom-0 z-[80] bg-white dark:bg-zinc-800 rounded-t-3xl shadow-[0_-20px_60px_rgba(0,0,0,0.3)] p-6",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 24px)"},children:[a.jsx("div",{className:"flex justify-center mb-4",children:a.jsx("div",{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600"})}),a.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white text-center mb-5",children:"Escolha uma Cor"}),a.jsx("div",{className:"grid grid-cols-5 gap-4 mb-6",children:b.map(j=>a.jsx("button",{onClick:()=>V(x,j),className:`aspect-square rounded-full transition-all active:scale-90 touch-manipulation ${z===j?"ring-[3px] ring-offset-4 ring-offset-white dark:ring-offset-zinc-800 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:j}},j))}),a.jsx("button",{onClick:()=>v(null),className:"w-full h-14 bg-zinc-100 dark:bg-zinc-700 rounded-2xl text-[17px] font-semibold text-zinc-900 dark:text-white active:bg-zinc-200 dark:active:bg-zinc-600 transition-colors touch-manipulation",children:"Fechar"})]}),a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 z-[75] bg-black/40",onClick:()=>v(null)}),a.jsx(ne.div,{initial:{opacity:0,scale:.95,y:-8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-8},transition:{duration:.15},className:"hidden md:block absolute left-3 top-full mt-2 z-[80] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:a.jsx("div",{className:"grid grid-cols-5 gap-2",children:b.map(j=>a.jsx("button",{onClick:()=>V(x,j),className:`w-8 h-8 rounded-full transition-all hover:scale-110 active:scale-95 ${z===j?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:j}},j))})})]})})]},A)})})}),a.jsx(je,{children:h&&a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:a.jsxs(ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:"w-full max-w-[280px] bg-white/95 dark:bg-zinc-800/95 backdrop-blur-xl rounded-[20px] overflow-hidden shadow-2xl",children:[a.jsxs("div",{className:"p-6 text-center",children:[a.jsx("div",{className:"w-14 h-14 bg-rose-100 dark:bg-rose-900/40 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4",children:a.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),a.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),a.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 leading-relaxed",children:['"',Mt(h),'" ser removida. Receitas sero movidas para "Outros".']})]}),a.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:a.jsx("button",{onClick:()=>p(null),className:"w-full h-12 text-[17px] font-normal text-blue-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors touch-manipulation",children:"Cancelar"})}),a.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:a.jsx("button",{onClick:()=>O(h),className:"w-full h-12 text-[17px] font-semibold text-rose-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors active:bg-rose-50 dark:active:bg-rose-900/20 touch-manipulation",children:"Excluir"})})]})})})]})]}),document.body)},FD=xn.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:i})=>{const s=zm(),[o,l]=I.useState(!1);return a.jsx(Nu,{value:t,dragListener:i,dragControls:s,className:`group relative mb-2 transition-all duration-300 ease-out ${i?"":"cursor-pointer"}`,onClick:()=>!i&&l(!o),children:a.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${i?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":o?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[i&&a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:c=>s.start(c),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!i&&a.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${o?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:o&&a.jsx(Ze.Check,{className:"w-3 h-3 text-white"})}),i?a.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:c=>e({...t,name:c.target.value}),onKeyDown:c=>{if(c.key==="Enter"){c.preventDefault();const d=document.getElementById(`ing-qty-${t.id}`);d&&d.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):a.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${o?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),a.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:a.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:c=>{const d=c.target.value;(d===""||/^[0-9.,]*$/.test(d))&&e({...t,quantity:d})},onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),a.jsx("select",{value:t.unit,onChange:c=>e({...t,unit:c.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(c=>a.jsx("option",{value:c,children:c},c))})]}):a.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${o?"opacity-50":""}`,children:[a.jsx("span",{children:t.quantity}),a.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),i&&a.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),BD=xn.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i,isEditing:s})=>{const o=zm(),[l,c]=I.useState(!1);return a.jsx(Nu,{value:t,dragListener:s,dragControls:o,className:`group relative mb-2 transition-all duration-300 ease-out ${s?"":"cursor-pointer"}`,onClick:()=>!s&&c(!l),children:a.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${s?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[s&&a.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:d=>o.start(d),children:a.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[a.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),a.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),a.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!s&&l?a.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:a.jsx(Ze.Check,{className:"w-3 h-3 text-white"})}):a.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),s?a.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:d=>n({...t,text:d.target.value}),onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:d=>{d.target.style.height="auto",d.target.style.height=d.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):a.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),s&&a.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),Mt=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",k1=(t,e)=>{const n=t.find(r=>Mt(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function UD(){const{toast:t,ToastUI:e}=DD(),[n,r]=I.useState([]),[i,s]=I.useState(["Tradicionais","Especiais","Veganas","Doces"]),[o,l]=I.useState(null),[c,d]=I.useState(!1),[h,p]=I.useState("Todas"),[m,v]=I.useState(!0),[N,C]=I.useState(null),[P,b]=I.useState(null),[y,w]=I.useState(null),[D,V]=I.useState(!1),[O,k]=I.useState(!1),[x,_]=I.useState(!1),[E,z]=I.useState(!1),[A,j]=I.useState(null),xe=I.useRef(null);I.useRef(null);const ce=I.useRef({}),ie=I.useRef({});I.useEffect(()=>{let R=!0;return(async()=>{try{const U=await Re.getRecipesV3();if(!R)return;Array.isArray(U)&&U.length>0?r(U.map(W=>{let S=Array.isArray(W.sections)?W.sections:[];return S.length===0&&(Array.isArray(W.ingredientSections)||Array.isArray(W.instructionSections))&&(S=[...Array.isArray(W.ingredientSections)?W.ingredientSections.map(L=>({...L,type:"ingredients"})):[],...Array.isArray(W.instructionSections)?W.instructionSections.map(L=>({...L,type:"instructions"})):[]]),S.length>0&&(S=S.map(L=>({...L,items:Array.isArray(L.items)?L.items.filter(G=>{var ee,M,q;return L.type==="ingredients"?((ee=G.name)==null?void 0:ee.trim())||((M=G.quantity)==null?void 0:M.trim()):(q=G.text)==null?void 0:q.trim()}):[]}))),{id:String(W.id),name:W.name||"Sem nome",category:W.category||"Outros",prepTime:W.prepTime??0,cookTime:W.cookTime??0,temperature:W.temperature??180,image:W.image||null,sections:S,createdAt:W.createdAt||new Date().toISOString(),updatedAt:W.updatedAt||new Date().toISOString()}})):r([])}catch{R&&r([])}try{const U=await Re.getRecipeCategories();R&&U&&Array.isArray(U)&&s(U)}catch{}R&&(v(!1),C(null))})(),()=>{R=!1}},[]),I.useEffect(()=>{if(m)return;const R=setTimeout(()=>{Re.syncRecipeCategories(i)},1e3);return()=>clearTimeout(R)},[i,m]);const le=(R,B)=>{const U=String(R);k(!0),_(!1),r(W=>W.map(S=>String(S.id)===U?{...S,...B,updatedAt:new Date().toISOString()}:S)),ce.current[U]={...ce.current[U]||{},...B,updatedAt:new Date().toISOString()},ie.current[U]&&clearTimeout(ie.current[U]),ie.current[U]=setTimeout(async()=>{const W=ce.current[U];if(!W){k(!1);return}delete ce.current[U],delete ie.current[U];try{await Re.syncRecipeV3(U,W,!0)||_(!0)}catch{_(!0)}finally{Object.keys(ce.current).length===0&&k(!1)}},1200)},Y=R=>{const B=R.target.files[0];if(!B)return;if(!o){t.error("Nenhuma receita selecionada.");return}const U=new FileReader;U.onload=()=>{j(U.result)},U.readAsDataURL(B),R.target.value=null},se=async R=>{try{z(!0),j(null);const B=await sD(R);le(o,{image:B}),t.success("Imagem atualizada!")}catch(B){console.error(B),t.error("Erro ao processar imagem.")}finally{z(!1)}},te=async R=>{const B=String(R);w(null),r(U=>U.filter(W=>String(W.id)!==B)),String(o)===B&&l(null);try{if(!await Re.deleteRecipeV3(B))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},ue=I.useMemo(()=>n.filter(R=>h==="Todas"||R.category===h),[n,h]),he=I.useMemo(()=>n.find(R=>String(R.id)===String(o)),[n,o]),Ee=I.useCallback(()=>{if(he&&he.sections){const R=he.sections.map(B=>B.type==="ingredients"?{...B,items:(B.items||[]).filter(U=>U.name.trim()||U.quantity.trim())}:B.type==="instructions"?{...B,items:(B.items||[]).filter(U=>U.text.trim())}:B);le(o,{sections:R})}d(!1)},[he,o,le]);return m?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):N?a.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:a.jsxs("div",{className:"text-center max-w-sm",children:[a.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:N}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):a.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[a.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),a.jsx(je,{children:!o&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[a.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),a.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${x?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":O?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[a.jsx("div",{className:`w-1 h-1 rounded-full ${x?"bg-rose-500":O?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:x?"Erro de Sync":O?"Sincronizando":"Cloud Active"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),a.jsxs("button",{onClick:()=>{const R=String(Date.now()),B={id:R,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([B,...n]),l(R),d(!0),Re.syncRecipeV3(R,B)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[a.jsx(Ze.Plus,{}),"Criar Nova Receita"]})]}),a.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:a.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...i].map(R=>a.jsx("button",{onClick:()=>p(Mt(R)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===Mt(R)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:Mt(R)},Mt(R))),a.jsx("button",{onClick:()=>V(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[ue.map(R=>a.jsxs(ne.div,{onClick:()=>{l(R.id),d(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[a.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[R.image?a.jsx(ne.img,{src:R.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):a.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),a.jsx("div",{className:"absolute top-[-50%] left-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/5 via-transparent to-transparent animate-[spin_20s_linear_infinite] opacity-60"}),a.jsx("div",{className:"absolute bottom-[-50%] right-[-50%] w-[200%] h-[200%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/5 via-transparent to-transparent animate-[spin_25s_linear_infinite_reverse] opacity-60"}),a.jsx(ne.div,{animate:{opacity:[.2,.5,.2]},transition:{duration:5,repeat:1/0,ease:"easeInOut"},className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/10 via-transparent to-transparent"}),a.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:a.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:a.jsx(Ze.Camera,{})})})]}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),a.jsx("button",{onClick:B=>{B.stopPropagation(),w({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${R.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{te(R.id)},onCancel:()=>w(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:a.jsx(Ze.Trash,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"px-2 pb-4",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${k1(i,R.category)}15`,color:k1(i,R.category)},children:R.category}),a.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ze.Clock,{}),R.prepTime+R.cookTime,"m"]}),R.temperature>0&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),R.temperature,""]})]})]})]}),a.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:R.name}),a.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(R.sections||[]).filter(B=>B.type==="ingredients").reduce((B,U)=>{var W;return B+(((W=U.items)==null?void 0:W.length)||0)},0)," ingredientes"]})]})]},R.id)),ue.length===0&&a.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[a.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),a.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:a.jsx(Ze.Book,{})})]}),a.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),a.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",a.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&sn.createPortal(a.jsx(je,{children:o&&he&&a.jsx(ne.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:xe,children:he?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[a.jsx("div",{className:"flex-1 flex justify-start",children:a.jsx("button",{onClick:()=>{const R=(he.sections||[]).map(B=>({...B,items:B.items.filter(U=>{var W,S,L;return B.type==="ingredients"?((W=U.name)==null?void 0:W.trim())||((S=U.quantity)==null?void 0:S.trim()):(L=U.text)==null?void 0:L.trim()})}));le(o,{sections:R}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:a.jsx(Ze.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),a.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${x?"text-rose-500":O?"text-zinc-400":"text-zinc-300"}`,children:x?"Falha":O?"Sincronizando...":"Salvo"}),a.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>c?Ee():d(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${c?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:c?"Concludo":"Editar"}),a.jsx("button",{onClick:()=>{w({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{te(o)},onCancel:()=>w(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:a.jsx(Ze.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),a.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[a.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[a.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:he.image?a.jsxs(a.Fragment,{children:[a.jsx(ne.img,{src:he.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>b(he.image)}),a.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y,disabled:E}),E?a.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):a.jsx(Ze.Camera,{className:"w-5 h-5"})]})]}):a.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[a.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y}),a.jsx(Ze.Camera,{}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),a.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(R=>a.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:R.label}),a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("input",{value:he[R.val],onChange:B=>le(o,{[R.val]:B.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),R.unit&&a.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:R.unit})]})]},R.label))})]}),a.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[a.jsxs("div",{className:"space-y-4 md:space-y-6",children:[a.jsx("div",{className:"flex items-center gap-4",children:a.jsx("select",{value:he.category,onChange:R=>le(o,{category:R.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:i.map(R=>a.jsx("option",{value:Mt(R),children:Mt(R)},Mt(R)))})}),a.jsx("textarea",{value:he.name,onChange:R=>le(o,{name:R.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:R=>{R.target.style.height="auto",R.target.style.height=R.target.scrollHeight+"px"}})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[a.jsxs("button",{disabled:!c,onClick:()=>le(o,{sections:[...he.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),a.jsxs("button",{disabled:!c,onClick:()=>le(o,{sections:[...he.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),a.jsx(_u,{axis:"y",values:he.sections||[],onReorder:R=>le(o,{sections:R}),className:"space-y-6",children:(he.sections||[]).map(R=>a.jsx(LD,{id:R,children:B=>a.jsx(WD,{section:R,onUpdate:U=>le(o,{sections:he.sections.map(W=>W.id===R.id?U:W)}),onDelete:()=>le(o,{sections:he.sections.filter(U=>U.id!==R.id)}),dragControls:B,isEditing:c})},R.id))}),a.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:a.jsx("button",{onClick:()=>w({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{te(o)},onCancel:()=>w(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),D&&a.jsx(OD,{categories:i,onClose:()=>V(!1),onUpdate:s,onRenameCategory:(R,B)=>{n.filter(U=>U.category===R).forEach(U=>{le(U.id,{category:B})})}},"recipe-cat-modal"),a.jsx(je,{children:P&&a.jsx(VD,{src:P,onClose:()=>b(null)})}),typeof document<"u"&&sn.createPortal(a.jsx(je,{mode:"wait",children:y&&a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:y.onCancel}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[a.jsx($D,{}),a.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${y.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:a.jsx(Ze.Trash,{})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:y.title}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:y.message}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:y.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:y.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${y.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),a.jsx(je,{children:A&&a.jsx(MD,{imageSrc:A,onCancel:()=>j(null),onCropComplete:se})}),e]})}function $D(){return zn(!0),null}function WD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){return t.type==="ingredients"?a.jsx(qD,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):t.type==="instructions"?a.jsx(HD,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):null}function qD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=xn.useRef(null),o=xn.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],c]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const d=document.getElementById(`ing-name-${l}`);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.focus())})})},[t,e]);return a.jsxs("div",{ref:s,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:a.jsx(Ze.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),i?a.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):a.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(Ze.Trash,{})})]}),a.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:a.jsx(_u,{axis:"y",values:t.items,onReorder:l=>i&&e({...t,items:l}),children:t.items.map(l=>a.jsx(FD,{item:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===l.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==l.id)}),onNext:()=>{l.name.trim()&&o()},isEditing:i},l.id))})}),i&&a.jsxs("button",{type:"button",onClick:o,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[a.jsx(Ze.Plus,{})," Adicionar Ingrediente"]})]})}function HD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const s=xn.useCallback(()=>{const o=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:o,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const c=document.getElementById(`instr-text-${o}`);c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.focus())})})},[t,e]);return a.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[a.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:o=>r.start(o),children:a.jsx(Ze.Bars,{className:"w-5 h-5"})}),a.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),i?a.jsx("input",{value:t.title,onChange:o=>e({...t,title:o.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):a.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&a.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:a.jsx(Ze.Trash,{})})]}),a.jsx(_u,{axis:"y",values:t.items,onReorder:o=>i&&e({...t,items:o}),className:"space-y-3",children:t.items.map((o,l)=>a.jsx(BD,{item:o,index:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===o.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==o.id)}),onNext:()=>{o.text.trim()&&s()},isEditing:i},o.id))}),i&&a.jsxs("button",{type:"button",onClick:s,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[a.jsx(Ze.Plus,{})," Adicionar Passo"]})]})}const _1="padoca_kanban_pro_max",Ml={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},GD=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],N1={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},_0=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function KD(){const[t,e]=I.useState(()=>{try{const W=localStorage.getItem(_1);return W?JSON.parse(W):N1}catch{return N1}}),[n,r]=I.useState(null),[i,s]=I.useState(!1),[o,l]=I.useState(""),[c,d]=I.useState(0),[h,p]=I.useState(null),[m,v]=I.useState(""),[N,C]=I.useState(null),[P,b]=I.useState(""),[y,w]=I.useState(null),[D,V]=I.useState(!1),[O,k]=I.useState(null),x=I.useRef(null);I.useCallback((W,S="success")=>{x.current&&clearTimeout(x.current),k({message:W,type:S}),x.current=setTimeout(()=>k(null),3500)},[]);const[_,E]=I.useState({active:null,target:null,isDragging:!1}),z=Fc(0),A=Fc(0),j=I.useRef(null),xe=4,ce=I.useRef(null),ie=I.useRef(null),le=I.useRef({colId:null,index:null}),Y=I.useCallback((W="light")=>{navigator.vibrate&&navigator.vibrate(W==="light"?8:W==="medium"?15:25)},[]),se=I.useCallback((W,S,L)=>{const ee=document.elementsFromPoint(W,S).find(J=>J.hasAttribute("data-column-id"));if(!ee)return null;const M=ee.getAttribute("data-column-id"),q=ee.querySelector("[data-cards-container]");if(!q)return{colId:M,index:0};const H=Array.from(q.querySelectorAll("[data-card-id]")).filter(J=>J.getAttribute("data-card-id")!==L);if(H.length===0)return{colId:M,index:0};for(let J=0;J<H.length;J++){const ke=H[J].getBoundingClientRect(),Ie=ke.top+ke.height/2;if(S<Ie)return{colId:M,index:J}}return{colId:M,index:H.length}},[]);I.useEffect(()=>{const W=L=>{const G=j.current;if(G&&!_.isDragging){const ee=L.clientX-G.startX,M=L.clientY-G.startY;if(Math.sqrt(ee*ee+M*M)>xe){const{card:H,colId:J,rect:ke,offsetX:Ie,offsetY:Be,cardIndex:Ue}=G;z.set(ke.left),A.set(ke.top),E({active:{id:H.id,sourceColId:J,sourceIndex:Ue,data:H,rect:ke,offsetX:Ie,offsetY:Be},target:{colId:J,index:Ue},isDragging:!0}),Y("medium")}return}if(_.isDragging&&_.active){L.preventDefault();const ee=L.clientX-_.active.offsetX,M=L.clientY-_.active.offsetY;if(z.set(ee),A.set(M),ie.current)return;ie.current=requestAnimationFrame(()=>{const q=se(L.clientX,L.clientY,_.active.id);if(ie.current=null,q){const H=le.current;(H.colId!==q.colId||H.index!==q.index)&&(le.current=q,Y("light"),E(J=>({...J,target:q})))}})}},S=L=>{if(ie.current&&(cancelAnimationFrame(ie.current),ie.current=null),_.isDragging&&_.active){const{active:G,target:ee}=_;document.body.style.cursor="";const M=ee==null?void 0:ee.colId,q=ee==null?void 0:ee.index;M&&(G.sourceColId!==M||G.sourceIndex!==q)&&(e(J=>{const ke=J.columns.map(Xt=>({...Xt,cards:[...Xt.cards]})),Ie=ke.find(Xt=>Xt.id===G.sourceColId),Be=ke.find(Xt=>Xt.id===M);if(!Ie||!Be)return J;const Ue=Ie.cards.findIndex(Xt=>Xt.id===G.id);if(Ue===-1)return J;const[lt]=Ie.cards.splice(Ue,1);return Be.cards.splice(q,0,lt),{...J,columns:ke}}),Y("medium")),E({active:null,target:null,isDragging:!1}),le.current={colId:null,index:null}}else if(j.current){const{card:G,colId:ee}=j.current;r({...G,columnId:ee})}j.current=null};return window.addEventListener("pointermove",W,{passive:!1}),window.addEventListener("pointerup",S),window.addEventListener("pointercancel",S),()=>{window.removeEventListener("pointermove",W),window.removeEventListener("pointerup",S),window.removeEventListener("pointercancel",S),ie.current&&cancelAnimationFrame(ie.current)}},[_,se,Y,z,A]);const te=I.useCallback((W,S,L)=>{var M;if(W.target.closest("button, input, textarea, [data-no-drag]")||W.button&&W.button!==0)return;const G=W.currentTarget,ee=G.getBoundingClientRect();j.current={card:S,colId:L,element:G,rect:ee,startX:W.clientX,startY:W.clientY,offsetX:W.clientX-ee.left,offsetY:W.clientY-ee.top,cardIndex:((M=t.columns.find(q=>q.id===L))==null?void 0:M.cards.findIndex(q=>q.id===S.id))??0}},[t.columns]);I.useEffect(()=>{(async()=>{var S;try{const L=await((S=Re.getKanban)==null?void 0:S.call(Re));L!=null&&L.columns&&e(L)}catch{}finally{V(!0)}})()},[]),I.useEffect(()=>{if(localStorage.setItem(_1,JSON.stringify(t)),D){const W=setTimeout(()=>{var S;try{(S=Re.syncKanban)==null||S.call(Re,t)}catch{}},2e3);return()=>clearTimeout(W)}},[t,D]);const ue=I.useCallback(W=>{if(!m.trim())return;const S={id:`card - ${Date.now()} -${Math.random().toString(36).substr(2,9)} `,title:m.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(L=>({...L,columns:L.columns.map(G=>G.id===W?{...G,cards:[...G.cards,S]}:G)})),v(""),p(null),Y("light")},[m,Y]),he=I.useCallback(W=>{e(S=>({...S,columns:S.columns.map(L=>L.id===W.columnId?{...L,cards:L.cards.map(G=>G.id===W.id?W:G)}:L)}))},[]),Ee=I.useCallback((W,S)=>{w({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(L=>({...L,columns:L.columns.map(G=>G.id===W?{...G,cards:G.cards.filter(ee=>ee.id!==S)}:G)})),r(null),w(null),Y("medium")},onCancel:()=>w(null)})},[Y]),R=I.useCallback(()=>{o.trim()&&(e(W=>({...W,columns:[...W.columns,{id:`col - ${Date.now()} `,title:o.trim(),cards:[]}]})),l(""),s(!1),Y("light"))},[o,Y]),B=I.useCallback(W=>{if(!P.trim()){C(null);return}e(S=>({...S,columns:S.columns.map(L=>L.id===W?{...L,title:P.trim()}:L)})),C(null)},[P]),U=I.useCallback(W=>{w({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(S=>({...S,columns:S.columns.filter(L=>L.id!==W)})),w(null),Y("medium")},onCancel:()=>w(null)})},[Y]);return a.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[a.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[a.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),a.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${D?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[a.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${D?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),a.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:D?"Cloud Active":"Syncing"})]})]}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),a.jsxs("button",{onClick:()=>s(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[a.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),a.jsxs("div",{ref:ce,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[a.jsx(je,{mode:"popLayout",children:t.columns.map(W=>a.jsx(QD,{col:W,dragState:_,spring:Ml,zoomLevel:c,renamingColId:N,setRenamingColId:C,renameTitle:P,setRenameTitle:b,renameColumn:B,deleteColumn:U,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:v,addCard:ue,handleCardPointerDown:te},W.id))}),i?a.jsxs(ne.div,{initial:{opacity:0,x:20,scale:.95},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:20,scale:.95},transition:Ml.enter,className:"flex-shrink-0 w-80 p-6 rounded-[2rem] bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-700 shadow-xl h-min",children:[a.jsx("input",{autoFocus:!0,value:o,onChange:W=>l(W.target.value),onKeyDown:W=>{W.key==="Enter"&&R(),W.key==="Escape"&&(s(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-900 px-4 py-4 rounded-xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-4"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:R,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Criar"}),a.jsx("button",{onClick:()=>{s(!1),l("")},className:"flex-1 bg-zinc-100 dark:bg-zinc-800 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"})]})]}):a.jsx(ne.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>s(!0),className:"flex-shrink-0 w-14 h-14 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-sm hover:shadow-lg flex items-center justify-center text-zinc-400 transition-all",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),a.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:a.jsx(ne.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Ml.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:_0.map((W,S)=>a.jsxs("button",{onClick:()=>{d(S),Y("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${c===S?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[c===S&&a.jsx(ne.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),a.jsx("span",{className:"relative z-10",children:W.label})]},S))})}),a.jsx(XD,{dragState:_,ghostX:z,ghostY:A,spring:Ml}),a.jsx(je,{children:n&&a.jsx(ZD,{card:n,onClose:()=>r(null),onUpdate:he,onDelete:()=>Ee(n.columnId,n.id),setConfirmModal:w})}),a.jsx(je,{children:y&&a.jsx(JD,{...y})}),a.jsx(je,{children:O&&sn.createPortal(a.jsxs(ne.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${O.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":O.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${O.type==="error"?"bg-white animate-pulse":O.type==="success"?"bg-white":"bg-indigo-400"}`}),a.jsx("span",{className:"text-sm font-semibold tracking-tight",children:O.message})]}),document.body)})]})}const QD=xn.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:s,renameTitle:o,setRenameTitle:l,renameColumn:c,deleteColumn:d,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:v,addCard:N,handleCardPointerDown:C})=>{var b,y;const P=((b=e.target)==null?void 0:b.colId)===t.id;return a.jsxs(ne.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`flex-shrink-0 flex flex-col snap-center ${_0[r].width} max-h-full rounded-[2rem] md:rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/60 dark:border-white/[0.06] shadow-xl shadow-black/[0.03] dark:shadow-black/20 transition-all duration-300 ${P?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}`,children:[a.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[a.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?a.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:o,onChange:w=>l(w.target.value),onBlur:()=>c(t.id),onKeyDown:w=>{w.key==="Enter"&&c(t.id),w.key==="Escape"&&s(null)}}):a.jsx("h3",{onClick:()=>{s(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),a.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),a.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[a.jsx(je,{mode:"popLayout",children:t.cards.map((w,D)=>a.jsx(YD,{card:w,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:C},w.id))}),a.jsx(je,{mode:"sync",children:e.isDragging&&P&&e.active&&(()=>{const w=t.cards.filter(D=>D.id!==e.active.id);return e.target.index>=w.length})()&&a.jsx(ne.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((y=e.active.rect)==null?void 0:y.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),h===t.id?a.jsxs(ne.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},transition:n.enter,className:"bg-white dark:bg-zinc-900 p-4 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-lg",children:[a.jsx("textarea",{autoFocus:!0,value:m,onChange:w=>v(w.target.value),onKeyDown:w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),N(t.id)),w.key==="Escape"&&p(null)},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-3",rows:2}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 text-xs font-bold uppercase tracking-wider text-zinc-500 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:()=>N(t.id),disabled:!m.trim(),className:"px-5 py-2 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 text-xs font-bold uppercase tracking-wider rounded-xl shadow-md disabled:opacity-50 hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Adicionar"})]})]}):a.jsx("button",{onClick:()=>{p(t.id),v("")},className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all",children:"+ Carto"})]})]})}),YD=xn.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:s})=>{var c,d,h,p;const o=((c=n.active)==null?void 0:c.id)===t.id,l=((d=n.target)==null?void 0:d.colId)===e;return n.isDragging&&l&&n.active,a.jsx(xn.Fragment,{children:!o&&a.jsxs(ne.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:m=>s(m,t,e),className:`relative bg-white dark:bg-zinc-900 border border-zinc-200/60 dark:border-white/[0.06] rounded-2xl ${_0[i].cardPadding} shadow-sm hover:shadow-xl dark:shadow-black/10 cursor-grab active:cursor-grabbing touch-none select-none hover:border-zinc-300 dark:hover:border-white/10 group/card`,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&a.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((m,v)=>a.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:m.color}},v))}),a.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((p=t.checklists)==null?void 0:p.length)>0&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),a.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((m,v)=>m+v.items.filter(N=>N.done).length,0),"/",t.checklists.reduce((m,v)=>m+v.items.length,0)]})]})]})})}),XD=xn.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return a.jsx(je,{children:t.isDragging&&t.active&&a.jsx(ne.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:a.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),a.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&a.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((s,o)=>a.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:s.color}},o))}),a.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function JD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return zn(!0),a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),a.jsxs(ne.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[a.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),a.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),a.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function ZD({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var b;zn(!0);const[s,o]=I.useState(t),[l,c]=I.useState(!1),[d,h]=I.useState("");I.useEffect(()=>{n(s)},[s,n]);const p=y=>{var D;const w=(D=s.labels)==null?void 0:D.find(V=>V.id===y.id);o(V=>({...V,labels:w?V.labels.filter(O=>O.id!==y.id):[...V.labels||[],y]}))},m=()=>{d.trim()&&(o(y=>({...y,checklists:[...y.checklists||[],{id:Date.now(),title:d.trim(),items:[]}]})),h(""),c(!1))},v=y=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{o(w=>({...w,checklists:w.checklists.filter(D=>D.id!==y)})),i(null)},onCancel:()=>i(null)})},N=(y,w)=>{o(D=>({...D,checklists:D.checklists.map(V=>V.id===y?{...V,items:V.items.map(O=>O.id===w?{...O,done:!O.done}:O)}:V)}))},C=(y,w)=>{w.trim()&&o(D=>({...D,checklists:D.checklists.map(V=>V.id===y?{...V,items:[...V.items,{id:Date.now(),text:w.trim(),done:!1}]}:V)}))},P=(y,w)=>{o(D=>({...D,checklists:D.checklists.map(V=>V.id===y?{...V,items:V.items.filter(O=>O.id!==w)}:V)}))};return a.jsxs(ne.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4",onClick:e,children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-xl"}),a.jsxs(ne.div,{initial:{opacity:0,y:100,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.98},transition:{type:"spring",stiffness:350,damping:30},className:"relative w-full max-w-2xl bg-white dark:bg-zinc-900 rounded-[2.5rem] shadow-2xl max-h-[85vh] flex flex-col overflow-hidden border border-zinc-200/50 dark:border-white/10",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},onClick:y=>y.stopPropagation(),children:[a.jsxs("div",{className:"shrink-0 p-6 md:p-8 border-b border-zinc-100 dark:border-white/5",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("div",{className:"flex gap-2 flex-wrap",children:GD.map(y=>{var w;return a.jsx("button",{onClick:()=>p(y),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(w=s.labels)!=null&&w.find(D=>D.id===y.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:y.color}},y.id)})}),a.jsx("button",{onClick:e,className:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 text-zinc-400 hover:text-zinc-600 dark:hover:text-white flex items-center justify-center transition-colors",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("input",{className:"w-full text-2xl md:text-3xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:s.title,onChange:y=>o(w=>({...w,title:y.target.value})),placeholder:"Ttulo do carto"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 md:p-8 space-y-8 custom-scrollbar",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),a.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:s.description||"",onChange:y=>o(w=>({...w,description:y.target.value}))})]}),(b=s.checklists)==null?void 0:b.map(y=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-3",children:[a.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:y.title}),a.jsx("button",{onClick:()=>v(y.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),a.jsx(_u,{axis:"y",values:y.items,onReorder:w=>{o(D=>({...D,checklists:D.checklists.map(V=>V.id===y.id?{...V,items:w}:V)}))},className:"space-y-2",children:y.items.map(w=>a.jsxs(Nu,{value:w,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[a.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),a.jsx("button",{onClick:()=>N(y.id,w.id),className:`w-5 h-5 rounded-lg border-2 flex items-center justify-center transition-all ${w.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:w.done&&a.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),a.jsx("span",{className:`flex-1 text-sm ${w.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:w.text}),a.jsx("button",{onClick:()=>P(y.id,w.id),className:"text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},w.id))}),a.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:w=>{w.key==="Enter"&&w.target.value.trim()&&(C(y.id,w.target.value),w.target.value="")}})]},y.id)),l?a.jsxs(ne.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[a.jsx("input",{autoFocus:!0,value:d,onChange:y=>h(y.target.value),onKeyDown:y=>{y.key==="Enter"&&m(),y.key==="Escape"&&c(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:m,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),a.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):a.jsx("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 transition-colors",children:"+ Nova Checklist"}),a.jsx("div",{className:"pt-6 border-t border-zinc-100 dark:border-white/5",children:a.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20",children:"Excluir Carto"})})]})]})]})}const e9=[{key:"kanban",label:"Kanban",icon:t9},{key:"recipes",label:"Receitas",icon:n9},{key:"inventory",label:"Estoque",icon:r9},{key:"costs",label:"Financeiro",icon:i9},{key:"ficha",label:"Ficha",icon:s9},{key:"calculator",label:"Produo",icon:o9}];function t9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function n9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function r9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function i9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function s9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function o9({active:t}){return a.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}const Zi={type:"spring",stiffness:500,damping:35,mass:.8},a9={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function l9(){const[t,e]=I.useState("pct"),[n,r]=I.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[i,s]=I.useState(!1);I.useEffect(()=>{s(!0)},[]);const o=l=>{l!==n&&(r(l),localStorage.setItem("padoca_view",l))};return a.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${i?"opacity-100":"opacity-0"}`,children:[a.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[a.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),a.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),a.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),a.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[a.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-4 pb-4 mb-6 md:relative md:pt-8 md:mb-8",children:[a.jsx(ne.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),a.jsxs("div",{className:"relative flex flex-col gap-5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(ne.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...Zi},children:[a.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),a.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),a.jsx(ne.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...Zi},className:"hidden md:flex items-center gap-3",children:a.jsx(je,{mode:"wait",children:n==="calculator"&&a.jsx(ne.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:Zi,children:a.jsx(Uy,{value:t,onChange:e})})})})]}),a.jsxs("nav",{className:"flex items-center gap-2",children:[a.jsx(ne.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...Zi},className:"flex-1 flex items-center gap-1 p-1.5 bg-zinc-100/90 dark:bg-zinc-900/90 backdrop-blur-xl rounded-2xl overflow-x-auto scrollbar-hidden border border-zinc-200/50 dark:border-white/5 shadow-sm",children:e9.map(({key:l,label:c,icon:d})=>{const h=n===l;return a.jsxs("button",{onClick:()=>o(l),className:`relative flex-1 md:flex-none flex items-center justify-center gap-2 px-4 md:px-5 py-3 text-[10px] md:text-[11px] font-semibold rounded-xl transition-all duration-200 whitespace-nowrap min-w-[60px] ${h?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-200"}`,children:[h&&a.jsx(ne.div,{layoutId:"nav-active",className:"absolute inset-0 bg-white dark:bg-zinc-800 rounded-xl shadow-lg shadow-zinc-900/5 dark:shadow-black/20",transition:Zi}),a.jsx("span",{className:"relative z-10 hidden md:block",children:a.jsx(d,{active:h})}),a.jsx("span",{className:"relative z-10 uppercase tracking-wider",children:c})]},l)})}),a.jsx(je,{mode:"wait",children:n==="calculator"&&a.jsx(ne.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:Zi,className:"md:hidden flex-shrink-0",children:a.jsx(Uy,{value:t,onChange:e})})})]})]})]}),a.jsx(je,{mode:"wait",children:a.jsx(ne.main,{initial:"initial",animate:"enter",exit:"exit",variants:a9,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="kanban"?a.jsx(KD,{}):n==="recipes"?a.jsx(UD,{}):n==="inventory"?a.jsx(Q6,{}):n==="costs"?a.jsx(G6,{}):n==="ficha"?a.jsx(J6,{}):a.jsx(nD,{inputMode:t,setInputMode:e})},n)})]})]})}class c9 extends xn.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:a.jsxs("div",{className:"max-w-md text-center",children:[a.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:a.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),a.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}dh.createRoot(document.getElementById("root")).render(a.jsx(xn.StrictMode,{children:a.jsx(c9,{children:a.jsx(l9,{})})}));
