(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function V1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var L1={exports:{}},vu={},O1={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var el=Symbol.for("react.element"),NN=Symbol.for("react.portal"),_N=Symbol.for("react.fragment"),zN=Symbol.for("react.strict_mode"),CN=Symbol.for("react.profiler"),EN=Symbol.for("react.provider"),SN=Symbol.for("react.context"),TN=Symbol.for("react.forward_ref"),IN=Symbol.for("react.suspense"),AN=Symbol.for("react.memo"),PN=Symbol.for("react.lazy"),zg=Symbol.iterator;function RN(t){return t===null||typeof t!="object"?null:(t=zg&&t[zg]||t["@@iterator"],typeof t=="function"?t:null)}var F1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B1=Object.assign,U1={};function co(t,e,n){this.props=t,this.context=e,this.refs=U1,this.updater=n||F1}co.prototype.isReactComponent={};co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $1(){}$1.prototype=co.prototype;function bf(t,e,n){this.props=t,this.context=e,this.refs=U1,this.updater=n||F1}var wf=bf.prototype=new $1;wf.constructor=bf;B1(wf,co.prototype);wf.isPureReactComponent=!0;var Cg=Array.isArray,W1=Object.prototype.hasOwnProperty,kf={current:null},q1={key:!0,ref:!0,__self:!0,__source:!0};function H1(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)W1.call(e,r)&&!q1.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];i.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:el,type:t,key:o,ref:a,props:i,_owner:kf.current}}function DN(t,e){return{$$typeof:el,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function jf(t){return typeof t=="object"&&t!==null&&t.$$typeof===el}function MN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Eg=/\/+/g;function vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?MN(""+t.key):e.toString(36)}function tc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case el:case NN:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+vd(a,0):r,Cg(i)?(n="",t!=null&&(n=t.replace(Eg,"$&/")+"/"),tc(i,e,n,"",function(d){return d})):i!=null&&(jf(i)&&(i=DN(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Eg,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Cg(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+vd(o,l);a+=tc(o,e,n,c,i)}else if(c=RN(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+vd(o,l++),a+=tc(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Cl(t,e,n){if(t==null)return t;var r=[],i=0;return tc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function VN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nn={current:null},nc={transition:null},LN={ReactCurrentDispatcher:nn,ReactCurrentBatchConfig:nc,ReactCurrentOwner:kf};function G1(){throw Error("act(...) is not supported in production builds of React.")}Re.Children={map:Cl,forEach:function(t,e,n){Cl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cl(t,function(){e++}),e},toArray:function(t){return Cl(t,function(e){return e})||[]},only:function(t){if(!jf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Re.Component=co;Re.Fragment=_N;Re.Profiler=CN;Re.PureComponent=bf;Re.StrictMode=zN;Re.Suspense=IN;Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LN;Re.act=G1;Re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=B1({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=kf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)W1.call(e,c)&&!q1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:el,type:t.type,key:i,ref:o,props:r,_owner:a}};Re.createContext=function(t){return t={$$typeof:SN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:EN,_context:t},t.Consumer=t};Re.createElement=H1;Re.createFactory=function(t){var e=H1.bind(null,t);return e.type=t,e};Re.createRef=function(){return{current:null}};Re.forwardRef=function(t){return{$$typeof:TN,render:t}};Re.isValidElement=jf;Re.lazy=function(t){return{$$typeof:PN,_payload:{_status:-1,_result:t},_init:VN}};Re.memo=function(t,e){return{$$typeof:AN,type:t,compare:e===void 0?null:e}};Re.startTransition=function(t){var e=nc.transition;nc.transition={};try{t()}finally{nc.transition=e}};Re.unstable_act=G1;Re.useCallback=function(t,e){return nn.current.useCallback(t,e)};Re.useContext=function(t){return nn.current.useContext(t)};Re.useDebugValue=function(){};Re.useDeferredValue=function(t){return nn.current.useDeferredValue(t)};Re.useEffect=function(t,e){return nn.current.useEffect(t,e)};Re.useId=function(){return nn.current.useId()};Re.useImperativeHandle=function(t,e,n){return nn.current.useImperativeHandle(t,e,n)};Re.useInsertionEffect=function(t,e){return nn.current.useInsertionEffect(t,e)};Re.useLayoutEffect=function(t,e){return nn.current.useLayoutEffect(t,e)};Re.useMemo=function(t,e){return nn.current.useMemo(t,e)};Re.useReducer=function(t,e,n){return nn.current.useReducer(t,e,n)};Re.useRef=function(t){return nn.current.useRef(t)};Re.useState=function(t){return nn.current.useState(t)};Re.useSyncExternalStore=function(t,e,n){return nn.current.useSyncExternalStore(t,e,n)};Re.useTransition=function(){return nn.current.useTransition()};Re.version="18.3.1";O1.exports=Re;var k=O1.exports;const In=V1(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ON=k,FN=Symbol.for("react.element"),BN=Symbol.for("react.fragment"),UN=Object.prototype.hasOwnProperty,$N=ON.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WN={key:!0,ref:!0,__self:!0,__source:!0};function K1(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)UN.call(e,r)&&!WN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:FN,type:t,key:o,ref:a,props:i,_owner:$N.current}}vu.Fragment=BN;vu.jsx=K1;vu.jsxs=K1;L1.exports=vu;var s=L1.exports,zh={},Q1={exports:{}},bn={},Y1={exports:{}},X1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(Y,le){var Z=Y.length;Y.push(le);e:for(;0<Z;){var ve=Z-1>>>1,xe=Y[ve];if(0<i(xe,le))Y[ve]=le,Y[Z]=xe,Z=ve;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var le=Y[0],Z=Y.pop();if(Z!==le){Y[0]=Z;e:for(var ve=0,xe=Y.length,Pe=xe>>>1;ve<Pe;){var D=2*(ve+1)-1,$=Y[D],W=D+1,se=Y[W];if(0>i($,Z))W<xe&&0>i(se,$)?(Y[ve]=se,Y[W]=Z,ve=W):(Y[ve]=$,Y[D]=Z,ve=D);else if(W<xe&&0>i(se,Z))Y[ve]=se,Y[W]=Z,ve=W;else break e}}return le}function i(Y,le){var Z=Y.sortIndex-le.sortIndex;return Z!==0?Z:Y.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],h=1,f=null,m=3,y=!1,_=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Y){for(var le=n(d);le!==null;){if(le.callback===null)r(d);else if(le.startTime<=Y)r(d),le.sortIndex=le.expirationTime,e(c,le);else break;le=n(d)}}function R(Y){if(A=!1,j(Y),!_)if(n(c)!==null)_=!0,ye(L);else{var le=n(d);le!==null&&we(R,le.startTime-Y)}}function L(Y,le){_=!1,A&&(A=!1,w(x),x=-1),y=!0;var Z=m;try{for(j(le),f=n(c);f!==null&&(!(f.expirationTime>le)||Y&&!z());){var ve=f.callback;if(typeof ve=="function"){f.callback=null,m=f.priorityLevel;var xe=ve(f.expirationTime<=le);le=t.unstable_now(),typeof xe=="function"?f.callback=xe:f===n(c)&&r(c),j(le)}else r(c);f=n(c)}if(f!==null)var Pe=!0;else{var D=n(d);D!==null&&we(R,D.startTime-le),Pe=!1}return Pe}finally{f=null,m=Z,y=!1}}var V=!1,v=null,x=-1,N=5,C=-1;function z(){return!(t.unstable_now()-C<N)}function I(){if(v!==null){var Y=t.unstable_now();C=Y;var le=!0;try{le=v(!0,Y)}finally{le?S():(V=!1,v=null)}}else V=!1}var S;if(typeof b=="function")S=function(){b(I)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ue=ke.port2;ke.port1.onmessage=I,S=function(){ue.postMessage(null)}}else S=function(){P(I,0)};function ye(Y){v=Y,V||(V=!0,S())}function we(Y,le){x=P(function(){Y(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Y){Y.callback=null},t.unstable_continueExecution=function(){_||y||(_=!0,ye(L))},t.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Y?Math.floor(1e3/Y):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(Y){switch(m){case 1:case 2:case 3:var le=3;break;default:le=m}var Z=m;m=le;try{return Y()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Y,le){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var Z=m;m=Y;try{return le()}finally{m=Z}},t.unstable_scheduleCallback=function(Y,le,Z){var ve=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ve+Z:ve):Z=ve,Y){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=Z+xe,Y={id:h++,callback:le,priorityLevel:Y,startTime:Z,expirationTime:xe,sortIndex:-1},Z>ve?(Y.sortIndex=Z,e(d,Y),n(c)===null&&Y===n(d)&&(A?(w(x),x=-1):A=!0,we(R,Z-ve))):(Y.sortIndex=xe,e(c,Y),_||y||(_=!0,ye(L))),Y},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(Y){var le=m;return function(){var Z=m;m=le;try{return Y.apply(this,arguments)}finally{m=Z}}}})(X1);Y1.exports=X1;var qN=Y1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HN=k,vn=qN;function ie(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var J1=new Set,ja={};function is(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(ja[t]=e,t=0;t<e.length;t++)J1.add(e[t])}var kr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ch=Object.prototype.hasOwnProperty,GN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Sg={},Tg={};function KN(t){return Ch.call(Tg,t)?!0:Ch.call(Sg,t)?!1:GN.test(t)?Tg[t]=!0:(Sg[t]=!0,!1)}function QN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YN(t,e,n,r){if(e===null||typeof e>"u"||QN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rn(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ft[t]=new rn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ft[e]=new rn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ft[t]=new rn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ft[t]=new rn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ft[t]=new rn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ft[t]=new rn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ft[t]=new rn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ft[t]=new rn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ft[t]=new rn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nf=/[\-:]([a-z])/g;function _f(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nf,_f);Ft[e]=new rn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nf,_f);Ft[e]=new rn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nf,_f);Ft[e]=new rn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ft[t]=new rn(t,1,!1,t.toLowerCase(),null,!1,!1)});Ft.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ft[t]=new rn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zf(t,e,n,r){var i=Ft.hasOwnProperty(e)?Ft[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YN(e,n,i,r)&&(n=null),r||i===null?KN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rr=HN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,El=Symbol.for("react.element"),bs=Symbol.for("react.portal"),ws=Symbol.for("react.fragment"),Cf=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),Z1=Symbol.for("react.provider"),eb=Symbol.for("react.context"),Ef=Symbol.for("react.forward_ref"),Sh=Symbol.for("react.suspense"),Th=Symbol.for("react.suspense_list"),Sf=Symbol.for("react.memo"),Wr=Symbol.for("react.lazy"),tb=Symbol.for("react.offscreen"),Ig=Symbol.iterator;function Do(t){return t===null||typeof t!="object"?null:(t=Ig&&t[Ig]||t["@@iterator"],typeof t=="function"?t:null)}var ct=Object.assign,bd;function Qo(t){if(bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bd=e&&e[1]||""}return`
`+bd+t}var wd=!1;function kd(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var i=d.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,l=o.length-1;1<=a&&0<=l&&i[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(i[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||i[a]!==o[l]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qo(t):""}function XN(t){switch(t.tag){case 5:return Qo(t.type);case 16:return Qo("Lazy");case 13:return Qo("Suspense");case 19:return Qo("SuspenseList");case 0:case 2:case 15:return t=kd(t.type,!1),t;case 11:return t=kd(t.type.render,!1),t;case 1:return t=kd(t.type,!0),t;default:return""}}function Ih(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ws:return"Fragment";case bs:return"Portal";case Eh:return"Profiler";case Cf:return"StrictMode";case Sh:return"Suspense";case Th:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case eb:return(t.displayName||"Context")+".Consumer";case Z1:return(t._context.displayName||"Context")+".Provider";case Ef:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sf:return e=t.displayName||null,e!==null?e:Ih(t.type)||"Memo";case Wr:e=t._payload,t=t._init;try{return Ih(t(e))}catch{}}return null}function JN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ih(e);case 8:return e===Cf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function nb(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZN(t){var e=nb(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sl(t){t._valueTracker||(t._valueTracker=ZN(t))}function rb(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=nb(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Ah(t,e){var n=e.checked;return ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ag(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ib(t,e){e=e.checked,e!=null&&zf(t,"checked",e,!1)}function Ph(t,e){ib(t,e);var n=ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Rh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Rh(t,e.type,ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Pg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Rh(t,e,n){(e!=="number"||Cc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yo=Array.isArray;function Vs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ci(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ie(91));return ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Rg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ie(92));if(Yo(n)){if(1<n.length)throw Error(ie(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ci(n)}}function sb(t,e){var n=ci(e.value),r=ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Dg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ob(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ob(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tl,ab=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ia={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},e4=["Webkit","ms","Moz","O"];Object.keys(ia).forEach(function(t){e4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ia[e]=ia[t]})});function lb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ia.hasOwnProperty(t)&&ia[t]?(""+e).trim():e+"px"}function cb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=lb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var t4=ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vh(t,e){if(e){if(t4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ie(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ie(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ie(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ie(62))}}function Lh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oh=null;function Tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,Ls=null,Os=null;function Mg(t){if(t=rl(t)){if(typeof Fh!="function")throw Error(ie(280));var e=t.stateNode;e&&(e=Nu(e),Fh(t.stateNode,t.type,e))}}function ub(t){Ls?Os?Os.push(t):Os=[t]:Ls=t}function db(){if(Ls){var t=Ls,e=Os;if(Os=Ls=null,Mg(t),e)for(t=0;t<e.length;t++)Mg(e[t])}}function hb(t,e){return t(e)}function fb(){}var jd=!1;function mb(t,e,n){if(jd)return t(e,n);jd=!0;try{return hb(t,e,n)}finally{jd=!1,(Ls!==null||Os!==null)&&(fb(),db())}}function _a(t,e){var n=t.stateNode;if(n===null)return null;var r=Nu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ie(231,e,typeof n));return n}var Bh=!1;if(kr)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{Bh=!1}function n4(t,e,n,r,i,o,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var sa=!1,Ec=null,Sc=!1,Uh=null,r4={onError:function(t){sa=!0,Ec=t}};function i4(t,e,n,r,i,o,a,l,c){sa=!1,Ec=null,n4.apply(r4,arguments)}function s4(t,e,n,r,i,o,a,l,c){if(i4.apply(this,arguments),sa){if(sa){var d=Ec;sa=!1,Ec=null}else throw Error(ie(198));Sc||(Sc=!0,Uh=d)}}function ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vg(t){if(ss(t)!==t)throw Error(ie(188))}function o4(t){var e=t.alternate;if(!e){if(e=ss(t),e===null)throw Error(ie(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Vg(i),t;if(o===r)return Vg(i),e;o=o.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(n.tag!==3)throw Error(ie(188));return n.stateNode.current===n?t:e}function gb(t){return t=o4(t),t!==null?xb(t):null}function xb(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=xb(t);if(e!==null)return e;t=t.sibling}return null}var yb=vn.unstable_scheduleCallback,Lg=vn.unstable_cancelCallback,a4=vn.unstable_shouldYield,l4=vn.unstable_requestPaint,gt=vn.unstable_now,c4=vn.unstable_getCurrentPriorityLevel,If=vn.unstable_ImmediatePriority,vb=vn.unstable_UserBlockingPriority,Tc=vn.unstable_NormalPriority,u4=vn.unstable_LowPriority,bb=vn.unstable_IdlePriority,bu=null,nr=null;function d4(t){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(bu,t,void 0,(t.current.flags&128)===128)}catch{}}var Wn=Math.clz32?Math.clz32:m4,h4=Math.log,f4=Math.LN2;function m4(t){return t>>>=0,t===0?32:31-(h4(t)/f4|0)|0}var Il=64,Al=4194304;function Xo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ic(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~i;l!==0?r=Xo(l):(o&=a,o!==0&&(r=Xo(o)))}else a=n&~i,a!==0?r=Xo(a):o!==0&&(r=Xo(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wn(e),i=1<<n,r|=t[n],e&=~i;return r}function p4(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function g4(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Wn(o),l=1<<a,c=i[a];c===-1?(!(l&n)||l&r)&&(i[a]=p4(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function $h(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wb(){var t=Il;return Il<<=1,!(Il&4194240)&&(Il=64),t}function Nd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wn(e),t[e]=n}function x4(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Af(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var He=0;function kb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var jb,Pf,Nb,_b,zb,Wh=!1,Pl=[],Xr=null,Jr=null,Zr=null,za=new Map,Ca=new Map,Hr=[],y4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Og(t,e){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Jr=null;break;case"mouseover":case"mouseout":Zr=null;break;case"pointerover":case"pointerout":za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(e.pointerId)}}function Vo(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=rl(e),e!==null&&Pf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function v4(t,e,n,r,i){switch(e){case"focusin":return Xr=Vo(Xr,t,e,n,r,i),!0;case"dragenter":return Jr=Vo(Jr,t,e,n,r,i),!0;case"mouseover":return Zr=Vo(Zr,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return za.set(o,Vo(za.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ca.set(o,Vo(Ca.get(o)||null,t,e,n,r,i)),!0}return!1}function Cb(t){var e=Mi(t.target);if(e!==null){var n=ss(e);if(n!==null){if(e=n.tag,e===13){if(e=pb(n),e!==null){t.blockedOn=e,zb(t.priority,function(){Nb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=qh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Oh=r,n.target.dispatchEvent(r),Oh=null}else return e=rl(n),e!==null&&Pf(e),t.blockedOn=n,!1;e.shift()}return!0}function Fg(t,e,n){rc(t)&&n.delete(e)}function b4(){Wh=!1,Xr!==null&&rc(Xr)&&(Xr=null),Jr!==null&&rc(Jr)&&(Jr=null),Zr!==null&&rc(Zr)&&(Zr=null),za.forEach(Fg),Ca.forEach(Fg)}function Lo(t,e){t.blockedOn===e&&(t.blockedOn=null,Wh||(Wh=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,b4)))}function Ea(t){function e(i){return Lo(i,t)}if(0<Pl.length){Lo(Pl[0],t);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Xr!==null&&Lo(Xr,t),Jr!==null&&Lo(Jr,t),Zr!==null&&Lo(Zr,t),za.forEach(e),Ca.forEach(e),n=0;n<Hr.length;n++)r=Hr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Hr.length&&(n=Hr[0],n.blockedOn===null);)Cb(n),n.blockedOn===null&&Hr.shift()}var Fs=Rr.ReactCurrentBatchConfig,Ac=!0;function w4(t,e,n,r){var i=He,o=Fs.transition;Fs.transition=null;try{He=1,Rf(t,e,n,r)}finally{He=i,Fs.transition=o}}function k4(t,e,n,r){var i=He,o=Fs.transition;Fs.transition=null;try{He=4,Rf(t,e,n,r)}finally{He=i,Fs.transition=o}}function Rf(t,e,n,r){if(Ac){var i=qh(t,e,n,r);if(i===null)Rd(t,e,r,Pc,n),Og(t,r);else if(v4(i,t,e,n,r))r.stopPropagation();else if(Og(t,r),e&4&&-1<y4.indexOf(t)){for(;i!==null;){var o=rl(i);if(o!==null&&jb(o),o=qh(t,e,n,r),o===null&&Rd(t,e,r,Pc,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Rd(t,e,r,null,n)}}var Pc=null;function qh(t,e,n,r){if(Pc=null,t=Tf(r),t=Mi(t),t!==null)if(e=ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pc=t,null}function Eb(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(c4()){case If:return 1;case vb:return 4;case Tc:case u4:return 16;case bb:return 536870912;default:return 16}default:return 16}}var Kr=null,Df=null,ic=null;function Sb(){if(ic)return ic;var t,e=Df,n=e.length,r,i="value"in Kr?Kr.value:Kr.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return ic=i.slice(t,1<r?1-r:void 0)}function sc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function Bg(){return!1}function wn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Rl:Bg,this.isPropagationStopped=Bg,this}return ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=wn(uo),nl=ct({},uo,{view:0,detail:0}),j4=wn(nl),_d,zd,Oo,wu=ct({},nl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(_d=t.screenX-Oo.screenX,zd=t.screenY-Oo.screenY):zd=_d=0,Oo=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:zd}}),Ug=wn(wu),N4=ct({},wu,{dataTransfer:0}),_4=wn(N4),z4=ct({},nl,{relatedTarget:0}),Cd=wn(z4),C4=ct({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),E4=wn(C4),S4=ct({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),T4=wn(S4),I4=ct({},uo,{data:0}),$g=wn(I4),A4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},P4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},R4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function D4(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=R4[t])?!!e[t]:!1}function Vf(){return D4}var M4=ct({},nl,{key:function(t){if(t.key){var e=A4[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?P4[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vf,charCode:function(t){return t.type==="keypress"?sc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),V4=wn(M4),L4=ct({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wg=wn(L4),O4=ct({},nl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vf}),F4=wn(O4),B4=ct({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),U4=wn(B4),$4=ct({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),W4=wn($4),q4=[9,13,27,32],Lf=kr&&"CompositionEvent"in window,oa=null;kr&&"documentMode"in document&&(oa=document.documentMode);var H4=kr&&"TextEvent"in window&&!oa,Tb=kr&&(!Lf||oa&&8<oa&&11>=oa),qg=" ",Hg=!1;function Ib(t,e){switch(t){case"keyup":return q4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ab(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function G4(t,e){switch(t){case"compositionend":return Ab(e);case"keypress":return e.which!==32?null:(Hg=!0,qg);case"textInput":return t=e.data,t===qg&&Hg?null:t;default:return null}}function K4(t,e){if(ks)return t==="compositionend"||!Lf&&Ib(t,e)?(t=Sb(),ic=Df=Kr=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tb&&e.locale!=="ko"?null:e.data;default:return null}}var Q4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Q4[t.type]:e==="textarea"}function Pb(t,e,n,r){ub(r),e=Rc(e,"onChange"),0<e.length&&(n=new Mf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var aa=null,Sa=null;function Y4(t){Wb(t,0)}function ku(t){var e=_s(t);if(rb(e))return t}function X4(t,e){if(t==="change")return e}var Rb=!1;if(kr){var Ed;if(kr){var Sd="oninput"in document;if(!Sd){var Kg=document.createElement("div");Kg.setAttribute("oninput","return;"),Sd=typeof Kg.oninput=="function"}Ed=Sd}else Ed=!1;Rb=Ed&&(!document.documentMode||9<document.documentMode)}function Qg(){aa&&(aa.detachEvent("onpropertychange",Db),Sa=aa=null)}function Db(t){if(t.propertyName==="value"&&ku(Sa)){var e=[];Pb(e,Sa,t,Tf(t)),mb(Y4,e)}}function J4(t,e,n){t==="focusin"?(Qg(),aa=e,Sa=n,aa.attachEvent("onpropertychange",Db)):t==="focusout"&&Qg()}function Z4(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(Sa)}function e_(t,e){if(t==="click")return ku(e)}function t_(t,e){if(t==="input"||t==="change")return ku(e)}function n_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Hn=typeof Object.is=="function"?Object.is:n_;function Ta(t,e){if(Hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ch.call(e,i)||!Hn(t[i],e[i]))return!1}return!0}function Yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var n=Yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Yg(n)}}function Mb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Mb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Vb(){for(var t=window,e=Cc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cc(t.document)}return e}function Of(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function r_(t){var e=Vb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Mb(n.ownerDocument.documentElement,n)){if(r!==null&&Of(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Xg(n,o);var a=Xg(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i_=kr&&"documentMode"in document&&11>=document.documentMode,js=null,Hh=null,la=null,Gh=!1;function Jg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Gh||js==null||js!==Cc(r)||(r=js,"selectionStart"in r&&Of(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),la&&Ta(la,r)||(la=r,r=Rc(Hh,"onSelect"),0<r.length&&(e=new Mf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=js)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},Td={},Lb={};kr&&(Lb=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function ju(t){if(Td[t])return Td[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Lb)return Td[t]=e[n];return t}var Ob=ju("animationend"),Fb=ju("animationiteration"),Bb=ju("animationstart"),Ub=ju("transitionend"),$b=new Map,Zg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bi(t,e){$b.set(t,e),is(e,[t])}for(var Id=0;Id<Zg.length;Id++){var Ad=Zg[Id],s_=Ad.toLowerCase(),o_=Ad[0].toUpperCase()+Ad.slice(1);bi(s_,"on"+o_)}bi(Ob,"onAnimationEnd");bi(Fb,"onAnimationIteration");bi(Bb,"onAnimationStart");bi("dblclick","onDoubleClick");bi("focusin","onFocus");bi("focusout","onBlur");bi(Ub,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),a_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function ex(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,s4(r,e,void 0,t),t.currentTarget=null}function Wb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==o&&i.isPropagationStopped())break e;ex(i,l,d),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==o&&i.isPropagationStopped())break e;ex(i,l,d),o=c}}}if(Sc)throw t=Uh,Sc=!1,Uh=null,t}function Ze(t,e){var n=e[Jh];n===void 0&&(n=e[Jh]=new Set);var r=t+"__bubble";n.has(r)||(qb(e,t,2,!1),n.add(r))}function Pd(t,e,n){var r=0;e&&(r|=4),qb(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Ia(t){if(!t[Ml]){t[Ml]=!0,J1.forEach(function(n){n!=="selectionchange"&&(a_.has(n)||Pd(n,!1,t),Pd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,Pd("selectionchange",!1,e))}}function qb(t,e,n,r){switch(Eb(e)){case 1:var i=w4;break;case 4:i=k4;break;default:i=Rf}n=i.bind(null,e,n,t),i=void 0,!Bh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Rd(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;l!==null;){if(a=Mi(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}mb(function(){var d=o,h=Tf(n),f=[];e:{var m=$b.get(t);if(m!==void 0){var y=Mf,_=t;switch(t){case"keypress":if(sc(n)===0)break e;case"keydown":case"keyup":y=V4;break;case"focusin":_="focus",y=Cd;break;case"focusout":_="blur",y=Cd;break;case"beforeblur":case"afterblur":y=Cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=_4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=F4;break;case Ob:case Fb:case Bb:y=E4;break;case Ub:y=U4;break;case"scroll":y=j4;break;case"wheel":y=W4;break;case"copy":case"cut":case"paste":y=T4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Wg}var A=(e&4)!==0,P=!A&&t==="scroll",w=A?m!==null?m+"Capture":null:m;A=[];for(var b=d,j;b!==null;){j=b;var R=j.stateNode;if(j.tag===5&&R!==null&&(j=R,w!==null&&(R=_a(b,w),R!=null&&A.push(Aa(b,R,j)))),P)break;b=b.return}0<A.length&&(m=new y(m,_,null,n,h),f.push({event:m,listeners:A}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Oh&&(_=n.relatedTarget||n.fromElement)&&(Mi(_)||_[jr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(_=n.relatedTarget||n.toElement,y=d,_=_?Mi(_):null,_!==null&&(P=ss(_),_!==P||_.tag!==5&&_.tag!==6)&&(_=null)):(y=null,_=d),y!==_)){if(A=Ug,R="onMouseLeave",w="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(A=Wg,R="onPointerLeave",w="onPointerEnter",b="pointer"),P=y==null?m:_s(y),j=_==null?m:_s(_),m=new A(R,b+"leave",y,n,h),m.target=P,m.relatedTarget=j,R=null,Mi(h)===d&&(A=new A(w,b+"enter",_,n,h),A.target=j,A.relatedTarget=P,R=A),P=R,y&&_)t:{for(A=y,w=_,b=0,j=A;j;j=ms(j))b++;for(j=0,R=w;R;R=ms(R))j++;for(;0<b-j;)A=ms(A),b--;for(;0<j-b;)w=ms(w),j--;for(;b--;){if(A===w||w!==null&&A===w.alternate)break t;A=ms(A),w=ms(w)}A=null}else A=null;y!==null&&tx(f,m,y,A,!1),_!==null&&P!==null&&tx(f,P,_,A,!0)}}e:{if(m=d?_s(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var L=X4;else if(Gg(m))if(Rb)L=t_;else{L=Z4;var V=J4}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=e_);if(L&&(L=L(t,d))){Pb(f,L,n,h);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&Rh(m,"number",m.value)}switch(V=d?_s(d):window,t){case"focusin":(Gg(V)||V.contentEditable==="true")&&(js=V,Hh=d,la=null);break;case"focusout":la=Hh=js=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,Jg(f,n,h);break;case"selectionchange":if(i_)break;case"keydown":case"keyup":Jg(f,n,h)}var v;if(Lf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ks?Ib(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Tb&&n.locale!=="ko"&&(ks||x!=="onCompositionStart"?x==="onCompositionEnd"&&ks&&(v=Sb()):(Kr=h,Df="value"in Kr?Kr.value:Kr.textContent,ks=!0)),V=Rc(d,x),0<V.length&&(x=new $g(x,t,null,n,h),f.push({event:x,listeners:V}),v?x.data=v:(v=Ab(n),v!==null&&(x.data=v)))),(v=H4?G4(t,n):K4(t,n))&&(d=Rc(d,"onBeforeInput"),0<d.length&&(h=new $g("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=v))}Wb(f,e)})}function Aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Rc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=_a(t,n),o!=null&&r.unshift(Aa(t,o,i)),o=_a(t,e),o!=null&&r.push(Aa(t,o,i))),t=t.return}return r}function ms(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tx(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,i?(c=_a(n,o),c!=null&&a.unshift(Aa(n,c,l))):i||(c=_a(n,o),c!=null&&a.push(Aa(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var l_=/\r\n?/g,c_=/\u0000|\uFFFD/g;function nx(t){return(typeof t=="string"?t:""+t).replace(l_,`
`).replace(c_,"")}function Vl(t,e,n){if(e=nx(e),nx(t)!==e&&n)throw Error(ie(425))}function Dc(){}var Kh=null,Qh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,u_=typeof clearTimeout=="function"?clearTimeout:void 0,rx=typeof Promise=="function"?Promise:void 0,d_=typeof queueMicrotask=="function"?queueMicrotask:typeof rx<"u"?function(t){return rx.resolve(null).then(t).catch(h_)}:Xh;function h_(t){setTimeout(function(){throw t})}function Dd(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ea(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ea(e)}function ei(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ix(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),tr="__reactFiber$"+ho,Pa="__reactProps$"+ho,jr="__reactContainer$"+ho,Jh="__reactEvents$"+ho,f_="__reactListeners$"+ho,m_="__reactHandles$"+ho;function Mi(t){var e=t[tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jr]||n[tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ix(t);t!==null;){if(n=t[tr])return n;t=ix(t)}return e}t=n,n=t.parentNode}return null}function rl(t){return t=t[tr]||t[jr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ie(33))}function Nu(t){return t[Pa]||null}var Zh=[],zs=-1;function wi(t){return{current:t}}function tt(t){0>zs||(t.current=Zh[zs],Zh[zs]=null,zs--)}function Xe(t,e){zs++,Zh[zs]=t.current,t.current=e}var ui={},Kt=wi(ui),dn=wi(!1),Ki=ui;function Qs(t,e){var n=t.type.contextTypes;if(!n)return ui;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function hn(t){return t=t.childContextTypes,t!=null}function Mc(){tt(dn),tt(Kt)}function sx(t,e,n){if(Kt.current!==ui)throw Error(ie(168));Xe(Kt,e),Xe(dn,n)}function Hb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ie(108,JN(t)||"Unknown",i));return ct({},n,r)}function Vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ui,Ki=Kt.current,Xe(Kt,t),Xe(dn,dn.current),!0}function ox(t,e,n){var r=t.stateNode;if(!r)throw Error(ie(169));n?(t=Hb(t,e,Ki),r.__reactInternalMemoizedMergedChildContext=t,tt(dn),tt(Kt),Xe(Kt,t)):tt(dn),Xe(dn,n)}var xr=null,_u=!1,Md=!1;function Gb(t){xr===null?xr=[t]:xr.push(t)}function p_(t){_u=!0,Gb(t)}function ki(){if(!Md&&xr!==null){Md=!0;var t=0,e=He;try{var n=xr;for(He=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xr=null,_u=!1}catch(i){throw xr!==null&&(xr=xr.slice(t+1)),yb(If,ki),i}finally{He=e,Md=!1}}return null}var Cs=[],Es=0,Lc=null,Oc=0,jn=[],Nn=0,Qi=null,yr=1,vr="";function Ii(t,e){Cs[Es++]=Oc,Cs[Es++]=Lc,Lc=t,Oc=e}function Kb(t,e,n){jn[Nn++]=yr,jn[Nn++]=vr,jn[Nn++]=Qi,Qi=t;var r=yr;t=vr;var i=32-Wn(r)-1;r&=~(1<<i),n+=1;var o=32-Wn(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,yr=1<<32-Wn(e)+i|n<<i|r,vr=o+t}else yr=1<<o|n<<i|r,vr=t}function Ff(t){t.return!==null&&(Ii(t,1),Kb(t,1,0))}function Bf(t){for(;t===Lc;)Lc=Cs[--Es],Cs[Es]=null,Oc=Cs[--Es],Cs[Es]=null;for(;t===Qi;)Qi=jn[--Nn],jn[Nn]=null,vr=jn[--Nn],jn[Nn]=null,yr=jn[--Nn],jn[Nn]=null}var xn=null,gn=null,it=!1,Un=null;function Qb(t,e){var n=Cn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ax(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,xn=t,gn=ei(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,xn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qi!==null?{id:yr,overflow:vr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Cn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,xn=t,gn=null,!0):!1;default:return!1}}function e0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function t0(t){if(it){var e=gn;if(e){var n=e;if(!ax(t,e)){if(e0(t))throw Error(ie(418));e=ei(n.nextSibling);var r=xn;e&&ax(t,e)?Qb(r,n):(t.flags=t.flags&-4097|2,it=!1,xn=t)}}else{if(e0(t))throw Error(ie(418));t.flags=t.flags&-4097|2,it=!1,xn=t}}}function lx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;xn=t}function Ll(t){if(t!==xn)return!1;if(!it)return lx(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=gn)){if(e0(t))throw Yb(),Error(ie(418));for(;e;)Qb(t,e),e=ei(e.nextSibling)}if(lx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ie(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=ei(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=xn?ei(t.stateNode.nextSibling):null;return!0}function Yb(){for(var t=gn;t;)t=ei(t.nextSibling)}function Ys(){gn=xn=null,it=!1}function Uf(t){Un===null?Un=[t]:Un.push(t)}var g_=Rr.ReactCurrentBatchConfig;function Fo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=i.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ie(284));if(!n._owner)throw Error(ie(290,t))}return t}function Ol(t,e){throw t=Object.prototype.toString.call(e),Error(ie(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cx(t){var e=t._init;return e(t._payload)}function Xb(t){function e(w,b){if(t){var j=w.deletions;j===null?(w.deletions=[b],w.flags|=16):j.push(b)}}function n(w,b){if(!t)return null;for(;b!==null;)e(w,b),b=b.sibling;return null}function r(w,b){for(w=new Map;b!==null;)b.key!==null?w.set(b.key,b):w.set(b.index,b),b=b.sibling;return w}function i(w,b){return w=ii(w,b),w.index=0,w.sibling=null,w}function o(w,b,j){return w.index=j,t?(j=w.alternate,j!==null?(j=j.index,j<b?(w.flags|=2,b):j):(w.flags|=2,b)):(w.flags|=1048576,b)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,b,j,R){return b===null||b.tag!==6?(b=$d(j,w.mode,R),b.return=w,b):(b=i(b,j),b.return=w,b)}function c(w,b,j,R){var L=j.type;return L===ws?h(w,b,j.props.children,R,j.key):b!==null&&(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Wr&&cx(L)===b.type)?(R=i(b,j.props),R.ref=Fo(w,b,j),R.return=w,R):(R=hc(j.type,j.key,j.props,null,w.mode,R),R.ref=Fo(w,b,j),R.return=w,R)}function d(w,b,j,R){return b===null||b.tag!==4||b.stateNode.containerInfo!==j.containerInfo||b.stateNode.implementation!==j.implementation?(b=Wd(j,w.mode,R),b.return=w,b):(b=i(b,j.children||[]),b.return=w,b)}function h(w,b,j,R,L){return b===null||b.tag!==7?(b=Wi(j,w.mode,R,L),b.return=w,b):(b=i(b,j),b.return=w,b)}function f(w,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return b=$d(""+b,w.mode,j),b.return=w,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case El:return j=hc(b.type,b.key,b.props,null,w.mode,j),j.ref=Fo(w,null,b),j.return=w,j;case bs:return b=Wd(b,w.mode,j),b.return=w,b;case Wr:var R=b._init;return f(w,R(b._payload),j)}if(Yo(b)||Do(b))return b=Wi(b,w.mode,j,null),b.return=w,b;Ol(w,b)}return null}function m(w,b,j,R){var L=b!==null?b.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return L!==null?null:l(w,b,""+j,R);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case El:return j.key===L?c(w,b,j,R):null;case bs:return j.key===L?d(w,b,j,R):null;case Wr:return L=j._init,m(w,b,L(j._payload),R)}if(Yo(j)||Do(j))return L!==null?null:h(w,b,j,R,null);Ol(w,j)}return null}function y(w,b,j,R,L){if(typeof R=="string"&&R!==""||typeof R=="number")return w=w.get(j)||null,l(b,w,""+R,L);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case El:return w=w.get(R.key===null?j:R.key)||null,c(b,w,R,L);case bs:return w=w.get(R.key===null?j:R.key)||null,d(b,w,R,L);case Wr:var V=R._init;return y(w,b,j,V(R._payload),L)}if(Yo(R)||Do(R))return w=w.get(j)||null,h(b,w,R,L,null);Ol(b,R)}return null}function _(w,b,j,R){for(var L=null,V=null,v=b,x=b=0,N=null;v!==null&&x<j.length;x++){v.index>x?(N=v,v=null):N=v.sibling;var C=m(w,v,j[x],R);if(C===null){v===null&&(v=N);break}t&&v&&C.alternate===null&&e(w,v),b=o(C,b,x),V===null?L=C:V.sibling=C,V=C,v=N}if(x===j.length)return n(w,v),it&&Ii(w,x),L;if(v===null){for(;x<j.length;x++)v=f(w,j[x],R),v!==null&&(b=o(v,b,x),V===null?L=v:V.sibling=v,V=v);return it&&Ii(w,x),L}for(v=r(w,v);x<j.length;x++)N=y(v,w,x,j[x],R),N!==null&&(t&&N.alternate!==null&&v.delete(N.key===null?x:N.key),b=o(N,b,x),V===null?L=N:V.sibling=N,V=N);return t&&v.forEach(function(z){return e(w,z)}),it&&Ii(w,x),L}function A(w,b,j,R){var L=Do(j);if(typeof L!="function")throw Error(ie(150));if(j=L.call(j),j==null)throw Error(ie(151));for(var V=L=null,v=b,x=b=0,N=null,C=j.next();v!==null&&!C.done;x++,C=j.next()){v.index>x?(N=v,v=null):N=v.sibling;var z=m(w,v,C.value,R);if(z===null){v===null&&(v=N);break}t&&v&&z.alternate===null&&e(w,v),b=o(z,b,x),V===null?L=z:V.sibling=z,V=z,v=N}if(C.done)return n(w,v),it&&Ii(w,x),L;if(v===null){for(;!C.done;x++,C=j.next())C=f(w,C.value,R),C!==null&&(b=o(C,b,x),V===null?L=C:V.sibling=C,V=C);return it&&Ii(w,x),L}for(v=r(w,v);!C.done;x++,C=j.next())C=y(v,w,x,C.value,R),C!==null&&(t&&C.alternate!==null&&v.delete(C.key===null?x:C.key),b=o(C,b,x),V===null?L=C:V.sibling=C,V=C);return t&&v.forEach(function(I){return e(w,I)}),it&&Ii(w,x),L}function P(w,b,j,R){if(typeof j=="object"&&j!==null&&j.type===ws&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case El:e:{for(var L=j.key,V=b;V!==null;){if(V.key===L){if(L=j.type,L===ws){if(V.tag===7){n(w,V.sibling),b=i(V,j.props.children),b.return=w,w=b;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Wr&&cx(L)===V.type){n(w,V.sibling),b=i(V,j.props),b.ref=Fo(w,V,j),b.return=w,w=b;break e}n(w,V);break}else e(w,V);V=V.sibling}j.type===ws?(b=Wi(j.props.children,w.mode,R,j.key),b.return=w,w=b):(R=hc(j.type,j.key,j.props,null,w.mode,R),R.ref=Fo(w,b,j),R.return=w,w=R)}return a(w);case bs:e:{for(V=j.key;b!==null;){if(b.key===V)if(b.tag===4&&b.stateNode.containerInfo===j.containerInfo&&b.stateNode.implementation===j.implementation){n(w,b.sibling),b=i(b,j.children||[]),b.return=w,w=b;break e}else{n(w,b);break}else e(w,b);b=b.sibling}b=Wd(j,w.mode,R),b.return=w,w=b}return a(w);case Wr:return V=j._init,P(w,b,V(j._payload),R)}if(Yo(j))return _(w,b,j,R);if(Do(j))return A(w,b,j,R);Ol(w,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,b!==null&&b.tag===6?(n(w,b.sibling),b=i(b,j),b.return=w,w=b):(n(w,b),b=$d(j,w.mode,R),b.return=w,w=b),a(w)):n(w,b)}return P}var Xs=Xb(!0),Jb=Xb(!1),Fc=wi(null),Bc=null,Ss=null,$f=null;function Wf(){$f=Ss=Bc=null}function qf(t){var e=Fc.current;tt(Fc),t._currentValue=e}function n0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Bs(t,e){Bc=t,$f=Ss=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function An(t){var e=t._currentValue;if($f!==t)if(t={context:t,memoizedValue:e,next:null},Ss===null){if(Bc===null)throw Error(ie(308));Ss=t,Bc.dependencies={lanes:0,firstContext:t}}else Ss=Ss.next=t;return e}var Vi=null;function Hf(t){Vi===null?Vi=[t]:Vi.push(t)}function Zb(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Hf(e)):(n.next=i.next,i.next=n),e.interleaved=n,Nr(t,r)}function Nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var qr=!1;function Gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ew(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ti(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ue&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Nr(t,n)}return i=r.interleaved,i===null?(e.next=e,Hf(r)):(e.next=i.next,i.next=e),r.interleaved=e,Nr(t,n)}function oc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}function ux(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Uc(t,e,n,r){var i=t.updateQueue;qr=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?o=d:a.next=d,a=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(o!==null){var f=i.baseState;a=0,h=d=c=null,l=o;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,A=l;switch(m=e,y=n,A.tag){case 1:if(_=A.payload,typeof _=="function"){f=_.call(y,f,m);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,m=typeof _=="function"?_.call(y,f,m):_,m==null)break e;f=ct({},f,m);break e;case 2:qr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,a|=m;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;m=l,l=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(h===null&&(c=f),i.baseState=c,i.firstBaseUpdate=d,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Xi|=a,t.lanes=a,t.memoizedState=f}}function dx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ie(191,i));i.call(r)}}}var il={},rr=wi(il),Ra=wi(il),Da=wi(il);function Li(t){if(t===il)throw Error(ie(174));return t}function Kf(t,e){switch(Xe(Da,e),Xe(Ra,t),Xe(rr,il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Mh(e,t)}tt(rr),Xe(rr,e)}function Js(){tt(rr),tt(Ra),tt(Da)}function tw(t){Li(Da.current);var e=Li(rr.current),n=Mh(e,t.type);e!==n&&(Xe(Ra,t),Xe(rr,n))}function Qf(t){Ra.current===t&&(tt(rr),tt(Ra))}var at=wi(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vd=[];function Yf(){for(var t=0;t<Vd.length;t++)Vd[t]._workInProgressVersionPrimary=null;Vd.length=0}var ac=Rr.ReactCurrentDispatcher,Ld=Rr.ReactCurrentBatchConfig,Yi=0,lt=null,_t=null,It=null,Wc=!1,ca=!1,Ma=0,x_=0;function Ut(){throw Error(ie(321))}function Xf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Hn(t[n],e[n]))return!1;return!0}function Jf(t,e,n,r,i,o){if(Yi=o,lt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=t===null||t.memoizedState===null?w_:k_,t=n(r,i),ca){o=0;do{if(ca=!1,Ma=0,25<=o)throw Error(ie(301));o+=1,It=_t=null,e.updateQueue=null,ac.current=j_,t=n(r,i)}while(ca)}if(ac.current=qc,e=_t!==null&&_t.next!==null,Yi=0,It=_t=lt=null,Wc=!1,e)throw Error(ie(300));return t}function Zf(){var t=Ma!==0;return Ma=0,t}function Zn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?lt.memoizedState=It=t:It=It.next=t,It}function Pn(){if(_t===null){var t=lt.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=It===null?lt.memoizedState:It.next;if(e!==null)It=e,_t=t;else{if(t===null)throw Error(ie(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},It===null?lt.memoizedState=It=t:It=It.next=t}return It}function Va(t,e){return typeof e=="function"?e(t):e}function Od(t){var e=Pn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=_t,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=a=null,c=null,d=o;do{var h=d.lane;if((Yi&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,lt.lanes|=h,Xi|=h}d=d.next}while(d!==null&&d!==o);c===null?a=r:c.next=l,Hn(r,e.memoizedState)||(cn=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,lt.lanes|=o,Xi|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(ie(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Hn(o,e.memoizedState)||(cn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function nw(){}function rw(t,e){var n=lt,r=Pn(),i=e(),o=!Hn(r.memoizedState,i);if(o&&(r.memoizedState=i,cn=!0),r=r.queue,em(ow.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,La(9,sw.bind(null,n,r,i,e),void 0,null),At===null)throw Error(ie(349));Yi&30||iw(n,e,i)}return i}function iw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function sw(t,e,n,r){e.value=n,e.getSnapshot=r,aw(e)&&lw(t)}function ow(t,e,n){return n(function(){aw(e)&&lw(t)})}function aw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Hn(t,n)}catch{return!0}}function lw(t){var e=Nr(t,1);e!==null&&qn(e,t,1,-1)}function hx(t){var e=Zn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Va,lastRenderedState:t},e.queue=t,t=t.dispatch=b_.bind(null,lt,t),[e.memoizedState,t]}function La(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=lt.updateQueue,e===null?(e={lastEffect:null,stores:null},lt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function cw(){return Pn().memoizedState}function lc(t,e,n,r){var i=Zn();lt.flags|=t,i.memoizedState=La(1|e,n,void 0,r===void 0?null:r)}function zu(t,e,n,r){var i=Pn();r=r===void 0?null:r;var o=void 0;if(_t!==null){var a=_t.memoizedState;if(o=a.destroy,r!==null&&Xf(r,a.deps)){i.memoizedState=La(e,n,o,r);return}}lt.flags|=t,i.memoizedState=La(1|e,n,o,r)}function fx(t,e){return lc(8390656,8,t,e)}function em(t,e){return zu(2048,8,t,e)}function uw(t,e){return zu(4,2,t,e)}function dw(t,e){return zu(4,4,t,e)}function hw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function fw(t,e,n){return n=n!=null?n.concat([t]):null,zu(4,4,hw.bind(null,e,t),n)}function tm(){}function mw(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pw(t,e){var n=Pn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Xf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function gw(t,e,n){return Yi&21?(Hn(n,e)||(n=wb(),lt.lanes|=n,Xi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function y_(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var r=Ld.transition;Ld.transition={};try{t(!1),e()}finally{He=n,Ld.transition=r}}function xw(){return Pn().memoizedState}function v_(t,e,n){var r=ri(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},yw(t))vw(e,n);else if(n=Zb(t,e,n,r),n!==null){var i=en();qn(n,t,r,i),bw(n,e,r)}}function b_(t,e,n){var r=ri(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(yw(t))vw(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(i.hasEagerState=!0,i.eagerState=l,Hn(l,a)){var c=e.interleaved;c===null?(i.next=i,Hf(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=Zb(t,e,i,r),n!==null&&(i=en(),qn(n,t,r,i),bw(n,e,r))}}function yw(t){var e=t.alternate;return t===lt||e!==null&&e===lt}function vw(t,e){ca=Wc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function bw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Af(t,n)}}var qc={readContext:An,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useInsertionEffect:Ut,useLayoutEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useMutableSource:Ut,useSyncExternalStore:Ut,useId:Ut,unstable_isNewReconciler:!1},w_={readContext:An,useCallback:function(t,e){return Zn().memoizedState=[t,e===void 0?null:e],t},useContext:An,useEffect:fx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,lc(4194308,4,hw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return lc(4,2,t,e)},useMemo:function(t,e){var n=Zn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=v_.bind(null,lt,t),[r.memoizedState,t]},useRef:function(t){var e=Zn();return t={current:t},e.memoizedState=t},useState:hx,useDebugValue:tm,useDeferredValue:function(t){return Zn().memoizedState=t},useTransition:function(){var t=hx(!1),e=t[0];return t=y_.bind(null,t[1]),Zn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=lt,i=Zn();if(it){if(n===void 0)throw Error(ie(407));n=n()}else{if(n=e(),At===null)throw Error(ie(349));Yi&30||iw(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,fx(ow.bind(null,r,o,t),[t]),r.flags|=2048,La(9,sw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Zn(),e=At.identifierPrefix;if(it){var n=vr,r=yr;n=(r&~(1<<32-Wn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ma++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=x_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},k_={readContext:An,useCallback:mw,useContext:An,useEffect:em,useImperativeHandle:fw,useInsertionEffect:uw,useLayoutEffect:dw,useMemo:pw,useReducer:Od,useRef:cw,useState:function(){return Od(Va)},useDebugValue:tm,useDeferredValue:function(t){var e=Pn();return gw(e,_t.memoizedState,t)},useTransition:function(){var t=Od(Va)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:rw,useId:xw,unstable_isNewReconciler:!1},j_={readContext:An,useCallback:mw,useContext:An,useEffect:em,useImperativeHandle:fw,useInsertionEffect:uw,useLayoutEffect:dw,useMemo:pw,useReducer:Fd,useRef:cw,useState:function(){return Fd(Va)},useDebugValue:tm,useDeferredValue:function(t){var e=Pn();return _t===null?e.memoizedState=t:gw(e,_t.memoizedState,t)},useTransition:function(){var t=Fd(Va)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:nw,useSyncExternalStore:rw,useId:xw,unstable_isNewReconciler:!1};function Fn(t,e){if(t&&t.defaultProps){e=ct({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function r0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ct({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cu={isMounted:function(t){return(t=t._reactInternals)?ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=en(),i=ri(t),o=br(r,i);o.payload=e,n!=null&&(o.callback=n),e=ti(t,o,i),e!==null&&(qn(e,t,i,r),oc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=en(),i=ri(t),o=br(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ti(t,o,i),e!==null&&(qn(e,t,i,r),oc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=en(),r=ri(t),i=br(n,r);i.tag=2,e!=null&&(i.callback=e),e=ti(t,i,r),e!==null&&(qn(e,t,r,n),oc(e,t,r))}};function mx(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(i,o):!0}function ww(t,e,n){var r=!1,i=ui,o=e.contextType;return typeof o=="object"&&o!==null?o=An(o):(i=hn(e)?Ki:Kt.current,r=e.contextTypes,o=(r=r!=null)?Qs(t,i):ui),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function px(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cu.enqueueReplaceState(e,e.state,null)}function i0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Gf(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=An(o):(o=hn(e)?Ki:Kt.current,i.context=Qs(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(r0(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cu.enqueueReplaceState(i,i.state,null),Uc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=XN(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Bd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function s0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var N_=typeof WeakMap=="function"?WeakMap:Map;function kw(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gc||(Gc=!0,p0=r),s0(t,e)},n}function jw(t,e,n){n=br(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){s0(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){s0(t,e),typeof r!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function gx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new N_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=L_.bind(null,t,e,n),e.then(t,t))}function xx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function yx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,ti(n,e,1))),n.lanes|=1),t)}var __=Rr.ReactCurrentOwner,cn=!1;function Xt(t,e,n,r){e.child=t===null?Jb(e,null,n,r):Xs(e,t.child,n,r)}function vx(t,e,n,r,i){n=n.render;var o=e.ref;return Bs(e,i),r=Jf(t,e,n,r,o,i),n=Zf(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(it&&n&&Ff(e),e.flags|=1,Xt(t,e,r,i),e.child)}function bx(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!cm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Nw(t,e,o,r,i)):(t=hc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(a,r)&&t.ref===e.ref)return _r(t,e,i)}return e.flags|=1,t=ii(o,r),t.ref=e.ref,t.return=e,e.child=t}function Nw(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ta(o,r)&&t.ref===e.ref)if(cn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,_r(t,e,i)}return o0(t,e,n,r,i)}function _w(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(Is,pn),pn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Xe(Is,pn),pn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Xe(Is,pn),pn|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Xe(Is,pn),pn|=r;return Xt(t,e,i,n),e.child}function zw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function o0(t,e,n,r,i){var o=hn(n)?Ki:Kt.current;return o=Qs(e,o),Bs(e,i),n=Jf(t,e,n,r,o,i),r=Zf(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_r(t,e,i)):(it&&r&&Ff(e),e.flags|=1,Xt(t,e,n,i),e.child)}function wx(t,e,n,r,i){if(hn(n)){var o=!0;Vc(e)}else o=!1;if(Bs(e,i),e.stateNode===null)cc(t,e),ww(e,n,r),i0(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=An(d):(d=hn(n)?Ki:Kt.current,d=Qs(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&px(e,a,r,d),qr=!1;var m=e.memoizedState;a.state=m,Uc(e,r,a,i),c=e.memoizedState,l!==r||m!==c||dn.current||qr?(typeof h=="function"&&(r0(e,n,h,r),c=e.memoizedState),(l=qr||mx(e,n,l,r,m,c,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,ew(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Fn(e.type,l),a.props=d,f=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=An(c):(c=hn(n)?Ki:Kt.current,c=Qs(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&px(e,a,r,c),qr=!1,m=e.memoizedState,a.state=m,Uc(e,r,a,i);var _=e.memoizedState;l!==f||m!==_||dn.current||qr?(typeof y=="function"&&(r0(e,n,y,r),_=e.memoizedState),(d=qr||mx(e,n,d,r,m,_,c)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),a.props=r,a.state=_,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return a0(t,e,n,r,o,i)}function a0(t,e,n,r,i,o){zw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&ox(e,n,!1),_r(t,e,o);r=e.stateNode,__.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Xs(e,t.child,null,o),e.child=Xs(e,null,l,o)):Xt(t,e,l,o),e.memoizedState=r.state,i&&ox(e,n,!0),e.child}function Cw(t){var e=t.stateNode;e.pendingContext?sx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&sx(t,e.context,!1),Kf(t,e.containerInfo)}function kx(t,e,n,r,i){return Ys(),Uf(i),e.flags|=256,Xt(t,e,n,r),e.child}var l0={dehydrated:null,treeContext:null,retryLane:0};function c0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ew(t,e,n){var r=e.pendingProps,i=at.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Xe(at,i&1),t===null)return t0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Tu(a,r,0,null),t=Wi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=c0(n),e.memoizedState=l0,t):nm(e,a));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return z_(t,e,a,r,l,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ii(i,c),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=ii(l,o):(o=Wi(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?c0(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=l0,r}return o=t.child,t=o.sibling,r=ii(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nm(t,e){return e=Tu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Uf(r),Xs(e,t.child,null,n),t=nm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function z_(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=Bd(Error(ie(422))),Fl(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Tu({mode:"visible",children:r.children},i,0,null),o=Wi(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Xs(e,t.child,null,a),e.child.memoizedState=c0(a),e.memoizedState=l0,o);if(!(e.mode&1))return Fl(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ie(419)),r=Bd(o,r,void 0),Fl(t,e,a,r)}if(l=(a&t.childLanes)!==0,cn||l){if(r=At,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Nr(t,i),qn(r,t,i,-1))}return lm(),r=Bd(Error(ie(421))),Fl(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=O_.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,gn=ei(i.nextSibling),xn=e,it=!0,Un=null,t!==null&&(jn[Nn++]=yr,jn[Nn++]=vr,jn[Nn++]=Qi,yr=t.id,vr=t.overflow,Qi=e),e=nm(e,r.children),e.flags|=4096,e)}function jx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),n0(t.return,e,n)}function Ud(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Sw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Xt(t,e,r.children,n),r=at.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jx(t,n,e);else if(t.tag===19)jx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Xe(at,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ud(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&$c(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ud(e,!0,n,null,o);break;case"together":Ud(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _r(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Xi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ie(153));if(e.child!==null){for(t=e.child,n=ii(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ii(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function C_(t,e,n){switch(e.tag){case 3:Cw(e),Ys();break;case 5:tw(e);break;case 1:hn(e.type)&&Vc(e);break;case 4:Kf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Xe(Fc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Xe(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?Ew(t,e,n):(Xe(at,at.current&1),t=_r(t,e,n),t!==null?t.sibling:null);Xe(at,at.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Sw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Xe(at,at.current),r)break;return null;case 22:case 23:return e.lanes=0,_w(t,e,n)}return _r(t,e,n)}var Tw,u0,Iw,Aw;Tw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};u0=function(){};Iw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Li(rr.current);var o=null;switch(n){case"input":i=Ah(t,i),r=Ah(t,r),o=[];break;case"select":i=ct({},i,{value:void 0}),r=ct({},r,{value:void 0}),o=[];break;case"textarea":i=Dh(t,i),r=Dh(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Dc)}Vh(n,r);var a;n=null;for(d in i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&i[d]!=null)if(d==="style"){var l=i[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ja.hasOwnProperty(d)?o||(o=[]):(o=o||[]).push(d,null));for(d in r){var c=r[d];if(l=i!=null?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ja.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ze("scroll",t),o||l===c||(o=[])):(o=o||[]).push(d,c))}n&&(o=o||[]).push("style",n);var d=o;(e.updateQueue=d)&&(e.flags|=4)}};Aw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Bo(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function $t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function E_(t,e,n){var r=e.pendingProps;switch(Bf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return hn(e.type)&&Mc(),$t(e),null;case 3:return r=e.stateNode,Js(),tt(dn),tt(Kt),Yf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Un!==null&&(y0(Un),Un=null))),u0(t,e),$t(e),null;case 5:Qf(e);var i=Li(Da.current);if(n=e.type,t!==null&&e.stateNode!=null)Iw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ie(166));return $t(e),null}if(t=Li(rr.current),Ll(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[tr]=e,r[Pa]=o,t=(e.mode&1)!==0,n){case"dialog":Ze("cancel",r),Ze("close",r);break;case"iframe":case"object":case"embed":Ze("load",r);break;case"video":case"audio":for(i=0;i<Jo.length;i++)Ze(Jo[i],r);break;case"source":Ze("error",r);break;case"img":case"image":case"link":Ze("error",r),Ze("load",r);break;case"details":Ze("toggle",r);break;case"input":Ag(r,o),Ze("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ze("invalid",r);break;case"textarea":Rg(r,o),Ze("invalid",r)}Vh(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Vl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Vl(r.textContent,l,t),i=["children",""+l]):ja.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ze("scroll",r)}switch(n){case"input":Sl(r),Pg(r,o,!0);break;case"textarea":Sl(r),Dg(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Dc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ob(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[tr]=e,t[Pa]=r,Tw(t,e,!1,!1),e.stateNode=t;e:{switch(a=Lh(n,r),n){case"dialog":Ze("cancel",t),Ze("close",t),i=r;break;case"iframe":case"object":case"embed":Ze("load",t),i=r;break;case"video":case"audio":for(i=0;i<Jo.length;i++)Ze(Jo[i],t);i=r;break;case"source":Ze("error",t),i=r;break;case"img":case"image":case"link":Ze("error",t),Ze("load",t),i=r;break;case"details":Ze("toggle",t),i=r;break;case"input":Ag(t,r),i=Ah(t,r),Ze("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ct({},r,{value:void 0}),Ze("invalid",t);break;case"textarea":Rg(t,r),i=Dh(t,r),Ze("invalid",t);break;default:i=r}Vh(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?cb(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ab(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Na(t,c):typeof c=="number"&&Na(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ja.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Ze("scroll",t):c!=null&&zf(t,o,c,a))}switch(n){case"input":Sl(t),Pg(t,r,!1);break;case"textarea":Sl(t),Dg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ci(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Vs(t,!!r.multiple,o,!1):r.defaultValue!=null&&Vs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Dc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(t&&e.stateNode!=null)Aw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ie(166));if(n=Li(Da.current),Li(rr.current),Ll(e)){if(r=e.stateNode,n=e.memoizedProps,r[tr]=e,(o=r.nodeValue!==n)&&(t=xn,t!==null))switch(t.tag){case 3:Vl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=e,e.stateNode=r}return $t(e),null;case 13:if(tt(at),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&gn!==null&&e.mode&1&&!(e.flags&128))Yb(),Ys(),e.flags|=98560,o=!1;else if(o=Ll(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ie(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ie(317));o[tr]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),o=!1}else Un!==null&&(y0(Un),Un=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?zt===0&&(zt=3):lm())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Js(),u0(t,e),t===null&&Ia(e.stateNode.containerInfo),$t(e),null;case 10:return qf(e.type._context),$t(e),null;case 17:return hn(e.type)&&Mc(),$t(e),null;case 19:if(tt(at),o=e.memoizedState,o===null)return $t(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)Bo(o,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=$c(t),a!==null){for(e.flags|=128,Bo(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Xe(at,at.current&1|2),e.child}t=t.sibling}o.tail!==null&&gt()>eo&&(e.flags|=128,r=!0,Bo(o,!1),e.lanes=4194304)}else{if(!r)if(t=$c(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Bo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!it)return $t(e),null}else 2*gt()-o.renderingStartTime>eo&&n!==1073741824&&(e.flags|=128,r=!0,Bo(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=gt(),e.sibling=null,n=at.current,Xe(at,r?n&1|2:n&1),e):($t(e),null);case 22:case 23:return am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?pn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(ie(156,e.tag))}function S_(t,e){switch(Bf(e),e.tag){case 1:return hn(e.type)&&Mc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),tt(dn),tt(Kt),Yf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qf(e),null;case 13:if(tt(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ie(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return tt(at),null;case 4:return Js(),null;case 10:return qf(e.type._context),null;case 22:case 23:return am(),null;case 24:return null;default:return null}}var Bl=!1,Ht=!1,T_=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ts(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ft(t,e,r)}else n.current=null}function d0(t,e,n){try{n()}catch(r){ft(t,e,r)}}var Nx=!1;function I_(t,e){if(Kh=Ac,t=Vb(),Of(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||i!==0&&f.nodeType!==3||(l=a+i),f!==o||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++d===i&&(l=a),m===o&&++h===r&&(c=a),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qh={focusedElem:t,selectionRange:n},Ac=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,P=_.memoizedState,w=e.stateNode,b=w.getSnapshotBeforeUpdate(e.elementType===e.type?A:Fn(e.type,A),P);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ie(163))}}catch(R){ft(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return _=Nx,Nx=!1,_}function ua(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&d0(e,n,o)}i=i.next}while(i!==r)}}function Eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function h0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Pw(t){var e=t.alternate;e!==null&&(t.alternate=null,Pw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[Pa],delete e[Jh],delete e[f_],delete e[m_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Rw(t){return t.tag===5||t.tag===3||t.tag===4}function _x(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Rw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function f0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Dc));else if(r!==4&&(t=t.child,t!==null))for(f0(t,e,n),t=t.sibling;t!==null;)f0(t,e,n),t=t.sibling}function m0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(m0(t,e,n),t=t.sibling;t!==null;)m0(t,e,n),t=t.sibling}var Rt=null,Bn=!1;function Ur(t,e,n){for(n=n.child;n!==null;)Dw(t,e,n),n=n.sibling}function Dw(t,e,n){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(bu,n)}catch{}switch(n.tag){case 5:Ht||Ts(n,e);case 6:var r=Rt,i=Bn;Rt=null,Ur(t,e,n),Rt=r,Bn=i,Rt!==null&&(Bn?(t=Rt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rt.removeChild(n.stateNode));break;case 18:Rt!==null&&(Bn?(t=Rt,n=n.stateNode,t.nodeType===8?Dd(t.parentNode,n):t.nodeType===1&&Dd(t,n),Ea(t)):Dd(Rt,n.stateNode));break;case 4:r=Rt,i=Bn,Rt=n.stateNode.containerInfo,Bn=!0,Ur(t,e,n),Rt=r,Bn=i;break;case 0:case 11:case 14:case 15:if(!Ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&d0(n,e,a),i=i.next}while(i!==r)}Ur(t,e,n);break;case 1:if(!Ht&&(Ts(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ft(n,e,l)}Ur(t,e,n);break;case 21:Ur(t,e,n);break;case 22:n.mode&1?(Ht=(r=Ht)||n.memoizedState!==null,Ur(t,e,n),Ht=r):Ur(t,e,n);break;default:Ur(t,e,n)}}function zx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new T_),e.forEach(function(r){var i=F_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Dn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Rt=l.stateNode,Bn=!1;break e;case 3:Rt=l.stateNode.containerInfo,Bn=!0;break e;case 4:Rt=l.stateNode.containerInfo,Bn=!0;break e}l=l.return}if(Rt===null)throw Error(ie(160));Dw(o,a,i),Rt=null,Bn=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(d){ft(i,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Mw(e,t),e=e.sibling}function Mw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(e,t),Xn(t),r&4){try{ua(3,t,t.return),Eu(3,t)}catch(A){ft(t,t.return,A)}try{ua(5,t,t.return)}catch(A){ft(t,t.return,A)}}break;case 1:Dn(e,t),Xn(t),r&512&&n!==null&&Ts(n,n.return);break;case 5:if(Dn(e,t),Xn(t),r&512&&n!==null&&Ts(n,n.return),t.flags&32){var i=t.stateNode;try{Na(i,"")}catch(A){ft(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&ib(i,o),Lh(l,a);var d=Lh(l,o);for(a=0;a<c.length;a+=2){var h=c[a],f=c[a+1];h==="style"?cb(i,f):h==="dangerouslySetInnerHTML"?ab(i,f):h==="children"?Na(i,f):zf(i,h,f,d)}switch(l){case"input":Ph(i,o);break;case"textarea":sb(i,o);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var y=o.value;y!=null?Vs(i,!!o.multiple,y,!1):m!==!!o.multiple&&(o.defaultValue!=null?Vs(i,!!o.multiple,o.defaultValue,!0):Vs(i,!!o.multiple,o.multiple?[]:"",!1))}i[Pa]=o}catch(A){ft(t,t.return,A)}}break;case 6:if(Dn(e,t),Xn(t),r&4){if(t.stateNode===null)throw Error(ie(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(A){ft(t,t.return,A)}}break;case 3:if(Dn(e,t),Xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ea(e.containerInfo)}catch(A){ft(t,t.return,A)}break;case 4:Dn(e,t),Xn(t);break;case 13:Dn(e,t),Xn(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(sm=gt())),r&4&&zx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(d=Ht)||h,Dn(e,t),Ht=d):Dn(e,t),Xn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(pe=t,h=t.child;h!==null;){for(f=pe=h;pe!==null;){switch(m=pe,y=m.child,m.tag){case 0:case 11:case 14:case 15:ua(4,m,m.return);break;case 1:Ts(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(A){ft(r,n,A)}}break;case 5:Ts(m,m.return);break;case 22:if(m.memoizedState!==null){Ex(f);continue}}y!==null?(y.return=m,pe=y):Ex(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{i=f.stateNode,d?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=lb("display",a))}catch(A){ft(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(A){ft(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Dn(e,t),Xn(t),r&4&&zx(t);break;case 21:break;default:Dn(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Rw(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Na(i,""),r.flags&=-33);var o=_x(t);m0(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,l=_x(t);f0(t,l,a);break;default:throw Error(ie(161))}}catch(c){ft(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function A_(t,e,n){pe=t,Vw(t)}function Vw(t,e,n){for(var r=(t.mode&1)!==0;pe!==null;){var i=pe,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||Bl;if(!a){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ht;l=Bl;var d=Ht;if(Bl=a,(Ht=c)&&!d)for(pe=i;pe!==null;)a=pe,c=a.child,a.tag===22&&a.memoizedState!==null?Sx(i):c!==null?(c.return=a,pe=c):Sx(i);for(;o!==null;)pe=o,Vw(o),o=o.sibling;pe=i,Bl=l,Ht=d}Cx(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,pe=o):Cx(t)}}function Cx(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||Eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ht)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Fn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&dx(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}dx(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&Ea(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ie(163))}Ht||e.flags&512&&h0(e)}catch(m){ft(e,e.return,m)}}if(e===t){pe=null;break}if(n=e.sibling,n!==null){n.return=e.return,pe=n;break}pe=e.return}}function Ex(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,pe=n;break}pe=e.return}}function Sx(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Eu(4,e)}catch(c){ft(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){ft(e,i,c)}}var o=e.return;try{h0(e)}catch(c){ft(e,o,c)}break;case 5:var a=e.return;try{h0(e)}catch(c){ft(e,a,c)}}}catch(c){ft(e,e.return,c)}if(e===t){pe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,pe=l;break}pe=e.return}}var P_=Math.ceil,Hc=Rr.ReactCurrentDispatcher,rm=Rr.ReactCurrentOwner,Sn=Rr.ReactCurrentBatchConfig,Ue=0,At=null,vt=null,Ot=0,pn=0,Is=wi(0),zt=0,Oa=null,Xi=0,Su=0,im=0,da=null,ln=null,sm=0,eo=1/0,pr=null,Gc=!1,p0=null,ni=null,Ul=!1,Qr=null,Kc=0,ha=0,g0=null,uc=-1,dc=0;function en(){return Ue&6?gt():uc!==-1?uc:uc=gt()}function ri(t){return t.mode&1?Ue&2&&Ot!==0?Ot&-Ot:g_.transition!==null?(dc===0&&(dc=wb()),dc):(t=He,t!==0||(t=window.event,t=t===void 0?16:Eb(t.type)),t):1}function qn(t,e,n,r){if(50<ha)throw ha=0,g0=null,Error(ie(185));tl(t,n,r),(!(Ue&2)||t!==At)&&(t===At&&(!(Ue&2)&&(Su|=n),zt===4&&Gr(t,Ot)),fn(t,r),n===1&&Ue===0&&!(e.mode&1)&&(eo=gt()+500,_u&&ki()))}function fn(t,e){var n=t.callbackNode;g4(t,e);var r=Ic(t,t===At?Ot:0);if(r===0)n!==null&&Lg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Lg(n),e===1)t.tag===0?p_(Tx.bind(null,t)):Gb(Tx.bind(null,t)),d_(function(){!(Ue&6)&&ki()}),n=null;else{switch(kb(r)){case 1:n=If;break;case 4:n=vb;break;case 16:n=Tc;break;case 536870912:n=bb;break;default:n=Tc}n=qw(n,Lw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Lw(t,e){if(uc=-1,dc=0,Ue&6)throw Error(ie(327));var n=t.callbackNode;if(Us()&&t.callbackNode!==n)return null;var r=Ic(t,t===At?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qc(t,r);else{e=r;var i=Ue;Ue|=2;var o=Fw();(At!==t||Ot!==e)&&(pr=null,eo=gt()+500,$i(t,e));do try{M_();break}catch(l){Ow(t,l)}while(!0);Wf(),Hc.current=o,Ue=i,vt!==null?e=0:(At=null,Ot=0,e=zt)}if(e!==0){if(e===2&&(i=$h(t),i!==0&&(r=i,e=x0(t,i))),e===1)throw n=Oa,$i(t,0),Gr(t,r),fn(t,gt()),n;if(e===6)Gr(t,r);else{if(i=t.current.alternate,!(r&30)&&!R_(i)&&(e=Qc(t,r),e===2&&(o=$h(t),o!==0&&(r=o,e=x0(t,o))),e===1))throw n=Oa,$i(t,0),Gr(t,r),fn(t,gt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ie(345));case 2:Ai(t,ln,pr);break;case 3:if(Gr(t,r),(r&130023424)===r&&(e=sm+500-gt(),10<e)){if(Ic(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){en(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Xh(Ai.bind(null,t,ln,pr),e);break}Ai(t,ln,pr);break;case 4:if(Gr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-Wn(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*P_(r/1960))-r,10<r){t.timeoutHandle=Xh(Ai.bind(null,t,ln,pr),r);break}Ai(t,ln,pr);break;case 5:Ai(t,ln,pr);break;default:throw Error(ie(329))}}}return fn(t,gt()),t.callbackNode===n?Lw.bind(null,t):null}function x0(t,e){var n=da;return t.current.memoizedState.isDehydrated&&($i(t,e).flags|=256),t=Qc(t,e),t!==2&&(e=ln,ln=n,e!==null&&y0(e)),t}function y0(t){ln===null?ln=t:ln.push.apply(ln,t)}function R_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Hn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Gr(t,e){for(e&=~im,e&=~Su,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wn(e),r=1<<n;t[n]=-1,e&=~r}}function Tx(t){if(Ue&6)throw Error(ie(327));Us();var e=Ic(t,0);if(!(e&1))return fn(t,gt()),null;var n=Qc(t,e);if(t.tag!==0&&n===2){var r=$h(t);r!==0&&(e=r,n=x0(t,r))}if(n===1)throw n=Oa,$i(t,0),Gr(t,e),fn(t,gt()),n;if(n===6)throw Error(ie(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ai(t,ln,pr),fn(t,gt()),null}function om(t,e){var n=Ue;Ue|=1;try{return t(e)}finally{Ue=n,Ue===0&&(eo=gt()+500,_u&&ki())}}function Ji(t){Qr!==null&&Qr.tag===0&&!(Ue&6)&&Us();var e=Ue;Ue|=1;var n=Sn.transition,r=He;try{if(Sn.transition=null,He=1,t)return t()}finally{He=r,Sn.transition=n,Ue=e,!(Ue&6)&&ki()}}function am(){pn=Is.current,tt(Is)}function $i(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,u_(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(Bf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mc();break;case 3:Js(),tt(dn),tt(Kt),Yf();break;case 5:Qf(r);break;case 4:Js();break;case 13:tt(at);break;case 19:tt(at);break;case 10:qf(r.type._context);break;case 22:case 23:am()}n=n.return}if(At=t,vt=t=ii(t.current,null),Ot=pn=e,zt=0,Oa=null,im=Su=Xi=0,ln=da=null,Vi!==null){for(e=0;e<Vi.length;e++)if(n=Vi[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Vi=null}return t}function Ow(t,e){do{var n=vt;try{if(Wf(),ac.current=qc,Wc){for(var r=lt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wc=!1}if(Yi=0,It=_t=lt=null,ca=!1,Ma=0,rm.current=null,n===null||n.return===null){zt=1,Oa=e,vt=null;break}e:{var o=t,a=n.return,l=n,c=e;if(e=Ot,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=xx(a);if(y!==null){y.flags&=-257,yx(y,a,l,o,e),y.mode&1&&gx(o,d,e),e=y,c=d;var _=e.updateQueue;if(_===null){var A=new Set;A.add(c),e.updateQueue=A}else _.add(c);break e}else{if(!(e&1)){gx(o,d,e),lm();break e}c=Error(ie(426))}}else if(it&&l.mode&1){var P=xx(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),yx(P,a,l,o,e),Uf(Zs(c,l));break e}}o=c=Zs(c,l),zt!==4&&(zt=2),da===null?da=[o]:da.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var w=kw(o,c,e);ux(o,w);break e;case 1:l=c;var b=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof b.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ni===null||!ni.has(j)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=jw(o,l,e);ux(o,R);break e}}o=o.return}while(o!==null)}Uw(n)}catch(L){e=L,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(!0)}function Fw(){var t=Hc.current;return Hc.current=qc,t===null?qc:t}function lm(){(zt===0||zt===3||zt===2)&&(zt=4),At===null||!(Xi&268435455)&&!(Su&268435455)||Gr(At,Ot)}function Qc(t,e){var n=Ue;Ue|=2;var r=Fw();(At!==t||Ot!==e)&&(pr=null,$i(t,e));do try{D_();break}catch(i){Ow(t,i)}while(!0);if(Wf(),Ue=n,Hc.current=r,vt!==null)throw Error(ie(261));return At=null,Ot=0,zt}function D_(){for(;vt!==null;)Bw(vt)}function M_(){for(;vt!==null&&!a4();)Bw(vt)}function Bw(t){var e=Ww(t.alternate,t,pn);t.memoizedProps=t.pendingProps,e===null?Uw(t):vt=e,rm.current=null}function Uw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=S_(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,vt=null;return}}else if(n=E_(n,e,pn),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);zt===0&&(zt=5)}function Ai(t,e,n){var r=He,i=Sn.transition;try{Sn.transition=null,He=1,V_(t,e,n,r)}finally{Sn.transition=i,He=r}return null}function V_(t,e,n,r){do Us();while(Qr!==null);if(Ue&6)throw Error(ie(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ie(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(x4(t,o),t===At&&(vt=At=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ul||(Ul=!0,qw(Tc,function(){return Us(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Sn.transition,Sn.transition=null;var a=He;He=1;var l=Ue;Ue|=4,rm.current=null,I_(t,n),Mw(n,t),r_(Qh),Ac=!!Kh,Qh=Kh=null,t.current=n,A_(n),l4(),Ue=l,He=a,Sn.transition=o}else t.current=n;if(Ul&&(Ul=!1,Qr=t,Kc=i),o=t.pendingLanes,o===0&&(ni=null),d4(n.stateNode),fn(t,gt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gc)throw Gc=!1,t=p0,p0=null,t;return Kc&1&&t.tag!==0&&Us(),o=t.pendingLanes,o&1?t===g0?ha++:(ha=0,g0=t):ha=0,ki(),null}function Us(){if(Qr!==null){var t=kb(Kc),e=Sn.transition,n=He;try{if(Sn.transition=null,He=16>t?16:t,Qr===null)var r=!1;else{if(t=Qr,Qr=null,Kc=0,Ue&6)throw Error(ie(331));var i=Ue;for(Ue|=4,pe=t.current;pe!==null;){var o=pe,a=o.child;if(pe.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(pe=d;pe!==null;){var h=pe;switch(h.tag){case 0:case 11:case 15:ua(8,h,o)}var f=h.child;if(f!==null)f.return=h,pe=f;else for(;pe!==null;){h=pe;var m=h.sibling,y=h.return;if(Pw(h),h===d){pe=null;break}if(m!==null){m.return=y,pe=m;break}pe=y}}}var _=o.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var P=A.sibling;A.sibling=null,A=P}while(A!==null)}}pe=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,pe=a;else e:for(;pe!==null;){if(o=pe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ua(9,o,o.return)}var w=o.sibling;if(w!==null){w.return=o.return,pe=w;break e}pe=o.return}}var b=t.current;for(pe=b;pe!==null;){a=pe;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,pe=j;else e:for(a=b;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Eu(9,l)}}catch(L){ft(l,l.return,L)}if(l===a){pe=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,pe=R;break e}pe=l.return}}if(Ue=i,ki(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(bu,t)}catch{}r=!0}return r}finally{He=n,Sn.transition=e}}return!1}function Ix(t,e,n){e=Zs(n,e),e=kw(t,e,1),t=ti(t,e,1),e=en(),t!==null&&(tl(t,1,e),fn(t,e))}function ft(t,e,n){if(t.tag===3)Ix(t,t,n);else for(;e!==null;){if(e.tag===3){Ix(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ni===null||!ni.has(r))){t=Zs(n,t),t=jw(e,t,1),e=ti(e,t,1),t=en(),e!==null&&(tl(e,1,t),fn(e,t));break}}e=e.return}}function L_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=en(),t.pingedLanes|=t.suspendedLanes&n,At===t&&(Ot&n)===n&&(zt===4||zt===3&&(Ot&130023424)===Ot&&500>gt()-sm?$i(t,0):im|=n),fn(t,e)}function $w(t,e){e===0&&(t.mode&1?(e=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):e=1);var n=en();t=Nr(t,e),t!==null&&(tl(t,e,n),fn(t,n))}function O_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$w(t,n)}function F_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ie(314))}r!==null&&r.delete(e),$w(t,n)}var Ww;Ww=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||dn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,C_(t,e,n);cn=!!(t.flags&131072)}else cn=!1,it&&e.flags&1048576&&Kb(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cc(t,e),t=e.pendingProps;var i=Qs(e,Kt.current);Bs(e,n),i=Jf(null,e,r,t,i,n);var o=Zf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(r)?(o=!0,Vc(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Gf(e),i.updater=Cu,e.stateNode=i,i._reactInternals=e,i0(e,r,t,n),e=a0(null,e,r,!0,o,n)):(e.tag=0,it&&o&&Ff(e),Xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=U_(r),t=Fn(r,t),i){case 0:e=o0(null,e,r,t,n);break e;case 1:e=wx(null,e,r,t,n);break e;case 11:e=vx(null,e,r,t,n);break e;case 14:e=bx(null,e,r,Fn(r.type,t),n);break e}throw Error(ie(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),o0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),wx(t,e,r,i,n);case 3:e:{if(Cw(e),t===null)throw Error(ie(387));r=e.pendingProps,o=e.memoizedState,i=o.element,ew(t,e),Uc(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Zs(Error(ie(423)),e),e=kx(t,e,r,n,i);break e}else if(r!==i){i=Zs(Error(ie(424)),e),e=kx(t,e,r,n,i);break e}else for(gn=ei(e.stateNode.containerInfo.firstChild),xn=e,it=!0,Un=null,n=Jb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===i){e=_r(t,e,n);break e}Xt(t,e,r,n)}e=e.child}return e;case 5:return tw(e),t===null&&t0(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Yh(r,i)?a=null:o!==null&&Yh(r,o)&&(e.flags|=32),zw(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&t0(e),null;case 13:return Ew(t,e,n);case 4:return Kf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):Xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),vx(t,e,r,i,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Xe(Fc,r._currentValue),r._currentValue=a,o!==null)if(Hn(o.value,a)){if(o.children===i.children&&!dn.current){e=_r(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=br(-1,n&-n),c.tag=2;var d=o.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),n0(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ie(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),n0(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Bs(e,n),i=An(i),r=r(i),e.flags|=1,Xt(t,e,r,n),e.child;case 14:return r=e.type,i=Fn(r,e.pendingProps),i=Fn(r.type,i),bx(t,e,r,i,n);case 15:return Nw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Fn(r,i),cc(t,e),e.tag=1,hn(r)?(t=!0,Vc(e)):t=!1,Bs(e,n),ww(e,r,i),i0(e,r,i,n),a0(null,e,r,!0,t,n);case 19:return Sw(t,e,n);case 22:return _w(t,e,n)}throw Error(ie(156,e.tag))};function qw(t,e){return yb(t,e)}function B_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,e,n,r){return new B_(t,e,n,r)}function cm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function U_(t){if(typeof t=="function")return cm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ef)return 11;if(t===Sf)return 14}return 2}function ii(t,e){var n=t.alternate;return n===null?(n=Cn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function hc(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")cm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ws:return Wi(n.children,i,o,e);case Cf:a=8,i|=8;break;case Eh:return t=Cn(12,n,e,i|2),t.elementType=Eh,t.lanes=o,t;case Sh:return t=Cn(13,n,e,i),t.elementType=Sh,t.lanes=o,t;case Th:return t=Cn(19,n,e,i),t.elementType=Th,t.lanes=o,t;case tb:return Tu(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z1:a=10;break e;case eb:a=9;break e;case Ef:a=11;break e;case Sf:a=14;break e;case Wr:a=16,r=null;break e}throw Error(ie(130,t==null?t:typeof t,""))}return e=Cn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Wi(t,e,n,r){return t=Cn(7,t,r,e),t.lanes=n,t}function Tu(t,e,n,r){return t=Cn(22,t,r,e),t.elementType=tb,t.lanes=n,t.stateNode={isHidden:!1},t}function $d(t,e,n){return t=Cn(6,t,null,e),t.lanes=n,t}function Wd(t,e,n){return e=Cn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nd(0),this.expirationTimes=Nd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function um(t,e,n,r,i,o,a,l,c){return t=new $_(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Cn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Gf(o),t}function W_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Hw(t){if(!t)return ui;t=t._reactInternals;e:{if(ss(t)!==t||t.tag!==1)throw Error(ie(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ie(171))}if(t.tag===1){var n=t.type;if(hn(n))return Hb(t,n,e)}return e}function Gw(t,e,n,r,i,o,a,l,c){return t=um(n,r,!0,t,i,o,a,l,c),t.context=Hw(null),n=t.current,r=en(),i=ri(n),o=br(r,i),o.callback=e??null,ti(n,o,i),t.current.lanes=i,tl(t,i,r),fn(t,r),t}function Iu(t,e,n,r){var i=e.current,o=en(),a=ri(i);return n=Hw(n),e.context===null?e.context=n:e.pendingContext=n,e=br(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ti(i,e,a),t!==null&&(qn(t,i,a,o),oc(t,i,a)),a}function Yc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dm(t,e){Ax(t,e),(t=t.alternate)&&Ax(t,e)}function q_(){return null}var Kw=typeof reportError=="function"?reportError:function(t){console.error(t)};function hm(t){this._internalRoot=t}Au.prototype.render=hm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ie(409));Iu(t,e,null,null)};Au.prototype.unmount=hm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ji(function(){Iu(null,t,null,null)}),e[jr]=null}};function Au(t){this._internalRoot=t}Au.prototype.unstable_scheduleHydration=function(t){if(t){var e=_b();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Hr.length&&e!==0&&e<Hr[n].priority;n++);Hr.splice(n,0,t),n===0&&Cb(t)}};function fm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Px(){}function H_(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var d=Yc(a);o.call(d)}}var a=Gw(e,r,t,0,null,!1,!1,"",Px);return t._reactRootContainer=a,t[jr]=a.current,Ia(t.nodeType===8?t.parentNode:t),Ji(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var d=Yc(c);l.call(d)}}var c=um(t,0,!1,null,null,!1,!1,"",Px);return t._reactRootContainer=c,t[jr]=c.current,Ia(t.nodeType===8?t.parentNode:t),Ji(function(){Iu(e,c,n,r)}),c}function Ru(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var l=i;i=function(){var c=Yc(a);l.call(c)}}Iu(e,a,t,i)}else a=H_(n,e,t,i,r);return Yc(a)}jb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xo(e.pendingLanes);n!==0&&(Af(e,n|1),fn(e,gt()),!(Ue&6)&&(eo=gt()+500,ki()))}break;case 13:Ji(function(){var r=Nr(t,1);if(r!==null){var i=en();qn(r,t,1,i)}}),dm(t,1)}};Pf=function(t){if(t.tag===13){var e=Nr(t,134217728);if(e!==null){var n=en();qn(e,t,134217728,n)}dm(t,134217728)}};Nb=function(t){if(t.tag===13){var e=ri(t),n=Nr(t,e);if(n!==null){var r=en();qn(n,t,e,r)}dm(t,e)}};_b=function(){return He};zb=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};Fh=function(t,e,n){switch(e){case"input":if(Ph(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nu(r);if(!i)throw Error(ie(90));rb(r),Ph(r,i)}}}break;case"textarea":sb(t,n);break;case"select":e=n.value,e!=null&&Vs(t,!!n.multiple,e,!1)}};hb=om;fb=Ji;var G_={usingClientEntryPoint:!1,Events:[rl,_s,Nu,ub,db,om]},Uo={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K_={bundleType:Uo.bundleType,version:Uo.version,rendererPackageName:Uo.rendererPackageName,rendererConfig:Uo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=gb(t),t===null?null:t.stateNode},findFiberByHostInstance:Uo.findFiberByHostInstance||q_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{bu=$l.inject(K_),nr=$l}catch{}}bn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G_;bn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fm(e))throw Error(ie(200));return W_(t,e,null,n)};bn.createRoot=function(t,e){if(!fm(t))throw Error(ie(299));var n=!1,r="",i=Kw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=um(t,1,!1,null,null,n,!1,r,i),t[jr]=e.current,Ia(t.nodeType===8?t.parentNode:t),new hm(e)};bn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ie(188)):(t=Object.keys(t).join(","),Error(ie(268,t)));return t=gb(e),t=t===null?null:t.stateNode,t};bn.flushSync=function(t){return Ji(t)};bn.hydrate=function(t,e,n){if(!Pu(e))throw Error(ie(200));return Ru(null,t,e,!0,n)};bn.hydrateRoot=function(t,e,n){if(!fm(t))throw Error(ie(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=Kw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Gw(e,null,t,1,n??null,i,!1,o,a),t[jr]=e.current,Ia(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Au(e)};bn.render=function(t,e,n){if(!Pu(e))throw Error(ie(200));return Ru(null,t,e,!1,n)};bn.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(ie(40));return t._reactRootContainer?(Ji(function(){Ru(null,null,t,!1,function(){t._reactRootContainer=null,t[jr]=null})}),!0):!1};bn.unstable_batchedUpdates=om;bn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(ie(200));if(t==null||t._reactInternals===void 0)throw Error(ie(38));return Ru(t,e,n,!1,r)};bn.version="18.3.1-next-f1338f8080-20240426";function Qw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Qw)}catch(t){console.error(t)}}Qw(),Q1.exports=bn;var rt=Q1.exports,Rx=rt;zh.createRoot=Rx.createRoot,zh.hydrateRoot=Rx.hydrateRoot;const mm=k.createContext({});function ji(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const pm=typeof window<"u",gm=pm?k.useLayoutEffect:k.useEffect,Du=k.createContext(null);function xm(t,e){t.indexOf(e)===-1&&t.push(e)}function ym(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Q_([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const i=n<0?t.length+n:n,[o]=t.splice(e,1);t.splice(i,0,o)}return t}const zr=(t,e,n)=>n>e?e:n<t?t:n;let vm=()=>{};const Cr={},Yw=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Xw(t){return typeof t=="object"&&t!==null}const Jw=t=>/^0[^.\s]+$/u.test(t);function bm(t){let e;return()=>(e===void 0&&(e=t()),e)}const Tn=t=>t,Y_=(t,e)=>n=>e(t(n)),sl=(...t)=>t.reduce(Y_),Fa=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class wm{constructor(){this.subscriptions=[]}add(e){return xm(this.subscriptions,e),()=>ym(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ir=t=>t*1e3,En=t=>t/1e3;function Zw(t,e){return e?t*(1e3/e):0}const e2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,X_=1e-7,J_=12;function Z_(t,e,n,r,i){let o,a,l=0;do a=e+(n-e)/2,o=e2(a,r,i)-t,o>0?n=a:e=a;while(Math.abs(o)>X_&&++l<J_);return a}function ol(t,e,n,r){if(t===e&&n===r)return Tn;const i=o=>Z_(o,0,1,t,n);return o=>o===0||o===1?o:e2(i(o),e,r)}const t2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,n2=t=>e=>1-t(1-e),r2=ol(.33,1.53,.69,.99),km=n2(r2),i2=t2(km),s2=t=>(t*=2)<1?.5*km(t):.5*(2-Math.pow(2,-10*(t-1))),jm=t=>1-Math.sin(Math.acos(t)),o2=n2(jm),a2=t2(jm),ez=ol(.42,0,1,1),tz=ol(0,0,.58,1),l2=ol(.42,0,.58,1),nz=t=>Array.isArray(t)&&typeof t[0]!="number",c2=t=>Array.isArray(t)&&typeof t[0]=="number",rz={linear:Tn,easeIn:ez,easeInOut:l2,easeOut:tz,circIn:jm,circInOut:a2,circOut:o2,backIn:km,backInOut:i2,backOut:r2,anticipate:s2},iz=t=>typeof t=="string",Dx=t=>{if(c2(t)){vm(t.length===4);const[e,n,r,i]=t;return ol(e,n,r,i)}else if(iz(t))return rz[t];return t},Wl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sz(t,e){let n=new Set,r=new Set,i=!1,o=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){a.has(h)&&(d.schedule(h),t()),h(l)}const d={schedule:(h,f=!1,m=!1)=>{const _=m&&i?n:r;return f&&a.add(h),_.has(h)||_.add(h),h},cancel:h=>{r.delete(h),a.delete(h)},process:h=>{if(l=h,i){o=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,o&&(o=!1,d.process(h))}};return d}const oz=40;function u2(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Wl.reduce((j,R)=>(j[R]=sz(o),j),{}),{setup:l,read:c,resolveKeyframes:d,preUpdate:h,update:f,preRender:m,render:y,postRender:_}=a,A=()=>{const j=Cr.useManualTiming?i.timestamp:performance.now();n=!1,Cr.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(j-i.timestamp,oz),1)),i.timestamp=j,i.isProcessing=!0,l.process(i),c.process(i),d.process(i),h.process(i),f.process(i),m.process(i),y.process(i),_.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(A))},P=()=>{n=!0,r=!0,i.isProcessing||t(A)};return{schedule:Wl.reduce((j,R)=>{const L=a[R];return j[R]=(V,v=!1,x=!1)=>(n||P(),L.schedule(V,v,x)),j},{}),cancel:j=>{for(let R=0;R<Wl.length;R++)a[Wl[R]].cancel(j)},state:i,steps:a}}const{schedule:nt,cancel:Er,state:Dt,steps:qd}=u2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Tn,!0);let fc;function az(){fc=void 0}const un={now:()=>(fc===void 0&&un.set(Dt.isProcessing||Cr.useManualTiming?Dt.timestamp:performance.now()),fc),set:t=>{fc=t,queueMicrotask(az)}},d2=t=>e=>typeof e=="string"&&e.startsWith(t),h2=d2("--"),lz=d2("var(--"),Nm=t=>lz(t)?cz.test(t.split("/*")[0].trim()):!1,cz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,fo={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ba={...fo,transform:t=>zr(0,1,t)},ql={...fo,default:1},fa=t=>Math.round(t*1e5)/1e5,_m=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function uz(t){return t==null}const dz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zm=(t,e)=>n=>!!(typeof n=="string"&&dz.test(n)&&n.startsWith(t)||e&&!uz(n)&&Object.prototype.hasOwnProperty.call(n,e)),f2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,a,l]=r.match(_m);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},hz=t=>zr(0,255,t),Hd={...fo,transform:t=>Math.round(hz(t))},Oi={test:zm("rgb","red"),parse:f2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Hd.transform(t)+", "+Hd.transform(e)+", "+Hd.transform(n)+", "+fa(Ba.transform(r))+")"};function fz(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const v0={test:zm("#"),parse:fz,transform:Oi.transform},al=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$r=al("deg"),sr=al("%"),ze=al("px"),mz=al("vh"),pz=al("vw"),Mx={...sr,parse:t=>sr.parse(t)/100,transform:t=>sr.transform(t*100)},As={test:zm("hsl","hue"),parse:f2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+sr.transform(fa(e))+", "+sr.transform(fa(n))+", "+fa(Ba.transform(r))+")"},yt={test:t=>Oi.test(t)||v0.test(t)||As.test(t),parse:t=>Oi.test(t)?Oi.parse(t):As.test(t)?As.parse(t):v0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Oi.transform(t):As.transform(t),getAnimatableNone:t=>{const e=yt.parse(t);return e.alpha=0,yt.transform(e)}},gz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function xz(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(_m))==null?void 0:e.length)||0)+(((n=t.match(gz))==null?void 0:n.length)||0)>0}const m2="number",p2="color",yz="var",vz="var(",Vx="${}",bz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ua(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const l=e.replace(bz,c=>(yt.test(c)?(r.color.push(o),i.push(p2),n.push(yt.parse(c))):c.startsWith(vz)?(r.var.push(o),i.push(yz),n.push(c)):(r.number.push(o),i.push(m2),n.push(parseFloat(c))),++o,Vx)).split(Vx);return{values:n,split:l,indexes:r,types:i}}function g2(t){return Ua(t).values}function x2(t){const{split:e,types:n}=Ua(t),r=e.length;return i=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],i[a]!==void 0){const l=n[a];l===m2?o+=fa(i[a]):l===p2?o+=yt.transform(i[a]):o+=i[a]}return o}}const wz=t=>typeof t=="number"?0:yt.test(t)?yt.getAnimatableNone(t):t;function kz(t){const e=g2(t);return x2(t)(e.map(wz))}const di={test:xz,parse:g2,createTransformer:x2,getAnimatableNone:kz};function Gd(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function jz({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,a=0;if(!e)i=o=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;i=Gd(c,l,t+1/3),o=Gd(c,l,t),a=Gd(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Xc(t,e){return n=>n>0?e:t}const st=(t,e,n)=>t+(e-t)*n,Kd=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},Nz=[v0,Oi,As],_z=t=>Nz.find(e=>e.test(t));function Lx(t){const e=_z(t);if(!e)return!1;let n=e.parse(t);return e===As&&(n=jz(n)),n}const Ox=(t,e)=>{const n=Lx(t),r=Lx(e);if(!n||!r)return Xc(t,e);const i={...n};return o=>(i.red=Kd(n.red,r.red,o),i.green=Kd(n.green,r.green,o),i.blue=Kd(n.blue,r.blue,o),i.alpha=st(n.alpha,r.alpha,o),Oi.transform(i))},b0=new Set(["none","hidden"]);function zz(t,e){return b0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function Cz(t,e){return n=>st(t,e,n)}function Cm(t){return typeof t=="number"?Cz:typeof t=="string"?Nm(t)?Xc:yt.test(t)?Ox:Tz:Array.isArray(t)?y2:typeof t=="object"?yt.test(t)?Ox:Ez:Xc}function y2(t,e){const n=[...t],r=n.length,i=t.map((o,a)=>Cm(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=i[a](o);return n}}function Ez(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Cm(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function Sz(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const o=e.types[i],a=t.indexes[o][r[o]],l=t.values[a]??0;n[i]=l,r[o]++}return n}const Tz=(t,e)=>{const n=di.createTransformer(e),r=Ua(t),i=Ua(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?b0.has(t)&&!i.values.length||b0.has(e)&&!r.values.length?zz(t,e):sl(y2(Sz(r,i),i.values),n):Xc(t,e)};function v2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?st(t,e,n):Cm(t)(t,e)}const Iz=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>nt.update(e,n),stop:()=>Er(e),now:()=>Dt.isProcessing?Dt.timestamp:un.now()}},b2=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=Math.round(t(o/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Jc=2e4;function Em(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Jc;)e+=n,r=t.next(e);return e>=Jc?1/0:e}function Az(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Em(r),Jc);return{type:"keyframes",ease:o=>r.next(i*o).value/e,duration:En(i)}}const Pz=5;function w2(t,e,n){const r=Math.max(e-Pz,0);return Zw(n-t(r),e-r)}const ht={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qd=.001;function Rz({duration:t=ht.duration,bounce:e=ht.bounce,velocity:n=ht.velocity,mass:r=ht.mass}){let i,o,a=1-e;a=zr(ht.minDamping,ht.maxDamping,a),t=zr(ht.minDuration,ht.maxDuration,En(t)),a<1?(i=d=>{const h=d*a,f=h*t,m=h-n,y=w0(d,a),_=Math.exp(-f);return Qd-m/y*_},o=d=>{const f=d*a*t,m=f*n+n,y=Math.pow(a,2)*Math.pow(d,2)*t,_=Math.exp(-f),A=w0(Math.pow(d,2),a);return(-i(d)+Qd>0?-1:1)*((m-y)*_)/A}):(i=d=>{const h=Math.exp(-d*t),f=(d-n)*t+1;return-Qd+h*f},o=d=>{const h=Math.exp(-d*t),f=(n-d)*(t*t);return h*f});const l=5/t,c=Mz(i,o,l);if(t=ir(t),isNaN(c))return{stiffness:ht.stiffness,damping:ht.damping,duration:t};{const d=Math.pow(c,2)*r;return{stiffness:d,damping:a*2*Math.sqrt(r*d),duration:t}}}const Dz=12;function Mz(t,e,n){let r=n;for(let i=1;i<Dz;i++)r=r-t(r)/e(r);return r}function w0(t,e){return t*Math.sqrt(1-e*e)}const Vz=["duration","bounce"],Lz=["stiffness","damping","mass"];function Fx(t,e){return e.some(n=>t[n]!==void 0)}function Oz(t){let e={velocity:ht.velocity,stiffness:ht.stiffness,damping:ht.damping,mass:ht.mass,isResolvedFromDuration:!1,...t};if(!Fx(t,Lz)&&Fx(t,Vz))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*zr(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ht.mass,stiffness:i,damping:o}}else{const n=Rz(t);e={...e,...n,mass:ht.mass},e.isResolvedFromDuration=!0}return e}function Zc(t=ht.visualDuration,e=ht.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:d,mass:h,duration:f,velocity:m,isResolvedFromDuration:y}=Oz({...n,velocity:-En(n.velocity||0)}),_=m||0,A=d/(2*Math.sqrt(c*h)),P=a-o,w=En(Math.sqrt(c/h)),b=Math.abs(P)<5;r||(r=b?ht.restSpeed.granular:ht.restSpeed.default),i||(i=b?ht.restDelta.granular:ht.restDelta.default);let j;if(A<1){const L=w0(w,A);j=V=>{const v=Math.exp(-A*w*V);return a-v*((_+A*w*P)/L*Math.sin(L*V)+P*Math.cos(L*V))}}else if(A===1)j=L=>a-Math.exp(-w*L)*(P+(_+w*P)*L);else{const L=w*Math.sqrt(A*A-1);j=V=>{const v=Math.exp(-A*w*V),x=Math.min(L*V,300);return a-v*((_+A*w*P)*Math.sinh(x)+L*P*Math.cosh(x))/L}}const R={calculatedDuration:y&&f||null,next:L=>{const V=j(L);if(y)l.done=L>=f;else{let v=L===0?_:0;A<1&&(v=L===0?ir(_):w2(j,L,V));const x=Math.abs(v)<=r,N=Math.abs(a-V)<=i;l.done=x&&N}return l.value=l.done?a:V,l},toString:()=>{const L=Math.min(Em(R),Jc),V=b2(v=>R.next(L*v).value,L,30);return L+"ms "+V},toTransition:()=>{}};return R}Zc.applyToOptions=t=>{const e=Az(t,100,Zc);return t.ease=e.ease,t.duration=ir(e.duration),t.type="keyframes",t};function k0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:d=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},y=x=>l!==void 0&&x<l||c!==void 0&&x>c,_=x=>l===void 0?c:c===void 0||Math.abs(l-x)<Math.abs(c-x)?l:c;let A=n*e;const P=f+A,w=a===void 0?P:a(P);w!==P&&(A=w-f);const b=x=>-A*Math.exp(-x/r),j=x=>w+b(x),R=x=>{const N=b(x),C=j(x);m.done=Math.abs(N)<=d,m.value=m.done?w:C};let L,V;const v=x=>{y(m.value)&&(L=x,V=Zc({keyframes:[m.value,_(m.value)],velocity:w2(j,x,m.value),damping:i,stiffness:o,restDelta:d,restSpeed:h}))};return v(0),{calculatedDuration:null,next:x=>{let N=!1;return!V&&L===void 0&&(N=!0,R(x),v(x)),L!==void 0&&x>=L?V.next(x-L):(!N&&R(x),m)}}}function Fz(t,e,n){const r=[],i=n||Cr.mix||v2,o=t.length-1;for(let a=0;a<o;a++){let l=i(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||Tn:e;l=sl(c,l)}r.push(l)}return r}function k2(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(vm(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=Fz(e,r,i),c=l.length,d=h=>{if(a&&h<t[0])return e[0];let f=0;if(c>1)for(;f<t.length-2&&!(h<t[f+1]);f++);const m=Fa(t[f],t[f+1],h);return l[f](m)};return n?h=>d(zr(t[0],t[o-1],h)):d}function Bz(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=Fa(0,e,r);t.push(st(n,1,i))}}function Uz(t){const e=[0];return Bz(e,t.length-1),e}function $z(t,e){return t.map(n=>n*e)}function Wz(t,e){return t.map(()=>e||l2).splice(0,t.length-1)}function ma({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=nz(r)?r.map(Dx):Dx(r),o={done:!1,value:e[0]},a=$z(n&&n.length===e.length?n:Uz(e),t),l=k2(a,e,{ease:Array.isArray(i)?i:Wz(e,i)});return{calculatedDuration:t,next:c=>(o.value=l(c),o.done=c>=t,o)}}const qz=t=>t!==null;function Sm(t,{repeat:e,repeatType:n="loop"},r,i=1){const o=t.filter(qz),l=i<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const Hz={decay:k0,inertia:k0,tween:ma,keyframes:ma,spring:Zc};function j2(t){typeof t.type=="string"&&(t.type=Hz[t.type])}class Tm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const Gz=t=>t/100;class Im extends Tm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,i;const{motionValue:n}=this.options;n&&n.updatedAt!==un.now()&&this.tick(un.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(i=(r=this.options).onStop)==null||i.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;j2(e);const{type:n=ma,repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:a=0}=e;let{keyframes:l}=e;const c=n||ma;c!==ma&&typeof l[0]!="number"&&(this.mixKeyframes=sl(Gz,v2(l[0],l[1])),l=[0,100]);const d=c({...e,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=Em(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:o,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:f,repeatType:m,repeatDelay:y,type:_,onUpdate:A,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const w=this.currentTime-d*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?w<0:w>i;this.currentTime=Math.max(w,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let j=this.currentTime,R=r;if(f){const x=Math.min(this.currentTime,i)/l;let N=Math.floor(x),C=x%1;!C&&x>=1&&(C=1),C===1&&N--,N=Math.min(N,f+1),!!(N%2)&&(m==="reverse"?(C=1-C,y&&(C-=y/l)):m==="mirror"&&(R=a)),j=zr(0,1,C)*l}const L=b?{done:!1,value:h[0]}:R.next(j);o&&(L.value=o(L.value));let{done:V}=L;!b&&c!==null&&(V=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const v=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return v&&_!==k0&&(L.value=Sm(h,this.options,P,this.speed)),A&&A(L.value),v&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return En(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+En(e)}get time(){return En(this.currentTime)}set time(e){var n;e=ir(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(un.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=En(this.currentTime))}play(){var i,o;if(this.isStopped)return;const{driver:e=Iz,startTime:n}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),(o=(i=this.options).onPlay)==null||o.call(i);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(un.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function Kz(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Fi=t=>t*180/Math.PI,j0=t=>{const e=Fi(Math.atan2(t[1],t[0]));return N0(e)},Qz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:j0,rotateZ:j0,skewX:t=>Fi(Math.atan(t[1])),skewY:t=>Fi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},N0=t=>(t=t%360,t<0&&(t+=360),t),Bx=j0,Ux=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),$x=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),Yz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Ux,scaleY:$x,scale:t=>(Ux(t)+$x(t))/2,rotateX:t=>N0(Fi(Math.atan2(t[6],t[5]))),rotateY:t=>N0(Fi(Math.atan2(-t[2],t[0]))),rotateZ:Bx,rotate:Bx,skewX:t=>Fi(Math.atan(t[4])),skewY:t=>Fi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _0(t){return t.includes("scale")?1:0}function z0(t,e){if(!t||t==="none")return _0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=Yz,i=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Qz,i=l}if(!i)return _0(e);const o=r[e],a=i[1].split(",").map(Jz);return typeof o=="function"?o(a):a[o]}const Xz=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return z0(n,e)};function Jz(t){return parseFloat(t.trim())}const mo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],po=new Set(mo),Wx=t=>t===fo||t===ze,Zz=new Set(["x","y","z"]),eC=mo.filter(t=>!Zz.has(t));function tC(t){const e=[];return eC.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const qi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>z0(e,"x"),y:(t,{transform:e})=>z0(e,"y")};qi.translateX=qi.x;qi.translateY=qi.y;const Hi=new Set;let C0=!1,E0=!1,S0=!1;function N2(){if(E0){const t=Array.from(Hi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=tC(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,a])=>{var l;(l=r.getValue(o))==null||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}E0=!1,C0=!1,Hi.forEach(t=>t.complete(S0)),Hi.clear()}function _2(){Hi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(E0=!0)})}function nC(){S0=!0,_2(),N2(),S0=!1}class Am{constructor(e,n,r,i,o,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(Hi.add(this),C0||(C0=!0,nt.read(_2),nt.resolveKeyframes(N2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const o=i==null?void 0:i.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&n){const l=r.readValue(n,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),i&&o===void 0&&i.set(e[0])}Kz(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Hi.delete(this)}cancel(){this.state==="scheduled"&&(Hi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const rC=t=>t.startsWith("--");function iC(t,e,n){rC(e)?t.style.setProperty(e,n):t.style[e]=n}const sC=bm(()=>window.ScrollTimeline!==void 0),oC={};function aC(t,e){const n=bm(t);return()=>oC[e]??n()}const z2=aC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Zo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,qx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zo([0,.65,.55,1]),circOut:Zo([.55,0,1,.45]),backIn:Zo([.31,.01,.66,-.59]),backOut:Zo([.33,1.53,.69,.99])};function C2(t,e){if(t)return typeof t=="function"?z2()?b2(t,e):"ease-out":c2(t)?Zo(t):Array.isArray(t)?t.map(n=>C2(n,e)||qx.easeOut):qx[t]}function lC(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:a="loop",ease:l="easeOut",times:c}={},d=void 0){const h={[e]:n};c&&(h.offset=c);const f=C2(l,i);Array.isArray(f)&&(h.easing=f);const m={delay:r,duration:i,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),t.animate(h,m)}function E2(t){return typeof t=="function"&&"applyToOptions"in t}function cC({type:t,...e}){return E2(t)&&z2()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class uC extends Tm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:o,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=a,this.options=e,vm(typeof e.type!="string");const d=cC(e);this.animation=lC(n,r,i,d,o),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const h=Sm(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):iC(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return En(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+En(e)}get time(){return En(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ir(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&sC()?(this.animation.timeline=e,Tn):n(this)}}const S2={anticipate:s2,backInOut:i2,circInOut:a2};function dC(t){return t in S2}function hC(t){typeof t.ease=="string"&&dC(t.ease)&&(t.ease=S2[t.ease])}const Hx=10;class fC extends uC{constructor(e){hC(e),j2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:o,...a}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Im({...a,autoplay:!1}),c=ir(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-Hx).value,l.sample(c).value,Hx),l.stop()}}const Gx=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(di.test(t)||t==="0")&&!t.startsWith("url("));function mC(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function pC(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=Gx(i,e),l=Gx(o,e);return!a||!l?!1:mC(t)||(n==="spring"||E2(n))&&r}function T0(t){t.duration=0,t.type="keyframes"}const gC=new Set(["opacity","clipPath","filter","transform"]),xC=bm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yC(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:o,type:a}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:d}=e.owner.getProps();return xC()&&n&&gC.has(n)&&(n!=="transform"||!d)&&!c&&!r&&i!=="mirror"&&o!==0&&a!=="inertia"}const vC=40;class bC extends Tm{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",keyframes:l,name:c,motionValue:d,element:h,...f}){var _;super(),this.stop=()=>{var A,P;this._animation&&(this._animation.stop(),(A=this.stopTimeline)==null||A.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=un.now();const m={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:a,name:c,motionValue:d,element:h,...f},y=(h==null?void 0:h.KeyframeResolver)||Am;this.keyframeResolver=new y(l,(A,P,w)=>this.onKeyframesResolved(A,P,m,!w),c,d,h),(_=this.keyframeResolver)==null||_.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:o,type:a,velocity:l,delay:c,isHandoff:d,onUpdate:h}=r;this.resolvedAt=un.now(),pC(e,o,a,l)||((Cr.instantAnimations||!c)&&(h==null||h(Sm(e,r,n))),e[0]=e[e.length-1],T0(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>vC?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!d&&yC(m)?new fC({...m,element:m.motionValue.owner.current}):new Im(m);y.finished.then(()=>this.notifyFinished()).catch(Tn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),nC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const wC=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kC(t){const e=wC.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function T2(t,e,n=1){const[r,i]=kC(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return Yw(a)?parseFloat(a):a}return Nm(i)?T2(i,e,n+1):i}function Pm(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const I2=new Set(["width","height","top","left","right","bottom",...mo]),jC={test:t=>t==="auto",parse:t=>t},A2=t=>e=>e.test(t),P2=[fo,ze,sr,$r,pz,mz,jC],Kx=t=>P2.find(A2(t));function NC(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||Jw(t):!0}const _C=new Set(["brightness","contrast","saturate","opacity"]);function zC(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(_m)||[];if(!r)return t;const i=n.replace(r,"");let o=_C.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const CC=/\b([a-z-]*)\(.*?\)/gu,I0={...di,getAnimatableNone:t=>{const e=t.match(CC);return e?e.map(zC).join(" "):t}},Qx={...fo,transform:Math.round},EC={rotate:$r,rotateX:$r,rotateY:$r,rotateZ:$r,scale:ql,scaleX:ql,scaleY:ql,scaleZ:ql,skew:$r,skewX:$r,skewY:$r,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:Ba,originX:Mx,originY:Mx,originZ:ze},Rm={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze,...EC,zIndex:Qx,fillOpacity:Ba,strokeOpacity:Ba,numOctaves:Qx},SC={...Rm,color:yt,backgroundColor:yt,outlineColor:yt,fill:yt,stroke:yt,borderColor:yt,borderTopColor:yt,borderRightColor:yt,borderBottomColor:yt,borderLeftColor:yt,filter:I0,WebkitFilter:I0},R2=t=>SC[t];function D2(t,e){let n=R2(t);return n!==I0&&(n=di),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const TC=new Set(["auto","none","0"]);function IC(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!TC.has(o)&&Ua(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=D2(n,i)}class AC extends Am{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let d=e[c];if(typeof d=="string"&&(d=d.trim(),Nm(d))){const h=T2(d,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!I2.has(r)||e.length!==2)return;const[i,o]=e,a=Kx(i),l=Kx(o);if(a!==l)if(Wx(a)&&Wx(l))for(let c=0;c<e.length;c++){const d=e[c];typeof d=="string"&&(e[c]=parseFloat(d))}else qi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||NC(e[i]))&&r.push(i);r.length&&IC(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=qi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=qi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function PC(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=(n==null?void 0:n[t])??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const M2=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function V2(t){return Xw(t)&&"offsetHeight"in t}const Yx=30,RC=t=>!isNaN(parseFloat(t)),pa={current:void 0};class DC{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var o;const i=un.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((o=this.events.change)==null||o.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=un.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=RC(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wm);const r=this.events[e].add(n);return e==="change"?()=>{r(),nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return pa.current&&pa.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=un.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Yx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Yx);return Zw(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zi(t,e){return new DC(t,e)}const{schedule:Dm}=u2(queueMicrotask,!1),On={x:!1,y:!1};function L2(){return On.x||On.y}function MC(t){return t==="x"||t==="y"?On[t]?null:(On[t]=!0,()=>{On[t]=!1}):On.x||On.y?null:(On.x=On.y=!0,()=>{On.x=On.y=!1})}function O2(t,e){const n=PC(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Xx(t){return!(t.pointerType==="touch"||L2())}function VC(t,e,n={}){const[r,i,o]=O2(t,n),a=l=>{if(!Xx(l))return;const{target:c}=l,d=e(c,l);if(typeof d!="function"||!c)return;const h=f=>{Xx(f)&&(d(f),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",a,i)}),o}const F2=(t,e)=>e?t===e?!0:F2(t,e.parentElement):!1,Mm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,LC=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function OC(t){return LC.has(t.tagName)||t.tabIndex!==-1}const mc=new WeakSet;function Jx(t){return e=>{e.key==="Enter"&&t(e)}}function Yd(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const FC=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Jx(()=>{if(mc.has(n))return;Yd(n,"down");const i=Jx(()=>{Yd(n,"up")}),o=()=>Yd(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Zx(t){return Mm(t)&&!L2()}function BC(t,e,n={}){const[r,i,o]=O2(t,n),a=l=>{const c=l.currentTarget;if(!Zx(l))return;mc.add(c);const d=e(c,l),h=(y,_)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),mc.has(c)&&mc.delete(c),Zx(y)&&typeof d=="function"&&d(y,{success:_})},f=y=>{h(y,c===window||c===document||n.useGlobalTarget||F2(c,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",f,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,i),V2(l)&&(l.addEventListener("focus",d=>FC(d,i)),!OC(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function B2(t){return Xw(t)&&"ownerSVGElement"in t}function UC(t){return B2(t)&&t.tagName==="svg"}function $C(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],i=t[1+n],o=t[2+n],a=t[3+n],l=k2(i,o,a);return e?l(r):l}const Lt=t=>!!(t&&t.getVelocity),WC=[...P2,yt,di],qC=t=>WC.find(A2(t)),Mu=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function ey(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function HC(...t){return e=>{let n=!1;const r=t.map(i=>{const o=ey(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():ey(t[i],null)}}}}function GC(...t){return k.useCallback(HC(...t),t)}class KC extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=V2(r)&&r.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=i-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function QC({children:t,isPresent:e,anchorX:n,root:r}){const i=k.useId(),o=k.useRef(null),a=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(Mu),c=GC(o,t==null?void 0:t.ref);return k.useInsertionEffect(()=>{const{width:d,height:h,top:f,left:m,right:y}=a.current;if(e||!o.current||!d||!h)return;const _=n==="left"?`left: ${m}`:`right: ${y}`;o.current.dataset.motionPopId=i;const A=document.createElement("style");l&&(A.nonce=l);const P=r??document.head;return P.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${_}px !important;
            top: ${f}px !important;
          }
        `),()=>{P.contains(A)&&P.removeChild(A)}},[e]),s.jsx(KC,{isPresent:e,childRef:o,sizeRef:a,children:k.cloneElement(t,{ref:c})})}const YC=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:a,anchorX:l,root:c})=>{const d=ji(XC),h=k.useId();let f=!0,m=k.useMemo(()=>(f=!1,{id:h,initial:e,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const _ of d.values())if(!_)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return o&&f&&(m={...m}),k.useMemo(()=>{d.forEach((y,_)=>d.set(_,!1))},[n]),k.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),a==="popLayout"&&(t=s.jsx(QC,{isPresent:n,anchorX:l,root:c,children:t})),s.jsx(Du.Provider,{value:m,children:t})};function XC(){return new Map}function U2(t=!0){const e=k.useContext(Du);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=k.useId();k.useEffect(()=>{if(t)return i(o)},[t]);const a=k.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,a]:[!0]}const Hl=t=>t.key||"";function ty(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const Ee=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[d,h]=U2(a),f=k.useMemo(()=>ty(t),[t]),m=a&&!d?[]:f.map(Hl),y=k.useRef(!0),_=k.useRef(f),A=ji(()=>new Map),[P,w]=k.useState(f),[b,j]=k.useState(f);gm(()=>{y.current=!1,_.current=f;for(let V=0;V<b.length;V++){const v=Hl(b[V]);m.includes(v)?A.delete(v):A.get(v)!==!0&&A.set(v,!1)}},[b,m.length,m.join("-")]);const R=[];if(f!==P){let V=[...f];for(let v=0;v<b.length;v++){const x=b[v],N=Hl(x);m.includes(N)||(V.splice(v,0,x),R.push(x))}return o==="wait"&&R.length&&(V=R),j(ty(V)),w(f),null}const{forceRender:L}=k.useContext(mm);return s.jsx(s.Fragment,{children:b.map(V=>{const v=Hl(V),x=a&&!d?!1:f===b||m.includes(v),N=()=>{if(A.has(v))A.set(v,!0);else return;let C=!0;A.forEach(z=>{z||(C=!1)}),C&&(L==null||L(),j(_.current),a&&(h==null||h()),r&&r())};return s.jsx(YC,{isPresent:x,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:o,root:c,onExitComplete:x?void 0:N,anchorX:l,children:V},v)})})},$2=k.createContext({strict:!1}),ny={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},to={};for(const t in ny)to[t]={isEnabled:e=>ny[t].some(n=>!!e[n])};function JC(t){for(const e in t)to[e]={...to[e],...t[e]}}const ZC=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function eu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||ZC.has(t)}let W2=t=>!eu(t);function eE(t){typeof t=="function"&&(W2=e=>e.startsWith("on")?!eu(e):t(e))}try{eE(require("@emotion/is-prop-valid").default)}catch{}function tE(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(W2(i)||n===!0&&eu(i)||!e&&!eu(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}const Vu=k.createContext({});function Lu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function $a(t){return typeof t=="string"||Array.isArray(t)}const Vm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lm=["initial",...Vm];function Ou(t){return Lu(t.animate)||Lm.some(e=>$a(t[e]))}function q2(t){return!!(Ou(t)||t.variants)}function nE(t,e){if(Ou(t)){const{initial:n,animate:r}=t;return{initial:n===!1||$a(n)?n:void 0,animate:$a(r)?r:void 0}}return t.inherit!==!1?e:{}}function rE(t){const{initial:e,animate:n}=nE(t,k.useContext(Vu));return k.useMemo(()=>({initial:e,animate:n}),[ry(e),ry(n)])}function ry(t){return Array.isArray(t)?t.join(" "):t}function iy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const $o={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ze.test(t))t=parseFloat(t);else return t;const n=iy(t,e.target.x),r=iy(t,e.target.y);return`${n}% ${r}%`}},iE={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=di.parse(t);if(i.length>5)return r;const o=di.createTransformer(t),a=typeof i[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;i[0+a]/=l,i[1+a]/=c;const d=st(l,c,.5);return typeof i[2+a]=="number"&&(i[2+a]/=d),typeof i[3+a]=="number"&&(i[3+a]/=d),o(i)}},A0={borderRadius:{...$o,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$o,borderTopRightRadius:$o,borderBottomLeftRadius:$o,borderBottomRightRadius:$o,boxShadow:iE};function H2(t,{layout:e,layoutId:n}){return po.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!A0[t]||t==="opacity")}const sE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oE=mo.length;function aE(t,e,n){let r="",i=!0;for(let o=0;o<oE;o++){const a=mo[o],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const d=M2(l,Rm[a]);if(!c){i=!1;const h=sE[a]||a;r+=`${h}(${d}) `}n&&(e[a]=d)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Om(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let a=!1,l=!1;for(const c in e){const d=e[c];if(po.has(c)){a=!0;continue}else if(h2(c)){i[c]=d;continue}else{const h=M2(d,Rm[c]);c.startsWith("origin")?(l=!0,o[c]=h):r[c]=h}}if(e.transform||(a||n?r.transform=aE(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:d="50%",originZ:h=0}=o;r.transformOrigin=`${c} ${d} ${h}`}}const Fm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function G2(t,e,n){for(const r in e)!Lt(e[r])&&!H2(r,n)&&(t[r]=e[r])}function lE({transformTemplate:t},e){return k.useMemo(()=>{const n=Fm();return Om(n,e,t),Object.assign({},n.vars,n.style)},[e])}function cE(t,e){const n=t.style||{},r={};return G2(r,n,t),Object.assign(r,lE(t,e)),r}function uE(t,e){const n={},r=cE(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const dE={offset:"stroke-dashoffset",array:"stroke-dasharray"},hE={offset:"strokeDashoffset",array:"strokeDasharray"};function fE(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?dE:hE;t[o.offset]=ze.transform(-r);const a=ze.transform(e),l=ze.transform(n);t[o.array]=`${a} ${l}`}function K2(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:o=1,pathOffset:a=0,...l},c,d,h){if(Om(t,l,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:f,style:m}=t;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete f.transformBox),e!==void 0&&(f.x=e),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),i!==void 0&&fE(f,i,o,a,!1)}const Q2=()=>({...Fm(),attrs:{}}),Y2=t=>typeof t=="string"&&t.toLowerCase()==="svg";function mE(t,e,n,r){const i=k.useMemo(()=>{const o=Q2();return K2(o,e,Y2(r),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};G2(o,t.style,t),i.style={...o,...i.style}}return i}const pE=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Bm(t){return typeof t!="string"||t.includes("-")?!1:!!(pE.indexOf(t)>-1||/[A-Z]/u.test(t))}function gE(t,e,n,{latestValues:r},i,o=!1){const l=(Bm(t)?mE:uE)(e,r,i,t),c=tE(e,typeof t=="string",o),d=t!==k.Fragment?{...c,...l,ref:n}:{},{children:h}=e,f=k.useMemo(()=>Lt(h)?h.get():h,[h]);return k.createElement(t,{...d,children:f})}function sy(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Um(t,e,n,r){if(typeof e=="function"){const[i,o]=sy(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=sy(r);e=e(n!==void 0?n:t.custom,i,o)}return e}function pc(t){return Lt(t)?t.get():t}function xE({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:yE(n,r,i,t),renderState:e()}}function yE(t,e,n,r){const i={},o=r(t,{});for(const m in o)i[m]=pc(o[m]);let{initial:a,animate:l}=t;const c=Ou(t),d=q2(t);e&&d&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||a===!1;const f=h?l:a;if(f&&typeof f!="boolean"&&!Lu(f)){const m=Array.isArray(f)?f:[f];for(let y=0;y<m.length;y++){const _=Um(t,m[y]);if(_){const{transitionEnd:A,transition:P,...w}=_;for(const b in w){let j=w[b];if(Array.isArray(j)){const R=h?j.length-1:0;j=j[R]}j!==null&&(i[b]=j)}for(const b in A)i[b]=A[b]}}}return i}const X2=t=>(e,n)=>{const r=k.useContext(Vu),i=k.useContext(Du),o=()=>xE(t,e,r,i);return n?o():ji(o)};function $m(t,e,n){var o;const{style:r}=t,i={};for(const a in r)(Lt(r[a])||e.style&&Lt(e.style[a])||H2(a,t)||((o=n==null?void 0:n.getValue(a))==null?void 0:o.liveStyle)!==void 0)&&(i[a]=r[a]);return i}const vE=X2({scrapeMotionValuesFromProps:$m,createRenderState:Fm});function J2(t,e,n){const r=$m(t,e,n);for(const i in t)if(Lt(t[i])||Lt(e[i])){const o=mo.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}const bE=X2({scrapeMotionValuesFromProps:J2,createRenderState:Q2}),wE=Symbol.for("motionComponentSymbol");function Ps(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function kE(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ps(n)&&(n.current=r))},[e])}const Wm=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),jE="framerAppearId",Z2="data-"+Wm(jE),ek=k.createContext({});function NE(t,e,n,r,i){var A,P;const{visualElement:o}=k.useContext(Vu),a=k.useContext($2),l=k.useContext(Du),c=k.useContext(Mu).reducedMotion,d=k.useRef(null);r=r||a.renderer,!d.current&&r&&(d.current=r(t,{visualState:e,parent:o,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,f=k.useContext(ek);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&_E(d.current,n,i,f);const m=k.useRef(!1);k.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const y=n[Z2],_=k.useRef(!!y&&!((A=window.MotionHandoffIsComplete)!=null&&A.call(window,y))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,y)));return gm(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),_.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(!_.current&&h.animationState&&h.animationState.animateChanges(),_.current&&(queueMicrotask(()=>{var w;(w=window.MotionHandoffMarkAsComplete)==null||w.call(window,y)}),_.current=!1),h.enteringChildren=void 0)}),h}function _E(t,e,n,r){const{layoutId:i,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:d,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:tk(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!a||l&&Ps(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:d})}function tk(t){if(t)return t.options.allowProjection!==!1?t.projection:tk(t.parent)}function Xd(t,{forwardMotionProps:e=!1}={},n,r){n&&JC(n);const i=Bm(t)?bE:vE;function o(l,c){let d;const h={...k.useContext(Mu),...l,layoutId:zE(l)},{isStatic:f}=h,m=rE(l),y=i(l,f);if(!f&&pm){CE();const _=EE(h);d=_.MeasureLayout,m.visualElement=NE(t,y,h,r,_.ProjectionNode)}return s.jsxs(Vu.Provider,{value:m,children:[d&&m.visualElement?s.jsx(d,{visualElement:m.visualElement,...h}):null,gE(t,l,kE(y,m.visualElement,c),y,f,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const a=k.forwardRef(o);return a[wE]=t,a}function zE({layoutId:t}){const e=k.useContext(mm).id;return e&&t!==void 0?e+"-"+t:t}function CE(t,e){k.useContext($2).strict}function EE(t){const{drag:e,layout:n}=to;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function SE(t,e){if(typeof Proxy>"u")return Xd;const n=new Map,r=(o,a)=>Xd(o,a,t,e),i=(o,a)=>r(o,a);return new Proxy(i,{get:(o,a)=>a==="create"?r:(n.has(a)||n.set(a,Xd(a,void 0,t,e)),n.get(a))})}function nk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function TE({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function IE(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Jd(t){return t===void 0||t===1}function P0({scale:t,scaleX:e,scaleY:n}){return!Jd(t)||!Jd(e)||!Jd(n)}function Pi(t){return P0(t)||rk(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function rk(t){return oy(t.x)||oy(t.y)}function oy(t){return t&&t!=="0%"}function tu(t,e,n){const r=t-n,i=e*r;return n+i}function ay(t,e,n,r,i){return i!==void 0&&(t=tu(t,i,r)),tu(t,n,r)+e}function R0(t,e=0,n=1,r,i){t.min=ay(t.min,e,n,r,i),t.max=ay(t.max,e,n,r,i)}function ik(t,{x:e,y:n}){R0(t.x,e.translate,e.scale,e.originPoint),R0(t.y,n.translate,n.scale,n.originPoint)}const ly=.999999999999,cy=1.0000000000001;function AE(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,a;for(let l=0;l<i;l++){o=n[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ds(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,ik(t,a)),r&&Pi(o.latestValues)&&Ds(t,o.latestValues))}e.x<cy&&e.x>ly&&(e.x=1),e.y<cy&&e.y>ly&&(e.y=1)}function Rs(t,e){t.min=t.min+e,t.max=t.max+e}function uy(t,e,n,r,i=.5){const o=st(t.min,t.max,i);R0(t,e,n,o,r)}function Ds(t,e){uy(t.x,e.x,e.scaleX,e.scale,e.originX),uy(t.y,e.y,e.scaleY,e.scale,e.originY)}function sk(t,e){return nk(IE(t.getBoundingClientRect(),e))}function PE(t,e,n){const r=sk(t,n),{scroll:i}=e;return i&&(Rs(r.x,i.offset.x),Rs(r.y,i.offset.y)),r}const dy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ms=()=>({x:dy(),y:dy()}),hy=()=>({min:0,max:0}),Nt=()=>({x:hy(),y:hy()}),D0={current:null},ok={current:!1};function RE(){if(ok.current=!0,!!pm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>D0.current=t.matches;t.addEventListener("change",e),e()}else D0.current=!1}const DE=new WeakMap;function ME(t,e,n){for(const r in e){const i=e[r],o=n[r];if(Lt(i))t.addValue(r,i);else if(Lt(o))t.addValue(r,Zi(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(i):a.hasAnimated||a.set(i)}else{const a=t.getStaticValue(r);t.addValue(r,Zi(a!==void 0?a:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const fy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VE{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Am,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=un.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,nt.render(this.render,!1,!0))};const{latestValues:c,renderState:d}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=d,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=Ou(n),this.isVariantNode=q2(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const y=f[m];c[m]!==void 0&&Lt(y)&&y.set(c[m])}}mount(e){var n;this.current=e,DE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,i)=>this.bindToMotionValue(i,r)),ok.current||RE(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:D0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Er(this.notifyUpdate),Er(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=po.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&nt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in to){const n=to[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Nt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fy.length;r++){const i=fy[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,a=e[o];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=ME(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Zi(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Yw(r)||Jw(r))?r=parseFloat(r):!qC(r)&&di.test(n)&&(r=D2(e,n)),this.setBaseTarget(e,Lt(r)?r.get():r)),Lt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var o;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Um(this.props,n,(o=this.presenceContext)==null?void 0:o.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Lt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){Dm.render(this.render)}}class ak extends VE{constructor(){super(...arguments),this.KeyframeResolver=AC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Lt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function lk(t,{style:e,vars:n},r,i){const o=t.style;let a;for(a in e)o[a]=e[a];i==null||i.applyProjectionStyles(o,r);for(a in n)o.setProperty(a,n[a])}function LE(t){return window.getComputedStyle(t)}class OE extends ak{constructor(){super(...arguments),this.type="html",this.renderInstance=lk}readValueFromInstance(e,n){var r;if(po.has(n))return(r=this.projection)!=null&&r.isProjecting?_0(n):Xz(e,n);{const i=LE(e),o=(h2(n)?i.getPropertyValue(n):i[n])||0;return typeof o=="string"?o.trim():o}}measureInstanceViewportBox(e,{transformPagePoint:n}){return sk(e,n)}build(e,n,r){Om(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return $m(e,n,r)}}const ck=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FE(t,e,n,r){lk(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(ck.has(i)?i:Wm(i),e.attrs[i])}class BE extends ak{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Nt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(po.has(n)){const r=R2(n);return r&&r.default||0}return n=ck.has(n)?n:Wm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return J2(e,n,r)}build(e,n,r){K2(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){FE(e,n,r,i)}mount(e){this.isSVGTag=Y2(e.tagName),super.mount(e)}}const UE=(t,e)=>Bm(t)?new BE(e):new OE(e,{allowProjection:t!==k.Fragment});function $s(t,e,n){const r=t.getProps();return Um(r,e,n!==void 0?n:r.custom,t)}const M0=t=>Array.isArray(t);function $E(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zi(n))}function WE(t){return M0(t)?t[t.length-1]||0:t}function qE(t,e){const n=$s(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const a in o){const l=WE(o[a]);$E(t,a,l)}}function HE(t){return!!(Lt(t)&&t.add)}function V0(t,e){const n=t.getValue("willChange");if(HE(n))return n.add(e);if(!n&&Cr.WillChange){const r=new Cr.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function uk(t){return t.props[Z2]}const GE=t=>t!==null;function KE(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(GE),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[o]}const QE={type:"spring",stiffness:500,damping:25,restSpeed:10},YE=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),XE={type:"keyframes",duration:.8},JE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},ZE=(t,{keyframes:e})=>e.length>2?XE:po.has(t)?t.startsWith("scale")?YE(e[1]):QE:JE;function eS({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:d,...h}){return!!Object.keys(h).length}const qm=(t,e,n,r={},i,o)=>a=>{const l=Pm(r,t)||{},c=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ir(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-d,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:i};eS(l)||Object.assign(h,ZE(t,h)),h.duration&&(h.duration=ir(h.duration)),h.repeatDelay&&(h.repeatDelay=ir(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let f=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(T0(h),h.delay===0&&(f=!0)),(Cr.instantAnimations||Cr.skipAnimations)&&(f=!0,T0(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,f&&!o&&e.get()!==void 0){const m=KE(h.keyframes,l);if(m!==void 0){nt.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new Im(h):new bC(h)};function tS({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function dk(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:a,...l}=e;r&&(o=r);const c=[],d=i&&t.animationState&&t.animationState.getState()[i];for(const h in l){const f=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||d&&tS(d,h))continue;const y={delay:n,...Pm(o||{},h)},_=f.get();if(_!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===_&&!y.velocity)continue;let A=!1;if(window.MotionHandoffAnimation){const w=uk(t);if(w){const b=window.MotionHandoffAnimation(w,h,nt);b!==null&&(y.startTime=b,A=!0)}}V0(t,h),f.start(qm(h,f,m,t.shouldReduceMotion&&I2.has(h)?{type:!1}:y,t,A));const P=f.animation;P&&c.push(P)}return a&&Promise.all(c).then(()=>{nt.update(()=>{a&&qE(t,a)})}),c}function hk(t,e,n,r=0,i=1){const o=Array.from(t).sort((d,h)=>d.sortNodePosition(h)).indexOf(e),a=t.size,l=(a-1)*r;return typeof n=="function"?n(o,a):i===1?o*r:l-o*r}function L0(t,e,n={}){var c;const r=$s(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const o=r?()=>Promise.all(dk(t,r,n)):()=>Promise.resolve(),a=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=i;return nS(t,e,d,h,f,m,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[d,h]=l==="beforeChildren"?[o,a]:[a,o];return d().then(()=>h())}else return Promise.all([o(),a(n.delay)])}function nS(t,e,n=0,r=0,i=0,o=1,a){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(L0(c,e,{...a,delay:n+(typeof r=="function"?0:r)+hk(t.variantChildren,c,r,i,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function rS(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>L0(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=L0(t,e,n);else{const i=typeof e=="function"?$s(t,e,n.custom):e;r=Promise.all(dk(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function fk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const iS=Lm.length;function mk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?mk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<iS;n++){const r=Lm[n],i=t.props[r];($a(i)||i===!1)&&(e[r]=i)}return e}const sS=[...Vm].reverse(),oS=Vm.length;function aS(t){return e=>Promise.all(e.map(({animation:n,options:r})=>rS(t,n,r)))}function lS(t){let e=aS(t),n=my(),r=!0;const i=c=>(d,h)=>{var m;const f=$s(t,h,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:y,transitionEnd:_,...A}=f;d={...d,...A,..._}}return d};function o(c){e=c(t)}function a(c){const{props:d}=t,h=mk(t.parent)||{},f=[],m=new Set;let y={},_=1/0;for(let P=0;P<oS;P++){const w=sS[P],b=n[w],j=d[w]!==void 0?d[w]:h[w],R=$a(j),L=w===c?b.isActive:null;L===!1&&(_=P);let V=j===h[w]&&j!==d[w]&&R;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),b.protectedKeys={...y},!b.isActive&&L===null||!j&&!b.prevProp||Lu(j)||typeof j=="boolean")continue;const v=cS(b.prevProp,j);let x=v||w===c&&b.isActive&&!V&&R||P>_&&R,N=!1;const C=Array.isArray(j)?j:[j];let z=C.reduce(i(w),{});L===!1&&(z={});const{prevResolvedValues:I={}}=b,S={...I,...z},ke=we=>{x=!0,m.has(we)&&(N=!0,m.delete(we)),b.needsAnimating[we]=!0;const Y=t.getValue(we);Y&&(Y.liveStyle=!1)};for(const we in S){const Y=z[we],le=I[we];if(y.hasOwnProperty(we))continue;let Z=!1;M0(Y)&&M0(le)?Z=!fk(Y,le):Z=Y!==le,Z?Y!=null?ke(we):m.add(we):Y!==void 0&&m.has(we)?ke(we):b.protectedKeys[we]=!0}b.prevProp=j,b.prevResolvedValues=z,b.isActive&&(y={...y,...z}),r&&t.blockInitialAnimation&&(x=!1);const ue=V&&v;x&&(!ue||N)&&f.push(...C.map(we=>{const Y={type:w};if(typeof we=="string"&&r&&!ue&&t.manuallyAnimateOnMount&&t.parent){const{parent:le}=t,Z=$s(le,we);if(le.enteringChildren&&Z){const{delayChildren:ve}=Z.transition||{};Y.delay=hk(le.enteringChildren,t,ve)}}return{animation:we,options:Y}}))}if(m.size){const P={};if(typeof d.initial!="boolean"){const w=$s(t,Array.isArray(d.initial)?d.initial[0]:d.initial);w&&w.transition&&(P.transition=w.transition)}m.forEach(w=>{const b=t.getBaseTarget(w),j=t.getValue(w);j&&(j.liveStyle=!0),P[w]=b??null}),f.push({animation:P})}let A=!!f.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(A=!1),r=!1,A?e(f):Promise.resolve()}function l(c,d){var f;if(n[c].isActive===d)return Promise.resolve();(f=t.variantChildren)==null||f.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(c,d)}),n[c].isActive=d;const h=a(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=my()}}}function cS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!fk(e,t):!1}function Ti(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function my(){return{animate:Ti(!0),whileInView:Ti(),whileHover:Ti(),whileTap:Ti(),whileDrag:Ti(),whileFocus:Ti(),exit:Ti()}}class Ni{constructor(e){this.isMounted=!1,this.node=e}update(){}}class uS extends Ni{constructor(e){super(e),e.animationState||(e.animationState=lS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Lu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let dS=0;class hS extends Ni{constructor(){super(...arguments),this.id=dS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const fS={animation:{Feature:uS},exit:{Feature:hS}};function Wa(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ll(t){return{point:{x:t.pageX,y:t.pageY}}}const mS=t=>e=>Mm(e)&&t(e,ll(e));function ga(t,e,n,r){return Wa(t,e,mS(n),r)}const pk=1e-4,pS=1-pk,gS=1+pk,gk=.01,xS=0-gk,yS=0+gk;function Zt(t){return t.max-t.min}function vS(t,e,n){return Math.abs(t-e)<=n}function py(t,e,n,r=.5){t.origin=r,t.originPoint=st(e.min,e.max,t.origin),t.scale=Zt(n)/Zt(e),t.translate=st(n.min,n.max,t.origin)-t.originPoint,(t.scale>=pS&&t.scale<=gS||isNaN(t.scale))&&(t.scale=1),(t.translate>=xS&&t.translate<=yS||isNaN(t.translate))&&(t.translate=0)}function xa(t,e,n,r){py(t.x,e.x,n.x,r?r.originX:void 0),py(t.y,e.y,n.y,r?r.originY:void 0)}function gy(t,e,n){t.min=n.min+e.min,t.max=t.min+Zt(e)}function bS(t,e,n){gy(t.x,e.x,n.x),gy(t.y,e.y,n.y)}function xy(t,e,n){t.min=e.min-n.min,t.max=t.min+Zt(e)}function nu(t,e,n){xy(t.x,e.x,n.x),xy(t.y,e.y,n.y)}function kn(t){return[t("x"),t("y")]}const xk=({current:t})=>t?t.ownerDocument.defaultView:null,yy=(t,e)=>Math.abs(t-e);function wS(t,e){const n=yy(t.x,e.x),r=yy(t.y,e.y);return Math.sqrt(n**2+r**2)}class yk{constructor(e,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:o=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=eh(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,_=wS(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!_)return;const{point:A}=m,{timestamp:P}=Dt;this.history.push({...A,timestamp:P});const{onStart:w,onMove:b}=this.handlers;y||(w&&w(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Zd(y,this.transformPagePoint),nt.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:_,onSessionEnd:A,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=eh(m.type==="pointercancel"?this.lastMoveEventInfo:Zd(y,this.transformPagePoint),this.history);this.startEvent&&_&&_(m,w),A&&A(m,w)},!Mm(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=a,this.contextWindow=i||window;const l=ll(e),c=Zd(l,this.transformPagePoint),{point:d}=c,{timestamp:h}=Dt;this.history=[{...d,timestamp:h}];const{onSessionStart:f}=n;f&&f(e,eh(c,this.history)),this.removeListeners=sl(ga(this.contextWindow,"pointermove",this.handlePointerMove),ga(this.contextWindow,"pointerup",this.handlePointerUp),ga(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Er(this.updatePoint)}}function Zd(t,e){return e?{point:e(t.point)}:t}function vy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function eh({point:t},e){return{point:t,delta:vy(t,vk(e)),offset:vy(t,kS(e)),velocity:jS(e,.1)}}function kS(t){return t[0]}function vk(t){return t[t.length-1]}function jS(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=vk(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>ir(e)));)n--;if(!r)return{x:0,y:0};const o=En(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function NS(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?st(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?st(n,t,r.max):Math.min(t,n)),t}function by(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function _S(t,{top:e,left:n,bottom:r,right:i}){return{x:by(t.x,n,i),y:by(t.y,e,r)}}function wy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function zS(t,e){return{x:wy(t.x,e.x),y:wy(t.y,e.y)}}function CS(t,e){let n=.5;const r=Zt(t),i=Zt(e);return i>r?n=Fa(e.min,e.max-r,t.min):r>i&&(n=Fa(t.min,t.max-i,e.min)),zr(0,1,n)}function ES(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const O0=.35;function SS(t=O0){return t===!1?t=0:t===!0&&(t=O0),{x:ky(t,"left","right"),y:ky(t,"top","bottom")}}function ky(t,e,n){return{min:jy(t,e),max:jy(t,n)}}function jy(t,e){return typeof t=="number"?t:t[e]||0}const TS=new WeakMap;class IS{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const o=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ll(f).point)},a=(f,m)=>{const{drag:y,dragPropagation:_,onDragStart:A}=this.getProps();if(y&&!_&&(this.openDragLock&&this.openDragLock(),this.openDragLock=MC(y),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),kn(w=>{let b=this.getAxisMotionValue(w).get()||0;if(sr.test(b)){const{projection:j}=this.visualElement;if(j&&j.layout){const R=j.layout.layoutBox[w];R&&(b=Zt(R)*(parseFloat(b)/100))}}this.originPoint[w]=b}),A&&nt.postRender(()=>A(f,m)),V0(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:_,onDirectionLock:A,onDrag:P}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:w}=m;if(_&&this.currentDirection===null){this.currentDirection=AS(w),this.currentDirection!==null&&A&&A(this.currentDirection);return}this.updateAxis("x",m.point,w),this.updateAxis("y",m.point,w),this.visualElement.render(),P&&P(f,m)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>kn(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new yk(e,{onSessionStart:o,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:xk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,i=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!i||!r)return;const{velocity:a}=i;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&nt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Gl(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=NS(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var o;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(o=this.visualElement.projection)==null?void 0:o.layout,i=this.constraints;e&&Ps(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=_S(r.layoutBox,e):this.constraints=!1,this.elastic=SS(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&kn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=ES(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ps(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=PE(r,i.root,this.visualElement.getTransformPagePoint());let a=zS(i.layout.layoutBox,o);if(n){const l=n(TE(a));this.hasMutatedConstraints=!!l,l&&(a=nk(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},d=kn(h=>{if(!Gl(h,n,this.currentDirection))return;let f=c&&c[h]||{};a&&(f={min:0,max:0});const m=i?200:1e6,y=i?40:1e7,_={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(h,_)});return Promise.all(d).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return V0(this.visualElement,e),r.start(qm(e,r,0,n,this.visualElement,!1))}stopAnimation(){kn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){kn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){kn(n=>{const{drag:r}=this.getProps();if(!Gl(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:a,max:l}=i.layout.layoutBox[n];o.set(e[n]-st(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ps(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};kn(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();i[a]=CS({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),kn(a=>{if(!Gl(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:d}=this.constraints[a];l.set(st(c,d,i[a]))})}addListeners(){if(!this.visualElement.current)return;TS.set(this.visualElement,this);const e=this.visualElement.current,n=ga(e,"pointerdown",c=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ps(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),nt.read(r);const a=Wa(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:d})=>{this.isDragging&&d&&(kn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=c[h].translate,f.set(f.get()+c[h].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:a=O0,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function Gl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function AS(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class PS extends Ni{constructor(e){super(e),this.removeGroupControls=Tn,this.removeListeners=Tn,this.controls=new IS(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Tn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ny=t=>(e,n)=>{t&&nt.postRender(()=>t(e,n))};class RS extends Ni{constructor(){super(...arguments),this.removePointerDownListener=Tn}onPointerDown(e){this.session=new yk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:xk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Ny(e),onStart:Ny(n),onMove:r,onEnd:(o,a)=>{delete this.session,i&&nt.postRender(()=>i(o,a))}}}mount(){this.removePointerDownListener=ga(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const gc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let th=!1;class DS extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),th&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),gc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,{projection:a}=r;return a&&(a.isPresent=o,th=!0,i||e.layoutDependency!==n||n===void 0||e.isPresent!==o?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||nt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Dm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;th=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function bk(t){const[e,n]=U2(),r=k.useContext(mm);return s.jsx(DS,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(ek),isPresent:e,safeToRemove:n})}function MS(t,e,n){const r=Lt(t)?t:Zi(t);return r.start(qm("",r,e,n)),r.animation}const VS=(t,e)=>t.depth-e.depth;class LS{constructor(){this.children=[],this.isDirty=!1}add(e){xm(this.children,e),this.isDirty=!0}remove(e){ym(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(VS),this.isDirty=!1,this.children.forEach(e)}}function OS(t,e){const n=un.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(Er(r),t(o-e))};return nt.setup(r,!0),()=>Er(r)}const wk=["TopLeft","TopRight","BottomLeft","BottomRight"],FS=wk.length,_y=t=>typeof t=="string"?parseFloat(t):t,zy=t=>typeof t=="number"||ze.test(t);function BS(t,e,n,r,i,o){i?(t.opacity=st(0,n.opacity??1,US(r)),t.opacityExit=st(e.opacity??1,0,$S(r))):o&&(t.opacity=st(e.opacity??1,n.opacity??1,r));for(let a=0;a<FS;a++){const l=`border${wk[a]}Radius`;let c=Cy(e,l),d=Cy(n,l);if(c===void 0&&d===void 0)continue;c||(c=0),d||(d=0),c===0||d===0||zy(c)===zy(d)?(t[l]=Math.max(st(_y(c),_y(d),r),0),(sr.test(d)||sr.test(c))&&(t[l]+="%")):t[l]=d}(e.rotate||n.rotate)&&(t.rotate=st(e.rotate||0,n.rotate||0,r))}function Cy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const US=kk(0,.5,o2),$S=kk(.5,.95,Tn);function kk(t,e,n){return r=>r<t?0:r>e?1:n(Fa(t,e,r))}function Ey(t,e){t.min=e.min,t.max=e.max}function Mn(t,e){Ey(t.x,e.x),Ey(t.y,e.y)}function Sy(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Ty(t,e,n,r,i){return t-=e,t=tu(t,1/n,r),i!==void 0&&(t=tu(t,1/i,r)),t}function WS(t,e=0,n=1,r=.5,i,o=t,a=t){if(sr.test(e)&&(e=parseFloat(e),e=st(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=st(o.min,o.max,r);t===o&&(l-=e),t.min=Ty(t.min,e,n,l,i),t.max=Ty(t.max,e,n,l,i)}function Iy(t,e,[n,r,i],o,a){WS(t,e[n],e[r],e[i],e.scale,o,a)}const qS=["x","scaleX","originX"],HS=["y","scaleY","originY"];function Ay(t,e,n,r){Iy(t.x,e,qS,n?n.x:void 0,r?r.x:void 0),Iy(t.y,e,HS,n?n.y:void 0,r?r.y:void 0)}function Py(t){return t.translate===0&&t.scale===1}function jk(t){return Py(t.x)&&Py(t.y)}function Ry(t,e){return t.min===e.min&&t.max===e.max}function GS(t,e){return Ry(t.x,e.x)&&Ry(t.y,e.y)}function Dy(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Nk(t,e){return Dy(t.x,e.x)&&Dy(t.y,e.y)}function My(t){return Zt(t.x)/Zt(t.y)}function Vy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class KS{constructor(){this.members=[]}add(e){xm(this.members,e),e.scheduleRender()}remove(e){if(ym(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QS(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((i||o||a)&&(r=`translate3d(${i}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:f,rotateY:m,skewX:y,skewY:_}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),_&&(r+=`skewY(${_}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const nh=["","X","Y","Z"],YS=1e3;let XS=0;function rh(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function _k(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=uk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",nt,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&_k(r)}function zk({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(a={},l=e==null?void 0:e()){this.id=XS++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eT),this.nodes.forEach(iT),this.nodes.forEach(sT),this.nodes.forEach(tT)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new LS)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new wm),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=B2(a)&&!UC(a),this.instance=a;const{layoutId:l,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,f=0;const m=()=>this.root.updateBlockedByResize=!1;nt.read(()=>{f=window.innerWidth}),t(a,()=>{const y=window.innerWidth;y!==f&&(f=y,this.root.updateBlockedByResize=!0,h&&h(),h=OS(m,250),gc.hasAnimatedSinceResize&&(gc.hasAnimatedSinceResize=!1,this.nodes.forEach(Fy)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const _=this.options.transition||d.getDefaultTransition()||uT,{onLayoutAnimationStart:A,onLayoutAnimationComplete:P}=d.getProps(),w=!this.targetLayout||!Nk(this.targetLayout,y),b=!f&&m;if(this.options.layoutRoot||this.resumeFrom||b||f&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const j={...Pm(_,"layout"),onPlay:A,onComplete:P};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j),this.setAnimationOrigin(h,b)}else f||Fy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Er(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oT),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&_k(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Ly);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Oy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rT),this.nodes.forEach(JS),this.nodes.forEach(ZS)):this.nodes.forEach(Oy),this.clearAllSnapshots();const l=un.now();Dt.delta=zr(0,1e3/60,l-Dt.timestamp),Dt.timestamp=l,Dt.isProcessing=!0,qd.update.process(Dt),qd.preRender.process(Dt),qd.render.process(Dt),Dt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Dm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nT),this.sharedNodes.forEach(aT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Zt(this.snapshot.measuredBox.x)&&!Zt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=Nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!jk(this.projectionDelta),c=this.getTransformTemplate(),d=c?c(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;a&&this.instance&&(l||Pi(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),dT(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var d;const{visualElement:a}=this.options;if(!a)return Nt();const l=a.measureViewportBox();if(!(((d=this.scroll)==null?void 0:d.wasRoot)||this.path.some(hT))){const{scroll:h}=this.root;h&&(Rs(l.x,h.offset.x),Rs(l.y,h.offset.y))}return l}removeElementScroll(a){var c;const l=Nt();if(Mn(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Mn(l,a),Rs(l.x,f.offset.x),Rs(l.y,f.offset.y))}return l}applyTransform(a,l=!1){const c=Nt();Mn(c,a);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Ds(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Pi(h.latestValues)&&Ds(c,h.latestValues)}return Pi(this.latestValues)&&Ds(c,this.latestValues),c}removeTransform(a){const l=Nt();Mn(l,a);for(let c=0;c<this.path.length;c++){const d=this.path[c];if(!d.instance||!Pi(d.latestValues))continue;P0(d.latestValues)&&d.updateSnapshot();const h=Nt(),f=d.measurePageBox();Mn(h,f),Ay(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Pi(this.latestValues)&&Ay(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Dt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:f}=this.options;if(!this.layout||!(h||f))return;this.resolvedRelativeTargetAt=Dt.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Nt(),this.targetWithTransforms=Nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),bS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Mn(this.target,this.layout.layoutBox),ik(this.target,this.targetDelta)):Mn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||P0(this.parent.latestValues)||rk(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(a,l,c){this.relativeParent=a,this.linkedParentVersion=a.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Nt(),this.relativeTargetOrigin=Nt(),nu(this.relativeTargetOrigin,l,c),Mn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var _;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(_=this.parent)!=null&&_.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Dt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Mn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;AE(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Nt());const{target:y}=a;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Sy(this.prevProjectionDelta.x,this.projectionDelta.x),Sy(this.prevProjectionDelta.y,this.projectionDelta.y)),xa(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!Vy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ms(),this.projectionDelta=Ms(),this.projectionDeltaWithTransform=Ms()}setAnimationOrigin(a,l=!1){const c=this.snapshot,d=c?c.latestValues:{},h={...this.latestValues},f=Ms();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=Nt(),y=c?c.source:void 0,_=this.layout?this.layout.source:void 0,A=y!==_,P=this.getStack(),w=!P||P.members.length<=1,b=!!(A&&!w&&this.options.crossfade===!0&&!this.path.some(cT));this.animationProgress=0;let j;this.mixTargetDelta=R=>{const L=R/1e3;By(f.x,a.x,L),By(f.y,a.y,L),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(nu(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lT(this.relativeTarget,this.relativeTargetOrigin,m,L),j&&GS(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=Nt()),Mn(j,this.relativeTarget)),A&&(this.animationValues=h,BS(h,d,this.latestValues,L,b,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,d;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(d=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||d.stop(),this.pendingAnimation&&(Er(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=nt.update(()=>{gc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Zi(0)),this.currentAnimation=MS(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),a.onUpdate&&a.onUpdate(h)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(YS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:d,latestValues:h}=a;if(!(!l||!c||!d)){if(this!==a&&this.layout&&d&&Ck(this.options.animationType,this.layout.layoutBox,d.layoutBox)){c=this.target||Nt();const f=Zt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const m=Zt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}Mn(l,c),Ds(l,h),xa(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new KS),this.sharedNodes.get(a).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const d=this.getStack();d&&d.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const d={};c.z&&rh("z",a,d,this.animationValues);for(let h=0;h<nh.length;h++)rh(`rotate${nh[h]}`,a,d,this.animationValues),rh(`skew${nh[h]}`,a,d,this.animationValues);a.render();for(const h in d)a.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=pc(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=pc(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Pi(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let f=QS(this.projectionDeltaWithTransform,this.treeScale,h);c&&(f=c(h,f)),a.transform=f;const{x:m,y}=this.projectionDelta;a.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,d.animationValues?a.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:a.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const _ in A0){if(h[_]===void 0)continue;const{correct:A,applyTo:P,isCSSVariable:w}=A0[_],b=f==="none"?h[_]:A(h[_],d);if(P){const j=P.length;for(let R=0;R<j;R++)a[P[R]]=b}else w?this.options.visualElement.renderState.vars[_]=b:a[_]=b}this.options.layoutId&&(a.pointerEvents=d===this?pc(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(Ly),this.root.sharedNodes.clear()}}}function JS(t){t.updateLayout()}function ZS(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,a=e.source!==t.layout.source;o==="size"?kn(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],y=Zt(m);m.min=r[f].min,m.max=m.min+y}):Ck(o,e.layoutBox,r)&&kn(f=>{const m=a?e.measuredBox[f]:e.layoutBox[f],y=Zt(r[f]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+y)});const l=Ms();xa(l,r,e.layoutBox);const c=Ms();a?xa(c,t.applyTransform(i,!0),e.measuredBox):xa(c,r,e.layoutBox);const d=!jk(l);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const _=Nt();nu(_,e.layoutBox,m.layoutBox);const A=Nt();nu(A,r,y.layoutBox),Nk(_,A)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=A,t.relativeTargetOrigin=_,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function eT(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nT(t){t.clearSnapshot()}function Ly(t){t.clearMeasurements()}function Oy(t){t.isLayoutDirty=!1}function rT(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Fy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iT(t){t.resolveTargetDelta()}function sT(t){t.calcProjection()}function oT(t){t.resetSkewAndRotation()}function aT(t){t.removeLeadSnapshot()}function By(t,e,n){t.translate=st(e.translate,0,n),t.scale=st(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Uy(t,e,n,r){t.min=st(e.min,n.min,r),t.max=st(e.max,n.max,r)}function lT(t,e,n,r){Uy(t.x,e.x,n.x,r),Uy(t.y,e.y,n.y,r)}function cT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const uT={duration:.45,ease:[.4,0,.1,1]},$y=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Wy=$y("applewebkit/")&&!$y("chrome/")?Math.round:Tn;function qy(t){t.min=Wy(t.min),t.max=Wy(t.max)}function dT(t){qy(t.x),qy(t.y)}function Ck(t,e,n){return t==="position"||t==="preserve-aspect"&&!vS(My(e),My(n),.2)}function hT(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const fT=zk({attachResizeListener:(t,e)=>Wa(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ih={current:void 0},Ek=zk({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ih.current){const t=new fT({});t.mount(window),t.setOptions({layoutScroll:!0}),ih.current=t}return ih.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),mT={pan:{Feature:RS},drag:{Feature:PS,ProjectionNode:Ek,MeasureLayout:bk}};function Hy(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&nt.postRender(()=>o(e,ll(e)))}class pT extends Ni{mount(){const{current:e}=this.node;e&&(this.unmount=VC(e,(n,r)=>(Hy(this.node,r,"Start"),i=>Hy(this.node,i,"End"))))}unmount(){}}class gT extends Ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sl(Wa(this.node.current,"focus",()=>this.onFocus()),Wa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Gy(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&nt.postRender(()=>o(e,ll(e)))}class xT extends Ni{mount(){const{current:e}=this.node;e&&(this.unmount=BC(e,(n,r)=>(Gy(this.node,r,"Start"),(i,{success:o})=>Gy(this.node,i,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const F0=new WeakMap,sh=new WeakMap,yT=t=>{const e=F0.get(t.target);e&&e(t)},vT=t=>{t.forEach(yT)};function bT({root:t,...e}){const n=t||document;sh.has(n)||sh.set(n,{});const r=sh.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(vT,{root:t,...e})),r[i]}function wT(t,e,n){const r=bT(e);return F0.set(t,n),r.observe(t),()=>{F0.delete(t),r.unobserve(t)}}const kT={some:0,all:1};class jT extends Ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:kT[i]},l=c=>{const{isIntersecting:d}=c;if(this.isInView===d||(this.isInView=d,o&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=d?h:f;m&&m(c)};return wT(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(NT(e,n))&&this.startObserver()}unmount(){}}function NT({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const _T={inView:{Feature:jT},tap:{Feature:xT},focus:{Feature:gT},hover:{Feature:pT}},zT={layout:{ProjectionNode:Ek,MeasureLayout:bk}},CT={...fS,..._T,...mT,...zT},Q=SE(CT,UE);function ru(t){const e=ji(()=>Zi(t)),{isStatic:n}=k.useContext(Mu);if(n){const[,r]=k.useState(t);k.useEffect(()=>e.on("change",r),[])}return e}function Sk(t,e){const n=ru(e()),r=()=>n.set(e());return r(),gm(()=>{const i=()=>nt.preRender(r,!1,!0),o=t.map(a=>a.on("change",i));return()=>{o.forEach(a=>a()),Er(r)}}),n}function ET(t){pa.current=[],t();const e=Sk(pa.current,t);return pa.current=void 0,e}function ST(t,e,n,r){if(typeof t=="function")return ET(t);const i=typeof e=="function"?e:$C(e,n,r);return Array.isArray(t)?Ky(t,i):Ky([t],([o])=>i(o))}function Ky(t,e){const n=ji(()=>[]);return Sk(t,()=>{n.length=0;const r=t.length;for(let i=0;i<r;i++)n[i]=t[i].get();return e(n)})}class TT{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const IT=()=>new TT;function Hm(){return ji(IT)}const Tk=k.createContext(null);function AT(t,e,n,r){if(!r)return t;const i=t.findIndex(h=>h.value===e);if(i===-1)return t;const o=r>0?1:-1,a=t[i+o];if(!a)return t;const l=t[i],c=a.layout,d=st(c.min,c.max,.5);return o===1&&l.layout.max+n>d||o===-1&&l.layout.min+n<d?Q_(t,i,i+o):t}function PT({children:t,as:e="ul",axis:n="y",onReorder:r,values:i,...o},a){const l=ji(()=>Q[e]),c=[],d=k.useRef(!1),h={axis:n,registerItem:(f,m)=>{const y=c.findIndex(_=>f===_.value);y!==-1?c[y].layout=m[n]:c.push({value:f,layout:m[n]}),c.sort(DT)},updateOrder:(f,m,y)=>{if(d.current)return;const _=AT(c,f,m,y);c!==_&&(d.current=!0,r(_.map(RT).filter(A=>i.indexOf(A)!==-1)))}};return k.useEffect(()=>{d.current=!1}),s.jsx(l,{...o,ref:a,ignoreStrict:!0,children:s.jsx(Tk.Provider,{value:h,children:t})})}const Fu=k.forwardRef(PT);function RT(t){return t.value}function DT(t,e){return t.layout.min-e.layout.min}function Qy(t,e=0){return Lt(t)?t:ru(e)}function MT({children:t,style:e={},value:n,as:r="li",onDrag:i,layout:o=!0,...a},l){const c=ji(()=>Q[r]),d=k.useContext(Tk),h={x:Qy(e.x),y:Qy(e.y)},f=ST([h.x,h.y],([A,P])=>A||P?1:"unset"),{axis:m,registerItem:y,updateOrder:_}=d;return s.jsx(c,{drag:m,...a,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:f},layout:o,onDrag:(A,P)=>{const{velocity:w}=P;w[m]&&_(n,h[m].get(),w[m]),i&&i(A,P)},onLayoutMeasure:A=>y(n,A),ref:l,ignoreStrict:!0,children:t})}const Bu=k.forwardRef(MT);function Yy({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return s.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>s.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const Qt=t=>{k.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth,n=window.getComputedStyle(document.body).overflow,r=window.getComputedStyle(document.body).paddingRight;return document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${parseInt(r||0)+e}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=r}},[t])},VT=()=>{};var Xy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},LT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],l=t[n++],c=((i&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Ak={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,l=a?t[i+1]:0,c=i+2<t.length,d=c?t[i+2]:0,h=o>>2,f=(o&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,a||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ik(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||d==null||f==null)throw new OT;const m=o<<2|l>>4;if(r.push(m),d!==64){const y=l<<4&240|d>>2;if(r.push(y),f!==64){const _=d<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class OT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FT=function(t){const e=Ik(t);return Ak.encodeByteArray(e,!0)},iu=function(t){return FT(t).replace(/\./g,"")},BT=function(t){try{return Ak.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T=()=>UT().__FIREBASE_DEFAULTS__,WT=()=>{if(typeof process>"u"||typeof Xy>"u")return;const t=Xy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&BT(t[1]);return e&&JSON.parse(e)},Gm=()=>{try{return VT()||$T()||WT()||qT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},HT=t=>{var e,n;return(n=(e=Gm())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},GT=t=>{const e=HT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Pk=()=>{var t;return(t=Gm())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function QT(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[iu(JSON.stringify(n)),iu(JSON.stringify(a)),""].join(".")}const ya={};function XT(){const t={prod:[],emulator:[]};for(const e of Object.keys(ya))ya[e]?t.emulator.push(e):t.prod.push(e);return t}function JT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Jy=!1;function ZT(t,e){if(typeof window>"u"||typeof document>"u"||!Km(window.location.host)||ya[t]===e||ya[t]||Jy)return;ya[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",o=XT().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{Jy=!0,a()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=JT(r),y=n("text"),_=document.getElementById(y)||document.createElement("span"),A=n("learnmore"),P=document.getElementById(A)||document.createElement("a"),w=n("preprendIcon"),b=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const j=m.element;l(j),h(P,A);const R=d();c(b,w),j.append(b,_,P,R),document.body.appendChild(j)}o?(_.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tI(){var e;const t=(e=Gm())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function rI(){return!tI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Rk(){try{return typeof indexedDB=="object"}catch{return!1}}function Dk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function iI(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="FirebaseError";class _i extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sI,Object.setPrototypeOf(this,_i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?oI(o,r):"Error",l=`${this.serviceName}: ${a} (${i}).`;return new _i(i,l,r)}}function oI(t,e){return t.replace(aI,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const aI=/\{\$([^}]+)}/g;function qa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(Zy(o)&&Zy(a)){if(!qa(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Zy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=1e3,cI=2,uI=4*60*60*1e3,dI=.5;function ev(t,e=lI,n=cI){const r=e*Math.pow(n,t),i=Math.round(dI*r*(Math.random()-.5)*2);return Math.min(uI,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){return t&&t._delegate?t._delegate:t}class Tr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mI(e))try{this.getOrInitializeService({instanceIdentifier:Ri})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ri){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ri){return this.instances.has(e)}getOptions(e=Ri){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ri){return this.component?this.component.multipleInstances?e:Ri:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fI(t){return t===Ri?void 0:t}function mI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hI(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Fe||(Fe={}));const gI={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},xI=Fe.INFO,yI={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},vI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=yI[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qm{constructor(e){this.name=e,this._logLevel=xI,this._logHandler=vI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const bI=(t,e)=>e.some(n=>t instanceof n);let tv,nv;function wI(){return tv||(tv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function kI(){return nv||(nv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mk=new WeakMap,B0=new WeakMap,Vk=new WeakMap,oh=new WeakMap,Ym=new WeakMap;function jI(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(si(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Mk.set(n,t)}).catch(()=>{}),Ym.set(e,t),e}function NI(t){if(B0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});B0.set(t,e)}let U0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return B0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vk.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return si(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function _I(t){U0=t(U0)}function zI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ah(this),e,...n);return Vk.set(r,e.sort?e.sort():[e]),si(r)}:kI().includes(t)?function(...e){return t.apply(ah(this),e),si(Mk.get(this))}:function(...e){return si(t.apply(ah(this),e))}}function CI(t){return typeof t=="function"?zI(t):(t instanceof IDBTransaction&&NI(t),bI(t,wI())?new Proxy(t,U0):t)}function si(t){if(t instanceof IDBRequest)return jI(t);if(oh.has(t))return oh.get(t);const e=CI(t);return e!==t&&(oh.set(t,e),Ym.set(e,t)),e}const ah=t=>Ym.get(t);function Lk(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),l=si(a);return r&&a.addEventListener("upgradeneeded",c=>{r(si(a.result),c.oldVersion,c.newVersion,si(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const EI=["get","getKey","getAll","getAllKeys","count"],SI=["put","add","delete","clear"],lh=new Map;function rv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(lh.get(e))return lh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=SI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||EI.includes(n)))return;const o=async function(a,...l){const c=this.transaction(a,i?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),i&&c.done]))[0]};return lh.set(e,o),o}_I(t=>({...t,get:(e,n,r)=>rv(e,n)||t.get(e,n,r),has:(e,n)=>!!rv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(II(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function II(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $0="@firebase/app",iv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir=new Qm("@firebase/app"),AI="@firebase/app-compat",PI="@firebase/analytics-compat",RI="@firebase/analytics",DI="@firebase/app-check-compat",MI="@firebase/app-check",VI="@firebase/auth",LI="@firebase/auth-compat",OI="@firebase/database",FI="@firebase/data-connect",BI="@firebase/database-compat",UI="@firebase/functions",$I="@firebase/functions-compat",WI="@firebase/installations",qI="@firebase/installations-compat",HI="@firebase/messaging",GI="@firebase/messaging-compat",KI="@firebase/performance",QI="@firebase/performance-compat",YI="@firebase/remote-config",XI="@firebase/remote-config-compat",JI="@firebase/storage",ZI="@firebase/storage-compat",e3="@firebase/firestore",t3="@firebase/ai",n3="@firebase/firestore-compat",r3="firebase",i3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0="[DEFAULT]",s3={[$0]:"fire-core",[AI]:"fire-core-compat",[RI]:"fire-analytics",[PI]:"fire-analytics-compat",[MI]:"fire-app-check",[DI]:"fire-app-check-compat",[VI]:"fire-auth",[LI]:"fire-auth-compat",[OI]:"fire-rtdb",[FI]:"fire-data-connect",[BI]:"fire-rtdb-compat",[UI]:"fire-fn",[$I]:"fire-fn-compat",[WI]:"fire-iid",[qI]:"fire-iid-compat",[HI]:"fire-fcm",[GI]:"fire-fcm-compat",[KI]:"fire-perf",[QI]:"fire-perf-compat",[YI]:"fire-rc",[XI]:"fire-rc-compat",[JI]:"fire-gcs",[ZI]:"fire-gcs-compat",[e3]:"fire-fst",[n3]:"fire-fst-compat",[t3]:"fire-vertex","fire-js":"fire-js",[r3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const su=new Map,o3=new Map,q0=new Map;function sv(t,e){try{t.container.addComponent(e)}catch(n){Ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hi(t){const e=t.name;if(q0.has(e))return Ir.debug(`There were multiple attempts to register component ${e}.`),!1;q0.set(e,t);for(const n of su.values())sv(n,t);for(const n of o3.values())sv(n,t);return!0}function cl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function a3(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oi=new Uu("app","Firebase",l3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Tr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u3=i3;function Ok(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:W0,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw oi.create("bad-app-name",{appName:String(i)});if(n||(n=Pk()),!n)throw oi.create("no-options");const o=su.get(i);if(o){if(qa(n,o.options)&&qa(r,o.config))return o;throw oi.create("duplicate-app",{appName:i})}const a=new pI(i);for(const c of q0.values())a.addComponent(c);const l=new c3(n,r,a);return su.set(i,l),l}function Fk(t=W0){const e=su.get(t);if(!e&&t===W0&&Pk())return Ok();if(!e)throw oi.create("no-app",{appName:t});return e}function or(t,e,n){let r=s3[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ir.warn(a.join(" "));return}hi(new Tr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="firebase-heartbeat-database",h3=1,Ha="firebase-heartbeat-store";let ch=null;function Bk(){return ch||(ch=Lk(d3,h3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ha)}catch(n){console.warn(n)}}}}).catch(t=>{throw oi.create("idb-open",{originalErrorMessage:t.message})})),ch}async function f3(t){try{const n=(await Bk()).transaction(Ha),r=await n.objectStore(Ha).get(Uk(t));return await n.done,r}catch(e){if(e instanceof _i)Ir.warn(e.message);else{const n=oi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ir.warn(n.message)}}}async function ov(t,e){try{const r=(await Bk()).transaction(Ha,"readwrite");await r.objectStore(Ha).put(e,Uk(t)),await r.done}catch(n){if(n instanceof _i)Ir.warn(n.message);else{const r=oi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ir.warn(r.message)}}}function Uk(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3=1024,p3=30;class g3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new y3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=av();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>p3){const a=v3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=av(),{heartbeatsToSend:r,unsentEntries:i}=x3(this._heartbeatsCache.heartbeats),o=iu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ir.warn(n),""}}}function av(){return new Date().toISOString().substring(0,10)}function x3(t,e=m3){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),lv(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),lv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class y3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Rk()?Dk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await f3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ov(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return ov(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function lv(t){return iu(JSON.stringify({version:2,heartbeats:t})).length}function v3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b3(t){hi(new Tr("platform-logger",e=>new TI(e),"PRIVATE")),hi(new Tr("heartbeat",e=>new g3(e),"PRIVATE")),or($0,iv,t),or($0,iv,"esm2020"),or("fire-js","")}b3("");var w3="firebase",k3="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(w3,k3,"app");const $k="@firebase/installations",Xm="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=1e4,qk=`w:${Xm}`,Hk="FIS_v2",j3="https://firebaseinstallations.googleapis.com/v1",N3=60*60*1e3,_3="installations",z3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},es=new Uu(_3,z3,C3);function Gk(t){return t instanceof _i&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk({projectId:t}){return`${j3}/projects/${t}/installations`}function Qk(t){return{token:t.token,requestStatus:2,expiresIn:S3(t.expiresIn),creationTime:Date.now()}}async function Yk(t,e){const r=(await e.json()).error;return es.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Xk({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function E3(t,{refreshToken:e}){const n=Xk(t);return n.append("Authorization",T3(e)),n}async function Jk(t){const e=await t();return e.status>=500&&e.status<600?t():e}function S3(t){return Number(t.replace("s","000"))}function T3(t){return`${Hk} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Kk(t),i=Xk(t),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={fid:n,authVersion:Hk,appId:t.appId,sdkVersion:qk},l={method:"POST",headers:i,body:JSON.stringify(a)},c=await Jk(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Qk(d.authToken)}}else throw await Yk("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=/^[cdef][\w-]{21}$/,H0="";function R3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=D3(t);return P3.test(n)?n:H0}catch{return H0}}function D3(t){return A3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new Map;function tj(t,e){const n=$u(t);nj(n,e),M3(n,e)}function nj(t,e){const n=ej.get(t);if(n)for(const r of n)r(e)}function M3(t,e){const n=V3();n&&n.postMessage({key:t,fid:e}),L3()}let Bi=null;function V3(){return!Bi&&"BroadcastChannel"in self&&(Bi=new BroadcastChannel("[Firebase] FID Change"),Bi.onmessage=t=>{nj(t.data.key,t.data.fid)}),Bi}function L3(){ej.size===0&&Bi&&(Bi.close(),Bi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3="firebase-installations-database",F3=1,ts="firebase-installations-store";let uh=null;function Jm(){return uh||(uh=Lk(O3,F3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ts)}}})),uh}async function ou(t,e){const n=$u(t),i=(await Jm()).transaction(ts,"readwrite"),o=i.objectStore(ts),a=await o.get(n);return await o.put(e,n),await i.done,(!a||a.fid!==e.fid)&&tj(t,e.fid),e}async function rj(t){const e=$u(t),r=(await Jm()).transaction(ts,"readwrite");await r.objectStore(ts).delete(e),await r.done}async function Wu(t,e){const n=$u(t),i=(await Jm()).transaction(ts,"readwrite"),o=i.objectStore(ts),a=await o.get(n),l=e(a);return l===void 0?await o.delete(n):await o.put(l,n),await i.done,l&&(!a||a.fid!==l.fid)&&tj(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(t){let e;const n=await Wu(t.appConfig,r=>{const i=B3(r),o=U3(t,i);return e=o.registrationPromise,o.installationEntry});return n.fid===H0?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function B3(t){const e=t||{fid:R3(),registrationStatus:0};return ij(e)}function U3(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(es.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=$3(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:W3(t)}:{installationEntry:e}}async function $3(t,e){try{const n=await I3(t,e);return ou(t.appConfig,n)}catch(n){throw Gk(n)&&n.customData.serverCode===409?await rj(t.appConfig):await ou(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function W3(t){let e=await cv(t.appConfig);for(;e.registrationStatus===1;)await Zk(100),e=await cv(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Zm(t);return r||n}return e}function cv(t){return Wu(t,e=>{if(!e)throw es.create("installation-not-found");return ij(e)})}function ij(t){return q3(t)?{fid:t.fid,registrationStatus:0}:t}function q3(t){return t.registrationStatus===1&&t.registrationTime+Wk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3({appConfig:t,heartbeatServiceProvider:e},n){const r=G3(t,n),i=E3(t,n),o=e.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&i.append("x-firebase-client",d)}const a={installation:{sdkVersion:qk,appId:t.appId}},l={method:"POST",headers:i,body:JSON.stringify(a)},c=await Jk(()=>fetch(r,l));if(c.ok){const d=await c.json();return Qk(d)}else throw await Yk("Generate Auth Token",c)}function G3(t,{fid:e}){return`${Kk(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ep(t,e=!1){let n;const r=await Wu(t.appConfig,o=>{if(!sj(o))throw es.create("not-registered");const a=o.authToken;if(!e&&Y3(a))return o;if(a.requestStatus===1)return n=K3(t,e),o;{if(!navigator.onLine)throw es.create("app-offline");const l=J3(o);return n=Q3(t,l),l}});return n?await n:r.authToken}async function K3(t,e){let n=await uv(t.appConfig);for(;n.authToken.requestStatus===1;)await Zk(100),n=await uv(t.appConfig);const r=n.authToken;return r.requestStatus===0?ep(t,e):r}function uv(t){return Wu(t,e=>{if(!sj(e))throw es.create("not-registered");const n=e.authToken;return Z3(n)?{...e,authToken:{requestStatus:0}}:e})}async function Q3(t,e){try{const n=await H3(t,e),r={...e,authToken:n};return await ou(t.appConfig,r),n}catch(n){if(Gk(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await rj(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await ou(t.appConfig,r)}throw n}}function sj(t){return t!==void 0&&t.registrationStatus===2}function Y3(t){return t.requestStatus===2&&!X3(t)}function X3(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+N3}function J3(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function Z3(t){return t.requestStatus===1&&t.requestTime+Wk<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(t){const e=t,{installationEntry:n,registrationPromise:r}=await Zm(e);return r?r.catch(console.error):ep(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(t,e=!1){const n=t;return await nA(n),(await ep(n,e)).token}async function nA(t){const{registrationPromise:e}=await Zm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA(t){if(!t||!t.options)throw dh("App Configuration");if(!t.name)throw dh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw dh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function dh(t){return es.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj="installations",iA="installations-internal",sA=t=>{const e=t.getProvider("app").getImmediate(),n=rA(e),r=cl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},oA=t=>{const e=t.getProvider("app").getImmediate(),n=cl(e,oj).getImmediate();return{getId:()=>eA(n),getToken:i=>tA(n,i)}};function aA(){hi(new Tr(oj,sA,"PUBLIC")),hi(new Tr(iA,oA,"PRIVATE"))}aA();or($k,Xm);or($k,Xm,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au="analytics",lA="firebase_id",cA="origin",uA=60*1e3,dA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tp="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new Qm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},yn=new Uu("analytics","Analytics",hA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(t){if(!t.startsWith(tp)){const e=yn.create("invalid-gtag-resource",{gtagURL:t});return tn.warn(e.message),""}return t}function aj(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function mA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function pA(t,e){const n=mA("firebase-js-sdk-policy",{createScriptURL:fA}),r=document.createElement("script"),i=`${tp}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function gA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function xA(t,e,n,r,i,o){const a=r[i];try{if(a)await e[a];else{const c=(await aj(n)).find(d=>d.measurementId===i);c&&await e[c.appId]}}catch(l){tn.error(l)}t("config",i,o)}async function yA(t,e,n,r,i){try{let o=[];if(i&&i.send_to){let a=i.send_to;Array.isArray(a)||(a=[a]);const l=await aj(n);for(const c of a){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)o.push(h);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,i||{})}catch(o){tn.error(o)}}function vA(t,e,n,r){async function i(o,...a){try{if(o==="event"){const[l,c]=a;await yA(t,e,n,l,c)}else if(o==="config"){const[l,c]=a;await xA(t,e,n,r,l,c)}else if(o==="consent"){const[l,c]=a;t("consent",l,c)}else if(o==="get"){const[l,c,d]=a;t("get",l,c,d)}else if(o==="set"){const[l]=a;t("set",l)}else t(o,...a)}catch(l){tn.error(l)}}return i}function bA(t,e,n,r,i){let o=function(...a){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(o=window[i]),window[i]=vA(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}function wA(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(tp)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=30,jA=1e3;class NA{constructor(e={},n=jA){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const lj=new NA;function _A(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function zA(t){var a;const{appId:e,apiKey:n}=t,r={method:"GET",headers:_A(n)},i=dA.replace("{app-id}",e),o=await fetch(i,r);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();(a=c.error)!=null&&a.message&&(l=c.error.message)}catch{}throw yn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function CA(t,e=lj,n){const{appId:r,apiKey:i,measurementId:o}=t.options;if(!r)throw yn.create("no-app-id");if(!i){if(o)return{measurementId:o,appId:r};throw yn.create("no-api-key")}const a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new TA;return setTimeout(async()=>{l.abort()},uA),cj({appId:r,apiKey:i,measurementId:o},a,l,e)}async function cj(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=lj){var l;const{appId:o,measurementId:a}=t;try{await EA(r,e)}catch(c){if(a)return tn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw c}try{const c=await zA(t);return i.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!SA(d)){if(i.deleteThrottleMetadata(o),a)return tn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:a};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?ev(n,i.intervalMillis,kA):ev(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return i.setThrottleMetadata(o,f),tn.debug(`Calling attemptFetch again in ${h} millis`),cj(t,f,r,i)}}function EA(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(o),r(yn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function SA(t){if(!(t instanceof _i)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class TA{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function IA(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const o=await e,a={...r,send_to:o};t("event",n,a)}}async function AA(t,e,n,r){if(r&&r.global){const i={};for(const o of Object.keys(n))i[`user_properties.${o}`]=n[o];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PA(){if(Rk())try{await Dk()}catch(t){return tn.warn(yn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return tn.warn(yn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function RA(t,e,n,r,i,o,a){const l=CA(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&tn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>tn.error(m)),e.push(l);const c=PA().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);wA(o)||pA(o,d.measurementId),i("js",new Date);const f=(a==null?void 0:a.config)??{};return f[cA]="firebase",f.update=!0,h!=null&&(f[lA]=h),i("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.app=e}_delete(){return delete Ws[this.app.options.appId],Promise.resolve()}}let Ws={},dv=[];const hv={};let hh="dataLayer",MA="gtag",fv,np,mv=!1;function VA(){const t=[];if(nI()&&t.push("This is a browser extension environment."),iI()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=yn.create("invalid-analytics-context",{errorInfo:e});tn.warn(n.message)}}function LA(t,e,n){VA();const r=t.options.appId;if(!r)throw yn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)tn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw yn.create("no-api-key");if(Ws[r]!=null)throw yn.create("already-exists",{id:r});if(!mv){gA(hh);const{wrappedGtag:o,gtagCore:a}=bA(Ws,dv,hv,hh,MA);np=o,fv=a,mv=!0}return Ws[r]=RA(t,dv,hv,e,fv,hh,n),new DA(t)}function OA(t=Fk()){t=Sr(t);const e=cl(t,au);return e.isInitialized()?e.getImmediate():FA(t)}function FA(t,e={}){const n=cl(t,au);if(n.isInitialized()){const i=n.getImmediate();if(qa(e,n.getOptions()))return i;throw yn.create("already-initialized")}return n.initialize({options:e})}function BA(t,e,n){t=Sr(t),AA(np,Ws[t.app.options.appId],e,n).catch(r=>tn.error(r))}function UA(t,e,n,r){t=Sr(t),IA(np,Ws[t.app.options.appId],e,n,r).catch(i=>tn.error(i))}const pv="@firebase/analytics",gv="0.10.19";function $A(){hi(new Tr(au,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return LA(r,i,n)},"PUBLIC")),hi(new Tr("analytics-internal",t,"PRIVATE")),or(pv,gv),or(pv,gv,"esm2020");function t(e){try{const n=e.getProvider(au).getImmediate();return{logEvent:(r,i,o)=>UA(n,r,i,o),setUserProperties:(r,i)=>BA(n,r,i)}}catch(n){throw yn.create("interop-component-reg-failed",{reason:n})}}}$A();var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ai,uj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,x){function N(){}N.prototype=x.prototype,v.F=x.prototype,v.prototype=new N,v.prototype.constructor=v,v.D=function(C,z,I){for(var S=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)S[ke-2]=arguments[ke];return x.prototype[z].apply(C,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,x,N){N||(N=0);const C=Array(16);if(typeof x=="string")for(var z=0;z<16;++z)C[z]=x.charCodeAt(N++)|x.charCodeAt(N++)<<8|x.charCodeAt(N++)<<16|x.charCodeAt(N++)<<24;else for(z=0;z<16;++z)C[z]=x[N++]|x[N++]<<8|x[N++]<<16|x[N++]<<24;x=v.g[0],N=v.g[1],z=v.g[2];let I=v.g[3],S;S=x+(I^N&(z^I))+C[0]+3614090360&4294967295,x=N+(S<<7&4294967295|S>>>25),S=I+(z^x&(N^z))+C[1]+3905402710&4294967295,I=x+(S<<12&4294967295|S>>>20),S=z+(N^I&(x^N))+C[2]+606105819&4294967295,z=I+(S<<17&4294967295|S>>>15),S=N+(x^z&(I^x))+C[3]+3250441966&4294967295,N=z+(S<<22&4294967295|S>>>10),S=x+(I^N&(z^I))+C[4]+4118548399&4294967295,x=N+(S<<7&4294967295|S>>>25),S=I+(z^x&(N^z))+C[5]+1200080426&4294967295,I=x+(S<<12&4294967295|S>>>20),S=z+(N^I&(x^N))+C[6]+2821735955&4294967295,z=I+(S<<17&4294967295|S>>>15),S=N+(x^z&(I^x))+C[7]+4249261313&4294967295,N=z+(S<<22&4294967295|S>>>10),S=x+(I^N&(z^I))+C[8]+1770035416&4294967295,x=N+(S<<7&4294967295|S>>>25),S=I+(z^x&(N^z))+C[9]+2336552879&4294967295,I=x+(S<<12&4294967295|S>>>20),S=z+(N^I&(x^N))+C[10]+4294925233&4294967295,z=I+(S<<17&4294967295|S>>>15),S=N+(x^z&(I^x))+C[11]+2304563134&4294967295,N=z+(S<<22&4294967295|S>>>10),S=x+(I^N&(z^I))+C[12]+1804603682&4294967295,x=N+(S<<7&4294967295|S>>>25),S=I+(z^x&(N^z))+C[13]+4254626195&4294967295,I=x+(S<<12&4294967295|S>>>20),S=z+(N^I&(x^N))+C[14]+2792965006&4294967295,z=I+(S<<17&4294967295|S>>>15),S=N+(x^z&(I^x))+C[15]+1236535329&4294967295,N=z+(S<<22&4294967295|S>>>10),S=x+(z^I&(N^z))+C[1]+4129170786&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^z&(x^N))+C[6]+3225465664&4294967295,I=x+(S<<9&4294967295|S>>>23),S=z+(x^N&(I^x))+C[11]+643717713&4294967295,z=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(z^I))+C[0]+3921069994&4294967295,N=z+(S<<20&4294967295|S>>>12),S=x+(z^I&(N^z))+C[5]+3593408605&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^z&(x^N))+C[10]+38016083&4294967295,I=x+(S<<9&4294967295|S>>>23),S=z+(x^N&(I^x))+C[15]+3634488961&4294967295,z=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(z^I))+C[4]+3889429448&4294967295,N=z+(S<<20&4294967295|S>>>12),S=x+(z^I&(N^z))+C[9]+568446438&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^z&(x^N))+C[14]+3275163606&4294967295,I=x+(S<<9&4294967295|S>>>23),S=z+(x^N&(I^x))+C[3]+4107603335&4294967295,z=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(z^I))+C[8]+1163531501&4294967295,N=z+(S<<20&4294967295|S>>>12),S=x+(z^I&(N^z))+C[13]+2850285829&4294967295,x=N+(S<<5&4294967295|S>>>27),S=I+(N^z&(x^N))+C[2]+4243563512&4294967295,I=x+(S<<9&4294967295|S>>>23),S=z+(x^N&(I^x))+C[7]+1735328473&4294967295,z=I+(S<<14&4294967295|S>>>18),S=N+(I^x&(z^I))+C[12]+2368359562&4294967295,N=z+(S<<20&4294967295|S>>>12),S=x+(N^z^I)+C[5]+4294588738&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^z)+C[8]+2272392833&4294967295,I=x+(S<<11&4294967295|S>>>21),S=z+(I^x^N)+C[11]+1839030562&4294967295,z=I+(S<<16&4294967295|S>>>16),S=N+(z^I^x)+C[14]+4259657740&4294967295,N=z+(S<<23&4294967295|S>>>9),S=x+(N^z^I)+C[1]+2763975236&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^z)+C[4]+1272893353&4294967295,I=x+(S<<11&4294967295|S>>>21),S=z+(I^x^N)+C[7]+4139469664&4294967295,z=I+(S<<16&4294967295|S>>>16),S=N+(z^I^x)+C[10]+3200236656&4294967295,N=z+(S<<23&4294967295|S>>>9),S=x+(N^z^I)+C[13]+681279174&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^z)+C[0]+3936430074&4294967295,I=x+(S<<11&4294967295|S>>>21),S=z+(I^x^N)+C[3]+3572445317&4294967295,z=I+(S<<16&4294967295|S>>>16),S=N+(z^I^x)+C[6]+76029189&4294967295,N=z+(S<<23&4294967295|S>>>9),S=x+(N^z^I)+C[9]+3654602809&4294967295,x=N+(S<<4&4294967295|S>>>28),S=I+(x^N^z)+C[12]+3873151461&4294967295,I=x+(S<<11&4294967295|S>>>21),S=z+(I^x^N)+C[15]+530742520&4294967295,z=I+(S<<16&4294967295|S>>>16),S=N+(z^I^x)+C[2]+3299628645&4294967295,N=z+(S<<23&4294967295|S>>>9),S=x+(z^(N|~I))+C[0]+4096336452&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~z))+C[7]+1126891415&4294967295,I=x+(S<<10&4294967295|S>>>22),S=z+(x^(I|~N))+C[14]+2878612391&4294967295,z=I+(S<<15&4294967295|S>>>17),S=N+(I^(z|~x))+C[5]+4237533241&4294967295,N=z+(S<<21&4294967295|S>>>11),S=x+(z^(N|~I))+C[12]+1700485571&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~z))+C[3]+2399980690&4294967295,I=x+(S<<10&4294967295|S>>>22),S=z+(x^(I|~N))+C[10]+4293915773&4294967295,z=I+(S<<15&4294967295|S>>>17),S=N+(I^(z|~x))+C[1]+2240044497&4294967295,N=z+(S<<21&4294967295|S>>>11),S=x+(z^(N|~I))+C[8]+1873313359&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~z))+C[15]+4264355552&4294967295,I=x+(S<<10&4294967295|S>>>22),S=z+(x^(I|~N))+C[6]+2734768916&4294967295,z=I+(S<<15&4294967295|S>>>17),S=N+(I^(z|~x))+C[13]+1309151649&4294967295,N=z+(S<<21&4294967295|S>>>11),S=x+(z^(N|~I))+C[4]+4149444226&4294967295,x=N+(S<<6&4294967295|S>>>26),S=I+(N^(x|~z))+C[11]+3174756917&4294967295,I=x+(S<<10&4294967295|S>>>22),S=z+(x^(I|~N))+C[2]+718787259&4294967295,z=I+(S<<15&4294967295|S>>>17),S=N+(I^(z|~x))+C[9]+3951481745&4294967295,v.g[0]=v.g[0]+x&4294967295,v.g[1]=v.g[1]+(z+(S<<21&4294967295|S>>>11))&4294967295,v.g[2]=v.g[2]+z&4294967295,v.g[3]=v.g[3]+I&4294967295}r.prototype.v=function(v,x){x===void 0&&(x=v.length);const N=x-this.blockSize,C=this.C;let z=this.h,I=0;for(;I<x;){if(z==0)for(;I<=N;)i(this,v,I),I+=this.blockSize;if(typeof v=="string"){for(;I<x;)if(C[z++]=v.charCodeAt(I++),z==this.blockSize){i(this,C),z=0;break}}else for(;I<x;)if(C[z++]=v[I++],z==this.blockSize){i(this,C),z=0;break}}this.h=z,this.o+=x},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var x=1;x<v.length-8;++x)v[x]=0;x=this.o*8;for(var N=v.length-8;N<v.length;++N)v[N]=x&255,x/=256;for(this.v(v),v=Array(16),x=0,N=0;N<4;++N)for(let C=0;C<32;C+=8)v[x++]=this.g[N]>>>C&255;return v};function o(v,x){var N=l;return Object.prototype.hasOwnProperty.call(N,v)?N[v]:N[v]=x(v)}function a(v,x){this.h=x;const N=[];let C=!0;for(let z=v.length-1;z>=0;z--){const I=v[z]|0;C&&I==x||(N[z]=I,C=!1)}this.g=N}var l={};function c(v){return-128<=v&&v<128?o(v,function(x){return new a([x|0],x<0?-1:0)}):new a([v|0],v<0?-1:0)}function d(v){if(isNaN(v)||!isFinite(v))return f;if(v<0)return P(d(-v));const x=[];let N=1;for(let C=0;v>=N;C++)x[C]=v/N|0,N*=4294967296;return new a(x,0)}function h(v,x){if(v.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(v.charAt(0)=="-")return P(h(v.substring(1),x));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(x,8));let C=f;for(let I=0;I<v.length;I+=8){var z=Math.min(8,v.length-I);const S=parseInt(v.substring(I,I+z),x);z<8?(z=d(Math.pow(x,z)),C=C.j(z).add(d(S))):(C=C.j(N),C=C.add(d(S)))}return C}var f=c(0),m=c(1),y=c(16777216);t=a.prototype,t.m=function(){if(A(this))return-P(this).m();let v=0,x=1;for(let N=0;N<this.g.length;N++){const C=this.i(N);v+=(C>=0?C:4294967296+C)*x,x*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(_(this))return"0";if(A(this))return"-"+P(this).toString(v);const x=d(Math.pow(v,6));var N=this;let C="";for(;;){const z=R(N,x).g;N=w(N,z.j(x));let I=((N.g.length>0?N.g[0]:N.h)>>>0).toString(v);if(N=z,_(N))return I+C;for(;I.length<6;)I="0"+I;C=I+C}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function _(v){if(v.h!=0)return!1;for(let x=0;x<v.g.length;x++)if(v.g[x]!=0)return!1;return!0}function A(v){return v.h==-1}t.l=function(v){return v=w(this,v),A(v)?-1:_(v)?0:1};function P(v){const x=v.g.length,N=[];for(let C=0;C<x;C++)N[C]=~v.g[C];return new a(N,~v.h).add(m)}t.abs=function(){return A(this)?P(this):this},t.add=function(v){const x=Math.max(this.g.length,v.g.length),N=[];let C=0;for(let z=0;z<=x;z++){let I=C+(this.i(z)&65535)+(v.i(z)&65535),S=(I>>>16)+(this.i(z)>>>16)+(v.i(z)>>>16);C=S>>>16,I&=65535,S&=65535,N[z]=S<<16|I}return new a(N,N[N.length-1]&-2147483648?-1:0)};function w(v,x){return v.add(P(x))}t.j=function(v){if(_(this)||_(v))return f;if(A(this))return A(v)?P(this).j(P(v)):P(P(this).j(v));if(A(v))return P(this.j(P(v)));if(this.l(y)<0&&v.l(y)<0)return d(this.m()*v.m());const x=this.g.length+v.g.length,N=[];for(var C=0;C<2*x;C++)N[C]=0;for(C=0;C<this.g.length;C++)for(let z=0;z<v.g.length;z++){const I=this.i(C)>>>16,S=this.i(C)&65535,ke=v.i(z)>>>16,ue=v.i(z)&65535;N[2*C+2*z]+=S*ue,b(N,2*C+2*z),N[2*C+2*z+1]+=I*ue,b(N,2*C+2*z+1),N[2*C+2*z+1]+=S*ke,b(N,2*C+2*z+1),N[2*C+2*z+2]+=I*ke,b(N,2*C+2*z+2)}for(v=0;v<x;v++)N[v]=N[2*v+1]<<16|N[2*v];for(v=x;v<2*x;v++)N[v]=0;return new a(N,0)};function b(v,x){for(;(v[x]&65535)!=v[x];)v[x+1]+=v[x]>>>16,v[x]&=65535,x++}function j(v,x){this.g=v,this.h=x}function R(v,x){if(_(x))throw Error("division by zero");if(_(v))return new j(f,f);if(A(v))return x=R(P(v),x),new j(P(x.g),P(x.h));if(A(x))return x=R(v,P(x)),new j(P(x.g),x.h);if(v.g.length>30){if(A(v)||A(x))throw Error("slowDivide_ only works with positive integers.");for(var N=m,C=x;C.l(v)<=0;)N=L(N),C=L(C);var z=V(N,1),I=V(C,1);for(C=V(C,2),N=V(N,2);!_(C);){var S=I.add(C);S.l(v)<=0&&(z=z.add(N),I=S),C=V(C,1),N=V(N,1)}return x=w(v,z.j(x)),new j(z,x)}for(z=f;v.l(x)>=0;){for(N=Math.max(1,Math.floor(v.m()/x.m())),C=Math.ceil(Math.log(N)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),I=d(N),S=I.j(x);A(S)||S.l(v)>0;)N-=C,I=d(N),S=I.j(x);_(I)&&(I=m),z=z.add(I),v=w(v,S)}return new j(z,v)}t.B=function(v){return R(this,v).h},t.and=function(v){const x=Math.max(this.g.length,v.g.length),N=[];for(let C=0;C<x;C++)N[C]=this.i(C)&v.i(C);return new a(N,this.h&v.h)},t.or=function(v){const x=Math.max(this.g.length,v.g.length),N=[];for(let C=0;C<x;C++)N[C]=this.i(C)|v.i(C);return new a(N,this.h|v.h)},t.xor=function(v){const x=Math.max(this.g.length,v.g.length),N=[];for(let C=0;C<x;C++)N[C]=this.i(C)^v.i(C);return new a(N,this.h^v.h)};function L(v){const x=v.g.length+1,N=[];for(let C=0;C<x;C++)N[C]=v.i(C)<<1|v.i(C-1)>>>31;return new a(N,v.h)}function V(v,x){const N=x>>5;x%=32;const C=v.g.length-N,z=[];for(let I=0;I<C;I++)z[I]=x>0?v.i(I+N)>>>x|v.i(I+N+1)<<32-x:v.i(I+N);return new a(z,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,uj=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ai=a}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dj,ea,hj,xc,G0,fj,mj,pj;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var p=0;p<u.length;++p){var g=u[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function i(u,p){if(p)e:{var g=r;u=u.split(".");for(var E=0;E<u.length-1;E++){var U=u[E];if(!(U in g))break e;g=g[U]}u=u[u.length-1],E=g[u],p=p(E),p!=E&&p!=null&&e(g,u,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(u){return u||function(p){var g=[],E;for(E in p)Object.prototype.hasOwnProperty.call(p,E)&&g.push([E,p[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function c(u,p,g){return u.call.apply(u.bind,arguments)}function d(u,p,g){return d=c,d.apply(null,arguments)}function h(u,p){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function f(u,p){function g(){}g.prototype=p.prototype,u.Z=p.prototype,u.prototype=new g,u.prototype.constructor=u,u.Ob=function(E,U,G){for(var ce=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)ce[Ae-2]=arguments[Ae];return p.prototype[U].apply(E,ce)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){const p=u.length;if(p>0){const g=Array(p);for(let E=0;E<p;E++)g[E]=u[E];return g}return[]}function _(u,p){for(let E=1;E<arguments.length;E++){const U=arguments[E];var g=typeof U;if(g=g!="object"?g:U?Array.isArray(U)?"array":g:"null",g=="array"||g=="object"&&typeof U.length=="number"){g=u.length||0;const G=U.length||0;u.length=g+G;for(let ce=0;ce<G;ce++)u[g+ce]=U[ce]}else u.push(U)}}class A{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(u){a.setTimeout(()=>{throw u},0)}function w(){var u=v;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class b{constructor(){this.h=this.g=null}add(p,g){const E=j.get();E.set(p,g),this.h?this.h.next=E:this.g=E,this.h=E}}var j=new A(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,V=!1,v=new b,x=()=>{const u=Promise.resolve(void 0);L=()=>{u.then(N)}};function N(){for(var u;u=w();){try{u.h.call(u.g)}catch(g){P(g)}var p=j;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}V=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function z(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}z.prototype.h=function(){this.defaultPrevented=!0};var I=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return u}();function S(u){return/^[\s\xa0]*$/.test(u)}function ke(u,p){z.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}f(ke,z),ke.prototype.init=function(u,p){const g=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(g=="mouseover"?p=u.fromElement:g=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),ye=0;function we(u,p,g,E,U){this.listener=u,this.proxy=null,this.src=p,this.type=g,this.capture=!!E,this.ha=U,this.key=++ye,this.da=this.fa=!1}function Y(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function le(u,p,g){for(const E in u)p.call(g,u[E],E,u)}function Z(u,p){for(const g in u)p.call(void 0,u[g],g,u)}function ve(u){const p={};for(const g in u)p[g]=u[g];return p}const xe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(u,p){let g,E;for(let U=1;U<arguments.length;U++){E=arguments[U];for(g in E)u[g]=E[g];for(let G=0;G<xe.length;G++)g=xe[G],Object.prototype.hasOwnProperty.call(E,g)&&(u[g]=E[g])}}function D(u){this.src=u,this.g={},this.h=0}D.prototype.add=function(u,p,g,E,U){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const ce=W(u,p,E,U);return ce>-1?(p=u[ce],g||(p.fa=!1)):(p=new we(p,this.src,G,!!E,U),p.fa=g,u.push(p)),p};function $(u,p){const g=p.type;if(g in u.g){var E=u.g[g],U=Array.prototype.indexOf.call(E,p,void 0),G;(G=U>=0)&&Array.prototype.splice.call(E,U,1),G&&(Y(p),u.g[g].length==0&&(delete u.g[g],u.h--))}}function W(u,p,g,E){for(let U=0;U<u.length;++U){const G=u[U];if(!G.da&&G.listener==p&&G.capture==!!g&&G.ha==E)return U}return-1}var se="closure_lm_"+(Math.random()*1e6|0),T={};function O(u,p,g,E,U){if(Array.isArray(p)){for(let G=0;G<p.length;G++)O(u,p[G],g,E,U);return null}return g=ge(g),u&&u[ue]?u.J(p,g,l(E)?!!E.capture:!1,U):F(u,p,g,!1,E,U)}function F(u,p,g,E,U,G){if(!p)throw Error("Invalid event type");const ce=l(U)?!!U.capture:!!U;let Ae=ne(u);if(Ae||(u[se]=Ae=new D(u)),g=Ae.add(p,g,E,ce,G),g.proxy)return g;if(E=ee(),g.proxy=E,E.src=u,E.listener=g,u.addEventListener)I||(U=ce),U===void 0&&(U=!1),u.addEventListener(p.toString(),E,U);else if(u.attachEvent)u.attachEvent(B(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ee(){function u(g){return p.call(u.src,u.listener,g)}const p=re;return u}function fe(u,p,g,E,U){if(Array.isArray(p))for(var G=0;G<p.length;G++)fe(u,p[G],g,E,U);else E=l(E)?!!E.capture:!!E,g=ge(g),u&&u[ue]?(u=u.i,G=String(p).toString(),G in u.g&&(p=u.g[G],g=W(p,g,E,U),g>-1&&(Y(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete u.g[G],u.h--)))):u&&(u=ne(u))&&(p=u.g[p.toString()],u=-1,p&&(u=W(p,g,E,U)),(g=u>-1?p[u]:null)&&de(g))}function de(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ue])$(p.i,u);else{var g=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(g,E,u.capture):p.detachEvent?p.detachEvent(B(g),E):p.addListener&&p.removeListener&&p.removeListener(E),(g=ne(p))?($(g,u),g.h==0&&(g.src=null,p[se]=null)):Y(u)}}}function B(u){return u in T?T[u]:T[u]="on"+u}function re(u,p){if(u.da)u=!0;else{p=new ke(p,this);const g=u.listener,E=u.ha||u.src;u.fa&&de(u),u=g.call(E,p)}return u}function ne(u){return u=u[se],u instanceof D?u:null}var oe="__closure_events_fn_"+(Math.random()*1e9>>>0);function ge(u){return typeof u=="function"?u:(u[oe]||(u[oe]=function(p){return u.handleEvent(p)}),u[oe])}function be(){C.call(this),this.i=new D(this),this.M=this,this.G=null}f(be,C),be.prototype[ue]=!0,be.prototype.removeEventListener=function(u,p,g,E){fe(this,u,p,g,E)};function Te(u,p){var g,E=u.G;if(E)for(g=[];E;E=E.G)g.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new z(p,u);else if(p instanceof z)p.target=p.target||u;else{var U=p;p=new z(E,u),Pe(p,U)}U=!0;let G,ce;if(g)for(ce=g.length-1;ce>=0;ce--)G=p.g=g[ce],U=$e(G,E,!0,p)&&U;if(G=p.g=u,U=$e(G,E,!0,p)&&U,U=$e(G,E,!1,p)&&U,g)for(ce=0;ce<g.length;ce++)G=p.g=g[ce],U=$e(G,E,!1,p)&&U}be.prototype.N=function(){if(be.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const g=u.g[p];for(let E=0;E<g.length;E++)Y(g[E]);delete u.g[p],u.h--}}this.G=null},be.prototype.J=function(u,p,g,E){return this.i.add(String(u),p,!1,g,E)},be.prototype.K=function(u,p,g,E){return this.i.add(String(u),p,!0,g,E)};function $e(u,p,g,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let U=!0;for(let G=0;G<p.length;++G){const ce=p[G];if(ce&&!ce.da&&ce.capture==g){const Ae=ce.listener,jt=ce.ha||ce.src;ce.fa&&$(u.i,ce),U=Ae.call(jt,E)!==!1&&U}}return U&&!E.defaultPrevented}function Ve(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(u,p||0)}function Pt(u){u.g=Ve(()=>{u.g=null,u.i&&(u.i=!1,Pt(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class fr extends C{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Pt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sn(u){C.call(this),this.h=u,this.g={}}f(sn,C);var Kn=[];function Dr(u){le(u.g,function(p,g){this.g.hasOwnProperty(g)&&de(p)},u),u.g={}}sn.prototype.N=function(){sn.Z.N.call(this),Dr(this)},sn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var q=a.JSON.stringify,te=a.JSON.parse,Le=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function M(){}function K(){}var H={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ae(){z.call(this,"d")}f(ae,z);function Ie(){z.call(this,"c")}f(Ie,z);var Ne={},Ke=null;function Rn(){return Ke=Ke||new be}Ne.Ia="serverreachability";function gl(u){z.call(this,Ne.Ia,u)}f(gl,z);function wo(u){const p=Rn();Te(p,new gl(p))}Ne.STAT_EVENT="statevent";function Op(u,p){z.call(this,Ne.STAT_EVENT,u),this.stat=p}f(Op,z);function Yt(u){const p=Rn();Te(p,new Op(p,u))}Ne.Ja="timingevent";function Fp(u,p){z.call(this,Ne.Ja,u),this.size=p}f(Fp,z);function ko(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},p)}function jo(){this.g=!0}jo.prototype.ua=function(){this.g=!1};function nN(u,p,g,E,U,G){u.info(function(){if(u.g)if(G){var ce="",Ae=G.split("&");for(let Ge=0;Ge<Ae.length;Ge++){var jt=Ae[Ge].split("=");if(jt.length>1){const Et=jt[0];jt=jt[1];const Yn=Et.split("_");ce=Yn.length>=2&&Yn[1]=="type"?ce+(Et+"="+jt+"&"):ce+(Et+"=redacted&")}}}else ce=null;else ce=G;return"XMLHTTP REQ ("+E+") [attempt "+U+"]: "+p+`
`+g+`
`+ce})}function rN(u,p,g,E,U,G,ce){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+U+"]: "+p+`
`+g+`
`+G+" "+ce})}function ds(u,p,g,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+sN(u,g)+(E?" "+E:"")})}function iN(u,p){u.info(function(){return"TIMEOUT: "+p})}jo.prototype.info=function(){};function sN(u,p){if(!u.g)return p;if(!p)return null;try{const G=JSON.parse(p);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var g=G[u];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var U=E[0];if(U!="noop"&&U!="stop"&&U!="close")for(let ce=1;ce<E.length;ce++)E[ce]=""}}}}return q(G)}catch{return p}}var xl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bp={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Up;function sd(){}f(sd,M),sd.prototype.g=function(){return new XMLHttpRequest},Up=new sd;function No(u){return encodeURIComponent(String(u))}function oN(u){var p=1;u=u.split(":");const g=[];for(;p>0&&u.length;)g.push(u.shift()),p--;return u.length&&g.push(u.join(":")),g}function Mr(u,p,g,E){this.j=u,this.i=p,this.l=g,this.S=E||1,this.V=new sn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $p}function $p(){this.i=null,this.g="",this.h=!1}var Wp={},od={};function ad(u,p,g){u.M=1,u.A=vl(Qn(p)),u.u=g,u.R=!0,qp(u,null)}function qp(u,p){u.F=Date.now(),yl(u),u.B=Qn(u.A);var g=u.B,E=u.S;Array.isArray(E)||(E=[String(E)]),ig(g.i,"t",E),u.C=0,g=u.j.L,u.h=new $p,u.g=kg(u.j,g?p:null,!u.u),u.P>0&&(u.O=new fr(d(u.Y,u,u.g),u.P)),p=u.V,g=u.g,E=u.ba;var U="readystatechange";Array.isArray(U)||(U&&(Kn[0]=U.toString()),U=Kn);for(let G=0;G<U.length;G++){const ce=O(g,U[G],E||p.handleEvent,!1,p.h||p);if(!ce)break;p.g[ce.key]=ce}p=u.J?ve(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),wo(),nN(u.i,u.v,u.B,u.l,u.S,u.u)}Mr.prototype.ba=function(u){u=u.target;const p=this.O;p&&Or(u)==3?p.j():this.Y(u)},Mr.prototype.Y=function(u){try{if(u==this.g)e:{const Ae=Or(this.g),jt=this.g.ya(),Ge=this.g.ca();if(!(Ae<3)&&(Ae!=3||this.g&&(this.h.h||this.g.la()||dg(this.g)))){this.K||Ae!=4||jt==7||(jt==8||Ge<=0?wo(3):wo(2)),ld(this);var p=this.g.ca();this.X=p;var g=aN(this);if(this.o=p==200,rN(this.i,this.v,this.B,this.l,this.S,Ae,p),this.o){if(this.U&&!this.L){t:{if(this.g){var E,U=this.g;if((E=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(E)){var G=E;break t}}G=null}if(u=G)ds(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,cd(this,u);else{this.o=!1,this.m=3,Yt(12),zi(this),_o(this);break e}}if(this.R){u=!0;let Et;for(;!this.K&&this.C<g.length;)if(Et=lN(this,g),Et==od){Ae==4&&(this.m=4,Yt(14),u=!1),ds(this.i,this.l,null,"[Incomplete Response]");break}else if(Et==Wp){this.m=4,Yt(15),ds(this.i,this.l,g,"[Invalid Chunk]"),u=!1;break}else ds(this.i,this.l,Et,null),cd(this,Et);if(Hp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ae!=4||g.length!=0||this.h.h||(this.m=1,Yt(16),u=!1),this.o=this.o&&u,!u)ds(this.i,this.l,g,"[Invalid Chunked Response]"),zi(this),_o(this);else if(g.length>0&&!this.W){this.W=!0;var ce=this.j;ce.g==this&&ce.aa&&!ce.P&&(ce.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),xd(ce),ce.P=!0,Yt(11))}}else ds(this.i,this.l,g,null),cd(this,g);Ae==4&&zi(this),this.o&&!this.K&&(Ae==4?yg(this.j,this):(this.o=!1,yl(this)))}else kN(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),zi(this),_o(this)}}}catch{}finally{}};function aN(u){if(!Hp(u))return u.g.la();const p=dg(u.g);if(p==="")return"";let g="";const E=p.length,U=Or(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return zi(u),_o(u),"";u.h.i=new a.TextDecoder}for(let G=0;G<E;G++)u.h.h=!0,g+=u.h.i.decode(p[G],{stream:!(U&&G==E-1)});return p.length=0,u.h.g+=g,u.C=0,u.h.g}function Hp(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function lN(u,p){var g=u.C,E=p.indexOf(`
`,g);return E==-1?od:(g=Number(p.substring(g,E)),isNaN(g)?Wp:(E+=1,E+g>p.length?od:(p=p.slice(E,E+g),u.C=E+g,p)))}Mr.prototype.cancel=function(){this.K=!0,zi(this)};function yl(u){u.T=Date.now()+u.H,Gp(u,u.H)}function Gp(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=ko(d(u.aa,u),p)}function ld(u){u.D&&(a.clearTimeout(u.D),u.D=null)}Mr.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(iN(this.i,this.B),this.M!=2&&(wo(),Yt(17)),zi(this),this.m=2,_o(this)):Gp(this,this.T-u)};function _o(u){u.j.I==0||u.K||yg(u.j,u)}function zi(u){ld(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Dr(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function cd(u,p){try{var g=u.j;if(g.I!=0&&(g.g==u||ud(g.h,u))){if(!u.L&&ud(g.h,u)&&g.I==3){try{var E=g.Ba.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var U=E;if(U[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<u.F)Nl(g),kl(g);else break e;gd(g),Yt(18)}}else g.xa=U[1],0<g.xa-g.K&&U[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=ko(d(g.Va,g),6e3));Yp(g.h)<=1&&g.ta&&(g.ta=void 0)}else Ei(g,11)}else if((u.L||g.g==u)&&Nl(g),!S(p))for(U=g.Ba.g.parse(p),p=0;p<U.length;p++){let Ge=U[p];const Et=Ge[0];if(!(Et<=g.K))if(g.K=Et,Ge=Ge[1],g.I==2)if(Ge[0]=="c"){g.M=Ge[1],g.ba=Ge[2];const Yn=Ge[3];Yn!=null&&(g.ka=Yn,g.j.info("VER="+g.ka));const Si=Ge[4];Si!=null&&(g.za=Si,g.j.info("SVER="+g.za));const Fr=Ge[5];Fr!=null&&typeof Fr=="number"&&Fr>0&&(E=1.5*Fr,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Br=u.g;if(Br){const zl=Br.g?Br.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zl){var G=E.h;G.g||zl.indexOf("spdy")==-1&&zl.indexOf("quic")==-1&&zl.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(dd(G,G.h),G.h=null))}if(E.G){const yd=Br.g?Br.g.getResponseHeader("X-HTTP-Session-Id"):null;yd&&(E.wa=yd,Je(E.J,E.G,yd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-u.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var ce=u;if(E.na=wg(E,E.L?E.ba:null,E.W),ce.L){Xp(E.h,ce);var Ae=ce,jt=E.O;jt&&(Ae.H=jt),Ae.D&&(ld(Ae),yl(Ae)),E.g=ce}else gg(E);g.i.length>0&&jl(g)}else Ge[0]!="stop"&&Ge[0]!="close"||Ei(g,7);else g.I==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Ei(g,7):pd(g):Ge[0]!="noop"&&g.l&&g.l.qa(Ge),g.A=0)}}wo(4)}catch{}}var cN=class{constructor(u,p){this.g=u,this.map=p}};function Kp(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qp(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Yp(u){return u.h?1:u.g?u.g.size:0}function ud(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function dd(u,p){u.g?u.g.add(p):u.h=p}function Xp(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Kp.prototype.cancel=function(){if(this.i=Jp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Jp(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const g of u.g.values())p=p.concat(g.G);return p}return y(u.i)}var Zp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uN(u,p){if(u){u=u.split("&");for(let g=0;g<u.length;g++){const E=u[g].indexOf("=");let U,G=null;E>=0?(U=u[g].substring(0,E),G=u[g].substring(E+1)):U=u[g],p(U,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function Vr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof Vr?(this.l=u.l,zo(this,u.j),this.o=u.o,this.g=u.g,Co(this,u.u),this.h=u.h,hd(this,sg(u.i)),this.m=u.m):u&&(p=String(u).match(Zp))?(this.l=!1,zo(this,p[1]||"",!0),this.o=Eo(p[2]||""),this.g=Eo(p[3]||"",!0),Co(this,p[4]),this.h=Eo(p[5]||"",!0),hd(this,p[6]||"",!0),this.m=Eo(p[7]||"")):(this.l=!1,this.i=new To(null,this.l))}Vr.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(So(p,eg,!0),":");var g=this.g;return(g||p=="file")&&(u.push("//"),(p=this.o)&&u.push(So(p,eg,!0),"@"),u.push(No(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&u.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&u.push("/"),u.push(So(g,g.charAt(0)=="/"?fN:hN,!0))),(g=this.i.toString())&&u.push("?",g),(g=this.m)&&u.push("#",So(g,pN)),u.join("")},Vr.prototype.resolve=function(u){const p=Qn(this);let g=!!u.j;g?zo(p,u.j):g=!!u.o,g?p.o=u.o:g=!!u.g,g?p.g=u.g:g=u.u!=null;var E=u.h;if(g)Co(p,u.u);else if(g=!!u.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var U=p.h.lastIndexOf("/");U!=-1&&(E=p.h.slice(0,U+1)+E)}if(U=E,U==".."||U==".")E="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){E=U.lastIndexOf("/",0)==0,U=U.split("/");const G=[];for(let ce=0;ce<U.length;){const Ae=U[ce++];Ae=="."?E&&ce==U.length&&G.push(""):Ae==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),E&&ce==U.length&&G.push("")):(G.push(Ae),E=!0)}E=G.join("/")}else E=U}return g?p.h=E:g=u.i.toString()!=="",g?hd(p,sg(u.i)):g=!!u.m,g&&(p.m=u.m),p};function Qn(u){return new Vr(u)}function zo(u,p,g){u.j=g?Eo(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Co(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function hd(u,p,g){p instanceof To?(u.i=p,gN(u.i,u.l)):(g||(p=So(p,mN)),u.i=new To(p,u.l))}function Je(u,p,g){u.i.set(p,g)}function vl(u){return Je(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Eo(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function So(u,p,g){return typeof u=="string"?(u=encodeURI(u).replace(p,dN),g&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function dN(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var eg=/[#\/\?@]/g,hN=/[#\?:]/g,fN=/[#\?]/g,mN=/[#\?@]/g,pN=/#/g;function To(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function Ci(u){u.g||(u.g=new Map,u.h=0,u.i&&uN(u.i,function(p,g){u.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=To.prototype,t.add=function(u,p){Ci(this),this.i=null,u=hs(this,u);let g=this.g.get(u);return g||this.g.set(u,g=[]),g.push(p),this.h+=1,this};function tg(u,p){Ci(u),p=hs(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function ng(u,p){return Ci(u),p=hs(u,p),u.g.has(p)}t.forEach=function(u,p){Ci(this),this.g.forEach(function(g,E){g.forEach(function(U){u.call(p,U,E,this)},this)},this)};function rg(u,p){Ci(u);let g=[];if(typeof p=="string")ng(u,p)&&(g=g.concat(u.g.get(hs(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)g=g.concat(u[p]);return g}t.set=function(u,p){return Ci(this),this.i=null,u=hs(this,u),ng(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=rg(this,u),u.length>0?String(u[0]):p):p};function ig(u,p,g){tg(u,p),g.length>0&&(u.i=null,u.g.set(hs(u,p),y(g)),u.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let E=0;E<p.length;E++){var g=p[E];const U=No(g);g=rg(this,g);for(let G=0;G<g.length;G++){let ce=U;g[G]!==""&&(ce+="="+No(g[G])),u.push(ce)}}return this.i=u.join("&")};function sg(u){const p=new To;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function hs(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function gN(u,p){p&&!u.j&&(Ci(u),u.i=null,u.g.forEach(function(g,E){const U=E.toLowerCase();E!=U&&(tg(this,E),ig(this,U,g))},u)),u.j=p}function xN(u,p){const g=new jo;if(a.Image){const E=new Image;E.onload=h(Lr,g,"TestLoadImage: loaded",!0,p,E),E.onerror=h(Lr,g,"TestLoadImage: error",!1,p,E),E.onabort=h(Lr,g,"TestLoadImage: abort",!1,p,E),E.ontimeout=h(Lr,g,"TestLoadImage: timeout",!1,p,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function yN(u,p){const g=new jo,E=new AbortController,U=setTimeout(()=>{E.abort(),Lr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(G=>{clearTimeout(U),G.ok?Lr(g,"TestPingServer: ok",!0,p):Lr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(U),Lr(g,"TestPingServer: error",!1,p)})}function Lr(u,p,g,E,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),E(g)}catch{}}function vN(){this.g=new Le}function fd(u){this.i=u.Sb||null,this.h=u.ab||!1}f(fd,M),fd.prototype.g=function(){return new bl(this.i,this.h)};function bl(u,p){be.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(bl,be),t=bl.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,Ao(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Io(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;og(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function og(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Io(this):Ao(this),this.readyState==3&&og(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Io(this))},t.Na=function(u){this.g&&(this.response=u,Io(this))},t.ga=function(){this.g&&Io(this)};function Io(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ao(u)}t.setRequestHeader=function(u,p){this.A.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,u.push(g[0]+": "+g[1]),g=p.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(bl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ag(u){let p="";return le(u,function(g,E){p+=E,p+=":",p+=g,p+=`\r
`}),p}function md(u,p,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=ag(g),typeof u=="string"?g!=null&&No(g):Je(u,p,g))}function dt(u){be.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(dt,be);var bN=/^https?$/i,wN=["POST","PUT"];t=dt.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,p,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Up.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(G){lg(this,G);return}if(u=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var U in E)g.set(U,E[U]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const G of E.keys())g.set(G,E.get(G));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(G=>G.toLowerCase()=="content-type"),U=a.FormData&&u instanceof a.FormData,!(Array.prototype.indexOf.call(wN,p,void 0)>=0)||E||U||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ce]of g)this.g.setRequestHeader(G,ce);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){lg(this,G)}};function lg(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,cg(u),wl(u)}function cg(u){u.A||(u.A=!0,Te(u,"complete"),Te(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Te(this,"complete"),Te(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?ug(this):this.Xa())},t.Xa=function(){ug(this)};function ug(u){if(u.h&&typeof o<"u"){if(u.v&&Or(u)==4)setTimeout(u.Ca.bind(u),0);else if(Te(u,"readystatechange"),Or(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var E;if(E=G===0){let ce=String(u.D).match(Zp)[1]||null;!ce&&a.self&&a.self.location&&(ce=a.self.location.protocol.slice(0,-1)),E=!bN.test(ce?ce.toLowerCase():"")}g=E}if(g)Te(u,"complete"),Te(u,"success");else{u.o=6;try{var U=Or(u)>2?u.g.statusText:""}catch{U=""}u.l=U+" ["+u.ca()+"]",cg(u)}}finally{wl(u)}}}}function wl(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const g=u.g;u.g=null,p||Te(u,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Or(u){return u.g?u.g.readyState:0}t.ca=function(){try{return Or(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),te(p)}};function dg(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function kN(u){const p={};u=(u.g&&Or(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(S(u[E]))continue;var g=oN(u[E]);const U=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const G=p[U]||[];p[U]=G,G.push(g)}Z(p,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Po(u,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[u]||p}function hg(u){this.za=0,this.i=[],this.j=new jo,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Po("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Po("baseRetryDelayMs",5e3,u),this.Za=Po("retryDelaySeedMs",1e4,u),this.Ta=Po("forwardChannelMaxRetries",2,u),this.va=Po("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Kp(u&&u.concurrentRequestLimit),this.Ba=new vN,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=hg.prototype,t.ka=8,t.I=1,t.connect=function(u,p,g,E){Yt(0),this.W=u,this.H=p||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=wg(this,null,this.W),jl(this)};function pd(u){if(fg(u),u.I==3){var p=u.V++,g=Qn(u.J);if(Je(g,"SID",u.M),Je(g,"RID",p),Je(g,"TYPE","terminate"),Ro(u,g),p=new Mr(u,u.j,p),p.M=2,p.A=vl(Qn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.A,g=!0),g||(p.g=kg(p.j,null),p.g.ea(p.A)),p.F=Date.now(),yl(p)}bg(u)}function kl(u){u.g&&(xd(u),u.g.cancel(),u.g=null)}function fg(u){kl(u),u.v&&(a.clearTimeout(u.v),u.v=null),Nl(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&a.clearTimeout(u.m),u.m=null)}function jl(u){if(!Qp(u.h)&&!u.m){u.m=!0;var p=u.Ea;L||x(),V||(L(),V=!0),v.add(p,u),u.D=0}}function jN(u,p){return Yp(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=ko(d(u.Ea,u,p),vg(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const U=new Mr(this,this.j,u);let G=this.o;if(this.U&&(G?(G=ve(G),Pe(G,this.U)):G=this.U),this.u!==null||this.R||(U.J=G,G=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=pg(this,U,p),g=Qn(this.J),Je(g,"RID",u),Je(g,"CVER",22),this.G&&Je(g,"X-HTTP-Session-Id",this.G),Ro(this,g),G&&(this.R?p="headers="+No(ag(G))+"&"+p:this.u&&md(g,this.u,G)),dd(this.h,U),this.Ra&&Je(g,"TYPE","init"),this.S?(Je(g,"$req",p),Je(g,"SID","null"),U.U=!0,ad(U,g,null)):ad(U,g,p),this.I=2}}else this.I==3&&(u?mg(this,u):this.i.length==0||Qp(this.h)||mg(this))};function mg(u,p){var g;p?g=p.l:g=u.V++;const E=Qn(u.J);Je(E,"SID",u.M),Je(E,"RID",g),Je(E,"AID",u.K),Ro(u,E),u.u&&u.o&&md(E,u.u,u.o),g=new Mr(u,u.j,g,u.D+1),u.u===null&&(g.J=u.o),p&&(u.i=p.G.concat(u.i)),p=pg(u,g,1e3),g.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),dd(u.h,g),ad(g,E,p)}function Ro(u,p){u.H&&le(u.H,function(g,E){Je(p,E,g)}),u.l&&le({},function(g,E){Je(p,E,g)})}function pg(u,p,g){g=Math.min(u.i.length,g);const E=u.l?d(u.l.Ka,u.l,u):null;e:{var U=u.i;let Ae=-1;for(;;){const jt=["count="+g];Ae==-1?g>0?(Ae=U[0].g,jt.push("ofs="+Ae)):Ae=0:jt.push("ofs="+Ae);let Ge=!0;for(let Et=0;Et<g;Et++){var G=U[Et].g;const Yn=U[Et].map;if(G-=Ae,G<0)Ae=Math.max(0,U[Et].g-100),Ge=!1;else try{G="req"+G+"_"||"";try{var ce=Yn instanceof Map?Yn:Object.entries(Yn);for(const[Si,Fr]of ce){let Br=Fr;l(Fr)&&(Br=q(Fr)),jt.push(G+Si+"="+encodeURIComponent(Br))}}catch(Si){throw jt.push(G+"type="+encodeURIComponent("_badmap")),Si}}catch{E&&E(Yn)}}if(Ge){ce=jt.join("&");break e}}ce=void 0}return u=u.i.splice(0,g),p.G=u,ce}function gg(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;L||x(),V||(L(),V=!0),v.add(p,u),u.A=0}}function gd(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=ko(d(u.Da,u),vg(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,xg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=ko(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),kl(this),xg(this))};function xd(u){u.B!=null&&(a.clearTimeout(u.B),u.B=null)}function xg(u){u.g=new Mr(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=Qn(u.na);Je(p,"RID","rpc"),Je(p,"SID",u.M),Je(p,"AID",u.K),Je(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&Je(p,"TO",u.ia),Je(p,"TYPE","xmlhttp"),Ro(u,p),u.u&&u.o&&md(p,u.u,u.o),u.O&&(u.g.H=u.O);var g=u.g;u=u.ba,g.M=1,g.A=vl(Qn(p)),g.u=null,g.R=!0,qp(g,u)}t.Va=function(){this.C!=null&&(this.C=null,kl(this),gd(this),Yt(19))};function Nl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function yg(u,p){var g=null;if(u.g==p){Nl(u),xd(u),u.g=null;var E=2}else if(ud(u.h,p))g=p.G,Xp(u.h,p),E=1;else return;if(u.I!=0){if(p.o)if(E==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var U=u.D;E=Rn(),Te(E,new Fp(E,g)),jl(u)}else gg(u);else if(U=p.m,U==3||U==0&&p.X>0||!(E==1&&jN(u,p)||E==2&&gd(u)))switch(g&&g.length>0&&(p=u.h,p.i=p.i.concat(g)),U){case 1:Ei(u,5);break;case 4:Ei(u,10);break;case 3:Ei(u,6);break;default:Ei(u,2)}}}function vg(u,p){let g=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(g*=2),g*p}function Ei(u,p){if(u.j.info("Error code "+p),p==2){var g=d(u.bb,u),E=u.Ua;const U=!E;E=new Vr(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||zo(E,"https"),vl(E),U?xN(E.toString(),g):yN(E.toString(),g)}else Yt(2);u.I=0,u.l&&u.l.pa(p),bg(u),fg(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function bg(u){if(u.I=0,u.ja=[],u.l){const p=Jp(u.h);(p.length!=0||u.i.length!=0)&&(_(u.ja,p),_(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function wg(u,p,g){var E=g instanceof Vr?Qn(g):new Vr(g);if(E.g!="")p&&(E.g=p+"."+E.g),Co(E,E.u);else{var U=a.location;E=U.protocol,p=p?p+"."+U.hostname:U.hostname,U=+U.port;const G=new Vr(null);E&&zo(G,E),p&&(G.g=p),U&&Co(G,U),g&&(G.h=g),E=G}return g=u.G,p=u.wa,g&&p&&Je(E,g,p),Je(E,"VER",u.ka),Ro(u,E),E}function kg(u,p,g){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new dt(new fd({ab:g})):new dt(u.ma),p.Fa(u.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jg(){}t=jg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function _l(){}_l.prototype.g=function(u,p){return new mn(u,p)};function mn(u,p){be.call(this),this.g=new hg(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!S(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new fs(this)}f(mn,be),mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){pd(this.g)},mn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var g={};g.__data__=u,u=g}else this.v&&(g={},g.__data__=q(u),u=g);p.i.push(new cN(p.Ya++,u)),p.I==3&&jl(p)},mn.prototype.N=function(){this.g.l=null,delete this.j,pd(this.g),delete this.g,mn.Z.N.call(this)};function Ng(u){ae.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const g in p){u=g;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}f(Ng,ae);function _g(){Ie.call(this),this.status=1}f(_g,Ie);function fs(u){this.g=u}f(fs,jg),fs.prototype.ra=function(){Te(this.g,"a")},fs.prototype.qa=function(u){Te(this.g,new Ng(u))},fs.prototype.pa=function(u){Te(this.g,new _g)},fs.prototype.oa=function(){Te(this.g,"b")},_l.prototype.createWebChannel=_l.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,pj=function(){return new _l},mj=function(){return Rn()},fj=Ne,G0={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},xl.NO_ERROR=0,xl.TIMEOUT=8,xl.HTTP_ERROR=6,xc=xl,Bp.COMPLETE="complete",hj=Bp,K.EventType=H,H.OPEN="a",H.CLOSE="b",H.ERROR="c",H.MESSAGE="d",be.prototype.listen=be.prototype.J,ea=K,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,dj=dt}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const yv="@firebase/firestore",vv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}qt.UNAUTHENTICATED=new qt(null),qt.GOOGLE_CREDENTIALS=new qt("google-credentials-uid"),qt.FIRST_PARTY=new qt("first-party-uid"),qt.MOCK_USER=new qt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let go="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new Qm("@firebase/firestore");function gs(){return ns.logLevel}function me(t,...e){if(ns.logLevel<=Fe.DEBUG){const n=e.map(rp);ns.debug(`Firestore (${go}): ${t}`,...n)}}function Ar(t,...e){if(ns.logLevel<=Fe.ERROR){const n=e.map(rp);ns.error(`Firestore (${go}): ${t}`,...n)}}function no(t,...e){if(ns.logLevel<=Fe.WARN){const n=e.map(rp);ns.warn(`Firestore (${go}): ${t}`,...n)}}function rp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,gj(t,r,n)}function gj(t,e,n){let r=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ar(r),new Error(r)}function qe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||gj(e,i,r)}function Se(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends _i{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class WA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(qt.UNAUTHENTICATED))}shutdown(){}}class qA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HA{constructor(e){this.t=e,this.currentUser=qt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){qe(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new wr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wr,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(qe(typeof r.accessToken=="string",31837,{l:r}),new xj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new qt(e)}}class GA{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=qt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class KA{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new GA(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(qt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QA{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,a3(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){qe(this.o===void 0,3512);const r=o=>{o.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,me("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=YA(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function De(t,e){return t<e?-1:t>e?1:0}function K0(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),o=e.charAt(r);if(i!==o)return fh(i)===fh(o)?De(i,o):fh(i)?1:-1}return De(t.length,e.length)}const XA=55296,JA=57343;function fh(t){const e=t.charCodeAt(0);return e>=XA&&e<=JA}function ro(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__name__";class er{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&_e(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return er.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof er?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=er.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return De(e.length,n.length)}static compareSegments(e,n){const r=er.isNumericId(e),i=er.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?er.extractNumericId(e).compare(er.extractNumericId(n)):K0(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ai.fromString(e.substring(4,e.length-2))}}class Ye extends er{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new he(X.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const ZA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends er{construct(e,n,r){return new Vt(e,n,r)}static isValidIdentifier(e){return ZA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wv}static keyField(){return new Vt([wv])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new he(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new he(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(a=!a,i++):l!=="."||a?(r+=l,i++):(o(),i++)}if(o(),a)throw new he(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vt(n)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){this.path=e}static fromPath(e){return new je(Ye.fromString(e))}static fromName(e){return new je(Ye.fromString(e).popFirst(5))}static empty(){return new je(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new je(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(t,e,n){if(!n)throw new he(X.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function e6(t,e,n,r){if(e===!0&&r===!0)throw new he(X.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function kv(t){if(!je.isDocumentKey(t))throw new he(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function jv(t){if(je.isDocumentKey(t))throw new he(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function vj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e(12329,{type:typeof t})}function fi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new he(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=qu(t);throw new he(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){const n={typeString:t};return e&&(n.value=e),n}function ul(t,e){if(!vj(t))throw new he(X.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(i&&typeof a!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new he(X.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=-62135596800,_v=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*_v);return new et(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Nv)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/_v}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ul(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:wt("string",et._jsonSchemaVersion),seconds:wt("number"),nanoseconds:wt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new et(0,0))}static max(){return new Ce(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ga=-1;function t6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ce.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new mi(i,je.empty(),e)}function n6(t){return new mi(t.readTime,t.key,Ga)}class mi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new mi(Ce.min(),je.empty(),Ga)}static max(){return new mi(Ce.max(),je.empty(),Ga)}}function r6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=je.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class s6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t){if(t.code!==X.FAILED_PRECONDITION||t.message!==i6)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof J?n:J.resolve(n)}catch(n){return J.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):J.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):J.reject(n)}static resolve(e){return new J((n,r)=>{n(e)})}static reject(e){return new J((n,r)=>{r(e)})}static waitFor(e){return new J((n,r)=>{let i=0,o=0,a=!1;e.forEach(l=>{++i,l.next(()=>{++o,a&&o===i&&n()},c=>r(c))}),a=!0,o===i&&n()})}static or(e){let n=J.resolve(!1);for(const r of e)n=n.next(i=>i?J.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new J((r,i)=>{const o=e.length,a=new Array(o);let l=0;for(let c=0;c<o;c++){const d=c;n(e[d]).next(h=>{a[d]=h,++l,l===o&&r(a)},h=>i(h))}})}static doWhile(e,n){return new J((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function o6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=-1;function Gu(t){return t==null}function lu(t){return t===0&&1/t==-1/0}function a6(t){return typeof t=="number"&&Number.isInteger(t)&&!lu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="";function l6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=zv(e)),e=c6(t.get(n),e);return zv(e)}function c6(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case bj:n+="";break;default:n+=o}}return n}function zv(t){return t+bj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n){this.comparator=e,this.root=n||Mt.EMPTY}insert(e,n){return new ut(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Mt.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Mt.RED,this.left=i??Mt.EMPTY,this.right=o??Mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Mt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Mt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}Mt.EMPTY=null,Mt.RED=!0,Mt.BLACK=!1;Mt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Mt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ev(this.data.getIterator())}getIteratorFrom(e){return new Ev(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ct(this.comparator);return n.data=e,n}}class Ev{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Vt.comparator)}static empty(){return new $n([])}unionWith(e){let n=new Ct(Vt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new $n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new kj("Invalid base64 string: "+o):o}}(e);return new Bt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Bt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Bt.EMPTY_BYTE_STRING=new Bt("");const u6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pi(t){if(qe(!!t,39018),typeof t=="string"){let e=0;const n=u6.exec(t);if(qe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:pt(t.seconds),nanos:pt(t.nanos)}}function pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?Bt.fromBase64String(t):Bt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="server_timestamp",Nj="__type__",_j="__previous_value__",zj="__local_write_time__";function op(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Nj])==null?void 0:r.stringValue)===jj}function Ku(t){const e=t.mapValue.fields[_j];return op(e)?Ku(e):e}function Ka(t){const e=pi(t.mapValue.fields[zj].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,n,r,i,o,a,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const cu="(default)";class Qa{constructor(e,n){this.projectId=e,this.database=n||cu}static empty(){return new Qa("","")}get isDefaultDatabase(){return this.database===cu}isEqual(e){return e instanceof Qa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj="__type__",h6="__max__",Yl={mapValue:{}},Ej="__vector__",uu="value";function xi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?op(t)?4:m6(t)?9007199254740991:f6(t)?10:11:_e(28295,{value:t})}function hr(t,e){if(t===e)return!0;const n=xi(t);if(n!==xi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ka(t).isEqual(Ka(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=pi(i.timestampValue),l=pi(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return gi(i.bytesValue).isEqual(gi(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return pt(i.geoPointValue.latitude)===pt(o.geoPointValue.latitude)&&pt(i.geoPointValue.longitude)===pt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return pt(i.integerValue)===pt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=pt(i.doubleValue),l=pt(o.doubleValue);return a===l?lu(a)===lu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],hr);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Cv(a)!==Cv(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!hr(a[c],l[c])))return!1;return!0}(t,e);default:return _e(52216,{left:t})}}function Ya(t,e){return(t.values||[]).find(n=>hr(n,e))!==void 0}function io(t,e){if(t===e)return 0;const n=xi(t),r=xi(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=pt(o.integerValue||o.doubleValue),c=pt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Sv(t.timestampValue,e.timestampValue);case 4:return Sv(Ka(t),Ka(e));case 5:return K0(t.stringValue,e.stringValue);case 6:return function(o,a){const l=gi(o),c=gi(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=De(l[d],c[d]);if(h!==0)return h}return De(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=De(pt(o.latitude),pt(a.latitude));return l!==0?l:De(pt(o.longitude),pt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Tv(t.arrayValue,e.arrayValue);case 10:return function(o,a){var m,y,_,A;const l=o.fields||{},c=a.fields||{},d=(m=l[uu])==null?void 0:m.arrayValue,h=(y=c[uu])==null?void 0:y.arrayValue,f=De(((_=d==null?void 0:d.values)==null?void 0:_.length)||0,((A=h==null?void 0:h.values)==null?void 0:A.length)||0);return f!==0?f:Tv(d,h)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Yl.mapValue&&a===Yl.mapValue)return 0;if(o===Yl.mapValue)return 1;if(a===Yl.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),d=a.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=K0(c[f],h[f]);if(m!==0)return m;const y=io(l[c[f]],d[h[f]]);if(y!==0)return y}return De(c.length,h.length)}(t.mapValue,e.mapValue);default:throw _e(23264,{he:n})}}function Sv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=pi(t),r=pi(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function Tv(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=io(n[i],r[i]);if(o)return o}return De(n.length,r.length)}function so(t){return Q0(t)}function Q0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=pi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return je.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Q0(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Q0(n.fields[a])}`;return i+"}"}(t.mapValue):_e(61005,{value:t})}function yc(t){switch(xi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ku(t);return e?16+yc(e):16;case 5:return 2*t.stringValue.length;case 6:return gi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+yc(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return os(r.fields,(o,a)=>{i+=o.length+yc(a)}),i}(t.mapValue);default:throw _e(13486,{value:t})}}function Iv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Y0(t){return!!t&&"integerValue"in t}function ap(t){return!!t&&"arrayValue"in t}function Av(t){return!!t&&"nullValue"in t}function Pv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function vc(t){return!!t&&"mapValue"in t}function f6(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Cj])==null?void 0:r.stringValue)===Ej}function va(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=va(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=va(t.arrayValue.values[n]);return e}return{...t}}function m6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===h6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!vc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(n)}setAll(e){let n=Vt.emptyPath(),r={},i=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=l.popLast()}a?r[l.lastSegment()]=va(a):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());vc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return hr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];vc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){os(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new _n(va(this.value))}}function Sj(t){const e=[];return os(t.fields,(n,r)=>{const i=new Vt([n]);if(vc(r)){const o=Sj(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,i,o,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Gt(e,0,Ce.min(),Ce.min(),Ce.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new Gt(e,1,n,Ce.min(),r,i,0)}static newNoDocument(e,n){return new Gt(e,2,n,Ce.min(),Ce.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,Ce.min(),Ce.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n){this.position=e,this.inclusive=n}}function Rv(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=je.comparator(je.fromName(a.referenceValue),n.key):r=io(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Dv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!hr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n="asc"){this.field=e,this.dir=n}}function p6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{}class bt extends Tj{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new x6(e,n,r):n==="array-contains"?new b6(e,r):n==="in"?new w6(e,r):n==="not-in"?new k6(e,r):n==="array-contains-any"?new j6(e,r):new bt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new y6(e,r):new v6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(io(n,this.value)):n!==null&&xi(this.value)===xi(n)&&this.matchesComparison(io(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Gn extends Tj{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Gn(e,n)}matches(e){return Ij(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ij(t){return t.op==="and"}function Aj(t){return g6(t)&&Ij(t)}function g6(t){for(const e of t.filters)if(e instanceof Gn)return!1;return!0}function X0(t){if(t instanceof bt)return t.field.canonicalString()+t.op.toString()+so(t.value);if(Aj(t))return t.filters.map(e=>X0(e)).join(",");{const e=t.filters.map(n=>X0(n)).join(",");return`${t.op}(${e})`}}function Pj(t,e){return t instanceof bt?function(r,i){return i instanceof bt&&r.op===i.op&&r.field.isEqual(i.field)&&hr(r.value,i.value)}(t,e):t instanceof Gn?function(r,i){return i instanceof Gn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,l)=>o&&Pj(a,i.filters[l]),!0):!1}(t,e):void _e(19439)}function Rj(t){return t instanceof bt?function(n){return`${n.field.canonicalString()} ${n.op} ${so(n.value)}`}(t):t instanceof Gn?function(n){return n.op.toString()+" {"+n.getFilters().map(Rj).join(" ,")+"}"}(t):"Filter"}class x6 extends bt{constructor(e,n,r){super(e,n,r),this.key=je.fromName(r.referenceValue)}matches(e){const n=je.comparator(e.key,this.key);return this.matchesComparison(n)}}class y6 extends bt{constructor(e,n){super(e,"in",n),this.keys=Dj("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class v6 extends bt{constructor(e,n){super(e,"not-in",n),this.keys=Dj("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Dj(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>je.fromName(r.referenceValue))}class b6 extends bt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ap(n)&&Ya(n.arrayValue,this.value)}}class w6 extends bt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ya(this.value.arrayValue,n)}}class k6 extends bt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ya(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ya(this.value.arrayValue,n)}}class j6 extends bt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ap(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ya(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6{constructor(e,n=null,r=[],i=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function Mv(t,e=null,n=[],r=[],i=null,o=null,a=null){return new N6(t,e,n,r,i,o,a)}function lp(t){const e=Se(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>X0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>so(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>so(r)).join(",")),e.Te=n}return e.Te}function cp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!p6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Pj(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Dv(t.startAt,e.startAt)&&Dv(t.endAt,e.endAt)}function J0(t){return je.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n=null,r=[],i=[],o=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function _6(t,e,n,r,i,o,a,l){return new vo(t,e,n,r,i,o,a,l)}function up(t){return new vo(t)}function Vv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Mj(t){return t.collectionGroup!==null}function ba(t){const e=Se(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Ct(Vt.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Xa(o,r))}),n.has(Vt.keyField().canonicalString())||e.Ie.push(new Xa(Vt.keyField(),r))}return e.Ie}function ar(t){const e=Se(t);return e.Ee||(e.Ee=z6(e,ba(t))),e.Ee}function z6(t,e){if(t.limitType==="F")return Mv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Xa(i.field,o)});const n=t.endAt?new du(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new du(t.startAt.position,t.startAt.inclusive):null;return Mv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Z0(t,e){const n=t.filters.concat([e]);return new vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ef(t,e,n){return new vo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qu(t,e){return cp(ar(t),ar(e))&&t.limitType===e.limitType}function Vj(t){return`${lp(ar(t))}|lt:${t.limitType}`}function xs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Rj(i)).join(", ")}]`),Gu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>so(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>so(i)).join(",")),`Target(${r})`}(ar(t))}; limitType=${t.limitType})`}function Yu(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):je.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ba(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,l,c){const d=Rv(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,ba(r),i)||r.endAt&&!function(a,l,c){const d=Rv(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,ba(r),i))}(t,e)}function C6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Lj(t){return(e,n)=>{let r=!1;for(const i of ba(t)){const o=E6(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function E6(t,e,n){const r=t.field.isKeyField()?je.comparator(e.key,n.key):function(o,a,l){const c=a.data.field(o),d=l.data.field(o);return c!==null&&d!==null?io(c,d):_e(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){os(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return wj(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S6=new ut(je.comparator);function Pr(){return S6}const Oj=new ut(je.comparator);function ta(...t){let e=Oj;for(const n of t)e=e.insert(n.key,n);return e}function Fj(t){let e=Oj;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ui(){return wa()}function Bj(){return wa()}function wa(){return new as(t=>t.toString(),(t,e)=>t.isEqual(e))}const T6=new ut(je.comparator),I6=new Ct(je.comparator);function Me(...t){let e=I6;for(const n of t)e=e.add(n);return e}const A6=new Ct(De);function P6(){return A6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lu(e)?"-0":e}}function Uj(t){return{integerValue:""+t}}function R6(t,e){return a6(e)?Uj(e):dp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this._=void 0}}function D6(t,e,n){return t instanceof hu?function(i,o){const a={fields:{[Nj]:{stringValue:jj},[zj]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&op(o)&&(o=Ku(o)),o&&(a.fields[_j]=o),{mapValue:a}}(n,e):t instanceof Ja?Wj(t,e):t instanceof Za?qj(t,e):function(i,o){const a=$j(i,o),l=Lv(a)+Lv(i.Ae);return Y0(a)&&Y0(i.Ae)?Uj(l):dp(i.serializer,l)}(t,e)}function M6(t,e,n){return t instanceof Ja?Wj(t,e):t instanceof Za?qj(t,e):n}function $j(t,e){return t instanceof fu?function(r){return Y0(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class hu extends Xu{}class Ja extends Xu{constructor(e){super(),this.elements=e}}function Wj(t,e){const n=Hj(e);for(const r of t.elements)n.some(i=>hr(i,r))||n.push(r);return{arrayValue:{values:n}}}class Za extends Xu{constructor(e){super(),this.elements=e}}function qj(t,e){let n=Hj(e);for(const r of t.elements)n=n.filter(i=>!hr(i,r));return{arrayValue:{values:n}}}class fu extends Xu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Lv(t){return pt(t.integerValue||t.doubleValue)}function Hj(t){return ap(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function V6(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ja&&i instanceof Ja||r instanceof Za&&i instanceof Za?ro(r.elements,i.elements,hr):r instanceof fu&&i instanceof fu?hr(r.Ae,i.Ae):r instanceof hu&&i instanceof hu}(t.transform,e.transform)}class L6{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ju{}function Gj(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hp(t.key,lr.none()):new dl(t.key,t.data,lr.none());{const n=t.data,r=_n.empty();let i=new Ct(Vt.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new ls(t.key,r,new $n(i.toArray()),lr.none())}}function O6(t,e,n){t instanceof dl?function(i,o,a){const l=i.value.clone(),c=Fv(i.fieldTransforms,o,a.transformResults);l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ls?function(i,o,a){if(!bc(i.precondition,o))return void o.convertToUnknownDocument(a.version);const l=Fv(i.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(Kj(i)),c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ka(t,e,n,r){return t instanceof dl?function(o,a,l,c){if(!bc(o.precondition,a))return l;const d=o.value.clone(),h=Bv(o.fieldTransforms,c,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ls?function(o,a,l,c){if(!bc(o.precondition,a))return l;const d=Bv(o.fieldTransforms,c,a),h=a.data;return h.setAll(Kj(o)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,a,l){return bc(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function F6(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=$j(r.transform,i||null);o!=null&&(n===null&&(n=_n.empty()),n.set(r.field,o))}return n||null}function Ov(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ro(r,i,(o,a)=>V6(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class dl extends Ju{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ls extends Ju{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Kj(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Fv(t,e,n){const r=new Map;qe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,l=e.data.field(o.field);r.set(o.field,M6(a,l,n[i]))}return r}function Bv(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,D6(o,a,e))}return r}class hp extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class B6 extends Ju{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&O6(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ka(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Bj();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=n.has(i.key)?null:l;const c=Gj(a,l);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Me())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(n,r)=>Ov(n,r))&&ro(this.baseMutations,e.baseMutations,(n,r)=>Ov(n,r))}}class fp{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){qe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return T6}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new fp(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xt,Oe;function q6(t){switch(t){case X.OK:return _e(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return _e(15467,{code:t})}}function Qj(t){if(t===void 0)return Ar("GRPC error has no .code"),X.UNKNOWN;switch(t){case xt.OK:return X.OK;case xt.CANCELLED:return X.CANCELLED;case xt.UNKNOWN:return X.UNKNOWN;case xt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case xt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case xt.INTERNAL:return X.INTERNAL;case xt.UNAVAILABLE:return X.UNAVAILABLE;case xt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case xt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case xt.NOT_FOUND:return X.NOT_FOUND;case xt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case xt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case xt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case xt.ABORTED:return X.ABORTED;case xt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case xt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case xt.DATA_LOSS:return X.DATA_LOSS;default:return _e(39323,{code:t})}}(Oe=xt||(xt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G6=new ai([4294967295,4294967295],0);function Uv(t){const e=H6().encode(t),n=new uj;return n.update(e),new Uint8Array(n.digest())}function $v(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ai([n,r],0),new ai([i,o],0)]}class mp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new na(`Invalid padding: ${n}`);if(r<0)throw new na(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new na(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new na(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ai.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ai.fromNumber(r)));return i.compare(G6)===1&&(i=new ai([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Uv(e),[r,i]=$v(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,i,o);if(!this.we(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new mp(o,i,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Uv(e),[r,i]=$v(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,i,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class na extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,hl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zu(Ce.min(),i,new ut(De),Pr(),Me())}}class hl{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new hl(r,n,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Yj{constructor(e,n){this.targetId=e,this.Ce=n}}class Xj{constructor(e,n,r=Bt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Wv{constructor(){this.ve=0,this.Fe=qv(),this.Me=Bt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),n=Me(),r=Me();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e(38017,{changeType:o})}}),new hl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=qv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class K6{constructor(e){this.Ge=e,this.ze=new Map,this.je=Pr(),this.Je=Xl(),this.He=Xl(),this.Ye=new ut(De)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:_e(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const o=i.target;if(J0(o))if(r===0){const a=new je(o.path);this.et(n,a,Gt.newNoDocument(a,Ce.min()))}else qe(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,l;try{a=gi(r).toUint8Array()}catch(c){if(c instanceof kj)return no("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new mp(a,i,o)}catch(c){return no(c instanceof na?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&J0(l.target)){const c=new je(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Gt.newNoDocument(c,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let r=Me();this.He.forEach((o,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const i=new Zu(e,n,this.Ye,this.je,r);return this.je=Pr(),this.Je=Xl(),this.He=Xl(),this.Ye=new ut(De),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Wv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Ct(De),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Ct(De),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Xl(){return new ut(je.comparator)}function qv(){return new ut(je.comparator)}const Q6={asc:"ASCENDING",desc:"DESCENDING"},Y6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X6={and:"AND",or:"OR"};class J6{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tf(t,e){return t.useProto3Json||Gu(e)?e:{value:e}}function mu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Jj(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Z6(t,e){return mu(t,e.toTimestamp())}function cr(t){return qe(!!t,49232),Ce.fromTimestamp(function(n){const r=pi(n);return new et(r.seconds,r.nanos)}(t))}function pp(t,e){return nf(t,e).canonicalString()}function nf(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Zj(t){const e=Ye.fromString(t);return qe(i5(e),10190,{key:e.toString()}),e}function rf(t,e){return pp(t.databaseId,e.path)}function mh(t,e){const n=Zj(e);if(n.get(1)!==t.databaseId.projectId)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new he(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new je(t5(n))}function e5(t,e){return pp(t.databaseId,e)}function eP(t){const e=Zj(t);return e.length===4?Ye.emptyPath():t5(e)}function sf(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function t5(t){return qe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Hv(t,e,n){return{name:rf(t,e),fields:n.value.mapValue.fields}}function tP(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:_e(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(d,h){return d.useProto3Json?(qe(h===void 0||typeof h=="string",58123),Bt.fromBase64String(h||"")):(qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Bt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?X.UNKNOWN:Qj(d.code);return new he(h,d.message||"")}(a);n=new Xj(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=mh(t,r.document.name),o=cr(r.document.updateTime),a=r.document.createTime?cr(r.document.createTime):Ce.min(),l=new _n({mapValue:{fields:r.document.fields}}),c=Gt.newFoundDocument(i,o,a,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new wc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=mh(t,r.document),o=r.readTime?cr(r.readTime):Ce.min(),a=Gt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new wc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=mh(t,r.document),o=r.removedTargetIds||[];n=new wc([],o,i,null)}else{if(!("filter"in e))return _e(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new W6(i,o),l=r.targetId;n=new Yj(l,a)}}return n}function nP(t,e){let n;if(e instanceof dl)n={update:Hv(t,e.key,e.value)};else if(e instanceof hp)n={delete:rf(t,e.key)};else if(e instanceof ls)n={update:Hv(t,e.key,e.data),updateMask:dP(e.fieldMask)};else{if(!(e instanceof B6))return _e(16599,{Vt:e.type});n={verify:rf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const l=a.transform;if(l instanceof hu)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ja)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Za)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fu)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw _e(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Z6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e(27497)}(t,e.precondition)),n}function rP(t,e){return t&&t.length>0?(qe(e!==void 0,14353),t.map(n=>function(i,o){let a=i.updateTime?cr(i.updateTime):cr(o);return a.isEqual(Ce.min())&&(a=cr(o)),new L6(a,i.transformResults||[])}(n,e))):[]}function iP(t,e){return{documents:[e5(t,e.path)]}}function sP(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=e5(t,i);const o=function(d){if(d.length!==0)return r5(Gn.create(d,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:ys(m.field),direction:lP(m.dir)}}(h))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=tf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:i}}function oP(t){let e=eP(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){qe(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=function(f){const m=n5(f);return m instanceof Gn&&Aj(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(f){return f.map(m=>function(_){return new Xa(vs(_.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Gu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new du(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,y=f.values||[];return new du(y,m)}(n.endAt)),_6(e,i,a,o,l,"F",c,d)}function aP(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function n5(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vs(n.unaryFilter.field);return bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=vs(n.unaryFilter.field);return bt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=vs(n.unaryFilter.field);return bt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=vs(n.unaryFilter.field);return bt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}}(t):t.fieldFilter!==void 0?function(n){return bt.create(vs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Gn.create(n.compositeFilter.filters.map(r=>n5(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e(1026)}}(n.compositeFilter.op))}(t):_e(30097,{filter:t})}function lP(t){return Q6[t]}function cP(t){return Y6[t]}function uP(t){return X6[t]}function ys(t){return{fieldPath:t.canonicalString()}}function vs(t){return Vt.fromServerFormat(t.fieldPath)}function r5(t){return t instanceof bt?function(n){if(n.op==="=="){if(Pv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NAN"}};if(Av(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Pv(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NAN"}};if(Av(n.value))return{unaryFilter:{field:ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ys(n.field),op:cP(n.op),value:n.value}}}(t):t instanceof Gn?function(n){const r=n.getFilters().map(i=>r5(i));return r.length===1?r[0]:{compositeFilter:{op:uP(n.op),filters:r}}}(t):_e(54877,{filter:t})}function dP(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function i5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,n,r,i,o=Ce.min(),a=Ce.min(),l=Bt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.yt=e}}function fP(t){const e=oP({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ef(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.Cn=new pP}addToCollectionParentIndex(e,n){return this.Cn.add(n),J.resolve()}getCollectionParents(e,n){return J.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return J.resolve()}deleteFieldIndex(e,n){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,n){return J.resolve()}getDocumentsMatchingTarget(e,n){return J.resolve(null)}getIndexType(e,n){return J.resolve(0)}getFieldIndexes(e,n){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,n){return J.resolve(mi.min())}getMinOffsetFromCollectionGroup(e,n){return J.resolve(mi.min())}updateCollectionGroup(e,n,r){return J.resolve()}updateIndexEntries(e,n){return J.resolve()}}class pP{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ct(Ye.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ct(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},s5=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(s5,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oo(0)}static cr(){return new oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv="LruGarbageCollector",gP=1048576;function Qv([t,e],[n,r]){const i=De(t,n);return i===0?De(e,r):i}class xP{constructor(e){this.Ir=e,this.buffer=new Ct(Qv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Qv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class yP{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){me(Kv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yo(n)?me(Kv,"Ignoring IndexedDB error during garbage collection: ",n):await xo(n)}await this.Vr(3e5)})}}class vP{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return J.resolve(Hu.ce);const r=new xP(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Gv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,a,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,a=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),gs()<=Fe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${i} in `+(l-a)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function bP(t,e){return new vP(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.changes=new as(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?J.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ka(r.mutation,i,$n.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Me()){const i=Ui();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=ta();return o.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=Ui();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Me()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,i){let o=Pr();const a=wa(),l=function(){return wa()}();return n.forEach((c,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof ls)?o=o.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),ka(h.mutation,d,h.mutation.getFieldMask(),et.now())):a.set(d.key,$n.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((d,h)=>a.set(d,h)),n.forEach((d,h)=>l.set(d,new kP(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=wa();let i=new ut((a,l)=>a-l),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||$n.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(i.get(l.batchId)||Me()).add(c);i=i.insert(l.batchId,f)})}).next(()=>{const a=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=Bj();h.forEach(m=>{if(!o.has(m)){const y=Gj(n.get(m),r.get(m));y!==null&&f.set(m,y),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return J.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return je.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):J.resolve(Ui());let l=Ga,c=o;return a.next(d=>J.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),o.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,c,d,Me())).next(h=>({batchId:l,changes:Fj(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new je(n)).next(r=>{let i=ta();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=ta();return this.indexManager.getCollectionParents(e,o).next(l=>J.forEach(l,c=>{const d=function(f,m){return new vo(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((c,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Gt.newInvalidDocument(h)))});let l=ta();return a.forEach((c,d)=>{const h=o.get(c);h!==void 0&&ka(h.mutation,d,$n.empty(),et.now()),Yu(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return J.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:cr(i.createTime)}}(n)),J.resolve()}getNamedQuery(e,n){return J.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:fP(i.bundledQuery),readTime:cr(i.readTime)}}(n)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(){this.overlays=new ut(je.comparator),this.qr=new Map}getOverlay(e,n){return J.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ui();return J.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),J.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),J.resolve()}getOverlaysForCollection(e,n,r){const i=Ui(),o=n.length+1,a=new je(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ut((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=o.get(d.largestBatchId);h===null&&(h=Ui(),o=o.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ui(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=i)););return J.resolve(l)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new $6(n,r));let o=this.qr.get(n);o===void 0&&(o=Me(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(){this.sessionToken=Bt.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.Qr=new Ct(Tt.$r),this.Ur=new Ct(Tt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Tt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Tt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new je(new Ye([])),r=new Tt(n,e),i=new Tt(n,e+1),o=[];return this.Ur.forEachInRange([r,i],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new je(new Ye([])),r=new Tt(n,e),i=new Tt(n,e+1);let o=Me();return this.Ur.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new Tt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Tt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return je.comparator(e.key,n.key)||De(e.Yr,n.Yr)}static Kr(e,n){return De(e.Yr,n.Yr)||je.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Tt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new U6(o,n,r,i);this.mutationQueue.push(a);for(const l of i)this.Zr=this.Zr.add(new Tt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return J.resolve(a)}lookupMutationBatch(e,n){return J.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),o=i<0?0:i;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?sp:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Tt(n,0),i=new Tt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],a=>{const l=this.Xr(a.Yr);o.push(l)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ct(De);return n.forEach(i=>{const o=new Tt(i,0),a=new Tt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],l=>{r=r.add(l.Yr)})}),J.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;je.isDocumentKey(o)||(o=o.child(""));const a=new Tt(new je(o),0);let l=new Ct(De);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(l=l.add(c.Yr)),!0)},a),J.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){qe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return J.forEach(n.mutations,i=>{const o=new Tt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Tt(n,0),i=this.Zr.firstAfterOrEqual(r);return J.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.ri=e,this.docs=function(){return new ut(je.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return J.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=Pr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Gt.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Pr();const a=n.path,l=new je(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||r6(n6(h),r)<=0||(i.has(h.key)||Yu(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,n,r,i){_e(9500)}ii(e,n){return J.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new SP(this)}getSize(e){return J.resolve(this.size)}}class SP extends wP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),J.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e){this.persistence=e,this.si=new as(n=>lp(n),cp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new gp,this.targetCount=0,this.ai=oo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),J.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,J.resolve()}updateTargetData(e,n){return this.Pr(n),J.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),J.waitFor(o).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return J.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),J.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),J.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return J.resolve(r)}containsKey(e,n){return J.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o5{constructor(e,n){this.ui={},this.overlays={},this.ci=new Hu(0),this.li=!1,this.li=!0,this.hi=new zP,this.referenceDelegate=e(this),this.Pi=new TP(this),this.indexManager=new mP,this.remoteDocumentCache=function(i){return new EP(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new hP(n),this.Ii=new NP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _P,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new CP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){me("MemoryPersistence","Starting transaction:",e);const i=new IP(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return J.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class IP extends s6{constructor(e){super(),this.currentSequenceNumber=e}}class xp{constructor(e){this.persistence=e,this.Ri=new gp,this.Vi=null}static mi(e){return new xp(e)}get fi(){if(this.Vi)return this.Vi;throw _e(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),J.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),J.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,r=>{const i=je.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,Ce.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return J.or([()=>J.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class pu{constructor(e,n){this.persistence=e,this.pi=new as(r=>l6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=bP(this,n)}static mi(e,n){return new pu(e,n)}Ei(){}di(e){return J.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return J.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?J.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,o.removeEntry(a,Ce.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),J.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=yc(e.data.value)),n}br(e,n,r){return J.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=Me(),i=Me();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new yp(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return rI()?8:o6(eI())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new AP;return this.Ss(e,n,a).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(gs()<=Fe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",xs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(gs()<=Fe.DEBUG&&me("QueryEngine","Query:",xs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(gs()<=Fe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",xs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ar(n))):J.resolve())}ys(e,n){if(Vv(n))return J.resolve(null);let r=ar(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ef(n,null,"F"),r=ar(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=Me(...o);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,ef(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,i){return Vv(n)||i.isEqual(Ce.min())?J.resolve(null):this.ps.getDocuments(e,r).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,r,i)?J.resolve(null):(gs()<=Fe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xs(n)),this.vs(e,a,n,t6(i,Ga)).next(l=>l))})}Ds(e,n){let r=new Ct(Lj(e));return n.forEach((i,o)=>{Yu(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return gs()<=Fe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",xs(n)),this.ps.getDocumentsMatchingQuery(e,n,mi.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="LocalStore",RP=3e8;class DP{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ut(De),this.xs=new as(o=>lp(o),cp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function MP(t,e,n,r){return new DP(t,e,n,r)}async function a5(t,e){const n=Se(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],l=[];let c=Me();for(const d of i){a.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of o){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function VP(t,e){const n=Se(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let y=J.resolve();return m.forEach(_=>{y=y.next(()=>h.getEntry(c,_)).next(A=>{const P=d.docVersions.get(_);qe(P!==null,48541),A.version.compareTo(P)<0&&(f.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Me();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function l5(t){const e=Se(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function LP(t,e){const n=Se(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=i.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,f)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Bt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(f,y),function(A,P,w){return A.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=RP?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(o,y))});let c=Pr(),d=Me();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(OP(o,a,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(Ce.min())){const h=n.Pi.getLastRemoteSnapshotVersion(o).next(f=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(h)}return J.waitFor(l).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,d)).next(()=>c)}).then(o=>(n.Ms=i,o))}function OP(t,e,n){let r=Me(),i=Me();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=Pr();return n.forEach((l,c)=>{const d=o.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Ce.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):me(vp,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:i}})}function FP(t,e){const n=Se(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function BP(t,e){const n=Se(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,J.resolve(i)):n.Pi.allocateTargetId(r).next(a=>(i=new Yr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function of(t,e,n){const r=Se(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!yo(a))throw a;me(vp,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function Yv(t,e,n){const r=Se(t);let i=Ce.min(),o=Me();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,h){const f=Se(c),m=f.xs.get(h);return m!==void 0?J.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,a,ar(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?i:Ce.min(),n?o:Me())).next(l=>(UP(r,C6(e),l),{documents:l,Qs:o})))}function UP(t,e,n){let r=t.Os.get(e)||Ce.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class Xv{constructor(){this.activeTargetIds=P6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $P{constructor(){this.Mo=new Xv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Xv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="ConnectivityMonitor";class Zv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){me(Jv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){me(Jv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jl=null;function af(){return Jl===null?Jl=function(){return 268435456+Math.round(2147483648*Math.random())}():Jl++,"0x"+Jl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="RestConnection",qP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class HP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===cu?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){const a=af(),l=this.zo(e,n.toUriEncodedString());me(ph,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,o);const{host:d}=new URL(l),h=Km(d);return this.Jo(e,l,c,r,h).then(f=>(me(ph,`Received RPC '${e}' ${a}: `,f),f),f=>{throw no(ph,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,i,o,a){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){const r=qP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class KP extends HP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){const a=af();return new Promise((l,c)=>{const d=new dj;d.setWithCredentials(!0),d.listenOnce(hj.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case xc.NO_ERROR:const f=d.getResponseJson();me(Wt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case xc.TIMEOUT:me(Wt,`RPC '${e}' ${a} timed out`),c(new he(X.DEADLINE_EXCEEDED,"Request time out"));break;case xc.HTTP_ERROR:const m=d.getStatus();if(me(Wt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const _=y==null?void 0:y.error;if(_&&_.status&&_.message){const A=function(w){const b=w.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(b)>=0?b:X.UNKNOWN}(_.status);c(new he(A,_.message))}else c(new he(X.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new he(X.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{me(Wt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(i);me(Wt,`RPC '${e}' ${a} sending request:`,i),d.send(n,"POST",h,r,15)})}T_(e,n,r){const i=af(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=pj(),l=mj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=o.join("");me(Wt,`Creating RPC '${e}' stream ${i}: ${h}`,c);const f=a.createWebChannel(h,c);this.I_(f);let m=!1,y=!1;const _=new GP({Yo:P=>{y?me(Wt,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(me(Wt,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),me(Wt,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Zo:()=>f.close()}),A=(P,w,b)=>{P.listen(w,j=>{try{b(j)}catch(R){setTimeout(()=>{throw R},0)}})};return A(f,ea.EventType.OPEN,()=>{y||(me(Wt,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),A(f,ea.EventType.CLOSE,()=>{y||(y=!0,me(Wt,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(f))}),A(f,ea.EventType.ERROR,P=>{y||(y=!0,no(Wt,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),_.a_(new he(X.UNAVAILABLE,"The operation could not be completed")))}),A(f,ea.EventType.MESSAGE,P=>{var w;if(!y){const b=P.data[0];qe(!!b,16349);const j=b,R=(j==null?void 0:j.error)||((w=j[0])==null?void 0:w.error);if(R){me(Wt,`RPC '${e}' stream ${i} received error:`,R);const L=R.status;let V=function(N){const C=xt[N];if(C!==void 0)return Qj(C)}(L),v=R.message;V===void 0&&(V=X.INTERNAL,v="Unknown error status: "+L+" with message "+R.message),y=!0,_.a_(new he(V,v)),f.close()}else me(Wt,`RPC '${e}' stream ${i} received:`,b),_.u_(b)}}),A(l,fj.STAT_EVENT,P=>{P.stat===G0.PROXY?me(Wt,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===G0.NOPROXY&&me(Wt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new J6(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&me("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1="PersistentStream";class u5{constructor(e,n,r,i,o,a,l,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new c5(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===X.RESOURCE_EXHAUSTED?(Ar(n.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new he(X.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return me(e1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(me(e1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QP extends u5{constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=tP(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ce.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ce.min():a.readTime?cr(a.readTime):Ce.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=sf(this.serializer),n.addTarget=function(o,a){let l;const c=a.target;if(l=J0(c)?{documents:iP(o,c)}:{query:sP(o,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Jj(o,a.resumeToken);const d=tf(o,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(Ce.min())>0){l.readTime=mu(o,a.snapshotVersion.toTimestamp());const d=tf(o,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=aP(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=sf(this.serializer),n.removeTarget=e,this.q_(n)}}class YP extends u5{constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=rP(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=sf(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nP(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{}class JP extends XP{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,nf(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new he(X.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,nf(n,r),i,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new he(X.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ZP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ar(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="RemoteStore";class e9{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{cs(this)&&(me(rs,"Restarting streams for network reachability change."),await async function(c){const d=Se(c);d.Ea.add(4),await fl(d),d.Ra.set("Unknown"),d.Ea.delete(4),await td(d)}(this))})}),this.Ra=new ZP(r,i)}}async function td(t){if(cs(t))for(const e of t.da)await e(!0)}async function fl(t){for(const e of t.da)await e(!1)}function d5(t,e){const n=Se(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),jp(n)?kp(n):bo(n).O_()&&wp(n,e))}function bp(t,e){const n=Se(t),r=bo(n);n.Ia.delete(e),r.O_()&&h5(n,e),n.Ia.size===0&&(r.O_()?r.L_():cs(n)&&n.Ra.set("Unknown"))}function wp(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bo(t).Y_(e)}function h5(t,e){t.Va.Ue(e),bo(t).Z_(e)}function kp(t){t.Va=new K6({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.Ra.ua()}function jp(t){return cs(t)&&!bo(t).x_()&&t.Ia.size>0}function cs(t){return Se(t).Ea.size===0}function f5(t){t.Va=void 0}async function t9(t){t.Ra.set("Online")}async function n9(t){t.Ia.forEach((e,n)=>{wp(t,e)})}async function r9(t,e){f5(t),jp(t)?(t.Ra.ha(e),kp(t)):t.Ra.set("Unknown")}async function i9(t,e,n){if(t.Ra.set("Online"),e instanceof Xj&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const l of o.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,a),i.Ia.delete(l),i.Va.removeTarget(l))}(t,e)}catch(r){me(rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gu(t,r)}else if(e instanceof wc?t.Va.Ze(e):e instanceof Yj?t.Va.st(e):t.Va.tt(e),!n.isEqual(Ce.min()))try{const r=await l5(t.localStore);n.compareTo(r)>=0&&await function(o,a){const l=o.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=o.Ia.get(d);h&&o.Ia.set(d,h.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const h=o.Ia.get(c);if(!h)return;o.Ia.set(c,h.withResumeToken(Bt.EMPTY_BYTE_STRING,h.snapshotVersion)),h5(o,c);const f=new Yr(h.target,c,d,h.sequenceNumber);wp(o,f)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){me(rs,"Failed to raise snapshot:",r),await gu(t,r)}}async function gu(t,e,n){if(!yo(e))throw e;t.Ea.add(1),await fl(t),t.Ra.set("Offline"),n||(n=()=>l5(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me(rs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await td(t)})}function m5(t,e){return e().catch(n=>gu(t,n,e))}async function nd(t){const e=Se(t),n=yi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:sp;for(;s9(e);)try{const i=await FP(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,o9(e,i)}catch(i){await gu(e,i)}p5(e)&&g5(e)}function s9(t){return cs(t)&&t.Ta.length<10}function o9(t,e){t.Ta.push(e);const n=yi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function p5(t){return cs(t)&&!yi(t).x_()&&t.Ta.length>0}function g5(t){yi(t).start()}async function a9(t){yi(t).ra()}async function l9(t){const e=yi(t);for(const n of t.Ta)e.ea(n.mutations)}async function c9(t,e,n){const r=t.Ta.shift(),i=fp.from(r,e,n);await m5(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await nd(t)}async function u9(t,e){e&&yi(t).X_&&await async function(r,i){if(function(a){return q6(a)&&a!==X.ABORTED}(i.code)){const o=r.Ta.shift();yi(r).B_(),await m5(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await nd(r)}}(t,e),p5(t)&&g5(t)}async function t1(t,e){const n=Se(t);n.asyncQueue.verifyOperationInProgress(),me(rs,"RemoteStore received new credentials");const r=cs(n);n.Ea.add(3),await fl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await td(n)}async function d9(t,e){const n=Se(t);e?(n.Ea.delete(2),await td(n)):e||(n.Ea.add(2),await fl(n),n.Ra.set("Unknown"))}function bo(t){return t.ma||(t.ma=function(n,r,i){const o=Se(n);return o.sa(),new QP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:t9.bind(null,t),t_:n9.bind(null,t),r_:r9.bind(null,t),H_:i9.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),jp(t)?kp(t):t.Ra.set("Unknown")):(await t.ma.stop(),f5(t))})),t.ma}function yi(t){return t.fa||(t.fa=function(n,r,i){const o=Se(n);return o.sa(),new YP(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:a9.bind(null,t),r_:u9.bind(null,t),ta:l9.bind(null,t),na:c9.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await nd(t)):(await t.fa.stop(),t.Ta.length>0&&(me(rs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new wr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,l=new Np(e,n,a,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _p(t,e){if(Ar("AsyncQueue",`${e}: ${t}`),yo(t))return new he(X.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{static emptySet(e){return new qs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||je.comparator(n.key,r.key):(n,r)=>je.comparator(n.key,r.key),this.keyedMap=ta(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof qs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new qs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.ga=new ut(je.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):_e(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ao{constructor(e,n,r,i,o,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new ao(e,n,qs.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class f9{constructor(){this.queries=r1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=Se(n),o=i.queries;i.queries=r1(),o.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new he(X.ABORTED,"Firestore shutting down"))}}function r1(){return new as(t=>Vj(t),Qu)}async function x5(t,e){const n=Se(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new h9,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const l=_p(a,`Initialization of query '${xs(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&zp(n)}async function y5(t,e){const n=Se(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function m9(t,e){const n=Se(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const l of a.Sa)l.Fa(i)&&(r=!0);a.wa=i}}r&&zp(n)}function p9(t,e,n){const r=Se(t),i=r.queries.get(e);if(i)for(const o of i.Sa)o.onError(n);r.queries.delete(e)}function zp(t){t.Ca.forEach(e=>{e.next()})}var lf,i1;(i1=lf||(lf={})).Ma="default",i1.Cache="cache";class v5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ao(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ao.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.key=e}}class w5{constructor(e){this.key=e}}class g9{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=Lj(e),this.tu=new qs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new n1,i=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,f)=>{const m=i.get(h),y=Yu(this.query,f)?f:null,_=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;m&&y?m.data.isEqual(y.data)?_!==A&&(r.track({type:3,doc:y}),P=!0):this.su(m,y)||(r.track({type:2,doc:y}),P=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),P=!0):m&&!y&&(r.track({type:1,doc:m}),P=!0,(c||d)&&(l=!0)),P&&(y?(a=a.add(y),o=A?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:a,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(y,_){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{Rt:P})}};return A(y)-A(_)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new ao(this.query,e.tu,o,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new n1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new w5(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new b5(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Me();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ao.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Cp="SyncEngine";class x9{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class y9{constructor(e){this.key=e,this.hu=!1}}class v9{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new as(l=>Vj(l),Qu),this.Iu=new Map,this.Eu=new Set,this.du=new ut(je.comparator),this.Au=new Map,this.Ru=new gp,this.Vu={},this.mu=new Map,this.fu=oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function b9(t,e,n=!0){const r=C5(t);let i;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await k5(r,e,n,!0),i}async function w9(t,e){const n=C5(t);await k5(n,e,!0,!1)}async function k5(t,e,n,r){const i=await BP(t.localStore,ar(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await k9(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&d5(t.remoteStore,i),l}async function k9(t,e,n,r,i){t.pu=(f,m,y)=>async function(A,P,w,b){let j=P.view.ru(w);j.Cs&&(j=await Yv(A.localStore,P.query,!1).then(({documents:v})=>P.view.ru(v,j)));const R=b&&b.targetChanges.get(P.targetId),L=b&&b.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(j,A.isPrimaryClient,R,L);return o1(A,P.targetId,V.au),V.snapshot}(t,f,m,y);const o=await Yv(t.localStore,e,!0),a=new g9(e,o.Qs),l=a.ru(o.documents),c=hl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=a.applyChanges(l,t.isPrimaryClient,c);o1(t,n,d.au);const h=new x9(e,n,a);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function j9(t,e,n){const r=Se(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(a=>!Qu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await of(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&bp(r.remoteStore,i.targetId),cf(r,i.targetId)}).catch(xo)):(cf(r,i.targetId),await of(r.localStore,i.targetId,!0))}async function N9(t,e){const n=Se(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bp(n.remoteStore,r.targetId))}async function _9(t,e,n){const r=A9(t);try{const i=await function(a,l){const c=Se(a),d=et.now(),h=l.reduce((y,_)=>y.add(_.key),Me());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let _=Pr(),A=Me();return c.Ns.getEntries(y,h).next(P=>{_=P,_.forEach((w,b)=>{b.isValidDocument()||(A=A.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,_)).next(P=>{f=P;const w=[];for(const b of l){const j=F6(b,f.get(b.key).overlayedDocument);j!=null&&w.push(new ls(b.key,j,Sj(j.value.mapValue),lr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,w,l)}).next(P=>{m=P;const w=P.applyToLocalDocumentSet(f,A);return c.documentOverlayCache.saveOverlays(y,P.batchId,w)})}).then(()=>({batchId:m.batchId,changes:Fj(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new ut(De)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,i.batchId,n),await ml(r,i.changes),await nd(r.remoteStore)}catch(i){const o=_p(i,"Failed to persist write");n.reject(o)}}async function j5(t,e){const n=Se(t);try{const r=await LP(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Au.get(o);a&&(qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?qe(a.hu,14607):i.removedDocuments.size>0&&(qe(a.hu,42227),a.hu=!1))}),await ml(n,r,e)}catch(r){await xo(r)}}function s1(t,e,n){const r=Se(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(a,l){const c=Se(a);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&zp(c)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function z9(t,e,n){const r=Se(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),o=i&&i.key;if(o){let a=new ut(je.comparator);a=a.insert(o,Gt.newNoDocument(o,Ce.min()));const l=Me().add(o),c=new Zu(Ce.min(),new Map,new ut(De),a,l);await j5(r,c),r.du=r.du.remove(o),r.Au.delete(e),Ep(r)}else await of(r.localStore,e,!1).then(()=>cf(r,e,n)).catch(xo)}async function C9(t,e){const n=Se(t),r=e.batch.batchId;try{const i=await VP(n.localStore,e);_5(n,r,null),N5(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ml(n,i)}catch(i){await xo(i)}}async function E9(t,e,n){const r=Se(t);try{const i=await function(a,l){const c=Se(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(qe(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);_5(r,e,n),N5(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ml(r,i)}catch(i){await xo(i)}}function N5(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function _5(t,e,n){const r=Se(t);let i=r.Vu[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function cf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||z5(t,r)})}function z5(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(bp(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Ep(t))}function o1(t,e,n){for(const r of n)r instanceof b5?(t.Ru.addReference(r.key,e),S9(t,r)):r instanceof w5?(me(Cp,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||z5(t,r.key)):_e(19791,{wu:r})}function S9(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(me(Cp,"New document in limbo: "+n),t.Eu.add(r),Ep(t))}function Ep(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new je(Ye.fromString(e)),r=t.fu.next();t.Au.set(r,new y9(n)),t.du=t.du.insert(n,r),d5(t.remoteStore,new Yr(ar(up(n.path)),r,"TargetPurposeLimboResolution",Hu.ce))}}async function ml(t,e,n){const r=Se(t),i=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){i.push(d);const f=yp.As(c.targetId,d);o.push(f)}}))}),await Promise.all(a),r.Pu.H_(i),await async function(c,d){const h=Se(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(d,m=>J.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>J.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!yo(f))throw f;me(vp,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),_=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(_);h.Ms=h.Ms.insert(m,A)}}}(r.localStore,o))}async function T9(t,e){const n=Se(t);if(!n.currentUser.isEqual(e)){me(Cp,"User change. New user:",e.toKey());const r=await a5(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(c=>{c.reject(new he(X.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ml(n,r.Ls)}}function I9(t,e){const n=Se(t),r=n.Au.get(e);if(r&&r.hu)return Me().add(r.key);{let i=Me();const o=n.Iu.get(e);if(!o)return i;for(const a of o){const l=n.Tu.get(a);i=i.unionWith(l.view.nu)}return i}}function C5(t){const e=Se(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=j5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=I9.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=z9.bind(null,e),e.Pu.H_=m9.bind(null,e.eventManager),e.Pu.yu=p9.bind(null,e.eventManager),e}function A9(t){const e=Se(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C9.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=E9.bind(null,e),e}class xu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return MP(this.persistence,new PP,e.initialUser,this.serializer)}Cu(e){return new o5(xp.mi,this.serializer)}Du(e){return new $P}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}xu.provider={build:()=>new xu};class P9 extends xu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){qe(this.persistence.referenceDelegate instanceof pu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new yP(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new o5(r=>pu.mi(r,n),this.serializer)}}class uf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>s1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=T9.bind(null,this.syncEngine),await d9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new f9}()}createDatastore(e){const n=ed(e.databaseInfo.databaseId),r=function(o){return new KP(o)}(e.databaseInfo);return function(o,a,l,c){return new JP(o,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,l){return new e9(r,i,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>s1(this.syncEngine,n,0),function(){return Zv.v()?new Zv:new WP}())}createSyncEngine(e,n){return function(i,o,a,l,c,d,h){const f=new v9(i,o,a,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Se(i);me(rs,"RemoteStore shutting down."),o.Ea.add(5),await fl(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}uf.provider={build:()=>new uf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ar("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="FirestoreClient";class R9{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=qt.UNAUTHENTICATED,this.clientId=ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{me(vi,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(me(vi,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_p(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xh(t,e){t.asyncQueue.verifyOperationInProgress(),me(vi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await a5(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function a1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await D9(t);me(vi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>t1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>t1(e.remoteStore,i)),t._onlineComponents=e}async function D9(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(vi,"Using user provided OfflineComponentProvider");try{await xh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===X.FAILED_PRECONDITION||i.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;no("Error using user provided cache. Falling back to memory cache: "+n),await xh(t,new xu)}}else me(vi,"Using default OfflineComponentProvider"),await xh(t,new P9(void 0));return t._offlineComponents}async function S5(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(vi,"Using user provided OnlineComponentProvider"),await a1(t,t._uninitializedComponentsProvider._online)):(me(vi,"Using default OnlineComponentProvider"),await a1(t,new uf))),t._onlineComponents}function M9(t){return S5(t).then(e=>e.syncEngine)}async function T5(t){const e=await S5(t),n=e.eventManager;return n.onListen=b9.bind(null,e.syncEngine),n.onUnlisten=j9.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=w9.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=N9.bind(null,e.syncEngine),n}function V9(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,d){const h=new E5({next:m=>{h.Nu(),a.enqueueAndForget(()=>y5(o,f));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new he(X.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new he(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new v5(up(l.path),h,{includeMetadataChanges:!0,qa:!0});return x5(o,f)}(await T5(t),t.asyncQueue,e,n,r)),r.promise}function L9(t,e,n={}){const r=new wr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,d){const h=new E5({next:m=>{h.Nu(),a.enqueueAndForget(()=>y5(o,f)),m.fromCache&&c.source==="server"?d.reject(new he(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new v5(l,h,{includeMetadataChanges:!0,qa:!0});return x5(o,f)}(await T5(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A5="firestore.googleapis.com",c1=!0;class u1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=A5,this.ssl=c1}else this.host=e.host,this.ssl=e.ssl??c1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=s5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gP)throw new he(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}e6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=I5(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new he(X.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new WA;switch(r.type){case"firstParty":return new KA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new he(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=l1.get(n);r&&(me("ComponentProvider","Removing Datastore"),l1.delete(n),r.terminate())}(this),Promise.resolve()}}function O9(t,e,n,r={}){var d;t=fi(t,rd);const i=Km(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(QT(`https://${l}`),ZT("Firestore",!0)),o.host!==A5&&o.host!==l&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:i,emulatorOptions:r};if(!qa(c,a)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=qt.MOCK_USER;else{h=YT(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new he(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new qt(m)}t._authCredentials=new qA(new xj(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new li(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ul(n,kt._jsonSchema))return new kt(e,r||null,new je(Ye.fromString(n.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:wt("string",kt._jsonSchemaVersion),referencePath:wt("string")};class li extends us{constructor(e,n,r){super(e,n,up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new je(e))}withConverter(e){return new li(this.firestore,e,this._path)}}function yh(t,e,...n){if(t=Sr(t),yj("collection","path",e),t instanceof rd){const r=Ye.fromString(e,...n);return jv(r),new li(t,null,r)}{if(!(t instanceof kt||t instanceof li))throw new he(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return jv(r),new li(t.firestore,null,r)}}function ot(t,e,...n){if(t=Sr(t),arguments.length===1&&(e=ip.newId()),yj("doc","path",e),t instanceof rd){const r=Ye.fromString(e,...n);return kv(r),new kt(t,null,new je(r))}{if(!(t instanceof kt||t instanceof li))throw new he(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return kv(r),new kt(t.firestore,t instanceof li?t.converter:null,new je(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d1="AsyncQueue";class h1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new c5(this,"async_queue_retry"),this._c=()=>{const r=gh();r&&me(d1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new wr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yo(e))throw e;me(d1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Ar("INTERNAL UNHANDLED ERROR: ",f1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=Np.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&_e(47125,{Pc:f1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function f1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class pl extends rd{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new h1,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new h1(e),this._firestoreClient=void 0,await e}}}function F9(t,e){const n=typeof t=="object"?t:Fk(),r=typeof t=="string"?t:cu,i=cl(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=GT("firestore");o&&O9(i,...o)}return i}function Sp(t){if(t._terminated)throw new he(X.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||B9(t),t._firestoreClient}function B9(t){var r,i,o;const e=t._freezeSettings(),n=function(l,c,d,h){return new d6(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,I5(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new R9(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Bt.fromBase64String(e))}catch(n){throw new he(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Bt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ul(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:wt("string",zn._jsonSchemaVersion),bytes:wt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ur._jsonSchemaVersion}}static fromJSON(e){if(ul(e,ur._jsonSchema))return new ur(e.latitude,e.longitude)}}ur._jsonSchemaVersion="firestore/geoPoint/1.0",ur._jsonSchema={type:wt("string",ur._jsonSchemaVersion),latitude:wt("number"),longitude:wt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ul(e,dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new dr(e.vectorValues);throw new he(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}dr._jsonSchemaVersion="firestore/vectorValue/1.0",dr._jsonSchema={type:wt("string",dr._jsonSchemaVersion),vectorValues:wt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U9=/^__.*__$/;class $9{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ls(e,this.data,this.fieldMask,n,this.fieldTransforms):new dl(e,this.data,n,this.fieldTransforms)}}function R5(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ac:t})}}class Ip{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ip({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return yu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(R5(this.Ac)&&U9.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class W9{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ed(e)}Cc(e,n,r,i=!1){return new Ip({Ac:e,methodName:n,Dc:r,path:Vt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D5(t){const e=t._freezeSettings(),n=ed(t._databaseId);return new W9(t._databaseId,!!e.ignoreUndefinedProperties,n)}function q9(t,e,n,r,i,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);L5("Data must be an object, but it was:",a,r);const l=M5(r,a);let c,d;if(o.merge)c=new $n(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const m=G9(e,f,n);if(!a.contains(m))throw new he(X.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Q9(h,m)||h.push(m)}c=new $n(h),d=a.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=a.fieldTransforms;return new $9(new _n(l),c,d)}function H9(t,e,n,r=!1){return Ap(n,t.Cc(r?4:3,e))}function Ap(t,e){if(V5(t=Sr(t)))return L5("Unsupported field value:",e,t),M5(t,e);if(t instanceof P5)return function(r,i){if(!R5(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const l of r){let c=Ap(l,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Sr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return R6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=et.fromDate(r);return{timestampValue:mu(i.serializer,o)}}if(r instanceof et){const o=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:mu(i.serializer,o)}}if(r instanceof ur)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:Jj(i.serializer,r._byteString)};if(r instanceof kt){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:pp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof dr)return function(a,l){return{mapValue:{fields:{[Cj]:{stringValue:Ej},[uu]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return dp(l.serializer,d)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${qu(r)}`)}(t,e)}function M5(t,e){const n={};return wj(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):os(t,(r,i)=>{const o=Ap(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function V5(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof ur||t instanceof zn||t instanceof kt||t instanceof P5||t instanceof dr)}function L5(t,e,n){if(!V5(n)||!vj(n)){const r=qu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function G9(t,e,n){if((e=Sr(e))instanceof Tp)return e._internalPath;if(typeof e=="string")return O5(t,e);throw yu("Field path arguments must be of type string or ",t,!1,void 0,n)}const K9=new RegExp("[~\\*/\\[\\]]");function O5(t,e,n){if(e.search(K9)>=0)throw yu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Tp(...e.split("."))._internalPath}catch{throw yu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function yu(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new he(X.INVALID_ARGUMENT,l+t+c)}function Q9(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Y9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Pp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Y9 extends F5{data(){return super.data()}}function Pp(t,e){return typeof e=="string"?O5(t,e):e instanceof Tp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new he(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rp{}class B5 extends Rp{}function m1(t,e,...n){let r=[];e instanceof Rp&&r.push(e),r=r.concat(n),function(o){const a=o.filter(c=>c instanceof Mp).length,l=o.filter(c=>c instanceof Dp).length;if(a>1||a>0&&l>0)throw new he(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Dp extends B5{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Dp(e,n,r)}_apply(e){const n=this._parse(e);return U5(e._query,n),new us(e.firestore,e.converter,Z0(e._query,n))}_parse(e){const n=D5(e.firestore);return function(o,a,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new he(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){x1(f,h);const _=[];for(const A of f)_.push(g1(c,o,A));m={arrayValue:{values:_}}}else m=g1(c,o,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||x1(f,h),m=H9(l,a,f,h==="in"||h==="not-in");return bt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class Mp extends Rp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const l=o.getFlattenedFilters();for(const c of l)U5(a,c),a=Z0(a,c)}(e._query,n),new us(e.firestore,e.converter,Z0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vp extends B5{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vp(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new he(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new he(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Xa(o,a)}(e._query,this._field,this._direction);return new us(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new vo(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function p1(t,e="asc"){const n=e,r=Pp("orderBy",t);return Vp._create(r,n)}function g1(t,e,n){if(typeof(n=Sr(n))=="string"){if(n==="")throw new he(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mj(e)&&n.indexOf("/")!==-1)throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ye.fromString(n));if(!je.isDocumentKey(r))throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iv(t,new je(r))}if(n instanceof kt)return Iv(t,n._key);throw new he(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(n)}.`)}function x1(t,e){if(!Array.isArray(t)||t.length===0)throw new he(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function U5(t,e){const n=function(i,o){for(const a of i)for(const l of a.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new he(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class J9{convertValue(e,n="none"){switch(xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return os(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,i,o;const n=(o=(i=(r=e.fields)==null?void 0:r[uu].arrayValue)==null?void 0:i.values)==null?void 0:o.map(a=>pt(a.doubleValue));return new dr(n)}convertGeoPoint(e){return new ur(pt(e.latitude),pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ku(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ka(e));default:return null}}convertTimestamp(e){const n=pi(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);qe(i5(r),9688,{name:e});const i=new Qa(r.get(1),r.get(3)),o=new je(r.popFirst(5));return i.isEqual(n)||Ar(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ra{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Gi extends F5{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Pp("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Gi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Gi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Gi._jsonSchema={type:wt("string",Gi._jsonSchemaVersion),bundleSource:wt("string","DocumentSnapshot"),bundleName:wt("string"),bundle:wt("string")};class kc extends Gi{data(e={}){return super.data(e)}}class Hs{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ra(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kc(this._firestore,this._userDataWriter,r.key,r,new ra(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new he(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(l=>{const c=new kc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ra(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new kc(i._firestore,i._userDataWriter,l.doc.key,l.doc,new ra(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:eR(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ip.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function eR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(t){t=fi(t,kt);const e=fi(t.firestore,pl);return V9(Sp(e),t._key).then(n=>tR(e,t,n))}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:wt("string",Hs._jsonSchemaVersion),bundleSource:wt("string","QuerySnapshot"),bundleName:wt("string"),bundle:wt("string")};class $5 extends J9{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,n)}}function vh(t){t=fi(t,us);const e=fi(t.firestore,pl),n=Sp(e),r=new $5(e);return X9(t._query),L9(n,t._query).then(i=>new Hs(e,r,t,i))}function Vn(t,e,n){t=fi(t,kt);const r=fi(t.firestore,pl),i=Z9(t.converter,e,n);return W5(r,[q9(D5(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,lr.none())])}function y1(t){return W5(fi(t.firestore,pl),[new hp(t._key,lr.none())])}function W5(t,e){return function(r,i){const o=new wr;return r.asyncQueue.enqueueAndForget(async()=>_9(await M9(r),i,o)),o.promise}(Sp(t),e)}function tR(t,e,n){const r=n.docs.get(e._key),i=new $5(t);return new Gi(t,i,e._key,r,new ra(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){go=i})(u3),hi(new Tr("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),l=new pl(new HA(r.getProvider("auth-internal")),new QA(a,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new he(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qa(d.options.projectId,h)}(a,i),a);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),or(yv,vv,e),or(yv,vv,"esm2020")})();const nR={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},q5=Ok(nR);OA(q5);const Qe=F9(q5),We={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},Ln=t=>JSON.parse(JSON.stringify(t)),Be={async saveRecipe(t,e){try{return await Vn(ot(Qe,We.RECIPES,t),Ln({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=m1(yh(Qe,We.RECIPES),p1("updatedAt","desc")),e=await vh(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await y1(ot(Qe,We.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Vn(ot(Qe,We.SETTINGS,"inventory_v2"),Ln({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await Jn(ot(Qe,We.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await Jn(ot(Qe,We.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Vn(ot(Qe,We.SETTINGS,"costs_data"),Ln({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await Jn(ot(Qe,We.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Vn(ot(Qe,We.SETTINGS,"ficha_tecnica"),Ln({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await Jn(ot(Qe,We.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Vn(ot(Qe,We.SETTINGS,"global_config"),Ln({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await Jn(ot(Qe,We.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Vn(ot(Qe,We.SETTINGS,We.RECIPES_V2),Ln({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await Jn(ot(Qe,We.SETTINGS,We.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Vn(ot(Qe,We.RECIPES_V3,String(t)),Ln({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=m1(yh(Qe,We.RECIPES_V3),p1("updatedAt","desc"));t=await vh(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await vh(yh(Qe,We.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await y1(ot(Qe,We.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Vn(ot(Qe,We.SETTINGS,We.KANBAN),Ln({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await Jn(ot(Qe,We.SETTINGS,We.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Vn(ot(Qe,We.SETTINGS,"recipe_categories"),Ln({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await Jn(ot(Qe,We.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}},async syncSuppliers(t){try{return await Vn(ot(Qe,We.SETTINGS,"suppliers"),Ln({suppliers:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing suppliers:",e),!1}},async getSuppliers(){try{const t=await Jn(ot(Qe,We.SETTINGS,"suppliers"));return t.exists()?t.data():null}catch(t){return console.error("Error getting suppliers:",t),null}},async syncProducts(t,e){try{return await Vn(ot(Qe,We.SETTINGS,"products_v1"),Ln({products:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing products:",n),!1}},async getProducts(){try{const t=await Jn(ot(Qe,We.SETTINGS,"products_v1"));return t.exists()?t.data():null}catch(t){return console.error("Error getting products:",t),null}}};function rR(){const[t,e]=k.useState([]),[n,r]=k.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[i,o]=k.useState(!1),[a,l]=k.useState(null),[c,d]=k.useState(null),[h,f]=k.useState(!1),[m,y]=k.useState(""),[_,A]=k.useState("Global Investment Matrix"),[P,w]=k.useState(!1),[b,j]=k.useState(.13),[R,L]=k.useState(!1),[V,v]=k.useState(null),x=k.useRef(null),N=k.useCallback((T,O="success")=>{x.current&&clearTimeout(x.current),v({message:T,type:O}),x.current=setTimeout(()=>v(null),3500)},[]),[C,z]=k.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),I=k.useRef(null);k.useEffect(()=>{try{const T=localStorage.getItem("padoca_costs_v1"),O=localStorage.getItem("padoca_costs_categories"),F=localStorage.getItem("padoca_costs_title"),ee=localStorage.getItem("padoca_global_tax");let fe=T?JSON.parse(T):[],de=O?JSON.parse(O):null;F&&A(F),ee&&j(Number(ee)),de&&(de=de.map(B=>B==="Pessoal"?"Maquinrio":B),r(de)),fe&&(fe=fe.map(B=>({...B,category:B.category==="Pessoal"?"Maquinrio":B.category})),e(fe))}catch(T){console.error("Load failed",T)}},[]);const[S,ke]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const O=await Be.getCosts();O&&(O.costs&&e(O.costs),O.categories&&r(O.categories));const F=await Be.getGlobalSettings();F&&F.taxRate!==void 0&&(j(F.taxRate),localStorage.setItem("padoca_global_tax",F.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{ke(!0)}})()},[]),k.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),S&&Be.syncCosts(t,n)},[t,n,S]),k.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),k.useEffect(()=>{localStorage.setItem("padoca_costs_title",_)},[_]),k.useEffect(()=>{localStorage.setItem("padoca_global_tax",b.toString()),S&&Be.syncGlobalSettings({taxRate:b}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:b}}))},[b,S]);const ue=T=>(Number(T)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),ye=k.useMemo(()=>{const T=t.reduce((F,ee)=>{const fe=Number(ee.quantity)||1,de=(Number(ee.amount)||0)*fe;return F.total+=de,ee.type==="Fixo"?F.fixed+=de:F.variable+=de,F},{total:0,fixed:0,variable:0}),O=T.total*b;return{...T,hst:O,grandTotal:T.total+O}},[t]),we=k.useMemo(()=>n.reduce((T,O)=>{const F=t.filter(ee=>ee.category===O);return F.length>0&&(T[O]=F),T},{}),[t,n]),Y=T=>{if(T.preventDefault(),!C.description||!C.amount)return;const O=n.includes(C.category)?C.category:n[0],F={...C,category:O,amount:Number(C.amount),quantity:Number(C.quantity)||1};e(a?ee=>ee.map(fe=>fe.id===a?{...F,id:a}:fe):ee=>[...ee,{...F,id:Date.now().toString()}]),Z()},le=T=>{d({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(O=>O.filter(F=>F.id!==T)),N("Despesa removida com sucesso."),d(null)},onCancel:()=>d(null)})},Z=()=>{o(!1),l(null),z({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},ve=T=>{z({description:T.description||"",amount:T.amount||"",quantity:T.quantity||1,category:T.category||n[0],type:T.type||"Varivel",link:T.link||"",date:T.date||new Date().toISOString().split("T")[0]}),l(T.id),o(!0)},xe=()=>{m&&(n.includes(m)||(r(T=>[...T,m]),N("Categoria adicionada.")),y(""))},Pe=T=>{d({title:"Remover Categoria",message:`A categoria "${T}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(O=>O.filter(F=>F!==T)),N("Categoria removida."),d(null)},onCancel:()=>d(null)})},D=()=>{try{const T=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],O=t.map(B=>{const re=Number(B.quantity)||1,ne=Number(B.amount)||0,oe=re*ne;return[B.id,B.date||"-",`"${B.description.replace(/"/g,'""')}"`,re,ne.toFixed(2).replace(".",","),oe.toFixed(2).replace(".",","),`"${B.category}"`,B.type,`"${B.link||""}"`]}),F="\uFEFF"+[T.join(";"),...O.map(B=>B.join(";"))].join(`
`),ee=new Blob([F],{type:"text/csv;charset=utf-8;"}),fe=URL.createObjectURL(ee),de=document.createElement("a");de.href=fe,de.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,de.click(),N("Relatrio Excel exportado!")}catch{N("Erro ao exportar CSV")}},$=()=>{try{const T=JSON.stringify({version:"1",costs:t,categories:n},null,2),O=new Blob([T],{type:"application/json"}),F=URL.createObjectURL(O),ee=document.createElement("a");ee.href=F,ee.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,ee.click(),N("Backup realizado com sucesso!")}catch{N("Erro ao realizar backup")}},W=T=>{var ee;const O=(ee=T.target.files)==null?void 0:ee[0];if(!O)return;const F=new FileReader;F.onload=fe=>{try{const de=JSON.parse(String(fe.target.result||"{}"));if(de.costs&&Array.isArray(de.costs))e(de.costs),de.categories&&r(de.categories),N("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{N("Arquivo de backup invlido")}},F.readAsText(O),T.target.value=""},se=()=>{d({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),N("Banco de dados limpo."),d(null)},onCancel:()=>d(null)})};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),s.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[P?s.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:_,onChange:T=>A(T.target.value),onBlur:()=>w(!1),onKeyDown:T=>T.key==="Enter"&&w(!1),autoFocus:!0}):s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>w(!0),children:_}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ue(ye.grandTotal)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ue(ye.total)})]}),s.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[R?s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:b*100,onChange:T=>j(Number(T.target.value)/100),onBlur:()=>L(!1),onKeyDown:T=>T.key==="Enter"&&L(!1),autoFocus:!0}),s.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):s.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>L(!0),children:["Tax Impact (",(b*100).toFixed(0),"%)"]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ue(ye.hst)})]})]})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ue(ye.fixed)})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),s.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(ye.fixed/ye.total*100||0).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${ye.fixed/ye.total*100||0}%`}})})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ue(ye.variable)})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),s.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(ye.variable/ye.total*100||0).toFixed(0),"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${ye.variable/ye.total*100||0}%`}})})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),s.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[s.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),s.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),s.jsx("div",{className:"col-span-2"})]}),s.jsx("div",{className:"space-y-6",children:t.length===0?s.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),s.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(we).map(([T,O])=>s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:T}),s.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),s.jsx("div",{className:"space-y-3 md:space-y-1",children:O.map(F=>s.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[s.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[s.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${F.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),s.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[s.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:F.description}),s.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:F.date}),F.link&&s.jsx("a",{href:F.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),s.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:s.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[F.quantity," unit  ",F.type.slice(0,1)]})}),s.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[s.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:ue((Number(F.amount)||0)*(Number(F.quantity)||1))}),s.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[ue(F.amount)," / item"]})]}),s.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[s.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ue((Number(F.amount)||0)*(Number(F.quantity)||1)*(1+b))}),s.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),s.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[s.jsxs("button",{onClick:()=>ve(F),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),s.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),s.jsxs("button",{onClick:()=>le(F.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),s.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},F.id))})]},T))})]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[s.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[s.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),s.jsx("button",{onClick:D,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),s.jsx("button",{onClick:se,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[s.jsx("button",{onClick:$,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),s.jsx("button",{onClick:()=>{var T;return(T=I.current)==null?void 0:T.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),s.jsx("input",{ref:I,type:"file",accept:"application/json",className:"hidden",onChange:W})]})]})]}),s.jsx(Ee,{children:i&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:Z}),s.jsxs(Q.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[80vh]",children:[s.jsx(iR,{}),s.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:s.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),s.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:a?"Editar Despesa":"Nova Despesa"}),s.jsx("button",{onClick:Z,className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?s.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[s.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((T,O)=>s.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${O!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[s.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:T}),s.jsx("button",{onClick:()=>Pe(T),className:"w-11 h-11 flex items-center justify-center text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl touch-manipulation transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},T))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:m,onChange:T=>y(T.target.value)}),s.jsx("button",{className:"h-12 w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold flex items-center justify-center touch-manipulation active:scale-95 transition-transform",onClick:xe,children:"+"})]}),s.jsx("button",{onClick:()=>f(!1),className:"w-full py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all touch-manipulation hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl",children:"Pronto"})]}):s.jsxs("form",{onSubmit:Y,className:"space-y-6 px-4 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:C.description,onChange:T=>z({...C,description:T.target.value}),placeholder:"Mixer, Aluguel..."})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:C.link,onChange:T=>z({...C,link:T.target.value}),placeholder:"Opcional..."})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:C.quantity,onChange:T=>z({...C,quantity:T.target.value})})]}),s.jsxs("div",{className:"flex items-center px-4 py-3",children:[s.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),s.jsxs("div",{className:"flex items-center flex-1",children:[s.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),s.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:C.amount,onChange:T=>z({...C,amount:T.target.value})})]})]})]}),s.jsx("div",{className:"px-1",children:s.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(T=>s.jsx("button",{type:"button",onClick:()=>z({...C,type:T}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${C.type===T?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:T},T))})}),s.jsxs("div",{className:"space-y-3 px-1",children:[s.jsxs("div",{className:"flex justify-between items-center px-1",children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),s.jsx("button",{type:"button",onClick:()=>f(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(T=>s.jsx("button",{type:"button",onClick:()=>z({...C,category:T}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${C.category===T?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:T},T))})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[s.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),s.jsx("button",{type:"button",onClick:Z,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),s.jsx(Ee,{children:V&&rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${V.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":V.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${V.type==="error"?"bg-white animate-pulse":V.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:V.message})]}),document.body)}),s.jsx(Ee,{children:c&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:c.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${c.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:c.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:c.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:c.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:c.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${c.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}function iR(){return Qt(!0),null}const gr="padoca_inventory_v2",bh=["Ingredientes","Embalagens","Utenslios","Outros"],wh=["None","Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function sR(){var Dr,q,te,Le;const[t,e]=k.useState(()=>{try{const M=localStorage.getItem(gr);if(M)return JSON.parse(M);const K=localStorage.getItem("padoca_inventory");return K?JSON.parse(K).map(ae=>({...ae,packageQuantity:ae.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=k.useState(()=>{try{const M=localStorage.getItem(gr+"_categories");return M?JSON.parse(M):bh}catch{return bh}}),[i,o]=k.useState(!1),[a,l]=k.useState("synced");k.useEffect(()=>{(async()=>{try{const K=await Be.getInventory();K&&(Array.isArray(K.items)&&e(K.items),Array.isArray(K.categories)&&r(K.categories));const H=await Be.getGlobalSettings();H&&H.taxRate!==void 0&&d(H.taxRate)}catch(K){console.warn("Inventory cloud load failed",K)}finally{o(!0)}})()},[]);const[c,d]=k.useState(()=>{const M=localStorage.getItem("padoca_global_tax");return M?Number(M):.13});k.useEffect(()=>{const M=K=>{K.detail&&K.detail.taxRate!==void 0&&d(K.detail.taxRate)};return window.addEventListener("global-settings-updated",M),()=>window.removeEventListener("global-settings-updated",M)},[]);const[h,f]=k.useState(!1),[m,y]=k.useState(null),[_,A]=k.useState(""),[P,w]=k.useState("None"),[b,j]=k.useState(null),[R,L]=k.useState(null),V=k.useRef(null),v=k.useCallback((M,K="success")=>{V.current&&clearTimeout(V.current),L({message:M,type:K}),V.current=setTimeout(()=>L(null),3500)},[]),[x,N]=k.useState(()=>{try{const M=localStorage.getItem(gr+"_subcategories");return M?JSON.parse(M):wh}catch{return wh}}),[C,z]=k.useState(!1),[I,S]=k.useState(""),[ke,ue]=k.useState(""),[ye,we]=k.useState("alerts"),[Y,le]=k.useState(""),[Z,ve]=k.useState(null);k.useEffect(()=>{t.filter(K=>["low","warning","high"].includes(B(K))).length===0&&ye==="alerts"&&we("ok")},[t]);const[xe,Pe]=k.useState([]),[D,$]=k.useState(""),[W,se]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const K=await Be.getSuppliers();K!=null&&K.suppliers&&Pe(K.suppliers)}catch(K){console.error("Error loading suppliers:",K)}})()},[]);const T=k.useCallback((M,K)=>{if(!M||!K)return!1;const H=M.trim().toLowerCase(),ae=K.trim().toLowerCase(),Ie=H.split(/\s+/).filter(Ke=>Ke.length>0),Ne=ae.split(/\s+/).filter(Ke=>Ke.length>0);return H===ae&&Ie.length===Ne.length},[]),O=k.useMemo(()=>{const M=D.trim().toLowerCase();return M.length<2?[]:xe.filter(K=>{var H,ae;return((H=K.name)==null?void 0:H.toLowerCase().includes(M))||((ae=K.company)==null?void 0:ae.toLowerCase().includes(M))}).slice(0,8)},[xe,D]),[F,ee]=k.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),fe=k.useRef(!1);k.useEffect(()=>{if(localStorage.setItem(gr,JSON.stringify(t)),localStorage.setItem(gr+"_categories",JSON.stringify(n)),localStorage.setItem(gr+"_subcategories",JSON.stringify(x)),!fe.current){fe.current=!0;return}const M=setTimeout(()=>{window.dispatchEvent(new Event("inventory-updated"))},100);if(i){l("syncing");const K=setTimeout(async()=>{try{const H=await Be.syncInventory(t,n);l(H?"synced":"error")}catch{l("error")}},1500);return()=>{clearTimeout(K),clearTimeout(M)}}return()=>clearTimeout(M)},[t,n,x,i]);const de=M=>(Number(M.packageQuantity)||0)*(Number(M.packageCount)||1),B=M=>{const K=de(M),H=Number(M.minStock)||0,ae=Number(M.maxStock)||0;return H===0&&ae===0?"noLimit":H>0&&K<H?"low":H>0&&K<=H*1.2?"warning":ae>0&&K>ae?"high":ae>0&&K>=ae*.6&&K<=ae||H>0&&ae===0&&K>H*1.2?"adequate":"ok"},re=M=>(Number(M.packageCount)||1)*(Number(M.pricePerUnit)||0),ne=k.useMemo(()=>{const M=t.reduce((ae,Ie)=>ae+re(Ie),0),K=t.length,H=t.reduce((ae,Ie)=>{const Ne=re(Ie);return ae[Ie.category]=(ae[Ie.category]||0)+Ne,ae},{});return{totalValue:M,itemCount:K,byCategory:H,taxImpact:M*c,grandTotal:M*(1+c)}},[t,c]),oe=M=>(Number(M)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),ge=()=>{if(!F.name.trim())return;const M={id:Date.now(),name:F.name.trim(),packageQuantity:Number(F.packageQuantity)||0,packageCount:Number(F.packageCount)||1,unit:F.unit,pricePerUnit:Number(F.pricePerUnit)||0,category:F.category,subcategory:F.category==="Ingredientes"?F.subcategory:null,purchaseDate:F.purchaseDate,supplierId:F.supplierId,supplierName:F.supplierName,minStock:Number(F.minStock)||0,maxStock:Number(F.maxStock)||0,createdAt:new Date().toISOString()};e(K=>[...K,M]),ee({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),$(""),f(!1)},be=(M,K,H)=>{e(ae=>ae.map(Ie=>Ie.id!==M?Ie:{...Ie,[K]:["name","unit","category","subcategory","purchaseDate"].includes(K)?H:Number(H)||0}))},Te=M=>{j({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(K=>K.filter(H=>H.id!==M)),y(null),j(null)},onCancel:()=>j(null)})},$e=k.useMemo(()=>{let M=t;if(_.trim()){const K=_.toLowerCase().trim();M=M.filter(H=>H.name.toLowerCase().includes(K)||H.subcategory&&H.subcategory.toLowerCase().includes(K))}return P&&(M=M.filter(K=>K.subcategory===P)),M},[t,_,P]),Ve=k.useMemo(()=>n.reduce((M,K)=>{const H=$e.filter(ae=>ae.category===K);return H.length>0&&(M[K]=H),M},{}),[$e,n]),Pt=In.useRef(null),fr=()=>{try{const M=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],K=t.map(Ke=>{const Rn=(Number(Ke.packageQuantity)||0)*(Number(Ke.packageCount)||1),gl=(Number(Ke.packageCount)||1)*(Number(Ke.pricePerUnit)||0);return[Ke.id,`"${Ke.name.replace(/"/g,'""')}"`,`"${Ke.category}"`,Ke.packageQuantity,Ke.unit,Ke.packageCount,Rn,Number(Ke.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),gl.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),H="\uFEFF"+[M.join(";"),...K.map(Ke=>Ke.join(";"))].join(`
`),ae=new Blob([H],{type:"text/csv;charset=utf-8;"}),Ie=URL.createObjectURL(ae),Ne=document.createElement("a");Ne.href=Ie,Ne.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,Ne.click(),v("Relatrio de Estoque exportado!","success")}catch(M){console.error(M),v("Erro ao exportar CSV","error")}},sn=M=>{var ae;const K=(ae=M.target.files)==null?void 0:ae[0];if(!K)return;const H=new FileReader;H.onload=Ie=>{try{const Ne=JSON.parse(String(Ie.target.result||"{}"));if(Ne.items&&Array.isArray(Ne.items))e(Ne.items),Ne.categories&&r(Ne.categories),v("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{v("Arquivo de backup invlido","error")}},H.readAsText(K),M.target.value=""},Kn=()=>{j({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(gr,"[]"),j(null)},onCancel:()=>j(null)})};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${a==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":a==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${a==="syncing"?"bg-amber-500":a==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:a==="syncing"?"Cloud Syncing":a==="error"?"Sync Error":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),s.jsxs("button",{onClick:()=>f(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:oe(ne.grandTotal)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:oe(ne.totalValue)})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(c*100).toFixed(0),"%)"]}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:oe(ne.taxImpact)})]})]})]})}),s.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((M,K)=>{const H={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},ae=H[M]||H.Outros,Ie=ne.byCategory[M]||0,Ne=Ie*(1+c),Ke=(Ie/ne.totalValue*100||0).toFixed(0);return s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ae.pulse} ${ae.shadow}`}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:M})]}),s.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:oe(Ne)}),s.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",oe(Ie)," + ",(c*100).toFixed(0),"% tax)"]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),s.jsxs("span",{className:`text-[8px] font-bold ${ae.text}`,children:[Ke,"%"]})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${ae.bg} transition-all duration-1000`,style:{width:`${Ke}%`}})})]})]},M)})})]}),s.jsx(Ee,{children:h&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] flex items-end md:items-start justify-center p-0 md:p-4 md:pt-40",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>f(!1)}),s.jsxs(Q.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:30,stiffness:350},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-md rounded-t-[2rem] md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[90vh] md:max-h-[80vh]",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[s.jsx(Zl,{}),s.jsx("div",{className:"md:hidden flex justify-center pt-3 pb-1",children:s.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),s.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-100 dark:border-zinc-800",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Novo Item"}),s.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Adicionar ao estoque"})]}),s.jsx("button",{onClick:()=>f(!1),className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Nome do Item"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-500/50 transition-all placeholder:text-zinc-400",placeholder:"Ex: Farinha de Trigo",value:F.name,onChange:M=>ee(K=>({...K,name:M.target.value}))})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Qtd/Pacote"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"flex-1 px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"25",value:F.packageQuantity,onChange:M=>ee(K=>({...K,packageQuantity:M.target.value}))}),s.jsxs("select",{className:"w-20 px-2 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:F.unit,onChange:M=>ee(K=>({...K,unit:M.target.value})),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"N Pacotes"}),s.jsx("input",{type:"number",min:"1",inputMode:"numeric",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"1",value:F.packageCount,onChange:M=>ee(K=>({...K,packageCount:M.target.value}))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-2",children:"Preo por Pacote"}),s.jsxs("div",{className:"relative",children:[s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 font-bold text-lg",children:"$"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-12 pr-4 py-4 rounded-2xl bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/20 text-zinc-900 dark:text-white text-xl font-bold text-right focus:outline-none focus:ring-2 focus:ring-emerald-500/30 transition-all",placeholder:"0,00",value:F.pricePerUnit,onChange:M=>ee(K=>({...K,pricePerUnit:M.target.value}))})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:F.category!=="Ingredientes"?"col-span-2":"",children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Categoria"}),s.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:F.category,onChange:M=>ee(K=>({...K,category:M.target.value,subcategory:M.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(M=>s.jsx("option",{value:M,children:M},M))})]}),F.category==="Ingredientes"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Subcategoria"}),s.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:F.subcategory,onChange:M=>ee(K=>({...K,subcategory:M.target.value})),children:x.map(M=>s.jsx("option",{value:M,children:M},M))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-violet-500 uppercase tracking-widest mb-2",children:"Fornecedor"}),s.jsx("div",{className:"relative",children:F.supplierId?s.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl bg-violet-50 dark:bg-violet-500/10 border border-violet-200 dark:border-violet-500/20",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-lg",children:(q=(Dr=F.supplierName)==null?void 0:Dr.charAt(0))==null?void 0:q.toUpperCase()}),s.jsx("span",{className:"flex-1 font-bold text-violet-700 dark:text-violet-300",children:F.supplierName}),s.jsx("button",{onClick:()=>{ee(M=>({...M,supplierId:null,supplierName:""})),$("")},className:"w-10 h-10 rounded-xl flex items-center justify-center text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/30 transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:D,onChange:M=>{const K=M.target.value;$(K),se(!0);const H=xe.find(ae=>T(K,ae.name));H&&(ee(ae=>({...ae,supplierId:H.id,supplierName:H.name})),$(""),se(!1))},onFocus:()=>se(!0)}),W&&O.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-2xl max-h-40 overflow-y-auto z-50",children:O.map(M=>{var K,H;return s.jsxs("button",{onClick:()=>{ee(ae=>({...ae,supplierId:M.id,supplierName:M.name})),$(""),se(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:(H=(K=M.name)==null?void 0:K.charAt(0))==null?void 0:H.toUpperCase()}),s.jsx("span",{className:"font-bold text-zinc-900 dark:text-white",children:M.name})]},M.id)})})]})})]}),s.jsxs("div",{className:"p-4 rounded-2xl bg-amber-50 dark:bg-amber-500/5 border border-amber-200/50 dark:border-amber-500/10",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-widest",children:"Limites de Estoque"}),s.jsxs("select",{className:"px-3 py-1.5 rounded-lg bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 text-xs font-bold uppercase tracking-wider border-none focus:outline-none focus:ring-2 focus:ring-amber-500/30 cursor-pointer appearance-none pr-6 bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2020%2020%22%20fill%3d%22%23d97706%22%3e%3cpath%20fill-rule%3d%22evenodd%22%20d%3d%22M5.293%207.293a1%201%200%20011.414%200L10%2010.586l3.293-3.293a1%201%200%20111.414%201.414l-4%204a1%201%200%2001-1.414%200l-4-4a1%201%200%20010-1.414z%22%20clip-rule%3d%22evenodd%22%2f%3e%3c%2fsvg%3e')] bg-no-repeat bg-[right_0.3rem_center] bg-[length:1rem]",value:F.unit,onChange:M=>ee(K=>({...K,unit:M.target.value})),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mnimo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:F.minStock,onChange:M=>ee(K=>({...K,minStock:M.target.value}))}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:F.unit})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mximo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:F.maxStock,onChange:M=>ee(K=>({...K,maxStock:M.target.value}))}),s.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:F.unit})]})]})]}),s.jsx("p",{className:"text-[10px] text-amber-600/60 mt-2 text-center",children:"Deixe em 0 para desativar alertas"})]}),F.packageQuantity&&F.packageCount&&s.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-zinc-100 to-zinc-50 dark:from-zinc-800 dark:to-zinc-900 border border-zinc-200 dark:border-zinc-700",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Total"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:[Number(F.packageQuantity)*Number(F.packageCount)," ",F.unit]}),F.pricePerUnit&&s.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:oe(Number(F.packageCount)*Number(F.pricePerUnit))})]})]})})]}),s.jsxs("div",{className:"px-6 py-4 border-t border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 flex gap-3",children:[s.jsx("button",{onClick:()=>f(!1),className:"flex-1 py-4 rounded-2xl font-bold text-sm text-zinc-600 dark:text-zinc-400 bg-zinc-200 dark:bg-zinc-800 hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:ge,disabled:!F.name.trim(),className:"flex-[2] py-4 rounded-2xl font-bold text-sm text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]})}),s.jsx("section",{className:"relative z-10 mb-6",children:s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:_,onChange:M=>A(M.target.value)}),_&&s.jsx("button",{onClick:()=>A(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[s.jsx("button",{onClick:()=>w(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),x.map(M=>s.jsx("button",{onClick:()=>w(P===M?null:M),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${P===M?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:M},M))]}),(_||P)&&s.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[s.jsxs("span",{className:"text-xs text-zinc-500",children:[$e.length," ",$e.length===1?"resultado":"resultados"]}),s.jsx("button",{onClick:()=>{A(""),w(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(Ve).length>0&&s.jsx("div",{className:"space-y-8",children:Object.entries(Ve).map(([M,K])=>s.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[s.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:M}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:oe((ne.byCategory[M]||0)*(1+c))}),s.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:s.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[K.length," ",K.length===1?"item":"itens"]})})]})]}),s.jsxs("div",{className:"hidden md:block",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[s.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),s.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),s.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:K.map(H=>s.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:m===H.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:H.name,onChange:ae=>be(H.id,"name",ae.target.value)})}),s.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[s.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.packageQuantity,onChange:ae=>be(H.id,"packageQuantity",ae.target.value)}),s.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:H.unit,onChange:ae=>be(H.id,"unit",ae.target.value),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]})]}),s.jsx("div",{className:"col-span-1",children:s.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:H.packageCount,onChange:ae=>be(H.id,"packageCount",ae.target.value)})}),H.category==="Ingredientes"&&s.jsx("div",{className:"col-span-2",children:s.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:H.subcategory||"",onChange:ae=>be(H.id,"subcategory",ae.target.value),children:x.map(ae=>s.jsx("option",{value:ae,children:ae},ae))})}),H.category!=="Ingredientes"&&s.jsx("div",{className:"col-span-2 text-right",children:s.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[de(H)," ",H.unit]})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:H.pricePerUnit,onChange:ae=>be(H.id,"pricePerUnit",ae.target.value)})}),s.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[s.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:()=>Te(H.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[B(H)==="low"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-rose-500 shadow-[0_0_6px_rgba(244,63,94,0.5)]",title:"Estoque baixo"}),B(H)==="warning"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-amber-500 shadow-[0_0_6px_rgba(245,158,11,0.4)]",title:"Prximo do mnimo"}),B(H)==="high"&&s.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_6px_rgba(59,130,246,0.4)]",title:"Acima do mximo"}),s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:H.name})]}),s.jsx("div",{className:"col-span-2 text-center",children:s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[H.packageQuantity," ",H.unit]})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[H.packageCount,""]})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[de(H)," ",H.unit]})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:oe(H.pricePerUnit)})}),s.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:oe(re(H)*(1+c))}),s.jsx("button",{onClick:()=>y(H.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},H.id))})]}),s.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:K.map(H=>{const ae=B(H),Ie=ae==="low"?"border-l-4 border-l-rose-500":ae==="warning"?"border-l-4 border-l-amber-500":ae==="high"?"border-l-4 border-l-blue-500":"";return s.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${Ie} ${m===H.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:m===H.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>Te(H.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:H.name,onChange:Ne=>be(H.id,"name",Ne.target.value)})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),s.jsx("div",{className:"flex gap-2",children:s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageQuantity,onChange:Ne=>be(H.id,"packageQuantity",Ne.target.value)})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.unit,onChange:Ne=>be(H.id,"unit",Ne.target.value),children:[s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"un",children:"un"}),s.jsx("option",{value:"cx",children:"cx"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),s.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.packageCount,onChange:Ne=>be(H.id,"packageCount",Ne.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),s.jsxs("div",{className:"relative group",children:[s.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:H.pricePerUnit,onChange:Ne=>be(H.id,"pricePerUnit",Ne.target.value)})]})]})]}),H.category==="Ingredientes"&&s.jsxs("div",{children:[s.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),s.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:H.subcategory||"",onChange:Ne=>be(H.id,"subcategory",Ne.target.value),children:x.map(Ne=>s.jsx("option",{value:Ne,children:Ne},Ne))})]})]}):s.jsxs("div",{onClick:()=>y(H.id),className:"group cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:H.name}),s.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[de(H)," ",H.unit," em estoque"]})]}),s.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[H.packageCount," pcts"]})]}),s.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),s.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:oe(H.pricePerUnit)})]}),s.jsxs("div",{className:"flex flex-col items-end",children:[s.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:oe(re(H)*(1+c))})})]})]})]})},H.id)})}),s.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",M]}),s.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:oe((ne.byCategory[M]||0)*(1+c))})]})]},M))}),Object.keys(Ve).length===0&&P!=="None"&&s.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),s.jsx("button",{onClick:()=>f(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),s.jsx("section",{className:"relative z-10 mt-8 mb-8",children:s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.25,.46,.45,.94]},className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-3xl p-6 md:p-8 border border-zinc-200/60 dark:border-white/10 shadow-2xl shadow-zinc-900/5 dark:shadow-black/20",children:[s.jsx("div",{className:"flex items-center justify-between mb-8",children:s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-zinc-900 dark:text-white tracking-tight",children:"Nveis"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1 font-medium",children:"Monitoramento de estoque"})]})}),s.jsx("div",{className:"relative mb-6",children:s.jsxs("div",{className:"relative flex bg-zinc-100/90 dark:bg-zinc-800/90 backdrop-blur-sm p-1 rounded-[10px] overflow-x-auto scrollbar-hide md:overflow-visible",children:[s.jsx(Q.div,{className:"absolute top-1 bottom-1 bg-white dark:bg-zinc-700 rounded-lg shadow-sm",initial:!1,animate:{width:`calc(${100/4}% - 2px)`,x:`calc(${["alerts","ok","noLimits","all"].indexOf(ye)*100}% + 1px)`},transition:{type:"spring",stiffness:400,damping:30}}),[{id:"alerts",label:"Crtico"},{id:"ok",label:"Normal"},{id:"noLimits",label:"S/ Limite"},{id:"all",label:"Todos"}].map(M=>s.jsx("button",{onClick:()=>we(M.id),className:`
                                        relative flex-1 min-w-[60px] py-2 px-1.5 text-center z-10 transition-colors duration-200
                                        ${ye===M.id?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"}
                                    `,children:s.jsx("span",{className:"text-[13px] font-semibold tracking-[-0.01em]",children:M.label})},M.id))]})}),s.jsxs("div",{className:"relative mb-6",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",placeholder:"Buscar...",value:Y,onChange:M=>le(M.target.value),className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border-0 text-zinc-900 dark:text-white text-sm font-medium placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900/10 dark:focus:ring-white/20 transition-shadow"})]}),s.jsxs("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto overscroll-contain pr-1 -mr-1",children:[t.filter(M=>{const K=B(M);return ye==="noLimits"?K==="noLimit":ye==="alerts"?["low","warning","high"].includes(K):ye==="ok"?K==="ok"||K==="adequate":!0}).filter(M=>Y.trim()?M.name.toLowerCase().includes(Y.toLowerCase()):!0).map(M=>{const K=B(M),H=de(M),ae=Number(M.minStock)||0,Ie=Number(M.maxStock)||0;let Ne=0;Ie>0?Ne=Math.min(H/Ie*100,100):ae>0&&(Ne=Math.min(H/(ae*2)*100,100));const Ke={low:{bg:"bg-rose-50 dark:bg-rose-500/5",accent:"bg-rose-500",text:"text-rose-600 dark:text-rose-400"},warning:{bg:"bg-amber-50 dark:bg-amber-500/5",accent:"bg-amber-500",text:"text-amber-600 dark:text-amber-400"},high:{bg:"bg-violet-50 dark:bg-violet-500/5",accent:"bg-violet-500",text:"text-violet-600 dark:text-violet-400"},ok:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-emerald-500",text:"text-emerald-600 dark:text-emerald-400"},adequate:{bg:"bg-sky-50 dark:bg-sky-500/5",accent:"bg-sky-500",text:"text-sky-600 dark:text-sky-400"},noLimit:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-zinc-300 dark:bg-zinc-600",text:"text-zinc-500 dark:text-zinc-400"}},Rn=Ke[K]||Ke.noLimit;return s.jsx("div",{onClick:()=>ve(M),className:`group p-4 rounded-2xl ${Rn.bg} cursor-pointer transition-all duration-200 hover:shadow-lg active:scale-[0.98]`,children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-11 h-11 rounded-xl ${Rn.accent} flex items-center justify-center shadow-lg`,children:s.jsx("span",{className:"text-white text-sm font-bold tabular-nums",children:H})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-semibold text-zinc-900 dark:text-white truncate",children:M.name}),s.jsxs("p",{className:`text-xs font-medium mt-0.5 ${Rn.text}`,children:[H," ",M.unit," ",ae>0&&` min ${ae}`," ",Ie>0&&` max ${Ie}`]}),(ae>0||Ie>0)&&s.jsx("div",{className:"mt-2 h-1 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full ${Rn.accent} rounded-full transition-all duration-500`,style:{width:`${Ne}%`}})})]}),s.jsx("svg",{className:"w-5 h-5 text-zinc-300 group-hover:text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})},M.id)}),t.length===0&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("p",{className:"text-zinc-500 font-medium",children:"Nenhum item"})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6 border-t border-zinc-100 dark:border-zinc-800",children:[s.jsx("button",{onClick:()=>z(!0),className:"text-sm font-medium text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"Categorias"}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:fr,className:"text-sm font-medium text-zinc-400 hover:text-zinc-600 transition-colors",children:"Exportar"}),s.jsx("button",{onClick:Kn,className:"text-sm font-medium text-rose-500 hover:text-rose-600 transition-colors",children:"Limpar"})]}),s.jsx("input",{ref:Pt,type:"file",accept:"application/json",className:"hidden",onChange:sn})]})]})}),Z&&rt.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Zl,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>ve(null)}),s.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Configurar Limites"}),s.jsx("button",{onClick:()=>ve(null),className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:`inline-flex w-16 h-16 rounded-2xl items-center justify-center text-2xl font-bold text-white mb-4 ${B(Z)==="low"?"bg-gradient-to-br from-rose-500 to-rose-600":B(Z)==="warning"?"bg-gradient-to-br from-amber-500 to-amber-600":B(Z)==="high"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-emerald-500 to-emerald-600"}`,children:((Le=(te=Z.name)==null?void 0:te.charAt(0))==null?void 0:Le.toUpperCase())||"?"}),s.jsx("h4",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:Z.name}),s.jsxs("p",{className:"text-sm text-zinc-500 mt-1",children:["Estoque atual: ",s.jsxs("span",{className:"font-bold text-zinc-900 dark:text-white",children:[de(Z)," ",Z.unit]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mnimo"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:Z.minStock||"",onChange:M=>{be(Z.id,"minStock",M.target.value),ve(K=>({...K,minStock:Number(M.target.value)||0}))}}),s.jsx("p",{className:"text-[10px] text-amber-500 text-center mt-1",children:Z.unit})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mximo"}),s.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition-all",placeholder:"0",value:Z.maxStock||"",onChange:M=>{be(Z.id,"maxStock",M.target.value),ve(K=>({...K,maxStock:Number(M.target.value)||0}))}}),s.jsx("p",{className:"text-[10px] text-blue-500 text-center mt-1",children:Z.unit})]})]}),s.jsx("button",{onClick:()=>ve(null),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-sm font-bold uppercase tracking-wider shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Salvar Limites"})]})]})]}),document.body),C&&s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(Zl,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>z(!1)}),s.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[s.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:s.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),s.jsx("button",{onClick:()=>z(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),s.jsx("div",{className:"space-y-2",children:n.map((M,K)=>s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[s.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:M}),s.jsx("button",{onClick:()=>{j({title:"Excluir Categoria",message:`Excluir categoria "${M}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(H=>H.filter(ae=>ae!==M)),e(H=>H.map(ae=>ae.category===M?{...ae,category:"Outros"}:ae)),j(null),v("Categoria removida","success")},onCancel:()=>j(null)})},className:"w-11 h-11 flex items-center justify-center rounded-xl text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},K))})]}),s.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[s.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:I,onChange:M=>S(M.target.value),onKeyDown:M=>{M.key==="Enter"&&I.trim()&&(n.includes(I.trim())||(r(K=>[...K,I.trim()]),S("")))}}),s.jsx("button",{onClick:()=>{I.trim()&&!n.includes(I.trim())&&(r(M=>[...M,I.trim()]),S(""))},disabled:!I.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),s.jsx("button",{onClick:()=>{j({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(bh),j(null),v("Categorias restauradas","success")},onCancel:()=>j(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),s.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),s.jsx("div",{className:"space-y-2",children:x.map((M,K)=>s.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[s.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:M}),s.jsx("button",{onClick:()=>{j({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${M}"?`,type:"danger",onConfirm:()=>{N(H=>H.filter(ae=>ae!==M)),j(null),v("Subcategoria removida","success")},onCancel:()=>j(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},K))})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[s.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:ke,onChange:M=>ue(M.target.value),onKeyDown:M=>{M.key==="Enter"&&ke.trim()&&(x.includes(ke.trim())||(N(K=>[...K,ke.trim()]),ue("")))}}),s.jsx("button",{onClick:()=>{ke.trim()&&!x.includes(ke.trim())&&(N(M=>[...M,ke.trim()]),ue(""))},disabled:!ke.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),s.jsx("div",{className:"pt-4",children:s.jsx("button",{onClick:()=>{j({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{N(wh),j(null),v("Subcategorias restauradas","success")},onCancel:()=>j(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),s.jsx(Ee,{children:b&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Zl,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:b.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${b.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:b.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:b.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:b.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:b.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${b.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Ee,{children:R&&rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:R.message})]}),document.body)})]})}function H5(){const[t,e]=k.useState([]),n=()=>{try{const r=localStorage.getItem(gr);if(r){const i=JSON.parse(r);Array.isArray(i)?e(i):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return k.useEffect(()=>{n();const r=o=>{o.key===gr&&n()},i=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",i),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",i)}},[]),t}function Zl(){return Qt(!0),null}const v1="fichaTecnica_pizzas",jc={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},kh=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,i=e*n,o=n*r;if(i<=0)return 0;const a=o/i,l=jc[t.unit]||1;return a/l};function jh(){return Qt(!0),null}function oR({newPizzaName:t,setNewPizzaName:e,setIsCreatingPizza:n,handleCreatePizza:r}){return Qt(!0),rt.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:()=>{n(!1),e("")}}),s.jsxs(Q.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30,mass:.8},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-2xl overflow-hidden mt-16 md:mt-20 mx-4 md:mx-0 rounded-2xl",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[s.jsxs("div",{className:"flex items-center justify-between px-5 pt-4 pb-2",children:[s.jsx("div",{className:"w-12"}),s.jsx("h3",{className:"text-[17px] font-semibold text-zinc-900 dark:text-white",children:"Nova Pizza"}),s.jsx("button",{onClick:()=>{n(!1),e("")},className:"w-12 h-12 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-4"}),s.jsxs("div",{className:"px-6 py-6",children:[s.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[s.jsx("div",{className:"w-14 h-14 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center shrink-0",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-zinc-400 dark:text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("div",{children:s.jsx("p",{className:"text-[15px] text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})})]}),s.jsx("div",{className:"mb-6",children:s.jsx("input",{type:"text",className:"w-full h-14 px-5 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[17px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Ex: Margherita",value:t,onChange:i=>e(i.target.value),autoFocus:!0,onKeyDown:i=>i.key==="Enter"&&r()})}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{n(!1),e("")},className:"flex-1 h-14 rounded-2xl font-semibold text-[17px] text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),s.jsx("button",{onClick:r,disabled:!t.trim(),className:"flex-[1.5] h-14 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-[17px] hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-lg shadow-zinc-900/20 dark:shadow-white/10 touch-manipulation",children:"Criar"})]})]}),s.jsx("div",{style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"}})]})]}),document.body)}const b1={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function aR(){const[t,e]=k.useState(()=>{try{const D=localStorage.getItem(v1);return D?JSON.parse(D):[b1]}catch{return[b1]}}),[n,r]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const $=await Be.getPizzas();$&&$.length>0&&e($.map(W=>({...W,ingredients:Array.isArray(W.ingredients)?W.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[i,o]=k.useState(null),[a,l]=k.useState(null),[c,d]=k.useState(!1),[h,f]=k.useState(!1),[m,y]=k.useState(""),[_,A]=k.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[P,w]=k.useState(null),[b,j]=k.useState(null),[R,L]=k.useState(null),[V,v]=k.useState(null),x=k.useRef(null);k.useCallback((D,$="success")=>{x.current&&clearTimeout(x.current),v({message:D,type:$}),x.current=setTimeout(()=>v(null),3500)},[]);const N=H5();k.useEffect(()=>{localStorage.setItem(v1,JSON.stringify(t)),n&&Be.syncPizzas(t)},[t,n]);const C=k.useMemo(()=>t.find(D=>D.id===i)||null,[t,i]),z=(D=[])=>{if(!Array.isArray(D))return{totalCost:0,costPerPizza:0};const $=D.reduce((W,se)=>W+xe(se),0);return{totalCost:$,costPerPizza:$}},I=D=>(Number(D)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),S=D=>{const $=Number(D)||0;return $<.01&&$>0?$.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):$.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},ke=()=>{if(!m.trim())return;const D={id:Date.now(),name:m.trim(),createdAt:new Date().toISOString(),ingredients:[]};e($=>[...$,D]),y(""),f(!1),o(D.id)},ue=D=>{const $=t.find(W=>W.id===D);j({title:"Excluir Pizza",message:`A pizza "${($==null?void 0:$.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e(W=>W.filter(se=>se.id!==D)),i===D&&o(null),j(null)},onCancel:()=>j(null)})},ye=D=>{const $=t.find(W=>W.id===D);$&&L({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:$.name,onConfirm:W=>{W&&W!==$.name&&e(se=>se.map(T=>T.id===D?{...T,name:W.trim()}:T)),L(null)},onCancel:()=>L(null)})},we=D=>{if(A($=>({...$,name:D})),w(null),!!Array.isArray(N)&&D&&D.trim().length>0){const $=D.toLowerCase().trim(),W=N.find(se=>!se||!se.name?!1:se.name.toLowerCase()===$);if(W){w(W);const se=kh(W),T=jc[_.unit]||1,O=se*T;A(F=>({...F,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:W.id}))}}},Y=D=>{A($=>{const W={...$,unit:D};if(P){const se=kh(P),T=jc[D]||1,O=se*T;W.pricePerUnit=O.toFixed(6),W.isSyncedFromInventory=!0}return W})},le=(D=!1)=>{if(!C||!_.name.trim()||!_.quantity)return;const $={id:Date.now(),name:_.name.trim(),quantity:Number(_.quantity)||0,unit:_.unit,pricePerUnit:Number(_.pricePerUnit)||0,inventoryItemId:_.inventoryItemId};e(W=>W.map(se=>se.id===i?{...se,ingredients:[...se.ingredients||[],$]}:se)),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null),D?setTimeout(()=>{var W;(W=document.getElementById("cat-ing-name-input"))==null||W.focus()},50):d(!1)},Z=(D,$,W)=>{C&&e(se=>se.map(T=>T.id!==i?T:{...T,ingredients:(T.ingredients||[]).map(O=>O.id!==D?O:{...O,[$]:$==="name"||$==="unit"?W:Number(W)||0})}))},ve=D=>{C&&(e($=>$.map(W=>W.id!==i?W:{...W,ingredients:(W.ingredients||[]).filter(se=>se.id!==D)})),l(null))},xe=D=>(Number(D.quantity)||0)*(Number(D.pricePerUnit)||0),Pe=C?z(C.ingredients):{totalCost:0,costPerPizza:0};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),s.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[s.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),s.jsxs("button",{onClick:()=>f(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),s.jsx(Ee,{children:h&&s.jsx(oR,{newPizzaName:m,setNewPizzaName:y,setIsCreatingPizza:f,handleCreatePizza:ke})}),!i&&s.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(D=>{const $=z(D.ingredients);return s.jsxs("div",{onClick:()=>o(D.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[s.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex items-start justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:D.name}),s.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[D.ingredients.length," ingrediente",D.ingredients.length!==1?"s":""]})]}),s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:W=>{W.stopPropagation(),ye(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),s.jsx("button",{onClick:W=>{W.stopPropagation(),ue(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),s.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:I($.totalCost)})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),s.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:s.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[D.ingredients.length," itens"]})})]})]})]},D.id)}),t.length===0&&s.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),s.jsx("button",{onClick:()=>f(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),C&&s.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:()=>o(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:C.name}),s.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[C.ingredients.length," ingrediente",C.ingredients.length!==1?"s":""," cadastrado",C.ingredients.length!==1?"s":""]})]})]}),s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:I(Pe.totalCost)})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:C.ingredients.length}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:I(Pe.costPerPizza)}),s.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!c&&s.jsxs("button",{onClick:()=>d(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),c&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[s.jsx(jh,{}),s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{d(!1),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)}}),s.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[s.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:s.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),s.jsx("button",{onClick:()=>{d(!1),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"relative mb-5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:D=>{var $;D.key==="Enter"&&(D.preventDefault(),($=document.getElementById("cat-ing-qty-input"))==null||$.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${P?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:_.name,onChange:D=>{const $=D.target.value;A(W=>({...W,name:$})),P&&$!==P.name&&(w(null),A(W=>({...W,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),we($)},autoFocus:!0}),P&&s.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),_.name.length>0&&!P&&s.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const D=N.filter($=>$.name.toLowerCase().includes(_.name.toLowerCase())).slice(0,6);return D.length===0&&_.name.length>1?s.jsxs("div",{className:"p-5 text-center",children:[s.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),s.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',_.name,'" ao Estoque primeiro']})]}):D.map(($,W)=>s.jsxs("button",{onClick:()=>{w($);const se=kh($),T=jc[_.unit]||1,O=se*T;A(F=>({...F,name:$.name,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:$.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${W!==D.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:$.name}),s.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[$.packageQuantity*$.packageCount," ",$.unit]})]}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},$.id))})()})]}),P&&s.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:P.name}),s.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",P.packageQuantity*P.packageCount," ",P.unit,"  ",I(P.packageCount*P.pricePerUnit)]})]})]})}),!P&&s.jsxs("div",{className:"mb-5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),s.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:_.unit,onChange:D=>Y(D.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),s.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),le(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:_.quantity,onChange:D=>A($=>({...$,quantity:D.target.value}))})]}),P&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),s.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:_.unit})]})]}),P&&_.quantity&&s.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[s.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[_.quantity," ",_.unit,"  ",S(_.pricePerUnit),"/",_.unit]}),s.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:I(Number(_.quantity)*Number(_.pricePerUnit))})]})]}),s.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[s.jsx("button",{onClick:()=>{d(!1),A({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),w(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:le,disabled:!_.name||!_.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),C.ingredients.length>0&&s.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[s.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),s.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),s.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),s.jsx("div",{className:"col-span-1"})]}),s.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:C.ingredients.map(D=>s.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:a===D.id?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx("input",{id:`edit-ing-name-${D.id}`,autoFocus:!0,onKeyDown:$=>{var W;$.key==="Enter"&&($.preventDefault(),(W=document.getElementById(`edit-ing-qty-${D.id}`))==null||W.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.name,onChange:$=>Z(D.id,"name",$.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&ve(D.id)}})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{id:`edit-ing-qty-${D.id}`,onKeyDown:$=>{var W;$.key==="Enter"&&($.preventDefault(),(W=document.getElementById(`edit-ing-price-${D.id}`))==null||W.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.quantity,onChange:$=>Z(D.id,"quantity",$.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&ve(D.id)}})}),s.jsx("div",{className:"col-span-1",children:s.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.unit,onChange:$=>Z(D.id,"unit",$.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]})}),s.jsx("div",{className:"col-span-2",children:s.jsx("input",{id:`edit-ing-price-${D.id}`,onKeyDown:$=>{$.key==="Enter"&&($.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:D.pricePerUnit,onChange:$=>Z(D.id,"pricePerUnit",$.target.value)})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:I(xe(D))})}),s.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[s.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>ve(D.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"col-span-4",children:s.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:D.name})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:D.quantity})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:D.unit})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(D.pricePerUnit)||0)})}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:I(xe(D))})}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsx("button",{onClick:()=>l(D.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},D.id))}),s.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[s.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),s.jsx("div",{className:"col-span-2 text-right",children:s.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:I(Pe.totalCost)})}),s.jsx("div",{className:"col-span-1"})]})]}),C.ingredients.length>0&&s.jsxs("div",{className:"md:hidden space-y-4",children:[C.ingredients.map(D=>s.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${a===D.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:a===D.id?s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:()=>ve(D.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:D.name,onChange:$=>Z(D.id,"name",$.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&ve(D.id)}})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),s.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:D.quantity,onChange:$=>Z(D.id,"quantity",$.target.value),onBlur:()=>{!D.name.trim()&&(!D.quantity||D.quantity===0)&&ve(D.id)}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),s.jsxs("div",{className:"relative",children:[s.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:D.unit,onChange:$=>Z(D.id,"unit",$.target.value),children:[s.jsx("option",{value:"g",children:"g"}),s.jsx("option",{value:"kg",children:"kg"}),s.jsx("option",{value:"ml",children:"ml"}),s.jsx("option",{value:"L",children:"L"}),s.jsx("option",{value:"un",children:"un"})]}),s.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:s.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),s.jsx("div",{className:"relative group",children:s.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:D.pricePerUnit,onChange:$=>Z(D.id,"pricePerUnit",$.target.value)})})]})]}):s.jsxs("div",{onClick:()=>l(D.id),className:"group cursor-pointer",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:D.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[D.quantity," ",D.unit]}),s.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(D.pricePerUnit)||0),"/",D.unit]})]})]}),s.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx("button",{onClick:$=>{$.stopPropagation(),l(D.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),s.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),s.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:I(xe(D))})]})]})},D.id)),s.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),s.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:I(Pe.totalCost)})]})})]}),C.ingredients.length===0&&!c&&s.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[s.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),s.jsxs("div",{className:"relative z-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),s.jsx("button",{onClick:()=>d(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),s.jsx(Ee,{children:b&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(jh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:b.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${b.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:b.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:b.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:b.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:b.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:b.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${b.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Ee,{children:R&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(jh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:R.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:R.title}),s.jsx("input",{autoFocus:!0,defaultValue:R.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:R.placeholder,onKeyDown:D=>{D.key==="Enter"&&R.onConfirm(D.target.value)}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:R.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:D=>{const $=D.target.closest(".relative").querySelector("input");R.onConfirm($.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),s.jsx(Ee,{children:V&&rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${V.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":V.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${V.type==="error"?"bg-white animate-pulse":V.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:V.message})]}),document.body)})]})}function mr({label:t,value:e,onChange:n,unit:r="",type:i="number",placeholder:o="0",pattern:a,inputMode:l}){const c=Number(e)||0,d=r==="g"&&Math.abs(c)>=1e3,h=d?"kg":r,f=()=>d?Math.round(c/1e3).toString():Math.round(c).toString(),[m,y]=k.useState(""),[_,A]=k.useState(!1);k.useEffect(()=>{_||y(e==null?"":f())},[e,_,d]);const P=j=>{const R=j.target.value;y(R);const L=parseFloat(R)||0;n==null||n(L)},w=()=>A(!0),b=()=>{A(!1),e!=null&&y(f())};return s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:t}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:i,inputMode:l||(i==="number"?"decimal":"text"),pattern:a,value:m,onChange:P,onFocus:w,onBlur:b,placeholder:o}),h&&s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function Gs({label:t,value:e,onChange:n,mode:r="pct",flourWeight:i=1e3,name:o,step:a=.1,decimals:l=1,maxPct:c=null}){const d=Math.max(i||0,1),h=v=>d*(Number(v)||0)/100,f=v=>(Number(v)||0)/d*100,m=h(e),y=r==="grams"&&Math.abs(m)>=1e3,_=r==="grams"?y?"kg":"g":"%",A=()=>{const v=Number(e)||0;if(r==="grams"){const x=h(v);return y?x/1e3:x<10?x:Math.round(x)}return v},[P,w]=k.useState(()=>{if(e===""||e===null||e===void 0)return"";const v=A();return y?v.toFixed(2):v.toString()}),[b,j]=k.useState(!1);k.useEffect(()=>{if(!b)if(e===""||e===null||e===void 0)w("");else{const v=A();if(r==="grams"){const x=h(Number(e)||0);w(y?v.toFixed(2):x<10?x.toFixed(2):Math.round(x).toString())}else w(Number(v).toFixed(l))}},[e,r,i,b,y]);const R=v=>{const x=v.target.value;if(w(x),x===""){n==null||n("");return}let N=parseFloat(x);if(!Number.isNaN(N)){N=Math.max(0,N),r==="pct"&&c!==null&&N>c&&(N=c,w(N.toString()));let C=N;r==="grams"&&y&&(C=N*1e3);const z=r==="grams"?f(C):N;n==null||n(z)}},L=()=>{j(!0)},V=()=>{if(j(!1),P===""||P===null){w("");return}const v=parseFloat(P);if(!Number.isNaN(v))if(r==="grams"){const x=h(Number(e)||0);w(y||x<10?v.toFixed(2):Math.round(v).toString())}else w(v.toFixed(l))};return s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:t}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:o,step:r==="grams"?1:a,value:P,onChange:R,onFocus:L,onBlur:V,placeholder:"0"}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:_})]})]})}function lR({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:o=1e3}){const a=["None","ADY","IDY","CY"];function l(c,d,h){r==null||r({...n,[c]:{...n[c],[d]:h}})}return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"label",children:"Tipos de Fermentos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(c=>s.jsxs("label",{className:"button "+(t===c?"primary":""),children:[s.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:c,checked:t===c,onChange:()=>e==null?void 0:e(c)}),c]},c))}),t==="ADY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Gs,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:c=>l("ADY","yeastPct",c),mode:i,flourWeight:o,name:"ADY-yeast",decimals:3})}),t==="IDY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Gs,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:c=>l("IDY","yeastPct",c),mode:i,flourWeight:o,name:"IDY-yeast",decimals:3})}),t==="CY"&&s.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:s.jsx(Gs,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:c=>l("CY","yeastPct",c),mode:i,flourWeight:o,name:"CY-yeast",decimals:3})}),t==="None"&&s.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function cR({value:t,onChange:e,data:n,onDataChange:r,inputMode:i="pct",flourWeight:o=1e3}){const a=["None","Poolish","Biga","Levain"];function l(m,y,_){r==null||r({...n,[m]:{...n[m],[y]:Number.isNaN(_)?"":_}})}const c=i==="grams"?"g":"%",d=m=>o*(Number(m==null?void 0:m.pct)||0)/100,h=(m,y=0,_="")=>{let A=Number(m);if(!Number.isFinite(A))return"";let P=_,w=y;_==="g"&&Math.abs(A)>=1e3&&(A=A/1e3,P="kg",w=2);const b=A.toLocaleString("pt-BR",{minimumFractionDigits:w,maximumFractionDigits:w});return P?`${b} ${P}`:b},f=m=>{const y=n[m];if(!y)return null;const _=d(y),A=_*(Number(y.hydration)||0)/100;return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[s.jsx(Gs,{label:`Farinha Pref. (${c})`,value:y.pct,onChange:P=>l(m,"pct",P),mode:i,flourWeight:o,name:`${m}-pct`}),s.jsx(Gs,{label:`gua (${c})`,value:y.hydration,onChange:P=>l(m,"hydration",Math.min(200,Math.max(0,P))),mode:i,flourWeight:_>0?_:o,name:`${m}-hydration`}),typeof y.yeastPct<"u"&&s.jsx(Gs,{label:`Fermento (${c})`,value:y.yeastPct,onChange:P=>l(m,"yeastPct",P),mode:i,flourWeight:_>0?_:o,name:`${m}-yeast`,decimals:2}),typeof y.inoculationPct<"u"&&s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:y.inoculationPct,onChange:P=>l(m,"inoculationPct",parseFloat(P.target.value)),step:1}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Tempo"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.time_h,onChange:P=>l(m,"time_h",parseFloat(P.target.value))}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),s.jsxs("label",{className:"block",children:[s.jsx("div",{className:"label mb-1",children:"Temp."}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.temp_C,onChange:P=>l(m,"temp_C",parseFloat(P.target.value))}),s.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),i==="grams"&&s.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[s.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(_,0,"g")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(A,0,"g")})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),s.jsx("span",{className:"ml-2 font-semibold",children:h(_+A,0,"g")})]})]})]})]})};return s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"label",children:"Tipo de Fermentao"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.map(m=>s.jsxs("label",{className:"button "+(t===m?"primary":""),children:[s.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:m,checked:t===m,onChange:()=>e==null?void 0:e(m)}),m]},m))}),t==="Poolish"&&f("poolish"),t==="Biga"&&f("biga"),t==="Levain"&&f("levain"),t==="None"&&s.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function uR(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function Wo(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function dR({inputMode:t,setInputMode:e}){const[n,r]=k.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[i,o]=k.useState({}),a=k.useRef(null),[l,c]=k.useState("synced"),[d,h]=k.useState(null),[f,m]=k.useState(null),[y,_]=k.useState(null),A=k.useRef(null),P=k.useCallback((T,O="success")=>{A.current&&clearTimeout(A.current),_({message:T,type:O}),A.current=setTimeout(()=>_(null),3500)},[]),[w,b]=k.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});k.useEffect(()=>{(async()=>{const O=uR();o(O);try{const F=await Be.getAllRecipes();if(Object.keys(F).length>0){const ee={...O,...F};o(ee),Wo(ee)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function j(T,O){r(F=>({...F,[T]:typeof O=="number"&&Number.isNaN(O)?"":O}))}function R(T){r(O=>({...O,preferment:T}))}function L(T){r(O=>({...O,yeastType:T}))}function V(T,O){t==="grams"?b(F=>({...F,[T]:Number(O)||0})):j(T,O)}function v(T){b(O=>({...O,flour:Number(T)||0}))}const x=k.useMemo(()=>{var ee;const T=fe=>Number(fe)||0,O=((ee=n.yeastType)==null?void 0:ee[n.yeastSelection])||{},F=T(O.yeastPct);return 100+T(n.water)+T(n.sugar)+T(n.salt)+T(n.oliveOil)+T(n.oil)+T(n.milk)+T(n.butter)+T(n.diastatic)+F},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),N=k.useMemo(()=>{const T=Number(n.doughBalls)||0,O=Number(n.ballWeight)||0;return T*O},[n.doughBalls,n.ballWeight]),C=k.useMemo(()=>{const T=Number(N)||0,O=Number(x)||100;return O<=0?0:T*100/O},[N,x]),z=k.useMemo(()=>{var fe;const T=C,O=de=>T*(Number(de)||0)/100,F=((fe=n.yeastType)==null?void 0:fe[n.yeastSelection])||{},ee=Number(F.yeastPct)||0;return{flour:T,water:O(n.water),sugar:O(n.sugar),salt:O(n.salt),oliveOil:O(n.oliveOil),oil:O(n.oil),milk:O(n.milk),butter:O(n.butter),diastatic:O(n.diastatic),yeast:T*ee/100,total:T+O(n.water)+O(n.sugar)+O(n.salt)+O(n.oliveOil)+O(n.oil)+O(n.milk)+O(n.butter)+O(n.diastatic)+T*ee/100}},[C,n]),I=k.useMemo(()=>{if(t==="grams"){const T=(Number(w.flour)||0)+(Number(w.water)||0)+(Number(w.sugar)||0)+(Number(w.salt)||0)+(Number(w.oliveOil)||0)+(Number(w.oil)||0)+(Number(w.milk)||0)+(Number(w.butter)||0)+(Number(w.diastatic)||0)+(Number(w.yeast)||0);return{flour:w.flour,water:w.water,sugar:w.sugar,salt:w.salt,oliveOil:w.oliveOil,oil:w.oil,milk:w.milk,butter:w.butter,diastatic:w.diastatic,yeast:w.yeast,total:T}}return z},[t,w,z]),S=k.useMemo(()=>{const T=Number(I.flour)||0;if(T<=0)return 0;const O=Number(I.water)||0,F=Number(I.milk)||0;return(O+F)/T*100},[I.flour,I.water,I.milk]),ke=String(n.prefermentType||"").toLowerCase(),ue=n.preferment&&n.preferment[ke]?n.preferment[ke]:null,ye=ue?C*(Number(ue.pct)||0)/100:0,we=ye*(Number(ue==null?void 0:ue.hydration)||0)/100,Y=ye+we;function le(){m({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:T=>{if(!T)return;const O={...i,[T]:n};o(O),Wo(O),Be.saveRecipe(T,n).then(F=>{F&&c("synced")}),m(null)},onCancel:()=>m(null)})}function Z(T){const O=i[T];O&&r(O)}function ve(T){h({title:"Excluir Receita",message:`A receita "${T}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const O={...i};delete O[T],o(O),Wo(O),Be.deleteRecipe(T),h(null)},onCancel:()=>h(null)})}function xe(T){m({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:T,onConfirm:O=>{if(!O||O===T)return;const F={...i};F[O]=F[T];const ee=F[T];delete F[T],o(F),Wo(F),Be.deleteRecipe(T),Be.saveRecipe(O,ee),m(null)},onCancel:()=>m(null)})}function Pe(){const T=JSON.stringify({inputs:n,recipes:i},null,2),O=new Blob([T],{type:"application/json"}),F=URL.createObjectURL(O),ee=document.createElement("a");ee.href=F,ee.download="padoca_pizza_recipes.json",ee.click(),URL.revokeObjectURL(F)}function D(T){var ee;const O=(ee=T.target.files)==null?void 0:ee[0];if(!O)return;const F=new FileReader;F.onload=fe=>{try{const de=JSON.parse(String(fe.target.result||"{}"));de.inputs&&r(de.inputs),de.recipes&&(o(de.recipes),Wo(de.recipes)),P("Importao concluda!","success")}catch{P("Arquivo invlido.","error")}},F.readAsText(O),T.target.value=""}function $(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function W(T,O=0,F=""){let ee=Number(T);if(!Number.isFinite(ee))return"";let fe=F,de=O;F==="g"&&Math.abs(ee)>=1e3&&(ee=ee/1e3,fe="kg",de=2);const B=ee.toLocaleString("pt-BR",{minimumFractionDigits:de,maximumFractionDigits:de});return fe?`${B} ${fe}`:B}function se(T){return(Number(T)||0)>.001}return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),s.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:W(I.total,0,"g")})]})]}),s.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),s.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:W(N,0,"g")})})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),s.jsx("div",{className:"flex items-baseline gap-1",children:s.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(I.total)||0)-(Number(N)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:W((Number(I.total)||0)-(Number(N)||0),1,"g")})})]})]})]})}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:T=>{const O=parseFloat(T.target.value);j("doughBalls",Math.round(O))}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:T=>{const O=parseFloat(T.target.value);if(t==="grams"){const ee=C*x/100;let fe=O>0?Math.round(ee/O):1;fe<1&&(fe=1);const de=Math.round(ee/fe);r(B=>({...B,ballWeight:de,doughBalls:fe}))}else j("ballWeight",Math.round(O))}})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),s.jsx(cR,{value:n.prefermentType,onChange:T=>j("prefermentType",T),data:n.preferment,onDataChange:R,inputMode:t,flourWeight:C})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&s.jsx(mr,{label:"Farinha Total",value:w.flour,onChange:v,unit:"g"}),s.jsx(mr,{label:"gua",value:t==="grams"?w.water:n.water,onChange:T=>V("water",T),unit:t==="grams"?"g":"%"}),s.jsx(mr,{label:"Sal",value:t==="grams"?w.salt:n.salt,onChange:T=>V("salt",T),unit:t==="grams"?"g":"%"}),s.jsx(mr,{label:"Azeite",value:t==="grams"?w.oliveOil:n.oliveOil,onChange:T=>V("oliveOil",T),unit:t==="grams"?"g":"%"}),s.jsx(mr,{label:"Acar",value:t==="grams"?w.sugar:n.sugar,onChange:T=>V("sugar",T),unit:t==="grams"?"g":"%"}),s.jsx(mr,{label:"leo",value:t==="grams"?w.oil:n.oil,onChange:T=>V("oil",T),unit:t==="grams"?"g":"%"}),s.jsx(mr,{label:"Leite",value:t==="grams"?w.milk:n.milk,onChange:T=>V("milk",T),unit:t==="grams"?"g":"%"}),s.jsx(mr,{label:"Manteiga",value:t==="grams"?w.butter:n.butter,onChange:T=>V("butter",T),unit:t==="grams"?"g":"%"}),s.jsx(mr,{label:"Malte",value:t==="grams"?w.diastatic:n.diastatic,onChange:T=>V("diastatic",T),unit:t==="grams"?"g":"%"})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),s.jsx(lR,{value:n.yeastSelection,onChange:T=>j("yeastSelection",T),data:n.yeastType,onDataChange:L,inputMode:t,flourWeight:C})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:T=>j("RT_h",parseFloat(T.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:T=>j("RT_C",parseFloat(T.target.value))})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),s.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:T=>j("CT_h",parseFloat(T.target.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),s.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:T=>j("CT_C",parseFloat(T.target.value))})]})]})]}),n.prefermentType!=="None"&&ue&&s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),s.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:W(ue.pct,1,"%")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(ye,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(we,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(Y,0,"g")})]})]}),(typeof ue.yeastPct<"u"||typeof ue.inoculationPct<"u"||typeof ue.time_h<"u"||typeof ue.temp_C<"u")&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof ue.yeastPct<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:W(ye*(Number(ue.yeastPct)||0)/100,2,"g")})]}),typeof ue.inoculationPct<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:W(ue.inoculationPct,1,"%")})]}),typeof ue.time_h<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:W(ue.time_h,0,"h")})]}),typeof ue.temp_C<"u"&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),s.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:W(ue.temp_C,0,"C")})]})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),s.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[se(I.flour)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.flour-ye,0,"g")})]}),se(I.water)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.water-we,0,"g")})]}),n.prefermentType!=="None"&&ue&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(Y,0,"g")})]}),se(I.salt)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.salt,1,"g")})]}),se(I.sugar)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.sugar,1,"g")})]}),se(I.oliveOil)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.oliveOil,1,"g")})]}),se(I.oil)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.oil,1,"g")})]}),se(I.milk)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.milk,1,"g")})]}),se(I.butter)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.butter,1,"g")})]}),se(I.diastatic)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.diastatic,1,"g")})]}),se(I.yeast)&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),s.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.yeast,2,"g")})]})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),s.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:W(I.total,0,"g")})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),s.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:W(S,1,"%")})]})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[s.jsx("button",{onClick:le,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),s.jsx("button",{onClick:()=>{var T;return(T=a.current)==null?void 0:T.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),s.jsx("button",{onClick:Pe,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),s.jsx("button",{onClick:$,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),s.jsx("input",{ref:a,type:"file",accept:"application/json",className:"hidden",onChange:D})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(i).length===0?s.jsxs("div",{className:"text-center py-10",children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),s.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):s.jsx("ul",{className:"space-y-3",children:Object.entries(i).map(([T])=>s.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[s.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:T}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:()=>Z(T),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),s.jsx("button",{onClick:()=>xe(T),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),s.jsx("button",{onClick:()=>ve(T),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},T))})]}),s.jsx(Ee,{children:d&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(w1,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:d.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${d.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:d.type==="danger"?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:d.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:d.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:d.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:d.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${d.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),s.jsx(Ee,{children:f&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(w1,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:f.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:f.title}),s.jsx("input",{autoFocus:!0,defaultValue:f.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:f.placeholder,onKeyDown:T=>{T.key==="Enter"&&f.onConfirm(T.target.value)}}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:f.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:T=>{const O=T.target.closest(".relative").querySelector("input");f.onConfirm(O.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),s.jsx(Ee,{children:y&&rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${y.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":y.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${y.type==="error"?"bg-white animate-pulse":y.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:y.message})]}),document.body)})]})}function w1(){return Qt(!0),null}const hR=10*1024*1024,fR=15e3,mR=(t,e=1200,n=.8)=>new Promise((r,i)=>{if(!t||typeof t!="string"){i(new Error("Invalid image data provided"));return}if(t.length*3/4>hR){i(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const a=setTimeout(()=>{i(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},fR),l=new Image;l.onload=()=>{clearTimeout(a);try{const c=document.createElement("canvas");let d=l.width,h=l.height;d>e&&(h=e/d*h,d=e),c.width=d,c.height=h;const f=c.getContext("2d");if(!f){i(new Error("Falha ao criar contexto de imagem."));return}f.drawImage(l,0,0,d,h);const m=c.toDataURL("image/jpeg",n);if(!m||m==="data:,"){i(new Error("Falha ao comprimir imagem."));return}r(m)}catch(c){i(new Error("Erro ao processar imagem: "+c.message))}},l.onerror=()=>{clearTimeout(a),i(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t});var df=function(t,e){return df=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},df(t,e)};function pR(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");df(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var St=function(){return St=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},St.apply(this,arguments)};var k1=!1,Di,hf,ff,Nc,_c,G5,zc,mf,pf,gf,K5,xf,yf,Q5,Y5;function on(){if(!k1){k1=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(xf=/\b(iPhone|iP[ao]d)/.exec(t),yf=/\b(iP[ao]d)/.exec(t),gf=/Android/i.exec(t),Q5=/FBAN\/\w+;/i.exec(t),Y5=/Mobile/i.exec(t),K5=!!/Win64/.exec(t),e){Di=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Di&&document&&document.documentMode&&(Di=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);G5=r?parseFloat(r[1])+4:Di,hf=e[2]?parseFloat(e[2]):NaN,ff=e[3]?parseFloat(e[3]):NaN,Nc=e[4]?parseFloat(e[4]):NaN,Nc?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),_c=e&&e[1]?parseFloat(e[1]):NaN):_c=NaN}else Di=hf=ff=_c=Nc=NaN;if(n){if(n[1]){var i=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);zc=i?parseFloat(i[1].replace("_",".")):!0}else zc=!1;mf=!!n[2],pf=!!n[3]}else zc=mf=pf=!1}}var vf={ie:function(){return on()||Di},ieCompatibilityMode:function(){return on()||G5>Di},ie64:function(){return vf.ie()&&K5},firefox:function(){return on()||hf},opera:function(){return on()||ff},webkit:function(){return on()||Nc},safari:function(){return vf.webkit()},chrome:function(){return on()||_c},windows:function(){return on()||mf},osx:function(){return on()||zc},linux:function(){return on()||pf},iphone:function(){return on()||xf},mobile:function(){return on()||xf||yf||gf||Y5},nativeApp:function(){return on()||Q5},android:function(){return on()||gf},ipad:function(){return on()||yf}},gR=vf,xR=!!(typeof window<"u"&&window.document&&window.document.createElement),yR={canUseDOM:xR},vR=yR,X5=vR,J5;X5.canUseDOM&&(J5=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function bR(t,e){if(!X5.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var i=document.createElement("div");i.setAttribute(n,"return;"),r=typeof i[n]=="function"}return!r&&J5&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var wR=bR,kR=gR,jR=wR,j1=10,N1=40,_1=800;function Z5(t){var e=0,n=0,r=0,i=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*j1,i=n*j1,"deltaY"in t&&(i=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||i)&&t.deltaMode&&(t.deltaMode==1?(r*=N1,i*=N1):(r*=_1,i*=_1)),r&&!e&&(e=r<1?-1:1),i&&!n&&(n=i<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:i}}Z5.getEventType=function(){return kR.firefox()?"DOMMouseScroll":jR("wheel")?"wheel":"mousewheel"};var NR=Z5,_R=NR;const zR=V1(_R);function CR(t,e,n,r,i,o){o===void 0&&(o=0);var a=lo(t,e,o),l=a.width,c=a.height,d=Math.min(l,n),h=Math.min(c,r);return d>h*i?{width:h*i,height:h}:{width:d,height:d/i}}function ER(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function qo(t,e,n,r,i){i===void 0&&(i=0);var o=lo(e.width,e.height,i),a=o.width,l=o.height;return{x:z1(t.x,a,n.width,r),y:z1(t.y,l,n.height,r)}}function z1(t,e,n,r){var i=e*r/2-n/2;return id(t,-i,i)}function C1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function E1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function SR(t,e,n,r,i,o,a){o===void 0&&(o=0),a===void 0&&(a=!0);var l=a?TR:IR,c=lo(e.width,e.height,o),d=lo(e.naturalWidth,e.naturalHeight,o),h={x:l(100,((c.width-n.width/i)/2-t.x/i)/c.width*100),y:l(100,((c.height-n.height/i)/2-t.y/i)/c.height*100),width:l(100,n.width/c.width*100/i),height:l(100,n.height/c.height*100/i)},f=Math.round(l(d.width,h.width*d.width/100)),m=Math.round(l(d.height,h.height*d.height/100)),y=d.width>=d.height*r,_=y?{width:Math.round(m*r),height:m}:{width:f,height:Math.round(f/r)},A=St(St({},_),{x:Math.round(l(d.width-_.width,h.x*d.width/100)),y:Math.round(l(d.height-_.height,h.y*d.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:A}}function TR(t,e){return Math.min(t,Math.max(0,e))}function IR(t,e){return e}function AR(t,e,n,r,i,o){var a=lo(e.width,e.height,n),l=id(r.width/a.width*(100/t.width),i,o),c={x:l*a.width/2-r.width/2-a.width*l*(t.x/100),y:l*a.height/2-r.height/2-a.height*l*(t.y/100)};return{crop:c,zoom:l}}function PR(t,e,n){var r=ER(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function RR(t,e,n,r,i,o){n===void 0&&(n=0);var a=lo(e.naturalWidth,e.naturalHeight,n),l=id(PR(t,e,r),i,o),c=r.height>r.width?r.height/t.height:r.width/t.width,d={x:((a.width-t.width)/2-t.x)*c,y:((a.height-t.height)/2-t.y)*c};return{crop:d,zoom:l}}function S1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function DR(t){return t*Math.PI/180}function lo(t,e,n){var r=DR(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function id(t,e,n){return Math.min(Math.max(t,e),n)}function ec(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var MR=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,VR=1,LR=3,OR=1,FR=function(t){pR(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=k.createRef(),n.imageRef=k.createRef(),n.videoRef=k.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=AR(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),o=i.crop,a=i.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(a)}else if(n.props.initialCroppedAreaPixels){var l=RR(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),o=l.crop,a=l.zoom;n.props.onCropChange(o),n.props.onZoomChange&&n.props.onZoomChange(a)}},n.computeSizes=function(){var r,i,o,a,l,c,d=n.imageRef.current||n.videoRef.current;if(d&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,f=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,m=((o=n.imageRef.current)===null||o===void 0?void 0:o.naturalHeight)||((a=n.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,y=d.offsetWidth<f||d.offsetHeight<m,_=f/m,A=void 0;if(y)switch(n.state.mediaObjectFit){default:case"contain":A=h>_?{width:n.containerRect.height*_,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/_};break;case"horizontal-cover":A={width:n.containerRect.width,height:n.containerRect.width/_};break;case"vertical-cover":A={width:n.containerRect.height*_,height:n.containerRect.height};break}else A={width:d.offsetWidth,height:d.offsetHeight};n.mediaSize=St(St({},A),{naturalWidth:f,naturalHeight:m}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var P=n.props.cropSize?n.props.cropSize:CR(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((l=n.state.cropSize)===null||l===void 0?void 0:l.height)!==P.height||((c=n.state.cropSize)===null||c===void 0?void 0:c.width)!==P.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(P),n.setState({cropSize:P},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(P),P}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),o=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(o,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var a=n.gestureRotationStart+r.rotation;n.props.onRotationChange(a)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,o,a=r.x,l=r.y;n.dragStartPosition={x:a,y:l},n.dragStartCrop=St({},n.props.crop),(o=(i=n.props).onInteractionStart)===null||o===void 0||o.call(i)},n.onDrag=function(r){var i=r.x,o=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||o===void 0)){var a=i-n.dragStartPosition.x,l=o-n.dragStartPosition.y,c={x:n.dragStartCrop.x+a,y:n.dragStartCrop.y+l},d=n.props.restrictPosition?qo(c,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):c;n.props.onCropChange(d)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),o=zR(r).pixelY,a=n.props.zoom-o*n.props.zoomSpeed/200;n.setNewZoom(a,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=n.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=n.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},n.getPointOnContainer=function(r,i){var o=r.x,a=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(o-i.x),y:n.containerRect.height/2-(a-i.y)}},n.getPointOnMedia=function(r){var i=r.x,o=r.y,a=n.props,l=a.crop,c=a.zoom;return{x:(i+l.x)/c,y:(o+l.y)/c}},n.setNewZoom=function(r,i,o){var a=o===void 0?{}:o,l=a.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!n.state.cropSize||!n.props.onZoomChange)){var d=id(r,n.props.minZoom,n.props.maxZoom);if(c){var h=n.getPointOnContainer(i,n.containerPosition),f=n.getPointOnMedia(h),m={x:f.x*d-h.x,y:f.y*d-h.y},y=n.props.restrictPosition?qo(m,n.mediaSize,n.state.cropSize,d,n.props.rotation):m;n.props.onCropChange(y)}n.props.onZoomChange(d)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?qo(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return SR(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,o=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,o),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,o)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,o=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,o)}},n.recomputeCropPosition=function(){var r,i;if(n.state.cropSize){var o=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((i=n.previousCropSize)===null||i===void 0)&&i.height)){var a=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(a){var l=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;o={x:n.props.crop.x*l,y:n.props.crop.y*c}}}var d=n.props.restrictPosition?qo(o,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):o;n.previousCropSize=n.state.cropSize,n.props.onCropChange(d),n.emitCropData()}},n.onKeyDown=function(r){var i,o,a=n.props,l=a.crop,c=a.onCropChange,d=a.keyboardStep,h=a.zoom,f=a.rotation,m=d;if(n.state.cropSize){r.shiftKey&&(m*=.2);var y=St({},l);switch(r.key){case"ArrowUp":y.y-=m,r.preventDefault();break;case"ArrowDown":y.y+=m,r.preventDefault();break;case"ArrowLeft":y.x-=m,r.preventDefault();break;case"ArrowRight":y.x+=m,r.preventDefault();break;default:return}n.props.restrictPosition&&(y=qo(y,n.mediaSize,n.state.cropSize,h,f)),r.repeat||(o=(i=n.props).onInteractionStart)===null||o===void 0||o.call(i),c(y)}},n.onKeyUp=function(r){var i,o;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(o=(i=n.props).onInteractionEnd)===null||o===void 0||o.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=MR,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,o,a,l,c,d,h,f;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((o=n.cropSize)===null||o===void 0?void 0:o.width)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.width)?this.computeSizes():(((l=n.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((d=n.crop)===null||d===void 0?void 0:d.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((f=this.videoRef.current)===null||f===void 0||f.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,o;if(this.props.objectFit==="cover"){var a=this.imageRef.current||this.videoRef.current;if(a&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,d=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((o=this.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,h=c/d;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=C1(r,i),this.lastPinchRotation=E1(r,i),this.onDragStart(S1(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),o=e.getTouchPoint(n.touches[1]),a=S1(i,o);this.onDrag(a),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=C1(i,o),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,a,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var d=E1(i,o),h=r.props.rotation+(d-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=d})}},e.prototype.render=function(){var n=this,r,i=this.props,o=i.image,a=i.video,l=i.mediaProps,c=i.cropperProps,d=i.transform,h=i.crop,f=h.x,m=h.y,y=i.rotation,_=i.zoom,A=i.cropShape,P=i.showGrid,w=i.roundCropAreaPixels,b=i.style,j=b.containerStyle,R=b.cropAreaStyle,L=b.mediaStyle,V=i.classes,v=V.containerClassName,x=V.cropAreaClassName,N=V.mediaClassName,C=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return k.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(I){return n.containerRef=I},"data-testid":"container",style:j,className:ec("reactEasyCrop_Container",v)},o?k.createElement("img",St({alt:"",className:ec("reactEasyCrop_Image",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},l,{src:o,ref:this.imageRef,style:St(St({},L),{transform:d||"translate(".concat(f,"px, ").concat(m,"px) rotate(").concat(y,"deg) scale(").concat(_,")")}),onLoad:this.onMediaLoad})):a&&k.createElement("video",St({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:ec("reactEasyCrop_Video",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",N)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:St(St({},L),{transform:d||"translate(".concat(f,"px, ").concat(m,"px) rotate(").concat(y,"deg) scale(").concat(_,")")}),controls:!1}),(Array.isArray(a)?a:[{src:a}]).map(function(z){return k.createElement("source",St({key:z.src},z))})),this.state.cropSize&&k.createElement("div",St({ref:this.cropperRef,style:St(St({},R),{width:w?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:w?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:ec("reactEasyCrop_CropArea",A==="round"&&"reactEasyCrop_CropAreaRound",P&&"reactEasyCrop_CropAreaGrid",x)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:LR,minZoom:VR,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:OR},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(k.Component);const BR=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",i=>n(i)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function eN(t){return t*Math.PI/180}function UR(t,e,n){const r=eN(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function $R(t,e,n=0,r={horizontal:!1,vertical:!1}){const i=await BR(t),o=document.createElement("canvas"),a=o.getContext("2d");if(!a)return null;const l=eN(n),{width:c,height:d}=UR(i.width,i.height,n);o.width=c,o.height=d,a.translate(c/2,d/2),a.rotate(l),a.scale(r.horizontal?-1:1,r.vertical?-1:1),a.translate(-i.width/2,-i.height/2),a.drawImage(i,0,0);const h=a.getImageData(e.x,e.y,e.width,e.height);return o.width=e.width,o.height=e.height,a.putImageData(h,0,0),o.toDataURL("image/jpeg",.9)}const WR=()=>{const[t,e]=k.useState(null),n=k.useRef(null),r=k.useCallback((a,l="error")=>{n.current&&clearTimeout(n.current),e({message:a,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),i=k.useMemo(()=>({error:a=>r(a,"error"),success:a=>r(a,"success"),info:a=>r(a,"info")}),[r]),o=t?rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:i,ToastUI:o}},mt={Camera:()=>s.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:t=>s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},qR=({src:t,onClose:e})=>(Qt(!0),rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[s.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:s.jsx(mt.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),s.jsx(Q.img,{src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:n=>n.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body)),HR=({imageSrc:t,onCancel:e,onCropComplete:n})=>{const[r,i]=k.useState({x:0,y:0}),[o,a]=k.useState(1),[l,c]=k.useState(null),[d,h]=k.useState(!1);Qt(!0);const f=(y,_)=>{c(_)},m=async()=>{try{const y=await $R(t,l);n(y)}catch(y){console.error(y)}};return rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black flex flex-col",children:[s.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[20001] px-6 py-12 flex justify-between items-center bg-gradient-to-b from-black/80 via-black/40 to-transparent pointer-events-none",children:[s.jsx("button",{onClick:e,className:"pointer-events-auto px-5 py-2.5 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/10 text-white text-sm font-semibold transition-all active:scale-95",children:"Cancelar"}),s.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest opacity-80 mt-1",children:"Redimensionar"}),s.jsx("button",{onClick:m,className:"pointer-events-auto px-6 py-2.5 rounded-full bg-white text-black text-sm font-bold transition-all hover:bg-zinc-100 active:scale-95 shadow-[0_4px_24px_rgba(255,255,255,0.2)]",children:"OK"})]}),s.jsx("div",{className:"relative flex-1 bg-black",children:s.jsx(FR,{image:t,crop:r,zoom:o,aspect:4/5,onCropChange:i,onZoomChange:a,onCropComplete:f,showGrid:d,onInteractionStart:()=>h(!0),onInteractionEnd:()=>h(!1),classes:{containerClassName:"bg-black",mediaClassName:"object-contain",cropAreaClassName:"border border-white/40 shadow-[0_0_0_1000px_rgba(0,0,0,0.7)]"}})}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[20001] px-8 py-16 flex flex-col items-center bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none",children:[s.jsxs("div",{className:"w-full max-w-xs flex items-center gap-6 pointer-events-auto",children:[s.jsx("button",{onClick:()=>a(Math.max(1,o-.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:s.jsx(mt.Camera,{className:"w-4 h-4"})}),s.jsx("input",{type:"range",value:o,min:1,max:3,step:.01,onChange:y=>a(parseFloat(y.target.value)),className:"range-slider accent-white"}),s.jsx("button",{onClick:()=>a(Math.min(3,o+.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:s.jsx(mt.Plus,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"mt-8 flex gap-1 items-center opacity-30 select-none",children:[1,1.5,2,2.5,3].map(y=>s.jsx("div",{className:`w-1 h-3 rounded-full transition-all duration-300 ${o>=y?"bg-white h-5 opacity-100":"bg-white/40"}`},y))})]}),s.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/20 rounded-full z-[20002]"})]}),document.body)},GR=({id:t,children:e})=>{const n=Hm();return s.jsx(Bu,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},KR=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[i,o]=k.useState(""),[a,l]=k.useState(null),[c,d]=k.useState(""),[h,f]=k.useState(null),[m,y]=k.useState(null),[_,A]=k.useState(!1),P=k.useRef(null);Qt(!0);const w=["#FF3B30","#FF9500","#FFCC00","#34C759","#00C7BE","#007AFF","#5856D6","#AF52DE","#FF2D55","#8E8E93"],b=x=>typeof x=="string"?{name:x,color:"#007AFF"}:{name:x.name||"Sem nome",color:x.color||"#007AFF"},j=()=>{const x=i.trim();!x||t.some(C=>Jt(C)===x)||(n([...t,{name:x,color:"#007AFF"}]),o(""))},R=x=>{const N=c.trim(),C=Jt(x);if(!N||N===C){l(null);return}if(t.some(I=>Jt(I)===N)){l(null);return}r(C,N),n(t.map(I=>{const S=b(I);return S.name===C?{...S,name:N}:S})),l(null)},L=(x,N)=>{const C=Jt(x);n(t.map(z=>{const I=b(z);return I.name===C?{...I,color:N}:I})),y(null)},V=x=>{const N=Jt(x);n(t.filter(C=>Jt(C)!==N)),r(N,"Outros"),f(null)},v=(x,N)=>{A(!1),(N.offset.y>100||N.velocity.y>500)&&e()};return rt.createPortal(s.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-stretch md:items-center justify-center",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:e}),s.jsxs(Q.div,{ref:P,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:.8},drag:window.innerWidth>=768?"y":!1,dragConstraints:{top:0,bottom:0},dragElastic:{top:0,bottom:.7},onDragStart:()=>A(!0),onDragEnd:v,className:"relative w-full h-full md:h-auto md:max-w-md md:max-h-[80vh] bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-[0_-10px_60px_rgba(0,0,0,0.25)] dark:shadow-[0_-10px_60px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",style:{paddingTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[s.jsx("div",{className:"flex justify-center pt-3 pb-2 shrink-0 cursor-grab active:cursor-grabbing md:hidden touch-manipulation",children:s.jsx(Q.div,{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600",animate:{scale:_?1.1:1,backgroundColor:_?"#007AFF":void 0},transition:{duration:.15}})}),s.jsxs("div",{className:"flex items-center justify-between px-6 pt-4 md:pt-6 pb-4 shrink-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-[22px] font-bold text-zinc-900 dark:text-white tracking-tight leading-tight",children:"Categorias"}),s.jsx("p",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400 mt-0.5",children:"Organize suas receitas"})]}),s.jsx("button",{onClick:e,className:"w-12 h-12 -mr-2 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 pb-5 shrink-0",children:s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-1 relative",children:s.jsx("input",{type:"text",value:i,onChange:x=>o(x.target.value),onKeyDown:x=>x.key==="Enter"&&j(),className:"w-full h-12 px-4 rounded-xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[16px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Nova categoria..."})}),s.jsx("button",{onClick:j,disabled:!i.trim(),className:"w-12 h-12 flex items-center justify-center bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation shadow-lg shadow-blue-500/25",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),s.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-6"}),s.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-4 py-4",children:t.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),s.jsx("p",{className:"text-[15px] font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhuma categoria ainda"})]}):s.jsx("div",{className:"space-y-2",children:t.map((x,N)=>{const{name:C,color:z}=b(x),I=C+N;return s.jsxs("div",{className:"group relative",children:[s.jsxs("div",{className:"flex items-center gap-3 py-3 px-3 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[s.jsx("button",{onClick:()=>y(m===I?null:I),className:"w-12 h-12 rounded-xl flex items-center justify-center touch-manipulation hover:bg-white dark:hover:bg-zinc-700 transition-colors active:scale-95",children:s.jsx("div",{className:"w-7 h-7 rounded-full shadow-sm transition-transform hover:scale-110",style:{backgroundColor:z}})}),s.jsx("div",{className:"flex-1 min-w-0",children:a===I?s.jsx("input",{autoFocus:!0,value:c,onChange:S=>d(S.target.value),onBlur:()=>R(x),onKeyDown:S=>{S.key==="Enter"&&R(x),S.key==="Escape"&&l(null)},className:"w-full h-10 px-3 -ml-3 bg-white dark:bg-zinc-700 rounded-lg outline-none text-[16px] font-semibold text-zinc-900 dark:text-white ring-2 ring-blue-500"}):s.jsx("button",{onClick:()=>{l(I),d(C)},className:"text-left w-full py-2 text-[16px] font-semibold text-zinc-900 dark:text-white truncate touch-manipulation",children:C})}),s.jsx("button",{onClick:()=>f(x),className:"w-12 h-12 flex items-center justify-center rounded-xl text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all active:scale-95 touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),s.jsx(Ee,{children:m===I&&s.jsxs(s.Fragment,{children:[s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:30},className:"md:hidden fixed inset-x-0 bottom-0 z-[80] bg-white dark:bg-zinc-800 rounded-t-3xl shadow-[0_-20px_60px_rgba(0,0,0,0.3)] p-6",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 24px)"},children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600"})}),s.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white text-center mb-5",children:"Escolha uma Cor"}),s.jsx("div",{className:"grid grid-cols-5 gap-4 mb-6",children:w.map(S=>s.jsx("button",{onClick:()=>L(x,S),className:`aspect-square rounded-full transition-all active:scale-90 touch-manipulation ${z===S?"ring-[3px] ring-offset-4 ring-offset-white dark:ring-offset-zinc-800 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:S}},S))}),s.jsx("button",{onClick:()=>y(null),className:"w-full h-14 bg-zinc-100 dark:bg-zinc-700 rounded-2xl text-[17px] font-semibold text-zinc-900 dark:text-white active:bg-zinc-200 dark:active:bg-zinc-600 transition-colors touch-manipulation",children:"Fechar"})]}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 z-[75] bg-black/40",onClick:()=>y(null)}),s.jsx(Q.div,{initial:{opacity:0,scale:.95,y:-8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-8},transition:{duration:.15},className:"hidden md:block absolute left-3 top-full mt-2 z-[80] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:s.jsx("div",{className:"grid grid-cols-5 gap-2",children:w.map(S=>s.jsx("button",{onClick:()=>L(x,S),className:`w-8 h-8 rounded-full transition-all hover:scale-110 active:scale-95 ${z===S?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:S}},S))})})]})})]},I)})})}),s.jsx(Ee,{children:h&&s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:s.jsxs(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:"w-full max-w-[280px] bg-white/95 dark:bg-zinc-800/95 backdrop-blur-xl rounded-[20px] overflow-hidden shadow-2xl",children:[s.jsxs("div",{className:"p-6 text-center",children:[s.jsx("div",{className:"w-14 h-14 bg-rose-100 dark:bg-rose-900/40 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4",children:s.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),s.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 leading-relaxed",children:['"',Jt(h),'" ser removida. Receitas sero movidas para "Outros".']})]}),s.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:s.jsx("button",{onClick:()=>f(null),className:"w-full h-12 text-[17px] font-normal text-blue-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors touch-manipulation",children:"Cancelar"})}),s.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:s.jsx("button",{onClick:()=>V(h),className:"w-full h-12 text-[17px] font-semibold text-rose-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors active:bg-rose-50 dark:active:bg-rose-900/20 touch-manipulation",children:"Excluir"})})]})})})]})]}),document.body)},QR=In.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:i})=>{const o=Hm(),[a,l]=k.useState(!1);return s.jsx(Bu,{value:t,dragListener:i,dragControls:o,className:`group relative mb-2 transition-all duration-300 ease-out ${i?"":"cursor-pointer"}`,onClick:()=>!i&&l(!a),children:s.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${i?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":a?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[i&&s.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:c=>o.start(c),children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[s.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!i&&s.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${a?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:a&&s.jsx(mt.Check,{className:"w-3 h-3 text-white"})}),i?s.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:c=>e({...t,name:c.target.value}),onKeyDown:c=>{if(c.key==="Enter"){c.preventDefault();const d=document.getElementById(`ing-qty-${t.id}`);d&&d.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):s.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${a?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),s.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[i?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:s.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:c=>{const d=c.target.value;(d===""||/^[0-9.,]*$/.test(d))&&e({...t,quantity:d})},onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),s.jsx("select",{value:t.unit,onChange:c=>e({...t,unit:c.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(c=>s.jsx("option",{value:c,children:c},c))})]}):s.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${a?"opacity-50":""}`,children:[s.jsx("span",{children:t.quantity}),s.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),i&&s.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),YR=In.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:i,isEditing:o})=>{const a=Hm(),[l,c]=k.useState(!1);return s.jsx(Bu,{value:t,dragListener:o,dragControls:a,className:`group relative mb-2 transition-all duration-300 ease-out ${o?"":"cursor-pointer"}`,onClick:()=>!o&&c(!l),children:s.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${o?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[o&&s.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:d=>a.start(d),children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[s.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),s.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),s.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!o&&l?s.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:s.jsx(mt.Check,{className:"w-3 h-3 text-white"})}):s.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),o?s.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:d=>n({...t,text:d.target.value}),onKeyDown:d=>{d.key==="Enter"&&!d.shiftKey&&(d.preventDefault(),i==null||i())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:d=>{d.target.style.height="auto",d.target.style.height=d.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):s.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),o&&s.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),Jt=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",T1=(t,e)=>{const n=t.find(r=>Jt(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function XR(){const{toast:t,ToastUI:e}=WR(),[n,r]=k.useState([]),[i,o]=k.useState(["Tradicionais","Especiais","Veganas","Doces"]),[a,l]=k.useState(null),[c,d]=k.useState(!1),[h,f]=k.useState("Todas"),[m,y]=k.useState(!0),[_,A]=k.useState(null),[P,w]=k.useState(null),[b,j]=k.useState(null),[R,L]=k.useState(!1),[V,v]=k.useState(!1),[x,N]=k.useState(!1),[C,z]=k.useState(!1),[I,S]=k.useState(null),ke=k.useRef(null);k.useRef(null);const ue=k.useRef({}),ye=k.useRef({});k.useEffect(()=>{let D=!0;return(async()=>{try{const W=await Be.getRecipesV3();if(!D)return;Array.isArray(W)&&W.length>0?r(W.map(se=>{let T=Array.isArray(se.sections)?se.sections:[];return T.length===0&&(Array.isArray(se.ingredientSections)||Array.isArray(se.instructionSections))&&(T=[...Array.isArray(se.ingredientSections)?se.ingredientSections.map(O=>({...O,type:"ingredients"})):[],...Array.isArray(se.instructionSections)?se.instructionSections.map(O=>({...O,type:"instructions"})):[]]),T.length>0&&(T=T.map(O=>({...O,items:Array.isArray(O.items)?O.items.filter(F=>{var ee,fe,de;return O.type==="ingredients"?((ee=F.name)==null?void 0:ee.trim())||((fe=F.quantity)==null?void 0:fe.trim()):(de=F.text)==null?void 0:de.trim()}):[]}))),{id:String(se.id),name:se.name||"Sem nome",category:se.category||"Outros",prepTime:se.prepTime??0,cookTime:se.cookTime??0,temperature:se.temperature??180,image:se.image||null,sections:T,createdAt:se.createdAt||new Date().toISOString(),updatedAt:se.updatedAt||new Date().toISOString()}})):r([])}catch{D&&r([])}try{const W=await Be.getRecipeCategories();D&&W&&Array.isArray(W)&&o(W)}catch{}D&&(y(!1),A(null))})(),()=>{D=!1}},[]),k.useEffect(()=>{if(m)return;const D=setTimeout(()=>{Be.syncRecipeCategories(i)},1e3);return()=>clearTimeout(D)},[i,m]);const we=(D,$)=>{const W=String(D);v(!0),N(!1),r(se=>se.map(T=>String(T.id)===W?{...T,...$,updatedAt:new Date().toISOString()}:T)),ue.current[W]={...ue.current[W]||{},...$,updatedAt:new Date().toISOString()},ye.current[W]&&clearTimeout(ye.current[W]),ye.current[W]=setTimeout(async()=>{const se=ue.current[W];if(!se){v(!1);return}delete ue.current[W],delete ye.current[W];try{await Be.syncRecipeV3(W,se,!0)||N(!0)}catch{N(!0)}finally{Object.keys(ue.current).length===0&&v(!1)}},1200)},Y=D=>{const $=D.target.files[0];if(!$)return;if(!a){t.error("Nenhuma receita selecionada.");return}const W=new FileReader;W.onload=()=>{S(W.result)},W.readAsDataURL($),D.target.value=null},le=async D=>{try{z(!0),S(null);const $=await mR(D);we(a,{image:$}),t.success("Imagem atualizada!")}catch($){console.error($),t.error("Erro ao processar imagem.")}finally{z(!1)}},Z=async D=>{const $=String(D);j(null),r(W=>W.filter(se=>String(se.id)!==$)),String(a)===$&&l(null);try{if(!await Be.deleteRecipeV3($))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},ve=k.useMemo(()=>n.filter(D=>h==="Todas"||D.category===h),[n,h]),xe=k.useMemo(()=>n.find(D=>String(D.id)===String(a)),[n,a]),Pe=k.useCallback(()=>{if(xe&&xe.sections){const D=xe.sections.map($=>$.type==="ingredients"?{...$,items:($.items||[]).filter(W=>W.name.trim()||W.quantity.trim())}:$.type==="instructions"?{...$,items:($.items||[]).filter(W=>W.text.trim())}:$);we(a,{sections:D})}d(!1)},[xe,a,we]);return m?s.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):_?s.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:s.jsxs("div",{className:"text-center max-w-sm",children:[s.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:_}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsx(Ee,{children:!a&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${x?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":V?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${x?"bg-rose-500":V?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:x?"Erro de Sync":V?"Sincronizando":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),s.jsxs("button",{onClick:()=>{const D=String(Date.now()),$={id:D,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([$,...n]),l(D),d(!0),Be.syncRecipeV3(D,$)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx(mt.Plus,{}),"Criar Nova Receita"]})]}),s.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:s.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...i].map(D=>s.jsx("button",{onClick:()=>f(Jt(D)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===Jt(D)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:Jt(D)},Jt(D))),s.jsx("button",{onClick:()=>L(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:s.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[ve.map(D=>s.jsxs(Q.div,{onClick:()=>{l(D.id),d(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[s.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[D.image?s.jsx(Q.img,{src:D.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):s.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),s.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/8 via-transparent to-transparent opacity-60"}),s.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/8 via-transparent to-transparent opacity-60"}),s.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:s.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:s.jsx(mt.Camera,{})})})]}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),s.jsx("button",{onClick:$=>{$.stopPropagation(),j({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${D.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{Z(D.id)},onCancel:()=>j(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:s.jsx(mt.Trash,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"px-2 pb-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${T1(i,D.category)}15`,color:T1(i,D.category)},children:D.category}),s.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(mt.Clock,{}),D.prepTime+D.cookTime,"m"]}),D.temperature>0&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),D.temperature,""]})]})]})]}),s.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:D.name}),s.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(D.sections||[]).filter($=>$.type==="ingredients").reduce(($,W)=>{var se;return $+(((se=W.items)==null?void 0:se.length)||0)},0)," ingredientes"]})]})]},D.id)),ve.length===0&&s.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[s.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),s.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:s.jsx(mt.Book,{})})]}),s.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),s.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",s.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&rt.createPortal(s.jsx(Ee,{children:a&&xe&&s.jsx(Q.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:ke,children:xe?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[s.jsx("div",{className:"flex-1 flex justify-start",children:s.jsx("button",{onClick:()=>{const D=(xe.sections||[]).map($=>({...$,items:$.items.filter(W=>{var se,T,O;return $.type==="ingredients"?((se=W.name)==null?void 0:se.trim())||((T=W.quantity)==null?void 0:T.trim()):(O=W.text)==null?void 0:O.trim()})}));we(a,{sections:D}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:s.jsx(mt.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),s.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${x?"text-rose-500":V?"text-zinc-400":"text-zinc-300"}`,children:x?"Falha":V?"Sincronizando...":"Salvo"}),s.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>c?Pe():d(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${c?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:c?"Concludo":"Editar"}),s.jsx("button",{onClick:()=>{j({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{Z(a)},onCancel:()=>j(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:s.jsx(mt.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),s.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[s.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[s.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:xe.image?s.jsxs(s.Fragment,{children:[s.jsx(Q.img,{src:xe.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>w(xe.image)}),s.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y,disabled:C}),C?s.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):s.jsx(mt.Camera,{className:"w-5 h-5"})]})]}):s.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[s.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:Y}),s.jsx(mt.Camera,{}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),s.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(D=>s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:D.label}),s.jsxs("div",{className:"flex items-baseline gap-1",children:[s.jsx("input",{value:xe[D.val],onChange:$=>we(a,{[D.val]:$.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),D.unit&&s.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:D.unit})]})]},D.label))})]}),s.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[s.jsxs("div",{className:"space-y-4 md:space-y-6",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsx("select",{value:xe.category,onChange:D=>we(a,{category:D.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:i.map(D=>s.jsx("option",{value:Jt(D),children:Jt(D)},Jt(D)))})}),s.jsx("textarea",{value:xe.name,onChange:D=>we(a,{name:D.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:D=>{D.target.style.height="auto",D.target.style.height=D.target.scrollHeight+"px"}})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[s.jsxs("button",{disabled:!c,onClick:()=>we(a,{sections:[...xe.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),s.jsxs("button",{disabled:!c,onClick:()=>we(a,{sections:[...xe.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),s.jsx(Fu,{axis:"y",values:xe.sections||[],onReorder:D=>we(a,{sections:D}),className:"space-y-6",children:(xe.sections||[]).map(D=>s.jsx(GR,{id:D,children:$=>s.jsx(ZR,{section:D,onUpdate:W=>we(a,{sections:xe.sections.map(se=>se.id===D.id?W:se)}),onDelete:()=>we(a,{sections:xe.sections.filter(W=>W.id!==D.id)}),dragControls:$,isEditing:c})},D.id))}),s.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:s.jsx("button",{onClick:()=>j({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{Z(a)},onCancel:()=>j(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),R&&s.jsx(KR,{categories:i,onClose:()=>L(!1),onUpdate:o,onRenameCategory:(D,$)=>{n.filter(W=>W.category===D).forEach(W=>{we(W.id,{category:$})})}},"recipe-cat-modal"),s.jsx(Ee,{children:P&&s.jsx(qR,{src:P,onClose:()=>w(null)})}),typeof document<"u"&&rt.createPortal(s.jsx(Ee,{mode:"wait",children:b&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[s.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:b.onCancel}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[s.jsx(JR,{}),s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${b.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:s.jsx(mt.Trash,{})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:b.title}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:b.message}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:b.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:b.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${b.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),s.jsx(Ee,{children:I&&s.jsx(HR,{imageSrc:I,onCancel:()=>S(null),onCropComplete:le})}),e]})}function JR(){return Qt(!0),null}function ZR({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){return t.type==="ingredients"?s.jsx(eD,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):t.type==="instructions"?s.jsx(tD,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}):null}function eD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const o=In.useRef(null),a=In.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],c]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const d=document.getElementById(`ing-name-${l}`);d&&(d.scrollIntoView({behavior:"smooth",block:"center"}),d.focus())})})},[t,e]);return s.jsxs("div",{ref:o,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:s.jsx(mt.Bars,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),i?s.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):s.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&s.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:s.jsx(mt.Trash,{})})]}),s.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:s.jsx(Fu,{axis:"y",values:t.items,onReorder:l=>i&&e({...t,items:l}),children:t.items.map(l=>s.jsx(QR,{item:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===l.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==l.id)}),onNext:()=>{l.name.trim()&&a()},isEditing:i},l.id))})}),i&&s.jsxs("button",{type:"button",onClick:a,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[s.jsx(mt.Plus,{})," Adicionar Ingrediente"]})]})}function tD({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:i}){const o=In.useCallback(()=>{const a=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:a,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const c=document.getElementById(`instr-text-${a}`);c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.focus())})})},[t,e]);return s.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[s.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:a=>r.start(a),children:s.jsx(mt.Bars,{className:"w-5 h-5"})}),s.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),i?s.jsx("input",{value:t.title,onChange:a=>e({...t,title:a.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):s.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),i&&s.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:s.jsx(mt.Trash,{})})]}),s.jsx(Fu,{axis:"y",values:t.items,onReorder:a=>i&&e({...t,items:a}),className:"space-y-3",children:t.items.map((a,l)=>s.jsx(YR,{item:a,index:l,onUpdate:c=>e({...t,items:t.items.map(d=>d.id===a.id?c:d)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==a.id)}),onNext:()=>{a.text.trim()&&o()},isEditing:i},a.id))}),i&&s.jsxs("button",{type:"button",onClick:o,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[s.jsx(mt.Plus,{})," Adicionar Passo"]})]})}const I1="padoca_kanban_pro_max",Ho={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},nD=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],A1={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},Lp=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function rD(){var se;const[t,e]=k.useState(()=>{try{const T=localStorage.getItem(I1);return T?JSON.parse(T):A1}catch{return A1}}),[n,r]=k.useState(null),[i,o]=k.useState(!1),[a,l]=k.useState(""),[c,d]=k.useState(0),[h,f]=k.useState(null),[m,y]=k.useState(""),[_,A]=k.useState(null),[P,w]=k.useState(""),[b,j]=k.useState(null),[R,L]=k.useState(!1),[V,v]=k.useState(null),x=k.useRef(null);k.useCallback((T,O="success")=>{x.current&&clearTimeout(x.current),v({message:T,type:O}),x.current=setTimeout(()=>v(null),3500)},[]);const[N,C]=k.useState({active:null,target:null,isDragging:!1}),z=ru(0),I=ru(0),S=k.useRef(null),ke=4,ue=k.useRef(null),ye=k.useRef(null),we=k.useRef({colId:null,index:null}),Y=k.useCallback((T="light")=>{navigator.vibrate&&navigator.vibrate(T==="light"?8:T==="medium"?15:25)},[]),le=k.useCallback((T,O,F)=>{const fe=document.elementsFromPoint(T,O).find(ne=>ne.hasAttribute("data-column-id"));if(!fe)return null;const de=fe.getAttribute("data-column-id"),B=fe.querySelector("[data-cards-container]");if(!B)return{colId:de,index:0};const re=Array.from(B.querySelectorAll("[data-card-id]")).filter(ne=>ne.getAttribute("data-card-id")!==F);if(re.length===0)return{colId:de,index:0};for(let ne=0;ne<re.length;ne++){const oe=re[ne].getBoundingClientRect(),ge=oe.top+oe.height/2;if(O<ge)return{colId:de,index:ne}}return{colId:de,index:re.length}},[]);k.useEffect(()=>{const T=F=>{const ee=S.current;if(ee&&!N.isDragging){const fe=F.clientX-ee.startX,de=F.clientY-ee.startY;if(Math.sqrt(fe*fe+de*de)>ke){const{card:re,colId:ne,rect:oe,offsetX:ge,offsetY:be,cardIndex:Te}=ee;z.set(oe.left),I.set(oe.top),C({active:{id:re.id,sourceColId:ne,sourceIndex:Te,data:re,rect:oe,offsetX:ge,offsetY:be},target:{colId:ne,index:Te},isDragging:!0}),Y("medium")}return}if(N.isDragging&&N.active){F.preventDefault();const fe=F.clientX-N.active.offsetX,de=F.clientY-N.active.offsetY;if(z.set(fe),I.set(de),ye.current)return;ye.current=requestAnimationFrame(()=>{const B=le(F.clientX,F.clientY,N.active.id);if(ye.current=null,B){const re=we.current;(re.colId!==B.colId||re.index!==B.index)&&(we.current=B,Y("light"),C(ne=>({...ne,target:B})))}})}},O=F=>{if(ye.current&&(cancelAnimationFrame(ye.current),ye.current=null),N.isDragging&&N.active){const{active:ee,target:fe}=N;document.body.style.cursor="";const de=fe==null?void 0:fe.colId,B=fe==null?void 0:fe.index;de&&(ee.sourceColId!==de||ee.sourceIndex!==B)&&(e(ne=>{const oe=ne.columns.map(Ve=>({...Ve,cards:[...Ve.cards]})),ge=oe.find(Ve=>Ve.id===ee.sourceColId),be=oe.find(Ve=>Ve.id===de);if(!ge||!be)return ne;const Te=ge.cards.findIndex(Ve=>Ve.id===ee.id);if(Te===-1)return ne;const[$e]=ge.cards.splice(Te,1);return be.cards.splice(B,0,$e),{...ne,columns:oe}}),Y("medium")),C({active:null,target:null,isDragging:!1}),we.current={colId:null,index:null}}else if(S.current){const{card:ee,colId:fe}=S.current;r({...ee,columnId:fe})}S.current=null};return window.addEventListener("pointermove",T,{passive:!1}),window.addEventListener("pointerup",O),window.addEventListener("pointercancel",O),()=>{window.removeEventListener("pointermove",T),window.removeEventListener("pointerup",O),window.removeEventListener("pointercancel",O),ye.current&&cancelAnimationFrame(ye.current)}},[N,le,Y,z,I]);const Z=k.useCallback((T,O,F)=>{var de;if(T.target.closest("button, input, textarea, [data-no-drag]")||T.button&&T.button!==0)return;const ee=T.currentTarget,fe=ee.getBoundingClientRect();S.current={card:O,colId:F,element:ee,rect:fe,startX:T.clientX,startY:T.clientY,offsetX:T.clientX-fe.left,offsetY:T.clientY-fe.top,cardIndex:((de=t.columns.find(B=>B.id===F))==null?void 0:de.cards.findIndex(B=>B.id===O.id))??0}},[t.columns]);k.useEffect(()=>{(async()=>{var O;try{const F=await((O=Be.getKanban)==null?void 0:O.call(Be));F!=null&&F.columns&&e(F)}catch{}finally{L(!0)}})()},[]),k.useEffect(()=>{if(localStorage.setItem(I1,JSON.stringify(t)),R){const T=setTimeout(()=>{var O;try{(O=Be.syncKanban)==null||O.call(Be,t)}catch{}},2e3);return()=>clearTimeout(T)}},[t,R]);const ve=k.useCallback(T=>{if(!m.trim())return;const O={id:`card - ${Date.now()} -${Math.random().toString(36).substr(2,9)} `,title:m.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(F=>({...F,columns:F.columns.map(ee=>ee.id===T?{...ee,cards:[...ee.cards,O]}:ee)})),y(""),f(null),Y("light")},[m,Y]),xe=k.useCallback(T=>{e(O=>({...O,columns:O.columns.map(F=>F.id===T.columnId?{...F,cards:F.cards.map(ee=>ee.id===T.id?T:ee)}:F)}))},[]),Pe=k.useCallback((T,O)=>{j({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(F=>({...F,columns:F.columns.map(ee=>ee.id===T?{...ee,cards:ee.cards.filter(fe=>fe.id!==O)}:ee)})),r(null),j(null),Y("medium")},onCancel:()=>j(null)})},[Y]),D=k.useCallback(()=>{a.trim()&&(e(T=>({...T,columns:[...T.columns,{id:`col - ${Date.now()} `,title:a.trim(),cards:[]}]})),l(""),o(!1),Y("light"))},[a,Y]),$=k.useCallback(T=>{if(!P.trim()){A(null);return}e(O=>({...O,columns:O.columns.map(F=>F.id===T?{...F,title:P.trim()}:F)})),A(null)},[P]),W=k.useCallback(T=>{j({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(O=>({...O,columns:O.columns.filter(F=>F.id!==T)})),j(null),Y("medium")},onCancel:()=>j(null)})},[Y]);return s.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[s.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),s.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${R?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${R?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:R?"Cloud Active":"Syncing"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),s.jsxs("button",{onClick:()=>o(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[s.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),s.jsxs("div",{ref:ue,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[s.jsx(Ee,{mode:"popLayout",children:t.columns.map(T=>s.jsx(iD,{col:T,dragState:N,spring:Ho,zoomLevel:c,renamingColId:_,setRenamingColId:A,renameTitle:P,setRenameTitle:w,renameColumn:$,deleteColumn:W,addingCardToCol:h,setAddingCardToCol:f,newCardTitle:m,setNewCardTitle:y,addCard:ve,handleCardPointerDown:Z},T.id))}),s.jsx(Q.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>o(!0),className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-lg hover:shadow-xl flex items-center justify-center text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-all",children:s.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),s.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:s.jsx(Q.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...Ho.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:Lp.map((T,O)=>s.jsxs("button",{onClick:()=>{d(O),Y("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${c===O?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[c===O&&s.jsx(Q.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),s.jsx("span",{className:"relative z-10",children:T.label})]},O))})}),s.jsx(oD,{dragState:N,ghostX:z,ghostY:I,spring:Ho}),s.jsx(Ee,{children:n&&s.jsx(lD,{card:n,onClose:()=>r(null),onUpdate:xe,onDelete:()=>Pe(n.columnId,n.id),setConfirmModal:j})}),s.jsx(Ee,{children:b&&s.jsx(aD,{...b})}),rt.createPortal(s.jsx(Ee,{children:i&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{o(!1),l("")}}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Ho.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 tracking-tight",children:"Nova Lista"}),s.jsx("input",{autoFocus:!0,value:a,onChange:T=>l(T.target.value),onKeyDown:T=>{T.key==="Enter"&&D(),T.key==="Escape"&&(o(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-6"}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{o(!1),l("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:D,disabled:!a.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Criar Lista"})]})]})]})}),document.body),rt.createPortal(s.jsx(Ee,{children:h&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{f(null),y("")}}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:Ho.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2 tracking-tight",children:"Novo Carto"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:(se=t.columns.find(T=>T.id===h))==null?void 0:se.title}),s.jsx("textarea",{autoFocus:!0,value:m,onChange:T=>y(T.target.value),onKeyDown:T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),ve(h)),T.key==="Escape"&&(f(null),y(""))},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-6",rows:3}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{f(null),y("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),s.jsx("button",{onClick:()=>ve(h),disabled:!m.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Adicionar"})]})]})]})}),document.body),s.jsx(Ee,{children:V&&rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${V.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":V.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${V.type==="error"?"bg-white animate-pulse":V.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:V.message})]}),document.body)})]})}const iD=In.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:i,setRenamingColId:o,renameTitle:a,setRenameTitle:l,renameColumn:c,deleteColumn:d,addingCardToCol:h,setAddingCardToCol:f,newCardTitle:m,setNewCardTitle:y,addCard:_,handleCardPointerDown:A})=>{var w,b;const P=((w=e.target)==null?void 0:w.colId)===t.id;return s.jsxs(Q.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`flex-shrink-0 flex flex-col snap-center ${Lp[r].width} max-h-full rounded-[2rem] md:rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/60 dark:border-white/[0.06] shadow-xl shadow-black/[0.03] dark:shadow-black/20 transition-all duration-300 ${P?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}`,children:[s.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[s.jsx("div",{className:"flex-1 min-w-0 mr-3",children:i===t.id?s.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:a,onChange:j=>l(j.target.value),onBlur:()=>c(t.id),onKeyDown:j=>{j.key==="Enter"&&c(t.id),j.key==="Escape"&&o(null)}}):s.jsx("h3",{onClick:()=>{o(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),s.jsx("button",{onClick:()=>d(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[s.jsx(Ee,{mode:"popLayout",children:t.cards.map((j,R)=>s.jsx(sD,{card:j,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:A},j.id))}),s.jsx(Ee,{mode:"sync",children:e.isDragging&&P&&e.active&&(()=>{const j=t.cards.filter(R=>R.id!==e.active.id);return e.target.index>=j.length})()&&s.jsx(Q.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((b=e.active.rect)==null?void 0:b.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),s.jsx("button",{onClick:()=>{f(t.id),y("")},className:"w-full min-h-[48px] py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-[0.98] touch-manipulation",children:"+ Carto"})]})]})}),sD=In.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:i,handleCardPointerDown:o})=>{var c,d,h,f;const a=((c=n.active)==null?void 0:c.id)===t.id,l=((d=n.target)==null?void 0:d.colId)===e;return n.isDragging&&l&&n.active,s.jsx(In.Fragment,{children:!a&&s.jsxs(Q.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:m=>o(m,t,e),className:`relative bg-white dark:bg-zinc-900 border border-zinc-200/60 dark:border-white/[0.06] rounded-2xl ${Lp[i].cardPadding} shadow-sm hover:shadow-xl dark:shadow-black/10 cursor-grab active:cursor-grabbing touch-none select-none hover:border-zinc-300 dark:hover:border-white/10 group/card`,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&s.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((m,y)=>s.jsx("div",{className:`rounded-full ${i>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:m.color}},y))}),s.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${i>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),i<2&&((f=t.checklists)==null?void 0:f.length)>0&&s.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),s.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((m,y)=>m+y.items.filter(_=>_.done).length,0),"/",t.checklists.reduce((m,y)=>m+y.items.length,0)]})]})]})})}),oD=In.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var i;return s.jsx(Ee,{children:t.isDragging&&t.active&&s.jsx(Q.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),s.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((i=t.active.data.labels)==null?void 0:i.length)>0&&s.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((o,a)=>s.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:o.color}},a))}),s.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function aD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return Qt(!0),s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function lD({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:i}){var j;Qt(!0);const[o,a]=k.useState(t),[l,c]=k.useState(!1),[d,h]=k.useState(""),f=k.useRef(!0),m=k.useRef(null);k.useEffect(()=>{if(f.current){f.current=!1;return}return m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{n(o)},800),()=>{m.current&&clearTimeout(m.current)}},[o]);const y=R=>{var V;const L=(V=o.labels)==null?void 0:V.find(v=>v.id===R.id);a(v=>({...v,labels:L?v.labels.filter(x=>x.id!==R.id):[...v.labels||[],R]}))},_=()=>{d.trim()&&(a(R=>({...R,checklists:[...R.checklists||[],{id:Date.now(),title:d.trim(),items:[]}]})),h(""),c(!1))},A=R=>{i({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{a(L=>({...L,checklists:L.checklists.filter(V=>V.id!==R)})),i(null)},onCancel:()=>i(null)})},P=(R,L)=>{a(V=>({...V,checklists:V.checklists.map(v=>v.id===R?{...v,items:v.items.map(x=>x.id===L?{...x,done:!x.done}:x)}:v)}))},w=(R,L)=>{L.trim()&&a(V=>({...V,checklists:V.checklists.map(v=>v.id===R?{...v,items:[...v.items,{id:Date.now(),text:L.trim(),done:!1}]}:v)}))},b=(R,L)=>{a(V=>({...V,checklists:V.checklists.map(v=>v.id===R?{...v,items:v.items.filter(x=>x.id!==L)}:v)}))};return rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md"}),s.jsxs(Q.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:400,damping:35},className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-3xl shadow-2xl max-h-[90vh] md:max-h-[85vh] flex flex-col overflow-hidden border-t md:border border-zinc-200/50 dark:border-white/10",onClick:R=>R.stopPropagation(),children:[s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"w-10 h-1 bg-zinc-300 dark:bg-zinc-700 rounded-full mx-auto mb-4 md:hidden"}),s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("div",{className:"flex gap-2 flex-wrap",children:nD.map(R=>{var L;return s.jsx("button",{onClick:()=>y(R),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(L=o.labels)!=null&&L.find(V=>V.id===R.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:R.color}},R.id)})}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white flex items-center justify-center transition-all hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-95",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("input",{className:"w-full text-xl md:text-2xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:o.title,onChange:R=>a(L=>({...L,title:R.target.value})),placeholder:"Ttulo do carto"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 md:p-6 space-y-6 custom-scrollbar",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),s.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:o.description||"",onChange:R=>a(L=>({...L,description:R.target.value}))})]}),(j=o.checklists)==null?void 0:j.map(R=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:R.title}),s.jsx("button",{onClick:()=>A(R.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),s.jsx(Fu,{axis:"y",values:R.items,onReorder:L=>{a(V=>({...V,checklists:V.checklists.map(v=>v.id===R.id?{...v,items:L}:v)}))},className:"space-y-2",children:R.items.map(L=>s.jsxs(Bu,{value:L,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[s.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),s.jsx("button",{onClick:()=>P(R.id,L.id),className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${L.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:L.done&&s.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:`flex-1 text-sm ${L.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:L.text}),s.jsx("button",{onClick:()=>b(R.id,L.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},L.id))}),s.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:L=>{L.key==="Enter"&&L.target.value.trim()&&(w(R.id,L.target.value),L.target.value="")}})]},R.id)),l?s.jsxs(Q.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[s.jsx("input",{autoFocus:!0,value:d,onChange:R=>h(R.target.value),onKeyDown:R=>{R.key==="Enter"&&_(),R.key==="Escape"&&c(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:_,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),s.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):s.jsx("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"+ Nova Checklist"})]}),s.jsx("div",{className:"shrink-0 p-5 md:p-6 border-t border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-zinc-900/50",children:s.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20 active:scale-[0.98]",children:"Excluir Carto"})})]})]}),document.body)}const P1="padoca_suppliers";function Nh(){return Qt(!0),null}function cD({message:t,type:e,onClose:n}){return k.useEffect(()=>{const r=setTimeout(n,3e3);return()=>clearTimeout(r)},[n]),s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${e==="error"?"bg-rose-500/90 border-rose-400/20 text-white":e==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${e==="error"?"bg-white animate-pulse":e==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t})]})}function uD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return Qt(!0),s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-start md:items-center justify-center p-4 pt-24 md:pt-20",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function dD(){var Pt,fr,sn,Kn,Dr;const[t,e]=k.useState(()=>{try{const q=localStorage.getItem(P1);return q?JSON.parse(q):[]}catch{return[]}}),[n,r]=k.useState(!1),[i,o]=k.useState(null),[a,l]=k.useState(null),[c,d]=k.useState(""),[h,f]=k.useState(null),[m,y]=k.useState(null),[_,A]=k.useState("synced"),[P,w]=k.useState(!1),[b,j]=k.useState("suppliers"),R=k.useRef(null),[L,V]=k.useState(null),[v,x]=k.useState({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),N=[{id:"cotacao",label:"Cotao",icon:""},{id:"catalogo",label:"Catlogo",icon:""},{id:"contrato",label:"Contrato",icon:""},{id:"tecnico",label:"Tcnico",icon:""},{id:"outros",label:"Outros",icon:""}],[C,z]=k.useState(!1),[I,S]=k.useState(null),[ke,ue]=k.useState(null),[ye,we]=k.useState("cotacao"),Y=k.useRef(null),[le,Z]=k.useState([]),[ve,xe]=k.useState("");k.useEffect(()=>{(async()=>{try{const te=await Be.getInventory();te!=null&&te.items&&Z(te.items)}catch(te){console.error("Error loading inventory:",te)}})()},[]),k.useEffect(()=>{(async()=>{try{const te=await Be.getSuppliers();te!=null&&te.suppliers&&e(te.suppliers)}catch(te){console.error("Error loading suppliers:",te)}finally{w(!0)}})()},[]),k.useEffect(()=>{if(localStorage.setItem(P1,JSON.stringify(t)),P){A("syncing");const q=setTimeout(async()=>{try{const te=await Be.syncSuppliers(t);A(te?"synced":"error")}catch{A("error")}},1500);return()=>clearTimeout(q)}},[t,P]);const Pe=k.useCallback((q,te="success")=>{y({message:q,type:te})},[]),D=k.useMemo(()=>{if(!c.trim())return t;const q=c.toLowerCase();return t.filter(te=>{var Le,M,K;return((Le=te.name)==null?void 0:Le.toLowerCase().includes(q))||((M=te.company)==null?void 0:M.toLowerCase().includes(q))||((K=te.email)==null?void 0:K.toLowerCase().includes(q))})},[t,c]),$=k.useMemo(()=>{if(!ve.trim())return le.slice(0,10);const q=ve.toLowerCase();return le.filter(te=>{var Le;return(Le=te.name)==null?void 0:Le.toLowerCase().includes(q)}).slice(0,10)},[le,ve]),W=()=>{x({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),o(null),r(!0)},se=q=>{x({name:q.name||"",company:q.company||"",email:q.email||"",phone:q.phone||"",whatsapp:q.whatsapp||"",address:q.address||"",notes:q.notes||"",linkedItems:q.linkedItems||[],documents:q.documents||[]}),o(q),l(null),r(!0)},T=()=>{if(!v.name.trim()){Pe("Nome  obrigatrio","error");return}if(i)e(q=>q.map(te=>te.id===i.id?{...te,...v,updatedAt:new Date().toISOString()}:te)),Pe("Fornecedor atualizado!");else{const q={id:Date.now().toString(),...v,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(te=>[q,...te]),Pe("Fornecedor adicionado!")}r(!1),o(null)},O=q=>{f({title:"Excluir Fornecedor",message:`Deseja excluir "${q.name}"? Esta ao no pode ser desfeita.`,type:"danger",onConfirm:()=>{e(te=>te.filter(Le=>Le.id!==q.id)),l(null),f(null),Pe("Fornecedor excludo")},onCancel:()=>f(null)})},F=q=>{v.linkedItems.find(te=>te.itemId===q.id)||(x(te=>({...te,linkedItems:[...te.linkedItems,{itemId:q.id,itemName:q.name}]})),xe(""))},ee=q=>{x(te=>({...te,linkedItems:te.linkedItems.filter(Le=>Le.itemId!==q)}))},fe=q=>{if(q===0)return"0 B";const te=1024,Le=["B","KB","MB","GB"],M=Math.floor(Math.log(q)/Math.log(te));return parseFloat((q/Math.pow(te,M)).toFixed(1))+" "+Le[M]},de=q=>q.startsWith("image/")?"":q==="application/pdf"?"":q.includes("spreadsheet")||q.includes("excel")?"":q.includes("document")||q.includes("word")?"":"",B=k.useCallback(q=>{const Le=["image/jpeg","image/png","image/webp","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];Array.from(q).forEach(M=>{if(M.size>5242880){Pe(`${M.name} excede 5MB`,"error");return}if(!Le.includes(M.type)&&!M.type.startsWith("image/")){Pe("Formato no suportado","error");return}S(M.name);const K=new FileReader;K.onload=H=>{const ae={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:M.name,type:M.type,size:M.size,dataUrl:H.target.result,uploadedAt:new Date().toISOString(),category:ye};x(Ie=>({...Ie,documents:[...Ie.documents,ae]})),S(null),Pe("Documento anexado!")},K.onerror=()=>{S(null),Pe("Erro ao ler arquivo","error")},K.readAsDataURL(M)})},[ye,Pe]),re=k.useCallback(q=>{q.preventDefault(),q.stopPropagation(),z(!0)},[]),ne=k.useCallback(q=>{q.preventDefault(),q.stopPropagation(),z(!1)},[]),oe=k.useCallback(q=>{q.preventDefault(),q.stopPropagation(),z(!1);const te=q.dataTransfer.files;te.length>0&&B(te)},[B]),ge=q=>{x(te=>({...te,documents:te.documents.filter(Le=>Le.id!==q)})),Pe("Documento removido")},be=q=>{const te=document.createElement("a");te.href=q.dataUrl,te.download=q.name,document.body.appendChild(te),te.click(),document.body.removeChild(te)},Te=q=>{window.open(`tel:${q}`,"_self")},$e=q=>{window.open(`mailto:${q}`,"_self")},Ve=q=>{const te=q.replace(/\D/g,"");window.open(`https://wa.me/${te}`,"_blank")};return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-violet-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-violet-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Fornecedores"}),s.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${_==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":_==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${_==="syncing"?"bg-amber-500":_==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:_==="syncing"?"Syncing":_==="error"?"Error":"Cloud Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto de fornecedores e contatos"})]}),s.jsxs("button",{onClick:W,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[s.jsx("svg",{className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Fornecedor"]})]}),s.jsx("section",{className:"relative z-10",children:s.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800/50 p-1 rounded-xl inline-flex",children:[s.jsx("button",{onClick:()=>j("suppliers"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${b==="suppliers"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Fornecedores"}),s.jsx("button",{onClick:()=>j("quotes"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${b==="quotes"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Oramentos"})]})}),b==="suppliers"&&s.jsx("section",{className:"relative z-10",children:s.jsx("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:c,onChange:q=>d(q.target.value)})]})})}),b==="suppliers"&&s.jsx("section",{className:"relative z-10",children:D.length===0?s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum fornecedor"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione seu primeiro fornecedor para comear"}),s.jsx("button",{onClick:W,className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Adicionar Fornecedor"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:D.map(q=>{var te,Le,M;return s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},onClick:()=>l(q),className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-violet-500/25",children:((Le=(te=q.name)==null?void 0:te.charAt(0))==null?void 0:Le.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:q.name}),q.company&&s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:q.company})]})]}),s.jsxs("div",{className:"space-y-2 mb-4",children:[q.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"truncate",children:q.phone})]}),q.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"truncate",children:q.email})]})]}),((M=q.linkedItems)==null?void 0:M.length)>0&&s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[s.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),s.jsxs("span",{className:"text-xs font-bold text-violet-600 dark:text-violet-400",children:[q.linkedItems.length," ",q.linkedItems.length===1?"item":"itens"]})]})]},q.id)})})}),b==="quotes"&&(()=>{const q=t.filter(te=>(te.documents||[]).some(Le=>Le.category==="cotacao"));return s.jsxs("section",{className:"relative z-10",children:[s.jsx("input",{ref:R,type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:te=>{var Le;if((Le=te.target.files)!=null&&Le.length&&L){const M=te.target.files[0];if(M.size>5*1024*1024){Pe("Arquivo muito grande (mx 5MB)","error");return}const K=new FileReader;K.onload=H=>{const ae={id:`doc_${Date.now()}`,name:M.name,type:M.type,size:M.size,dataUrl:H.target.result,uploadedAt:new Date().toISOString(),category:"cotacao"};e(Ie=>Ie.map(Ne=>Ne.id===L?{...Ne,documents:[...Ne.documents||[],ae]}:Ne)),Pe("Cotao adicionada"),V(null)},K.readAsDataURL(M)}te.target.value=""}}),q.length===0?s.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center shadow-lg",children:[s.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-500/10 dark:to-orange-500/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma cotao"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione cotaes aos seus fornecedores"}),s.jsx("button",{onClick:()=>j("suppliers"),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Ver Fornecedores"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:q.map(te=>{var M,K;const Le=(te.documents||[]).filter(H=>H.category==="cotacao");return s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all",children:[s.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[s.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-amber-500/25",children:((K=(M=te.name)==null?void 0:M.charAt(0))==null?void 0:K.toUpperCase())||"?"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:te.name}),te.company&&s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:te.company})]}),s.jsx("button",{onClick:()=>{var H;V(te.id),(H=R.current)==null||H.click()},className:"w-10 h-10 rounded-xl bg-amber-50 dark:bg-amber-500/10 flex items-center justify-center text-amber-500 hover:bg-amber-100 dark:hover:bg-amber-500/20 transition-colors touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),s.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-amber-50 dark:bg-amber-500/10 rounded-xl border border-amber-100 dark:border-amber-500/20 mb-4",children:[s.jsx("svg",{className:"w-4 h-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:[Le.length," ",Le.length===1?"cotao":"cotaes"]})]}),s.jsx("div",{className:"space-y-2",children:Le.map(H=>s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl group hover:bg-zinc-100 dark:hover:bg-zinc-800/50 transition-colors",children:[H.type.startsWith("image/")?s.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 shadow-sm",style:{backgroundImage:`url(${H.dataUrl})`}}):s.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${H.type==="application/pdf"?"bg-red-100 dark:bg-red-500/20":"bg-blue-100 dark:bg-blue-500/20"}`,children:H.type==="application/pdf"?s.jsx("svg",{className:"w-5 h-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4z"})}):s.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate",children:H.name}),s.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[fe(H.size),"  ",new Date(H.uploadedAt).toLocaleDateString("pt-BR")]})]}),s.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[s.jsx("button",{onClick:()=>be(H),className:"w-8 h-8 flex items-center justify-center rounded-lg text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-colors touch-manipulation",title:"Baixar",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsx("button",{onClick:()=>{e(ae=>ae.map(Ie=>Ie.id===te.id?{...Ie,documents:Ie.documents.filter(Ne=>Ne.id!==H.id)}:Ie)),Pe("Cotao removida")},className:"w-8 h-8 flex items-center justify-center rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors touch-manipulation",title:"Remover",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},H.id))})]},te.id)})})]})})(),rt.createPortal(s.jsx(Ee,{children:n&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Nh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>r(!1)}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col",style:{maxHeight:"calc(100vh - 100px)"},children:[s.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 px-6 py-5 border-b border-zinc-100 dark:border-white/5 flex items-center justify-between z-10 shrink-0",children:[s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:i?"Editar Fornecedor":"Novo Fornecedor"}),s.jsx("button",{onClick:()=>r(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto flex-1",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Informaes"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome do fornecedor",value:v.name,onChange:q=>x(te=>({...te,name:q.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Empresa"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome da empresa",value:v.company,onChange:q=>x(te=>({...te,company:q.target.value}))})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Contato"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Telefone"}),s.jsx("input",{type:"tel",inputMode:"tel",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"(00) 00000-0000",value:v.phone,onChange:q=>x(te=>({...te,phone:q.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Email"}),s.jsx("input",{type:"email",inputMode:"email",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"email@exemplo.com",value:v.email,onChange:q=>x(te=>({...te,email:q.target.value}))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Endereo"}),s.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Endereo completo",value:v.address,onChange:q=>x(te=>({...te,address:q.target.value}))})]})]}),s.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Itens Vinculados"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Buscar item do estoque...",value:ve,onChange:q=>xe(q.target.value)}),ve&&$.length>0&&s.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-xl max-h-40 overflow-y-auto z-20",children:$.map(q=>s.jsxs("button",{onClick:()=>F(q),className:"w-full px-4 py-3 text-left text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors flex items-center justify-between",children:[s.jsx("span",{children:q.name}),s.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]},q.id))})]}),v.linkedItems.length>0&&s.jsx("div",{className:"space-y-2",children:v.linkedItems.map(q=>s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[s.jsx("span",{className:"text-sm font-medium text-violet-700 dark:text-violet-300",children:q.itemName}),s.jsx("button",{onClick:()=>ee(q.itemId),className:"w-8 h-8 flex items-center justify-center rounded-lg text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},q.itemId))})]}),s.jsxs("div",{className:"pt-5 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("input",{ref:Y,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:q=>B(q.target.files)}),((Pt=v.documents)==null?void 0:Pt.length)>0&&s.jsx("div",{className:"mb-4 space-y-3",children:v.documents.map(q=>{const te=q.type.startsWith("image/");return s.jsxs("div",{className:"flex items-center gap-3",children:[te?s.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 cursor-pointer",style:{backgroundImage:`url(${q.dataUrl})`},onClick:()=>ue(q)}):s.jsx("div",{className:"w-10 h-10 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center shrink-0 text-zinc-400",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm text-zinc-900 dark:text-white truncate",children:q.name}),s.jsx("p",{className:"text-xs text-zinc-400",children:fe(q.size)})]}),s.jsx("button",{type:"button",onClick:()=>ge(q.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-red-500 transition-colors touch-manipulation",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},q.id)})}),s.jsxs("button",{type:"button",onDragOver:re,onDragLeave:ne,onDrop:oe,onClick:()=>{var q;return(q=Y.current)==null?void 0:q.click()},disabled:!!I,className:"flex items-center gap-2 text-blue-500 hover:text-blue-600 transition-colors touch-manipulation",children:[I?s.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),s.jsx("span",{className:"text-sm font-medium",children:I?"Enviando...":"Anexar arquivo"})]})]}),s.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Observaes"}),s.jsx("textarea",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all resize-none",rows:3,placeholder:"Notas adicionais...",value:v.notes,onChange:q=>x(te=>({...te,notes:q.target.value}))})]})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3 shrink-0",children:[s.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),s.jsx("button",{onClick:T,className:"flex-[2] py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg shadow-zinc-900/10 hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:i?"Salvar":"Adicionar"})]})]})]})}),document.body),rt.createPortal(s.jsx(Ee,{children:a&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[s.jsx(Nh,{}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>l(null)}),s.jsxs(Q.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col overflow-hidden",style:{maxHeight:"calc(100vh - 100px)"},children:[s.jsxs("div",{className:"relative px-6 py-8 text-center border-b border-zinc-100 dark:border-white/5",children:[s.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-xl shadow-violet-500/30 mx-auto mb-4",children:((sn=(fr=a.name)==null?void 0:fr.charAt(0))==null?void 0:sn.toUpperCase())||"?"}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-1",children:a.name}),a.company&&s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:a.company})]}),s.jsx("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-white/5",children:s.jsxs("div",{className:"flex gap-3",children:[a.phone&&s.jsxs("button",{onClick:()=>Te(a.phone),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Ligar"})]}),a.email&&s.jsxs("button",{onClick:()=>$e(a.email),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Email"})]}),a.whatsapp&&s.jsxs("button",{onClick:()=>Ve(a.whatsapp),className:"flex-1 py-4 px-4 bg-emerald-50 dark:bg-emerald-500/10 rounded-2xl flex flex-col items-center gap-2 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95 touch-manipulation",children:[s.jsx("svg",{className:"w-6 h-6 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),s.jsx("span",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"WhatsApp"})]})]})}),s.jsxs("div",{className:"px-6 py-5 space-y-4",children:[a.address&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Endereo"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:a.address})]}),((Kn=a.linkedItems)==null?void 0:Kn.length)>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Itens Fornecidos"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.linkedItems.map(q=>s.jsx("span",{className:"px-3 py-1.5 bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 rounded-lg text-xs font-bold",children:q.itemName},q.itemId))})]}),((Dr=a.documents)==null?void 0:Dr.length)>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Documentos"}),s.jsx("div",{className:"space-y-2",children:a.documents.map(q=>{const te=N.find(Le=>Le.id===q.category);return s.jsxs("div",{onClick:()=>be(q),className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all touch-manipulation active:scale-[0.98]",children:[s.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-900/30 dark:to-indigo-900/30 flex items-center justify-center text-xl shrink-0",children:de(q.type)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h5",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate mb-0.5",children:q.name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-[10px] text-zinc-400",children:fe(q.size)}),te&&s.jsxs("span",{className:"text-[10px] font-bold text-violet-500",children:[te.icon," ",te.label]})]})]}),s.jsx("svg",{className:"w-5 h-5 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]},q.id)})})]}),a.notes&&s.jsxs("div",{children:[s.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:a.notes})]})]}),s.jsxs("div",{className:"px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[s.jsx("button",{onClick:()=>se(a),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:"Editar"}),s.jsx("button",{onClick:()=>O(a),className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-all active:scale-[0.98] touch-manipulation",children:"Excluir"})]})]})]})}),document.body),s.jsx(Ee,{children:h&&s.jsx(uD,{...h})}),rt.createPortal(s.jsx(Ee,{children:ke&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 bg-black/90 backdrop-blur-2xl",onClick:()=>ue(null),children:[s.jsx(Nh,{}),s.jsx("button",{onClick:()=>ue(null),className:"absolute top-6 right-6 w-12 h-12 rounded-full bg-white/10 backdrop-blur-xl flex items-center justify-center text-white hover:bg-white/20 transition-all z-10 touch-manipulation",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),s.jsxs("button",{onClick:q=>{q.stopPropagation(),be(ke)},className:"absolute top-6 left-6 px-4 py-3 rounded-xl bg-white/10 backdrop-blur-xl flex items-center gap-2 text-white hover:bg-white/20 transition-all z-10 touch-manipulation",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),s.jsx("span",{className:"text-sm font-bold",children:"Baixar"})]}),s.jsx(Q.img,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},src:ke.dataUrl,alt:ke.name,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:q=>q.stopPropagation()}),s.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 px-6 py-3 rounded-2xl bg-white/10 backdrop-blur-xl",children:[s.jsx("p",{className:"text-sm font-medium text-white text-center",children:ke.name}),s.jsx("p",{className:"text-xs text-white/60 text-center mt-0.5",children:fe(ke.size)})]})]})}),document.body),s.jsx(Ee,{children:m&&s.jsx(cD,{...m,onClose:()=>y(null)})})]})}const tN={type:"spring",stiffness:400,damping:30},hD=["Ingredientes","Embalagens","Utenslios","Produtos de Limpeza","Outros"],fD={Ingredientes:["Laticnios","Embutidos","Farinceos","Temperos","Vegetais","Carnes","Molhos","Queijos","leos","Outros"],Embalagens:["Caixas","Sacolas","Papis","Plsticos","Outros"],Utenslios:["Cozinha","Mesa","Limpeza","Outros"],"Produtos de Limpeza":["Detergentes","Desinfetantes","Acessrios","Outros"],Outros:["Geral"]};function mD(){const t=H5(),e=k.useMemo(()=>Array.isArray(t)?t.map(z=>{var I;return{id:z.id,name:z.name,sku:(I=z.id)==null?void 0:I.toString(),category:z.category||"Outros",subcategory:z.subcategory||"",supplier:z.supplierName||"",supplierId:z.supplierId,unit:z.unit||"un",unitPrice:z.pricePerUnit||0,currentStock:(Number(z.packageQuantity)||0)*(Number(z.packageCount)||1),packageQuantity:z.packageQuantity,packageCount:z.packageCount,minStock:z.minStock||0,maxStock:z.maxStock||0,notes:"",createdAt:z.createdAt,updatedAt:z.createdAt,purchaseDate:z.purchaseDate}}):[],[t]),[n,r]=k.useState(hD),[i,o]=k.useState([]),[a,l]=k.useState(!1),[c,d]=k.useState(""),[h,f]=k.useState("all"),[m,y]=k.useState("all"),[_,A]=k.useState("recent"),[P,w]=k.useState(null),[b,j]=k.useState(null),[R,L]=k.useState(null),V=k.useRef(null),v=k.useCallback((z,I="info")=>{V.current&&clearTimeout(V.current),L({message:z,type:I}),V.current=setTimeout(()=>L(null),3e3)},[]);k.useEffect(()=>{(async()=>{try{const I=await Be.getSuppliers();I!=null&&I.suppliers&&o(I.suppliers)}catch(I){console.warn("Products cloud load failed",I)}finally{l(!0)}})()},[]);const x=k.useMemo(()=>{let z=[...e];if(h!=="all"&&(z=z.filter(I=>I.category===h)),m!=="all"&&(z=z.filter(I=>I.subcategory===m)),c.trim()){const I=c.toLowerCase();z=z.filter(S=>{var ke,ue,ye;return((ke=S.name)==null?void 0:ke.toLowerCase().includes(I))||((ue=S.supplier)==null?void 0:ue.toLowerCase().includes(I))||((ye=S.sku)==null?void 0:ye.toLowerCase().includes(I))})}switch(_){case"name":z.sort((I,S)=>(I.name||"").localeCompare(S.name||""));break;case"quantity":z.sort((I,S)=>(S.currentStock||0)-(I.currentStock||0));break;case"price":z.sort((I,S)=>(S.unitPrice||0)-(I.unitPrice||0));break;case"recent":default:z.sort((I,S)=>new Date(S.updatedAt||S.createdAt||0)-new Date(I.updatedAt||I.createdAt||0))}return z},[e,h,m,c,_]),N=k.useMemo(()=>h==="all"?[...new Set(e.map(z=>z.subcategory).filter(Boolean))]:fD[h]||[],[h,e]),C=k.useMemo(()=>{const z=e.length,I=e.reduce((ue,ye)=>ue+(ye.currentStock||0)*(ye.unitPrice||0),0),S=e.filter(ue=>ue.minStock&&ue.currentStock<ue.minStock).length,ke=[...new Set(e.map(ue=>ue.category).filter(Boolean))].length;return{totalProducts:z,totalValue:I,lowStock:S,categories:ke}},[e]);return s.jsxs("div",{className:"min-h-screen pb-24 md:pb-8",children:[s.jsxs("header",{className:"mb-8",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:items-end md:justify-between gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Produtos"}),s.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${a?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${a?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),s.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:a?"Synced":"Syncing"})]})]}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 font-medium",children:"Visualizao sincronizada com Estoque"})]}),s.jsxs("a",{href:"#estoque",onClick:z=>{z.preventDefault(),v("Use a pgina de Estoque para adicionar itens","info")},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 rounded-2xl text-xs font-bold uppercase tracking-widest border border-zinc-200 dark:border-zinc-700 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all flex items-center justify-center gap-3",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),"Sincronizado com Estoque"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Total Produtos"}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tabular-nums",children:C.totalProducts})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Valor em Estoque"}),s.jsxs("p",{className:"text-2xl md:text-3xl font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:["R$ ",C.totalValue.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Estoque Baixo"}),s.jsx("p",{className:`text-2xl md:text-3xl font-bold tabular-nums ${C.lowStock>0?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:C.lowStock})]}),s.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-4 md:p-5 border border-zinc-200/50 dark:border-white/5",children:[s.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Categorias"}),s.jsx("p",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tabular-nums",children:C.categories})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:c,onChange:z=>d(z.target.value),placeholder:"Buscar produtos...",className:"w-full pl-12 pr-4 py-4 bg-white dark:bg-zinc-900 rounded-2xl text-sm font-medium outline-none border border-zinc-200/50 dark:border-white/5 focus:ring-2 focus:ring-zinc-500/20 transition-all"})]}),s.jsxs("select",{value:_,onChange:z=>A(z.target.value),className:"px-4 py-4 bg-white dark:bg-zinc-900 rounded-2xl text-sm font-medium outline-none border border-zinc-200/50 dark:border-white/5 focus:ring-2 focus:ring-zinc-500/20 appearance-none cursor-pointer min-w-[140px]",children:[s.jsx("option",{value:"recent",children:"Mais Recentes"}),s.jsx("option",{value:"name",children:"Nome A-Z"}),s.jsx("option",{value:"quantity",children:"Maior Estoque"}),s.jsx("option",{value:"price",children:"Maior Preo"})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4 overflow-x-auto scrollbar-hide pb-2",children:[s.jsx("button",{onClick:()=>{f("all"),y("all")},className:`flex-shrink-0 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${h==="all"?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),n.map(z=>s.jsx("button",{onClick:()=>{f(z),y("all")},className:`flex-shrink-0 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${h===z?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:z},z))]}),N.length>0&&s.jsxs("div",{className:"flex gap-2 mt-2 overflow-x-auto scrollbar-hide pb-2",children:[s.jsx("button",{onClick:()=>y("all"),className:`flex-shrink-0 px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${m==="all"?"bg-indigo-500 text-white":"bg-zinc-50 dark:bg-zinc-800/50 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:"Todas"}),N.map(z=>s.jsx("button",{onClick:()=>y(z),className:`flex-shrink-0 px-3 py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${m===z?"bg-indigo-500 text-white":"bg-zinc-50 dark:bg-zinc-800/50 text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800"}`,children:z},z))]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(z=>{var I;return s.jsxs("div",{onClick:()=>w(z),className:"bg-white dark:bg-zinc-900 rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 hover:shadow-xl hover:border-zinc-300 dark:hover:border-white/10 transition-all cursor-pointer group",children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-3",children:[z.category&&s.jsx("div",{className:"inline-block px-3 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider",children:z.category}),z.subcategory&&s.jsx("div",{className:"inline-block px-3 py-1 bg-indigo-100 dark:bg-indigo-500/20 rounded-full text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:z.subcategory})]}),s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:z.name}),z.sku&&s.jsxs("p",{className:"text-xs text-zinc-400 mb-3 font-mono",children:["SKU: ",z.sku]}),s.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Estoque"}),s.jsxs("p",{className:`text-xl font-bold tabular-nums ${z.minStock&&z.currentStock<z.minStock?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:[z.currentStock||0,s.jsx("span",{className:"text-xs font-medium text-zinc-400 ml-1",children:z.unit||"un"})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Preo Unit."}),s.jsxs("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:["R$ ",(z.unitPrice||0).toFixed(2)]})]})]}),z.supplier&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-500 dark:text-zinc-400",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),z.supplier]}),((I=z.history)==null?void 0:I.length)>0&&s.jsx("div",{className:"mt-3 pt-3 border-t border-zinc-100 dark:border-zinc-800",children:s.jsxs("p",{className:"text-[10px] text-zinc-400",children:["ltima movimentao: ",new Date(z.history[z.history.length-1].date).toLocaleDateString("pt-BR")]})})]},z.id)})}),x.length===0&&s.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:s.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:c?"Nenhum produto encontrado":"Nenhum produto cadastrado"}),s.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:c?"Tente uma busca diferente":"Adicione itens no Estoque para v-los aqui"})]}),s.jsx(Ee,{children:P&&s.jsx(pD,{product:P,onClose:()=>w(null),suppliers:i,readOnly:!0})}),s.jsx(Ee,{children:b&&s.jsx(gD,{...b})}),s.jsx(Ee,{children:R&&rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold",children:R.message})]}),document.body)})]})}function pD({product:t,onClose:e,onEdit:n,onDelete:r,onAddMovement:i,suppliers:o}){var A;Qt(!0);const[a,l]=k.useState("info"),[c,d]=k.useState("entry"),[h,f]=k.useState(""),[m,y]=k.useState(""),_=()=>{!h||parseFloat(h)<=0||(i({type:c,quantity:parseFloat(h),notes:m}),f(""),y(""),l("history"))};return rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[s.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md"}),s.jsxs(Q.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:tN,className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-3xl shadow-2xl max-h-[90vh] flex flex-col overflow-hidden border-t md:border border-zinc-200/50 dark:border-white/10",onClick:P=>P.stopPropagation(),children:[s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"w-10 h-1 bg-zinc-300 dark:bg-zinc-700 rounded-full mx-auto mb-4 md:hidden"}),s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-wrap gap-1.5 mb-2",children:[t.category&&s.jsx("div",{className:"inline-block px-3 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-full text-[10px] font-bold text-zinc-500 uppercase tracking-wider",children:t.category}),t.subcategory&&s.jsx("div",{className:"inline-block px-3 py-1 bg-indigo-100 dark:bg-indigo-500/20 rounded-full text-[10px] font-bold text-indigo-600 dark:text-indigo-400 uppercase tracking-wider",children:t.subcategory})]}),s.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white",children:t.name}),t.sku&&s.jsxs("p",{className:"text-xs text-zinc-400 font-mono mt-1",children:["SKU: ",t.sku]})]}),s.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Estoque"}),s.jsx("p",{className:`text-xl font-bold ${t.minStock&&t.currentStock<t.minStock?"text-rose-500":"text-zinc-900 dark:text-white"}`,children:t.currentStock||0})]}),s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Preo Unit."}),s.jsxs("p",{className:"text-xl font-bold text-emerald-600 dark:text-emerald-400",children:["R$ ",(t.unitPrice||0).toFixed(2)]})]}),s.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800 rounded-xl p-3 text-center",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Valor Total"}),s.jsxs("p",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:["R$ ",((t.currentStock||0)*(t.unitPrice||0)).toFixed(2)]})]})]}),s.jsx("div",{className:"flex gap-1 mt-4 p-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl",children:[{id:"info",label:"Detalhes"},{id:"history",label:"Histrico"},{id:"movement",label:"Movimentar"}].map(P=>s.jsx("button",{onClick:()=>l(P.id),className:`flex-1 py-2.5 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${a===P.id?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 dark:text-zinc-400"}`,children:P.label},P.id))})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-5 md:p-6",children:[a==="info"&&s.jsxs("div",{className:"space-y-4",children:[t.supplier&&s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("svg",{className:"w-5 h-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Fornecedor"}),s.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:t.supplier})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Estoque Mnimo"}),s.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:t.minStock||"-"})]}),s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Estoque Mximo"}),s.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:t.maxStock||"-"})]})]}),t.notes&&s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Observaes"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.notes})]}),s.jsxs("div",{className:"p-4 bg-zinc-50 dark:bg-zinc-800 rounded-xl",children:[s.jsx("p",{className:"text-[10px] text-zinc-400 uppercase tracking-wider mb-1",children:"Cadastrado em"}),s.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.createdAt?new Date(t.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}):"-"})]})]}),a==="history"&&s.jsx("div",{className:"space-y-2",children:((A=t.history)==null?void 0:A.length)>0?[...t.history].reverse().map((P,w)=>s.jsxs("div",{className:`p-4 rounded-xl border ${P.type==="entry"?"bg-emerald-50 dark:bg-emerald-500/10 border-emerald-200 dark:border-emerald-500/20":"bg-rose-50 dark:bg-rose-500/10 border-rose-200 dark:border-rose-500/20"}`,children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("span",{className:`text-xs font-bold uppercase ${P.type==="entry"?"text-emerald-600 dark:text-emerald-400":"text-rose-600 dark:text-rose-400"}`,children:P.type==="entry"?"+ Entrada":"- Sada"}),s.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white mt-1",children:[P.quantity," ",t.unit||"un"]})]}),s.jsx("p",{className:"text-xs text-zinc-500",children:new Date(P.date).toLocaleDateString("pt-BR")})]}),P.notes&&s.jsx("p",{className:"text-xs text-zinc-500 mt-2",children:P.notes})]},P.id||w)):s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-zinc-400 text-sm",children:"Nenhuma movimentao registrada"})})}),a==="movement"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex gap-2 p-1 bg-zinc-100 dark:bg-zinc-800 rounded-xl",children:[s.jsx("button",{onClick:()=>d("entry"),className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${c==="entry"?"bg-emerald-500 text-white":"text-zinc-500"}`,children:"+ Entrada"}),s.jsx("button",{onClick:()=>d("exit"),className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${c==="exit"?"bg-rose-500 text-white":"text-zinc-500"}`,children:"- Sada"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Quantidade"}),s.jsx("input",{type:"number",inputMode:"decimal",value:h,onChange:P=>f(P.target.value),placeholder:"0",className:"w-full px-4 py-4 bg-zinc-50 dark:bg-zinc-800 rounded-2xl text-lg font-bold outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 text-center"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),s.jsx("input",{type:"text",value:m,onChange:P=>y(P.target.value),placeholder:"Ex: Compra fornecedor X",className:"w-full px-4 py-4 bg-zinc-50 dark:bg-zinc-800 rounded-2xl text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50"})]}),s.jsxs("button",{onClick:_,disabled:!h||parseFloat(h)<=0,className:`w-full py-4 rounded-2xl text-xs font-bold uppercase tracking-wider transition-all disabled:opacity-50 ${c==="entry"?"bg-emerald-500 text-white hover:bg-emerald-600":"bg-rose-500 text-white hover:bg-rose-600"}`,children:["Registrar ",c==="entry"?"Entrada":"Sada"]})]})]}),s.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[s.jsx("button",{onClick:n,className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Editar"}),s.jsx("button",{onClick:r,className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors",children:"Excluir"})]})]})]}),document.body)}function gD({title:t,message:e,type:n="info",onConfirm:r,onCancel:i}){return Qt(!0),rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10001] flex items-center justify-center p-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:i}),s.jsxs(Q.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},transition:tN,className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[s.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):s.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center",children:t}),s.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 text-center",children:e}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:i,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]}),document.body)}const xD="service_g2io60e",yD="template_at3fl3s",R1="0CObV7BKHDHwHMDxs",Go="padocainc@gmail.com",vD="Padoca Pizza";class bD{constructor(){this.senderEmail=Go,this.isInitialized=!1}async init(){return this.isInitialized||(window.emailjs?(window.emailjs.init(R1),this.isInitialized=!0):await new Promise((e,n)=>{const r=document.createElement("script");r.src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js",r.onload=()=>{window.emailjs.init(R1),this.isInitialized=!0,console.log(" EmailJS initialized"),e()},r.onerror=i=>{console.error(" Failed to load EmailJS:",i),n(new Error("Failed to load EmailJS"))},document.head.appendChild(r)})),!0}isConnected(){return!0}getConnectedEmail(){return Go}async connect(){return await this.init(),{email:Go,connected:!0}}disconnect(){}async sendEmail({to:e,subject:n,body:r,supplierName:i}){if(console.log(" Sending email via EmailJS..."),console.log("To:",e),console.log("Subject:",n),await this.init(),!window.emailjs)throw new Error("EmailJS no foi carregado corretamente");try{const o=await window.emailjs.send(xD,yD,{to_email:e,to_name:i||e,from_name:vD,from_email:Go,subject:n,message:r,reply_to:Go});return console.log(" Email sent successfully!",o),{success:!0,method:"emailjs",status:o.status,text:o.text}}catch(o){throw console.error(" EmailJS error:",o),new Error(o.text||o.message||"Falha ao enviar email")}}async checkReplies(){return[]}async getUnreadCount(){return 0}}const ps=new bD,D1="padoca_inventory_v2",M1="padoca_suppliers";function wD(){return Qt(!0),null}function kD(){const[t,e]=k.useState([]),[n,r]=k.useState([]),[i,o]=k.useState("synced"),[a,l]=k.useState(!1),[c,d]=k.useState(!1),[h,f]=k.useState(""),[m,y]=k.useState(!1),[_,A]=k.useState([]),[P,w]=k.useState("pending"),[b,j]=k.useState(!1),[R,L]=k.useState(null),[V,v]=k.useState({to:"",subject:"",body:""}),[x,N]=k.useState([]),[C,z]=k.useState(null),I=k.useRef(null),S=k.useCallback((B,re="success")=>{I.current&&clearTimeout(I.current),z({message:B,type:re}),I.current=setTimeout(()=>z(null),3500)},[]);k.useEffect(()=>{(async()=>{o("syncing");try{try{const re=await Be.getInventory();if(re!=null&&re.items&&Array.isArray(re.items))e(re.items);else{const ne=localStorage.getItem(D1);if(ne){const oe=JSON.parse(ne);e(Array.isArray(oe)?oe:[])}}}catch(re){console.warn("Inventory load failed:",re);const ne=localStorage.getItem(D1);if(ne){const oe=JSON.parse(ne);e(Array.isArray(oe)?oe:[])}}try{const re=await Be.getSuppliers();if(re!=null&&re.suppliers&&Array.isArray(re.suppliers))r(re.suppliers);else{const ne=localStorage.getItem(M1);if(ne){const oe=JSON.parse(ne),ge=(oe==null?void 0:oe.suppliers)||oe;r(Array.isArray(ge)?ge:[])}}}catch(re){console.warn("Suppliers load failed:",re);const ne=localStorage.getItem(M1);if(ne){const oe=JSON.parse(ne),ge=(oe==null?void 0:oe.suppliers)||oe;r(Array.isArray(ge)?ge:[])}}o("synced")}catch(re){console.error("Error loading data:",re),o("error")}finally{l(!0)}})();try{const re=localStorage.getItem("padoca_sent_emails");if(re){const ne=JSON.parse(re);N(Array.isArray(ne)?ne:[])}}catch(re){console.warn("Sent emails load failed:",re)}},[]),k.useEffect(()=>{(async()=>{try{await ps.init(),d(!0),f(ps.getConnectedEmail()||"padocainc@gmail.com")}catch(re){console.warn("Gmail init failed:",re),d(!0),f("padocainc@gmail.com")}})()},[]),k.useEffect(()=>{if(!c||x.length===0)return;const B=async()=>{try{const ne=x.filter(Ve=>Ve.status==="sent");if(ne.length===0)return;const ge=[...new Set(ne.map(Ve=>Ve.to).filter(Boolean))],be=ne.reduce((Ve,Pt)=>new Date(Pt.sentAt)<new Date(Ve.sentAt)?Pt:Ve),Te=new Date(be.sentAt),$e=await ps.checkReplies(ge,Te);if($e.length>0){A($e);const Ve=x.map(Pt=>$e.some(sn=>{var Kn;return sn.supplierEmail.toLowerCase()===((Kn=Pt.to)==null?void 0:Kn.toLowerCase())})&&Pt.status==="sent"?{...Pt,status:"replied"}:Pt);JSON.stringify(Ve)!==JSON.stringify(x)&&(N(Ve),localStorage.setItem("padoca_sent_emails",JSON.stringify(Ve)),S(" Nova resposta recebida!","success"))}}catch(ne){console.warn("Error checking replies:",ne)}};B();const re=setInterval(B,3e4);return()=>clearInterval(re)},[c,x,S]);const ke=k.useRef(x);ke.current=x,k.useEffect(()=>{if(t.length===0)return;const B=ke.current;if(B.length===0||B.filter(ge=>ge.status==="confirmed").length===0)return;let ne=!1;const oe=B.map(ge=>{var Te;return ge.status!=="confirmed"||!((Te=ge.itemIds)!=null&&Te.length)?ge:ge.itemIds.every($e=>{const Ve=t.find(sn=>sn.id===$e);if(!Ve)return!0;const Pt=(Number(Ve.packageQuantity)||0)*(Number(Ve.packageCount)||1),fr=Number(Ve.minStock)||0;return Pt>=fr})?(ne=!0,{...ge,status:"delivered",deliveredAt:new Date().toISOString()}):ge});ne&&(N(oe),localStorage.setItem("padoca_sent_emails",JSON.stringify(oe)),S(" Pedido entregue - estoque atualizado!","success"))},[t,S]);const ue=async()=>{y(!0);try{const B=await ps.connect();d(!0),f(B.email||""),S(" Gmail conectado com sucesso!","success")}catch(B){console.error("Gmail connect failed:",B),S("Erro ao conectar Gmail","error")}finally{y(!1)}},ye=()=>{ps.disconnect(),d(!1),f(""),A([]),S("Gmail desconectado","info")},we=B=>(Number(B.packageQuantity)||0)*(Number(B.packageCount)||1),Y=B=>{const re=we(B),ne=Number(B.minStock)||0;return ne===0?"ok":re<ne?"critical":re<=ne*1.2?"warning":"ok"},le=k.useMemo(()=>{const B=new Set(x.filter(oe=>oe.status==="sent"||oe.status==="replied").map(oe=>oe.supplierId).filter(Boolean)),re=t.filter(oe=>{const ge=Y(oe);return ge==="critical"||ge==="warning"}).map(oe=>({...oe,status:Y(oe),totalQty:we(oe)})),ne={};return re.forEach(oe=>{const ge=n.find(Te=>{var $e;return($e=Te.linkedItems)==null?void 0:$e.some(Ve=>Ve.itemId===oe.id)}),be=(ge==null?void 0:ge.id)||"unlinked";B.has(ge==null?void 0:ge.id)||(ne[be]||(ne[be]={supplier:ge,items:[]}),ne[be].items.push(oe))}),Object.values(ne).filter(oe=>oe.supplier)},[t,n,x]),Z=k.useMemo(()=>{const B=t.length,re=t.filter(be=>Y(be)==="critical").length,ne=t.filter(be=>Y(be)==="warning").length,oe=le.length,ge=B>0?Math.max(0,Math.round(100-re*20-ne*5)):100;return{total:B,critical:re,warning:ne,suppliersWithAlerts:oe,healthScore:ge}},[t,le]),ve=k.useCallback((B,re)=>{const ne=new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),oe=re.map(ge=>{const be=ge.totalQty||0,Te=ge.maxStock||0,$e=Math.max(0,Te-be);return` ${ge.name}: ${$e.toFixed(0)}${ge.unit||"kg"}`}).join(`
`);return{to:B.email||"",subject:`Solicitao de Cotao - Padoca Pizza - ${new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")}`,body:`Ol ${B.name},

Espero que esteja bem!

Estamos precisando repor alguns itens do nosso estoque e gostaramos de solicitar uma cotao:

${oe}

Poderia nos enviar os preos atualizados e prazo de entrega?

Obrigado!
Equipe Padoca Pizza


${ne}`}},[]),[xe,Pe]=k.useState([]),D=(B,re)=>{const ne=ve(B,re);L(B),Pe(re),v(ne),j(!0)},[$,W]=k.useState(!1),[se,T]=k.useState(!1),[O,F]=k.useState(null),ee=async()=>{if(!V.to){S("Email do fornecedor no cadastrado","error");return}if(x.find(re=>re.supplierId===(R==null?void 0:R.id)&&(re.status==="sent"||re.status==="confirmed"))){S("J existe uma cotao pendente para este fornecedor","error"),j(!1);return}W(!0);try{console.log(" Opening email composer..."),await ps.sendEmail({to:V.to,subject:V.subject,body:V.body,supplierName:R==null?void 0:R.name}),console.log(" Email service completed!");const re={id:Date.now().toString(),...V,supplierName:R==null?void 0:R.name,supplierId:R==null?void 0:R.id,itemIds:xe.map(oe=>oe.id),itemNames:xe.map(oe=>oe.name),sentAt:new Date().toISOString(),status:"sent",sentViaGmail:c},ne=[re,...x];N(ne),localStorage.setItem("padoca_sent_emails",JSON.stringify(ne)),W(!1),j(!1),S(" Email enviado! Gmail aberto para finalizar.","success"),console.log(" Showing success modal..."),F(re),T(!0),w("awaiting"),L(null),Pe([]),v({to:"",subject:"",body:""})}catch(re){console.error(" Send email failed:",re),W(!1),S("Erro ao enviar email: "+re.message,"error")}},fe=()=>{const B=`Para: ${V.to}
Assunto: ${V.subject}

${V.body}`;navigator.clipboard.writeText(B),S("Email copiado para rea de transferncia!")},de=Z.healthScore>=80?"emerald":Z.healthScore>=60?"amber":"rose";return s.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[s.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),s.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-6 mb-2",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 mb-1",children:[s.jsx("h1",{className:"text-2xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Inteligncia"}),s.jsxs("div",{className:`px-2 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 shrink-0 ${i==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":i==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[s.jsx("div",{className:`w-1 h-1 rounded-full ${i==="syncing"?"bg-amber-500":i==="error"?"bg-red-500":"bg-emerald-500"}`}),s.jsx("span",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest leading-none whitespace-nowrap",children:i==="syncing"?"Sync":i==="error"?"Error":"Active"})]})]}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Automao e insights em tempo real"})]}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[c?s.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 bg-emerald-50 dark:bg-emerald-500/10 rounded-2xl border border-emerald-200 dark:border-emerald-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),s.jsx("svg",{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"})})]}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"text-[9px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-widest",children:"Gmail Conectado"}),s.jsx("span",{className:"text-[10px] text-emerald-500/70 truncate max-w-[150px]",children:h})]}),s.jsx("button",{onClick:ye,className:"ml-2 p-1.5 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 rounded-lg transition-colors",title:"Desconectar",children:s.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}):s.jsx("button",{onClick:ue,disabled:m,className:"px-5 py-3 bg-white dark:bg-zinc-800 border border-zinc-200 dark:border-white/10 text-zinc-700 dark:text-zinc-300 rounded-2xl text-[10px] font-bold uppercase tracking-widest shadow-md hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:m?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Conectando..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"})}),"Conectar Gmail"]})}),s.jsxs("button",{onClick:()=>le.length>0&&D(le[0].supplier,le[0].items),disabled:le.length===0,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Notificar Fornecedores"]})]})]}),s.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[s.jsx("div",{className:"md:col-span-2 relative group",children:s.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[s.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"flex justify-between items-start mb-12",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Intelligence Matrix"}),s.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Active Monitoring"})]}),s.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[s.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${de==="emerald"?"bg-emerald-500":de==="amber"?"bg-amber-500":"bg-rose-500"}`}),s.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Analysis"})]})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Health Score"}),s.jsxs("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:[s.jsx("span",{className:de==="emerald"?"text-emerald-500":de==="amber"?"text-amber-500":"text-rose-500",children:Z.healthScore}),s.jsx("span",{className:"text-2xl md:text-4xl text-zinc-300 dark:text-zinc-600",children:"/ 100"})]})]})]}),s.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Itens Monitorados"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:Z.total})]}),s.jsxs("div",{className:"flex flex-col gap-1.5",children:[s.jsx("span",{className:"text-[9px] font-bold text-rose-500 dark:text-rose-400 uppercase tracking-widest",children:"Alertas Ativos"}),s.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-rose-600 dark:text-rose-400 tracking-tight tabular-nums",children:Z.critical+Z.warning})]})]})]})}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Crtico"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:Z.critical}),s.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens abaixo do mnimo"})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Urgncia"}),s.jsx("span",{className:"text-[8px] font-bold text-rose-500",children:"Alta"})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-rose-500/80 transition-all duration-1000",style:{width:Z.total>0?`${Z.critical/Z.total*100}%`:"0%"}})})]})]}),s.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[s.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)]"}),s.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Ateno"})]}),s.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:Z.warning}),s.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens prximos do limite"})]}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[s.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Monitorar"}),s.jsx("span",{className:"text-[8px] font-bold text-amber-500",children:"Mdia"})]}),s.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-amber-500/80 transition-all duration-1000",style:{width:Z.total>0?`${Z.warning/Z.total*100}%`:"0%"}})})]})]})]}),s.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[s.jsxs("div",{className:"p-6 md:p-10 pb-0",children:[s.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Automation Protocol"}),s.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none mb-6",children:"Gesto de Cotaes"}),s.jsx("div",{className:"flex p-1 bg-zinc-100 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-white/5 overflow-x-auto",children:[{key:"pending",label:"Pendente",count:le.length,color:"rose"},{key:"awaiting",label:"Aguardando",count:x.filter(B=>B.status==="sent").length,color:"amber"},{key:"delivered",label:"Entregue",count:x.filter(B=>B.status==="delivered").length,color:"emerald"},{key:"history",label:"Histrico",count:x.length,color:"zinc"}].map(B=>s.jsxs("button",{onClick:()=>w(B.key),className:`relative flex-1 flex items-center justify-center gap-2 py-3 px-4 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-300 ${P===B.key?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[P===B.key&&s.jsx(Q.div,{layoutId:"protocol-tab-indicator",className:"absolute inset-0 bg-white dark:bg-zinc-700 rounded-xl shadow-md",transition:{type:"spring",stiffness:400,damping:30}}),s.jsx("span",{className:"relative z-10",children:B.label}),B.count>0&&s.jsx("span",{className:`relative z-10 px-1.5 py-0.5 rounded-full text-[9px] font-bold ${P===B.key?`bg-${B.color}-500/20 text-${B.color}-600 dark:text-${B.color}-400`:"bg-zinc-200 dark:bg-zinc-700 text-zinc-500 dark:text-zinc-400"}`,children:B.count})]},B.key))})]}),s.jsx("div",{className:"p-6 md:p-10 pt-6",children:s.jsxs(Ee,{mode:"wait",children:[P==="pending"&&s.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:le.length===0?s.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-emerald-50 dark:bg-emerald-500/10 flex items-center justify-center border border-emerald-100 dark:border-emerald-500/10",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-sm font-semibold text-zinc-400 dark:text-zinc-500",children:"Estoque em dia"}),s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:"Nenhuma cotao pendente"})]}):s.jsx("div",{className:"space-y-3",children:le.map(({supplier:B,items:re})=>{var ne,oe;return s.jsxs(Q.div,{className:"flex flex-col md:flex-row md:items-center gap-4 py-5 px-5 rounded-2xl border border-rose-100 dark:border-rose-500/10 bg-rose-50/30 dark:bg-rose-500/5 hover:bg-rose-50/50 dark:hover:bg-rose-500/10 transition-all cursor-pointer group",onClick:()=>D(B,re),whileHover:{scale:1.01},whileTap:{scale:.99},children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-rose-500 to-pink-600 flex items-center justify-center text-white text-lg font-bold shadow-lg shadow-rose-500/25 shrink-0",children:(oe=(ne=B.name)==null?void 0:ne.charAt(0))==null?void 0:oe.toUpperCase()}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:B.name}),s.jsxs("p",{className:"text-[10px] text-rose-600 dark:text-rose-400 truncate",children:[re.length," item",re.length>1?"s":""," abaixo do mnimo"]})]})]}),s.jsx("div",{className:"w-full mt-3 space-y-1.5",children:re.map(ge=>{const be=ge.totalQty||0,Te=ge.maxStock||0,$e=Math.max(0,Te-be);return s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50",children:[s.jsx("span",{className:"text-sm font-medium text-zinc-800 dark:text-zinc-100",children:ge.name}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"text-xs text-zinc-400",children:["Atual: ",be.toFixed(0),ge.unit||""]}),s.jsxs("span",{className:"text-sm font-semibold text-rose-500",children:["+",$e.toFixed(0),ge.unit||""]})]})]},ge.id)})}),s.jsxs("button",{className:"px-5 py-2.5 bg-rose-500 text-white rounded-xl text-[10px] font-bold uppercase tracking-widest shadow-md group-hover:scale-105 transition-all flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Solicitar"]})]},B.id)})})},"pending"),P==="awaiting"&&s.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x.filter(B=>B.status==="sent").length===0?s.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center border border-zinc-200 dark:border-zinc-700",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),s.jsx("p",{className:"text-sm font-semibold text-zinc-400 dark:text-zinc-500",children:"Nenhum email pendente"}),s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:'Envie cotaes na aba "Pendente"'})]}):s.jsxs("div",{className:"space-y-3",children:[x.filter(B=>B.status==="sent").map(B=>{var re,ne;return s.jsxs(Q.div,{className:"flex flex-col md:flex-row md:items-center gap-4 py-5 px-5 rounded-2xl border border-amber-100 dark:border-amber-500/10 bg-amber-50/30 dark:bg-amber-500/5",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[s.jsxs("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white text-lg font-bold shadow-lg shadow-amber-500/25 shrink-0 relative",children:[((ne=(re=B.supplierName)==null?void 0:re.charAt(0))==null?void 0:ne.toUpperCase())||"?",s.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-amber-500 rounded-full flex items-center justify-center animate-pulse",children:s.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:B.supplierName||B.to}),s.jsxs("p",{className:"text-[10px] text-amber-600 dark:text-amber-400 flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Enviado ",new Date(B.sentAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>{const oe=x.map(ge=>ge.id===B.id?{...ge,status:"confirmed"}:ge);N(oe),localStorage.setItem("padoca_sent_emails",JSON.stringify(oe)),S(" Pedido confirmado!","success")},className:"px-5 py-2.5 bg-emerald-500 text-white rounded-xl text-[10px] font-bold uppercase tracking-widest shadow-md hover:scale-105 active:scale-95 transition-all flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Confirmar"]}),s.jsx("button",{onClick:()=>D(n.find(oe=>oe.name===B.supplierName)||{name:B.supplierName,email:B.to},[]),className:"px-5 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all",children:"Reenviar"})]})]},B.id)}),c&&s.jsxs("div",{className:"mt-6 p-4 rounded-2xl bg-indigo-50 dark:bg-indigo-500/10 border border-indigo-100 dark:border-indigo-500/20 flex items-center gap-3",children:[s.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-500 flex items-center justify-center shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-white animate-pulse",viewBox:"0 0 24 24",fill:"currentColor",children:s.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"})})}),s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-bold text-indigo-700 dark:text-indigo-300",children:"Gmail Monitorando"}),s.jsx("p",{className:"text-[10px] text-indigo-500 dark:text-indigo-400",children:"Respostas so detectadas automaticamente"})]})]})]})},"awaiting"),P==="delivered"&&s.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x.filter(B=>B.status==="delivered").length===0?s.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center border border-zinc-200 dark:border-zinc-700",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),s.jsx("p",{className:"text-sm font-semibold text-zinc-400 dark:text-zinc-500",children:"Nenhum pedido entregue"}),s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:'Confirme pedidos na aba "Aguardando"'})]}):s.jsx("div",{className:"space-y-2",children:x.filter(B=>B.status==="delivered").map(B=>s.jsxs(Q.div,{className:"flex items-center gap-4 py-4 px-5 rounded-2xl border border-emerald-100 dark:border-emerald-500/10 bg-emerald-50/30 dark:bg-emerald-500/5",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500 flex items-center justify-center shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:B.supplierName||B.to}),s.jsx("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-400",children:B.subject})]}),s.jsxs("div",{className:"text-right shrink-0",children:[s.jsx("p",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400",children:" Entregue"}),s.jsx("p",{className:"text-[9px] text-zinc-400",children:new Date(B.sentAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})})]})]},B.id))})},"delivered"),P==="history"&&s.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:x.length===0?s.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center border border-zinc-200 dark:border-zinc-700",children:s.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("p",{className:"text-sm font-semibold text-zinc-400 dark:text-zinc-500",children:"Nenhum registro"}),s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:"As movimentaes aparecero aqui"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 py-3 mb-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest border-b border-zinc-100 dark:border-white/5",children:[s.jsx("div",{className:"col-span-1",children:"Status"}),s.jsx("div",{className:"col-span-3",children:"Fornecedor"}),s.jsx("div",{className:"col-span-3",children:"Itens"}),s.jsx("div",{className:"col-span-2",children:"Enviado"}),s.jsx("div",{className:"col-span-2",children:"Atualizado"}),s.jsx("div",{className:"col-span-1 text-right",children:"Ao"})]}),s.jsx("div",{className:"space-y-2",children:x.slice(0,10).map(B=>{var oe,ge,be;const re={sent:{color:"amber",icon:"",label:"Aguardando"},replied:{color:"blue",icon:"",label:"Respondido"},confirmed:{color:"indigo",icon:"",label:"Confirmado"},delivered:{color:"emerald",icon:"",label:"Entregue"}},ne=re[B.status]||re.sent;return s.jsxs(Q.div,{className:"grid grid-cols-1 md:grid-cols-12 gap-3 md:gap-4 p-4 rounded-2xl bg-zinc-50 dark:bg-white/[0.02] border border-zinc-100 dark:border-white/5",initial:{opacity:0},animate:{opacity:1},children:[s.jsxs("div",{className:"md:col-span-1 flex items-center gap-2",children:[s.jsx("div",{className:`w-8 h-8 rounded-lg bg-${ne.color}-100 dark:bg-${ne.color}-500/10 flex items-center justify-center text-sm shrink-0`,children:ne.icon}),s.jsx("span",{className:`md:hidden text-[10px] font-bold text-${ne.color}-600 dark:text-${ne.color}-400 uppercase`,children:ne.label})]}),s.jsxs("div",{className:"md:col-span-3 flex items-center gap-3",children:[s.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-zinc-500 to-zinc-600 flex items-center justify-center text-white text-sm font-bold shadow shrink-0",children:((ge=(oe=B.supplierName)==null?void 0:oe.charAt(0))==null?void 0:ge.toUpperCase())||"?"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:B.supplierName||"Fornecedor"}),s.jsx("p",{className:"text-[10px] text-zinc-400 truncate",children:B.to})]})]}),s.jsxs("div",{className:"md:col-span-3 flex flex-wrap gap-1.5 items-center",children:[(B.itemNames||[]).slice(0,2).map((Te,$e)=>s.jsx("span",{className:"px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded-md text-[9px] font-medium text-zinc-600 dark:text-zinc-400 truncate max-w-[80px]",children:Te},$e)),(((be=B.itemNames)==null?void 0:be.length)||0)>2&&s.jsxs("span",{className:"text-[9px] text-zinc-400",children:["+",B.itemNames.length-2]}),(!B.itemNames||B.itemNames.length===0)&&s.jsx("span",{className:"text-[10px] text-zinc-300 dark:text-zinc-600",children:""})]}),s.jsx("div",{className:"md:col-span-2 flex items-center",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-[11px] font-medium text-zinc-600 dark:text-zinc-300",children:new Date(B.sentAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}),s.jsx("p",{className:"text-[9px] text-zinc-400",children:new Date(B.sentAt).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})]})}),s.jsx("div",{className:"md:col-span-2 flex items-center",children:s.jsxs("div",{children:[s.jsx("p",{className:`text-[11px] font-medium text-${ne.color}-600 dark:text-${ne.color}-400`,children:ne.label}),s.jsx("p",{className:"text-[9px] text-zinc-400",children:B.deliveredAt?new Date(B.deliveredAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}):""})]})}),s.jsxs("div",{className:"md:col-span-1 flex items-center justify-end",children:[B.status==="sent"&&s.jsx("button",{onClick:()=>{const Te=x.map($e=>$e.id===B.id?{...$e,status:"confirmed"}:$e);N(Te),localStorage.setItem("padoca_sent_emails",JSON.stringify(Te)),S(" Confirmado!","success")},className:"p-2 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 rounded-lg transition-colors group",title:"Confirmar recebimento",children:s.jsx("svg",{className:"w-4 h-4 text-zinc-400 group-hover:text-emerald-500 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),B.status==="delivered"&&s.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center",children:s.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})]},B.id)})}),x.length>10&&s.jsx("div",{className:"mt-6 pt-4 border-t border-zinc-100 dark:border-white/5 text-center",children:s.jsxs("p",{className:"text-[10px] text-zinc-400",children:["Mostrando 10 de ",x.length," registros"]})})]})},"history")]})})]}),s.jsx(Ee,{children:b&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>j(!1)}),s.jsxs(Q.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-lg rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[85vh]",children:[s.jsx(wD,{}),s.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:s.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),s.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:"Compor Email"}),s.jsx("p",{className:"text-xs text-zinc-500",children:R==null?void 0:R.name})]}),s.jsx("button",{onClick:()=>j(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:s.jsxs("div",{className:"space-y-6 px-4 animate-fade-in",children:[s.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Para"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:V.to,onChange:B=>v(re=>({...re,to:B.target.value})),placeholder:"email@fornecedor.com"})]}),s.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[s.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Assunto"}),s.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:V.subject,onChange:B=>v(re=>({...re,subject:B.target.value})),placeholder:"Assunto do email"})]}),s.jsxs("div",{className:"px-4 py-3",children:[s.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Mensagem"}),s.jsx("textarea",{className:"w-full bg-transparent border-none py-1 text-sm font-medium text-zinc-700 dark:text-zinc-300 outline-none resize-none leading-relaxed min-h-[200px]",value:V.body,onChange:B=>v(re=>({...re,body:B.target.value})),placeholder:"Contedo do email..."})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[s.jsx("button",{onClick:ee,disabled:$||!V.to,className:`w-full py-4 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg transition-all flex items-center justify-center gap-2 ${$?"bg-emerald-500 text-white cursor-wait":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 active:scale-95"} disabled:opacity-50`,children:$?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Enviar Email"]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsx("button",{onClick:fe,className:"py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Copiar"}),s.jsx("button",{onClick:()=>j(!1),className:"py-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-2xl transition-all",children:"Cancelar"})]})]})]})})]})]})}),se&&O&&rt.createPortal(s.jsx(Ee,{children:s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",onClick:()=>T(!1),children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/60 backdrop-blur-sm"}),s.jsxs(Q.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"relative bg-white dark:bg-zinc-900 w-full max-w-sm rounded-3xl shadow-2xl border border-zinc-200/50 dark:border-white/10 overflow-hidden text-center p-8",onClick:B=>B.stopPropagation(),children:[s.jsx(Q.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:500,damping:25},className:"w-20 h-20 mx-auto mb-6 rounded-full bg-emerald-500 flex items-center justify-center shadow-xl shadow-emerald-500/30",children:s.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),s.jsx(Q.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Email Enviado!"}),s.jsxs(Q.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:["Cotao enviada para",s.jsx("br",{}),s.jsx("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:O.supplierName||O.to})]}),s.jsx(Q.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-2",children:s.jsx("button",{onClick:()=>T(!1),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Continuar"})})]})]},"success-modal")}),document.body),s.jsx(Ee,{children:C&&rt.createPortal(s.jsxs(Q.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${C.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":C.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[s.jsx("div",{className:`w-2 h-2 rounded-full ${C.type==="error"?"bg-white animate-pulse":C.type==="success"?"bg-white":"bg-indigo-400"}`}),s.jsx("span",{className:"text-sm font-semibold tracking-tight",children:C.message})]}),document.body)})]})}const _h=[{key:"ai",label:"IA",icon:ID},{key:"kanban",label:"Kanban",icon:jD},{key:"recipes",label:"Receitas",icon:ND},{key:"products",label:"Produtos",icon:TD},{key:"inventory",label:"Estoque",icon:_D},{key:"suppliers",label:"Fornecedores",icon:SD},{key:"costs",label:"Financeiro",icon:zD},{key:"ficha",label:"Ficha",icon:CD},{key:"calculator",label:"Produo",icon:ED}];function jD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function ND({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function _D({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function zD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function CD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function ED({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}function SD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}function TD({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}function ID({active:t}){return s.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}const Ko={type:"spring",stiffness:500,damping:35,mass:.8},AD={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function PD(){var d;const[t,e]=k.useState("pct"),[n,r]=k.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[i,o]=k.useState(!1),[a,l]=k.useState(!1);k.useEffect(()=>{o(!0)},[]);const c=h=>{if(h===n){l(!1);return}r(h),l(!1),localStorage.setItem("padoca_view",h)};return(d=_h.find(h=>h.key===n))!=null&&d.label,s.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${i?"opacity-100":"opacity-0"}`,children:[s.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[s.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),s.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),s.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[s.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-3 pb-2 mb-2 md:relative md:pt-8 md:pb-4 md:mb-6",children:[s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),s.jsxs("div",{className:"relative flex flex-col gap-0 md:gap-5",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...Ko},children:[s.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),s.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),s.jsx("button",{onClick:()=>l(!a),className:"relative w-11 h-11 flex items-center justify-center -mr-2 md:hidden","aria-label":"Menu",children:s.jsxs("div",{className:"relative w-[18px] h-[10px]",children:[s.jsx(Q.span,{animate:a?{rotate:45,y:4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute top-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"}),s.jsx(Q.span,{animate:a?{rotate:-45,y:-4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute bottom-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"})]})}),s.jsx(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...Ko},className:"hidden md:flex items-center gap-3",children:s.jsx(Ee,{mode:"wait",children:n==="calculator"&&s.jsx(Q.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:Ko,children:s.jsx(Yy,{value:t,onChange:e})})})})]}),s.jsx(Ee,{children:a&&s.jsxs(Q.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.25},className:"fixed inset-0 z-[9999] bg-white/95 dark:bg-black/95 backdrop-blur-xl md:hidden",style:{top:0},children:[s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx(Q.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1},onClick:()=>l(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800","aria-label":"Close",children:s.jsx("svg",{className:"w-5 h-5 text-zinc-600 dark:text-zinc-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})}),s.jsxs("div",{className:"flex flex-col justify-center h-full px-6 pb-20",children:[s.jsx(Q.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Navegao"}),s.jsx("div",{className:"space-y-1",children:_h.map(({key:h,label:f,icon:m},y)=>{const _=n===h;return s.jsxs(Q.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:y*.04,duration:.25,ease:[.25,.46,.45,.94]},onClick:()=>c(h),className:`w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all ${_?"bg-indigo-50 dark:bg-white/10 text-indigo-600 dark:text-white":"text-zinc-600 dark:text-zinc-400 active:bg-zinc-100 dark:active:bg-white/5"}`,children:[s.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${_?"bg-indigo-500 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400"}`,children:s.jsx(m,{active:_})}),s.jsx("span",{className:"text-[17px] font-semibold tracking-tight",children:f}),_&&s.jsx(Q.div,{layoutId:"mobile-active-check",className:"ml-auto",children:s.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]},h)})})]}),s.jsx(Q.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.35},className:"absolute bottom-6 left-0 right-0 text-center",children:s.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-700 uppercase tracking-widest font-medium",children:"Padoca Pizza  2024"})})]})}),s.jsxs("nav",{className:"relative hidden md:block",children:[s.jsx(Q.nav,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...Ko},className:"inline-flex items-center p-1.5 bg-white/90 dark:bg-zinc-900/90 backdrop-blur-2xl rounded-2xl border border-zinc-200/50 dark:border-white/10 shadow-lg",children:_h.map(({key:h,label:f,icon:m})=>{const y=n===h;return s.jsxs("button",{onClick:()=>c(h),className:`relative px-4 py-2.5 rounded-xl transition-colors duration-200 ${y?"text-indigo-600 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[y&&s.jsx(Q.div,{layoutId:"nav-active-desktop",className:"absolute inset-0 bg-indigo-50 dark:bg-white/10 rounded-xl",transition:{type:"spring",stiffness:400,damping:30}}),s.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[s.jsx(m,{active:y}),s.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:f})]})]},h)})}),s.jsx(Ee,{mode:"wait",children:n==="calculator"&&s.jsx(Q.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:Ko,className:"md:hidden flex-shrink-0 mt-3",children:s.jsx(Yy,{value:t,onChange:e})})})]})]})]}),s.jsx(Ee,{mode:"wait",children:s.jsx(Q.main,{initial:"initial",animate:"enter",exit:"exit",variants:AD,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="ai"?s.jsx(kD,{}):n==="kanban"?s.jsx(rD,{}):n==="recipes"?s.jsx(XR,{}):n==="products"?s.jsx(mD,{}):n==="inventory"?s.jsx(sR,{}):n==="suppliers"?s.jsx(dD,{}):n==="costs"?s.jsx(rR,{}):n==="ficha"?s.jsx(aR,{}):s.jsx(dR,{inputMode:t,setInputMode:e})},n)})]})]})}class RD extends In.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:s.jsxs("div",{className:"max-w-md text-center",children:[s.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),s.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),s.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}zh.createRoot(document.getElementById("root")).render(s.jsx(In.StrictMode,{children:s.jsx(RD,{children:s.jsx(PD,{})})}));
