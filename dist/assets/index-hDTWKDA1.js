(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function u1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var h1={exports:{}},Pd={},m1={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),d4=Symbol.for("react.portal"),u4=Symbol.for("react.fragment"),h4=Symbol.for("react.strict_mode"),m4=Symbol.for("react.profiler"),p4=Symbol.for("react.provider"),f4=Symbol.for("react.context"),g4=Symbol.for("react.forward_ref"),x4=Symbol.for("react.suspense"),y4=Symbol.for("react.memo"),v4=Symbol.for("react.lazy"),Qg=Symbol.iterator;function b4(t){return t===null||typeof t!="object"?null:(t=Qg&&t[Qg]||t["@@iterator"],typeof t=="function"?t:null)}var p1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f1=Object.assign,g1={};function ya(t,e,n){this.props=t,this.context=e,this.refs=g1,this.updater=n||p1}ya.prototype.isReactComponent={};ya.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ya.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function x1(){}x1.prototype=ya.prototype;function Om(t,e,n){this.props=t,this.context=e,this.refs=g1,this.updater=n||p1}var Fm=Om.prototype=new x1;Fm.constructor=Om;f1(Fm,ya.prototype);Fm.isPureReactComponent=!0;var Yg=Array.isArray,y1=Object.prototype.hasOwnProperty,Bm={current:null},v1={key:!0,ref:!0,__self:!0,__source:!0};function b1(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)y1.call(e,r)&&!v1.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:cl,type:t,key:a,ref:o,props:s,_owner:Bm.current}}function w4(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Um(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function k4(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xg=/\/+/g;function Du(t,e){return typeof t=="object"&&t!==null&&t.key!=null?k4(""+t.key):e.toString(36)}function uc(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case d4:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Du(o,0):r,Yg(s)?(n="",t!=null&&(n=t.replace(Xg,"$&/")+"/"),uc(s,e,n,"",function(u){return u})):s!=null&&(Um(s)&&(s=w4(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Yg(t))for(var l=0;l<t.length;l++){a=t[l];var c=r+Du(a,l);o+=uc(a,e,n,c,s)}else if(c=b4(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=r+Du(a,l++),o+=uc(a,e,n,c,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Dl(t,e,n){if(t==null)return t;var r=[],s=0;return uc(t,r,"","",function(a){return e.call(n,a,s++)}),r}function j4(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var un={current:null},hc={transition:null},N4={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:hc,ReactCurrentOwner:Bm};function w1(){throw Error("act(...) is not supported in production builds of React.")}Oe.Children={map:Dl,forEach:function(t,e,n){Dl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dl(t,function(){e++}),e},toArray:function(t){return Dl(t,function(e){return e})||[]},only:function(t){if(!Um(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=ya;Oe.Fragment=u4;Oe.Profiler=m4;Oe.PureComponent=Om;Oe.StrictMode=h4;Oe.Suspense=x4;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N4;Oe.act=w1;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=f1({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Bm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)y1.call(e,c)&&!v1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:cl,type:t.type,key:s,ref:a,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:f4,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:p4,_context:t},t.Consumer=t};Oe.createElement=b1;Oe.createFactory=function(t){var e=b1.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:g4,render:t}};Oe.isValidElement=Um;Oe.lazy=function(t){return{$$typeof:v4,_payload:{_status:-1,_result:t},_init:j4}};Oe.memo=function(t,e){return{$$typeof:y4,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=hc.transition;hc.transition={};try{t()}finally{hc.transition=e}};Oe.unstable_act=w1;Oe.useCallback=function(t,e){return un.current.useCallback(t,e)};Oe.useContext=function(t){return un.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return un.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return un.current.useEffect(t,e)};Oe.useId=function(){return un.current.useId()};Oe.useImperativeHandle=function(t,e,n){return un.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return un.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return un.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return un.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return un.current.useReducer(t,e,n)};Oe.useRef=function(t){return un.current.useRef(t)};Oe.useState=function(t){return un.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return un.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return un.current.useTransition()};Oe.version="18.3.1";m1.exports=Oe;var k=m1.exports;const $n=u1(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z4=k,_4=Symbol.for("react.element"),C4=Symbol.for("react.fragment"),E4=Object.prototype.hasOwnProperty,S4=z4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,T4={key:!0,ref:!0,__self:!0,__source:!0};function k1(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)E4.call(e,r)&&!T4.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:_4,type:t,key:a,ref:o,props:s,_owner:S4.current}}Pd.Fragment=C4;Pd.jsx=k1;Pd.jsxs=k1;h1.exports=Pd;var i=h1.exports,qh={},j1={exports:{}},Tn={},N1={exports:{}},z1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,oe){var le=J.length;J.push(oe);e:for(;0<le;){var ke=le-1>>>1,U=J[ke];if(0<s(U,oe))J[ke]=oe,J[le]=U,le=ke;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var oe=J[0],le=J.pop();if(le!==oe){J[0]=le;e:for(var ke=0,U=J.length,se=U>>>1;ke<se;){var A=2*(ke+1)-1,q=J[A],$=A+1,re=J[$];if(0>s(q,le))$<U&&0>s(re,q)?(J[ke]=re,J[$]=le,ke=$):(J[ke]=q,J[A]=le,ke=A);else if($<U&&0>s(re,le))J[ke]=re,J[$]=le,ke=$;else break e}}return oe}function s(J,oe){var le=J.sortIndex-oe.sortIndex;return le!==0?le:J.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,p=null,m=3,y=!1,j=!1,_=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(J){for(var oe=n(u);oe!==null;){if(oe.callback===null)r(u);else if(oe.startTime<=J)r(u),oe.sortIndex=oe.expirationTime,e(c,oe);else break;oe=n(u)}}function P(J){if(_=!1,N(J),!j)if(n(c)!==null)j=!0,je(L);else{var oe=n(u);oe!==null&&de(P,oe.startTime-J)}}function L(J,oe){j=!1,_&&(_=!1,v(g),g=-1),y=!0;var le=m;try{for(N(oe),p=n(c);p!==null&&(!(p.expirationTime>oe)||J&&!D());){var ke=p.callback;if(typeof ke=="function"){p.callback=null,m=p.priorityLevel;var U=ke(p.expirationTime<=oe);oe=t.unstable_now(),typeof U=="function"?p.callback=U:p===n(c)&&r(c),N(oe)}else r(c);p=n(c)}if(p!==null)var se=!0;else{var A=n(u);A!==null&&de(P,A.startTime-oe),se=!1}return se}finally{p=null,m=le,y=!1}}var R=!1,b=null,g=-1,z=5,C=-1;function D(){return!(t.unstable_now()-C<z)}function M(){if(b!==null){var J=t.unstable_now();C=J;var oe=!0;try{oe=b(!0,J)}finally{oe?I():(R=!1,b=null)}}else R=!1}var I;if(typeof w=="function")I=function(){w(M)};else if(typeof MessageChannel<"u"){var xe=new MessageChannel,ve=xe.port2;xe.port1.onmessage=M,I=function(){ve.postMessage(null)}}else I=function(){T(M,0)};function je(J){b=J,R||(R=!0,I())}function de(J,oe){g=T(function(){J(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){j||y||(j=!0,je(L))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(J){switch(m){case 1:case 2:case 3:var oe=3;break;default:oe=m}var le=m;m=oe;try{return J()}finally{m=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,oe){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var le=m;m=J;try{return oe()}finally{m=le}},t.unstable_scheduleCallback=function(J,oe,le){var ke=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?ke+le:ke):le=ke,J){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=le+U,J={id:h++,callback:oe,priorityLevel:J,startTime:le,expirationTime:U,sortIndex:-1},le>ke?(J.sortIndex=le,e(u,J),n(c)===null&&J===n(u)&&(_?(v(g),g=-1):_=!0,de(P,le-ke))):(J.sortIndex=U,e(c,J),j||y||(j=!0,je(L))),J},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(J){var oe=m;return function(){var le=m;m=oe;try{return J.apply(this,arguments)}finally{m=le}}}})(z1);N1.exports=z1;var I4=N1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A4=k,Sn=I4;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _1=new Set,Ao={};function ms(t,e){na(t,e),na(t+"Capture",e)}function na(t,e){for(Ao[t]=e,t=0;t<e.length;t++)_1.add(e[t])}var Rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wh=Object.prototype.hasOwnProperty,P4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jg={},Zg={};function R4(t){return Wh.call(Zg,t)?!0:Wh.call(Jg,t)?!1:P4.test(t)?Zg[t]=!0:(Jg[t]=!0,!1)}function D4(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function M4(t,e,n,r){if(e===null||typeof e>"u"||D4(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qt[t]=new hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];qt[e]=new hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qt[t]=new hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qt[t]=new hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qt[t]=new hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qt[t]=new hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qt[t]=new hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qt[t]=new hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qt[t]=new hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var $m=/[\-:]([a-z])/g;function qm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($m,qm);qt[e]=new hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($m,qm);qt[e]=new hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($m,qm);qt[e]=new hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qt[t]=new hn(t,1,!1,t.toLowerCase(),null,!1,!1)});qt.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qt[t]=new hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wm(t,e,n,r){var s=qt.hasOwnProperty(e)?qt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(M4(e,n,s,r)&&(n=null),r||s===null?R4(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Wr=A4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ml=Symbol.for("react.element"),Es=Symbol.for("react.portal"),Ss=Symbol.for("react.fragment"),Hm=Symbol.for("react.strict_mode"),Hh=Symbol.for("react.profiler"),C1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),Gm=Symbol.for("react.forward_ref"),Gh=Symbol.for("react.suspense"),Kh=Symbol.for("react.suspense_list"),Km=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),S1=Symbol.for("react.offscreen"),ex=Symbol.iterator;function qa(t){return t===null||typeof t!="object"?null:(t=ex&&t[ex]||t["@@iterator"],typeof t=="function"?t:null)}var mt=Object.assign,Mu;function ro(t){if(Mu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mu=e&&e[1]||""}return`
`+Mu+t}var Lu=!1;function Vu(t,e){if(!t||Lu)return"";Lu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Lu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ro(t):""}function L4(t){switch(t.tag){case 5:return ro(t.type);case 16:return ro("Lazy");case 13:return ro("Suspense");case 19:return ro("SuspenseList");case 0:case 2:case 15:return t=Vu(t.type,!1),t;case 11:return t=Vu(t.type.render,!1),t;case 1:return t=Vu(t.type,!0),t;default:return""}}function Qh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ss:return"Fragment";case Es:return"Portal";case Hh:return"Profiler";case Hm:return"StrictMode";case Gh:return"Suspense";case Kh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case E1:return(t.displayName||"Context")+".Consumer";case C1:return(t._context.displayName||"Context")+".Provider";case Gm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Km:return e=t.displayName||null,e!==null?e:Qh(t.type)||"Memo";case ti:e=t._payload,t=t._init;try{return Qh(t(e))}catch{}}return null}function V4(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qh(e);case 8:return e===Hm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function T1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O4(t){var e=T1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ll(t){t._valueTracker||(t._valueTracker=O4(t))}function I1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=T1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Lc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Yh(t,e){var n=e.checked;return mt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=bi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function A1(t,e){e=e.checked,e!=null&&Wm(t,"checked",e,!1)}function Xh(t,e){A1(t,e);var n=bi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Jh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Jh(t,e.type,bi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Jh(t,e,n){(e!=="number"||Lc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var io=Array.isArray;function Ws(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+bi(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Zh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return mt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ae(92));if(io(n)){if(1<n.length)throw Error(ae(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bi(n)}}function P1(t,e){var n=bi(e.value),r=bi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ix(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function R1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function e0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?R1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vl,D1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vl=Vl||document.createElement("div"),Vl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var mo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F4=["Webkit","ms","Moz","O"];Object.keys(mo).forEach(function(t){F4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),mo[e]=mo[t]})});function M1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||mo.hasOwnProperty(t)&&mo[t]?(""+e).trim():e+"px"}function L1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=M1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var B4=mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function t0(t,e){if(e){if(B4[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function n0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var r0=null;function Qm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var i0=null,Hs=null,Gs=null;function sx(t){if(t=hl(t)){if(typeof i0!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=Vd(e),i0(t.stateNode,t.type,e))}}function V1(t){Hs?Gs?Gs.push(t):Gs=[t]:Hs=t}function O1(){if(Hs){var t=Hs,e=Gs;if(Gs=Hs=null,sx(t),e)for(t=0;t<e.length;t++)sx(e[t])}}function F1(t,e){return t(e)}function B1(){}var Ou=!1;function U1(t,e,n){if(Ou)return t(e,n);Ou=!0;try{return F1(t,e,n)}finally{Ou=!1,(Hs!==null||Gs!==null)&&(B1(),O1())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var r=Vd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ae(231,e,typeof n));return n}var s0=!1;if(Rr)try{var Wa={};Object.defineProperty(Wa,"passive",{get:function(){s0=!0}}),window.addEventListener("test",Wa,Wa),window.removeEventListener("test",Wa,Wa)}catch{s0=!1}function U4(t,e,n,r,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var po=!1,Vc=null,Oc=!1,a0=null,$4={onError:function(t){po=!0,Vc=t}};function q4(t,e,n,r,s,a,o,l,c){po=!1,Vc=null,U4.apply($4,arguments)}function W4(t,e,n,r,s,a,o,l,c){if(q4.apply(this,arguments),po){if(po){var u=Vc;po=!1,Vc=null}else throw Error(ae(198));Oc||(Oc=!0,a0=u)}}function ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ax(t){if(ps(t)!==t)throw Error(ae(188))}function H4(t){var e=t.alternate;if(!e){if(e=ps(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return ax(s),t;if(a===r)return ax(s),e;a=a.sibling}throw Error(ae(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?t:e}function q1(t){return t=H4(t),t!==null?W1(t):null}function W1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=W1(t);if(e!==null)return e;t=t.sibling}return null}var H1=Sn.unstable_scheduleCallback,ox=Sn.unstable_cancelCallback,G4=Sn.unstable_shouldYield,K4=Sn.unstable_requestPaint,bt=Sn.unstable_now,Q4=Sn.unstable_getCurrentPriorityLevel,Ym=Sn.unstable_ImmediatePriority,G1=Sn.unstable_UserBlockingPriority,Fc=Sn.unstable_NormalPriority,Y4=Sn.unstable_LowPriority,K1=Sn.unstable_IdlePriority,Rd=null,dr=null;function X4(t){if(dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(Rd,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:ez,J4=Math.log,Z4=Math.LN2;function ez(t){return t>>>=0,t===0?32:31-(J4(t)/Z4|0)|0}var Ol=64,Fl=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Bc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=so(l):(a&=o,a!==0&&(r=so(a)))}else o=n&~s,o!==0?r=so(o):a!==0&&(r=so(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),s=1<<n,r|=t[n],e&=~s;return r}function tz(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-er(a),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=tz(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function o0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q1(){var t=Ol;return Ol<<=1,!(Ol&4194240)&&(Ol=64),t}function Fu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function dl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function rz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-er(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function Xm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ye=0;function Y1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X1,Jm,J1,Z1,ew,l0=!1,Bl=[],li=null,ci=null,di=null,Do=new Map,Mo=new Map,ri=[],iz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lx(t,e){switch(t){case"focusin":case"focusout":li=null;break;case"dragenter":case"dragleave":ci=null;break;case"mouseover":case"mouseout":di=null;break;case"pointerover":case"pointerout":Do.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(e.pointerId)}}function Ha(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=hl(e),e!==null&&Jm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sz(t,e,n,r,s){switch(e){case"focusin":return li=Ha(li,t,e,n,r,s),!0;case"dragenter":return ci=Ha(ci,t,e,n,r,s),!0;case"mouseover":return di=Ha(di,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Do.set(a,Ha(Do.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Mo.set(a,Ha(Mo.get(a)||null,t,e,n,r,s)),!0}return!1}function tw(t){var e=Wi(t.target);if(e!==null){var n=ps(e);if(n!==null){if(e=n.tag,e===13){if(e=$1(n),e!==null){t.blockedOn=e,ew(t.priority,function(){J1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function mc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=c0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);r0=r,n.target.dispatchEvent(r),r0=null}else return e=hl(n),e!==null&&Jm(e),t.blockedOn=n,!1;e.shift()}return!0}function cx(t,e,n){mc(t)&&n.delete(e)}function az(){l0=!1,li!==null&&mc(li)&&(li=null),ci!==null&&mc(ci)&&(ci=null),di!==null&&mc(di)&&(di=null),Do.forEach(cx),Mo.forEach(cx)}function Ga(t,e){t.blockedOn===e&&(t.blockedOn=null,l0||(l0=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,az)))}function Lo(t){function e(s){return Ga(s,t)}if(0<Bl.length){Ga(Bl[0],t);for(var n=1;n<Bl.length;n++){var r=Bl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(li!==null&&Ga(li,t),ci!==null&&Ga(ci,t),di!==null&&Ga(di,t),Do.forEach(e),Mo.forEach(e),n=0;n<ri.length;n++)r=ri[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ri.length&&(n=ri[0],n.blockedOn===null);)tw(n),n.blockedOn===null&&ri.shift()}var Ks=Wr.ReactCurrentBatchConfig,Uc=!0;function oz(t,e,n,r){var s=Ye,a=Ks.transition;Ks.transition=null;try{Ye=1,Zm(t,e,n,r)}finally{Ye=s,Ks.transition=a}}function lz(t,e,n,r){var s=Ye,a=Ks.transition;Ks.transition=null;try{Ye=4,Zm(t,e,n,r)}finally{Ye=s,Ks.transition=a}}function Zm(t,e,n,r){if(Uc){var s=c0(t,e,n,r);if(s===null)Yu(t,e,r,$c,n),lx(t,r);else if(sz(s,t,e,n,r))r.stopPropagation();else if(lx(t,r),e&4&&-1<iz.indexOf(t)){for(;s!==null;){var a=hl(s);if(a!==null&&X1(a),a=c0(t,e,n,r),a===null&&Yu(t,e,r,$c,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Yu(t,e,r,null,n)}}var $c=null;function c0(t,e,n,r){if($c=null,t=Qm(r),t=Wi(t),t!==null)if(e=ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $c=t,null}function nw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q4()){case Ym:return 1;case G1:return 4;case Fc:case Y4:return 16;case K1:return 536870912;default:return 16}default:return 16}}var si=null,ep=null,pc=null;function rw(){if(pc)return pc;var t,e=ep,n=e.length,r,s="value"in si?si.value:si.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return pc=s.slice(t,1<r?1-r:void 0)}function fc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ul(){return!0}function dx(){return!1}function In(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ul:dx,this.isPropagationStopped=dx,this}return mt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),e}var va={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=In(va),ul=mt({},va,{view:0,detail:0}),cz=In(ul),Bu,Uu,Ka,Dd=mt({},ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ka&&(Ka&&t.type==="mousemove"?(Bu=t.screenX-Ka.screenX,Uu=t.screenY-Ka.screenY):Uu=Bu=0,Ka=t),Bu)},movementY:function(t){return"movementY"in t?t.movementY:Uu}}),ux=In(Dd),dz=mt({},Dd,{dataTransfer:0}),uz=In(dz),hz=mt({},ul,{relatedTarget:0}),$u=In(hz),mz=mt({},va,{animationName:0,elapsedTime:0,pseudoElement:0}),pz=In(mz),fz=mt({},va,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gz=In(fz),xz=mt({},va,{data:0}),hx=In(xz),yz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bz[t])?!!e[t]:!1}function np(){return wz}var kz=mt({},ul,{key:function(t){if(t.key){var e=yz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?fc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jz=In(kz),Nz=mt({},Dd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mx=In(Nz),zz=mt({},ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),_z=In(zz),Cz=mt({},va,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ez=In(Cz),Sz=mt({},Dd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Tz=In(Sz),Iz=[9,13,27,32],rp=Rr&&"CompositionEvent"in window,fo=null;Rr&&"documentMode"in document&&(fo=document.documentMode);var Az=Rr&&"TextEvent"in window&&!fo,iw=Rr&&(!rp||fo&&8<fo&&11>=fo),px=" ",fx=!1;function sw(t,e){switch(t){case"keyup":return Iz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ts=!1;function Pz(t,e){switch(t){case"compositionend":return aw(e);case"keypress":return e.which!==32?null:(fx=!0,px);case"textInput":return t=e.data,t===px&&fx?null:t;default:return null}}function Rz(t,e){if(Ts)return t==="compositionend"||!rp&&sw(t,e)?(t=rw(),pc=ep=si=null,Ts=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iw&&e.locale!=="ko"?null:e.data;default:return null}}var Dz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gx(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Dz[t.type]:e==="textarea"}function ow(t,e,n,r){V1(r),e=qc(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var go=null,Vo=null;function Mz(t){yw(t,0)}function Md(t){var e=Ps(t);if(I1(e))return t}function Lz(t,e){if(t==="change")return e}var lw=!1;if(Rr){var qu;if(Rr){var Wu="oninput"in document;if(!Wu){var xx=document.createElement("div");xx.setAttribute("oninput","return;"),Wu=typeof xx.oninput=="function"}qu=Wu}else qu=!1;lw=qu&&(!document.documentMode||9<document.documentMode)}function yx(){go&&(go.detachEvent("onpropertychange",cw),Vo=go=null)}function cw(t){if(t.propertyName==="value"&&Md(Vo)){var e=[];ow(e,Vo,t,Qm(t)),U1(Mz,e)}}function Vz(t,e,n){t==="focusin"?(yx(),go=e,Vo=n,go.attachEvent("onpropertychange",cw)):t==="focusout"&&yx()}function Oz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Md(Vo)}function Fz(t,e){if(t==="click")return Md(e)}function Bz(t,e){if(t==="input"||t==="change")return Md(e)}function Uz(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nr=typeof Object.is=="function"?Object.is:Uz;function Oo(t,e){if(nr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Wh.call(e,s)||!nr(t[s],e[s]))return!1}return!0}function vx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function bx(t,e){var n=vx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vx(n)}}function dw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function uw(){for(var t=window,e=Lc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Lc(t.document)}return e}function ip(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $z(t){var e=uw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dw(n.ownerDocument.documentElement,n)){if(r!==null&&ip(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=bx(n,a);var o=bx(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qz=Rr&&"documentMode"in document&&11>=document.documentMode,Is=null,d0=null,xo=null,u0=!1;function wx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;u0||Is==null||Is!==Lc(r)||(r=Is,"selectionStart"in r&&ip(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xo&&Oo(xo,r)||(xo=r,r=qc(d0,"onSelect"),0<r.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Is)))}function $l(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var As={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Hu={},hw={};Rr&&(hw=document.createElement("div").style,"AnimationEvent"in window||(delete As.animationend.animation,delete As.animationiteration.animation,delete As.animationstart.animation),"TransitionEvent"in window||delete As.transitionend.transition);function Ld(t){if(Hu[t])return Hu[t];if(!As[t])return t;var e=As[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in hw)return Hu[t]=e[n];return t}var mw=Ld("animationend"),pw=Ld("animationiteration"),fw=Ld("animationstart"),gw=Ld("transitionend"),xw=new Map,kx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ti(t,e){xw.set(t,e),ms(e,[t])}for(var Gu=0;Gu<kx.length;Gu++){var Ku=kx[Gu],Wz=Ku.toLowerCase(),Hz=Ku[0].toUpperCase()+Ku.slice(1);Ti(Wz,"on"+Hz)}Ti(mw,"onAnimationEnd");Ti(pw,"onAnimationIteration");Ti(fw,"onAnimationStart");Ti("dblclick","onDoubleClick");Ti("focusin","onFocus");Ti("focusout","onBlur");Ti(gw,"onTransitionEnd");na("onMouseEnter",["mouseout","mouseover"]);na("onMouseLeave",["mouseout","mouseover"]);na("onPointerEnter",["pointerout","pointerover"]);na("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gz=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function jx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,W4(r,e,void 0,t),t.currentTarget=null}function yw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;jx(s,l,u),a=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;jx(s,l,u),a=c}}}if(Oc)throw t=a0,Oc=!1,a0=null,t}function it(t,e){var n=e[g0];n===void 0&&(n=e[g0]=new Set);var r=t+"__bubble";n.has(r)||(vw(e,t,2,!1),n.add(r))}function Qu(t,e,n){var r=0;e&&(r|=4),vw(n,t,r,e)}var ql="_reactListening"+Math.random().toString(36).slice(2);function Fo(t){if(!t[ql]){t[ql]=!0,_1.forEach(function(n){n!=="selectionchange"&&(Gz.has(n)||Qu(n,!1,t),Qu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ql]||(e[ql]=!0,Qu("selectionchange",!1,e))}}function vw(t,e,n,r){switch(nw(e)){case 1:var s=oz;break;case 4:s=lz;break;default:s=Zm}n=s.bind(null,e,n,t),s=void 0,!s0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yu(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Wi(l),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}l=l.parentNode}}r=r.return}U1(function(){var u=a,h=Qm(n),p=[];e:{var m=xw.get(t);if(m!==void 0){var y=tp,j=t;switch(t){case"keypress":if(fc(n)===0)break e;case"keydown":case"keyup":y=jz;break;case"focusin":j="focus",y=$u;break;case"focusout":j="blur",y=$u;break;case"beforeblur":case"afterblur":y=$u;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ux;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=uz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=_z;break;case mw:case pw:case fw:y=pz;break;case gw:y=Ez;break;case"scroll":y=cz;break;case"wheel":y=Tz;break;case"copy":case"cut":case"paste":y=gz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=mx}var _=(e&4)!==0,T=!_&&t==="scroll",v=_?m!==null?m+"Capture":null:m;_=[];for(var w=u,N;w!==null;){N=w;var P=N.stateNode;if(N.tag===5&&P!==null&&(N=P,v!==null&&(P=Ro(w,v),P!=null&&_.push(Bo(w,P,N)))),T)break;w=w.return}0<_.length&&(m=new y(m,j,null,n,h),p.push({event:m,listeners:_}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==r0&&(j=n.relatedTarget||n.fromElement)&&(Wi(j)||j[Dr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(j=n.relatedTarget||n.toElement,y=u,j=j?Wi(j):null,j!==null&&(T=ps(j),j!==T||j.tag!==5&&j.tag!==6)&&(j=null)):(y=null,j=u),y!==j)){if(_=ux,P="onMouseLeave",v="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=mx,P="onPointerLeave",v="onPointerEnter",w="pointer"),T=y==null?m:Ps(y),N=j==null?m:Ps(j),m=new _(P,w+"leave",y,n,h),m.target=T,m.relatedTarget=N,P=null,Wi(h)===u&&(_=new _(v,w+"enter",j,n,h),_.target=N,_.relatedTarget=T,P=_),T=P,y&&j)t:{for(_=y,v=j,w=0,N=_;N;N=js(N))w++;for(N=0,P=v;P;P=js(P))N++;for(;0<w-N;)_=js(_),w--;for(;0<N-w;)v=js(v),N--;for(;w--;){if(_===v||v!==null&&_===v.alternate)break t;_=js(_),v=js(v)}_=null}else _=null;y!==null&&Nx(p,m,y,_,!1),j!==null&&T!==null&&Nx(p,T,j,_,!0)}}e:{if(m=u?Ps(u):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var L=Lz;else if(gx(m))if(lw)L=Bz;else{L=Oz;var R=Vz}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=Fz);if(L&&(L=L(t,u))){ow(p,L,n,h);break e}R&&R(t,m,u),t==="focusout"&&(R=m._wrapperState)&&R.controlled&&m.type==="number"&&Jh(m,"number",m.value)}switch(R=u?Ps(u):window,t){case"focusin":(gx(R)||R.contentEditable==="true")&&(Is=R,d0=u,xo=null);break;case"focusout":xo=d0=Is=null;break;case"mousedown":u0=!0;break;case"contextmenu":case"mouseup":case"dragend":u0=!1,wx(p,n,h);break;case"selectionchange":if(qz)break;case"keydown":case"keyup":wx(p,n,h)}var b;if(rp)e:{switch(t){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ts?sw(t,n)&&(g="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(g="onCompositionStart");g&&(iw&&n.locale!=="ko"&&(Ts||g!=="onCompositionStart"?g==="onCompositionEnd"&&Ts&&(b=rw()):(si=h,ep="value"in si?si.value:si.textContent,Ts=!0)),R=qc(u,g),0<R.length&&(g=new hx(g,t,null,n,h),p.push({event:g,listeners:R}),b?g.data=b:(b=aw(n),b!==null&&(g.data=b)))),(b=Az?Pz(t,n):Rz(t,n))&&(u=qc(u,"onBeforeInput"),0<u.length&&(h=new hx("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:u}),h.data=b))}yw(p,e)})}function Bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Ro(t,n),a!=null&&r.unshift(Bo(t,a,s)),a=Ro(t,e),a!=null&&r.push(Bo(t,a,s))),t=t.return}return r}function js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Nx(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=Ro(n,a),c!=null&&o.unshift(Bo(n,c,l))):s||(c=Ro(n,a),c!=null&&o.push(Bo(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Kz=/\r\n?/g,Qz=/\u0000|\uFFFD/g;function zx(t){return(typeof t=="string"?t:""+t).replace(Kz,`
`).replace(Qz,"")}function Wl(t,e,n){if(e=zx(e),zx(t)!==e&&n)throw Error(ae(425))}function Wc(){}var h0=null,m0=null;function p0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var f0=typeof setTimeout=="function"?setTimeout:void 0,Yz=typeof clearTimeout=="function"?clearTimeout:void 0,_x=typeof Promise=="function"?Promise:void 0,Xz=typeof queueMicrotask=="function"?queueMicrotask:typeof _x<"u"?function(t){return _x.resolve(null).then(t).catch(Jz)}:f0;function Jz(t){setTimeout(function(){throw t})}function Xu(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Lo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Lo(e)}function ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Cx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ba=Math.random().toString(36).slice(2),cr="__reactFiber$"+ba,Uo="__reactProps$"+ba,Dr="__reactContainer$"+ba,g0="__reactEvents$"+ba,Zz="__reactListeners$"+ba,e_="__reactHandles$"+ba;function Wi(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Dr]||n[cr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Cx(t);t!==null;){if(n=t[cr])return n;t=Cx(t)}return e}t=n,n=t.parentNode}return null}function hl(t){return t=t[cr]||t[Dr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ps(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function Vd(t){return t[Uo]||null}var x0=[],Rs=-1;function Ii(t){return{current:t}}function at(t){0>Rs||(t.current=x0[Rs],x0[Rs]=null,Rs--)}function nt(t,e){Rs++,x0[Rs]=t.current,t.current=e}var wi={},nn=Ii(wi),bn=Ii(!1),rs=wi;function ra(t,e){var n=t.type.contextTypes;if(!n)return wi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function wn(t){return t=t.childContextTypes,t!=null}function Hc(){at(bn),at(nn)}function Ex(t,e,n){if(nn.current!==wi)throw Error(ae(168));nt(nn,e),nt(bn,n)}function bw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ae(108,V4(t)||"Unknown",s));return mt({},n,r)}function Gc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,rs=nn.current,nt(nn,t),nt(bn,bn.current),!0}function Sx(t,e,n){var r=t.stateNode;if(!r)throw Error(ae(169));n?(t=bw(t,e,rs),r.__reactInternalMemoizedMergedChildContext=t,at(bn),at(nn),nt(nn,t)):at(bn),nt(bn,n)}var Sr=null,Od=!1,Ju=!1;function ww(t){Sr===null?Sr=[t]:Sr.push(t)}function t_(t){Od=!0,ww(t)}function Ai(){if(!Ju&&Sr!==null){Ju=!0;var t=0,e=Ye;try{var n=Sr;for(Ye=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Sr=null,Od=!1}catch(s){throw Sr!==null&&(Sr=Sr.slice(t+1)),H1(Ym,Ai),s}finally{Ye=e,Ju=!1}}return null}var Ds=[],Ms=0,Kc=null,Qc=0,Rn=[],Dn=0,is=null,Tr=1,Ir="";function Fi(t,e){Ds[Ms++]=Qc,Ds[Ms++]=Kc,Kc=t,Qc=e}function kw(t,e,n){Rn[Dn++]=Tr,Rn[Dn++]=Ir,Rn[Dn++]=is,is=t;var r=Tr;t=Ir;var s=32-er(r)-1;r&=~(1<<s),n+=1;var a=32-er(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Tr=1<<32-er(e)+s|n<<s|r,Ir=a+t}else Tr=1<<a|n<<s|r,Ir=t}function sp(t){t.return!==null&&(Fi(t,1),kw(t,1,0))}function ap(t){for(;t===Kc;)Kc=Ds[--Ms],Ds[Ms]=null,Qc=Ds[--Ms],Ds[Ms]=null;for(;t===is;)is=Rn[--Dn],Rn[Dn]=null,Ir=Rn[--Dn],Rn[Dn]=null,Tr=Rn[--Dn],Rn[Dn]=null}var Cn=null,_n=null,ct=!1,Xn=null;function jw(t,e){var n=Vn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Tx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Cn=t,_n=ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Cn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=is!==null?{id:Tr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Vn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Cn=t,_n=null,!0):!1;default:return!1}}function y0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function v0(t){if(ct){var e=_n;if(e){var n=e;if(!Tx(t,e)){if(y0(t))throw Error(ae(418));e=ui(n.nextSibling);var r=Cn;e&&Tx(t,e)?jw(r,n):(t.flags=t.flags&-4097|2,ct=!1,Cn=t)}}else{if(y0(t))throw Error(ae(418));t.flags=t.flags&-4097|2,ct=!1,Cn=t}}}function Ix(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Cn=t}function Hl(t){if(t!==Cn)return!1;if(!ct)return Ix(t),ct=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!p0(t.type,t.memoizedProps)),e&&(e=_n)){if(y0(t))throw Nw(),Error(ae(418));for(;e;)jw(t,e),e=ui(e.nextSibling)}if(Ix(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=Cn?ui(t.stateNode.nextSibling):null;return!0}function Nw(){for(var t=_n;t;)t=ui(t.nextSibling)}function ia(){_n=Cn=null,ct=!1}function op(t){Xn===null?Xn=[t]:Xn.push(t)}var n_=Wr.ReactCurrentBatchConfig;function Qa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,t))}return t}function Gl(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ax(t){var e=t._init;return e(t._payload)}function zw(t){function e(v,w){if(t){var N=v.deletions;N===null?(v.deletions=[w],v.flags|=16):N.push(w)}}function n(v,w){if(!t)return null;for(;w!==null;)e(v,w),w=w.sibling;return null}function r(v,w){for(v=new Map;w!==null;)w.key!==null?v.set(w.key,w):v.set(w.index,w),w=w.sibling;return v}function s(v,w){return v=fi(v,w),v.index=0,v.sibling=null,v}function a(v,w,N){return v.index=N,t?(N=v.alternate,N!==null?(N=N.index,N<w?(v.flags|=2,w):N):(v.flags|=2,w)):(v.flags|=1048576,w)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,w,N,P){return w===null||w.tag!==6?(w=sh(N,v.mode,P),w.return=v,w):(w=s(w,N),w.return=v,w)}function c(v,w,N,P){var L=N.type;return L===Ss?h(v,w,N.props.children,P,N.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ti&&Ax(L)===w.type)?(P=s(w,N.props),P.ref=Qa(v,w,N),P.return=v,P):(P=kc(N.type,N.key,N.props,null,v.mode,P),P.ref=Qa(v,w,N),P.return=v,P)}function u(v,w,N,P){return w===null||w.tag!==4||w.stateNode.containerInfo!==N.containerInfo||w.stateNode.implementation!==N.implementation?(w=ah(N,v.mode,P),w.return=v,w):(w=s(w,N.children||[]),w.return=v,w)}function h(v,w,N,P,L){return w===null||w.tag!==7?(w=Zi(N,v.mode,P,L),w.return=v,w):(w=s(w,N),w.return=v,w)}function p(v,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return w=sh(""+w,v.mode,N),w.return=v,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ml:return N=kc(w.type,w.key,w.props,null,v.mode,N),N.ref=Qa(v,null,w),N.return=v,N;case Es:return w=ah(w,v.mode,N),w.return=v,w;case ti:var P=w._init;return p(v,P(w._payload),N)}if(io(w)||qa(w))return w=Zi(w,v.mode,N,null),w.return=v,w;Gl(v,w)}return null}function m(v,w,N,P){var L=w!==null?w.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return L!==null?null:l(v,w,""+N,P);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ml:return N.key===L?c(v,w,N,P):null;case Es:return N.key===L?u(v,w,N,P):null;case ti:return L=N._init,m(v,w,L(N._payload),P)}if(io(N)||qa(N))return L!==null?null:h(v,w,N,P,null);Gl(v,N)}return null}function y(v,w,N,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return v=v.get(N)||null,l(w,v,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ml:return v=v.get(P.key===null?N:P.key)||null,c(w,v,P,L);case Es:return v=v.get(P.key===null?N:P.key)||null,u(w,v,P,L);case ti:var R=P._init;return y(v,w,N,R(P._payload),L)}if(io(P)||qa(P))return v=v.get(N)||null,h(w,v,P,L,null);Gl(w,P)}return null}function j(v,w,N,P){for(var L=null,R=null,b=w,g=w=0,z=null;b!==null&&g<N.length;g++){b.index>g?(z=b,b=null):z=b.sibling;var C=m(v,b,N[g],P);if(C===null){b===null&&(b=z);break}t&&b&&C.alternate===null&&e(v,b),w=a(C,w,g),R===null?L=C:R.sibling=C,R=C,b=z}if(g===N.length)return n(v,b),ct&&Fi(v,g),L;if(b===null){for(;g<N.length;g++)b=p(v,N[g],P),b!==null&&(w=a(b,w,g),R===null?L=b:R.sibling=b,R=b);return ct&&Fi(v,g),L}for(b=r(v,b);g<N.length;g++)z=y(b,v,g,N[g],P),z!==null&&(t&&z.alternate!==null&&b.delete(z.key===null?g:z.key),w=a(z,w,g),R===null?L=z:R.sibling=z,R=z);return t&&b.forEach(function(D){return e(v,D)}),ct&&Fi(v,g),L}function _(v,w,N,P){var L=qa(N);if(typeof L!="function")throw Error(ae(150));if(N=L.call(N),N==null)throw Error(ae(151));for(var R=L=null,b=w,g=w=0,z=null,C=N.next();b!==null&&!C.done;g++,C=N.next()){b.index>g?(z=b,b=null):z=b.sibling;var D=m(v,b,C.value,P);if(D===null){b===null&&(b=z);break}t&&b&&D.alternate===null&&e(v,b),w=a(D,w,g),R===null?L=D:R.sibling=D,R=D,b=z}if(C.done)return n(v,b),ct&&Fi(v,g),L;if(b===null){for(;!C.done;g++,C=N.next())C=p(v,C.value,P),C!==null&&(w=a(C,w,g),R===null?L=C:R.sibling=C,R=C);return ct&&Fi(v,g),L}for(b=r(v,b);!C.done;g++,C=N.next())C=y(b,v,g,C.value,P),C!==null&&(t&&C.alternate!==null&&b.delete(C.key===null?g:C.key),w=a(C,w,g),R===null?L=C:R.sibling=C,R=C);return t&&b.forEach(function(M){return e(v,M)}),ct&&Fi(v,g),L}function T(v,w,N,P){if(typeof N=="object"&&N!==null&&N.type===Ss&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Ml:e:{for(var L=N.key,R=w;R!==null;){if(R.key===L){if(L=N.type,L===Ss){if(R.tag===7){n(v,R.sibling),w=s(R,N.props.children),w.return=v,v=w;break e}}else if(R.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===ti&&Ax(L)===R.type){n(v,R.sibling),w=s(R,N.props),w.ref=Qa(v,R,N),w.return=v,v=w;break e}n(v,R);break}else e(v,R);R=R.sibling}N.type===Ss?(w=Zi(N.props.children,v.mode,P,N.key),w.return=v,v=w):(P=kc(N.type,N.key,N.props,null,v.mode,P),P.ref=Qa(v,w,N),P.return=v,v=P)}return o(v);case Es:e:{for(R=N.key;w!==null;){if(w.key===R)if(w.tag===4&&w.stateNode.containerInfo===N.containerInfo&&w.stateNode.implementation===N.implementation){n(v,w.sibling),w=s(w,N.children||[]),w.return=v,v=w;break e}else{n(v,w);break}else e(v,w);w=w.sibling}w=ah(N,v.mode,P),w.return=v,v=w}return o(v);case ti:return R=N._init,T(v,w,R(N._payload),P)}if(io(N))return j(v,w,N,P);if(qa(N))return _(v,w,N,P);Gl(v,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,w!==null&&w.tag===6?(n(v,w.sibling),w=s(w,N),w.return=v,v=w):(n(v,w),w=sh(N,v.mode,P),w.return=v,v=w),o(v)):n(v,w)}return T}var sa=zw(!0),_w=zw(!1),Yc=Ii(null),Xc=null,Ls=null,lp=null;function cp(){lp=Ls=Xc=null}function dp(t){var e=Yc.current;at(Yc),t._currentValue=e}function b0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Qs(t,e){Xc=t,lp=Ls=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(yn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(lp!==t)if(t={context:t,memoizedValue:e,next:null},Ls===null){if(Xc===null)throw Error(ae(308));Ls=t,Xc.dependencies={lanes:0,firstContext:t}}else Ls=Ls.next=t;return e}var Hi=null;function up(t){Hi===null?Hi=[t]:Hi.push(t)}function Cw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,up(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mr(t,r)}function Mr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ni=!1;function hp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ew(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function hi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ge&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mr(t,n)}return s=r.interleaved,s===null?(e.next=e,up(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mr(t,n)}function gc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xm(t,n)}}function Px(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Jc(t,e,n,r){var s=t.updateQueue;ni=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var p=s.baseState;o=0,h=u=c=null,l=a;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var j=t,_=l;switch(m=e,y=n,_.tag){case 1:if(j=_.payload,typeof j=="function"){p=j.call(y,p,m);break e}p=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=_.payload,m=typeof j=="function"?j.call(y,p,m):j,m==null)break e;p=mt({},p,m);break e;case 2:ni=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=p):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=p}}function Rx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ae(191,s));s.call(r)}}}var ml={},ur=Ii(ml),$o=Ii(ml),qo=Ii(ml);function Gi(t){if(t===ml)throw Error(ae(174));return t}function mp(t,e){switch(nt(qo,e),nt($o,t),nt(ur,ml),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:e0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=e0(e,t)}at(ur),nt(ur,e)}function aa(){at(ur),at($o),at(qo)}function Sw(t){Gi(qo.current);var e=Gi(ur.current),n=e0(e,t.type);e!==n&&(nt($o,t),nt(ur,n))}function pp(t){$o.current===t&&(at(ur),at($o))}var ut=Ii(0);function Zc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zu=[];function fp(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var xc=Wr.ReactCurrentDispatcher,eh=Wr.ReactCurrentBatchConfig,ss=0,ht=null,Tt=null,Mt=null,ed=!1,yo=!1,Wo=0,r_=0;function Gt(){throw Error(ae(321))}function gp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!nr(t[n],e[n]))return!1;return!0}function xp(t,e,n,r,s,a){if(ss=a,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xc.current=t===null||t.memoizedState===null?o_:l_,t=n(r,s),yo){a=0;do{if(yo=!1,Wo=0,25<=a)throw Error(ae(301));a+=1,Mt=Tt=null,e.updateQueue=null,xc.current=c_,t=n(r,s)}while(yo)}if(xc.current=td,e=Tt!==null&&Tt.next!==null,ss=0,Mt=Tt=ht=null,ed=!1,e)throw Error(ae(300));return t}function yp(){var t=Wo!==0;return Wo=0,t}function or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?ht.memoizedState=Mt=t:Mt=Mt.next=t,Mt}function Wn(){if(Tt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Tt.next;var e=Mt===null?ht.memoizedState:Mt.next;if(e!==null)Mt=e,Tt=t;else{if(t===null)throw Error(ae(310));Tt=t,t={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Mt===null?ht.memoizedState=Mt=t:Mt=Mt.next=t}return Mt}function Ho(t,e){return typeof e=="function"?e(t):e}function th(t){var e=Wn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=Tt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((ss&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var p={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,ht.lanes|=h,as|=h}u=u.next}while(u!==null&&u!==a);c===null?o=r:c.next=l,nr(r,e.memoizedState)||(yn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,ht.lanes|=a,as|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nh(t){var e=Wn(),n=e.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);nr(a,e.memoizedState)||(yn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function Tw(){}function Iw(t,e){var n=ht,r=Wn(),s=e(),a=!nr(r.memoizedState,s);if(a&&(r.memoizedState=s,yn=!0),r=r.queue,vp(Rw.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||Mt!==null&&Mt.memoizedState.tag&1){if(n.flags|=2048,Go(9,Pw.bind(null,n,r,s,e),void 0,null),Lt===null)throw Error(ae(349));ss&30||Aw(n,e,s)}return s}function Aw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pw(t,e,n,r){e.value=n,e.getSnapshot=r,Dw(e)&&Mw(t)}function Rw(t,e,n){return n(function(){Dw(e)&&Mw(t)})}function Dw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!nr(t,n)}catch{return!0}}function Mw(t){var e=Mr(t,1);e!==null&&tr(e,t,1,-1)}function Dx(t){var e=or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ho,lastRenderedState:t},e.queue=t,t=t.dispatch=a_.bind(null,ht,t),[e.memoizedState,t]}function Go(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lw(){return Wn().memoizedState}function yc(t,e,n,r){var s=or();ht.flags|=t,s.memoizedState=Go(1|e,n,void 0,r===void 0?null:r)}function Fd(t,e,n,r){var s=Wn();r=r===void 0?null:r;var a=void 0;if(Tt!==null){var o=Tt.memoizedState;if(a=o.destroy,r!==null&&gp(r,o.deps)){s.memoizedState=Go(e,n,a,r);return}}ht.flags|=t,s.memoizedState=Go(1|e,n,a,r)}function Mx(t,e){return yc(8390656,8,t,e)}function vp(t,e){return Fd(2048,8,t,e)}function Vw(t,e){return Fd(4,2,t,e)}function Ow(t,e){return Fd(4,4,t,e)}function Fw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Bw(t,e,n){return n=n!=null?n.concat([t]):null,Fd(4,4,Fw.bind(null,e,t),n)}function bp(){}function Uw(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function $w(t,e){var n=Wn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qw(t,e,n){return ss&21?(nr(n,e)||(n=Q1(),ht.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,yn=!0),t.memoizedState=n)}function i_(t,e){var n=Ye;Ye=n!==0&&4>n?n:4,t(!0);var r=eh.transition;eh.transition={};try{t(!1),e()}finally{Ye=n,eh.transition=r}}function Ww(){return Wn().memoizedState}function s_(t,e,n){var r=pi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hw(t))Gw(e,n);else if(n=Cw(t,e,n,r),n!==null){var s=cn();tr(n,t,r,s),Kw(n,e,r)}}function a_(t,e,n){var r=pi(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hw(t))Gw(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,n);if(s.hasEagerState=!0,s.eagerState=l,nr(l,o)){var c=e.interleaved;c===null?(s.next=s,up(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Cw(t,e,s,r),n!==null&&(s=cn(),tr(n,t,r,s),Kw(n,e,r))}}function Hw(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function Gw(t,e){yo=ed=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xm(t,n)}}var td={readContext:qn,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useInsertionEffect:Gt,useLayoutEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useMutableSource:Gt,useSyncExternalStore:Gt,useId:Gt,unstable_isNewReconciler:!1},o_={readContext:qn,useCallback:function(t,e){return or().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:Mx,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yc(4194308,4,Fw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yc(4194308,4,t,e)},useInsertionEffect:function(t,e){return yc(4,2,t,e)},useMemo:function(t,e){var n=or();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=or();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=s_.bind(null,ht,t),[r.memoizedState,t]},useRef:function(t){var e=or();return t={current:t},e.memoizedState=t},useState:Dx,useDebugValue:bp,useDeferredValue:function(t){return or().memoizedState=t},useTransition:function(){var t=Dx(!1),e=t[0];return t=i_.bind(null,t[1]),or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ht,s=or();if(ct){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=e(),Lt===null)throw Error(ae(349));ss&30||Aw(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,Mx(Rw.bind(null,r,a,t),[t]),r.flags|=2048,Go(9,Pw.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=or(),e=Lt.identifierPrefix;if(ct){var n=Ir,r=Tr;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Wo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=r_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},l_={readContext:qn,useCallback:Uw,useContext:qn,useEffect:vp,useImperativeHandle:Bw,useInsertionEffect:Vw,useLayoutEffect:Ow,useMemo:$w,useReducer:th,useRef:Lw,useState:function(){return th(Ho)},useDebugValue:bp,useDeferredValue:function(t){var e=Wn();return qw(e,Tt.memoizedState,t)},useTransition:function(){var t=th(Ho)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:Tw,useSyncExternalStore:Iw,useId:Ww,unstable_isNewReconciler:!1},c_={readContext:qn,useCallback:Uw,useContext:qn,useEffect:vp,useImperativeHandle:Bw,useInsertionEffect:Vw,useLayoutEffect:Ow,useMemo:$w,useReducer:nh,useRef:Lw,useState:function(){return nh(Ho)},useDebugValue:bp,useDeferredValue:function(t){var e=Wn();return Tt===null?e.memoizedState=t:qw(e,Tt.memoizedState,t)},useTransition:function(){var t=nh(Ho)[0],e=Wn().memoizedState;return[t,e]},useMutableSource:Tw,useSyncExternalStore:Iw,useId:Ww,unstable_isNewReconciler:!1};function Qn(t,e){if(t&&t.defaultProps){e=mt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function w0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:mt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Bd={isMounted:function(t){return(t=t._reactInternals)?ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=cn(),s=pi(t),a=Ar(r,s);a.payload=e,n!=null&&(a.callback=n),e=hi(t,a,s),e!==null&&(tr(e,t,s,r),gc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=cn(),s=pi(t),a=Ar(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=hi(t,a,s),e!==null&&(tr(e,t,s,r),gc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=cn(),r=pi(t),s=Ar(n,r);s.tag=2,e!=null&&(s.callback=e),e=hi(t,s,r),e!==null&&(tr(e,t,r,n),gc(e,t,r))}};function Lx(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,a):!0}function Qw(t,e,n){var r=!1,s=wi,a=e.contextType;return typeof a=="object"&&a!==null?a=qn(a):(s=wn(e)?rs:nn.current,r=e.contextTypes,a=(r=r!=null)?ra(t,s):wi),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function Vx(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Bd.enqueueReplaceState(e,e.state,null)}function k0(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hp(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=qn(a):(a=wn(e)?rs:nn.current,s.context=ra(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(w0(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Bd.enqueueReplaceState(s,s.state,null),Jc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function oa(t,e){try{var n="",r=e;do n+=L4(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function rh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function j0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var d_=typeof WeakMap=="function"?WeakMap:Map;function Yw(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){rd||(rd=!0,P0=r),j0(t,e)},n}function Xw(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){j0(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){j0(t,e),typeof r!="function"&&(mi===null?mi=new Set([this]):mi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ox(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new d_;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=N_.bind(null,t,e,n),e.then(t,t))}function Fx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bx(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,hi(n,e,1))),n.lanes|=1),t)}var u_=Wr.ReactCurrentOwner,yn=!1;function an(t,e,n,r){e.child=t===null?_w(e,null,n,r):sa(e,t.child,n,r)}function Ux(t,e,n,r,s){n=n.render;var a=e.ref;return Qs(e,s),r=xp(t,e,n,r,a,s),n=yp(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):(ct&&n&&sp(e),e.flags|=1,an(t,e,r,s),e.child)}function $x(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Ep(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,Jw(t,e,a,r,s)):(t=kc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(o,r)&&t.ref===e.ref)return Lr(t,e,s)}return e.flags|=1,t=fi(a,r),t.ref=e.ref,t.return=e,e.child=t}function Jw(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Oo(a,r)&&t.ref===e.ref)if(yn=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(yn=!0);else return e.lanes=t.lanes,Lr(t,e,s)}return N0(t,e,n,r,s)}function Zw(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(Os,Nn),Nn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,nt(Os,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,nt(Os,Nn),Nn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,nt(Os,Nn),Nn|=r;return an(t,e,s,n),e.child}function e2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function N0(t,e,n,r,s){var a=wn(n)?rs:nn.current;return a=ra(e,a),Qs(e,s),n=xp(t,e,n,r,a,s),r=yp(),t!==null&&!yn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Lr(t,e,s)):(ct&&r&&sp(e),e.flags|=1,an(t,e,n,s),e.child)}function qx(t,e,n,r,s){if(wn(n)){var a=!0;Gc(e)}else a=!1;if(Qs(e,s),e.stateNode===null)vc(t,e),Qw(e,n,r),k0(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=qn(u):(u=wn(n)?rs:nn.current,u=ra(e,u));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==u)&&Vx(e,o,r,u),ni=!1;var m=e.memoizedState;o.state=m,Jc(e,r,o,s),c=e.memoizedState,l!==r||m!==c||bn.current||ni?(typeof h=="function"&&(w0(e,n,h,r),c=e.memoizedState),(l=ni||Lx(e,n,l,r,m,c,u))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ew(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Qn(e.type,l),o.props=u,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=qn(c):(c=wn(n)?rs:nn.current,c=ra(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&Vx(e,o,r,c),ni=!1,m=e.memoizedState,o.state=m,Jc(e,r,o,s);var j=e.memoizedState;l!==p||m!==j||bn.current||ni?(typeof y=="function"&&(w0(e,n,y,r),j=e.memoizedState),(u=ni||Lx(e,n,u,r,m,j,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,j,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,j,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=j),o.props=r,o.state=j,o.context=c,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return z0(t,e,n,r,a,s)}function z0(t,e,n,r,s,a){e2(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Sx(e,n,!1),Lr(t,e,a);r=e.stateNode,u_.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=sa(e,t.child,null,a),e.child=sa(e,null,l,a)):an(t,e,l,a),e.memoizedState=r.state,s&&Sx(e,n,!0),e.child}function t2(t){var e=t.stateNode;e.pendingContext?Ex(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ex(t,e.context,!1),mp(t,e.containerInfo)}function Wx(t,e,n,r,s){return ia(),op(s),e.flags|=256,an(t,e,n,r),e.child}var _0={dehydrated:null,treeContext:null,retryLane:0};function C0(t){return{baseLanes:t,cachePool:null,transitions:null}}function n2(t,e,n){var r=e.pendingProps,s=ut.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),nt(ut,s&1),t===null)return v0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=qd(o,r,0,null),t=Zi(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=C0(n),e.memoizedState=_0,t):wp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return h_(t,e,o,r,l,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=fi(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=fi(l,a):(a=Zi(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?C0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=_0,r}return a=t.child,t=a.sibling,r=fi(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function wp(t,e){return e=qd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kl(t,e,n,r){return r!==null&&op(r),sa(e,t.child,null,n),t=wp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function h_(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=rh(Error(ae(422))),Kl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=qd({mode:"visible",children:r.children},s,0,null),a=Zi(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&sa(e,t.child,null,o),e.child.memoizedState=C0(o),e.memoizedState=_0,a);if(!(e.mode&1))return Kl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ae(419)),r=rh(a,r,void 0),Kl(t,e,o,r)}if(l=(o&t.childLanes)!==0,yn||l){if(r=Lt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Mr(t,s),tr(r,t,s,-1))}return Cp(),r=rh(Error(ae(421))),Kl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=z_.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,_n=ui(s.nextSibling),Cn=e,ct=!0,Xn=null,t!==null&&(Rn[Dn++]=Tr,Rn[Dn++]=Ir,Rn[Dn++]=is,Tr=t.id,Ir=t.overflow,is=e),e=wp(e,r.children),e.flags|=4096,e)}function Hx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),b0(t.return,e,n)}function ih(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function r2(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(an(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hx(t,n,e);else if(t.tag===19)Hx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(nt(ut,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Zc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ih(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Zc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ih(e,!0,n,null,a);break;case"together":ih(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,n=fi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=fi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function m_(t,e,n){switch(e.tag){case 3:t2(e),ia();break;case 5:Sw(e);break;case 1:wn(e.type)&&Gc(e);break;case 4:mp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;nt(Yc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(nt(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?n2(t,e,n):(nt(ut,ut.current&1),t=Lr(t,e,n),t!==null?t.sibling:null);nt(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return r2(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),nt(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,Zw(t,e,n)}return Lr(t,e,n)}var i2,E0,s2,a2;i2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};E0=function(){};s2=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Gi(ur.current);var a=null;switch(n){case"input":s=Yh(t,s),r=Yh(t,r),a=[];break;case"select":s=mt({},s,{value:void 0}),r=mt({},r,{value:void 0}),a=[];break;case"textarea":s=Zh(t,s),r=Zh(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Wc)}t0(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ao.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ao.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&it("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};a2=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ya(t,e){if(!ct)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function p_(t,e,n){var r=e.pendingProps;switch(ap(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(e),null;case 1:return wn(e.type)&&Hc(),Kt(e),null;case 3:return r=e.stateNode,aa(),at(bn),at(nn),fp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(M0(Xn),Xn=null))),E0(t,e),Kt(e),null;case 5:pp(e);var s=Gi(qo.current);if(n=e.type,t!==null&&e.stateNode!=null)s2(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ae(166));return Kt(e),null}if(t=Gi(ur.current),Hl(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[cr]=e,r[Uo]=a,t=(e.mode&1)!==0,n){case"dialog":it("cancel",r),it("close",r);break;case"iframe":case"object":case"embed":it("load",r);break;case"video":case"audio":for(s=0;s<ao.length;s++)it(ao[s],r);break;case"source":it("error",r);break;case"img":case"image":case"link":it("error",r),it("load",r);break;case"details":it("toggle",r);break;case"input":tx(r,a),it("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},it("invalid",r);break;case"textarea":rx(r,a),it("invalid",r)}t0(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&Wl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Wl(r.textContent,l,t),s=["children",""+l]):Ao.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&it("scroll",r)}switch(n){case"input":Ll(r),nx(r,a,!0);break;case"textarea":Ll(r),ix(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Wc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=R1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[cr]=e,t[Uo]=r,i2(t,e,!1,!1),e.stateNode=t;e:{switch(o=n0(n,r),n){case"dialog":it("cancel",t),it("close",t),s=r;break;case"iframe":case"object":case"embed":it("load",t),s=r;break;case"video":case"audio":for(s=0;s<ao.length;s++)it(ao[s],t);s=r;break;case"source":it("error",t),s=r;break;case"img":case"image":case"link":it("error",t),it("load",t),s=r;break;case"details":it("toggle",t),s=r;break;case"input":tx(t,r),s=Yh(t,r),it("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=mt({},r,{value:void 0}),it("invalid",t);break;case"textarea":rx(t,r),s=Zh(t,r),it("invalid",t);break;default:s=r}t0(n,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?L1(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&D1(t,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Po(t,c):typeof c=="number"&&Po(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ao.hasOwnProperty(a)?c!=null&&a==="onScroll"&&it("scroll",t):c!=null&&Wm(t,a,c,o))}switch(n){case"input":Ll(t),nx(t,r,!1);break;case"textarea":Ll(t),ix(t);break;case"option":r.value!=null&&t.setAttribute("value",""+bi(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ws(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ws(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Wc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Kt(e),null;case 6:if(t&&e.stateNode!=null)a2(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ae(166));if(n=Gi(qo.current),Gi(ur.current),Hl(e)){if(r=e.stateNode,n=e.memoizedProps,r[cr]=e,(a=r.nodeValue!==n)&&(t=Cn,t!==null))switch(t.tag){case 3:Wl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wl(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=e,e.stateNode=r}return Kt(e),null;case 13:if(at(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ct&&_n!==null&&e.mode&1&&!(e.flags&128))Nw(),ia(),e.flags|=98560,a=!1;else if(a=Hl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[cr]=e}else ia(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Kt(e),a=!1}else Xn!==null&&(M0(Xn),Xn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?It===0&&(It=3):Cp())),e.updateQueue!==null&&(e.flags|=4),Kt(e),null);case 4:return aa(),E0(t,e),t===null&&Fo(e.stateNode.containerInfo),Kt(e),null;case 10:return dp(e.type._context),Kt(e),null;case 17:return wn(e.type)&&Hc(),Kt(e),null;case 19:if(at(ut),a=e.memoizedState,a===null)return Kt(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Ya(a,!1);else{if(It!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Zc(t),o!==null){for(e.flags|=128,Ya(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return nt(ut,ut.current&1|2),e.child}t=t.sibling}a.tail!==null&&bt()>la&&(e.flags|=128,r=!0,Ya(a,!1),e.lanes=4194304)}else{if(!r)if(t=Zc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ya(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ct)return Kt(e),null}else 2*bt()-a.renderingStartTime>la&&n!==1073741824&&(e.flags|=128,r=!0,Ya(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=bt(),e.sibling=null,n=ut.current,nt(ut,r?n&1|2:n&1),e):(Kt(e),null);case 22:case 23:return _p(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Nn&1073741824&&(Kt(e),e.subtreeFlags&6&&(e.flags|=8192)):Kt(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function f_(t,e){switch(ap(e),e.tag){case 1:return wn(e.type)&&Hc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return aa(),at(bn),at(nn),fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pp(e),null;case 13:if(at(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));ia()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return at(ut),null;case 4:return aa(),null;case 10:return dp(e.type._context),null;case 22:case 23:return _p(),null;case 24:return null;default:return null}}var Ql=!1,en=!1,g_=typeof WeakSet=="function"?WeakSet:Set,be=null;function Vs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){xt(t,e,r)}else n.current=null}function S0(t,e,n){try{n()}catch(r){xt(t,e,r)}}var Gx=!1;function x_(t,e){if(h0=Uc,t=uw(),ip(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,p=t,m=null;t:for(;;){for(var y;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==a||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++u===s&&(l=o),m===a&&++h===r&&(c=o),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(m0={focusedElem:t,selectionRange:n},Uc=!1,be=e;be!==null;)if(e=be,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,be=t;else for(;be!==null;){e=be;try{var j=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var _=j.memoizedProps,T=j.memoizedState,v=e.stateNode,w=v.getSnapshotBeforeUpdate(e.elementType===e.type?_:Qn(e.type,_),T);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(P){xt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,be=t;break}be=e.return}return j=Gx,Gx=!1,j}function vo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&S0(e,n,a)}s=s.next}while(s!==r)}}function Ud(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function T0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o2(t){var e=t.alternate;e!==null&&(t.alternate=null,o2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[Uo],delete e[g0],delete e[Zz],delete e[e_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function l2(t){return t.tag===5||t.tag===3||t.tag===4}function Kx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||l2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function I0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Wc));else if(r!==4&&(t=t.child,t!==null))for(I0(t,e,n),t=t.sibling;t!==null;)I0(t,e,n),t=t.sibling}function A0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(A0(t,e,n),t=t.sibling;t!==null;)A0(t,e,n),t=t.sibling}var Vt=null,Yn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)c2(t,e,n),n=n.sibling}function c2(t,e,n){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(Rd,n)}catch{}switch(n.tag){case 5:en||Vs(n,e);case 6:var r=Vt,s=Yn;Vt=null,Zr(t,e,n),Vt=r,Yn=s,Vt!==null&&(Yn?(t=Vt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Vt.removeChild(n.stateNode));break;case 18:Vt!==null&&(Yn?(t=Vt,n=n.stateNode,t.nodeType===8?Xu(t.parentNode,n):t.nodeType===1&&Xu(t,n),Lo(t)):Xu(Vt,n.stateNode));break;case 4:r=Vt,s=Yn,Vt=n.stateNode.containerInfo,Yn=!0,Zr(t,e,n),Vt=r,Yn=s;break;case 0:case 11:case 14:case 15:if(!en&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&S0(n,e,o),s=s.next}while(s!==r)}Zr(t,e,n);break;case 1:if(!en&&(Vs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){xt(n,e,l)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(en=(r=en)||n.memoizedState!==null,Zr(t,e,n),en=r):Zr(t,e,n);break;default:Zr(t,e,n)}}function Qx(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new g_),e.forEach(function(r){var s=__.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Vt=l.stateNode,Yn=!1;break e;case 3:Vt=l.stateNode.containerInfo,Yn=!0;break e;case 4:Vt=l.stateNode.containerInfo,Yn=!0;break e}l=l.return}if(Vt===null)throw Error(ae(160));c2(a,o,s),Vt=null,Yn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){xt(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)d2(e,t),e=e.sibling}function d2(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Hn(e,t),ar(t),r&4){try{vo(3,t,t.return),Ud(3,t)}catch(_){xt(t,t.return,_)}try{vo(5,t,t.return)}catch(_){xt(t,t.return,_)}}break;case 1:Hn(e,t),ar(t),r&512&&n!==null&&Vs(n,n.return);break;case 5:if(Hn(e,t),ar(t),r&512&&n!==null&&Vs(n,n.return),t.flags&32){var s=t.stateNode;try{Po(s,"")}catch(_){xt(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&A1(s,a),n0(l,o);var u=n0(l,a);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?L1(s,p):h==="dangerouslySetInnerHTML"?D1(s,p):h==="children"?Po(s,p):Wm(s,h,p,u)}switch(l){case"input":Xh(s,a);break;case"textarea":P1(s,a);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Ws(s,!!a.multiple,y,!1):m!==!!a.multiple&&(a.defaultValue!=null?Ws(s,!!a.multiple,a.defaultValue,!0):Ws(s,!!a.multiple,a.multiple?[]:"",!1))}s[Uo]=a}catch(_){xt(t,t.return,_)}}break;case 6:if(Hn(e,t),ar(t),r&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(_){xt(t,t.return,_)}}break;case 3:if(Hn(e,t),ar(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Lo(e.containerInfo)}catch(_){xt(t,t.return,_)}break;case 4:Hn(e,t),ar(t);break;case 13:Hn(e,t),ar(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Np=bt())),r&4&&Qx(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(en=(u=en)||h,Hn(e,t),en=u):Hn(e,t),ar(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(be=t,h=t.child;h!==null;){for(p=be=h;be!==null;){switch(m=be,y=m.child,m.tag){case 0:case 11:case 14:case 15:vo(4,m,m.return);break;case 1:Vs(m,m.return);var j=m.stateNode;if(typeof j.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,j.props=e.memoizedProps,j.state=e.memoizedState,j.componentWillUnmount()}catch(_){xt(r,n,_)}}break;case 5:Vs(m,m.return);break;case 22:if(m.memoizedState!==null){Xx(p);continue}}y!==null?(y.return=m,be=y):Xx(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=M1("display",o))}catch(_){xt(t,t.return,_)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(_){xt(t,t.return,_)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Hn(e,t),ar(t),r&4&&Qx(t);break;case 21:break;default:Hn(e,t),ar(t)}}function ar(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(l2(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Po(s,""),r.flags&=-33);var a=Kx(t);A0(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Kx(t);I0(t,l,o);break;default:throw Error(ae(161))}}catch(c){xt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function y_(t,e,n){be=t,u2(t)}function u2(t,e,n){for(var r=(t.mode&1)!==0;be!==null;){var s=be,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ql;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||en;l=Ql;var u=en;if(Ql=o,(en=c)&&!u)for(be=s;be!==null;)o=be,c=o.child,o.tag===22&&o.memoizedState!==null?Jx(s):c!==null?(c.return=o,be=c):Jx(s);for(;a!==null;)be=a,u2(a),a=a.sibling;be=s,Ql=l,en=u}Yx(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,be=a):Yx(t)}}function Yx(t){for(;be!==null;){var e=be;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:en||Ud(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!en)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Qn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Rx(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rx(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&Lo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}en||e.flags&512&&T0(e)}catch(m){xt(e,e.return,m)}}if(e===t){be=null;break}if(n=e.sibling,n!==null){n.return=e.return,be=n;break}be=e.return}}function Xx(t){for(;be!==null;){var e=be;if(e===t){be=null;break}var n=e.sibling;if(n!==null){n.return=e.return,be=n;break}be=e.return}}function Jx(t){for(;be!==null;){var e=be;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ud(4,e)}catch(c){xt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){xt(e,s,c)}}var a=e.return;try{T0(e)}catch(c){xt(e,a,c)}break;case 5:var o=e.return;try{T0(e)}catch(c){xt(e,o,c)}}}catch(c){xt(e,e.return,c)}if(e===t){be=null;break}var l=e.sibling;if(l!==null){l.return=e.return,be=l;break}be=e.return}}var v_=Math.ceil,nd=Wr.ReactCurrentDispatcher,kp=Wr.ReactCurrentOwner,Fn=Wr.ReactCurrentBatchConfig,Ge=0,Lt=null,jt=null,$t=0,Nn=0,Os=Ii(0),It=0,Ko=null,as=0,$d=0,jp=0,bo=null,xn=null,Np=0,la=1/0,Cr=null,rd=!1,P0=null,mi=null,Yl=!1,ai=null,id=0,wo=0,R0=null,bc=-1,wc=0;function cn(){return Ge&6?bt():bc!==-1?bc:bc=bt()}function pi(t){return t.mode&1?Ge&2&&$t!==0?$t&-$t:n_.transition!==null?(wc===0&&(wc=Q1()),wc):(t=Ye,t!==0||(t=window.event,t=t===void 0?16:nw(t.type)),t):1}function tr(t,e,n,r){if(50<wo)throw wo=0,R0=null,Error(ae(185));dl(t,n,r),(!(Ge&2)||t!==Lt)&&(t===Lt&&(!(Ge&2)&&($d|=n),It===4&&ii(t,$t)),kn(t,r),n===1&&Ge===0&&!(e.mode&1)&&(la=bt()+500,Od&&Ai()))}function kn(t,e){var n=t.callbackNode;nz(t,e);var r=Bc(t,t===Lt?$t:0);if(r===0)n!==null&&ox(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ox(n),e===1)t.tag===0?t_(Zx.bind(null,t)):ww(Zx.bind(null,t)),Xz(function(){!(Ge&6)&&Ai()}),n=null;else{switch(Y1(r)){case 1:n=Ym;break;case 4:n=G1;break;case 16:n=Fc;break;case 536870912:n=K1;break;default:n=Fc}n=v2(n,h2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function h2(t,e){if(bc=-1,wc=0,Ge&6)throw Error(ae(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=Bc(t,t===Lt?$t:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=sd(t,r);else{e=r;var s=Ge;Ge|=2;var a=p2();(Lt!==t||$t!==e)&&(Cr=null,la=bt()+500,Ji(t,e));do try{k_();break}catch(l){m2(t,l)}while(!0);cp(),nd.current=a,Ge=s,jt!==null?e=0:(Lt=null,$t=0,e=It)}if(e!==0){if(e===2&&(s=o0(t),s!==0&&(r=s,e=D0(t,s))),e===1)throw n=Ko,Ji(t,0),ii(t,r),kn(t,bt()),n;if(e===6)ii(t,r);else{if(s=t.current.alternate,!(r&30)&&!b_(s)&&(e=sd(t,r),e===2&&(a=o0(t),a!==0&&(r=a,e=D0(t,a))),e===1))throw n=Ko,Ji(t,0),ii(t,r),kn(t,bt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ae(345));case 2:Bi(t,xn,Cr);break;case 3:if(ii(t,r),(r&130023424)===r&&(e=Np+500-bt(),10<e)){if(Bc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){cn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=f0(Bi.bind(null,t,xn,Cr),e);break}Bi(t,xn,Cr);break;case 4:if(ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-er(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*v_(r/1960))-r,10<r){t.timeoutHandle=f0(Bi.bind(null,t,xn,Cr),r);break}Bi(t,xn,Cr);break;case 5:Bi(t,xn,Cr);break;default:throw Error(ae(329))}}}return kn(t,bt()),t.callbackNode===n?h2.bind(null,t):null}function D0(t,e){var n=bo;return t.current.memoizedState.isDehydrated&&(Ji(t,e).flags|=256),t=sd(t,e),t!==2&&(e=xn,xn=n,e!==null&&M0(e)),t}function M0(t){xn===null?xn=t:xn.push.apply(xn,t)}function b_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!nr(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ii(t,e){for(e&=~jp,e&=~$d,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function Zx(t){if(Ge&6)throw Error(ae(327));Ys();var e=Bc(t,0);if(!(e&1))return kn(t,bt()),null;var n=sd(t,e);if(t.tag!==0&&n===2){var r=o0(t);r!==0&&(e=r,n=D0(t,r))}if(n===1)throw n=Ko,Ji(t,0),ii(t,e),kn(t,bt()),n;if(n===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bi(t,xn,Cr),kn(t,bt()),null}function zp(t,e){var n=Ge;Ge|=1;try{return t(e)}finally{Ge=n,Ge===0&&(la=bt()+500,Od&&Ai())}}function os(t){ai!==null&&ai.tag===0&&!(Ge&6)&&Ys();var e=Ge;Ge|=1;var n=Fn.transition,r=Ye;try{if(Fn.transition=null,Ye=1,t)return t()}finally{Ye=r,Fn.transition=n,Ge=e,!(Ge&6)&&Ai()}}function _p(){Nn=Os.current,at(Os)}function Ji(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yz(n)),jt!==null)for(n=jt.return;n!==null;){var r=n;switch(ap(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Hc();break;case 3:aa(),at(bn),at(nn),fp();break;case 5:pp(r);break;case 4:aa();break;case 13:at(ut);break;case 19:at(ut);break;case 10:dp(r.type._context);break;case 22:case 23:_p()}n=n.return}if(Lt=t,jt=t=fi(t.current,null),$t=Nn=e,It=0,Ko=null,jp=$d=as=0,xn=bo=null,Hi!==null){for(e=0;e<Hi.length;e++)if(n=Hi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}Hi=null}return t}function m2(t,e){do{var n=jt;try{if(cp(),xc.current=td,ed){for(var r=ht.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ed=!1}if(ss=0,Mt=Tt=ht=null,yo=!1,Wo=0,kp.current=null,n===null||n.return===null){It=1,Ko=e,jt=null;break}e:{var a=t,o=n.return,l=n,c=e;if(e=$t,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Fx(o);if(y!==null){y.flags&=-257,Bx(y,o,l,a,e),y.mode&1&&Ox(a,u,e),e=y,c=u;var j=e.updateQueue;if(j===null){var _=new Set;_.add(c),e.updateQueue=_}else j.add(c);break e}else{if(!(e&1)){Ox(a,u,e),Cp();break e}c=Error(ae(426))}}else if(ct&&l.mode&1){var T=Fx(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Bx(T,o,l,a,e),op(oa(c,l));break e}}a=c=oa(c,l),It!==4&&(It=2),bo===null?bo=[a]:bo.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var v=Yw(a,c,e);Px(a,v);break e;case 1:l=c;var w=a.type,N=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(mi===null||!mi.has(N)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=Xw(a,l,e);Px(a,P);break e}}a=a.return}while(a!==null)}g2(n)}catch(L){e=L,jt===n&&n!==null&&(jt=n=n.return);continue}break}while(!0)}function p2(){var t=nd.current;return nd.current=td,t===null?td:t}function Cp(){(It===0||It===3||It===2)&&(It=4),Lt===null||!(as&268435455)&&!($d&268435455)||ii(Lt,$t)}function sd(t,e){var n=Ge;Ge|=2;var r=p2();(Lt!==t||$t!==e)&&(Cr=null,Ji(t,e));do try{w_();break}catch(s){m2(t,s)}while(!0);if(cp(),Ge=n,nd.current=r,jt!==null)throw Error(ae(261));return Lt=null,$t=0,It}function w_(){for(;jt!==null;)f2(jt)}function k_(){for(;jt!==null&&!G4();)f2(jt)}function f2(t){var e=y2(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?g2(t):jt=e,kp.current=null}function g2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=f_(n,e),n!==null){n.flags&=32767,jt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{It=6,jt=null;return}}else if(n=p_(n,e,Nn),n!==null){jt=n;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=t}while(e!==null);It===0&&(It=5)}function Bi(t,e,n){var r=Ye,s=Fn.transition;try{Fn.transition=null,Ye=1,j_(t,e,n,r)}finally{Fn.transition=s,Ye=r}return null}function j_(t,e,n,r){do Ys();while(ai!==null);if(Ge&6)throw Error(ae(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(rz(t,a),t===Lt&&(jt=Lt=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yl||(Yl=!0,v2(Fc,function(){return Ys(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Fn.transition,Fn.transition=null;var o=Ye;Ye=1;var l=Ge;Ge|=4,kp.current=null,x_(t,n),d2(n,t),$z(m0),Uc=!!h0,m0=h0=null,t.current=n,y_(n),K4(),Ge=l,Ye=o,Fn.transition=a}else t.current=n;if(Yl&&(Yl=!1,ai=t,id=s),a=t.pendingLanes,a===0&&(mi=null),X4(n.stateNode),kn(t,bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(rd)throw rd=!1,t=P0,P0=null,t;return id&1&&t.tag!==0&&Ys(),a=t.pendingLanes,a&1?t===R0?wo++:(wo=0,R0=t):wo=0,Ai(),null}function Ys(){if(ai!==null){var t=Y1(id),e=Fn.transition,n=Ye;try{if(Fn.transition=null,Ye=16>t?16:t,ai===null)var r=!1;else{if(t=ai,ai=null,id=0,Ge&6)throw Error(ae(331));var s=Ge;for(Ge|=4,be=t.current;be!==null;){var a=be,o=a.child;if(be.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(be=u;be!==null;){var h=be;switch(h.tag){case 0:case 11:case 15:vo(8,h,a)}var p=h.child;if(p!==null)p.return=h,be=p;else for(;be!==null;){h=be;var m=h.sibling,y=h.return;if(o2(h),h===u){be=null;break}if(m!==null){m.return=y,be=m;break}be=y}}}var j=a.alternate;if(j!==null){var _=j.child;if(_!==null){j.child=null;do{var T=_.sibling;_.sibling=null,_=T}while(_!==null)}}be=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,be=o;else e:for(;be!==null;){if(a=be,a.flags&2048)switch(a.tag){case 0:case 11:case 15:vo(9,a,a.return)}var v=a.sibling;if(v!==null){v.return=a.return,be=v;break e}be=a.return}}var w=t.current;for(be=w;be!==null;){o=be;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,be=N;else e:for(o=w;be!==null;){if(l=be,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ud(9,l)}}catch(L){xt(l,l.return,L)}if(l===o){be=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,be=P;break e}be=l.return}}if(Ge=s,Ai(),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(Rd,t)}catch{}r=!0}return r}finally{Ye=n,Fn.transition=e}}return!1}function ey(t,e,n){e=oa(n,e),e=Yw(t,e,1),t=hi(t,e,1),e=cn(),t!==null&&(dl(t,1,e),kn(t,e))}function xt(t,e,n){if(t.tag===3)ey(t,t,n);else for(;e!==null;){if(e.tag===3){ey(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mi===null||!mi.has(r))){t=oa(n,t),t=Xw(e,t,1),e=hi(e,t,1),t=cn(),e!==null&&(dl(e,1,t),kn(e,t));break}}e=e.return}}function N_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=cn(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&($t&n)===n&&(It===4||It===3&&($t&130023424)===$t&&500>bt()-Np?Ji(t,0):jp|=n),kn(t,e)}function x2(t,e){e===0&&(t.mode&1?(e=Fl,Fl<<=1,!(Fl&130023424)&&(Fl=4194304)):e=1);var n=cn();t=Mr(t,e),t!==null&&(dl(t,e,n),kn(t,n))}function z_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x2(t,n)}function __(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(e),x2(t,n)}var y2;y2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bn.current)yn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return yn=!1,m_(t,e,n);yn=!!(t.flags&131072)}else yn=!1,ct&&e.flags&1048576&&kw(e,Qc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;vc(t,e),t=e.pendingProps;var s=ra(e,nn.current);Qs(e,n),s=xp(null,e,r,t,s,n);var a=yp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wn(r)?(a=!0,Gc(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hp(e),s.updater=Bd,e.stateNode=s,s._reactInternals=e,k0(e,r,t,n),e=z0(null,e,r,!0,a,n)):(e.tag=0,ct&&a&&sp(e),an(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(vc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=E_(r),t=Qn(r,t),s){case 0:e=N0(null,e,r,t,n);break e;case 1:e=qx(null,e,r,t,n);break e;case 11:e=Ux(null,e,r,t,n);break e;case 14:e=$x(null,e,r,Qn(r.type,t),n);break e}throw Error(ae(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),N0(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),qx(t,e,r,s,n);case 3:e:{if(t2(e),t===null)throw Error(ae(387));r=e.pendingProps,a=e.memoizedState,s=a.element,Ew(t,e),Jc(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=oa(Error(ae(423)),e),e=Wx(t,e,r,n,s);break e}else if(r!==s){s=oa(Error(ae(424)),e),e=Wx(t,e,r,n,s);break e}else for(_n=ui(e.stateNode.containerInfo.firstChild),Cn=e,ct=!0,Xn=null,n=_w(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ia(),r===s){e=Lr(t,e,n);break e}an(t,e,r,n)}e=e.child}return e;case 5:return Sw(e),t===null&&v0(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,p0(r,s)?o=null:a!==null&&p0(r,a)&&(e.flags|=32),e2(t,e),an(t,e,o,n),e.child;case 6:return t===null&&v0(e),null;case 13:return n2(t,e,n);case 4:return mp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sa(e,null,r,n):an(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),Ux(t,e,r,s,n);case 7:return an(t,e,e.pendingProps,n),e.child;case 8:return an(t,e,e.pendingProps.children,n),e.child;case 12:return an(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,nt(Yc,r._currentValue),r._currentValue=o,a!==null)if(nr(a.value,o)){if(a.children===s.children&&!bn.current){e=Lr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Ar(-1,n&-n),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),b0(a.return,n,e),l.lanes|=n;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ae(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),b0(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}an(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Qs(e,n),s=qn(s),r=r(s),e.flags|=1,an(t,e,r,n),e.child;case 14:return r=e.type,s=Qn(r,e.pendingProps),s=Qn(r.type,s),$x(t,e,r,s,n);case 15:return Jw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Qn(r,s),vc(t,e),e.tag=1,wn(r)?(t=!0,Gc(e)):t=!1,Qs(e,n),Qw(e,r,s),k0(e,r,s,n),z0(null,e,r,!0,t,n);case 19:return r2(t,e,n);case 22:return Zw(t,e,n)}throw Error(ae(156,e.tag))};function v2(t,e){return H1(t,e)}function C_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(t,e,n,r){return new C_(t,e,n,r)}function Ep(t){return t=t.prototype,!(!t||!t.isReactComponent)}function E_(t){if(typeof t=="function")return Ep(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gm)return 11;if(t===Km)return 14}return 2}function fi(t,e){var n=t.alternate;return n===null?(n=Vn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function kc(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Ep(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ss:return Zi(n.children,s,a,e);case Hm:o=8,s|=8;break;case Hh:return t=Vn(12,n,e,s|2),t.elementType=Hh,t.lanes=a,t;case Gh:return t=Vn(13,n,e,s),t.elementType=Gh,t.lanes=a,t;case Kh:return t=Vn(19,n,e,s),t.elementType=Kh,t.lanes=a,t;case S1:return qd(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C1:o=10;break e;case E1:o=9;break e;case Gm:o=11;break e;case Km:o=14;break e;case ti:o=16,r=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=Vn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function Zi(t,e,n,r){return t=Vn(7,t,r,e),t.lanes=n,t}function qd(t,e,n,r){return t=Vn(22,t,r,e),t.elementType=S1,t.lanes=n,t.stateNode={isHidden:!1},t}function sh(t,e,n){return t=Vn(6,t,null,e),t.lanes=n,t}function ah(t,e,n){return e=Vn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function S_(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fu(0),this.expirationTimes=Fu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Sp(t,e,n,r,s,a,o,l,c){return t=new S_(t,e,n,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Vn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(a),t}function T_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Es,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function b2(t){if(!t)return wi;t=t._reactInternals;e:{if(ps(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var n=t.type;if(wn(n))return bw(t,n,e)}return e}function w2(t,e,n,r,s,a,o,l,c){return t=Sp(n,r,!0,t,s,a,o,l,c),t.context=b2(null),n=t.current,r=cn(),s=pi(n),a=Ar(r,s),a.callback=e??null,hi(n,a,s),t.current.lanes=s,dl(t,s,r),kn(t,r),t}function Wd(t,e,n,r){var s=e.current,a=cn(),o=pi(s);return n=b2(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=hi(s,e,o),t!==null&&(tr(t,s,o,a),gc(t,s,o)),o}function ad(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ty(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tp(t,e){ty(t,e),(t=t.alternate)&&ty(t,e)}function I_(){return null}var k2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ip(t){this._internalRoot=t}Hd.prototype.render=Ip.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));Wd(t,e,null,null)};Hd.prototype.unmount=Ip.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;os(function(){Wd(null,t,null,null)}),e[Dr]=null}};function Hd(t){this._internalRoot=t}Hd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Z1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ri.length&&e!==0&&e<ri[n].priority;n++);ri.splice(n,0,t),n===0&&tw(t)}};function Ap(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ny(){}function A_(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var u=ad(o);a.call(u)}}var o=w2(e,r,t,0,null,!1,!1,"",ny);return t._reactRootContainer=o,t[Dr]=o.current,Fo(t.nodeType===8?t.parentNode:t),os(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=ad(c);l.call(u)}}var c=Sp(t,0,!1,null,null,!1,!1,"",ny);return t._reactRootContainer=c,t[Dr]=c.current,Fo(t.nodeType===8?t.parentNode:t),os(function(){Wd(e,c,n,r)}),c}function Kd(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=ad(o);l.call(c)}}Wd(e,o,t,s)}else o=A_(n,e,t,s,r);return ad(o)}X1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(Xm(e,n|1),kn(e,bt()),!(Ge&6)&&(la=bt()+500,Ai()))}break;case 13:os(function(){var r=Mr(t,1);if(r!==null){var s=cn();tr(r,t,1,s)}}),Tp(t,1)}};Jm=function(t){if(t.tag===13){var e=Mr(t,134217728);if(e!==null){var n=cn();tr(e,t,134217728,n)}Tp(t,134217728)}};J1=function(t){if(t.tag===13){var e=pi(t),n=Mr(t,e);if(n!==null){var r=cn();tr(n,t,e,r)}Tp(t,e)}};Z1=function(){return Ye};ew=function(t,e){var n=Ye;try{return Ye=t,e()}finally{Ye=n}};i0=function(t,e,n){switch(e){case"input":if(Xh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Vd(r);if(!s)throw Error(ae(90));I1(r),Xh(r,s)}}}break;case"textarea":P1(t,n);break;case"select":e=n.value,e!=null&&Ws(t,!!n.multiple,e,!1)}};F1=zp;B1=os;var P_={usingClientEntryPoint:!1,Events:[hl,Ps,Vd,V1,O1,zp]},Xa={findFiberByHostInstance:Wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},R_={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Wr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q1(t),t===null?null:t.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||I_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xl.isDisabled&&Xl.supportsFiber)try{Rd=Xl.inject(R_),dr=Xl}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P_;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ap(e))throw Error(ae(200));return T_(t,e,null,n)};Tn.createRoot=function(t,e){if(!Ap(t))throw Error(ae(299));var n=!1,r="",s=k2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Sp(t,1,!1,null,null,n,!1,r,s),t[Dr]=e.current,Fo(t.nodeType===8?t.parentNode:t),new Ip(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=q1(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return os(t)};Tn.hydrate=function(t,e,n){if(!Gd(e))throw Error(ae(200));return Kd(null,t,e,!0,n)};Tn.hydrateRoot=function(t,e,n){if(!Ap(t))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=k2;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=w2(e,null,t,1,n??null,s,!1,a,o),t[Dr]=e.current,Fo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Hd(e)};Tn.render=function(t,e,n){if(!Gd(e))throw Error(ae(200));return Kd(null,t,e,!1,n)};Tn.unmountComponentAtNode=function(t){if(!Gd(t))throw Error(ae(40));return t._reactRootContainer?(os(function(){Kd(null,null,t,!1,function(){t._reactRootContainer=null,t[Dr]=null})}),!0):!1};Tn.unstable_batchedUpdates=zp;Tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gd(n))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return Kd(t,e,n,!1,r)};Tn.version="18.3.1-next-f1338f8080-20240426";function j2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j2)}catch(t){console.error(t)}}j2(),j1.exports=Tn;var lt=j1.exports,ry=lt;qh.createRoot=ry.createRoot,qh.hydrateRoot=ry.hydrateRoot;const Pp=k.createContext({});function Pi(t){const e=k.useRef(null);return e.current===null&&(e.current=t()),e.current}const Rp=typeof window<"u",Dp=Rp?k.useLayoutEffect:k.useEffect,Qd=k.createContext(null);function Mp(t,e){t.indexOf(e)===-1&&t.push(e)}function Lp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function D_([...t],e,n){const r=e<0?t.length+e:e;if(r>=0&&r<t.length){const s=n<0?t.length+n:n,[a]=t.splice(e,1);t.splice(s,0,a)}return t}const Vr=(t,e,n)=>n>e?e:n<t?t:n;let Vp=()=>{};const Or={},N2=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function z2(t){return typeof t=="object"&&t!==null}const _2=t=>/^0[^.\s]+$/u.test(t);function Op(t){let e;return()=>(e===void 0&&(e=t()),e)}const Bn=t=>t,M_=(t,e)=>n=>e(t(n)),pl=(...t)=>t.reduce(M_),Qo=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class Fp{constructor(){this.subscriptions=[]}add(e){return Mp(this.subscriptions,e),()=>Lp(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let a=0;a<s;a++){const o=this.subscriptions[a];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const hr=t=>t*1e3,On=t=>t/1e3;function C2(t,e){return e?t*(1e3/e):0}const E2=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,L_=1e-7,V_=12;function O_(t,e,n,r,s){let a,o,l=0;do o=e+(n-e)/2,a=E2(o,r,s)-t,a>0?n=o:e=o;while(Math.abs(a)>L_&&++l<V_);return o}function fl(t,e,n,r){if(t===e&&n===r)return Bn;const s=a=>O_(a,0,1,t,n);return a=>a===0||a===1?a:E2(s(a),e,r)}const S2=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,T2=t=>e=>1-t(1-e),I2=fl(.33,1.53,.69,.99),Bp=T2(I2),A2=S2(Bp),P2=t=>(t*=2)<1?.5*Bp(t):.5*(2-Math.pow(2,-10*(t-1))),Up=t=>1-Math.sin(Math.acos(t)),R2=T2(Up),D2=S2(Up),F_=fl(.42,0,1,1),B_=fl(0,0,.58,1),M2=fl(.42,0,.58,1),U_=t=>Array.isArray(t)&&typeof t[0]!="number",L2=t=>Array.isArray(t)&&typeof t[0]=="number",$_={linear:Bn,easeIn:F_,easeInOut:M2,easeOut:B_,circIn:Up,circInOut:D2,circOut:R2,backIn:Bp,backInOut:A2,backOut:I2,anticipate:P2},q_=t=>typeof t=="string",iy=t=>{if(L2(t)){Vp(t.length===4);const[e,n,r,s]=t;return fl(e,n,r,s)}else if(q_(t))return $_[t];return t},Jl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function W_(t,e){let n=new Set,r=new Set,s=!1,a=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(u.schedule(h),t()),h(l)}const u={schedule:(h,p=!1,m=!1)=>{const j=m&&s?n:r;return p&&o.add(h),j.has(h)||j.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,a&&(a=!1,u.process(h))}};return u}const H_=40;function V2(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,o=Jl.reduce((N,P)=>(N[P]=W_(a),N),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:h,update:p,preRender:m,render:y,postRender:j}=o,_=()=>{const N=Or.useManualTiming?s.timestamp:performance.now();n=!1,Or.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(N-s.timestamp,H_),1)),s.timestamp=N,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),h.process(s),p.process(s),m.process(s),y.process(s),j.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(_))},T=()=>{n=!0,r=!0,s.isProcessing||t(_)};return{schedule:Jl.reduce((N,P)=>{const L=o[P];return N[P]=(R,b=!1,g=!1)=>(n||T(),L.schedule(R,b,g)),N},{}),cancel:N=>{for(let P=0;P<Jl.length;P++)o[Jl[P]].cancel(N)},state:s,steps:o}}const{schedule:ot,cancel:Fr,state:Ot,steps:oh}=V2(typeof requestAnimationFrame<"u"?requestAnimationFrame:Bn,!0);let jc;function G_(){jc=void 0}const vn={now:()=>(jc===void 0&&vn.set(Ot.isProcessing||Or.useManualTiming?Ot.timestamp:performance.now()),jc),set:t=>{jc=t,queueMicrotask(G_)}},O2=t=>e=>typeof e=="string"&&e.startsWith(t),F2=O2("--"),K_=O2("var(--"),$p=t=>K_(t)?Q_.test(t.split("/*")[0].trim()):!1,Q_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,wa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Yo={...wa,transform:t=>Vr(0,1,t)},Zl={...wa,default:1},ko=t=>Math.round(t*1e5)/1e5,qp=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Y_(t){return t==null}const X_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Wp=(t,e)=>n=>!!(typeof n=="string"&&X_.test(n)&&n.startsWith(t)||e&&!Y_(n)&&Object.prototype.hasOwnProperty.call(n,e)),B2=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,a,o,l]=r.match(qp);return{[t]:parseFloat(s),[e]:parseFloat(a),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},J_=t=>Vr(0,255,t),lh={...wa,transform:t=>Math.round(J_(t))},Ki={test:Wp("rgb","red"),parse:B2("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+lh.transform(t)+", "+lh.transform(e)+", "+lh.transform(n)+", "+ko(Yo.transform(r))+")"};function Z_(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const L0={test:Wp("#"),parse:Z_,transform:Ki.transform},gl=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ei=gl("deg"),mr=gl("%"),Ae=gl("px"),eC=gl("vh"),tC=gl("vw"),sy={...mr,parse:t=>mr.parse(t)/100,transform:t=>mr.transform(t*100)},Fs={test:Wp("hsl","hue"),parse:B2("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+mr.transform(ko(e))+", "+mr.transform(ko(n))+", "+ko(Yo.transform(r))+")"},kt={test:t=>Ki.test(t)||L0.test(t)||Fs.test(t),parse:t=>Ki.test(t)?Ki.parse(t):Fs.test(t)?Fs.parse(t):L0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ki.transform(t):Fs.transform(t),getAnimatableNone:t=>{const e=kt.parse(t);return e.alpha=0,kt.transform(e)}},nC=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rC(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(qp))==null?void 0:e.length)||0)+(((n=t.match(nC))==null?void 0:n.length)||0)>0}const U2="number",$2="color",iC="var",sC="var(",ay="${}",aC=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Xo(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=e.replace(aC,c=>(kt.test(c)?(r.color.push(a),s.push($2),n.push(kt.parse(c))):c.startsWith(sC)?(r.var.push(a),s.push(iC),n.push(c)):(r.number.push(a),s.push(U2),n.push(parseFloat(c))),++a,ay)).split(ay);return{values:n,split:l,indexes:r,types:s}}function q2(t){return Xo(t).values}function W2(t){const{split:e,types:n}=Xo(t),r=e.length;return s=>{let a="";for(let o=0;o<r;o++)if(a+=e[o],s[o]!==void 0){const l=n[o];l===U2?a+=ko(s[o]):l===$2?a+=kt.transform(s[o]):a+=s[o]}return a}}const oC=t=>typeof t=="number"?0:kt.test(t)?kt.getAnimatableNone(t):t;function lC(t){const e=q2(t);return W2(t)(e.map(oC))}const ki={test:rC,parse:q2,createTransformer:W2,getAnimatableNone:lC};function ch(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function cC({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,a=0,o=0;if(!e)s=a=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=ch(c,l,t+1/3),a=ch(c,l,t),o=ch(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:r}}function od(t,e){return n=>n>0?e:t}const dt=(t,e,n)=>t+(e-t)*n,dh=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},dC=[L0,Ki,Fs],uC=t=>dC.find(e=>e.test(t));function oy(t){const e=uC(t);if(!e)return!1;let n=e.parse(t);return e===Fs&&(n=cC(n)),n}const ly=(t,e)=>{const n=oy(t),r=oy(e);if(!n||!r)return od(t,e);const s={...n};return a=>(s.red=dh(n.red,r.red,a),s.green=dh(n.green,r.green,a),s.blue=dh(n.blue,r.blue,a),s.alpha=dt(n.alpha,r.alpha,a),Ki.transform(s))},V0=new Set(["none","hidden"]);function hC(t,e){return V0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function mC(t,e){return n=>dt(t,e,n)}function Hp(t){return typeof t=="number"?mC:typeof t=="string"?$p(t)?od:kt.test(t)?ly:gC:Array.isArray(t)?H2:typeof t=="object"?kt.test(t)?ly:pC:od}function H2(t,e){const n=[...t],r=n.length,s=t.map((a,o)=>Hp(a)(a,e[o]));return a=>{for(let o=0;o<r;o++)n[o]=s[o](a);return n}}function pC(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=Hp(t[s])(t[s],e[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function fC(t,e){const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=t.values[o]??0;n[s]=l,r[a]++}return n}const gC=(t,e)=>{const n=ki.createTransformer(e),r=Xo(t),s=Xo(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?V0.has(t)&&!s.values.length||V0.has(e)&&!r.values.length?hC(t,e):pl(H2(fC(r,s),s.values),n):od(t,e)};function G2(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?dt(t,e,n):Hp(t)(t,e)}const xC=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ot.update(e,n),stop:()=>Fr(e),now:()=>Ot.isProcessing?Ot.timestamp:vn.now()}},K2=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let a=0;a<s;a++)r+=Math.round(t(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},ld=2e4;function Gp(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ld;)e+=n,r=t.next(e);return e>=ld?1/0:e}function yC(t,e=100,n){const r=n({...t,keyframes:[0,e]}),s=Math.min(Gp(r),ld);return{type:"keyframes",ease:a=>r.next(s*a).value/e,duration:On(s)}}const vC=5;function Q2(t,e,n){const r=Math.max(e-vC,0);return C2(n-t(r),e-r)}const gt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},uh=.001;function bC({duration:t=gt.duration,bounce:e=gt.bounce,velocity:n=gt.velocity,mass:r=gt.mass}){let s,a,o=1-e;o=Vr(gt.minDamping,gt.maxDamping,o),t=Vr(gt.minDuration,gt.maxDuration,On(t)),o<1?(s=u=>{const h=u*o,p=h*t,m=h-n,y=O0(u,o),j=Math.exp(-p);return uh-m/y*j},a=u=>{const p=u*o*t,m=p*n+n,y=Math.pow(o,2)*Math.pow(u,2)*t,j=Math.exp(-p),_=O0(Math.pow(u,2),o);return(-s(u)+uh>0?-1:1)*((m-y)*j)/_}):(s=u=>{const h=Math.exp(-u*t),p=(u-n)*t+1;return-uh+h*p},a=u=>{const h=Math.exp(-u*t),p=(n-u)*(t*t);return h*p});const l=5/t,c=kC(s,a,l);if(t=hr(t),isNaN(c))return{stiffness:gt.stiffness,damping:gt.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:t}}}const wC=12;function kC(t,e,n){let r=n;for(let s=1;s<wC;s++)r=r-t(r)/e(r);return r}function O0(t,e){return t*Math.sqrt(1-e*e)}const jC=["duration","bounce"],NC=["stiffness","damping","mass"];function cy(t,e){return e.some(n=>t[n]!==void 0)}function zC(t){let e={velocity:gt.velocity,stiffness:gt.stiffness,damping:gt.damping,mass:gt.mass,isResolvedFromDuration:!1,...t};if(!cy(t,NC)&&cy(t,jC))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*Vr(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:gt.mass,stiffness:s,damping:a}}else{const n=bC(t);e={...e,...n,mass:gt.mass},e.isResolvedFromDuration=!0}return e}function cd(t=gt.visualDuration,e=gt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:h,duration:p,velocity:m,isResolvedFromDuration:y}=zC({...n,velocity:-On(n.velocity||0)}),j=m||0,_=u/(2*Math.sqrt(c*h)),T=o-a,v=On(Math.sqrt(c/h)),w=Math.abs(T)<5;r||(r=w?gt.restSpeed.granular:gt.restSpeed.default),s||(s=w?gt.restDelta.granular:gt.restDelta.default);let N;if(_<1){const L=O0(v,_);N=R=>{const b=Math.exp(-_*v*R);return o-b*((j+_*v*T)/L*Math.sin(L*R)+T*Math.cos(L*R))}}else if(_===1)N=L=>o-Math.exp(-v*L)*(T+(j+v*T)*L);else{const L=v*Math.sqrt(_*_-1);N=R=>{const b=Math.exp(-_*v*R),g=Math.min(L*R,300);return o-b*((j+_*v*T)*Math.sinh(g)+L*T*Math.cosh(g))/L}}const P={calculatedDuration:y&&p||null,next:L=>{const R=N(L);if(y)l.done=L>=p;else{let b=L===0?j:0;_<1&&(b=L===0?hr(j):Q2(N,L,R));const g=Math.abs(b)<=r,z=Math.abs(o-R)<=s;l.done=g&&z}return l.value=l.done?o:R,l},toString:()=>{const L=Math.min(Gp(P),ld),R=K2(b=>P.next(L*b).value,L,30);return L+"ms "+R},toTransition:()=>{}};return P}cd.applyToOptions=t=>{const e=yC(t,100,cd);return t.ease=e.ease,t.duration=hr(e.duration),t.type="keyframes",t};function F0({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const p=t[0],m={done:!1,value:p},y=g=>l!==void 0&&g<l||c!==void 0&&g>c,j=g=>l===void 0?c:c===void 0||Math.abs(l-g)<Math.abs(c-g)?l:c;let _=n*e;const T=p+_,v=o===void 0?T:o(T);v!==T&&(_=v-p);const w=g=>-_*Math.exp(-g/r),N=g=>v+w(g),P=g=>{const z=w(g),C=N(g);m.done=Math.abs(z)<=u,m.value=m.done?v:C};let L,R;const b=g=>{y(m.value)&&(L=g,R=cd({keyframes:[m.value,j(m.value)],velocity:Q2(N,g,m.value),damping:s,stiffness:a,restDelta:u,restSpeed:h}))};return b(0),{calculatedDuration:null,next:g=>{let z=!1;return!R&&L===void 0&&(z=!0,P(g),b(g)),L!==void 0&&g>=L?R.next(g-L):(!z&&P(g),m)}}}function _C(t,e,n){const r=[],s=n||Or.mix||G2,a=t.length-1;for(let o=0;o<a;o++){let l=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Bn:e;l=pl(c,l)}r.push(l)}return r}function Y2(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const a=t.length;if(Vp(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const l=_C(e,r,s),c=l.length,u=h=>{if(o&&h<t[0])return e[0];let p=0;if(c>1)for(;p<t.length-2&&!(h<t[p+1]);p++);const m=Qo(t[p],t[p+1],h);return l[p](m)};return n?h=>u(Vr(t[0],t[a-1],h)):u}function CC(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Qo(0,e,r);t.push(dt(n,1,s))}}function EC(t){const e=[0];return CC(e,t.length-1),e}function SC(t,e){return t.map(n=>n*e)}function TC(t,e){return t.map(()=>e||M2).splice(0,t.length-1)}function jo({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=U_(r)?r.map(iy):iy(r),a={done:!1,value:e[0]},o=SC(n&&n.length===e.length?n:EC(e),t),l=Y2(o,e,{ease:Array.isArray(s)?s:TC(e,s)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}const IC=t=>t!==null;function Kp(t,{repeat:e,repeatType:n="loop"},r,s=1){const a=t.filter(IC),l=s<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const AC={decay:F0,inertia:F0,tween:jo,keyframes:jo,spring:cd};function X2(t){typeof t.type=="string"&&(t.type=AC[t.type])}class Qp{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const PC=t=>t/100;class Yp extends Qp{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,s;const{motionValue:n}=this.options;n&&n.updatedAt!==vn.now()&&this.tick(vn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(r=this.options).onStop)==null||s.call(r))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;X2(e);const{type:n=jo,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:o=0}=e;let{keyframes:l}=e;const c=n||jo;c!==jo&&typeof l[0]!="number"&&(this.mixKeyframes=pl(PC,G2(l[0],l[1])),l=[0,100]);const u=c({...e,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Gp(u));const{calculatedDuration:h}=u;this.calculatedDuration=h,this.resolvedDuration=h+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:y,type:j,onUpdate:_,finalKeyframe:T}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),w=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let N=this.currentTime,P=r;if(p){const g=Math.min(this.currentTime,s)/l;let z=Math.floor(g),C=g%1;!C&&g>=1&&(C=1),C===1&&z--,z=Math.min(z,p+1),!!(z%2)&&(m==="reverse"?(C=1-C,y&&(C-=y/l)):m==="mirror"&&(P=o)),N=Vr(0,1,C)*l}const L=w?{done:!1,value:h[0]}:P.next(N);a&&(L.value=a(L.value));let{done:R}=L;!w&&c!==null&&(R=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const b=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&R);return b&&j!==F0&&(L.value=Kp(h,this.options,T,this.speed)),_&&_(L.value),b&&this.finish(),L}then(e,n){return this.finished.then(e,n)}get duration(){return On(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+On(e)}get time(){return On(this.currentTime)}set time(e){var n;e=hr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(vn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=On(this.currentTime))}play(){var s,a;if(this.isStopped)return;const{driver:e=xC,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(a=(s=this.options).onPlay)==null||a.call(s);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(vn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function RC(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Qi=t=>t*180/Math.PI,B0=t=>{const e=Qi(Math.atan2(t[1],t[0]));return U0(e)},DC={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:B0,rotateZ:B0,skewX:t=>Qi(Math.atan(t[1])),skewY:t=>Qi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},U0=t=>(t=t%360,t<0&&(t+=360),t),dy=B0,uy=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),hy=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),MC={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:uy,scaleY:hy,scale:t=>(uy(t)+hy(t))/2,rotateX:t=>U0(Qi(Math.atan2(t[6],t[5]))),rotateY:t=>U0(Qi(Math.atan2(-t[2],t[0]))),rotateZ:dy,rotate:dy,skewX:t=>Qi(Math.atan(t[4])),skewY:t=>Qi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function $0(t){return t.includes("scale")?1:0}function q0(t,e){if(!t||t==="none")return $0(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=MC,s=n;else{const l=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=DC,s=l}if(!s)return $0(e);const a=r[e],o=s[1].split(",").map(VC);return typeof a=="function"?a(o):o[a]}const LC=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return q0(n,e)};function VC(t){return parseFloat(t.trim())}const ka=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ja=new Set(ka),my=t=>t===wa||t===Ae,OC=new Set(["x","y","z"]),FC=ka.filter(t=>!OC.has(t));function BC(t){const e=[];return FC.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const es={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>q0(e,"x"),y:(t,{transform:e})=>q0(e,"y")};es.translateX=es.x;es.translateY=es.y;const ts=new Set;let W0=!1,H0=!1,G0=!1;function J2(){if(H0){const t=Array.from(ts).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=BC(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,o])=>{var l;(l=r.getValue(a))==null||l.set(o)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}H0=!1,W0=!1,ts.forEach(t=>t.complete(G0)),ts.clear()}function Z2(){ts.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(H0=!0)})}function UC(){G0=!0,Z2(),J2(),G0=!1}class Xp{constructor(e,n,r,s,a,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(ts.add(this),W0||(W0=!0,ot.read(Z2),ot.resolveKeyframes(J2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;if(e[0]===null){const a=s==null?void 0:s.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const l=r.readValue(n,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),s&&a===void 0&&s.set(e[0])}RC(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),ts.delete(this)}cancel(){this.state==="scheduled"&&(ts.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const $C=t=>t.startsWith("--");function qC(t,e,n){$C(e)?t.style.setProperty(e,n):t.style[e]=n}const WC=Op(()=>window.ScrollTimeline!==void 0),HC={};function GC(t,e){const n=Op(t);return()=>HC[e]??n()}const ek=GC(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),oo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,py={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oo([0,.65,.55,1]),circOut:oo([.55,0,1,.45]),backIn:oo([.31,.01,.66,-.59]),backOut:oo([.33,1.53,.69,.99])};function tk(t,e){if(t)return typeof t=="function"?ek()?K2(t,e):"ease-out":L2(t)?oo(t):Array.isArray(t)?t.map(n=>tk(n,e)||py.easeOut):py[t]}function KC(t,e,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const h={[e]:n};c&&(h.offset=c);const p=tk(l,s);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:s,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"};return u&&(m.pseudoElement=u),t.animate(h,m)}function nk(t){return typeof t=="function"&&"applyToOptions"in t}function QC({type:t,...e}){return nk(t)&&ek()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class YC extends Qp{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!a,this.allowFlatten=o,this.options=e,Vp(typeof e.type!="string");const u=QC(e);this.animation=KC(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const h=Kp(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):qC(n,r,h),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,r;const e=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return On(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+On(e)}get time(){return On(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=hr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&WC()?(this.animation.timeline=e,Bn):n(this)}}const rk={anticipate:P2,backInOut:A2,circInOut:D2};function XC(t){return t in rk}function JC(t){typeof t.ease=="string"&&XC(t.ease)&&(t.ease=rk[t.ease])}const fy=10;class ZC extends YC{constructor(e){JC(e),X2(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const l=new Yp({...o,autoplay:!1}),c=hr(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-fy).value,l.sample(c).value,fy),l.stop()}}const gy=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ki.test(t)||t==="0")&&!t.startsWith("url("));function eE(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function tE(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],o=gy(s,e),l=gy(a,e);return!o||!l?!1:eE(t)||(n==="spring"||nk(n))&&r}function K0(t){t.duration=0,t.type="keyframes"}const nE=new Set(["opacity","clipPath","filter","transform"]),rE=Op(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iE(t){var h;const{motionValue:e,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=t;if(!(((h=e==null?void 0:e.owner)==null?void 0:h.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=e.owner.getProps();return rE()&&n&&nE.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}const sE=40;class aE extends Qp{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:h,...p}){var j;super(),this.stop=()=>{var _,T;this._animation&&(this._animation.stop(),(_=this.stopTimeline)==null||_.call(this)),(T=this.keyframeResolver)==null||T.cancel()},this.createdAt=vn.now();const m={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:o,name:c,motionValue:u,element:h,...p},y=(h==null?void 0:h.KeyframeResolver)||Xp;this.keyframeResolver=new y(l,(_,T,v)=>this.onKeyframesResolved(_,T,m,!v),c,u,h),(j=this.keyframeResolver)==null||j.scheduleResolve()}onKeyframesResolved(e,n,r,s){this.keyframeResolver=void 0;const{name:a,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:h}=r;this.resolvedAt=vn.now(),tE(e,a,o,l)||((Or.instantAnimations||!c)&&(h==null||h(Kp(e,r,n))),e[0]=e[e.length-1],K0(r),r.repeat=0);const m={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>sE?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},y=!u&&iE(m)?new ZC({...m,element:m.motionValue.owner.current}):new Yp(m);y.finished.then(()=>this.notifyFinished()).catch(Bn),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),UC()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const oE=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function lE(t){const e=oE.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function ik(t,e,n=1){const[r,s]=lE(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const o=a.trim();return N2(o)?parseFloat(o):o}return $p(s)?ik(s,e,n+1):s}function Jp(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const sk=new Set(["width","height","top","left","right","bottom",...ka]),cE={test:t=>t==="auto",parse:t=>t},ak=t=>e=>e.test(t),ok=[wa,Ae,mr,ei,tC,eC,cE],xy=t=>ok.find(ak(t));function dE(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||_2(t):!0}const uE=new Set(["brightness","contrast","saturate","opacity"]);function hE(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(qp)||[];if(!r)return t;const s=n.replace(r,"");let a=uE.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+s+")"}const mE=/\b([a-z-]*)\(.*?\)/gu,Q0={...ki,getAnimatableNone:t=>{const e=t.match(mE);return e?e.map(hE).join(" "):t}},yy={...wa,transform:Math.round},pE={rotate:ei,rotateX:ei,rotateY:ei,rotateZ:ei,scale:Zl,scaleX:Zl,scaleY:Zl,scaleZ:Zl,skew:ei,skewX:ei,skewY:ei,distance:Ae,translateX:Ae,translateY:Ae,translateZ:Ae,x:Ae,y:Ae,z:Ae,perspective:Ae,transformPerspective:Ae,opacity:Yo,originX:sy,originY:sy,originZ:Ae},Zp={borderWidth:Ae,borderTopWidth:Ae,borderRightWidth:Ae,borderBottomWidth:Ae,borderLeftWidth:Ae,borderRadius:Ae,radius:Ae,borderTopLeftRadius:Ae,borderTopRightRadius:Ae,borderBottomRightRadius:Ae,borderBottomLeftRadius:Ae,width:Ae,maxWidth:Ae,height:Ae,maxHeight:Ae,top:Ae,right:Ae,bottom:Ae,left:Ae,padding:Ae,paddingTop:Ae,paddingRight:Ae,paddingBottom:Ae,paddingLeft:Ae,margin:Ae,marginTop:Ae,marginRight:Ae,marginBottom:Ae,marginLeft:Ae,backgroundPositionX:Ae,backgroundPositionY:Ae,...pE,zIndex:yy,fillOpacity:Yo,strokeOpacity:Yo,numOctaves:yy},fE={...Zp,color:kt,backgroundColor:kt,outlineColor:kt,fill:kt,stroke:kt,borderColor:kt,borderTopColor:kt,borderRightColor:kt,borderBottomColor:kt,borderLeftColor:kt,filter:Q0,WebkitFilter:Q0},lk=t=>fE[t];function ck(t,e){let n=lk(t);return n!==Q0&&(n=ki),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const gE=new Set(["auto","none","0"]);function xE(t,e,n){let r=0,s;for(;r<t.length&&!s;){const a=t[r];typeof a=="string"&&!gE.has(a)&&Xo(a).values.length&&(s=t[r]),r++}if(s&&n)for(const a of e)t[a]=ck(n,s)}class yE extends Xp{constructor(e,n,r,s,a){super(e,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),$p(u))){const h=ik(u,n.current);h!==void 0&&(e[c]=h),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!sk.has(r)||e.length!==2)return;const[s,a]=e,o=xy(s),l=xy(a);if(o!==l)if(my(o)&&my(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else es[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)(e[s]===null||dE(e[s]))&&r.push(s);r.length&&xE(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=es[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var l;const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=es[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{e.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function vE(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const s=(n==null?void 0:n[t])??r.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const dk=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function uk(t){return z2(t)&&"offsetHeight"in t}const vy=30,bE=t=>!isNaN(parseFloat(t)),No={current:void 0};class wE{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{var a;const s=vn.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((a=this.events.change)==null||a.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=vn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=bE(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Fp);const r=this.events[e].add(n);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return No.current&&No.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vy);return C2(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ls(t,e){return new wE(t,e)}const{schedule:ef}=V2(queueMicrotask,!1),Kn={x:!1,y:!1};function hk(){return Kn.x||Kn.y}function kE(t){return t==="x"||t==="y"?Kn[t]?null:(Kn[t]=!0,()=>{Kn[t]=!1}):Kn.x||Kn.y?null:(Kn.x=Kn.y=!0,()=>{Kn.x=Kn.y=!1})}function mk(t,e){const n=vE(t),r=new AbortController,s={passive:!0,...e,signal:r.signal};return[n,s,()=>r.abort()]}function by(t){return!(t.pointerType==="touch"||hk())}function jE(t,e,n={}){const[r,s,a]=mk(t,n),o=l=>{if(!by(l))return;const{target:c}=l,u=e(c,l);if(typeof u!="function"||!c)return;const h=p=>{by(p)&&(u(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,s)};return r.forEach(l=>{l.addEventListener("pointerenter",o,s)}),a}const pk=(t,e)=>e?t===e?!0:pk(t,e.parentElement):!1,tf=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,NE=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zE(t){return NE.has(t.tagName)||t.tabIndex!==-1}const Nc=new WeakSet;function wy(t){return e=>{e.key==="Enter"&&t(e)}}function hh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const _E=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=wy(()=>{if(Nc.has(n))return;hh(n,"down");const s=wy(()=>{hh(n,"up")}),a=()=>hh(n,"cancel");n.addEventListener("keyup",s,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function ky(t){return tf(t)&&!hk()}function CE(t,e,n={}){const[r,s,a]=mk(t,n),o=l=>{const c=l.currentTarget;if(!ky(l))return;Nc.add(c);const u=e(c,l),h=(y,j)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Nc.has(c)&&Nc.delete(c),ky(y)&&typeof u=="function"&&u(y,{success:j})},p=y=>{h(y,c===window||c===document||n.useGlobalTarget||pk(c,y.target))},m=y=>{h(y,!1)};window.addEventListener("pointerup",p,s),window.addEventListener("pointercancel",m,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),uk(l)&&(l.addEventListener("focus",u=>_E(u,s)),!zE(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function fk(t){return z2(t)&&"ownerSVGElement"in t}function EE(t){return fk(t)&&t.tagName==="svg"}function SE(...t){const e=!Array.isArray(t[0]),n=e?0:-1,r=t[0+n],s=t[1+n],a=t[2+n],o=t[3+n],l=Y2(s,a,o);return e?l(r):l}const Ut=t=>!!(t&&t.getVelocity),TE=[...ok,kt,ki],IE=t=>TE.find(ak(t)),Yd=k.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function jy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function AE(...t){return e=>{let n=!1;const r=t.map(s=>{const a=jy(s,e);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():jy(t[s],null)}}}}function PE(...t){return k.useCallback(AE(...t),t)}class RE extends k.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=uk(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function DE({children:t,isPresent:e,anchorX:n,root:r}){const s=k.useId(),a=k.useRef(null),o=k.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=k.useContext(Yd),c=PE(a,t==null?void 0:t.ref);return k.useInsertionEffect(()=>{const{width:u,height:h,top:p,left:m,right:y}=o.current;if(e||!a.current||!u||!h)return;const j=n==="left"?`left: ${m}`:`right: ${y}`;a.current.dataset.motionPopId=s;const _=document.createElement("style");l&&(_.nonce=l);const T=r??document.head;return T.appendChild(_),_.sheet&&_.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${h}px !important;
            ${j}px !important;
            top: ${p}px !important;
          }
        `),()=>{T.contains(_)&&T.removeChild(_)}},[e]),i.jsx(RE,{isPresent:e,childRef:a,sizeRef:o,children:k.cloneElement(t,{ref:c})})}const ME=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:o,anchorX:l,root:c})=>{const u=Pi(LE),h=k.useId();let p=!0,m=k.useMemo(()=>(p=!1,{id:h,initial:e,isPresent:n,custom:s,onExitComplete:y=>{u.set(y,!0);for(const j of u.values())if(!j)return;r&&r()},register:y=>(u.set(y,!1),()=>u.delete(y))}),[n,u,r]);return a&&p&&(m={...m}),k.useMemo(()=>{u.forEach((y,j)=>u.set(j,!1))},[n]),k.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),o==="popLayout"&&(t=i.jsx(DE,{isPresent:n,anchorX:l,root:c,children:t})),i.jsx(Qd.Provider,{value:m,children:t})};function LE(){return new Map}function gk(t=!0){const e=k.useContext(Qd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=e,a=k.useId();k.useEffect(()=>{if(t)return s(a)},[t]);const o=k.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,o]:[!0]}const ec=t=>t.key||"";function Ny(t){const e=[];return k.Children.forEach(t,n=>{k.isValidElement(n)&&e.push(n)}),e}const _e=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[u,h]=gk(o),p=k.useMemo(()=>Ny(t),[t]),m=o&&!u?[]:p.map(ec),y=k.useRef(!0),j=k.useRef(p),_=Pi(()=>new Map),[T,v]=k.useState(p),[w,N]=k.useState(p);Dp(()=>{y.current=!1,j.current=p;for(let R=0;R<w.length;R++){const b=ec(w[R]);m.includes(b)?_.delete(b):_.get(b)!==!0&&_.set(b,!1)}},[w,m.length,m.join("-")]);const P=[];if(p!==T){let R=[...p];for(let b=0;b<w.length;b++){const g=w[b],z=ec(g);m.includes(z)||(R.splice(b,0,g),P.push(g))}return a==="wait"&&P.length&&(R=P),N(Ny(R)),v(p),null}const{forceRender:L}=k.useContext(Pp);return i.jsx(i.Fragment,{children:w.map(R=>{const b=ec(R),g=o&&!u?!1:p===w||m.includes(b),z=()=>{if(_.has(b))_.set(b,!0);else return;let C=!0;_.forEach(D=>{D||(C=!1)}),C&&(L==null||L(),N(j.current),o&&(h==null||h()),r&&r())};return i.jsx(ME,{isPresent:g,initial:!y.current||n?void 0:!1,custom:e,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:g?void 0:z,anchorX:l,children:R},b)})})},xk=k.createContext({strict:!1}),zy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ca={};for(const t in zy)ca[t]={isEnabled:e=>zy[t].some(n=>!!e[n])};function VE(t){for(const e in t)ca[e]={...ca[e],...t[e]}}const OE=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||OE.has(t)}let yk=t=>!dd(t);function FE(t){typeof t=="function"&&(yk=e=>e.startsWith("on")?!dd(e):t(e))}try{FE(require("@emotion/is-prop-valid").default)}catch{}function BE(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(yk(s)||n===!0&&dd(s)||!e&&!dd(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}const Xd=k.createContext({});function Jd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Jo(t){return typeof t=="string"||Array.isArray(t)}const nf=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],rf=["initial",...nf];function Zd(t){return Jd(t.animate)||rf.some(e=>Jo(t[e]))}function vk(t){return!!(Zd(t)||t.variants)}function UE(t,e){if(Zd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Jo(n)?n:void 0,animate:Jo(r)?r:void 0}}return t.inherit!==!1?e:{}}function $E(t){const{initial:e,animate:n}=UE(t,k.useContext(Xd));return k.useMemo(()=>({initial:e,animate:n}),[_y(e),_y(n)])}function _y(t){return Array.isArray(t)?t.join(" "):t}function Cy(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ja={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ae.test(t))t=parseFloat(t);else return t;const n=Cy(t,e.target.x),r=Cy(t,e.target.y);return`${n}% ${r}%`}},qE={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ki.parse(t);if(s.length>5)return r;const a=ki.createTransformer(t),o=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=dt(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),a(s)}},Y0={borderRadius:{...Ja,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ja,borderTopRightRadius:Ja,borderBottomLeftRadius:Ja,borderBottomRightRadius:Ja,boxShadow:qE};function bk(t,{layout:e,layoutId:n}){return ja.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Y0[t]||t==="opacity")}const WE={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HE=ka.length;function GE(t,e,n){let r="",s=!0;for(let a=0;a<HE;a++){const o=ka[a],l=t[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=dk(l,Zp[o]);if(!c){s=!1;const h=WE[o]||o;r+=`${h}(${u}) `}n&&(e[o]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function sf(t,e,n){const{style:r,vars:s,transformOrigin:a}=t;let o=!1,l=!1;for(const c in e){const u=e[c];if(ja.has(c)){o=!0;continue}else if(F2(c)){s[c]=u;continue}else{const h=dk(u,Zp[c]);c.startsWith("origin")?(l=!0,a[c]=h):r[c]=h}}if(e.transform||(o||n?r.transform=GE(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:h=0}=a;r.transformOrigin=`${c} ${u} ${h}`}}const af=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function wk(t,e,n){for(const r in e)!Ut(e[r])&&!bk(r,n)&&(t[r]=e[r])}function KE({transformTemplate:t},e){return k.useMemo(()=>{const n=af();return sf(n,e,t),Object.assign({},n.vars,n.style)},[e])}function QE(t,e){const n=t.style||{},r={};return wk(r,n,t),Object.assign(r,KE(t,e)),r}function YE(t,e){const n={},r=QE(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const XE={offset:"stroke-dashoffset",array:"stroke-dasharray"},JE={offset:"strokeDashoffset",array:"strokeDasharray"};function ZE(t,e,n=1,r=0,s=!0){t.pathLength=1;const a=s?XE:JE;t[a.offset]=Ae.transform(-r);const o=Ae.transform(e),l=Ae.transform(n);t[a.array]=`${o} ${l}`}function kk(t,{attrX:e,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:o=0,...l},c,u,h){if(sf(t,l,u),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:p,style:m}=t;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=(h==null?void 0:h.transformBox)??"fill-box",delete p.transformBox),e!==void 0&&(p.x=e),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),s!==void 0&&ZE(p,s,a,o,!1)}const jk=()=>({...af(),attrs:{}}),Nk=t=>typeof t=="string"&&t.toLowerCase()==="svg";function eS(t,e,n,r){const s=k.useMemo(()=>{const a=jk();return kk(a,e,Nk(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};wk(a,t.style,t),s.style={...a,...s.style}}return s}const tS=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function of(t){return typeof t!="string"||t.includes("-")?!1:!!(tS.indexOf(t)>-1||/[A-Z]/u.test(t))}function nS(t,e,n,{latestValues:r},s,a=!1){const l=(of(t)?eS:YE)(e,r,s,t),c=BE(e,typeof t=="string",a),u=t!==k.Fragment?{...c,...l,ref:n}:{},{children:h}=e,p=k.useMemo(()=>Ut(h)?h.get():h,[h]);return k.createElement(t,{...u,children:p})}function Ey(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function lf(t,e,n,r){if(typeof e=="function"){const[s,a]=Ey(r);e=e(n!==void 0?n:t.custom,s,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,a]=Ey(r);e=e(n!==void 0?n:t.custom,s,a)}return e}function zc(t){return Ut(t)?t.get():t}function rS({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,s){return{latestValues:iS(n,r,s,t),renderState:e()}}function iS(t,e,n,r){const s={},a=r(t,{});for(const m in a)s[m]=zc(a[m]);let{initial:o,animate:l}=t;const c=Zd(t),u=vk(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Jd(p)){const m=Array.isArray(p)?p:[p];for(let y=0;y<m.length;y++){const j=lf(t,m[y]);if(j){const{transitionEnd:_,transition:T,...v}=j;for(const w in v){let N=v[w];if(Array.isArray(N)){const P=h?N.length-1:0;N=N[P]}N!==null&&(s[w]=N)}for(const w in _)s[w]=_[w]}}}return s}const zk=t=>(e,n)=>{const r=k.useContext(Xd),s=k.useContext(Qd),a=()=>rS(t,e,r,s);return n?a():Pi(a)};function cf(t,e,n){var a;const{style:r}=t,s={};for(const o in r)(Ut(r[o])||e.style&&Ut(e.style[o])||bk(o,t)||((a=n==null?void 0:n.getValue(o))==null?void 0:a.liveStyle)!==void 0)&&(s[o]=r[o]);return s}const sS=zk({scrapeMotionValuesFromProps:cf,createRenderState:af});function _k(t,e,n){const r=cf(t,e,n);for(const s in t)if(Ut(t[s])||Ut(e[s])){const a=ka.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=t[s]}return r}const aS=zk({scrapeMotionValuesFromProps:_k,createRenderState:jk}),oS=Symbol.for("motionComponentSymbol");function Bs(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function lS(t,e,n){return k.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Bs(n)&&(n.current=r))},[e])}const df=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),cS="framerAppearId",Ck="data-"+df(cS),Ek=k.createContext({});function dS(t,e,n,r,s){var _,T;const{visualElement:a}=k.useContext(Xd),o=k.useContext(xk),l=k.useContext(Qd),c=k.useContext(Yd).reducedMotion,u=k.useRef(null);r=r||o.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=u.current,p=k.useContext(Ek);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&uS(u.current,n,s,p);const m=k.useRef(!1);k.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const y=n[Ck],j=k.useRef(!!y&&!((_=window.MotionHandoffIsComplete)!=null&&_.call(window,y))&&((T=window.MotionHasOptimisedAnimation)==null?void 0:T.call(window,y)));return Dp(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),j.current&&h.animationState&&h.animationState.animateChanges())}),k.useEffect(()=>{h&&(!j.current&&h.animationState&&h.animationState.animateChanges(),j.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)==null||v.call(window,y)}),j.current=!1),h.enteringChildren=void 0)}),h}function uS(t,e,n,r){const{layoutId:s,layout:a,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:h}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:Sk(t.parent)),t.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!o||l&&Bs(l),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:u})}function Sk(t){if(t)return t.options.allowProjection!==!1?t.projection:Sk(t.parent)}function mh(t,{forwardMotionProps:e=!1}={},n,r){n&&VE(n);const s=of(t)?aS:sS;function a(l,c){let u;const h={...k.useContext(Yd),...l,layoutId:hS(l)},{isStatic:p}=h,m=$E(l),y=s(l,p);if(!p&&Rp){mS();const j=pS(h);u=j.MeasureLayout,m.visualElement=dS(t,y,h,r,j.ProjectionNode)}return i.jsxs(Xd.Provider,{value:m,children:[u&&m.visualElement?i.jsx(u,{visualElement:m.visualElement,...h}):null,nS(t,l,lS(y,m.visualElement,c),y,p,e)]})}a.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=k.forwardRef(a);return o[oS]=t,o}function hS({layoutId:t}){const e=k.useContext(Pp).id;return e&&t!==void 0?e+"-"+t:t}function mS(t,e){k.useContext(xk).strict}function pS(t){const{drag:e,layout:n}=ca;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function fS(t,e){if(typeof Proxy>"u")return mh;const n=new Map,r=(a,o)=>mh(a,o,t,e),s=(a,o)=>r(a,o);return new Proxy(s,{get:(a,o)=>o==="create"?r:(n.has(o)||n.set(o,mh(o,void 0,t,e)),n.get(o))})}function Tk({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function gS({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function xS(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function ph(t){return t===void 0||t===1}function X0({scale:t,scaleX:e,scaleY:n}){return!ph(t)||!ph(e)||!ph(n)}function Ui(t){return X0(t)||Ik(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Ik(t){return Sy(t.x)||Sy(t.y)}function Sy(t){return t&&t!=="0%"}function ud(t,e,n){const r=t-n,s=e*r;return n+s}function Ty(t,e,n,r,s){return s!==void 0&&(t=ud(t,s,r)),ud(t,n,r)+e}function J0(t,e=0,n=1,r,s){t.min=Ty(t.min,e,n,r,s),t.max=Ty(t.max,e,n,r,s)}function Ak(t,{x:e,y:n}){J0(t.x,e.translate,e.scale,e.originPoint),J0(t.y,n.translate,n.scale,n.originPoint)}const Iy=.999999999999,Ay=1.0000000000001;function yS(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let a,o;for(let l=0;l<s;l++){a=n[l],o=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&$s(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Ak(t,o)),r&&Ui(a.latestValues)&&$s(t,a.latestValues))}e.x<Ay&&e.x>Iy&&(e.x=1),e.y<Ay&&e.y>Iy&&(e.y=1)}function Us(t,e){t.min=t.min+e,t.max=t.max+e}function Py(t,e,n,r,s=.5){const a=dt(t.min,t.max,s);J0(t,e,n,a,r)}function $s(t,e){Py(t.x,e.x,e.scaleX,e.scale,e.originX),Py(t.y,e.y,e.scaleY,e.scale,e.originY)}function Pk(t,e){return Tk(xS(t.getBoundingClientRect(),e))}function vS(t,e,n){const r=Pk(t,n),{scroll:s}=e;return s&&(Us(r.x,s.offset.x),Us(r.y,s.offset.y)),r}const Ry=()=>({translate:0,scale:1,origin:0,originPoint:0}),qs=()=>({x:Ry(),y:Ry()}),Dy=()=>({min:0,max:0}),St=()=>({x:Dy(),y:Dy()}),Z0={current:null},Rk={current:!1};function bS(){if(Rk.current=!0,!!Rp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Z0.current=t.matches;t.addEventListener("change",e),e()}else Z0.current=!1}const wS=new WeakMap;function kS(t,e,n){for(const r in e){const s=e[r],a=n[r];if(Ut(s))t.addValue(r,s);else if(Ut(a))t.addValue(r,ls(s,{owner:t}));else if(a!==s)if(t.hasValue(r)){const o=t.getValue(r);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(r);t.addValue(r,ls(o!==void 0?o:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const My=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class jS{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Xp,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=vn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ot.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Zd(n),this.isVariantNode=vk(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const y=p[m];c[m]!==void 0&&Ut(y)&&y.set(c[m])}}mount(e){var n;this.current=e,wS.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,s)=>this.bindToMotionValue(s,r)),Rk.current||bS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Z0.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),Fr(this.notifyUpdate),Fr(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const r=this.features[n];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=ja.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ca){const n=ca[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):St()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<My.length;r++){const s=My[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,o=e[a];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=kS(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ls(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(N2(r)||_2(r))?r=parseFloat(r):!IE(r)&&ki.test(n)&&(r=ck(e,n)),this.setBaseTarget(e,Ut(r)?r.get():r)),Ut(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const o=lf(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);o&&(r=o[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ut(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Fp),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){ef.render(this.render)}}class Dk extends jS{constructor(){super(...arguments),this.KeyframeResolver=yE}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ut(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Mk(t,{style:e,vars:n},r,s){const a=t.style;let o;for(o in e)a[o]=e[o];s==null||s.applyProjectionStyles(a,r);for(o in n)a.setProperty(o,n[o])}function NS(t){return window.getComputedStyle(t)}class zS extends Dk{constructor(){super(...arguments),this.type="html",this.renderInstance=Mk}readValueFromInstance(e,n){var r;if(ja.has(n))return(r=this.projection)!=null&&r.isProjecting?$0(n):LC(e,n);{const s=NS(e),a=(F2(n)?s.getPropertyValue(n):s[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Pk(e,n)}build(e,n,r){sf(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return cf(e,n,r)}}const Lk=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _S(t,e,n,r){Mk(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(Lk.has(s)?s:df(s),e.attrs[s])}class CS extends Dk{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=St}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ja.has(n)){const r=lk(n);return r&&r.default||0}return n=Lk.has(n)?n:df(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return _k(e,n,r)}build(e,n,r){kk(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,s){_S(e,n,r,s)}mount(e){this.isSVGTag=Nk(e.tagName),super.mount(e)}}const ES=(t,e)=>of(t)?new CS(e):new zS(e,{allowProjection:t!==k.Fragment});function Xs(t,e,n){const r=t.getProps();return lf(r,e,n!==void 0?n:r.custom,t)}const em=t=>Array.isArray(t);function SS(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ls(n))}function TS(t){return em(t)?t[t.length-1]||0:t}function IS(t,e){const n=Xs(t,e);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const o in a){const l=TS(a[o]);SS(t,o,l)}}function AS(t){return!!(Ut(t)&&t.add)}function tm(t,e){const n=t.getValue("willChange");if(AS(n))return n.add(e);if(!n&&Or.WillChange){const r=new Or.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function Vk(t){return t.props[Ck]}const PS=t=>t!==null;function RS(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(PS),a=e&&n!=="loop"&&e%2===1?0:s.length-1;return s[a]}const DS={type:"spring",stiffness:500,damping:25,restSpeed:10},MS=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),LS={type:"keyframes",duration:.8},VS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OS=(t,{keyframes:e})=>e.length>2?LS:ja.has(t)?t.startsWith("scale")?MS(e[1]):DS:VS;function FS({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}const uf=(t,e,n,r={},s,a)=>o=>{const l=Jp(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-hr(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:a?void 0:s};FS(l)||Object.assign(h,OS(t,h)),h.duration&&(h.duration=hr(h.duration)),h.repeatDelay&&(h.repeatDelay=hr(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(K0(h),h.delay===0&&(p=!0)),(Or.instantAnimations||Or.skipAnimations)&&(p=!0,K0(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!a&&e.get()!==void 0){const m=RS(h.keyframes,l);if(m!==void 0){ot.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new Yp(h):new aE(h)};function BS({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Ok(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;r&&(a=r);const c=[],u=s&&t.animationState&&t.animationState.getState()[s];for(const h in l){const p=t.getValue(h,t.latestValues[h]??null),m=l[h];if(m===void 0||u&&BS(u,h))continue;const y={delay:n,...Jp(a||{},h)},j=p.get();if(j!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===j&&!y.velocity)continue;let _=!1;if(window.MotionHandoffAnimation){const v=Vk(t);if(v){const w=window.MotionHandoffAnimation(v,h,ot);w!==null&&(y.startTime=w,_=!0)}}tm(t,h),p.start(uf(h,p,m,t.shouldReduceMotion&&sk.has(h)?{type:!1}:y,t,_));const T=p.animation;T&&c.push(T)}return o&&Promise.all(c).then(()=>{ot.update(()=>{o&&IS(t,o)})}),c}function Fk(t,e,n,r=0,s=1){const a=Array.from(t).sort((u,h)=>u.sortNodePosition(h)).indexOf(e),o=t.size,l=(o-1)*r;return typeof n=="function"?n(a,o):s===1?a*r:l-a*r}function nm(t,e,n={}){var c;const r=Xs(t,e,n.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(Ok(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:h=0,staggerChildren:p,staggerDirection:m}=s;return US(t,e,u,h,p,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,h]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>h())}else return Promise.all([a(),o(n.delay)])}function US(t,e,n=0,r=0,s=0,a=1,o){const l=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),l.push(nm(c,e,{...o,delay:n+(typeof r=="function"?0:r)+Fk(t.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function $S(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(a=>nm(t,a,n));r=Promise.all(s)}else if(typeof e=="string")r=nm(t,e,n);else{const s=typeof e=="function"?Xs(t,e,n.custom):e;r=Promise.all(Ok(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function Bk(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const qS=rf.length;function Uk(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?Uk(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<qS;n++){const r=rf[n],s=t.props[r];(Jo(s)||s===!1)&&(e[r]=s)}return e}const WS=[...nf].reverse(),HS=nf.length;function GS(t){return e=>Promise.all(e.map(({animation:n,options:r})=>$S(t,n,r)))}function KS(t){let e=GS(t),n=Ly(),r=!0;const s=c=>(u,h)=>{var m;const p=Xs(t,h,c==="exit"?(m=t.presenceContext)==null?void 0:m.custom:void 0);if(p){const{transition:y,transitionEnd:j,..._}=p;u={...u,..._,...j}}return u};function a(c){e=c(t)}function o(c){const{props:u}=t,h=Uk(t.parent)||{},p=[],m=new Set;let y={},j=1/0;for(let T=0;T<HS;T++){const v=WS[T],w=n[v],N=u[v]!==void 0?u[v]:h[v],P=Jo(N),L=v===c?w.isActive:null;L===!1&&(j=T);let R=N===h[v]&&N!==u[v]&&P;if(R&&r&&t.manuallyAnimateOnMount&&(R=!1),w.protectedKeys={...y},!w.isActive&&L===null||!N&&!w.prevProp||Jd(N)||typeof N=="boolean")continue;const b=QS(w.prevProp,N);let g=b||v===c&&w.isActive&&!R&&P||T>j&&P,z=!1;const C=Array.isArray(N)?N:[N];let D=C.reduce(s(v),{});L===!1&&(D={});const{prevResolvedValues:M={}}=w,I={...M,...D},xe=de=>{g=!0,m.has(de)&&(z=!0,m.delete(de)),w.needsAnimating[de]=!0;const J=t.getValue(de);J&&(J.liveStyle=!1)};for(const de in I){const J=D[de],oe=M[de];if(y.hasOwnProperty(de))continue;let le=!1;em(J)&&em(oe)?le=!Bk(J,oe):le=J!==oe,le?J!=null?xe(de):m.add(de):J!==void 0&&m.has(de)?xe(de):w.protectedKeys[de]=!0}w.prevProp=N,w.prevResolvedValues=D,w.isActive&&(y={...y,...D}),r&&t.blockInitialAnimation&&(g=!1);const ve=R&&b;g&&(!ve||z)&&p.push(...C.map(de=>{const J={type:v};if(typeof de=="string"&&r&&!ve&&t.manuallyAnimateOnMount&&t.parent){const{parent:oe}=t,le=Xs(oe,de);if(oe.enteringChildren&&le){const{delayChildren:ke}=le.transition||{};J.delay=Fk(oe.enteringChildren,t,ke)}}return{animation:de,options:J}}))}if(m.size){const T={};if(typeof u.initial!="boolean"){const v=Xs(t,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(T.transition=v.transition)}m.forEach(v=>{const w=t.getBaseTarget(v),N=t.getValue(v);N&&(N.liveStyle=!0),T[v]=w??null}),p.push({animation:T})}let _=!!p.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(_=!1),r=!1,_?e(p):Promise.resolve()}function l(c,u){var p;if(n[c].isActive===u)return Promise.resolve();(p=t.variantChildren)==null||p.forEach(m=>{var y;return(y=m.animationState)==null?void 0:y.setActive(c,u)}),n[c].isActive=u;const h=o(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Ly()}}}function QS(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Bk(e,t):!1}function Oi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ly(){return{animate:Oi(!0),whileInView:Oi(),whileHover:Oi(),whileTap:Oi(),whileDrag:Oi(),whileFocus:Oi(),exit:Oi()}}class Ri{constructor(e){this.isMounted=!1,this.node=e}update(){}}class YS extends Ri{constructor(e){super(e),e.animationState||(e.animationState=KS(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Jd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let XS=0;class JS extends Ri{constructor(){super(...arguments),this.id=XS++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const ZS={animation:{Feature:YS},exit:{Feature:JS}};function Zo(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function xl(t){return{point:{x:t.pageX,y:t.pageY}}}const eT=t=>e=>tf(e)&&t(e,xl(e));function zo(t,e,n,r){return Zo(t,e,eT(n),r)}const $k=1e-4,tT=1-$k,nT=1+$k,qk=.01,rT=0-qk,iT=0+qk;function ln(t){return t.max-t.min}function sT(t,e,n){return Math.abs(t-e)<=n}function Vy(t,e,n,r=.5){t.origin=r,t.originPoint=dt(e.min,e.max,t.origin),t.scale=ln(n)/ln(e),t.translate=dt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=tT&&t.scale<=nT||isNaN(t.scale))&&(t.scale=1),(t.translate>=rT&&t.translate<=iT||isNaN(t.translate))&&(t.translate=0)}function _o(t,e,n,r){Vy(t.x,e.x,n.x,r?r.originX:void 0),Vy(t.y,e.y,n.y,r?r.originY:void 0)}function Oy(t,e,n){t.min=n.min+e.min,t.max=t.min+ln(e)}function aT(t,e,n){Oy(t.x,e.x,n.x),Oy(t.y,e.y,n.y)}function Fy(t,e,n){t.min=e.min-n.min,t.max=t.min+ln(e)}function hd(t,e,n){Fy(t.x,e.x,n.x),Fy(t.y,e.y,n.y)}function An(t){return[t("x"),t("y")]}const Wk=({current:t})=>t?t.ownerDocument.defaultView:null,By=(t,e)=>Math.abs(t-e);function oT(t,e){const n=By(t.x,e.x),r=By(t.y,e.y);return Math.sqrt(n**2+r**2)}class Hk{constructor(e,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=gh(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,j=oT(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!j)return;const{point:_}=m,{timestamp:T}=Ot;this.history.push({..._,timestamp:T});const{onStart:v,onMove:w}=this.handlers;y||(v&&v(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,m)},this.handlePointerMove=(m,y)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=fh(y,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(m,y)=>{this.end();const{onEnd:j,onSessionEnd:_,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=gh(m.type==="pointercancel"?this.lastMoveEventInfo:fh(y,this.transformPagePoint),this.history);this.startEvent&&j&&j(m,v),_&&_(m,v)},!tf(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=s||window;const l=xl(e),c=fh(l,this.transformPagePoint),{point:u}=c,{timestamp:h}=Ot;this.history=[{...u,timestamp:h}];const{onSessionStart:p}=n;p&&p(e,gh(c,this.history)),this.removeListeners=pl(zo(this.contextWindow,"pointermove",this.handlePointerMove),zo(this.contextWindow,"pointerup",this.handlePointerUp),zo(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Fr(this.updatePoint)}}function fh(t,e){return e?{point:e(t.point)}:t}function Uy(t,e){return{x:t.x-e.x,y:t.y-e.y}}function gh({point:t},e){return{point:t,delta:Uy(t,Gk(e)),offset:Uy(t,lT(e)),velocity:cT(e,.1)}}function lT(t){return t[0]}function Gk(t){return t[t.length-1]}function cT(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=Gk(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>hr(e)));)n--;if(!r)return{x:0,y:0};const a=On(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const o={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function dT(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?dt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?dt(n,t,r.max):Math.min(t,n)),t}function $y(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function uT(t,{top:e,left:n,bottom:r,right:s}){return{x:$y(t.x,n,s),y:$y(t.y,e,r)}}function qy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function hT(t,e){return{x:qy(t.x,e.x),y:qy(t.y,e.y)}}function mT(t,e){let n=.5;const r=ln(t),s=ln(e);return s>r?n=Qo(e.min,e.max-r,t.min):r>s&&(n=Qo(t.min,t.max-s,e.min)),Vr(0,1,n)}function pT(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const rm=.35;function fT(t=rm){return t===!1?t=0:t===!0&&(t=rm),{x:Wy(t,"left","right"),y:Wy(t,"top","bottom")}}function Wy(t,e,n){return{min:Hy(t,e),max:Hy(t,n)}}function Hy(t,e){return typeof t=="number"?t:t[e]||0}const gT=new WeakMap;class xT{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=St(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(xl(p).point)},o=(p,m)=>{const{drag:y,dragPropagation:j,onDragStart:_}=this.getProps();if(y&&!j&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kE(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),An(v=>{let w=this.getAxisMotionValue(v).get()||0;if(mr.test(w)){const{projection:N}=this.visualElement;if(N&&N.layout){const P=N.layout.layoutBox[v];P&&(w=ln(P)*(parseFloat(w)/100))}}this.originPoint[v]=w}),_&&ot.postRender(()=>_(p,m)),tm(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:y,dragDirectionLock:j,onDirectionLock:_,onDrag:T}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:v}=m;if(j&&this.currentDirection===null){this.currentDirection=yT(v),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",m.point,v),this.updateAxis("y",m.point,v),this.visualElement.render(),T&&T(p,m)},c=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>An(p=>{var m;return this.getAnimationState(p)==="paused"&&((m=this.getAxisMotionValue(p).animation)==null?void 0:m.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new Hk(e,{onSessionStart:a,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:Wk(this.visualElement)})}stop(e,n){const r=e||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&ot.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!tc(e,s,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=dT(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var a;const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;e&&Bs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=uT(r.layoutBox,e):this.constraints=!1,this.elastic=fT(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&An(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=pT(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Bs(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=vS(r,s.root,this.visualElement.getTransformPagePoint());let o=hT(s.layout.layoutBox,a);if(n){const l=n(gS(o));this.hasMutatedConstraints=!!l,l&&(o=Tk(l))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=An(h=>{if(!tc(h,n,this.currentDirection))return;let p=c&&c[h]||{};o&&(p={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,j={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...p};return this.startAxisValueAnimation(h,j)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return tm(this.visualElement,e),r.start(uf(e,r,0,n,this.visualElement,!1))}stopAnimation(){An(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){An(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){An(n=>{const{drag:r}=this.getProps();if(!tc(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[n];a.set(e[n]-dt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Bs(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};An(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=mT({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),An(o=>{if(!tc(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(dt(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;gT.set(this.visualElement,this);const e=this.visualElement.current,n=zo(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Bs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ot.read(r);const o=Zo(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(An(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:o=rm,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function tc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function yT(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class vT extends Ri{constructor(e){super(e),this.removeGroupControls=Bn,this.removeListeners=Bn,this.controls=new xT(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Bn}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gy=t=>(e,n)=>{t&&ot.postRender(()=>t(e,n))};class bT extends Ri{constructor(){super(...arguments),this.removePointerDownListener=Bn}onPointerDown(e){this.session=new Hk(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Wk(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Gy(e),onStart:Gy(n),onMove:r,onEnd:(a,o)=>{delete this.session,s&&ot.postRender(()=>s(a,o))}}}mount(){this.removePointerDownListener=zo(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const _c={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let xh=!1;class wT extends k.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=e;a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),xh&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),_c.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:o}=r;return o&&(o.isPresent=a,xh=!0,s||e.layoutDependency!==n||n===void 0||e.isPresent!==a?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||ot.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),ef.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;xh=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Kk(t){const[e,n]=gk(),r=k.useContext(Pp);return i.jsx(wT,{...t,layoutGroup:r,switchLayoutGroup:k.useContext(Ek),isPresent:e,safeToRemove:n})}function kT(t,e,n){const r=Ut(t)?t:ls(t);return r.start(uf("",r,e,n)),r.animation}const jT=(t,e)=>t.depth-e.depth;class NT{constructor(){this.children=[],this.isDirty=!1}add(e){Mp(this.children,e),this.isDirty=!0}remove(e){Lp(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(jT),this.isDirty=!1,this.children.forEach(e)}}function zT(t,e){const n=vn.now(),r=({timestamp:s})=>{const a=s-n;a>=e&&(Fr(r),t(a-e))};return ot.setup(r,!0),()=>Fr(r)}const Qk=["TopLeft","TopRight","BottomLeft","BottomRight"],_T=Qk.length,Ky=t=>typeof t=="string"?parseFloat(t):t,Qy=t=>typeof t=="number"||Ae.test(t);function CT(t,e,n,r,s,a){s?(t.opacity=dt(0,n.opacity??1,ET(r)),t.opacityExit=dt(e.opacity??1,0,ST(r))):a&&(t.opacity=dt(e.opacity??1,n.opacity??1,r));for(let o=0;o<_T;o++){const l=`border${Qk[o]}Radius`;let c=Yy(e,l),u=Yy(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Qy(c)===Qy(u)?(t[l]=Math.max(dt(Ky(c),Ky(u),r),0),(mr.test(u)||mr.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=dt(e.rotate||0,n.rotate||0,r))}function Yy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const ET=Yk(0,.5,R2),ST=Yk(.5,.95,Bn);function Yk(t,e,n){return r=>r<t?0:r>e?1:n(Qo(t,e,r))}function Xy(t,e){t.min=e.min,t.max=e.max}function Gn(t,e){Xy(t.x,e.x),Xy(t.y,e.y)}function Jy(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Zy(t,e,n,r,s){return t-=e,t=ud(t,1/n,r),s!==void 0&&(t=ud(t,1/s,r)),t}function TT(t,e=0,n=1,r=.5,s,a=t,o=t){if(mr.test(e)&&(e=parseFloat(e),e=dt(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=dt(a.min,a.max,r);t===a&&(l-=e),t.min=Zy(t.min,e,n,l,s),t.max=Zy(t.max,e,n,l,s)}function ev(t,e,[n,r,s],a,o){TT(t,e[n],e[r],e[s],e.scale,a,o)}const IT=["x","scaleX","originX"],AT=["y","scaleY","originY"];function tv(t,e,n,r){ev(t.x,e,IT,n?n.x:void 0,r?r.x:void 0),ev(t.y,e,AT,n?n.y:void 0,r?r.y:void 0)}function nv(t){return t.translate===0&&t.scale===1}function Xk(t){return nv(t.x)&&nv(t.y)}function rv(t,e){return t.min===e.min&&t.max===e.max}function PT(t,e){return rv(t.x,e.x)&&rv(t.y,e.y)}function iv(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Jk(t,e){return iv(t.x,e.x)&&iv(t.y,e.y)}function sv(t){return ln(t.x)/ln(t.y)}function av(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class RT{constructor(){this.members=[]}add(e){Mp(this.members,e),e.scheduleRender()}remove(e){if(Lp(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function DT(t,e,n){let r="";const s=t.x.translate/e.x,a=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((s||a||o)&&(r=`translate3d(${s}px, ${a}px, ${o}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:h,rotateX:p,rotateY:m,skewX:y,skewY:j}=n;u&&(r=`perspective(${u}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),y&&(r+=`skewX(${y}deg) `),j&&(r+=`skewY(${j}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const yh=["","X","Y","Z"],MT=1e3;let LT=0;function vh(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function Zk(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=Vk(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ot,!(s||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&Zk(r)}function ej({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=LT++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(FT),this.nodes.forEach(qT),this.nodes.forEach(WT),this.nodes.forEach(BT)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new NT)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Fp),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=fk(o)&&!EE(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),t){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;ot.read(()=>{p=window.innerWidth}),t(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=zT(m,250),_c.hasAnimatedSinceResize&&(_c.hasAnimatedSinceResize=!1,this.nodes.forEach(cv)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const j=this.options.transition||u.getDefaultTransition()||YT,{onLayoutAnimationStart:_,onLayoutAnimationComplete:T}=u.getProps(),v=!this.targetLayout||!Jk(this.targetLayout,y),w=!p&&m;if(this.options.layoutRoot||this.resumeFrom||w||p&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const N={...Jp(j,"layout"),onPlay:_,onComplete:T};(u.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N),this.setAnimationOrigin(h,w)}else p||cv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HT),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Zk(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ov);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(lv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach($T),this.nodes.forEach(VT),this.nodes.forEach(OT)):this.nodes.forEach(lv),this.clearAllSnapshots();const l=vn.now();Ot.delta=Vr(0,1e3/60,l-Ot.timestamp),Ot.timestamp=l,Ot.isProcessing=!0,oh.update.process(Ot),oh.preRender.process(Ot),oh.render.process(Ot),Ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ef.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(UT),this.sharedNodes.forEach(GT)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ln(this.snapshot.measuredBox.x)&&!ln(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=St(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Xk(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Ui(this.latestValues)||h)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),XT(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:o}=this.options;if(!o)return St();const l=o.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(JT))){const{scroll:h}=this.root;h&&(Us(l.x,h.offset.x),Us(l.y,h.offset.y))}return l}removeElementScroll(o){var c;const l=St();if(Gn(l,o),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const h=this.path[u],{scroll:p,options:m}=h;h!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&Gn(l,o),Us(l.x,p.offset.x),Us(l.y,p.offset.y))}return l}applyTransform(o,l=!1){const c=St();Gn(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&$s(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ui(h.latestValues)&&$s(c,h.latestValues)}return Ui(this.latestValues)&&$s(c,this.latestValues),c}removeTransform(o){const l=St();Gn(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Ui(u.latestValues))continue;X0(u.latestValues)&&u.updateSnapshot();const h=St(),p=u.measurePageBox();Gn(h,p),tv(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return Ui(this.latestValues)&&tv(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var y;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!this.layout||!(h||p))return;this.resolvedRelativeTargetAt=Ot.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=St(),this.targetWithTransforms=St()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),aT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gn(this.target,this.layout.layoutBox),Ak(this.target,this.targetDelta)):Gn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||X0(this.parent.latestValues)||Ik(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=St(),this.relativeTargetOrigin=St(),hd(this.relativeTargetOrigin,l,c),Gn(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){var j;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(j=this.parent)!=null&&j.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ot.timestamp&&(c=!1),c)return;const{layout:u,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||h))return;Gn(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;yS(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=St());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Jy(this.prevProjectionDelta.x,this.projectionDelta.x),Jy(this.prevProjectionDelta.y,this.projectionDelta.y)),_o(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!av(this.projectionDelta.x,this.prevProjectionDelta.x)||!av(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=qs(),this.projectionDelta=qs(),this.projectionDeltaWithTransform=qs()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},p=qs();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=St(),y=c?c.source:void 0,j=this.layout?this.layout.source:void 0,_=y!==j,T=this.getStack(),v=!T||T.members.length<=1,w=!!(_&&!v&&this.options.crossfade===!0&&!this.path.some(QT));this.animationProgress=0;let N;this.mixTargetDelta=P=>{const L=P/1e3;dv(p.x,o.x,L),dv(p.y,o.y,L),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(hd(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KT(this.relativeTarget,this.relativeTargetOrigin,m,L),N&&PT(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=St()),Gn(N,this.relativeTarget)),_&&(this.animationValues=h,CT(h,u,this.latestValues,L,w,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=L},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{_c.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ls(0)),this.currentAnimation=kT(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),o.onUpdate&&o.onUpdate(h)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(MT),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&tj(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||St();const p=ln(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+p;const m=ln(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+m}Gn(l,c),$s(l,h),_o(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new RT),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&vh("z",o,u,this.animationValues);for(let h=0;h<yh.length;h++)vh(`rotate${yh[h]}`,o,u,this.animationValues),vh(`skew${yh[h]}`,o,u,this.animationValues);o.render();for(const h in u)o.setStaticValue(h,u[h]),this.animationValues&&(this.animationValues[h]=u[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=zc(l==null?void 0:l.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=zc(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!Ui(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=u.animationValues||u.latestValues;this.applyTransformsToTarget();let p=DT(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),o.transform=p;const{x:m,y}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${y.origin*100}% 0`,u.animationValues?o.opacity=u===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=u===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const j in Y0){if(h[j]===void 0)continue;const{correct:_,applyTo:T,isCSSVariable:v}=Y0[j],w=p==="none"?h[j]:_(h[j],u);if(T){const N=T.length;for(let P=0;P<N;P++)o[T[P]]=w}else v?this.options.visualElement.renderState.vars[j]=w:o[j]=w}this.options.layoutId&&(o.pointerEvents=u===this?zc(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(ov),this.root.sharedNodes.clear()}}}function VT(t){t.updateLayout()}function OT(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:a}=t.options,o=e.source!==t.layout.source;a==="size"?An(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],y=ln(m);m.min=r[p].min,m.max=m.min+y}):tj(a,e.layoutBox,r)&&An(p=>{const m=o?e.measuredBox[p]:e.layoutBox[p],y=ln(r[p]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[p].max=t.relativeTarget[p].min+y)});const l=qs();_o(l,r,e.layoutBox);const c=qs();o?_o(c,t.applyTransform(s,!0),e.measuredBox):_o(c,r,e.layoutBox);const u=!Xk(l);let h=!1;if(!t.resumeFrom){const p=t.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:y}=p;if(m&&y){const j=St();hd(j,e.layoutBox,m.layoutBox);const _=St();hd(_,r,y.layoutBox),Jk(j,_)||(h=!0),p.options.layoutRoot&&(t.relativeTarget=_,t.relativeTargetOrigin=j,t.relativeParent=p)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function FT(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function BT(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function UT(t){t.clearSnapshot()}function ov(t){t.clearMeasurements()}function lv(t){t.isLayoutDirty=!1}function $T(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function cv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function qT(t){t.resolveTargetDelta()}function WT(t){t.calcProjection()}function HT(t){t.resetSkewAndRotation()}function GT(t){t.removeLeadSnapshot()}function dv(t,e,n){t.translate=dt(e.translate,0,n),t.scale=dt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function uv(t,e,n,r){t.min=dt(e.min,n.min,r),t.max=dt(e.max,n.max,r)}function KT(t,e,n,r){uv(t.x,e.x,n.x,r),uv(t.y,e.y,n.y,r)}function QT(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const YT={duration:.45,ease:[.4,0,.1,1]},hv=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),mv=hv("applewebkit/")&&!hv("chrome/")?Math.round:Bn;function pv(t){t.min=mv(t.min),t.max=mv(t.max)}function XT(t){pv(t.x),pv(t.y)}function tj(t,e,n){return t==="position"||t==="preserve-aspect"&&!sT(sv(e),sv(n),.2)}function JT(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const ZT=ej({attachResizeListener:(t,e)=>Zo(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),bh={current:void 0},nj=ej({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!bh.current){const t=new ZT({});t.mount(window),t.setOptions({layoutScroll:!0}),bh.current=t}return bh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),e3={pan:{Feature:bT},drag:{Feature:vT,ProjectionNode:nj,MeasureLayout:Kk}};function fv(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&ot.postRender(()=>a(e,xl(e)))}class t3 extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=jE(e,(n,r)=>(fv(this.node,r,"Start"),s=>fv(this.node,s,"End"))))}unmount(){}}class n3 extends Ri{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pl(Zo(this.node.current,"focus",()=>this.onFocus()),Zo(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function gv(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&ot.postRender(()=>a(e,xl(e)))}class r3 extends Ri{mount(){const{current:e}=this.node;e&&(this.unmount=CE(e,(n,r)=>(gv(this.node,r,"Start"),(s,{success:a})=>gv(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const im=new WeakMap,wh=new WeakMap,i3=t=>{const e=im.get(t.target);e&&e(t)},s3=t=>{t.forEach(i3)};function a3({root:t,...e}){const n=t||document;wh.has(n)||wh.set(n,{});const r=wh.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(s3,{root:t,...e})),r[s]}function o3(t,e,n){const r=a3(e);return im.set(t,n),r.observe(t),()=>{im.delete(t),r.unobserve(t)}}const l3={some:0,all:1};class c3 extends Ri{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:l3[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=u?h:p;m&&m(c)};return o3(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(d3(e,n))&&this.startObserver()}unmount(){}}function d3({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const u3={inView:{Feature:c3},tap:{Feature:r3},focus:{Feature:n3},hover:{Feature:t3}},h3={layout:{ProjectionNode:nj,MeasureLayout:Kk}},m3={...ZS,...u3,...e3,...h3},B=fS(m3,ES);function md(t){const e=Pi(()=>ls(t)),{isStatic:n}=k.useContext(Yd);if(n){const[,r]=k.useState(t);k.useEffect(()=>e.on("change",r),[])}return e}function rj(t,e){const n=md(e()),r=()=>n.set(e());return r(),Dp(()=>{const s=()=>ot.preRender(r,!1,!0),a=t.map(o=>o.on("change",s));return()=>{a.forEach(o=>o()),Fr(r)}}),n}function p3(t){No.current=[],t();const e=rj(No.current,t);return No.current=void 0,e}function f3(t,e,n,r){if(typeof t=="function")return p3(t);const s=typeof e=="function"?e:SE(e,n,r);return Array.isArray(t)?xv(t,s):xv([t],([a])=>s(a))}function xv(t,e){const n=Pi(()=>[]);return rj(t,()=>{n.length=0;const r=t.length;for(let s=0;s<r;s++)n[s]=t[s].get();return e(n)})}class g3{constructor(){this.componentControls=new Set}subscribe(e){return this.componentControls.add(e),()=>this.componentControls.delete(e)}start(e,n){this.componentControls.forEach(r=>{r.start(e.nativeEvent||e,n)})}cancel(){this.componentControls.forEach(e=>{e.cancel()})}stop(){this.componentControls.forEach(e=>{e.stop()})}}const x3=()=>new g3;function hf(){return Pi(x3)}const ij=k.createContext(null);function y3(t,e,n,r){if(!r)return t;const s=t.findIndex(h=>h.value===e);if(s===-1)return t;const a=r>0?1:-1,o=t[s+a];if(!o)return t;const l=t[s],c=o.layout,u=dt(c.min,c.max,.5);return a===1&&l.layout.max+n>u||a===-1&&l.layout.min+n<u?D_(t,s,s+a):t}function v3({children:t,as:e="ul",axis:n="y",onReorder:r,values:s,...a},o){const l=Pi(()=>B[e]),c=[],u=k.useRef(!1),h={axis:n,registerItem:(p,m)=>{const y=c.findIndex(j=>p===j.value);y!==-1?c[y].layout=m[n]:c.push({value:p,layout:m[n]}),c.sort(w3)},updateOrder:(p,m,y)=>{if(u.current)return;const j=y3(c,p,m,y);c!==j&&(u.current=!0,r(j.map(b3).filter(_=>s.indexOf(_)!==-1)))}};return k.useEffect(()=>{u.current=!1}),i.jsx(l,{...a,ref:o,ignoreStrict:!0,children:i.jsx(ij.Provider,{value:h,children:t})})}const eu=k.forwardRef(v3);function b3(t){return t.value}function w3(t,e){return t.layout.min-e.layout.min}function yv(t,e=0){return Ut(t)?t:md(e)}function k3({children:t,style:e={},value:n,as:r="li",onDrag:s,layout:a=!0,...o},l){const c=Pi(()=>B[r]),u=k.useContext(ij),h={x:yv(e.x),y:yv(e.y)},p=f3([h.x,h.y],([_,T])=>_||T?1:"unset"),{axis:m,registerItem:y,updateOrder:j}=u;return i.jsx(c,{drag:m,...o,dragSnapToOrigin:!0,style:{...e,x:h.x,y:h.y,zIndex:p},layout:a,onDrag:(_,T)=>{const{velocity:v}=T;v[m]&&j(n,h[m].get(),v[m]),s&&s(_,T)},onLayoutMeasure:_=>y(n,_),ref:l,ignoreStrict:!0,children:t})}const tu=k.forwardRef(k3);function vv({value:t,onChange:e}){const n=[{key:"pct",label:"%"},{key:"grams",label:"g"}];return i.jsx("div",{className:"inline-flex rounded-lg bg-gray-200/80 dark:bg-zinc-700/80 p-0.5 backdrop-blur-sm",children:n.map(r=>i.jsx("button",{type:"button",onClick:()=>e==null?void 0:e(r.key),className:`
            relative px-4 py-1.5 text-sm font-semibold rounded-md transition-all duration-200 ease-out
            ${t===r.key?"bg-white dark:bg-zinc-600 text-gray-900 dark:text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}
          `,children:r.label},r.key))})}const mn=t=>{k.useEffect(()=>{const e=window.innerWidth-document.documentElement.clientWidth,n=window.getComputedStyle(document.body).overflow,r=window.getComputedStyle(document.body).paddingRight;return document.body.style.overflow="hidden",e>0&&(document.body.style.paddingRight=`${parseInt(r||0)+e}px`),()=>{document.body.style.overflow=n,document.body.style.paddingRight=r}},[t])},j3=()=>{};var bv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},N3=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},aj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,h=a>>2,p=(a&3)<<4|l>>4;let m=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(m=64)),r.push(n[h],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(sj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):N3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||l==null||u==null||p==null)throw new z3;const m=a<<2|l>>4;if(r.push(m),u!==64){const y=l<<4&240|u>>2;if(r.push(y),p!==64){const j=u<<6&192|p;r.push(j)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _3=function(t){const e=sj(t);return aj.encodeByteArray(e,!0)},pd=function(t){return _3(t).replace(/\./g,"")},C3=function(t){try{return aj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=()=>E3().__FIREBASE_DEFAULTS__,T3=()=>{if(typeof process>"u"||typeof bv>"u")return;const t=bv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},I3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&C3(t[1]);return e&&JSON.parse(e)},mf=()=>{try{return j3()||S3()||T3()||I3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},A3=t=>{var e,n;return(n=(e=mf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},oj=t=>{const e=A3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},lj=()=>{var t;return(t=mf())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function cj(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...t};return[pd(JSON.stringify(n)),pd(JSON.stringify(o)),""].join(".")}const Co={};function R3(){const t={prod:[],emulator:[]};for(const e of Object.keys(Co))Co[e]?t.emulator.push(e):t.prod.push(e);return t}function D3(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let wv=!1;function uj(t,e){if(typeof window>"u"||typeof document>"u"||!nu(window.location.host)||Co[t]===e||Co[t]||wv)return;Co[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",a=R3().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{wv=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=D3(r),y=n("text"),j=document.getElementById(y)||document.createElement("span"),_=n("learnmore"),T=document.getElementById(_)||document.createElement("a"),v=n("preprendIcon"),w=document.getElementById(v)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),h(T,_);const P=u();c(w,v),N.append(w,j,T,P),document.body.appendChild(N)}a?(j.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L3(){var e;const t=(e=mf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function V3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function O3(){return!L3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hj(){try{return typeof indexedDB=="object"}catch{return!1}}function mj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)==null?void 0:a.message)||"")}}catch(n){e(n)}})}function F3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3="FirebaseError";class Hr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=B3,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ru.prototype.create)}}class ru{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?U3(a,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Hr(s,l,r)}}function U3(t,e){return t.replace($3,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const $3=/\{\$([^}]+)}/g;function el(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(kv(a)&&kv(o)){if(!el(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function kv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=1e3,W3=2,H3=4*60*60*1e3,G3=.5;function jv(t,e=q3,n=W3){const r=e*Math.pow(n,t),s=Math.round(G3*r*(Math.random()-.5)*2);return Math.min(H3,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t){return t&&t._delegate?t._delegate:t}class br{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $i="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new P3;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Y3(e))try{this.getOrInitializeService({instanceIdentifier:$i})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=$i){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$i){return this.instances.has(e)}getOptions(e=$i){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const a=this.instances.get(r);return a&&e(a,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Q3(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$i){return this.component?this.component.multipleInstances?e:$i:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Q3(t){return t===$i?void 0:t}function Y3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new K3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const J3={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},Z3=We.INFO,eI={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},tI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=eI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pf{constructor(e){this.name=e,this._logLevel=Z3,this._logHandler=tI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?J3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const nI=(t,e)=>e.some(n=>t instanceof n);let Nv,zv;function rI(){return Nv||(Nv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function iI(){return zv||(zv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pj=new WeakMap,sm=new WeakMap,fj=new WeakMap,kh=new WeakMap,ff=new WeakMap;function sI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(gi(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&pj.set(n,t)}).catch(()=>{}),ff.set(e,t),e}function aI(t){if(sm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});sm.set(t,e)}let am={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||fj.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function oI(t){am=t(am)}function lI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(jh(this),e,...n);return fj.set(r,e.sort?e.sort():[e]),gi(r)}:iI().includes(t)?function(...e){return t.apply(jh(this),e),gi(pj.get(this))}:function(...e){return gi(t.apply(jh(this),e))}}function cI(t){return typeof t=="function"?lI(t):(t instanceof IDBTransaction&&aI(t),nI(t,rI())?new Proxy(t,am):t)}function gi(t){if(t instanceof IDBRequest)return sI(t);if(kh.has(t))return kh.get(t);const e=cI(t);return e!==t&&(kh.set(t,e),ff.set(e,t)),e}const jh=t=>ff.get(t);function gj(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=gi(o);return r&&o.addEventListener("upgradeneeded",c=>{r(gi(o.result),c.oldVersion,c.newVersion,gi(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{a&&c.addEventListener("close",()=>a()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const dI=["get","getKey","getAll","getAllKeys","count"],uI=["put","add","delete","clear"],Nh=new Map;function _v(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nh.get(e))return Nh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=uI.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||dI.includes(n)))return;const a=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Nh.set(e,a),a}oI(t=>({...t,get:(e,n,r)=>_v(e,n)||t.get(e,n,r),has:(e,n)=>!!_v(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const om="@firebase/app",Cv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new pf("@firebase/app"),pI="@firebase/app-compat",fI="@firebase/analytics-compat",gI="@firebase/analytics",xI="@firebase/app-check-compat",yI="@firebase/app-check",vI="@firebase/auth",bI="@firebase/auth-compat",wI="@firebase/database",kI="@firebase/data-connect",jI="@firebase/database-compat",NI="@firebase/functions",zI="@firebase/functions-compat",_I="@firebase/installations",CI="@firebase/installations-compat",EI="@firebase/messaging",SI="@firebase/messaging-compat",TI="@firebase/performance",II="@firebase/performance-compat",AI="@firebase/remote-config",PI="@firebase/remote-config-compat",RI="@firebase/storage",DI="@firebase/storage-compat",MI="@firebase/firestore",LI="@firebase/ai",VI="@firebase/firestore-compat",OI="firebase",FI="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="[DEFAULT]",BI={[om]:"fire-core",[pI]:"fire-core-compat",[gI]:"fire-analytics",[fI]:"fire-analytics-compat",[yI]:"fire-app-check",[xI]:"fire-app-check-compat",[vI]:"fire-auth",[bI]:"fire-auth-compat",[wI]:"fire-rtdb",[kI]:"fire-data-connect",[jI]:"fire-rtdb-compat",[NI]:"fire-fn",[zI]:"fire-fn-compat",[_I]:"fire-iid",[CI]:"fire-iid-compat",[EI]:"fire-fcm",[SI]:"fire-fcm-compat",[TI]:"fire-perf",[II]:"fire-perf-compat",[AI]:"fire-rc",[PI]:"fire-rc-compat",[RI]:"fire-gcs",[DI]:"fire-gcs-compat",[MI]:"fire-fst",[VI]:"fire-fst-compat",[LI]:"fire-vertex","fire-js":"fire-js",[OI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fd=new Map,UI=new Map,cm=new Map;function Ev(t,e){try{t.container.addComponent(e)}catch(n){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ur(t){const e=t.name;if(cm.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;cm.set(e,t);for(const n of fd.values())Ev(n,t);for(const n of UI.values())Ev(n,t);return!0}function Na(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function xj(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xi=new ru("app","Firebase",$I);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj=FI;function vj(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lm,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw xi.create("bad-app-name",{appName:String(s)});if(n||(n=lj()),!n)throw xi.create("no-options");const a=fd.get(s);if(a){if(el(n,a.options)&&el(r,a.config))return a;throw xi.create("duplicate-app",{appName:s})}const o=new X3(s);for(const c of cm.values())o.addComponent(c);const l=new qI(n,r,o);return fd.set(s,l),l}function gf(t=lm){const e=fd.get(t);if(!e&&t===lm&&lj())return vj();if(!e)throw xi.create("no-app",{appName:t});return e}function Un(t,e,n){let r=BI[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(o.join(" "));return}Ur(new br(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="firebase-heartbeat-database",HI=1,tl="firebase-heartbeat-store";let zh=null;function bj(){return zh||(zh=gj(WI,HI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tl)}catch(n){console.warn(n)}}}}).catch(t=>{throw xi.create("idb-open",{originalErrorMessage:t.message})})),zh}async function GI(t){try{const n=(await bj()).transaction(tl),r=await n.objectStore(tl).get(wj(t));return await n.done,r}catch(e){if(e instanceof Hr)Br.warn(e.message);else{const n=xi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(n.message)}}}async function Sv(t,e){try{const r=(await bj()).transaction(tl,"readwrite");await r.objectStore(tl).put(e,wj(t)),await r.done}catch(n){if(n instanceof Hr)Br.warn(n.message);else{const r=xi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Br.warn(r.message)}}}function wj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=1024,QI=30;class YI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new JI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Tv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>QI){const o=ZI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Br.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tv(),{heartbeatsToSend:r,unsentEntries:s}=XI(this._heartbeatsCache.heartbeats),a=pd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Br.warn(n),""}}}function Tv(){return new Date().toISOString().substring(0,10)}function XI(t,e=KI){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),Iv(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Iv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class JI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hj()?mj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await GI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Sv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Iv(t){return pd(JSON.stringify({version:2,heartbeats:t})).length}function ZI(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t){Ur(new br("platform-logger",e=>new hI(e),"PRIVATE")),Ur(new br("heartbeat",e=>new YI(e),"PRIVATE")),Un(om,Cv,t),Un(om,Cv,"esm2020"),Un("fire-js","")}eA("");var tA="firebase",nA="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Un(tA,nA,"app");const kj="@firebase/installations",xf="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=1e4,Nj=`w:${xf}`,zj="FIS_v2",rA="https://firebaseinstallations.googleapis.com/v1",iA=60*60*1e3,sA="installations",aA="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},cs=new ru(sA,aA,oA);function _j(t){return t instanceof Hr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj({projectId:t}){return`${rA}/projects/${t}/installations`}function Ej(t){return{token:t.token,requestStatus:2,expiresIn:cA(t.expiresIn),creationTime:Date.now()}}async function Sj(t,e){const r=(await e.json()).error;return cs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Tj({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function lA(t,{refreshToken:e}){const n=Tj(t);return n.append("Authorization",dA(e)),n}async function Ij(t){const e=await t();return e.status>=500&&e.status<600?t():e}function cA(t){return Number(t.replace("s","000"))}function dA(t){return`${zj} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=Cj(t),s=Tj(t),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:n,authVersion:zj,appId:t.appId,sdkVersion:Nj},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Ij(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Ej(u.authToken)}}else throw await Sj("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=/^[cdef][\w-]{21}$/,dm="";function pA(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=fA(t);return mA.test(n)?n:dm}catch{return dm}}function fA(t){return hA(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=new Map;function Rj(t,e){const n=iu(t);Dj(n,e),gA(n,e)}function Dj(t,e){const n=Pj.get(t);if(n)for(const r of n)r(e)}function gA(t,e){const n=xA();n&&n.postMessage({key:t,fid:e}),yA()}let Yi=null;function xA(){return!Yi&&"BroadcastChannel"in self&&(Yi=new BroadcastChannel("[Firebase] FID Change"),Yi.onmessage=t=>{Dj(t.data.key,t.data.fid)}),Yi}function yA(){Pj.size===0&&Yi&&(Yi.close(),Yi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA="firebase-installations-database",bA=1,ds="firebase-installations-store";let _h=null;function yf(){return _h||(_h=gj(vA,bA,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ds)}}})),_h}async function gd(t,e){const n=iu(t),s=(await yf()).transaction(ds,"readwrite"),a=s.objectStore(ds),o=await a.get(n);return await a.put(e,n),await s.done,(!o||o.fid!==e.fid)&&Rj(t,e.fid),e}async function Mj(t){const e=iu(t),r=(await yf()).transaction(ds,"readwrite");await r.objectStore(ds).delete(e),await r.done}async function su(t,e){const n=iu(t),s=(await yf()).transaction(ds,"readwrite"),a=s.objectStore(ds),o=await a.get(n),l=e(o);return l===void 0?await a.delete(n):await a.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&Rj(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vf(t){let e;const n=await su(t.appConfig,r=>{const s=wA(r),a=kA(t,s);return e=a.registrationPromise,a.installationEntry});return n.fid===dm?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function wA(t){const e=t||{fid:pA(),registrationStatus:0};return Lj(e)}function kA(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(cs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=jA(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:NA(t)}:{installationEntry:e}}async function jA(t,e){try{const n=await uA(t,e);return gd(t.appConfig,n)}catch(n){throw _j(n)&&n.customData.serverCode===409?await Mj(t.appConfig):await gd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function NA(t){let e=await Av(t.appConfig);for(;e.registrationStatus===1;)await Aj(100),e=await Av(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await vf(t);return r||n}return e}function Av(t){return su(t,e=>{if(!e)throw cs.create("installation-not-found");return Lj(e)})}function Lj(t){return zA(t)?{fid:t.fid,registrationStatus:0}:t}function zA(t){return t.registrationStatus===1&&t.registrationTime+jj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _A({appConfig:t,heartbeatServiceProvider:e},n){const r=CA(t,n),s=lA(t,n),a=e.getImmediate({optional:!0});if(a){const u=await a.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:Nj,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await Ij(()=>fetch(r,l));if(c.ok){const u=await c.json();return Ej(u)}else throw await Sj("Generate Auth Token",c)}function CA(t,{fid:e}){return`${Cj(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(t,e=!1){let n;const r=await su(t.appConfig,a=>{if(!Vj(a))throw cs.create("not-registered");const o=a.authToken;if(!e&&TA(o))return a;if(o.requestStatus===1)return n=EA(t,e),a;{if(!navigator.onLine)throw cs.create("app-offline");const l=AA(a);return n=SA(t,l),l}});return n?await n:r.authToken}async function EA(t,e){let n=await Pv(t.appConfig);for(;n.authToken.requestStatus===1;)await Aj(100),n=await Pv(t.appConfig);const r=n.authToken;return r.requestStatus===0?bf(t,e):r}function Pv(t){return su(t,e=>{if(!Vj(e))throw cs.create("not-registered");const n=e.authToken;return PA(n)?{...e,authToken:{requestStatus:0}}:e})}async function SA(t,e){try{const n=await _A(t,e),r={...e,authToken:n};return await gd(t.appConfig,r),n}catch(n){if(_j(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Mj(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await gd(t.appConfig,r)}throw n}}function Vj(t){return t!==void 0&&t.registrationStatus===2}function TA(t){return t.requestStatus===2&&!IA(t)}function IA(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+iA}function AA(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function PA(t){return t.requestStatus===1&&t.requestTime+jj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t){const e=t,{installationEntry:n,registrationPromise:r}=await vf(e);return r?r.catch(console.error):bf(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e=!1){const n=t;return await MA(n),(await bf(n,e)).token}async function MA(t){const{registrationPromise:e}=await vf(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t){if(!t||!t.options)throw Ch("App Configuration");if(!t.name)throw Ch("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Ch(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Ch(t){return cs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj="installations",VA="installations-internal",OA=t=>{const e=t.getProvider("app").getImmediate(),n=LA(e),r=Na(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},FA=t=>{const e=t.getProvider("app").getImmediate(),n=Na(e,Oj).getImmediate();return{getId:()=>RA(n),getToken:s=>DA(n,s)}};function BA(){Ur(new br(Oj,OA,"PUBLIC")),Ur(new br(VA,FA,"PRIVATE"))}BA();Un(kj,xf);Un(kj,xf,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd="analytics",UA="firebase_id",$A="origin",qA=60*1e3,WA="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",wf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dn=new pf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new ru("analytics","Analytics",HA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){if(!t.startsWith(wf)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return dn.warn(e.message),""}return t}function Fj(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function KA(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function QA(t,e){const n=KA("firebase-js-sdk-policy",{createScriptURL:GA}),r=document.createElement("script"),s=`${wf}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function YA(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function XA(t,e,n,r,s,a){const o=r[s];try{if(o)await e[o];else{const c=(await Fj(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){dn.error(l)}t("config",s,a)}async function JA(t,e,n,r,s){try{let a=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await Fj(n);for(const c of o){const u=l.find(p=>p.measurementId===c),h=u&&e[u.appId];if(h)a.push(h);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),t("event",r,s||{})}catch(a){dn.error(a)}}function ZA(t,e,n,r){async function s(a,...o){try{if(a==="event"){const[l,c]=o;await JA(t,e,n,l,c)}else if(a==="config"){const[l,c]=o;await XA(t,e,n,r,l,c)}else if(a==="consent"){const[l,c]=o;t("consent",l,c)}else if(a==="get"){const[l,c,u]=o;t("get",l,c,u)}else if(a==="set"){const[l]=o;t("set",l)}else t(a,...o)}catch(l){dn.error(l)}}return s}function e6(t,e,n,r,s){let a=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(a=window[s]),window[s]=ZA(a,t,e,n),{gtagCore:a,wrappedGtag:window[s]}}function t6(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(wf)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n6=30,r6=1e3;class i6{constructor(e={},n=r6){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Bj=new i6;function s6(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function a6(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:s6(n)},s=WA.replace("{app-id}",e),a=await fetch(s,r);if(a.status!==200&&a.status!==304){let l="";try{const c=await a.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:a.status,responseMessage:l})}return a.json()}async function o6(t,e=Bj,n){const{appId:r,apiKey:s,measurementId:a}=t.options;if(!r)throw En.create("no-app-id");if(!s){if(a)return{measurementId:a,appId:r};throw En.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new d6;return setTimeout(async()=>{l.abort()},qA),Uj({appId:r,apiKey:s,measurementId:a},o,l,e)}async function Uj(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=Bj){var l;const{appId:a,measurementId:o}=t;try{await l6(r,e)}catch(c){if(o)return dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:a,measurementId:o};throw c}try{const c=await a6(t);return s.deleteThrottleMetadata(a),c}catch(c){const u=c;if(!c6(u)){if(s.deleteThrottleMetadata(a),o)return dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:a,measurementId:o};throw c}const h=Number((l=u==null?void 0:u.customData)==null?void 0:l.httpStatus)===503?jv(n,s.intervalMillis,n6):jv(n,s.intervalMillis),p={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(a,p),dn.debug(`Calling attemptFetch again in ${h} millis`),Uj(t,p,r,s)}}function l6(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),a=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(a),r(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function c6(t){if(!(t instanceof Hr)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class d6{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function u6(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const a=await e,o={...r,send_to:a};t("event",n,o)}}async function h6(t,e,n,r){if(r&&r.global){const s={};for(const a of Object.keys(n))s[`user_properties.${a}`]=n[a];return t("set",s),Promise.resolve()}else{const s=await e;t("config",s,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m6(){if(hj())try{await mj()}catch(t){return dn.warn(En.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return dn.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function p6(t,e,n,r,s,a,o){const l=o6(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&dn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>dn.error(m)),e.push(l);const c=m6().then(m=>{if(m)return r.getId()}),[u,h]=await Promise.all([l,c]);t6(a)||QA(a,u.measurementId),s("js",new Date);const p=(o==null?void 0:o.config)??{};return p[$A]="firebase",p.update=!0,h!=null&&(p[UA]=h),s("config",u.measurementId,p),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e){this.app=e}_delete(){return delete Js[this.app.options.appId],Promise.resolve()}}let Js={},Rv=[];const Dv={};let Eh="dataLayer",g6="gtag",Mv,kf,Lv=!1;function x6(){const t=[];if(V3()&&t.push("This is a browser extension environment."),F3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});dn.warn(n.message)}}function y6(t,e,n){x6();const r=t.options.appId;if(!r)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(Js[r]!=null)throw En.create("already-exists",{id:r});if(!Lv){YA(Eh);const{wrappedGtag:a,gtagCore:o}=e6(Js,Rv,Dv,Eh,g6);kf=a,Mv=o,Lv=!0}return Js[r]=p6(t,Rv,Dv,e,Mv,Eh,n),new f6(t)}function v6(t=gf()){t=vr(t);const e=Na(t,xd);return e.isInitialized()?e.getImmediate():b6(t)}function b6(t,e={}){const n=Na(t,xd);if(n.isInitialized()){const s=n.getImmediate();if(el(e,n.getOptions()))return s;throw En.create("already-initialized")}return n.initialize({options:e})}function w6(t,e,n){t=vr(t),h6(kf,Js[t.app.options.appId],e,n).catch(r=>dn.error(r))}function k6(t,e,n,r){t=vr(t),u6(kf,Js[t.app.options.appId],e,n,r).catch(s=>dn.error(s))}const Vv="@firebase/analytics",Ov="0.10.19";function j6(){Ur(new br(xd,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return y6(r,s,n)},"PUBLIC")),Ur(new br("analytics-internal",t,"PRIVATE")),Un(Vv,Ov),Un(Vv,Ov,"esm2020");function t(e){try{const n=e.getProvider(xd).getImmediate();return{logEvent:(r,s,a)=>k6(n,r,s,a),setUserProperties:(r,s)=>w6(n,r,s)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}j6();var Fv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,$j;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(b,g){function z(){}z.prototype=g.prototype,b.F=g.prototype,b.prototype=new z,b.prototype.constructor=b,b.D=function(C,D,M){for(var I=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)I[xe-2]=arguments[xe];return g.prototype[D].apply(C,I)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(b,g,z){z||(z=0);const C=Array(16);if(typeof g=="string")for(var D=0;D<16;++D)C[D]=g.charCodeAt(z++)|g.charCodeAt(z++)<<8|g.charCodeAt(z++)<<16|g.charCodeAt(z++)<<24;else for(D=0;D<16;++D)C[D]=g[z++]|g[z++]<<8|g[z++]<<16|g[z++]<<24;g=b.g[0],z=b.g[1],D=b.g[2];let M=b.g[3],I;I=g+(M^z&(D^M))+C[0]+3614090360&4294967295,g=z+(I<<7&4294967295|I>>>25),I=M+(D^g&(z^D))+C[1]+3905402710&4294967295,M=g+(I<<12&4294967295|I>>>20),I=D+(z^M&(g^z))+C[2]+606105819&4294967295,D=M+(I<<17&4294967295|I>>>15),I=z+(g^D&(M^g))+C[3]+3250441966&4294967295,z=D+(I<<22&4294967295|I>>>10),I=g+(M^z&(D^M))+C[4]+4118548399&4294967295,g=z+(I<<7&4294967295|I>>>25),I=M+(D^g&(z^D))+C[5]+1200080426&4294967295,M=g+(I<<12&4294967295|I>>>20),I=D+(z^M&(g^z))+C[6]+2821735955&4294967295,D=M+(I<<17&4294967295|I>>>15),I=z+(g^D&(M^g))+C[7]+4249261313&4294967295,z=D+(I<<22&4294967295|I>>>10),I=g+(M^z&(D^M))+C[8]+1770035416&4294967295,g=z+(I<<7&4294967295|I>>>25),I=M+(D^g&(z^D))+C[9]+2336552879&4294967295,M=g+(I<<12&4294967295|I>>>20),I=D+(z^M&(g^z))+C[10]+4294925233&4294967295,D=M+(I<<17&4294967295|I>>>15),I=z+(g^D&(M^g))+C[11]+2304563134&4294967295,z=D+(I<<22&4294967295|I>>>10),I=g+(M^z&(D^M))+C[12]+1804603682&4294967295,g=z+(I<<7&4294967295|I>>>25),I=M+(D^g&(z^D))+C[13]+4254626195&4294967295,M=g+(I<<12&4294967295|I>>>20),I=D+(z^M&(g^z))+C[14]+2792965006&4294967295,D=M+(I<<17&4294967295|I>>>15),I=z+(g^D&(M^g))+C[15]+1236535329&4294967295,z=D+(I<<22&4294967295|I>>>10),I=g+(D^M&(z^D))+C[1]+4129170786&4294967295,g=z+(I<<5&4294967295|I>>>27),I=M+(z^D&(g^z))+C[6]+3225465664&4294967295,M=g+(I<<9&4294967295|I>>>23),I=D+(g^z&(M^g))+C[11]+643717713&4294967295,D=M+(I<<14&4294967295|I>>>18),I=z+(M^g&(D^M))+C[0]+3921069994&4294967295,z=D+(I<<20&4294967295|I>>>12),I=g+(D^M&(z^D))+C[5]+3593408605&4294967295,g=z+(I<<5&4294967295|I>>>27),I=M+(z^D&(g^z))+C[10]+38016083&4294967295,M=g+(I<<9&4294967295|I>>>23),I=D+(g^z&(M^g))+C[15]+3634488961&4294967295,D=M+(I<<14&4294967295|I>>>18),I=z+(M^g&(D^M))+C[4]+3889429448&4294967295,z=D+(I<<20&4294967295|I>>>12),I=g+(D^M&(z^D))+C[9]+568446438&4294967295,g=z+(I<<5&4294967295|I>>>27),I=M+(z^D&(g^z))+C[14]+3275163606&4294967295,M=g+(I<<9&4294967295|I>>>23),I=D+(g^z&(M^g))+C[3]+4107603335&4294967295,D=M+(I<<14&4294967295|I>>>18),I=z+(M^g&(D^M))+C[8]+1163531501&4294967295,z=D+(I<<20&4294967295|I>>>12),I=g+(D^M&(z^D))+C[13]+2850285829&4294967295,g=z+(I<<5&4294967295|I>>>27),I=M+(z^D&(g^z))+C[2]+4243563512&4294967295,M=g+(I<<9&4294967295|I>>>23),I=D+(g^z&(M^g))+C[7]+1735328473&4294967295,D=M+(I<<14&4294967295|I>>>18),I=z+(M^g&(D^M))+C[12]+2368359562&4294967295,z=D+(I<<20&4294967295|I>>>12),I=g+(z^D^M)+C[5]+4294588738&4294967295,g=z+(I<<4&4294967295|I>>>28),I=M+(g^z^D)+C[8]+2272392833&4294967295,M=g+(I<<11&4294967295|I>>>21),I=D+(M^g^z)+C[11]+1839030562&4294967295,D=M+(I<<16&4294967295|I>>>16),I=z+(D^M^g)+C[14]+4259657740&4294967295,z=D+(I<<23&4294967295|I>>>9),I=g+(z^D^M)+C[1]+2763975236&4294967295,g=z+(I<<4&4294967295|I>>>28),I=M+(g^z^D)+C[4]+1272893353&4294967295,M=g+(I<<11&4294967295|I>>>21),I=D+(M^g^z)+C[7]+4139469664&4294967295,D=M+(I<<16&4294967295|I>>>16),I=z+(D^M^g)+C[10]+3200236656&4294967295,z=D+(I<<23&4294967295|I>>>9),I=g+(z^D^M)+C[13]+681279174&4294967295,g=z+(I<<4&4294967295|I>>>28),I=M+(g^z^D)+C[0]+3936430074&4294967295,M=g+(I<<11&4294967295|I>>>21),I=D+(M^g^z)+C[3]+3572445317&4294967295,D=M+(I<<16&4294967295|I>>>16),I=z+(D^M^g)+C[6]+76029189&4294967295,z=D+(I<<23&4294967295|I>>>9),I=g+(z^D^M)+C[9]+3654602809&4294967295,g=z+(I<<4&4294967295|I>>>28),I=M+(g^z^D)+C[12]+3873151461&4294967295,M=g+(I<<11&4294967295|I>>>21),I=D+(M^g^z)+C[15]+530742520&4294967295,D=M+(I<<16&4294967295|I>>>16),I=z+(D^M^g)+C[2]+3299628645&4294967295,z=D+(I<<23&4294967295|I>>>9),I=g+(D^(z|~M))+C[0]+4096336452&4294967295,g=z+(I<<6&4294967295|I>>>26),I=M+(z^(g|~D))+C[7]+1126891415&4294967295,M=g+(I<<10&4294967295|I>>>22),I=D+(g^(M|~z))+C[14]+2878612391&4294967295,D=M+(I<<15&4294967295|I>>>17),I=z+(M^(D|~g))+C[5]+4237533241&4294967295,z=D+(I<<21&4294967295|I>>>11),I=g+(D^(z|~M))+C[12]+1700485571&4294967295,g=z+(I<<6&4294967295|I>>>26),I=M+(z^(g|~D))+C[3]+2399980690&4294967295,M=g+(I<<10&4294967295|I>>>22),I=D+(g^(M|~z))+C[10]+4293915773&4294967295,D=M+(I<<15&4294967295|I>>>17),I=z+(M^(D|~g))+C[1]+2240044497&4294967295,z=D+(I<<21&4294967295|I>>>11),I=g+(D^(z|~M))+C[8]+1873313359&4294967295,g=z+(I<<6&4294967295|I>>>26),I=M+(z^(g|~D))+C[15]+4264355552&4294967295,M=g+(I<<10&4294967295|I>>>22),I=D+(g^(M|~z))+C[6]+2734768916&4294967295,D=M+(I<<15&4294967295|I>>>17),I=z+(M^(D|~g))+C[13]+1309151649&4294967295,z=D+(I<<21&4294967295|I>>>11),I=g+(D^(z|~M))+C[4]+4149444226&4294967295,g=z+(I<<6&4294967295|I>>>26),I=M+(z^(g|~D))+C[11]+3174756917&4294967295,M=g+(I<<10&4294967295|I>>>22),I=D+(g^(M|~z))+C[2]+718787259&4294967295,D=M+(I<<15&4294967295|I>>>17),I=z+(M^(D|~g))+C[9]+3951481745&4294967295,b.g[0]=b.g[0]+g&4294967295,b.g[1]=b.g[1]+(D+(I<<21&4294967295|I>>>11))&4294967295,b.g[2]=b.g[2]+D&4294967295,b.g[3]=b.g[3]+M&4294967295}r.prototype.v=function(b,g){g===void 0&&(g=b.length);const z=g-this.blockSize,C=this.C;let D=this.h,M=0;for(;M<g;){if(D==0)for(;M<=z;)s(this,b,M),M+=this.blockSize;if(typeof b=="string"){for(;M<g;)if(C[D++]=b.charCodeAt(M++),D==this.blockSize){s(this,C),D=0;break}}else for(;M<g;)if(C[D++]=b[M++],D==this.blockSize){s(this,C),D=0;break}}this.h=D,this.o+=g},r.prototype.A=function(){var b=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);b[0]=128;for(var g=1;g<b.length-8;++g)b[g]=0;g=this.o*8;for(var z=b.length-8;z<b.length;++z)b[z]=g&255,g/=256;for(this.v(b),b=Array(16),g=0,z=0;z<4;++z)for(let C=0;C<32;C+=8)b[g++]=this.g[z]>>>C&255;return b};function a(b,g){var z=l;return Object.prototype.hasOwnProperty.call(z,b)?z[b]:z[b]=g(b)}function o(b,g){this.h=g;const z=[];let C=!0;for(let D=b.length-1;D>=0;D--){const M=b[D]|0;C&&M==g||(z[D]=M,C=!1)}this.g=z}var l={};function c(b){return-128<=b&&b<128?a(b,function(g){return new o([g|0],g<0?-1:0)}):new o([b|0],b<0?-1:0)}function u(b){if(isNaN(b)||!isFinite(b))return p;if(b<0)return T(u(-b));const g=[];let z=1;for(let C=0;b>=z;C++)g[C]=b/z|0,z*=4294967296;return new o(g,0)}function h(b,g){if(b.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(b.charAt(0)=="-")return T(h(b.substring(1),g));if(b.indexOf("-")>=0)throw Error('number format error: interior "-" character');const z=u(Math.pow(g,8));let C=p;for(let M=0;M<b.length;M+=8){var D=Math.min(8,b.length-M);const I=parseInt(b.substring(M,M+D),g);D<8?(D=u(Math.pow(g,D)),C=C.j(D).add(u(I))):(C=C.j(z),C=C.add(u(I)))}return C}var p=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(_(this))return-T(this).m();let b=0,g=1;for(let z=0;z<this.g.length;z++){const C=this.i(z);b+=(C>=0?C:4294967296+C)*g,g*=4294967296}return b},t.toString=function(b){if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(j(this))return"0";if(_(this))return"-"+T(this).toString(b);const g=u(Math.pow(b,6));var z=this;let C="";for(;;){const D=P(z,g).g;z=v(z,D.j(g));let M=((z.g.length>0?z.g[0]:z.h)>>>0).toString(b);if(z=D,j(z))return M+C;for(;M.length<6;)M="0"+M;C=M+C}},t.i=function(b){return b<0?0:b<this.g.length?this.g[b]:this.h};function j(b){if(b.h!=0)return!1;for(let g=0;g<b.g.length;g++)if(b.g[g]!=0)return!1;return!0}function _(b){return b.h==-1}t.l=function(b){return b=v(this,b),_(b)?-1:j(b)?0:1};function T(b){const g=b.g.length,z=[];for(let C=0;C<g;C++)z[C]=~b.g[C];return new o(z,~b.h).add(m)}t.abs=function(){return _(this)?T(this):this},t.add=function(b){const g=Math.max(this.g.length,b.g.length),z=[];let C=0;for(let D=0;D<=g;D++){let M=C+(this.i(D)&65535)+(b.i(D)&65535),I=(M>>>16)+(this.i(D)>>>16)+(b.i(D)>>>16);C=I>>>16,M&=65535,I&=65535,z[D]=I<<16|M}return new o(z,z[z.length-1]&-2147483648?-1:0)};function v(b,g){return b.add(T(g))}t.j=function(b){if(j(this)||j(b))return p;if(_(this))return _(b)?T(this).j(T(b)):T(T(this).j(b));if(_(b))return T(this.j(T(b)));if(this.l(y)<0&&b.l(y)<0)return u(this.m()*b.m());const g=this.g.length+b.g.length,z=[];for(var C=0;C<2*g;C++)z[C]=0;for(C=0;C<this.g.length;C++)for(let D=0;D<b.g.length;D++){const M=this.i(C)>>>16,I=this.i(C)&65535,xe=b.i(D)>>>16,ve=b.i(D)&65535;z[2*C+2*D]+=I*ve,w(z,2*C+2*D),z[2*C+2*D+1]+=M*ve,w(z,2*C+2*D+1),z[2*C+2*D+1]+=I*xe,w(z,2*C+2*D+1),z[2*C+2*D+2]+=M*xe,w(z,2*C+2*D+2)}for(b=0;b<g;b++)z[b]=z[2*b+1]<<16|z[2*b];for(b=g;b<2*g;b++)z[b]=0;return new o(z,0)};function w(b,g){for(;(b[g]&65535)!=b[g];)b[g+1]+=b[g]>>>16,b[g]&=65535,g++}function N(b,g){this.g=b,this.h=g}function P(b,g){if(j(g))throw Error("division by zero");if(j(b))return new N(p,p);if(_(b))return g=P(T(b),g),new N(T(g.g),T(g.h));if(_(g))return g=P(b,T(g)),new N(T(g.g),g.h);if(b.g.length>30){if(_(b)||_(g))throw Error("slowDivide_ only works with positive integers.");for(var z=m,C=g;C.l(b)<=0;)z=L(z),C=L(C);var D=R(z,1),M=R(C,1);for(C=R(C,2),z=R(z,2);!j(C);){var I=M.add(C);I.l(b)<=0&&(D=D.add(z),M=I),C=R(C,1),z=R(z,1)}return g=v(b,D.j(g)),new N(D,g)}for(D=p;b.l(g)>=0;){for(z=Math.max(1,Math.floor(b.m()/g.m())),C=Math.ceil(Math.log(z)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),M=u(z),I=M.j(g);_(I)||I.l(b)>0;)z-=C,M=u(z),I=M.j(g);j(M)&&(M=m),D=D.add(M),b=v(b,I)}return new N(D,b)}t.B=function(b){return P(this,b).h},t.and=function(b){const g=Math.max(this.g.length,b.g.length),z=[];for(let C=0;C<g;C++)z[C]=this.i(C)&b.i(C);return new o(z,this.h&b.h)},t.or=function(b){const g=Math.max(this.g.length,b.g.length),z=[];for(let C=0;C<g;C++)z[C]=this.i(C)|b.i(C);return new o(z,this.h|b.h)},t.xor=function(b){const g=Math.max(this.g.length,b.g.length),z=[];for(let C=0;C<g;C++)z[C]=this.i(C)^b.i(C);return new o(z,this.h^b.h)};function L(b){const g=b.g.length+1,z=[];for(let C=0;C<g;C++)z[C]=b.i(C)<<1|b.i(C-1)>>>31;return new o(z,b.h)}function R(b,g){const z=g>>5;g%=32;const C=b.g.length-z,D=[];for(let M=0;M<C;M++)D[M]=g>0?b.i(M+z)>>>g|b.i(M+z+1)<<32-g:b.i(M+z);return new o(D,b.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$j=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,yi=o}).apply(typeof Fv<"u"?Fv:typeof self<"u"?self:typeof window<"u"?window:{});var nc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qj,lo,Wj,Cc,um,Hj,Gj,Kj;(function(){var t,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof nc=="object"&&nc];for(var f=0;f<d.length;++f){var x=d[f];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function s(d,f){if(f)e:{var x=r;d=d.split(".");for(var E=0;E<d.length-1;E++){var G=d[E];if(!(G in x))break e;x=x[G]}d=d[d.length-1],E=x[d],f=f(E),f!=E&&f!=null&&e(x,d,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(d){return d||function(f){var x=[],E;for(E in f)Object.prototype.hasOwnProperty.call(f,E)&&x.push([E,f[E]]);return x}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function l(d){var f=typeof d;return f=="object"&&d!=null||f=="function"}function c(d,f,x){return d.call.apply(d.bind,arguments)}function u(d,f,x){return u=c,u.apply(null,arguments)}function h(d,f){var x=Array.prototype.slice.call(arguments,1);return function(){var E=x.slice();return E.push.apply(E,arguments),d.apply(this,E)}}function p(d,f){function x(){}x.prototype=f.prototype,d.Z=f.prototype,d.prototype=new x,d.prototype.constructor=d,d.Ob=function(E,G,Q){for(var he=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)he[Le-2]=arguments[Le];return f.prototype[G].apply(E,he)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const f=d.length;if(f>0){const x=Array(f);for(let E=0;E<f;E++)x[E]=d[E];return x}return[]}function j(d,f){for(let E=1;E<arguments.length;E++){const G=arguments[E];var x=typeof G;if(x=x!="object"?x:G?Array.isArray(G)?"array":x:"null",x=="array"||x=="object"&&typeof G.length=="number"){x=d.length||0;const Q=G.length||0;d.length=x+Q;for(let he=0;he<Q;he++)d[x+he]=G[he]}else d.push(G)}}class _{constructor(f,x){this.i=f,this.j=x,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function T(d){o.setTimeout(()=>{throw d},0)}function v(){var d=b;let f=null;return d.g&&(f=d.g,d.g=d.g.next,d.g||(d.h=null),f.next=null),f}class w{constructor(){this.h=this.g=null}add(f,x){const E=N.get();E.set(f,x),this.h?this.h.next=E:this.g=E,this.h=E}}var N=new _(()=>new P,d=>d.reset());class P{constructor(){this.next=this.g=this.h=null}set(f,x){this.h=f,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let L,R=!1,b=new w,g=()=>{const d=Promise.resolve(void 0);L=()=>{d.then(z)}};function z(){for(var d;d=v();){try{d.h.call(d.g)}catch(x){T(x)}var f=N;f.j(d),f.h<100&&(f.h++,d.next=f.g,f.g=d)}R=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(d,f){this.type=d,this.g=this.target=f,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var d=!1,f=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};o.addEventListener("test",x,f),o.removeEventListener("test",x,f)}catch{}return d}();function I(d){return/^[\s\xa0]*$/.test(d)}function xe(d,f){D.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,f)}p(xe,D),xe.prototype.init=function(d,f){const x=this.type=d.type,E=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=f,f=d.relatedTarget,f||(x=="mouseover"?f=d.fromElement:x=="mouseout"&&(f=d.toElement)),this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&xe.Z.h.call(this)},xe.prototype.h=function(){xe.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),je=0;function de(d,f,x,E,G){this.listener=d,this.proxy=null,this.src=f,this.type=x,this.capture=!!E,this.ha=G,this.key=++je,this.da=this.fa=!1}function J(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function oe(d,f,x){for(const E in d)f.call(x,d[E],E,d)}function le(d,f){for(const x in d)f.call(void 0,d[x],x,d)}function ke(d){const f={};for(const x in d)f[x]=d[x];return f}const U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(d,f){let x,E;for(let G=1;G<arguments.length;G++){E=arguments[G];for(x in E)d[x]=E[x];for(let Q=0;Q<U.length;Q++)x=U[Q],Object.prototype.hasOwnProperty.call(E,x)&&(d[x]=E[x])}}function A(d){this.src=d,this.g={},this.h=0}A.prototype.add=function(d,f,x,E,G){const Q=d.toString();d=this.g[Q],d||(d=this.g[Q]=[],this.h++);const he=$(d,f,E,G);return he>-1?(f=d[he],x||(f.fa=!1)):(f=new de(f,this.src,Q,!!E,G),f.fa=x,d.push(f)),f};function q(d,f){const x=f.type;if(x in d.g){var E=d.g[x],G=Array.prototype.indexOf.call(E,f,void 0),Q;(Q=G>=0)&&Array.prototype.splice.call(E,G,1),Q&&(J(f),d.g[x].length==0&&(delete d.g[x],d.h--))}}function $(d,f,x,E){for(let G=0;G<d.length;++G){const Q=d[G];if(!Q.da&&Q.listener==f&&Q.capture==!!x&&Q.ha==E)return G}return-1}var re="closure_lm_"+(Math.random()*1e6|0),S={};function O(d,f,x,E,G){if(Array.isArray(f)){for(let Q=0;Q<f.length;Q++)O(d,f[Q],x,E,G);return null}return x=Xe(x),d&&d[ve]?d.J(f,x,l(E)?!!E.capture:!1,G):H(d,f,x,!1,E,G)}function H(d,f,x,E,G,Q){if(!f)throw Error("Invalid event type");const he=l(G)?!!G.capture:!!G;let Le=ze(d);if(Le||(d[re]=Le=new A(d)),x=Le.add(f,x,E,he,Q),x.proxy)return x;if(E=Z(),x.proxy=E,E.src=d,E.listener=x,d.addEventListener)M||(G=he),G===void 0&&(G=!1),d.addEventListener(f.toString(),E,G);else if(d.attachEvent)d.attachEvent(we(f.toString()),E);else if(d.addListener&&d.removeListener)d.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Z(){function d(x){return f.call(d.src,d.listener,x)}const f=Se;return d}function me(d,f,x,E,G){if(Array.isArray(f))for(var Q=0;Q<f.length;Q++)me(d,f[Q],x,E,G);else E=l(E)?!!E.capture:!!E,x=Xe(x),d&&d[ve]?(d=d.i,Q=String(f).toString(),Q in d.g&&(f=d.g[Q],x=$(f,x,E,G),x>-1&&(J(f[x]),Array.prototype.splice.call(f,x,1),f.length==0&&(delete d.g[Q],d.h--)))):d&&(d=ze(d))&&(f=d.g[f.toString()],d=-1,f&&(d=$(f,x,E,G)),(x=d>-1?f[d]:null)&&pe(x))}function pe(d){if(typeof d!="number"&&d&&!d.da){var f=d.src;if(f&&f[ve])q(f.i,d);else{var x=d.type,E=d.proxy;f.removeEventListener?f.removeEventListener(x,E,d.capture):f.detachEvent?f.detachEvent(we(x),E):f.addListener&&f.removeListener&&f.removeListener(E),(x=ze(f))?(q(x,d),x.h==0&&(x.src=null,f[re]=null)):J(d)}}}function we(d){return d in S?S[d]:S[d]="on"+d}function Se(d,f){if(d.da)d=!0;else{f=new xe(f,this);const x=d.listener,E=d.ha||d.src;d.fa&&pe(d),d=x.call(E,f)}return d}function ze(d){return d=d[re],d instanceof A?d:null}var De="__closure_events_fn_"+(Math.random()*1e9>>>0);function Xe(d){return typeof d=="function"?d:(d[De]||(d[De]=function(f){return d.handleEvent(f)}),d[De])}function Pe(){C.call(this),this.i=new A(this),this.M=this,this.G=null}p(Pe,C),Pe.prototype[ve]=!0,Pe.prototype.removeEventListener=function(d,f,x,E){me(this,d,f,x,E)};function Qe(d,f){var x,E=d.G;if(E)for(x=[];E;E=E.G)x.push(E);if(d=d.M,E=f.type||f,typeof f=="string")f=new D(f,d);else if(f instanceof D)f.target=f.target||d;else{var G=f;f=new D(E,d),se(f,G)}G=!0;let Q,he;if(x)for(he=x.length-1;he>=0;he--)Q=f.g=x[he],G=Ht(Q,E,!0,f)&&G;if(Q=f.g=d,G=Ht(Q,E,!0,f)&&G,G=Ht(Q,E,!1,f)&&G,x)for(he=0;he<x.length;he++)Q=f.g=x[he],G=Ht(Q,E,!1,f)&&G}Pe.prototype.N=function(){if(Pe.Z.N.call(this),this.i){var d=this.i;for(const f in d.g){const x=d.g[f];for(let E=0;E<x.length;E++)J(x[E]);delete d.g[f],d.h--}}this.G=null},Pe.prototype.J=function(d,f,x,E){return this.i.add(String(d),f,!1,x,E)},Pe.prototype.K=function(d,f,x,E){return this.i.add(String(d),f,!0,x,E)};function Ht(d,f,x,E){if(f=d.i.g[String(f)],!f)return!0;f=f.concat();let G=!0;for(let Q=0;Q<f.length;++Q){const he=f[Q];if(he&&!he.da&&he.capture==x){const Le=he.listener,Et=he.ha||he.src;he.fa&&q(d.i,he),G=Le.call(Et,E)!==!1&&G}}return G&&!E.defaultPrevented}function Ct(d,f){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=u(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(d,f||0)}function F(d){d.g=Ct(()=>{d.g=null,d.i&&(d.i=!1,F(d))},d.l);const f=d.h;d.h=null,d.m.apply(null,f)}class ne extends C{constructor(f,x){super(),this.m=f,this.l=x,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:F(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ue(d){C.call(this),this.h=d,this.g={}}p(ue,C);var fe=[];function ce(d){oe(d.g,function(f,x){this.g.hasOwnProperty(x)&&pe(f)},d),d.g={}}ue.prototype.N=function(){ue.Z.N.call(this),ce(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var W=o.JSON.stringify,X=o.JSON.parse,Ne=class{stringify(d){return o.JSON.stringify(d,void 0)}parse(d){return o.JSON.parse(d,void 0)}};function V(){}function Y(){}var K={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ie(){D.call(this,"d")}p(ie,D);function Te(){D.call(this,"c")}p(Te,D);var Ee={},Je=null;function pn(){return Je=Je||new Pe}Ee.Ia="serverreachability";function Nl(d){D.call(this,Ee.Ia,d)}p(Nl,D);function Ta(d){const f=pn();Qe(f,new Nl(f))}Ee.STAT_EVENT="statevent";function lg(d,f){D.call(this,Ee.STAT_EVENT,d),this.stat=f}p(lg,D);function rn(d){const f=pn();Qe(f,new lg(f,d))}Ee.Ja="timingevent";function cg(d,f){D.call(this,Ee.Ja,d),this.size=f}p(cg,D);function Ia(d,f){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){d()},f)}function Aa(){this.g=!0}Aa.prototype.ua=function(){this.g=!1};function UN(d,f,x,E,G,Q){d.info(function(){if(d.g)if(Q){var he="",Le=Q.split("&");for(let et=0;et<Le.length;et++){var Et=Le[et].split("=");if(Et.length>1){const Pt=Et[0];Et=Et[1];const sr=Pt.split("_");he=sr.length>=2&&sr[1]=="type"?he+(Pt+"="+Et+"&"):he+(Pt+"=redacted&")}}}else he=null;else he=Q;return"XMLHTTP REQ ("+E+") [attempt "+G+"]: "+f+`
`+x+`
`+he})}function $N(d,f,x,E,G,Q,he){d.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+G+"]: "+f+`
`+x+`
`+Q+" "+he})}function bs(d,f,x,E){d.info(function(){return"XMLHTTP TEXT ("+f+"): "+WN(d,x)+(E?" "+E:"")})}function qN(d,f){d.info(function(){return"TIMEOUT: "+f})}Aa.prototype.info=function(){};function WN(d,f){if(!d.g)return f;if(!f)return null;try{const Q=JSON.parse(f);if(Q){for(d=0;d<Q.length;d++)if(Array.isArray(Q[d])){var x=Q[d];if(!(x.length<2)){var E=x[1];if(Array.isArray(E)&&!(E.length<1)){var G=E[0];if(G!="noop"&&G!="stop"&&G!="close")for(let he=1;he<E.length;he++)E[he]=""}}}}return W(Q)}catch{return f}}var zl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ug;function wu(){}p(wu,V),wu.prototype.g=function(){return new XMLHttpRequest},ug=new wu;function Pa(d){return encodeURIComponent(String(d))}function HN(d){var f=1;d=d.split(":");const x=[];for(;f>0&&d.length;)x.push(d.shift()),f--;return d.length&&x.push(d.join(":")),x}function Gr(d,f,x,E){this.j=d,this.i=f,this.l=x,this.S=E||1,this.V=new ue(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new hg}function hg(){this.i=null,this.g="",this.h=!1}var mg={},ku={};function ju(d,f,x){d.M=1,d.A=Cl(ir(f)),d.u=x,d.R=!0,pg(d,null)}function pg(d,f){d.F=Date.now(),_l(d),d.B=ir(d.A);var x=d.B,E=d.S;Array.isArray(E)||(E=[String(E)]),Cg(x.i,"t",E),d.C=0,x=d.j.L,d.h=new hg,d.g=Wg(d.j,x?f:null,!d.u),d.P>0&&(d.O=new ne(u(d.Y,d,d.g),d.P)),f=d.V,x=d.g,E=d.ba;var G="readystatechange";Array.isArray(G)||(G&&(fe[0]=G.toString()),G=fe);for(let Q=0;Q<G.length;Q++){const he=O(x,G[Q],E||f.handleEvent,!1,f.h||f);if(!he)break;f.g[he.key]=he}f=d.J?ke(d.J):{},d.u?(d.v||(d.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,f)):(d.v="GET",d.g.ea(d.B,d.v,null,f)),Ta(),UN(d.i,d.v,d.B,d.l,d.S,d.u)}Gr.prototype.ba=function(d){d=d.target;const f=this.O;f&&Yr(d)==3?f.j():this.Y(d)},Gr.prototype.Y=function(d){try{if(d==this.g)e:{const Le=Yr(this.g),Et=this.g.ya(),et=this.g.ca();if(!(Le<3)&&(Le!=3||this.g&&(this.h.h||this.g.la()||Rg(this.g)))){this.K||Le!=4||Et==7||(Et==8||et<=0?Ta(3):Ta(2)),Nu(this);var f=this.g.ca();this.X=f;var x=GN(this);if(this.o=f==200,$N(this.i,this.v,this.B,this.l,this.S,Le,f),this.o){if(this.U&&!this.L){t:{if(this.g){var E,G=this.g;if((E=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(E)){var Q=E;break t}}Q=null}if(d=Q)bs(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,zu(this,d);else{this.o=!1,this.m=3,rn(12),Di(this),Ra(this);break e}}if(this.R){d=!0;let Pt;for(;!this.K&&this.C<x.length;)if(Pt=KN(this,x),Pt==ku){Le==4&&(this.m=4,rn(14),d=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==mg){this.m=4,rn(15),bs(this.i,this.l,x,"[Invalid Chunk]"),d=!1;break}else bs(this.i,this.l,Pt,null),zu(this,Pt);if(fg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Le!=4||x.length!=0||this.h.h||(this.m=1,rn(16),d=!1),this.o=this.o&&d,!d)bs(this.i,this.l,x,"[Invalid Chunked Response]"),Di(this),Ra(this);else if(x.length>0&&!this.W){this.W=!0;var he=this.j;he.g==this&&he.aa&&!he.P&&(he.j.info("Great, no buffering proxy detected. Bytes received: "+x.length),Pu(he),he.P=!0,rn(11))}}else bs(this.i,this.l,x,null),zu(this,x);Le==4&&Di(this),this.o&&!this.K&&(Le==4?Bg(this.j,this):(this.o=!1,_l(this)))}else l4(this.g),f==400&&x.indexOf("Unknown SID")>0?(this.m=3,rn(12)):(this.m=0,rn(13)),Di(this),Ra(this)}}}catch{}finally{}};function GN(d){if(!fg(d))return d.g.la();const f=Rg(d.g);if(f==="")return"";let x="";const E=f.length,G=Yr(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return Di(d),Ra(d),"";d.h.i=new o.TextDecoder}for(let Q=0;Q<E;Q++)d.h.h=!0,x+=d.h.i.decode(f[Q],{stream:!(G&&Q==E-1)});return f.length=0,d.h.g+=x,d.C=0,d.h.g}function fg(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function KN(d,f){var x=d.C,E=f.indexOf(`
`,x);return E==-1?ku:(x=Number(f.substring(x,E)),isNaN(x)?mg:(E+=1,E+x>f.length?ku:(f=f.slice(E,E+x),d.C=E+x,f)))}Gr.prototype.cancel=function(){this.K=!0,Di(this)};function _l(d){d.T=Date.now()+d.H,gg(d,d.H)}function gg(d,f){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Ia(u(d.aa,d),f)}function Nu(d){d.D&&(o.clearTimeout(d.D),d.D=null)}Gr.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(qN(this.i,this.B),this.M!=2&&(Ta(),rn(17)),Di(this),this.m=2,Ra(this)):gg(this,this.T-d)};function Ra(d){d.j.I==0||d.K||Bg(d.j,d)}function Di(d){Nu(d);var f=d.O;f&&typeof f.dispose=="function"&&f.dispose(),d.O=null,ce(d.V),d.g&&(f=d.g,d.g=null,f.abort(),f.dispose())}function zu(d,f){try{var x=d.j;if(x.I!=0&&(x.g==d||_u(x.h,d))){if(!d.L&&_u(x.h,d)&&x.I==3){try{var E=x.Ba.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var G=E;if(G[0]==0){e:if(!x.v){if(x.g)if(x.g.F+3e3<d.F)Al(x),Tl(x);else break e;Au(x),rn(18)}}else x.xa=G[1],0<x.xa-x.K&&G[2]<37500&&x.F&&x.A==0&&!x.C&&(x.C=Ia(u(x.Va,x),6e3));vg(x.h)<=1&&x.ta&&(x.ta=void 0)}else Li(x,11)}else if((d.L||x.g==d)&&Al(x),!I(f))for(G=x.Ba.g.parse(f),f=0;f<G.length;f++){let et=G[f];const Pt=et[0];if(!(Pt<=x.K))if(x.K=Pt,et=et[1],x.I==2)if(et[0]=="c"){x.M=et[1],x.ba=et[2];const sr=et[3];sr!=null&&(x.ka=sr,x.j.info("VER="+x.ka));const Vi=et[4];Vi!=null&&(x.za=Vi,x.j.info("SVER="+x.za));const Xr=et[5];Xr!=null&&typeof Xr=="number"&&Xr>0&&(E=1.5*Xr,x.O=E,x.j.info("backChannelRequestTimeoutMs_="+E)),E=x;const Jr=d.g;if(Jr){const Rl=Jr.g?Jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Rl){var Q=E.h;Q.g||Rl.indexOf("spdy")==-1&&Rl.indexOf("quic")==-1&&Rl.indexOf("h2")==-1||(Q.j=Q.l,Q.g=new Set,Q.h&&(Cu(Q,Q.h),Q.h=null))}if(E.G){const Ru=Jr.g?Jr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ru&&(E.wa=Ru,rt(E.J,E.G,Ru))}}x.I=3,x.l&&x.l.ra(),x.aa&&(x.T=Date.now()-d.F,x.j.info("Handshake RTT: "+x.T+"ms")),E=x;var he=d;if(E.na=qg(E,E.L?E.ba:null,E.W),he.L){bg(E.h,he);var Le=he,Et=E.O;Et&&(Le.H=Et),Le.D&&(Nu(Le),_l(Le)),E.g=he}else Og(E);x.i.length>0&&Il(x)}else et[0]!="stop"&&et[0]!="close"||Li(x,7);else x.I==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Li(x,7):Iu(x):et[0]!="noop"&&x.l&&x.l.qa(et),x.A=0)}}Ta(4)}catch{}}var QN=class{constructor(d,f){this.g=d,this.map=f}};function xg(d){this.l=d||10,o.PerformanceNavigationTiming?(d=o.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function yg(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function vg(d){return d.h?1:d.g?d.g.size:0}function _u(d,f){return d.h?d.h==f:d.g?d.g.has(f):!1}function Cu(d,f){d.g?d.g.add(f):d.h=f}function bg(d,f){d.h&&d.h==f?d.h=null:d.g&&d.g.has(f)&&d.g.delete(f)}xg.prototype.cancel=function(){if(this.i=wg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function wg(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let f=d.i;for(const x of d.g.values())f=f.concat(x.G);return f}return y(d.i)}var kg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function YN(d,f){if(d){d=d.split("&");for(let x=0;x<d.length;x++){const E=d[x].indexOf("=");let G,Q=null;E>=0?(G=d[x].substring(0,E),Q=d[x].substring(E+1)):G=d[x],f(G,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function Kr(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;d instanceof Kr?(this.l=d.l,Da(this,d.j),this.o=d.o,this.g=d.g,Ma(this,d.u),this.h=d.h,Eu(this,Eg(d.i)),this.m=d.m):d&&(f=String(d).match(kg))?(this.l=!1,Da(this,f[1]||"",!0),this.o=La(f[2]||""),this.g=La(f[3]||"",!0),Ma(this,f[4]),this.h=La(f[5]||"",!0),Eu(this,f[6]||"",!0),this.m=La(f[7]||"")):(this.l=!1,this.i=new Oa(null,this.l))}Kr.prototype.toString=function(){const d=[];var f=this.j;f&&d.push(Va(f,jg,!0),":");var x=this.g;return(x||f=="file")&&(d.push("//"),(f=this.o)&&d.push(Va(f,jg,!0),"@"),d.push(Pa(x).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.u,x!=null&&d.push(":",String(x))),(x=this.h)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Va(x,x.charAt(0)=="/"?ZN:JN,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Va(x,t4)),d.join("")},Kr.prototype.resolve=function(d){const f=ir(this);let x=!!d.j;x?Da(f,d.j):x=!!d.o,x?f.o=d.o:x=!!d.g,x?f.g=d.g:x=d.u!=null;var E=d.h;if(x)Ma(f,d.u);else if(x=!!d.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var G=f.h.lastIndexOf("/");G!=-1&&(E=f.h.slice(0,G+1)+E)}if(G=E,G==".."||G==".")E="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){E=G.lastIndexOf("/",0)==0,G=G.split("/");const Q=[];for(let he=0;he<G.length;){const Le=G[he++];Le=="."?E&&he==G.length&&Q.push(""):Le==".."?((Q.length>1||Q.length==1&&Q[0]!="")&&Q.pop(),E&&he==G.length&&Q.push("")):(Q.push(Le),E=!0)}E=Q.join("/")}else E=G}return x?f.h=E:x=d.i.toString()!=="",x?Eu(f,Eg(d.i)):x=!!d.m,x&&(f.m=d.m),f};function ir(d){return new Kr(d)}function Da(d,f,x){d.j=x?La(f,!0):f,d.j&&(d.j=d.j.replace(/:$/,""))}function Ma(d,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);d.u=f}else d.u=null}function Eu(d,f,x){f instanceof Oa?(d.i=f,n4(d.i,d.l)):(x||(f=Va(f,e4)),d.i=new Oa(f,d.l))}function rt(d,f,x){d.i.set(f,x)}function Cl(d){return rt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function La(d,f){return d?f?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Va(d,f,x){return typeof d=="string"?(d=encodeURI(d).replace(f,XN),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function XN(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var jg=/[#\/\?@]/g,JN=/[#\?:]/g,ZN=/[#\?]/g,e4=/[#\?@]/g,t4=/#/g;function Oa(d,f){this.h=this.g=null,this.i=d||null,this.j=!!f}function Mi(d){d.g||(d.g=new Map,d.h=0,d.i&&YN(d.i,function(f,x){d.add(decodeURIComponent(f.replace(/\+/g," ")),x)}))}t=Oa.prototype,t.add=function(d,f){Mi(this),this.i=null,d=ws(this,d);let x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(f),this.h+=1,this};function Ng(d,f){Mi(d),f=ws(d,f),d.g.has(f)&&(d.i=null,d.h-=d.g.get(f).length,d.g.delete(f))}function zg(d,f){return Mi(d),f=ws(d,f),d.g.has(f)}t.forEach=function(d,f){Mi(this),this.g.forEach(function(x,E){x.forEach(function(G){d.call(f,G,E,this)},this)},this)};function _g(d,f){Mi(d);let x=[];if(typeof f=="string")zg(d,f)&&(x=x.concat(d.g.get(ws(d,f))));else for(d=Array.from(d.g.values()),f=0;f<d.length;f++)x=x.concat(d[f]);return x}t.set=function(d,f){return Mi(this),this.i=null,d=ws(this,d),zg(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[f]),this.h+=1,this},t.get=function(d,f){return d?(d=_g(this,d),d.length>0?String(d[0]):f):f};function Cg(d,f,x){Ng(d,f),x.length>0&&(d.i=null,d.g.set(ws(d,f),y(x)),d.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],f=Array.from(this.g.keys());for(let E=0;E<f.length;E++){var x=f[E];const G=Pa(x);x=_g(this,x);for(let Q=0;Q<x.length;Q++){let he=G;x[Q]!==""&&(he+="="+Pa(x[Q])),d.push(he)}}return this.i=d.join("&")};function Eg(d){const f=new Oa;return f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),f}function ws(d,f){return f=String(f),d.j&&(f=f.toLowerCase()),f}function n4(d,f){f&&!d.j&&(Mi(d),d.i=null,d.g.forEach(function(x,E){const G=E.toLowerCase();E!=G&&(Ng(this,E),Cg(this,G,x))},d)),d.j=f}function r4(d,f){const x=new Aa;if(o.Image){const E=new Image;E.onload=h(Qr,x,"TestLoadImage: loaded",!0,f,E),E.onerror=h(Qr,x,"TestLoadImage: error",!1,f,E),E.onabort=h(Qr,x,"TestLoadImage: abort",!1,f,E),E.ontimeout=h(Qr,x,"TestLoadImage: timeout",!1,f,E),o.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=d}else f(!1)}function i4(d,f){const x=new Aa,E=new AbortController,G=setTimeout(()=>{E.abort(),Qr(x,"TestPingServer: timeout",!1,f)},1e4);fetch(d,{signal:E.signal}).then(Q=>{clearTimeout(G),Q.ok?Qr(x,"TestPingServer: ok",!0,f):Qr(x,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(G),Qr(x,"TestPingServer: error",!1,f)})}function Qr(d,f,x,E,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),E(x)}catch{}}function s4(){this.g=new Ne}function Su(d){this.i=d.Sb||null,this.h=d.ab||!1}p(Su,V),Su.prototype.g=function(){return new El(this.i,this.h)};function El(d,f){Pe.call(this),this.H=d,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(El,Pe),t=El.prototype,t.open=function(d,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=f,this.readyState=1,Ba(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(f.body=d),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Fa(this)),this.readyState=0},t.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Ba(this)),this.g&&(this.readyState=3,Ba(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Sg(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Sg(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}t.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var f=d.value?d.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!d.done}))&&(this.response=this.responseText+=f)}d.done?Fa(this):Ba(this),this.readyState==3&&Sg(this)}},t.Oa=function(d){this.g&&(this.response=this.responseText=d,Fa(this))},t.Na=function(d){this.g&&(this.response=d,Fa(this))},t.ga=function(){this.g&&Fa(this)};function Fa(d){d.readyState=4,d.l=null,d.j=null,d.B=null,Ba(d)}t.setRequestHeader=function(d,f){this.A.append(d,f)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],f=this.h.entries();for(var x=f.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=f.next();return d.join(`\r
`)};function Ba(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(El.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Tg(d){let f="";return oe(d,function(x,E){f+=E,f+=":",f+=x,f+=`\r
`}),f}function Tu(d,f,x){e:{for(E in x){var E=!1;break e}E=!0}E||(x=Tg(x),typeof d=="string"?x!=null&&Pa(x):rt(d,f,x))}function ft(d){Pe.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(ft,Pe);var a4=/^https?$/i,o4=["POST","PUT"];t=ft.prototype,t.Fa=function(d){this.H=d},t.ea=function(d,f,x,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);f=f?f.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ug.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(f,String(d),!0),this.B=!1}catch(Q){Ig(this,Q);return}if(d=x||"",x=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var G in E)x.set(G,E[G]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const Q of E.keys())x.set(Q,E.get(Q));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(x.keys()).find(Q=>Q.toLowerCase()=="content-type"),G=o.FormData&&d instanceof o.FormData,!(Array.prototype.indexOf.call(o4,f,void 0)>=0)||E||G||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Q,he]of x)this.g.setRequestHeader(Q,he);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(Q){Ig(this,Q)}};function Ig(d,f){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=f,d.o=5,Ag(d),Sl(d)}function Ag(d){d.A||(d.A=!0,Qe(d,"complete"),Qe(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,Qe(this,"complete"),Qe(this,"abort"),Sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sl(this,!0)),ft.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Pg(this):this.Xa())},t.Xa=function(){Pg(this)};function Pg(d){if(d.h&&typeof a<"u"){if(d.v&&Yr(d)==4)setTimeout(d.Ca.bind(d),0);else if(Qe(d,"readystatechange"),Yr(d)==4){d.h=!1;try{const Q=d.ca();e:switch(Q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var x;if(!(x=f)){var E;if(E=Q===0){let he=String(d.D).match(kg)[1]||null;!he&&o.self&&o.self.location&&(he=o.self.location.protocol.slice(0,-1)),E=!a4.test(he?he.toLowerCase():"")}x=E}if(x)Qe(d,"complete"),Qe(d,"success");else{d.o=6;try{var G=Yr(d)>2?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.ca()+"]",Ag(d)}}finally{Sl(d)}}}}function Sl(d,f){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const x=d.g;d.g=null,f||Qe(d,"ready");try{x.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Yr(d){return d.g?d.g.readyState:0}t.ca=function(){try{return Yr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(d){if(this.g){var f=this.g.responseText;return d&&f.indexOf(d)==0&&(f=f.substring(d.length)),X(f)}};function Rg(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function l4(d){const f={};d=(d.g&&Yr(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<d.length;E++){if(I(d[E]))continue;var x=HN(d[E]);const G=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const Q=f[G]||[];f[G]=Q,Q.push(x)}le(f,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ua(d,f,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||f}function Dg(d){this.za=0,this.i=[],this.j=new Aa,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ua("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ua("baseRetryDelayMs",5e3,d),this.Za=Ua("retryDelaySeedMs",1e4,d),this.Ta=Ua("forwardChannelMaxRetries",2,d),this.va=Ua("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new xg(d&&d.concurrentRequestLimit),this.Ba=new s4,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Dg.prototype,t.ka=8,t.I=1,t.connect=function(d,f,x,E){rn(0),this.W=d,this.H=f||{},x&&E!==void 0&&(this.H.OSID=x,this.H.OAID=E),this.F=this.X,this.J=qg(this,null,this.W),Il(this)};function Iu(d){if(Mg(d),d.I==3){var f=d.V++,x=ir(d.J);if(rt(x,"SID",d.M),rt(x,"RID",f),rt(x,"TYPE","terminate"),$a(d,x),f=new Gr(d,d.j,f),f.M=2,f.A=Cl(ir(x)),x=!1,o.navigator&&o.navigator.sendBeacon)try{x=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!x&&o.Image&&(new Image().src=f.A,x=!0),x||(f.g=Wg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),_l(f)}$g(d)}function Tl(d){d.g&&(Pu(d),d.g.cancel(),d.g=null)}function Mg(d){Tl(d),d.v&&(o.clearTimeout(d.v),d.v=null),Al(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&o.clearTimeout(d.m),d.m=null)}function Il(d){if(!yg(d.h)&&!d.m){d.m=!0;var f=d.Ea;L||g(),R||(L(),R=!0),b.add(f,d),d.D=0}}function c4(d,f){return vg(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=f.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Ia(u(d.Ea,d,f),Ug(d,d.D)),d.D++,!0)}t.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const G=new Gr(this,this.j,d);let Q=this.o;if(this.U&&(Q?(Q=ke(Q),se(Q,this.U)):Q=this.U),this.u!==null||this.R||(G.J=Q,Q=null),this.S)e:{for(var f=0,x=0;x<this.i.length;x++){t:{var E=this.i[x];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,f>4096){f=x;break e}if(f===4096||x===this.i.length-1){f=x+1;break e}}f=1e3}else f=1e3;f=Vg(this,G,f),x=ir(this.J),rt(x,"RID",d),rt(x,"CVER",22),this.G&&rt(x,"X-HTTP-Session-Id",this.G),$a(this,x),Q&&(this.R?f="headers="+Pa(Tg(Q))+"&"+f:this.u&&Tu(x,this.u,Q)),Cu(this.h,G),this.Ra&&rt(x,"TYPE","init"),this.S?(rt(x,"$req",f),rt(x,"SID","null"),G.U=!0,ju(G,x,null)):ju(G,x,f),this.I=2}}else this.I==3&&(d?Lg(this,d):this.i.length==0||yg(this.h)||Lg(this))};function Lg(d,f){var x;f?x=f.l:x=d.V++;const E=ir(d.J);rt(E,"SID",d.M),rt(E,"RID",x),rt(E,"AID",d.K),$a(d,E),d.u&&d.o&&Tu(E,d.u,d.o),x=new Gr(d,d.j,x,d.D+1),d.u===null&&(x.J=d.o),f&&(d.i=f.G.concat(d.i)),f=Vg(d,x,1e3),x.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Cu(d.h,x),ju(x,E,f)}function $a(d,f){d.H&&oe(d.H,function(x,E){rt(f,E,x)}),d.l&&oe({},function(x,E){rt(f,E,x)})}function Vg(d,f,x){x=Math.min(d.i.length,x);const E=d.l?u(d.l.Ka,d.l,d):null;e:{var G=d.i;let Le=-1;for(;;){const Et=["count="+x];Le==-1?x>0?(Le=G[0].g,Et.push("ofs="+Le)):Le=0:Et.push("ofs="+Le);let et=!0;for(let Pt=0;Pt<x;Pt++){var Q=G[Pt].g;const sr=G[Pt].map;if(Q-=Le,Q<0)Le=Math.max(0,G[Pt].g-100),et=!1;else try{Q="req"+Q+"_"||"";try{var he=sr instanceof Map?sr:Object.entries(sr);for(const[Vi,Xr]of he){let Jr=Xr;l(Xr)&&(Jr=W(Xr)),Et.push(Q+Vi+"="+encodeURIComponent(Jr))}}catch(Vi){throw Et.push(Q+"type="+encodeURIComponent("_badmap")),Vi}}catch{E&&E(sr)}}if(et){he=Et.join("&");break e}}he=void 0}return d=d.i.splice(0,x),f.G=d,he}function Og(d){if(!d.g&&!d.v){d.Y=1;var f=d.Da;L||g(),R||(L(),R=!0),b.add(f,d),d.A=0}}function Au(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Ia(u(d.Da,d),Ug(d,d.A)),d.A++,!0)}t.Da=function(){if(this.v=null,Fg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Ia(u(this.Wa,this),d)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rn(10),Tl(this),Fg(this))};function Pu(d){d.B!=null&&(o.clearTimeout(d.B),d.B=null)}function Fg(d){d.g=new Gr(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var f=ir(d.na);rt(f,"RID","rpc"),rt(f,"SID",d.M),rt(f,"AID",d.K),rt(f,"CI",d.F?"0":"1"),!d.F&&d.ia&&rt(f,"TO",d.ia),rt(f,"TYPE","xmlhttp"),$a(d,f),d.u&&d.o&&Tu(f,d.u,d.o),d.O&&(d.g.H=d.O);var x=d.g;d=d.ba,x.M=1,x.A=Cl(ir(f)),x.u=null,x.R=!0,pg(x,d)}t.Va=function(){this.C!=null&&(this.C=null,Tl(this),Au(this),rn(19))};function Al(d){d.C!=null&&(o.clearTimeout(d.C),d.C=null)}function Bg(d,f){var x=null;if(d.g==f){Al(d),Pu(d),d.g=null;var E=2}else if(_u(d.h,f))x=f.G,bg(d.h,f),E=1;else return;if(d.I!=0){if(f.o)if(E==1){x=f.u?f.u.length:0,f=Date.now()-f.F;var G=d.D;E=pn(),Qe(E,new cg(E,x)),Il(d)}else Og(d);else if(G=f.m,G==3||G==0&&f.X>0||!(E==1&&c4(d,f)||E==2&&Au(d)))switch(x&&x.length>0&&(f=d.h,f.i=f.i.concat(x)),G){case 1:Li(d,5);break;case 4:Li(d,10);break;case 3:Li(d,6);break;default:Li(d,2)}}}function Ug(d,f){let x=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(x*=2),x*f}function Li(d,f){if(d.j.info("Error code "+f),f==2){var x=u(d.bb,d),E=d.Ua;const G=!E;E=new Kr(E||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Da(E,"https"),Cl(E),G?r4(E.toString(),x):i4(E.toString(),x)}else rn(2);d.I=0,d.l&&d.l.pa(f),$g(d),Mg(d)}t.bb=function(d){d?(this.j.info("Successfully pinged google.com"),rn(2)):(this.j.info("Failed to ping google.com"),rn(1))};function $g(d){if(d.I=0,d.ja=[],d.l){const f=wg(d.h);(f.length!=0||d.i.length!=0)&&(j(d.ja,f),j(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function qg(d,f,x){var E=x instanceof Kr?ir(x):new Kr(x);if(E.g!="")f&&(E.g=f+"."+E.g),Ma(E,E.u);else{var G=o.location;E=G.protocol,f=f?f+"."+G.hostname:G.hostname,G=+G.port;const Q=new Kr(null);E&&Da(Q,E),f&&(Q.g=f),G&&Ma(Q,G),x&&(Q.h=x),E=Q}return x=d.G,f=d.wa,x&&f&&rt(E,x,f),rt(E,"VER",d.ka),$a(d,E),E}function Wg(d,f,x){if(f&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=d.Aa&&!d.ma?new ft(new Su({ab:x})):new ft(d.ma),f.Fa(d.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hg(){}t=Hg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Pl(){}Pl.prototype.g=function(d,f){return new jn(d,f)};function jn(d,f){Pe.call(this),this.g=new Dg(f),this.l=d,this.h=f&&f.messageUrlParams||null,d=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(d?d["X-WebChannel-Content-Type"]=f.messageContentType:d={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(d?d["X-WebChannel-Client-Profile"]=f.sa:d={"X-WebChannel-Client-Profile":f.sa}),this.g.U=d,(d=f&&f.Qb)&&!I(d)&&(this.g.u=d),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!I(f)&&(this.g.G=f,d=this.h,d!==null&&f in d&&(d=this.h,f in d&&delete d[f])),this.j=new ks(this)}p(jn,Pe),jn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){Iu(this.g)},jn.prototype.o=function(d){var f=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.v&&(x={},x.__data__=W(d),d=x);f.i.push(new QN(f.Ya++,d)),f.I==3&&Il(f)},jn.prototype.N=function(){this.g.l=null,delete this.j,Iu(this.g),delete this.g,jn.Z.N.call(this)};function Gg(d){ie.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var f=d.__sm__;if(f){e:{for(const x in f){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,f=f!==null&&d in f?f[d]:void 0),this.data=f}else this.data=d}p(Gg,ie);function Kg(){Te.call(this),this.status=1}p(Kg,Te);function ks(d){this.g=d}p(ks,Hg),ks.prototype.ra=function(){Qe(this.g,"a")},ks.prototype.qa=function(d){Qe(this.g,new Gg(d))},ks.prototype.pa=function(d){Qe(this.g,new Kg)},ks.prototype.oa=function(){Qe(this.g,"b")},Pl.prototype.createWebChannel=Pl.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,Kj=function(){return new Pl},Gj=function(){return pn()},Hj=Ee,um={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zl.NO_ERROR=0,zl.TIMEOUT=8,zl.HTTP_ERROR=6,Cc=zl,dg.COMPLETE="complete",Wj=dg,Y.EventType=K,K.OPEN="a",K.CLOSE="b",K.ERROR="c",K.MESSAGE="d",Pe.prototype.listen=Pe.prototype.J,lo=Y,ft.prototype.listenOnce=ft.prototype.K,ft.prototype.getLastError=ft.prototype.Ha,ft.prototype.getLastErrorCode=ft.prototype.ya,ft.prototype.getStatus=ft.prototype.ca,ft.prototype.getResponseJson=ft.prototype.La,ft.prototype.getResponseText=ft.prototype.la,ft.prototype.send=ft.prototype.ea,ft.prototype.setWithCredentials=ft.prototype.Fa,qj=ft}).apply(typeof nc<"u"?nc:typeof self<"u"?self:typeof window<"u"?window:{});const Bv="@firebase/firestore",Uv="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let za="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new pf("@firebase/firestore");function Ns(){return us.logLevel}function ye(t,...e){if(us.logLevel<=We.DEBUG){const n=e.map(jf);us.debug(`Firestore (${za}): ${t}`,...n)}}function $r(t,...e){if(us.logLevel<=We.ERROR){const n=e.map(jf);us.error(`Firestore (${za}): ${t}`,...n)}}function da(t,...e){if(us.logLevel<=We.WARN){const n=e.map(jf);us.warn(`Firestore (${za}): ${t}`,...n)}}function jf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Qj(t,r,n)}function Qj(t,e,n){let r=`FIRESTORE (${za}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw $r(r),new Error(r)}function Ke(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Qj(e,s,r)}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Hr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N6{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class z6{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class _6{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ke(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let a=new Pr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Pr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=a;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Pr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ke(typeof r.accessToken=="string",31837,{l:r}),new Yj(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class C6{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class E6{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new C6(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class S6{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,xj(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ke(this.o===void 0,3512);const r=a=>{a.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.m;return this.m=a.token,ye("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?s(a):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new $v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ke(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new $v(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T6(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=T6(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%62))}return r}}function Be(t,e){return t<e?-1:t>e?1:0}function hm(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),a=e.charAt(r);if(s!==a)return Sh(s)===Sh(a)?Be(s,a):Sh(s)?1:-1}return Be(t.length,e.length)}const I6=55296,A6=57343;function Sh(t){const e=t.charCodeAt(0);return e>=I6&&e<=A6}function ua(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class lr{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ie(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ie(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return lr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof lr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=lr.compareSegments(e.get(s),n.get(s));if(a!==0)return a}return Be(e.length,n.length)}static compareSegments(e,n){const r=lr.isNumericId(e),s=lr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?lr.extractNumericId(e).compare(lr.extractNumericId(n)):hm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return yi.fromString(e.substring(4,e.length-2))}}class tt extends lr{construct(e,n,r){return new tt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ee.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new tt(n)}static emptyPath(){return new tt([])}}const P6=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends lr{construct(e,n,r){return new Bt(e,n,r)}static isValidIdentifier(e){return P6.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qv}static keyField(){return new Bt([qv])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ge(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ge(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(a(),s++)}if(a(),o)throw new ge(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(n)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(tt.fromString(e))}static fromName(e){return new Ce(tt.fromString(e).popFirst(5))}static empty(){return new Ce(tt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&tt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return tt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new tt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t,e,n){if(!n)throw new ge(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R6(t,e,n,r){if(e===!0&&r===!0)throw new ge(ee.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Wv(t){if(!Ce.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hv(t){if(Ce.isDocumentKey(t))throw new ge(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jj(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function au(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ie(12329,{type:typeof t})}function ji(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ge(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=au(t);throw new ge(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(t,e){const n={typeString:t};return e&&(n.value=e),n}function yl(t,e){if(!Jj(t))throw new ge(ee.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(a!==void 0&&o!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ge(ee.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=-62135596800,Kv=1e6;class st{static now(){return st.fromMillis(Date.now())}static fromDate(e){return st.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Kv);return new st(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ge(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Gv)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Kv}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:st._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yl(e,st._jsonSchema))return new st(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Gv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:zt("string",st._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new st(0,0))}static max(){return new Re(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl=-1;function D6(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new Ni(s,Ce.empty(),e)}function M6(t){return new Ni(t.readTime,t.key,nl)}class Ni{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ni(Re.min(),Ce.empty(),nl)}static max(){return new Ni(Re.max(),Ce.empty(),nl)}}function L6(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(t.documentKey,e.documentKey),n!==0?n:Be(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V6="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class O6{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==V6)throw t;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,r)=>{n(e)})}static reject(e){return new te((n,r)=>{r(e)})}static waitFor(e){return new te((n,r)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&n()},c=>r(c))}),o=!0,a===s&&n()})}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next(s=>s?te.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new te((r,s)=>{const a=e.length,o=new Array(a);let l=0;for(let c=0;c<a;c++){const u=c;n(e[u]).next(h=>{o[u]=h,++l,l===a&&r(o)},h=>s(h))}})}static doWhile(e,n){return new te((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function F6(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ca(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ou.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf=-1;function lu(t){return t==null}function yd(t){return t===0&&1/t==-1/0}function B6(t){return typeof t=="number"&&Number.isInteger(t)&&!yd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj="";function U6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Qv(e)),e=$6(t.get(n),e);return Qv(e)}function $6(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const a=t.charAt(s);switch(a){case"\0":n+="";break;case Zj:n+="";break;default:n+=a}}return n}function Qv(t){return t+Zj+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function fs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function e5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new pt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}}class rc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Ft.RED,this.left=s??Ft.EMPTY,this.right=a??Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Ft(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ft.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1;Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,n,r,s,a){return this}insert(e,n,r){return new Ft(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new Jn([])}unionWith(e){let n=new At(Bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Jn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ua(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new t5("Invalid base64 string: "+a):a}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const q6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zi(t){if(Ke(!!t,39018),typeof t=="string"){let e=0;const n=q6.exec(t);if(Ke(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:vt(t.seconds),nanos:vt(t.nanos)}}function vt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="server_timestamp",r5="__type__",i5="__previous_value__",s5="__local_write_time__";function _f(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[r5])==null?void 0:r.stringValue)===n5}function cu(t){const e=t.mapValue.fields[i5];return _f(e)?cu(e):e}function rl(t){const e=zi(t.mapValue.fields[s5].timestampValue);return new st(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,n,r,s,a,o,l,c,u,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=h}}const vd="(default)";class il{constructor(e,n){this.projectId=e,this.database=n||vd}static empty(){return new il("","")}get isDefaultDatabase(){return this.database===vd}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="__type__",H6="__max__",ic={mapValue:{}},o5="__vector__",bd="value";function Ci(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_f(t)?4:K6(t)?9007199254740991:G6(t)?10:11:Ie(28295,{value:t})}function wr(t,e){if(t===e)return!0;const n=Ci(t);if(n!==Ci(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return rl(t).isEqual(rl(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=zi(s.timestampValue),l=zi(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return _i(s.bytesValue).isEqual(_i(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return vt(s.geoPointValue.latitude)===vt(a.geoPointValue.latitude)&&vt(s.geoPointValue.longitude)===vt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return vt(s.integerValue)===vt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=vt(s.doubleValue),l=vt(a.doubleValue);return o===l?yd(o)===yd(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ua(t.arrayValue.values||[],e.arrayValue.values||[],wr);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(Yv(o)!==Yv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!wr(o[c],l[c])))return!1;return!0}(t,e);default:return Ie(52216,{left:t})}}function sl(t,e){return(t.values||[]).find(n=>wr(n,e))!==void 0}function ha(t,e){if(t===e)return 0;const n=Ci(t),r=Ci(e);if(n!==r)return Be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Be(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=vt(a.integerValue||a.doubleValue),c=vt(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Jv(t.timestampValue,e.timestampValue);case 4:return Jv(rl(t),rl(e));case 5:return hm(t.stringValue,e.stringValue);case 6:return function(a,o){const l=_i(a),c=_i(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const h=Be(l[u],c[u]);if(h!==0)return h}return Be(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Be(vt(a.latitude),vt(o.latitude));return l!==0?l:Be(vt(a.longitude),vt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zv(t.arrayValue,e.arrayValue);case 10:return function(a,o){var m,y,j,_;const l=a.fields||{},c=o.fields||{},u=(m=l[bd])==null?void 0:m.arrayValue,h=(y=c[bd])==null?void 0:y.arrayValue,p=Be(((j=u==null?void 0:u.values)==null?void 0:j.length)||0,((_=h==null?void 0:h.values)==null?void 0:_.length)||0);return p!==0?p:Zv(u,h)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===ic.mapValue&&o===ic.mapValue)return 0;if(a===ic.mapValue)return 1;if(o===ic.mapValue)return-1;const l=a.fields||{},c=Object.keys(l),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=hm(c[p],h[p]);if(m!==0)return m;const y=ha(l[c[p]],u[h[p]]);if(y!==0)return y}return Be(c.length,h.length)}(t.mapValue,e.mapValue);default:throw Ie(23264,{he:n})}}function Jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Be(t,e);const n=zi(t),r=zi(e),s=Be(n.seconds,r.seconds);return s!==0?s:Be(n.nanos,r.nanos)}function Zv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=ha(n[s],r[s]);if(a)return a}return Be(n.length,r.length)}function ma(t){return mm(t)}function mm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Ce.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=mm(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${mm(n.fields[o])}`;return s+"}"}(t.mapValue):Ie(61005,{value:t})}function Ec(t){switch(Ci(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cu(t);return e?16+Ec(e):16;case 5:return 2*t.stringValue.length;case 6:return _i(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,a)=>s+Ec(a),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return fs(r.fields,(a,o)=>{s+=a.length+Ec(o)}),s}(t.mapValue);default:throw Ie(13486,{value:t})}}function eb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function pm(t){return!!t&&"integerValue"in t}function Cf(t){return!!t&&"arrayValue"in t}function tb(t){return!!t&&"nullValue"in t}function nb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sc(t){return!!t&&"mapValue"in t}function G6(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a5])==null?void 0:r.stringValue)===o5}function Eo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return fs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Eo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Eo(t.arrayValue.values[n]);return e}return{...t}}function K6(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===H6}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.value=e}static empty(){return new Mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Eo(n)}setAll(e){let n=Bt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Eo(o):s.push(l.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Sc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Sc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){fs(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new Mn(Eo(this.value))}}function l5(t){const e=[];return fs(t.fields,(n,r)=>{const s=new Bt([n]);if(Sc(r)){const a=l5(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Jn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n,r,s,a,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new tn(e,0,Re.min(),Re.min(),Re.min(),Mn.empty(),0)}static newFoundDocument(e,n,r,s){return new tn(e,1,n,Re.min(),r,s,0)}static newNoDocument(e,n){return new tn(e,2,n,Re.min(),Re.min(),Mn.empty(),0)}static newUnknownDocument(e,n){return new tn(e,3,n,Re.min(),Re.min(),Mn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,n){this.position=e,this.inclusive=n}}function rb(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=Ce.comparator(Ce.fromName(o.referenceValue),n.key):r=ha(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function ib(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,n="asc"){this.field=e,this.dir=n}}function Q6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{}class Nt extends c5{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new X6(e,n,r):n==="array-contains"?new e9(e,r):n==="in"?new t9(e,r):n==="not-in"?new n9(e,r):n==="array-contains-any"?new r9(e,r):new Nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new J6(e,r):new Z6(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ha(n,this.value)):n!==null&&Ci(this.value)===Ci(n)&&this.matchesComparison(ha(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends c5{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new rr(e,n)}matches(e){return d5(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d5(t){return t.op==="and"}function u5(t){return Y6(t)&&d5(t)}function Y6(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function fm(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+ma(t.value);if(u5(t))return t.filters.map(e=>fm(e)).join(",");{const e=t.filters.map(n=>fm(n)).join(",");return`${t.op}(${e})`}}function h5(t,e){return t instanceof Nt?function(r,s){return s instanceof Nt&&r.op===s.op&&r.field.isEqual(s.field)&&wr(r.value,s.value)}(t,e):t instanceof rr?function(r,s){return s instanceof rr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,l)=>a&&h5(o,s.filters[l]),!0):!1}(t,e):void Ie(19439)}function m5(t){return t instanceof Nt?function(n){return`${n.field.canonicalString()} ${n.op} ${ma(n.value)}`}(t):t instanceof rr?function(n){return n.op.toString()+" {"+n.getFilters().map(m5).join(" ,")+"}"}(t):"Filter"}class X6 extends Nt{constructor(e,n,r){super(e,n,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class J6 extends Nt{constructor(e,n){super(e,"in",n),this.keys=p5("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Z6 extends Nt{constructor(e,n){super(e,"not-in",n),this.keys=p5("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function p5(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class e9 extends Nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Cf(n)&&sl(n.arrayValue,this.value)}}class t9 extends Nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class n9 extends Nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!sl(this.value.arrayValue,n)}}class r9 extends Nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Cf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,n=null,r=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.Te=null}}function sb(t,e=null,n=[],r=[],s=null,a=null,o=null){return new i9(t,e,n,r,s,a,o)}function Ef(t){const e=Me(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),lu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ma(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ma(r)).join(",")),e.Te=n}return e.Te}function Sf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Q6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h5(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ib(t.startAt,e.startAt)&&ib(t.endAt,e.endAt)}function gm(t){return Ce.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n=null,r=[],s=[],a=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function s9(t,e,n,r,s,a,o,l){return new Ea(t,e,n,r,s,a,o,l)}function Tf(t){return new Ea(t)}function ab(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function f5(t){return t.collectionGroup!==null}function So(t){const e=Me(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new At(Bt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new al(a,r))}),n.has(Bt.keyField().canonicalString())||e.Ie.push(new al(Bt.keyField(),r))}return e.Ie}function pr(t){const e=Me(t);return e.Ee||(e.Ee=a9(e,So(t))),e.Ee}function a9(t,e){if(t.limitType==="F")return sb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new al(s.field,a)});const n=t.endAt?new wd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wd(t.startAt.position,t.startAt.inclusive):null;return sb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xm(t,e){const n=t.filters.concat([e]);return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ym(t,e,n){return new Ea(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return Sf(pr(t),pr(e))&&t.limitType===e.limitType}function g5(t){return`${Ef(pr(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>m5(s)).join(", ")}]`),lu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ma(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ma(s)).join(",")),`Target(${r})`}(pr(t))}; limitType=${t.limitType})`}function uu(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ce.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of So(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=rb(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,So(r),s)||r.endAt&&!function(o,l,c){const u=rb(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,So(r),s))}(t,e)}function o9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x5(t){return(e,n)=>{let r=!1;for(const s of So(t)){const a=l9(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function l9(t,e,n){const r=t.field.isKeyField()?Ce.comparator(e.key,n.key):function(a,o,l){const c=o.data.field(a),u=l.data.field(a);return c!==null&&u!==null?ha(c,u):Ie(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ie(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){fs(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return e5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c9=new pt(Ce.comparator);function qr(){return c9}const y5=new pt(Ce.comparator);function co(...t){let e=y5;for(const n of t)e=e.insert(n.key,n);return e}function v5(t){let e=y5;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Xi(){return To()}function b5(){return To()}function To(){return new gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const d9=new pt(Ce.comparator),u9=new At(Ce.comparator);function Ue(...t){let e=u9;for(const n of t)e=e.add(n);return e}const h9=new At(Be);function m9(){return h9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yd(e)?"-0":e}}function w5(t){return{integerValue:""+t}}function p9(t,e){return B6(e)?w5(e):If(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this._=void 0}}function f9(t,e,n){return t instanceof kd?function(s,a){const o={fields:{[r5]:{stringValue:n5},[s5]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&_f(a)&&(a=cu(a)),a&&(o.fields[i5]=a),{mapValue:o}}(n,e):t instanceof ol?j5(t,e):t instanceof ll?N5(t,e):function(s,a){const o=k5(s,a),l=ob(o)+ob(s.Ae);return pm(o)&&pm(s.Ae)?w5(l):If(s.serializer,l)}(t,e)}function g9(t,e,n){return t instanceof ol?j5(t,e):t instanceof ll?N5(t,e):n}function k5(t,e){return t instanceof jd?function(r){return pm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class kd extends hu{}class ol extends hu{constructor(e){super(),this.elements=e}}function j5(t,e){const n=z5(e);for(const r of t.elements)n.some(s=>wr(s,r))||n.push(r);return{arrayValue:{values:n}}}class ll extends hu{constructor(e){super(),this.elements=e}}function N5(t,e){let n=z5(e);for(const r of t.elements)n=n.filter(s=>!wr(s,r));return{arrayValue:{values:n}}}class jd extends hu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function ob(t){return vt(t.integerValue||t.doubleValue)}function z5(t){return Cf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function x9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ol&&s instanceof ol||r instanceof ll&&s instanceof ll?ua(r.elements,s.elements,wr):r instanceof jd&&s instanceof jd?wr(r.Ae,s.Ae):r instanceof kd&&s instanceof kd}(t.transform,e.transform)}class y9{constructor(e,n){this.version=e,this.transformResults=n}}class fr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fr}static exists(e){return new fr(void 0,e)}static updateTime(e){return new fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Tc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mu{}function _5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Af(t.key,fr.none()):new vl(t.key,t.data,fr.none());{const n=t.data,r=Mn.empty();let s=new At(Bt.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new xs(t.key,r,new Jn(s.toArray()),fr.none())}}function v9(t,e,n){t instanceof vl?function(s,a,o){const l=s.value.clone(),c=cb(s.fieldTransforms,a,o.transformResults);l.setAll(c),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof xs?function(s,a,o){if(!Tc(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=cb(s.fieldTransforms,a,o.transformResults),c=a.data;c.setAll(C5(s)),c.setAll(l),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Io(t,e,n,r){return t instanceof vl?function(a,o,l,c){if(!Tc(a.precondition,o))return l;const u=a.value.clone(),h=db(a.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof xs?function(a,o,l,c){if(!Tc(a.precondition,o))return l;const u=db(a.fieldTransforms,c,o),h=o.data;return h.setAll(C5(a)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(a,o,l){return Tc(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function b9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=k5(r.transform,s||null);a!=null&&(n===null&&(n=Mn.empty()),n.set(r.field,a))}return n||null}function lb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ua(r,s,(a,o)=>x9(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class vl extends mu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class xs extends mu{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function C5(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function cb(t,e,n){const r=new Map;Ke(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);r.set(a.field,g9(o,l,n[s]))}return r}function db(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,f9(a,o,e))}return r}class Af extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class w9 extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k9{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&v9(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Io(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=b5();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=n.has(s.key)?null:l;const c=_5(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ue())}isEqual(e){return this.batchId===e.batchId&&ua(this.mutations,e.mutations,(n,r)=>lb(n,r))&&ua(this.baseMutations,e.baseMutations,(n,r)=>lb(n,r))}}class Pf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ke(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return d9}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Pf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j9{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N9{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,qe;function z9(t){switch(t){case ee.OK:return Ie(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Ie(15467,{code:t})}}function E5(t){if(t===void 0)return $r("GRPC error has no .code"),ee.UNKNOWN;switch(t){case wt.OK:return ee.OK;case wt.CANCELLED:return ee.CANCELLED;case wt.UNKNOWN:return ee.UNKNOWN;case wt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case wt.INTERNAL:return ee.INTERNAL;case wt.UNAVAILABLE:return ee.UNAVAILABLE;case wt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case wt.NOT_FOUND:return ee.NOT_FOUND;case wt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case wt.ABORTED:return ee.ABORTED;case wt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case wt.DATA_LOSS:return ee.DATA_LOSS;default:return Ie(39323,{code:t})}}(qe=wt||(wt={}))[qe.OK=0]="OK",qe[qe.CANCELLED=1]="CANCELLED",qe[qe.UNKNOWN=2]="UNKNOWN",qe[qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qe[qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qe[qe.NOT_FOUND=5]="NOT_FOUND",qe[qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",qe[qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",qe[qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",qe[qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qe[qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qe[qe.ABORTED=10]="ABORTED",qe[qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",qe[qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",qe[qe.INTERNAL=13]="INTERNAL",qe[qe.UNAVAILABLE=14]="UNAVAILABLE",qe[qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _9(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C9=new yi([4294967295,4294967295],0);function ub(t){const e=_9().encode(t),n=new $j;return n.update(e),new Uint8Array(n.digest())}function hb(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yi([n,r],0),new yi([s,a],0)]}class Rf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new uo(`Invalid padding: ${n}`);if(r<0)throw new uo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new uo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=yi.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(yi.fromNumber(r)));return s.compare(C9)===1&&(s=new yi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=ub(e),[r,s]=hb(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Rf(a,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=ub(e),[r,s]=hb(n);for(let a=0;a<this.hashCount;a++){const o=this.ye(r,s,a);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class uo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,bl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new pu(Re.min(),s,new pt(Be),qr(),Ue())}}class bl{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new bl(r,n,Ue(),Ue(),Ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class S5{constructor(e,n){this.targetId=e,this.Ce=n}}class T5{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class mb{constructor(){this.ve=0,this.Fe=pb(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ue(),n=Ue(),r=Ue();return this.Fe.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Ie(38017,{changeType:a})}}),new bl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=pb()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class E9{constructor(e){this.Ge=e,this.ze=new Map,this.je=qr(),this.Je=sc(),this.He=sc(),this.Ye=new pt(Be)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const a=s.target;if(gm(a))if(r===0){const o=new Ce(a.path);this.et(n,o,tn.newNoDocument(o,Re.min()))}else Ke(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,l;try{o=_i(r).toUint8Array()}catch(c){if(c instanceof t5)return da("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Rf(o,s,a)}catch(c){return da(c instanceof uo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.et(n,a,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((a,o)=>{const l=this.ot(o);if(l){if(a.current&&gm(l.target)){const c=new Ce(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,tn.newNoDocument(c,e))}a.Be&&(n.set(o,a.ke()),a.qe())}});let r=Ue();this.He.forEach((a,o)=>{let l=!0;o.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(a))}),this.je.forEach((a,o)=>o.setReadTime(e));const s=new pu(e,n,this.Ye,this.je,r);return this.je=qr(),this.Je=sc(),this.He=sc(),this.Ye=new pt(Be),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new mb,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new At(Be),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new At(Be),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new mb),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function sc(){return new pt(Ce.comparator)}function pb(){return new pt(Ce.comparator)}const S9={asc:"ASCENDING",desc:"DESCENDING"},T9={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},I9={and:"AND",or:"OR"};class A9{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function vm(t,e){return t.useProto3Json||lu(e)?e:{value:e}}function Nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function I5(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function P9(t,e){return Nd(t,e.toTimestamp())}function gr(t){return Ke(!!t,49232),Re.fromTimestamp(function(n){const r=zi(n);return new st(r.seconds,r.nanos)}(t))}function Df(t,e){return bm(t,e).canonicalString()}function bm(t,e){const n=function(s){return new tt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function A5(t){const e=tt.fromString(t);return Ke(L5(e),10190,{key:e.toString()}),e}function wm(t,e){return Df(t.databaseId,e.path)}function Th(t,e){const n=A5(e);if(n.get(1)!==t.databaseId.projectId)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ge(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ce(R5(n))}function P5(t,e){return Df(t.databaseId,e)}function R9(t){const e=A5(t);return e.length===4?tt.emptyPath():R5(e)}function km(t){return new tt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function R5(t){return Ke(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fb(t,e,n){return{name:wm(t,e),fields:n.value.mapValue.fields}}function D9(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ie(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(u,h){return u.useProto3Json?(Ke(h===void 0||typeof h=="string",58123),Wt.fromBase64String(h||"")):(Ke(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Wt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const h=u.code===void 0?ee.UNKNOWN:E5(u.code);return new ge(h,u.message||"")}(o);n=new T5(r,s,a,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Th(t,r.document.name),a=gr(r.document.updateTime),o=r.document.createTime?gr(r.document.createTime):Re.min(),l=new Mn({mapValue:{fields:r.document.fields}}),c=tn.newFoundDocument(s,a,o,l),u=r.targetIds||[],h=r.removedTargetIds||[];n=new Ic(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Th(t,r.document),a=r.readTime?gr(r.readTime):Re.min(),o=tn.newNoDocument(s,a),l=r.removedTargetIds||[];n=new Ic([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Th(t,r.document),a=r.removedTargetIds||[];n=new Ic([],a,s,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new N9(s,a),l=r.targetId;n=new S5(l,o)}}return n}function M9(t,e){let n;if(e instanceof vl)n={update:fb(t,e.key,e.value)};else if(e instanceof Af)n={delete:wm(t,e.key)};else if(e instanceof xs)n={update:fb(t,e.key,e.data),updateMask:W9(e.fieldMask)};else{if(!(e instanceof w9))return Ie(16599,{Vt:e.type});n={verify:wm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const l=o.transform;if(l instanceof kd)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ol)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ll)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof jd)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Ie(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:P9(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ie(27497)}(t,e.precondition)),n}function L9(t,e){return t&&t.length>0?(Ke(e!==void 0,14353),t.map(n=>function(s,a){let o=s.updateTime?gr(s.updateTime):gr(a);return o.isEqual(Re.min())&&(o=gr(a)),new y9(o,s.transformResults||[])}(n,e))):[]}function V9(t,e){return{documents:[P5(t,e.path)]}}function O9(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=P5(t,s);const a=function(u){if(u.length!==0)return M5(rr.create(u,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(u){if(u.length!==0)return u.map(h=>function(m){return{field:_s(m.field),direction:U9(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=vm(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function F9(t){let e=R9(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ke(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(p){const m=D5(p);return m instanceof rr&&u5(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(j){return new al(Cs(j.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(j.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,lu(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,y=p.values||[];return new wd(y,m)}(n.startAt));let u=null;return n.endAt&&(u=function(p){const m=!p.before,y=p.values||[];return new wd(y,m)}(n.endAt)),s9(e,s,o,a,l,"F",c,u)}function B9(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function D5(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Cs(n.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Cs(n.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Cs(n.unaryFilter.field);return Nt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Cs(n.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}}(t):t.fieldFilter!==void 0?function(n){return Nt.create(Cs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return rr.create(n.compositeFilter.filters.map(r=>D5(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}}(n.compositeFilter.op))}(t):Ie(30097,{filter:t})}function U9(t){return S9[t]}function $9(t){return T9[t]}function q9(t){return I9[t]}function _s(t){return{fieldPath:t.canonicalString()}}function Cs(t){return Bt.fromServerFormat(t.fieldPath)}function M5(t){return t instanceof Nt?function(n){if(n.op==="=="){if(nb(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NAN"}};if(tb(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(nb(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NAN"}};if(tb(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(n.field),op:$9(n.op),value:n.value}}}(t):t instanceof rr?function(n){const r=n.getFilters().map(s=>M5(s));return r.length===1?r[0]:{compositeFilter:{op:q9(n.op),filters:r}}}(t):Ie(54877,{filter:t})}function W9(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function L5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n,r,s,a=Re.min(),o=Re.min(),l=Wt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new oi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new oi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H9{constructor(e){this.yt=e}}function G9(t){const e=F9({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ym(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(){this.Cn=new Q9}addToCollectionParentIndex(e,n){return this.Cn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(Ni.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(Ni.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class Q9{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new At(tt.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new At(tt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V5=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(V5,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new pa(0)}static cr(){return new pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="LruGarbageCollector",Y9=1048576;function yb([t,e],[n,r]){const s=Be(t,n);return s===0?Be(e,r):s}class X9{constructor(e){this.Ir=e,this.buffer=new At(yb),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();yb(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class J9{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(xb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ca(n)?ye(xb,"Ignoring IndexedDB error during garbage collection: ",n):await _a(n)}await this.Vr(3e5)})}}class Z9{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return te.resolve(ou.ce);const r=new X9(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(gb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gb):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,a,o,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(a=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(u=Date.now(),Ns()<=We.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-h}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:p})))}}function eP(t,e){return new Z9(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.changes=new gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rP{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Io(r.mutation,s,Jn.empty(),st.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ue()){const s=Xi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=co();return a.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Xi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let a=qr();const o=To(),l=function(){return To()}();return n.forEach((c,u)=>{const h=r.get(u.key);s.has(u.key)&&(h===void 0||h.mutation instanceof xs)?a=a.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Io(h.mutation,u,h.mutation.getFieldMask(),st.now())):o.set(u.key,Jn.empty())}),this.recalculateAndSaveOverlays(e,a).next(c=>(c.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>l.set(u,new nP(h,o.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=To();let s=new pt((o,l)=>o-l),a=Ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let h=r.get(c)||Jn.empty();h=l.applyToLocalView(u,h),r.set(c,h);const p=(s.get(l.batchId)||Ue()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,p=b5();h.forEach(m=>{if(!a.has(m)){const y=_5(n.get(m),r.get(m));y!==null&&p.set(m,y),a=a.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return te.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Ce.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):f5(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):te.resolve(Xi());let l=nl,c=a;return o.next(u=>te.forEach(u,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),a.get(h)?te.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,u,a)).next(()=>this.computeViews(e,c,u,Ue())).next(h=>({batchId:l,changes:v5(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next(r=>{let s=co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=co();return this.indexManager.getCollectionParents(e,a).next(l=>te.forEach(l,c=>{const u=function(p,m){return new Ea(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(a));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((c,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,tn.newInvalidDocument(h)))});let l=co();return o.forEach((c,u)=>{const h=a.get(c);h!==void 0&&Io(h.mutation,u,Jn.empty(),st.now()),uu(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return te.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:gr(s.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:G9(s.bundledQuery),readTime:gr(s.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.overlays=new pt(Ce.comparator),this.qr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Xi();return te.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.St(e,n,a)}),te.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.qr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const s=Xi(),a=n.length+1,o=new Ce(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===a&&c.largestBatchId>r&&s.set(c.getKey(),c)}return te.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new pt((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let h=a.get(u.largestBatchId);h===null&&(h=Xi(),a=a.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=Xi(),c=a.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return te.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new j9(n,r));let a=this.qr.get(n);a===void 0&&(a=Ue(),this.qr.set(n,a)),this.qr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aP{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(){this.Qr=new At(Dt.$r),this.Ur=new At(Dt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Dt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Dt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Ce(new tt([])),r=new Dt(n,e),s=new Dt(n,e+1),a=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),a.push(o.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ce(new tt([])),r=new Dt(n,e),s=new Dt(n,e+1);let a=Ue();return this.Ur.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new Dt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Dt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ce.comparator(e.key,n.key)||Be(e.Yr,n.Yr)}static Kr(e,n){return Be(e.Yr,n.Yr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new At(Dt.$r)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new k9(a,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Dt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return te.resolve(o)}lookupMutationBatch(e,n){return te.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),a=s<0?0:s;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?zf:this.tr-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Dt(n,0),s=new Dt(n,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);a.push(l)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new At(Be);return n.forEach(s=>{const a=new Dt(s,0),o=new Dt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,o],l=>{r=r.add(l.Yr)})}),te.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;Ce.isDocumentKey(a)||(a=a.child(""));const o=new Dt(new Ce(a),0);let l=new At(Be);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},o),te.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ke(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return te.forEach(n.mutations,s=>{const a=new Dt(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Dt(n,0),s=this.Zr.firstAfterOrEqual(r);return te.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lP{constructor(e){this.ri=e,this.docs=function(){return new pt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():tn.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():tn.newInvalidDocument(s))}),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=qr();const o=n.path,l=new Ce(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||L6(M6(h),r)<=0||(s.has(h.key)||uu(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,n,r,s){Ie(9500)}ii(e,n){return te.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cP(this)}getSize(e){return te.resolve(this.size)}}class cP extends tP{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),te.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{constructor(e){this.persistence=e,this.si=new gs(n=>Ef(n),Sf),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Mf,this.targetCount=0,this.ai=pa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),te.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new pa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.Pr(n),te.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),te.waitFor(a).next(()=>s)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e,n){this.ui={},this.overlays={},this.ci=new ou(0),this.li=!1,this.li=!0,this.hi=new aP,this.referenceDelegate=e(this),this.Pi=new dP(this),this.indexManager=new K9,this.remoteDocumentCache=function(s){return new lP(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new H9(n),this.Ii=new iP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new sP,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new oP(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){ye("MemoryPersistence","Starting transaction:",e);const s=new uP(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(a=>this.referenceDelegate.di(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Ai(e,n){return te.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class uP extends O6{constructor(e){super(),this.currentSequenceNumber=e}}class Lf{constructor(e){this.persistence=e,this.Ri=new Mf,this.Vi=null}static mi(e){return new Lf(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.fi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.fi,r=>{const s=Ce.fromPath(r);return this.gi(e,s).next(a=>{a||n.removeEntry(s,Re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return te.or([()=>te.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class zd{constructor(e,n){this.persistence=e,this.pi=new gs(r=>U6(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=eP(this,n)}static mi(e,n){return new zd(e,n)}Ei(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return te.forEach(this.pi,(r,s)=>this.br(e,r,s).next(a=>a?te.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,a.removeEntry(o,Re.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),te.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ec(e.data.value)),n}br(e,n,r){return te.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return te.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ue(),s=Ue();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Vf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return O3()?8:F6(M3())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.ys(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ws(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new hP;return this.Ss(e,n,o).next(l=>{if(a.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>a.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Ns()<=We.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),te.resolve()):(Ns()<=We.DEBUG&&ye("QueryEngine","Query:",zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Ns()<=We.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pr(n))):te.resolve())}ys(e,n){if(ab(n))return te.resolve(null);let r=pr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ym(n,null,"F"),r=pr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=Ue(...a);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,o,c.readTime)?this.ys(e,ym(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return ab(n)||s.isEqual(Re.min())?te.resolve(null):this.ps.getDocuments(e,r).next(a=>{const o=this.Ds(n,a);return this.Cs(n,o,r,s)?te.resolve(null):(Ns()<=We.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zs(n)),this.vs(e,o,n,D6(s,nl)).next(l=>l))})}Ds(e,n){let r=new At(x5(e));return n.forEach((s,a)=>{uu(e,a)&&(r=r.add(a))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Ss(e,n,r){return Ns()<=We.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",zs(n)),this.ps.getDocumentsMatchingQuery(e,n,Ni.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of="LocalStore",pP=3e8;class fP{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new pt(Be),this.xs=new gs(a=>Ef(a),Sf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function gP(t,e,n,r){return new fP(t,e,n,r)}async function F5(t,e){const n=Me(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],l=[];let c=Ue();for(const u of s){o.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of a){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:o,addedBatchIds:l}))})})}function xP(t,e){const n=Me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,h){const p=u.batch,m=p.keys();let y=te.resolve();return m.forEach(j=>{y=y.next(()=>h.getEntry(c,j)).next(_=>{const T=u.docVersions.get(j);Ke(T!==null,48541),_.version.compareTo(T)<0&&(p.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),h.addEntry(_)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ue();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function B5(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function yP(t,e){const n=Me(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;l.push(n.Pi.removeMatchingKeys(a,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(a,h.addedDocuments,p)));let y=m.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Wt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(p,y),function(_,T,v){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=pP?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(a,y))});let c=qr(),u=Ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(vP(a,o,e.documentUpdates).next(h=>{c=h.ks,u=h.qs})),!r.isEqual(Re.min())){const h=n.Pi.getLastRemoteSnapshotVersion(a).next(p=>n.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r));l.push(h)}return te.waitFor(l).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,c,u)).next(()=>c)}).then(a=>(n.Ms=s,a))}function vP(t,e,n){let r=Ue(),s=Ue();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=qr();return n.forEach((l,c)=>{const u=a.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Re.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):ye(Of,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:o,qs:s}})}function bP(t,e){const n=Me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wP(t,e){const n=Me(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(a=>a?(s=a,te.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new oi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function jm(t,e,n){const r=Me(t),s=r.Ms.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ca(o))throw o;ye(Of,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function vb(t,e,n){const r=Me(t);let s=Re.min(),a=Ue();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){const p=Me(c),m=p.xs.get(h);return m!==void 0?te.resolve(p.Ms.get(m)):p.Pi.getTargetData(u,h)}(r,o,pr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{a=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:Re.min(),n?a:Ue())).next(l=>(kP(r,o9(e),l),{documents:l,Qs:a})))}function kP(t,e,n){let r=t.Os.get(e)||Re.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.Os.set(e,r)}class bb{constructor(){this.activeTargetIds=m9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jP{constructor(){this.Mo=new bb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new bb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="ConnectivityMonitor";class kb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(wb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(wb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ac=null;function Nm(){return ac===null?ac=function(){return 268435456+Math.round(2147483648*Math.random())}():ac++,"0x"+ac.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="RestConnection",zP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class _P{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===vd?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,a){const o=Nm(),l=this.zo(e,n.toUriEncodedString());ye(Ih,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,a);const{host:u}=new URL(l),h=nu(u);return this.Jo(e,l,c,r,h).then(p=>(ye(Ih,`Received RPC '${e}' ${o}: `,p),p),p=>{throw da(Ih,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}Ho(e,n,r,s,a,o){return this.Go(e,n,r,s,a)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+za}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>e[a]=s),r&&r.headers.forEach((s,a)=>e[a]=s)}zo(e,n){const r=zP[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt="WebChannelConnection";class EP extends _P{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,a){const o=Nm();return new Promise((l,c)=>{const u=new qj;u.setWithCredentials(!0),u.listenOnce(Wj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Cc.NO_ERROR:const p=u.getResponseJson();ye(Qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Cc.TIMEOUT:ye(Qt,`RPC '${e}' ${o} timed out`),c(new ge(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Cc.HTTP_ERROR:const m=u.getStatus();if(ye(Qt,`RPC '${e}' ${o} failed with status:`,m,"response text:",u.getResponseText()),m>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const j=y==null?void 0:y.error;if(j&&j.status&&j.message){const _=function(v){const w=v.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(w)>=0?w:ee.UNKNOWN}(j.status);c(new ge(_,j.message))}else c(new ge(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ge(ee.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{ye(Qt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);ye(Qt,`RPC '${e}' ${o} sending request:`,s),u.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Nm(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Kj(),l=Gj(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=a.join("");ye(Qt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const p=o.createWebChannel(h,c);this.I_(p);let m=!1,y=!1;const j=new CP({Yo:T=>{y?ye(Qt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(m||(ye(Qt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),ye(Qt,`RPC '${e}' stream ${s} sending:`,T),p.send(T))},Zo:()=>p.close()}),_=(T,v,w)=>{T.listen(v,N=>{try{w(N)}catch(P){setTimeout(()=>{throw P},0)}})};return _(p,lo.EventType.OPEN,()=>{y||(ye(Qt,`RPC '${e}' stream ${s} transport opened.`),j.o_())}),_(p,lo.EventType.CLOSE,()=>{y||(y=!0,ye(Qt,`RPC '${e}' stream ${s} transport closed`),j.a_(),this.E_(p))}),_(p,lo.EventType.ERROR,T=>{y||(y=!0,da(Qt,`RPC '${e}' stream ${s} transport errored. Name:`,T.name,"Message:",T.message),j.a_(new ge(ee.UNAVAILABLE,"The operation could not be completed")))}),_(p,lo.EventType.MESSAGE,T=>{var v;if(!y){const w=T.data[0];Ke(!!w,16349);const N=w,P=(N==null?void 0:N.error)||((v=N[0])==null?void 0:v.error);if(P){ye(Qt,`RPC '${e}' stream ${s} received error:`,P);const L=P.status;let R=function(z){const C=wt[z];if(C!==void 0)return E5(C)}(L),b=P.message;R===void 0&&(R=ee.INTERNAL,b="Unknown error status: "+L+" with message "+P.message),y=!0,j.a_(new ge(R,b)),p.close()}else ye(Qt,`RPC '${e}' stream ${s} received:`,w),j.u_(w)}}),_(l,Hj.STAT_EVENT,T=>{T.stat===um.PROXY?ye(Qt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===um.NOPROXY&&ye(Qt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{j.__()},0),j}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Ah(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(t){return new A9(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U5{constructor(e,n,r=1e3,s=1.5,a=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&ye("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb="PersistentStream";class $5{constructor(e,n,r,s,a,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new U5(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ee.RESOURCE_EXHAUSTED?($r(n.toString()),$r("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new ge(ee.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ye(jb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ye(jb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SP extends $5{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=D9(this.serializer,e),r=function(a){if(!("targetChange"in a))return Re.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Re.min():o.readTime?gr(o.readTime):Re.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=km(this.serializer),n.addTarget=function(a,o){let l;const c=o.target;if(l=gm(c)?{documents:V9(a,c)}:{query:O9(a,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=I5(a,o.resumeToken);const u=vm(a,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(Re.min())>0){l.readTime=Nd(a,o.snapshotVersion.toTimestamp());const u=vm(a,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=B9(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=km(this.serializer),n.removeTarget=e,this.q_(n)}}class TP extends $5{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=L9(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=km(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>M9(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{}class AP extends IP{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Go(e,bm(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ee.UNKNOWN,a.toString())})}Ho(e,n,r,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,bm(n,r),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ge(ee.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class PP{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?($r(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="RemoteStore";class RP{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ys(this)&&(ye(hs,"Restarting streams for network reachability change."),await async function(c){const u=Me(c);u.Ea.add(4),await wl(u),u.Ra.set("Unknown"),u.Ea.delete(4),await gu(u)}(this))})}),this.Ra=new PP(r,s)}}async function gu(t){if(ys(t))for(const e of t.da)await e(!0)}async function wl(t){for(const e of t.da)await e(!1)}function q5(t,e){const n=Me(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),$f(n)?Uf(n):Sa(n).O_()&&Bf(n,e))}function Ff(t,e){const n=Me(t),r=Sa(n);n.Ia.delete(e),r.O_()&&W5(n,e),n.Ia.size===0&&(r.O_()?r.L_():ys(n)&&n.Ra.set("Unknown"))}function Bf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Sa(t).Y_(e)}function W5(t,e){t.Va.Ue(e),Sa(t).Z_(e)}function Uf(t){t.Va=new E9({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Sa(t).start(),t.Ra.ua()}function $f(t){return ys(t)&&!Sa(t).x_()&&t.Ia.size>0}function ys(t){return Me(t).Ea.size===0}function H5(t){t.Va=void 0}async function DP(t){t.Ra.set("Online")}async function MP(t){t.Ia.forEach((e,n)=>{Bf(t,e)})}async function LP(t,e){H5(t),$f(t)?(t.Ra.ha(e),Uf(t)):t.Ra.set("Unknown")}async function VP(t,e,n){if(t.Ra.set("Online"),e instanceof T5&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){ye(hs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _d(t,r)}else if(e instanceof Ic?t.Va.Ze(e):e instanceof S5?t.Va.st(e):t.Va.tt(e),!n.isEqual(Re.min()))try{const r=await B5(t.localStore);n.compareTo(r)>=0&&await function(a,o){const l=a.Va.Tt(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const h=a.Ia.get(u);h&&a.Ia.set(u,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const h=a.Ia.get(c);if(!h)return;a.Ia.set(c,h.withResumeToken(Wt.EMPTY_BYTE_STRING,h.snapshotVersion)),W5(a,c);const p=new oi(h.target,c,u,h.sequenceNumber);Bf(a,p)}),a.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){ye(hs,"Failed to raise snapshot:",r),await _d(t,r)}}async function _d(t,e,n){if(!Ca(e))throw e;t.Ea.add(1),await wl(t),t.Ra.set("Offline"),n||(n=()=>B5(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ye(hs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gu(t)})}function G5(t,e){return e().catch(n=>_d(t,n,e))}async function xu(t){const e=Me(t),n=Ei(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zf;for(;OP(e);)try{const s=await bP(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,FP(e,s)}catch(s){await _d(e,s)}K5(e)&&Q5(e)}function OP(t){return ys(t)&&t.Ta.length<10}function FP(t,e){t.Ta.push(e);const n=Ei(t);n.O_()&&n.X_&&n.ea(e.mutations)}function K5(t){return ys(t)&&!Ei(t).x_()&&t.Ta.length>0}function Q5(t){Ei(t).start()}async function BP(t){Ei(t).ra()}async function UP(t){const e=Ei(t);for(const n of t.Ta)e.ea(n.mutations)}async function $P(t,e,n){const r=t.Ta.shift(),s=Pf.from(r,e,n);await G5(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await xu(t)}async function qP(t,e){e&&Ei(t).X_&&await async function(r,s){if(function(o){return z9(o)&&o!==ee.ABORTED}(s.code)){const a=r.Ta.shift();Ei(r).B_(),await G5(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await xu(r)}}(t,e),K5(t)&&Q5(t)}async function Nb(t,e){const n=Me(t);n.asyncQueue.verifyOperationInProgress(),ye(hs,"RemoteStore received new credentials");const r=ys(n);n.Ea.add(3),await wl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gu(n)}async function WP(t,e){const n=Me(t);e?(n.Ea.delete(2),await gu(n)):e||(n.Ea.add(2),await wl(n),n.Ra.set("Unknown"))}function Sa(t){return t.ma||(t.ma=function(n,r,s){const a=Me(n);return a.sa(),new SP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:DP.bind(null,t),t_:MP.bind(null,t),r_:LP.bind(null,t),H_:VP.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),$f(t)?Uf(t):t.Ra.set("Unknown")):(await t.ma.stop(),H5(t))})),t.ma}function Ei(t){return t.fa||(t.fa=function(n,r,s){const a=Me(n);return a.sa(),new TP(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:BP.bind(null,t),r_:qP.bind(null,t),ta:UP.bind(null,t),na:$P.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await xu(t)):(await t.fa.stop(),t.Ta.length>0&&(ye(hs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Pr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,l=new qf(e,n,o,s,a);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wf(t,e){if($r("AsyncQueue",`${e}: ${t}`),Ca(t))return new ge(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{static emptySet(e){return new Zs(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Ce.comparator(n.key,r.key):(n,r)=>Ce.comparator(n.key,r.key),this.keyedMap=co(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this.ga=new pt(Ce.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class fa{constructor(e,n,r,s,a,o,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new fa(e,n,Zs.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class GP{constructor(){this.queries=_b(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Me(n),a=s.queries;s.queries=_b(),a.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new ge(ee.ABORTED,"Firestore shutting down"))}}function _b(){return new gs(t=>g5(t),du)}async function Y5(t,e){const n=Me(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.ba()&&e.Da()&&(r=2):(a=new HP,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await n.onListen(s,!0);break;case 1:a.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Wf(o,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,a),a.Sa.push(e),e.va(n.onlineState),a.wa&&e.Fa(a.wa)&&Hf(n)}async function X5(t,e){const n=Me(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.Sa.indexOf(e);o>=0&&(a.Sa.splice(o,1),a.Sa.length===0?s=e.Da()?0:1:!a.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function KP(t,e){const n=Me(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Hf(n)}function QP(t,e,n){const r=Me(t),s=r.queries.get(e);if(s)for(const a of s.Sa)a.onError(n);r.queries.delete(e)}function Hf(t){t.Ca.forEach(e=>{e.next()})}var zm,Cb;(Cb=zm||(zm={})).Ma="default",Cb.Cache="cache";class J5{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e){this.key=e}}class eN{constructor(e){this.key=e}}class YP{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ue(),this.mutatedKeys=Ue(),this.eu=x5(e),this.tu=new Zs(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new zb,s=n?n.tu:this.tu;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),y=uu(this.query,p)?p:null,j=!!m&&this.mutatedKeys.has(m.key),_=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let T=!1;m&&y?m.data.isEqual(y.data)?j!==_&&(r.track({type:3,doc:y}),T=!0):this.su(m,y)||(r.track({type:2,doc:y}),T=!0,(c&&this.eu(y,c)>0||u&&this.eu(y,u)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),T=!0):m&&!y&&(r.track({type:1,doc:m}),T=!0,(c||u)&&(l=!0)),T&&(y?(o=o.add(y),a=_?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:a}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(y,j){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:T})}};return _(y)-_(j)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,o.length!==0||u?{snapshot:new fa(this.query,e.tu,a,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new zb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new eN(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Z5(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ue();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return fa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gf="SyncEngine";class XP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JP{constructor(e){this.key=e,this.hu=!1}}class ZP{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new gs(l=>g5(l),du),this.Iu=new Map,this.Eu=new Set,this.du=new pt(Ce.comparator),this.Au=new Map,this.Ru=new Mf,this.Vu={},this.mu=new Map,this.fu=pa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function eR(t,e,n=!0){const r=aN(t);let s;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.lu()):s=await tN(r,e,n,!0),s}async function tR(t,e){const n=aN(t);await tN(n,e,!0,!1)}async function tN(t,e,n,r){const s=await wP(t.localStore,pr(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let l;return r&&(l=await nR(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&q5(t.remoteStore,s),l}async function nR(t,e,n,r,s){t.pu=(p,m,y)=>async function(_,T,v,w){let N=T.view.ru(v);N.Cs&&(N=await vb(_.localStore,T.query,!1).then(({documents:b})=>T.view.ru(b,N)));const P=w&&w.targetChanges.get(T.targetId),L=w&&w.targetMismatches.get(T.targetId)!=null,R=T.view.applyChanges(N,_.isPrimaryClient,P,L);return Sb(_,T.targetId,R.au),R.snapshot}(t,p,m,y);const a=await vb(t.localStore,e,!0),o=new YP(e,a.Qs),l=o.ru(a.documents),c=bl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(l,t.isPrimaryClient,c);Sb(t,n,u.au);const h=new XP(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function rR(t,e,n){const r=Me(t),s=r.Tu.get(e),a=r.Iu.get(s.targetId);if(a.length>1)return r.Iu.set(s.targetId,a.filter(o=>!du(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await jm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Ff(r.remoteStore,s.targetId),_m(r,s.targetId)}).catch(_a)):(_m(r,s.targetId),await jm(r.localStore,s.targetId,!0))}async function iR(t,e){const n=Me(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ff(n.remoteStore,r.targetId))}async function sR(t,e,n){const r=hR(t);try{const s=await function(o,l){const c=Me(o),u=st.now(),h=l.reduce((y,j)=>y.add(j.key),Ue());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let j=qr(),_=Ue();return c.Ns.getEntries(y,h).next(T=>{j=T,j.forEach((v,w)=>{w.isValidDocument()||(_=_.add(v))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,j)).next(T=>{p=T;const v=[];for(const w of l){const N=b9(w,p.get(w.key).overlayedDocument);N!=null&&v.push(new xs(w.key,N,l5(N.value.mapValue),fr.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,v,l)}).next(T=>{m=T;const v=T.applyToLocalDocumentSet(p,_);return c.documentOverlayCache.saveOverlays(y,T.batchId,v)})}).then(()=>({batchId:m.batchId,changes:v5(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Vu[o.currentUser.toKey()];u||(u=new pt(Be)),u=u.insert(l,c),o.Vu[o.currentUser.toKey()]=u}(r,s.batchId,n),await kl(r,s.changes),await xu(r.remoteStore)}catch(s){const a=Wf(s,"Failed to persist write");n.reject(a)}}async function nN(t,e){const n=Me(t);try{const r=await yP(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Au.get(a);o&&(Ke(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?Ke(o.hu,14607):s.removedDocuments.size>0&&(Ke(o.hu,42227),o.hu=!1))}),await kl(n,r,e)}catch(r){await _a(r)}}function Eb(t,e,n){const r=Me(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((a,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=Me(o);c.onlineState=l;let u=!1;c.queries.forEach((h,p)=>{for(const m of p.Sa)m.va(l)&&(u=!0)}),u&&Hf(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function aR(t,e,n){const r=Me(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),a=s&&s.key;if(a){let o=new pt(Ce.comparator);o=o.insert(a,tn.newNoDocument(a,Re.min()));const l=Ue().add(a),c=new pu(Re.min(),new Map,new pt(Be),o,l);await nN(r,c),r.du=r.du.remove(a),r.Au.delete(e),Kf(r)}else await jm(r.localStore,e,!1).then(()=>_m(r,e,n)).catch(_a)}async function oR(t,e){const n=Me(t),r=e.batch.batchId;try{const s=await xP(n.localStore,e);iN(n,r,null),rN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await kl(n,s)}catch(s){await _a(s)}}async function lR(t,e,n){const r=Me(t);try{const s=await function(o,l){const c=Me(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,l).next(p=>(Ke(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(u,p))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(r.localStore,e);iN(r,e,n),rN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await kl(r,s)}catch(s){await _a(s)}}function rN(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function iN(t,e,n){const r=Me(t);let s=r.Vu[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function _m(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||sN(t,r)})}function sN(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Ff(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Kf(t))}function Sb(t,e,n){for(const r of n)r instanceof Z5?(t.Ru.addReference(r.key,e),cR(t,r)):r instanceof eN?(ye(Gf,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||sN(t,r.key)):Ie(19791,{wu:r})}function cR(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(ye(Gf,"New document in limbo: "+n),t.Eu.add(r),Kf(t))}function Kf(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Ce(tt.fromString(e)),r=t.fu.next();t.Au.set(r,new JP(n)),t.du=t.du.insert(n,r),q5(t.remoteStore,new oi(pr(Tf(n.path)),r,"TargetPurposeLimboResolution",ou.ce))}}async function kl(t,e,n){const r=Me(t),s=[],a=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(u=>{var h;if((u||n)&&r.isPrimaryClient){const p=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){s.push(u);const p=Vf.As(c.targetId,u);a.push(p)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,u){const h=Me(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>te.forEach(u,m=>te.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>te.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Ca(p))throw p;ye(Of,"Failed to update sequence numbers: "+p)}for(const p of u){const m=p.targetId;if(!p.fromCache){const y=h.Ms.get(m),j=y.snapshotVersion,_=y.withLastLimboFreeSnapshotVersion(j);h.Ms=h.Ms.insert(m,_)}}}(r.localStore,a))}async function dR(t,e){const n=Me(t);if(!n.currentUser.isEqual(e)){ye(Gf,"User change. New user:",e.toKey());const r=await F5(n.localStore,e);n.currentUser=e,function(a,o){a.mu.forEach(l=>{l.forEach(c=>{c.reject(new ge(ee.CANCELLED,o))})}),a.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await kl(n,r.Ls)}}function uR(t,e){const n=Me(t),r=n.Au.get(e);if(r&&r.hu)return Ue().add(r.key);{let s=Ue();const a=n.Iu.get(e);if(!a)return s;for(const o of a){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function aN(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=nN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=aR.bind(null,e),e.Pu.H_=KP.bind(null,e.eventManager),e.Pu.yu=QP.bind(null,e.eventManager),e}function hR(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lR.bind(null,e),e}class Cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return gP(this.persistence,new mP,e.initialUser,this.serializer)}Cu(e){return new O5(Lf.mi,this.serializer)}Du(e){return new jP}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cd.provider={build:()=>new Cd};class mR extends Cd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ke(this.persistence.referenceDelegate instanceof zd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new J9(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new O5(r=>zd.mi(r,n),this.serializer)}}class Cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Eb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dR.bind(null,this.syncEngine),await WP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new GP}()}createDatastore(e){const n=fu(e.databaseInfo.databaseId),r=function(a){return new EP(a)}(e.databaseInfo);return function(a,o,l,c){return new AP(a,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,l){return new RP(r,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Eb(this.syncEngine,n,0),function(){return kb.v()?new kb:new NP}())}createSyncEngine(e,n){return function(s,a,o,l,c,u,h){const p=new ZP(s,a,o,l,c,u);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=Me(s);ye(hs,"RemoteStore shutting down."),a.Ea.add(5),await wl(a),a.Aa.shutdown(),a.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Cm.provider={build:()=>new Cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):$r("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class pR{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Zt.UNAUTHENTICATED,this.clientId=Nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{ye(Si,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ye(Si,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ph(t,e){t.asyncQueue.verifyOperationInProgress(),ye(Si,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await F5(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Tb(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fR(t);ye(Si,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Nb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Nb(e.remoteStore,s)),t._onlineComponents=e}async function fR(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ye(Si,"Using user provided OfflineComponentProvider");try{await Ph(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;da("Error using user provided cache. Falling back to memory cache: "+n),await Ph(t,new Cd)}}else ye(Si,"Using default OfflineComponentProvider"),await Ph(t,new mR(void 0));return t._offlineComponents}async function lN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ye(Si,"Using user provided OnlineComponentProvider"),await Tb(t,t._uninitializedComponentsProvider._online)):(ye(Si,"Using default OnlineComponentProvider"),await Tb(t,new Cm))),t._onlineComponents}function gR(t){return lN(t).then(e=>e.syncEngine)}async function cN(t){const e=await lN(t),n=e.eventManager;return n.onListen=eR.bind(null,e.syncEngine),n.onUnlisten=rR.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=iR.bind(null,e.syncEngine),n}function xR(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new oN({next:m=>{h.Nu(),o.enqueueAndForget(()=>X5(a,p));const y=m.docs.has(l);!y&&m.fromCache?u.reject(new ge(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?u.reject(new ge(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new J5(Tf(l.path),h,{includeMetadataChanges:!0,qa:!0});return Y5(a,p)}(await cN(t),t.asyncQueue,e,n,r)),r.promise}function yR(t,e,n={}){const r=new Pr;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,c,u){const h=new oN({next:m=>{h.Nu(),o.enqueueAndForget(()=>X5(a,p)),m.fromCache&&c.source==="server"?u.reject(new ge(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(m)},error:m=>u.reject(m)}),p=new J5(l,h,{includeMetadataChanges:!0,qa:!0});return Y5(a,p)}(await cN(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="firestore.googleapis.com",Ab=!0;class Pb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=uN,this.ssl=Ab}else this.host=e.host,this.ssl=e.ssl??Ab;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Y9)throw new ge(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R6("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=dN(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new N6;switch(r.type){case"firstParty":return new E6(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ib.get(n);r&&(ye("ComponentProvider","Removing Datastore"),Ib.delete(n),r.terminate())}(this),Promise.resolve()}}function vR(t,e,n,r={}){var u;t=ji(t,yu);const s=nu(e),a=t._getSettings(),o={...a,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(cj(`https://${l}`),uj("Firestore",!0)),a.host!==uN&&a.host!==l&&da("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...a,host:l,ssl:s,emulatorOptions:r};if(!el(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Zt.MOCK_USER;else{h=dj(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ge(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Zt(m)}t._authCredentials=new z6(new Yj(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class _t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(yl(n,_t._jsonSchema))return new _t(e,r||null,new Ce(tt.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:zt("string",_t._jsonSchemaVersion),referencePath:zt("string")};class vi extends vs{constructor(e,n,r){super(e,n,Tf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new Ce(e))}withConverter(e){return new vi(this.firestore,e,this._path)}}function Rh(t,e,...n){if(t=vr(t),Xj("collection","path",e),t instanceof yu){const r=tt.fromString(e,...n);return Hv(r),new vi(t,null,r)}{if(!(t instanceof _t||t instanceof vi))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return Hv(r),new vi(t.firestore,null,r)}}function He(t,e,...n){if(t=vr(t),arguments.length===1&&(e=Nf.newId()),Xj("doc","path",e),t instanceof yu){const r=tt.fromString(e,...n);return Wv(r),new _t(t,null,new Ce(r))}{if(!(t instanceof _t||t instanceof vi))throw new ge(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(tt.fromString(e,...n));return Wv(r),new _t(t.firestore,t instanceof vi?t.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="AsyncQueue";class Db{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new U5(this,"async_queue_retry"),this._c=()=>{const r=Ah();r&&ye(Rb,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Ah();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Ah();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Pr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ca(e))throw e;ye(Rb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,$r("INTERNAL UNHANDLED ERROR: ",Mb(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=qf.createAndSchedule(this,e,n,r,a=>this.hc(a));return this.tc.push(s),s}uc(){this.nc&&Ie(47125,{Pc:Mb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Mb(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class jl extends yu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Db,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Db(e),this._firestoreClient=void 0,await e}}}function bR(t,e){const n=typeof t=="object"?t:gf(),r=typeof t=="string"?t:vd,s=Na(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=oj("firestore");a&&vR(s,...a)}return s}function Qf(t){if(t._terminated)throw new ge(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wR(t),t._firestoreClient}function wR(t){var r,s,a;const e=t._freezeSettings(),n=function(l,c,u,h){return new W6(l,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,dN(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new pR(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ln(Wt.fromBase64String(e))}catch(n){throw new ge(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ln(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ln._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yl(e,Ln._jsonSchema))return Ln.fromBase64String(e.bytes)}}Ln._jsonSchemaVersion="firestore/bytes/1.0",Ln._jsonSchema={type:zt("string",Ln._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ge(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ge(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ge(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(yl(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:zt("string",xr._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:yr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yl(e,yr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new yr(e.vectorValues);throw new ge(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yr._jsonSchemaVersion="firestore/vectorValue/1.0",yr._jsonSchema={type:zt("string",yr._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=/^__.*__$/;class jR{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new vl(e,this.data,n,this.fieldTransforms)}}function mN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:t})}}class Xf{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Xf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ed(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(mN(this.Ac)&&kR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class NR{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||fu(e)}Cc(e,n,r,s=!1){return new Xf({Ac:e,methodName:n,Dc:r,path:Bt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pN(t){const e=t._freezeSettings(),n=fu(t._databaseId);return new NR(t._databaseId,!!e.ignoreUndefinedProperties,n)}function zR(t,e,n,r,s,a={}){const o=t.Cc(a.merge||a.mergeFields?2:0,e,n,s);xN("Data must be an object, but it was:",o,r);const l=fN(r,o);let c,u;if(a.merge)c=new Jn(o.fieldMask),u=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const p of a.mergeFields){const m=CR(e,p,n);if(!o.contains(m))throw new ge(ee.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);SR(h,m)||h.push(m)}c=new Jn(h),u=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,u=o.fieldTransforms;return new jR(new Mn(l),c,u)}function _R(t,e,n,r=!1){return Jf(n,t.Cc(r?4:3,e))}function Jf(t,e){if(gN(t=vr(t)))return xN("Unsupported field value:",e,t),fN(t,e);if(t instanceof hN)return function(r,s){if(!mN(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const l of r){let c=Jf(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),a.push(c),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=vr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return p9(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=st.fromDate(r);return{timestampValue:Nd(s.serializer,a)}}if(r instanceof st){const a=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Nd(s.serializer,a)}}if(r instanceof xr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ln)return{bytesValue:I5(s.serializer,r._byteString)};if(r instanceof _t){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Df(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof yr)return function(o,l){return{mapValue:{fields:{[a5]:{stringValue:o5},[bd]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return If(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${au(r)}`)}(t,e)}function fN(t,e){const n={};return e5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):fs(t,(r,s)=>{const a=Jf(s,e.mc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function gN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof xr||t instanceof Ln||t instanceof _t||t instanceof hN||t instanceof yr)}function xN(t,e,n){if(!gN(n)||!Jj(n)){const r=au(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function CR(t,e,n){if((e=vr(e))instanceof Yf)return e._internalPath;if(typeof e=="string")return yN(t,e);throw Ed("Field path arguments must be of type string or ",t,!1,void 0,n)}const ER=new RegExp("[~\\*/\\[\\]]");function yN(t,e,n){if(e.search(ER)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Yf(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ed(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(a||o)&&(c+=" (found",a&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new ge(ee.INVALID_ARGUMENT,l+t+c)}function SR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Zf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TR extends vN{data(){return super.data()}}function Zf(t,e){return typeof e=="string"?yN(t,e):e instanceof Yf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ge(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eg{}class bN extends eg{}function Lb(t,e,...n){let r=[];e instanceof eg&&r.push(e),r=r.concat(n),function(a){const o=a.filter(c=>c instanceof ng).length,l=a.filter(c=>c instanceof tg).length;if(o>1||o>0&&l>0)throw new ge(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class tg extends bN{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new tg(e,n,r)}_apply(e){const n=this._parse(e);return wN(e._query,n),new vs(e.firestore,e.converter,xm(e._query,n))}_parse(e){const n=pN(e.firestore);return function(a,o,l,c,u,h,p){let m;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Fb(p,h);const j=[];for(const _ of p)j.push(Ob(c,a,_));m={arrayValue:{values:j}}}else m=Ob(c,a,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Fb(p,h),m=_R(l,o,p,h==="in"||h==="not-in");return Nt.create(u,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}class ng extends eg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ng(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:rr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const l=a.getFlattenedFilters();for(const c of l)wN(o,c),o=xm(o,c)}(e._query,n),new vs(e.firestore,e.converter,xm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rg extends bN{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new rg(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new ge(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new al(a,o)}(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new Ea(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Vb(t,e="asc"){const n=e,r=Zf("orderBy",t);return rg._create(r,n)}function Ob(t,e,n){if(typeof(n=vr(n))=="string"){if(n==="")throw new ge(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f5(e)&&n.indexOf("/")!==-1)throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(tt.fromString(n));if(!Ce.isDocumentKey(r))throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eb(t,new Ce(r))}if(n instanceof _t)return eb(t,n._key);throw new ge(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${au(n)}.`)}function Fb(t,e){if(!Array.isArray(t)||t.length===0)throw new ge(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wN(t,e){const n=function(s,a){for(const o of s)for(const l of o.getFlattenedFilters())if(a.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AR{convertValue(e,n="none"){switch(Ci(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return fs(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var r,s,a;const n=(a=(s=(r=e.fields)==null?void 0:r[bd].arrayValue)==null?void 0:s.values)==null?void 0:a.map(o=>vt(o.doubleValue));return new yr(n)}convertGeoPoint(e){return new xr(vt(e.latitude),vt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(rl(e));default:return null}}convertTimestamp(e){const n=zi(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=tt.fromString(e);Ke(L5(r),9688,{name:e});const s=new il(r.get(1),r.get(3)),a=new Ce(r.popFirst(5));return s.isEqual(n)||$r(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ns extends vN{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ac(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Zf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ns._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ns._jsonSchemaVersion="firestore/documentSnapshot/1.0",ns._jsonSchema={type:zt("string",ns._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Ac extends ns{data(e={}){return super.data(e)}}class ea{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ho(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ac(this._firestore,this._userDataWriter,r.key,r,new ho(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ge(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const c=new Ac(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,h=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:RR(l.type),doc:c,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ea._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),s.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){t=ji(t,_t);const e=ji(t.firestore,jl);return xR(Qf(e),t._key).then(n=>DR(e,t,n))}ea._jsonSchemaVersion="firestore/querySnapshot/1.0",ea._jsonSchema={type:zt("string",ea._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class kN extends AR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ln(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function Dh(t){t=ji(t,vs);const e=ji(t.firestore,jl),n=Qf(e),r=new kN(e);return IR(t._query),yR(n,t._query).then(s=>new ea(e,r,t,s))}function Yt(t,e,n){t=ji(t,_t);const r=ji(t.firestore,jl),s=PR(t.converter,e,n);return jN(r,[zR(pN(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fr.none())])}function Bb(t){return jN(ji(t.firestore,jl),[new Af(t._key,fr.none())])}function jN(t,e){return function(r,s){const a=new Pr;return r.asyncQueue.enqueueAndForget(async()=>sR(await gR(r),s,a)),a.promise}(Qf(t),e)}function DR(t,e,n){const r=n.docs.get(e._key),s=new kN(t);return new ns(t,s,e._key,r,new ho(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){za=s})(yj),Ur(new br("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),l=new jl(new _6(r.getProvider("auth-internal")),new S6(o,r.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ge(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(u.options.projectId,h)}(o,s),o);return a={useFetchStreams:n,...a},l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Un(Bv,Uv,e),Un(Bv,Uv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN="firebasestorage.googleapis.com",MR="storageBucket",LR=2*60*1e3,VR=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends Hr{constructor(e,n,r=0){super(Mh(e),`Firebase Storage: ${n} (${Mh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,jr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var kr;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(kr||(kr={}));function Mh(t){return"storage/"+t}function OR(){const t="An unknown error occurred, please check the error payload for server response.";return new jr(kr.UNKNOWN,t)}function FR(){return new jr(kr.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function BR(){return new jr(kr.CANCELED,"User canceled the upload/download.")}function UR(t){return new jr(kr.INVALID_URL,"Invalid URL '"+t+"'.")}function $R(t){return new jr(kr.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Ub(t){return new jr(kr.INVALID_ARGUMENT,t)}function zN(){return new jr(kr.APP_DELETED,"The Firebase app was deleted.")}function qR(t){return new jr(kr.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Zn.makeFromUrl(e,n)}catch{return new Zn(e,"")}if(r.path==="")return r;throw $R(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function u(P){P.path_=decodeURIComponent(P.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${h}/b/${s}/o${m}`,"i"),j={bucket:1,path:3},_=n===NN?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",v=new RegExp(`^https?://${_}/${s}/${T}`,"i"),N=[{regex:l,indices:c,postModify:a},{regex:y,indices:j,postModify:u},{regex:v,indices:{bucket:1,path:2},postModify:u}];for(let P=0;P<N.length;P++){const L=N[P],R=L.regex.exec(e);if(R){const b=R[L.indices.bucket];let g=R[L.indices.path];g||(g=""),r=new Zn(b,g),L.postModify(r);break}}if(r==null)throw UR(e);return r}}class WR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t,e,n){let r=1,s=null,a=null,o=!1,l=0;function c(){return l===2}let u=!1;function h(...T){u||(u=!0,e.apply(null,T))}function p(T){s=setTimeout(()=>{s=null,t(y,c())},T)}function m(){a&&clearTimeout(a)}function y(T,...v){if(u){m();return}if(T){m(),h.call(null,T,...v);return}if(c()||o){m(),h.call(null,T,...v);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,p(N)}let j=!1;function _(T){j||(j=!0,m(),!u&&(s!==null?(T||(l=2),clearTimeout(s),p(0)):T||(l=1)))}return p(0),a=setTimeout(()=>{o=!0,_(!0)},n),_}function GR(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KR(t){return t!==void 0}function $b(t,e,n,r){if(r<e)throw Ub(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ub(`Invalid value for '${t}'. Expected ${n} or less.`)}function QR(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Sd;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Sd||(Sd={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,n,r,s,a,o,l,c,u,h,p,m=!0,y=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((j,_)=>{this.resolve_=j,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new oc(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=l=>{const c=l.loaded,u=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const l=a.getErrorCode()===Sd.NO_ERROR,c=a.getStatus();if(!l||YR(c,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===Sd.ABORT;r(!1,new oc(!1,null,h));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new oc(u,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());KR(c)?a(c):a()}catch(c){o(c)}else if(l!==null){const c=OR();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?zN():BR();o(c)}else{const c=FR();o(c)}};this.canceled_?n(!1,new oc(!1,null,!0)):this.backoffId_=HR(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GR(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function JR(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function ZR(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function eD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function tD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function nD(t,e,n,r,s,a,o=!0,l=!1){const c=QR(t.urlParams),u=t.url+c,h=Object.assign({},t.headers);return eD(h,e),JR(h,n),ZR(h,a),tD(h,r),new XR(u,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function iD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,n){this._service=e,n instanceof Zn?this._location=n:this._location=Zn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Td(e,n)}get root(){const e=new Zn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return iD(this._location.path)}get storage(){return this._service}get parent(){const e=rD(this._location.path);if(e===null)return null;const n=new Zn(this._location.bucket,e);return new Td(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw qR(e)}}function qb(t,e){const n=e==null?void 0:e[MR];return n==null?null:Zn.makeFromBucketSpec(n,t)}function sD(t,e,n,r={}){t.host=`${e}:${n}`;const s=nu(e);s&&(cj(`https://${t.host}/b`),uj("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:dj(a,t.app.options.projectId))}class aD{constructor(e,n,r,s,a,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._isUsingEmulator=o,this._bucket=null,this._host=NN,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=LR,this._maxUploadRetryTime=VR,this._requests=new Set,s!=null?this._bucket=Zn.makeFromBucketSpec(s,this._host):this._bucket=qb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Zn.makeFromBucketSpec(this._url,e):this._bucket=qb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$b("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$b("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(xj(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Td(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new WR(zN());{const o=nD(e,this._appId,r,s,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Wb="@firebase/storage",Hb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N="storage";function oD(t=gf(),e){t=vr(t);const r=Na(t,_N).getImmediate({identifier:e}),s=oj("storage");return s&&lD(r,...s),r}function lD(t,e,n,r={}){sD(t,e,n,r)}function cD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new aD(n,r,s,e,yj)}function dD(){Ur(new br(_N,cD,"PUBLIC").setMultipleInstances(!0)),Un(Wb,Hb,""),Un(Wb,Hb,"esm2020")}dD();const uD={apiKey:"AIzaSyC3vn3PYoKpN5BUyV_9y_gPi3U61XDdfAw",authDomain:"padoca-96688.firebaseapp.com",projectId:"padoca-96688",storageBucket:"padoca-96688.firebasestorage.app",messagingSenderId:"689278956648",appId:"1:689278956648:web:f20a74b51736c2d956b7dd",measurementId:"G-B2KD6YHMJM"},ig=vj(uD);v6(ig);const Fe=bR(ig);oD(ig);const Ve={RECIPES:"recipes",INVENTORY:"inventory",COSTS:"costs",SETTINGS:"settings",PIZZAS:"pizzas",RECIPES_V2:"recipes_v2",RECIPES_V3:"recipes_v3",KANBAN:"kanban"},Xt=t=>JSON.parse(JSON.stringify(t)),$e={async saveRecipe(t,e){try{return await Yt(He(Fe,Ve.RECIPES,t),Xt({...e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error saving recipe:",n),!1}},async getAllRecipes(){try{const t=Lb(Rh(Fe,Ve.RECIPES),Vb("updatedAt","desc")),e=await Dh(t),n={};return e.forEach(r=>{n[r.id]=r.data()}),n}catch(t){return console.error("Error fetching recipes:",t),{}}},async deleteRecipe(t){try{return await Bb(He(Fe,Ve.RECIPES,t)),!0}catch(e){return console.error("Error deleting recipe:",e),!1}},async syncInventory(t,e){try{return await Yt(He(Fe,Ve.SETTINGS,"inventory_v2"),Xt({items:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing inventory:",n),!1}},async getInventory(){try{const t=await sn(He(Fe,Ve.SETTINGS,"inventory_v2"));if(t.exists())return t.data();const e=await sn(He(Fe,Ve.SETTINGS,"inventory"));return e.exists()?{items:e.data().items,categories:null}:null}catch(t){return console.error("Error getting inventory:",t),null}},async syncCosts(t,e){try{return await Yt(He(Fe,Ve.SETTINGS,"costs_data"),Xt({costs:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing costs:",n),!1}},async getCosts(){try{const t=await sn(He(Fe,Ve.SETTINGS,"costs_data"));return t.exists()?t.data():null}catch(t){return console.error("Error getting costs:",t),null}},async syncPizzas(t){try{return await Yt(He(Fe,Ve.SETTINGS,"ficha_tecnica"),Xt({pizzas:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing pizzas:",e),!1}},async getPizzas(){try{const t=await sn(He(Fe,Ve.SETTINGS,"ficha_tecnica"));return t.exists()?t.data().pizzas:null}catch(t){return console.error("Error getting pizzas:",t),null}},async syncGlobalSettings(t){try{return await Yt(He(Fe,Ve.SETTINGS,"global_config"),Xt({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing global settings:",e),!1}},async getGlobalSettings(){try{const t=await sn(He(Fe,Ve.SETTINGS,"global_config"));return t.exists()?t.data():null}catch(t){return console.error("Error getting global settings:",t),null}},async syncRecipesV2(t){try{return await Yt(He(Fe,Ve.SETTINGS,Ve.RECIPES_V2),Xt({recipes:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipes v2:",e),!1}},async getRecipesV2(){try{const t=await sn(He(Fe,Ve.SETTINGS,Ve.RECIPES_V2));return t.exists()?t.data().recipes:null}catch(t){return console.error("Error getting recipes v2:",t),null}},async syncRecipeV3(t,e,n=!1){try{return await Yt(He(Fe,Ve.RECIPES_V3,String(t)),Xt({...e,updatedAt:new Date().toISOString()}),{merge:n}),!0}catch(r){return console.error("Error syncing recipe v3:",r),!1}},async getRecipesV3(){try{let t;try{const n=Lb(Rh(Fe,Ve.RECIPES_V3),Vb("updatedAt","desc"));t=await Dh(n)}catch(n){console.warn("Index not ready, fetching without order:",n.message),t=await Dh(Rh(Fe,Ve.RECIPES_V3))}const e=[];return t.forEach(n=>{e.push({...n.data(),id:n.id})}),e}catch(t){return console.error("Error getting recipes v3:",t),[]}},async deleteRecipeV3(t){try{return await Bb(He(Fe,Ve.RECIPES_V3,String(t))),!0}catch(e){return console.error("Error deleting recipe v3:",e),!1}},async syncKanban(t){try{return await Yt(He(Fe,Ve.SETTINGS,Ve.KANBAN),Xt({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing kanban:",e),!1}},async getKanban(){try{const t=await sn(He(Fe,Ve.SETTINGS,Ve.KANBAN));return t.exists()?t.data():null}catch(t){return console.error("Error getting kanban:",t),null}},async syncRecipeCategories(t){try{return await Yt(He(Fe,Ve.SETTINGS,"recipe_categories"),Xt({categories:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing recipe categories:",e),!1}},async getRecipeCategories(){try{const t=await sn(He(Fe,Ve.SETTINGS,"recipe_categories"));return t.exists()?t.data().categories:null}catch(t){return console.error("Error getting recipe categories:",t),null}},async syncSuppliers(t){try{return await Yt(He(Fe,Ve.SETTINGS,"suppliers"),Xt({suppliers:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing suppliers:",e),!1}},async getSuppliers(){try{const t=await sn(He(Fe,Ve.SETTINGS,"suppliers"));return t.exists()?t.data():null}catch(t){return console.error("Error getting suppliers:",t),null}},async syncProducts(t,e){try{return await Yt(He(Fe,Ve.SETTINGS,"products_v1"),Xt({products:t,categories:e,updatedAt:new Date().toISOString()})),!0}catch(n){return console.error("Error syncing products:",n),!1}},async getProducts(){try{const t=await sn(He(Fe,Ve.SETTINGS,"products_v1"));return t.exists()?t.data():null}catch(t){return console.error("Error getting products:",t),null}},async syncProductMovements(t){try{return await Yt(He(Fe,Ve.SETTINGS,"product_movements"),Xt({movements:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing product movements:",e),!1}},async getProductMovements(){try{const t=await sn(He(Fe,Ve.SETTINGS,"product_movements"));return t.exists()?t.data().movements:[]}catch(t){return console.error("Error getting product movements:",t),[]}},async addProductMovement(t){try{const n=[...await this.getProductMovements(),{...t,id:Date.now(),createdAt:new Date().toISOString()}];return await this.syncProductMovements(n),!0}catch(e){return console.error("Error adding product movement:",e),!1}},async syncProductAuditData(t){try{return await Yt(He(Fe,Ve.SETTINGS,"product_audit"),Xt({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing product audit data:",e),!1}},async getProductAuditData(){try{const t=await sn(He(Fe,Ve.SETTINGS,"product_audit"));return t.exists()?t.data():null}catch(t){return console.error("Error getting product audit data:",t),null}},async syncNotificationSettings(t){try{return await Yt(He(Fe,Ve.SETTINGS,"notifications"),Xt({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing notification settings:",e),!1}},async getNotificationSettings(){try{const t=await sn(He(Fe,Ve.SETTINGS,"notifications"));return t.exists()?t.data():{enabled:!0,lowStockAlerts:!0,priceAlerts:!0,restockReminders:!0,respectBusinessHours:!0}}catch(t){return console.error("Error getting notification settings:",t),null}},async syncForecastData(t){try{return await Yt(He(Fe,Ve.SETTINGS,"forecast"),Xt({...t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing forecast data:",e),!1}},async getForecastData(){try{const t=await sn(He(Fe,Ve.SETTINGS,"forecast"));return t.exists()?t.data():null}catch(t){return console.error("Error getting forecast data:",t),null}},async syncAnomalyHistory(t){try{return await Yt(He(Fe,Ve.SETTINGS,"anomaly_history"),Xt({anomalies:t,updatedAt:new Date().toISOString()})),!0}catch(e){return console.error("Error syncing anomaly history:",e),!1}},async getAnomalyHistory(){try{const t=await sn(He(Fe,Ve.SETTINGS,"anomaly_history"));return t.exists()?t.data():{anomalies:[]}}catch(t){return console.error("Error getting anomaly history:",t),{anomalies:[]}}}};function hD(){const[t,e]=k.useState([]),[n,r]=k.useState(["Maquinrio","Insumos","Operacional","Marketing","Impostos","Outros"]),[s,a]=k.useState(!1),[o,l]=k.useState(null),[c,u]=k.useState(null),[h,p]=k.useState(!1),[m,y]=k.useState(""),[j,_]=k.useState("Global Investment Matrix"),[T,v]=k.useState(!1),[w,N]=k.useState(.13),[P,L]=k.useState(!1),[R,b]=k.useState(null),g=k.useRef(null),z=k.useCallback((S,O="success")=>{g.current&&clearTimeout(g.current),b({message:S,type:O}),g.current=setTimeout(()=>b(null),3500)},[]),[C,D]=k.useState({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]}),M=k.useRef(null);k.useEffect(()=>{try{const S=localStorage.getItem("padoca_costs_v1"),O=localStorage.getItem("padoca_costs_categories"),H=localStorage.getItem("padoca_costs_title"),Z=localStorage.getItem("padoca_global_tax");let me=S?JSON.parse(S):[],pe=O?JSON.parse(O):null;H&&_(H),Z&&N(Number(Z)),pe&&(pe=pe.map(we=>we==="Pessoal"?"Maquinrio":we),r(pe)),me&&(me=me.map(we=>({...we,category:we.category==="Pessoal"?"Maquinrio":we.category})),e(me))}catch(S){console.error("Load failed",S)}},[]);const[I,xe]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const O=await $e.getCosts();O&&(O.costs&&e(O.costs),O.categories&&r(O.categories));const H=await $e.getGlobalSettings();H&&H.taxRate!==void 0&&(N(H.taxRate),localStorage.setItem("padoca_global_tax",H.taxRate.toString()))}catch{console.warn("Costs cloud load failed")}finally{xe(!0)}})()},[]),k.useEffect(()=>{localStorage.setItem("padoca_costs_v1",JSON.stringify(t)),I&&$e.syncCosts(t,n)},[t,n,I]),k.useEffect(()=>{localStorage.setItem("padoca_costs_categories",JSON.stringify(n))},[n]),k.useEffect(()=>{localStorage.setItem("padoca_costs_title",j)},[j]),k.useEffect(()=>{localStorage.setItem("padoca_global_tax",w.toString()),I&&$e.syncGlobalSettings({taxRate:w}),window.dispatchEvent(new CustomEvent("global-settings-updated",{detail:{taxRate:w}}))},[w,I]);const ve=S=>(Number(S)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),je=k.useMemo(()=>{const S=t.reduce((H,Z)=>{const me=Number(Z.quantity)||1,pe=(Number(Z.amount)||0)*me;return H.total+=pe,Z.type==="Fixo"?H.fixed+=pe:H.variable+=pe,H},{total:0,fixed:0,variable:0}),O=S.total*w;return{...S,hst:O,grandTotal:S.total+O}},[t]),de=k.useMemo(()=>n.reduce((S,O)=>{const H=t.filter(Z=>Z.category===O);return H.length>0&&(S[O]=H),S},{}),[t,n]),J=S=>{if(S.preventDefault(),!C.description||!C.amount)return;const O=n.includes(C.category)?C.category:n[0],H={...C,category:O,amount:Number(C.amount),quantity:Number(C.quantity)||1};e(o?Z=>Z.map(me=>me.id===o?{...H,id:o}:me):Z=>[...Z,{...H,id:Date.now().toString()}]),le()},oe=S=>{u({title:"Excluir Despesa",message:"Esta despesa ser removida permanentemente do sistema.",type:"danger",onConfirm:()=>{e(O=>O.filter(H=>H.id!==S)),z("Despesa removida com sucesso."),u(null)},onCancel:()=>u(null)})},le=()=>{a(!1),l(null),D({description:"",amount:"",quantity:1,category:"Maquinrio",type:"Varivel",link:"",date:new Date().toISOString().split("T")[0]})},ke=S=>{D({description:S.description||"",amount:S.amount||"",quantity:S.quantity||1,category:S.category||n[0],type:S.type||"Varivel",link:S.link||"",date:S.date||new Date().toISOString().split("T")[0]}),l(S.id),a(!0)},U=()=>{m&&(n.includes(m)||(r(S=>[...S,m]),z("Categoria adicionada.")),y(""))},se=S=>{u({title:"Remover Categoria",message:`A categoria "${S}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{r(O=>O.filter(H=>H!==S)),z("Categoria removida."),u(null)},onCancel:()=>u(null)})},A=()=>{try{const S=["ID","Data","Descrio","Qtd","Vlr Unit","Total","Categoria","Tipo","Link"],O=t.map(we=>{const Se=Number(we.quantity)||1,ze=Number(we.amount)||0,De=Se*ze;return[we.id,we.date||"-",`"${we.description.replace(/"/g,'""')}"`,Se,ze.toFixed(2).replace(".",","),De.toFixed(2).replace(".",","),`"${we.category}"`,we.type,`"${we.link||""}"`]}),H="\uFEFF"+[S.join(";"),...O.map(we=>we.join(";"))].join(`
`),Z=new Blob([H],{type:"text/csv;charset=utf-8;"}),me=URL.createObjectURL(Z),pe=document.createElement("a");pe.href=me,pe.download=`padoca_financeiro_${new Date().toISOString().split("T")[0]}.csv`,pe.click(),z("Relatrio Excel exportado!")}catch{z("Erro ao exportar CSV")}},q=()=>{try{const S=JSON.stringify({version:"1",costs:t,categories:n},null,2),O=new Blob([S],{type:"application/json"}),H=URL.createObjectURL(O),Z=document.createElement("a");Z.href=H,Z.download=`padoca_backup_${new Date().toISOString().split("T")[0]}.json`,Z.click(),z("Backup realizado com sucesso!")}catch{z("Erro ao realizar backup")}},$=S=>{var Z;const O=(Z=S.target.files)==null?void 0:Z[0];if(!O)return;const H=new FileReader;H.onload=me=>{try{const pe=JSON.parse(String(me.target.result||"{}"));if(pe.costs&&Array.isArray(pe.costs))e(pe.costs),pe.categories&&r(pe.categories),z("Dados financeiros restaurados!");else throw new Error("Formato invlido")}catch{z("Arquivo de backup invlido")}},H.readAsText(O),S.target.value=""},re=()=>{u({title:"Apagar Todos os Dados",message:"Ateno: Isso apagar TODOS os dados financeiros permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.removeItem("padoca_costs_v1"),z("Banco de dados limpo."),u(null)},onCancel:()=>u(null)})};return i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Financeiro"}),i.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[i.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Controle de investimentos e fluxo de capital"})]}),i.jsxs("button",{onClick:()=>a(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Despesa"]})]}),i.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[i.jsx("div",{className:"md:col-span-2 relative group",children:i.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-12",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1 group/title",children:[T?i.jsx("input",{className:"bg-zinc-100 dark:bg-zinc-900/50 border-none text-base md:text-[10px] font-bold text-zinc-900 dark:text-white uppercase tracking-widest outline-none px-3 py-2 rounded-xl",value:j,onChange:S=>_(S.target.value),onBlur:()=>v(!1),onKeyDown:S=>S.key==="Enter"&&v(!1),autoFocus:!0}):i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",onClick:()=>v(!0),children:j}),i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-zinc-300 opacity-0 group-hover/title:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),i.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Protocol Status: High Integrity"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Total Capital Assets"}),i.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:ve(je.grandTotal)})]})]}),i.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Liquidity"}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:ve(je.total)})]}),i.jsxs("div",{className:"flex flex-col gap-1.5 group/tax",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[P?i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("input",{className:"w-16 bg-zinc-100 dark:bg-zinc-900/50 border-none text-[10px] font-bold text-indigo-500 uppercase tracking-widest outline-none px-2 py-1 rounded-lg",type:"number",step:"0.01",value:w*100,onChange:S=>N(Number(S.target.value)/100),onBlur:()=>L(!1),onKeyDown:S=>S.key==="Enter"&&L(!1),autoFocus:!0}),i.jsx("span",{className:"text-[10px] font-bold text-indigo-500",children:"%"})]}):i.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest cursor-text hover:text-indigo-700 transition-colors",onClick:()=>L(!0),children:["Tax Impact (",(w*100).toFixed(0),"%)"]}),i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2 w-2 text-indigo-300 opacity-0 group-hover/tax:opacity-100 transition-opacity",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})]}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ve(je.hst)})]})]})]})}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.4)]"}),i.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Custo Fixo"})]}),i.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ve(je.fixed)})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[i.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),i.jsxs("span",{className:"text-[8px] font-bold text-indigo-500",children:[(je.fixed/je.total*100||0).toFixed(0),"%"]})]}),i.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-indigo-500/80 transition-all duration-1000",style:{width:`${je.fixed/je.total*100||0}%`}})})]})]}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-orange-500 shadow-[0_0_8px_rgba(249,115,22,0.4)]"}),i.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Varivel"})]}),i.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:ve(je.variable)})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[i.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Variance"}),i.jsxs("span",{className:"text-[8px] font-bold text-orange-500",children:[(je.variable/je.total*100||0).toFixed(0),"%"]})]}),i.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-orange-500/80 transition-all duration-1000",style:{width:`${je.variable/je.total*100||0}%`}})})]})]})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[i.jsx("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Protocol Ledger"}),i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Capital Asset History"})]})}),i.jsxs("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-8 py-4 border-b border-zinc-100 dark:border-white/5 px-4 mb-4",children:[i.jsx("div",{className:"col-span-4 text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Identity & Description"}),i.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-center",children:"Unit Profile"}),i.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Net Value"}),i.jsx("div",{className:"col-span-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest text-right",children:"Valor Bruto"}),i.jsx("div",{className:"col-span-2"})]}),i.jsx("div",{className:"space-y-6",children:t.length===0?i.jsxs("div",{className:"py-32 text-center flex flex-col items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-zinc-50 dark:bg-white/5 flex items-center justify-center border border-zinc-100 dark:border-white/10 opacity-40",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 1.1.9 2 2 2h12a2 2 0 002-2V7M4 7c0-1.1.9-2 2-2h12a2 2 0 012 2M4 7h16"})})}),i.jsx("p",{className:"text-[10px] font-bold text-zinc-300 uppercase tracking-widest",children:"System IDLE  Awaiting Input"})]}):Object.entries(de).map(([S,O])=>i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-4 py-2 px-4 mb-2",children:[i.jsx("span",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:S}),i.jsx("div",{className:"h-[1px] flex-1 bg-gradient-to-r from-indigo-500/10 to-transparent"})]}),i.jsx("div",{className:"space-y-3 md:space-y-1",children:O.map(H=>i.jsxs("div",{className:"flex flex-col md:grid md:grid-cols-12 gap-4 md:gap-8 py-5 md:items-center group hover:bg-zinc-50 dark:hover:bg-white/[0.02] px-4 rounded-2xl md:rounded-[1.5rem] transition-all cursor-default border border-zinc-100 dark:border-white/5 md:border-transparent",children:[i.jsxs("div",{className:"md:col-span-4 flex items-start md:items-center gap-4",children:[i.jsx("div",{className:`mt-1.5 md:mt-0 w-2 h-2 rounded-full shrink-0 ${H.type==="Fixo"?"bg-indigo-500":"bg-orange-500"}`}),i.jsxs("div",{className:"flex flex-col text-ellipsis overflow-hidden",children:[i.jsx("span",{className:"text-sm md:text-base font-semibold text-zinc-800 dark:text-zinc-100 tracking-tight leading-tight mb-1 truncate",children:H.description}),i.jsxs("div",{className:"flex items-center gap-3 opacity-60",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 tabular-nums uppercase",children:H.date}),H.link&&i.jsx("a",{href:H.link,target:"_blank",rel:"noopener noreferrer",className:"text-[9px] font-bold text-indigo-400 hover:text-indigo-600 transition-colors uppercase tracking-widest flex items-center gap-1",children:"Doc "})]})]})]}),i.jsx("div",{className:"md:col-span-2 flex md:justify-center",children:i.jsxs("span",{className:"inline-flex px-3 py-1 bg-zinc-50 dark:bg-white/5 rounded-full border border-zinc-100 dark:border-white/10 text-[9px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-tighter tabular-nums",children:[H.quantity," unit  ",H.type.slice(0,1)]})}),i.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[i.jsx("div",{className:"text-base md:text-lg font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums",children:ve((Number(H.amount)||0)*(Number(H.quantity)||1))}),i.jsxs("div",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:[ve(H.amount)," / item"]})]}),i.jsxs("div",{className:"md:col-span-2 flex flex-row md:flex-col justify-between items-center md:items-end",children:[i.jsx("div",{className:"text-base md:text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:ve((Number(H.amount)||0)*(Number(H.quantity)||1)*(1+w))}),i.jsx("div",{className:"text-[9px] font-bold text-indigo-500/50 uppercase tracking-tighter md:opacity-0 group-hover:opacity-100 transition-opacity",children:"Incluindo Imposto"})]}),i.jsxs("div",{className:"md:col-span-2 flex justify-end gap-2 md:gap-1 md:opacity-0 group-hover:opacity-100 transition-all pt-2 md:pt-0 border-t md:border-0 border-zinc-50 dark:border-white/5",children:[i.jsxs("button",{onClick:()=>ke(H),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-indigo-500 hover:bg-zinc-100 dark:hover:bg-white/10 rounded-xl transition-all",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),i.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Edit"})]}),i.jsxs("button",{onClick:()=>oe(H.id),className:"flex-1 md:flex-none py-2.5 md:p-2.5 flex justify-center items-center text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-all",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),i.jsx("span",{className:"md:hidden ml-2 text-[10px] font-bold uppercase tracking-widest",children:"Delete"})]})]})]},H.id))})]},S))})]})]}),i.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[i.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6 group shadow-xl transition-all hover:shadow-2xl",children:[i.jsxs("div",{className:"flex items-center gap-4 md:gap-6",children:[i.jsx("div",{className:"w-12 h-12 md:w-16 md:h-16 bg-zinc-50 dark:bg-white/5 rounded-[1rem] md:rounded-[1.25rem] border border-zinc-100 dark:border-white/10 flex items-center justify-center transition-all group-hover:scale-110",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-1",children:"Export Channel"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-xs md:text-sm font-semibold tracking-tight leading-none",children:"Generate CSV Matrix Report"})]})]}),i.jsx("button",{onClick:A,className:"w-full sm:w-auto px-6 py-4 md:py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest shadow-lg active:scale-90 transition-all",children:"Execute"})]}),i.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"System Integrity"}),i.jsx("button",{onClick:re,className:"text-[9px] font-bold text-red-500/60 hover:text-red-600 uppercase tracking-widest transition-colors",children:"Terminate All"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[i.jsx("button",{onClick:q,className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Export JSON"}),i.jsx("button",{onClick:()=>{var S;return(S=M.current)==null?void 0:S.click()},className:"py-4 md:py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] md:text-[9px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Import Protocol"}),i.jsx("input",{ref:M,type:"file",accept:"application/json",className:"hidden",onChange:$})]})]})]}),i.jsx(_e,{children:s&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:le}),i.jsxs(B.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-sm rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[80vh]",children:[i.jsx(mD,{}),i.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:i.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),i.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:o?"Editar Despesa":"Nova Despesa"}),i.jsx("button",{onClick:le,className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:h?i.jsxs("div",{className:"space-y-4 px-4 animate-fade-in",children:[i.jsx("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:n.map((S,O)=>i.jsxs("div",{className:`flex justify-between items-center py-3 px-4 ${O!==n.length-1?"border-b border-zinc-100 dark:border-white/5":""}`,children:[i.jsx("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:S}),i.jsx("button",{onClick:()=>se(S),className:"w-11 h-11 flex items-center justify-center text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl touch-manipulation transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})})})]},S))}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{className:"flex-1 bg-white dark:bg-zinc-800/50 border-none rounded-xl px-4 py-3 text-sm font-medium outline-none placeholder:text-zinc-400 dark:text-white",placeholder:"Nova categoria...",value:m,onChange:S=>y(S.target.value)}),i.jsx("button",{className:"h-12 w-12 bg-zinc-900 dark:bg-white text-white dark:text-black rounded-xl text-xl font-bold flex items-center justify-center touch-manipulation active:scale-95 transition-transform",onClick:U,children:"+"})]}),i.jsx("button",{onClick:()=>p(!1),className:"w-full py-4 text-[10px] font-bold text-zinc-500 uppercase tracking-widest transition-all touch-manipulation hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-xl",children:"Pronto"})]}):i.jsxs("form",{onSubmit:J,className:"space-y-6 px-4 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[i.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Nome"}),i.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",autoFocus:!0,value:C.description,onChange:S=>D({...C,description:S.target.value}),placeholder:"Mixer, Aluguel..."})]}),i.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[i.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Link"}),i.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-medium text-indigo-500/80 outline-none placeholder:text-zinc-300 italic",type:"url",value:C.link,onChange:S=>D({...C,link:S.target.value}),placeholder:"Opcional..."})]}),i.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[i.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Quantidade"}),i.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",min:"1",value:C.quantity,onChange:S=>D({...C,quantity:S.target.value})})]}),i.jsxs("div",{className:"flex items-center px-4 py-3",children:[i.jsx("label",{className:"w-24 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Preo Un."}),i.jsxs("div",{className:"flex items-center flex-1",children:[i.jsx("span",{className:"text-[10px] font-bold text-indigo-500 mr-1",children:"$"}),i.jsx("input",{className:"w-full bg-transparent border-none py-1 text-sm font-bold text-zinc-800 dark:text-white outline-none",type:"number",step:"0.01",value:C.amount,onChange:S=>D({...C,amount:S.target.value})})]})]})]}),i.jsx("div",{className:"px-1",children:i.jsx("div",{className:"p-1 bg-zinc-200 dark:bg-black/40 rounded-xl flex gap-1 relative shadow-inner",children:["Fixo","Varivel"].map(S=>i.jsx("button",{type:"button",onClick:()=>D({...C,type:S}),className:`flex-1 py-2 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${C.type===S?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400"}`,children:S},S))})}),i.jsxs("div",{className:"space-y-3 px-1",children:[i.jsxs("div",{className:"flex justify-between items-center px-1",children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Categoria"}),i.jsx("button",{type:"button",onClick:()=>p(!0),className:"text-[9px] font-bold text-indigo-500 uppercase",children:"Ajustar"})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(S=>i.jsx("button",{type:"button",onClick:()=>D({...C,category:S}),className:`px-3 py-1.5 rounded-lg text-[9px] font-bold uppercase tracking-tight transition-all border ${C.category===S?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 border-zinc-900 dark:border-white shadow-md":"bg-white dark:bg-zinc-800/50 text-zinc-400 border-zinc-200 dark:border-white/5"}`,children:S},S))})]}),i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("button",{type:"submit",className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Salvar Despesa"}),i.jsx("button",{type:"button",onClick:le,className:"w-full py-2 text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Cancelar"})]})]})})]})]})}),i.jsx(_e,{children:R&&lt.createPortal(i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:R.message})]}),document.body)}),i.jsx(_e,{children:c&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:c.onCancel}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${c.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:c.type==="danger"?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:c.title}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:c.message}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:c.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:c.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${c.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})})]})}function mD(){return mn(!0),null}const Er="padoca_inventory_v2",Lh=["Ingredientes","Embalagens","Utenslios","Outros"],Vh=["None","Embutidos","Laticnios","Farinceos","Temperos","Vegetais","Produtos de Limpeza","Outros Ingredientes"];function pD(){var ce,W,X,Ne;const[t,e]=k.useState(()=>{try{const V=localStorage.getItem(Er);if(V)return JSON.parse(V);const Y=localStorage.getItem("padoca_inventory");return Y?JSON.parse(Y).map(ie=>({...ie,packageQuantity:ie.quantity||0,packageCount:1,quantity:void 0})):[]}catch{return[]}}),[n,r]=k.useState(()=>{try{const V=localStorage.getItem(Er+"_categories");return V?JSON.parse(V):Lh}catch{return Lh}}),[s,a]=k.useState(!1),[o,l]=k.useState("synced");k.useEffect(()=>{(async()=>{try{const Y=await $e.getInventory();Y&&(Array.isArray(Y.items)&&e(Y.items),Array.isArray(Y.categories)&&r(Y.categories));const K=await $e.getGlobalSettings();K&&K.taxRate!==void 0&&u(K.taxRate)}catch(Y){console.warn("Inventory cloud load failed",Y)}finally{a(!0)}})()},[]);const[c,u]=k.useState(()=>{const V=localStorage.getItem("padoca_global_tax");return V?Number(V):.13});k.useEffect(()=>{const V=Y=>{Y.detail&&Y.detail.taxRate!==void 0&&u(Y.detail.taxRate)};return window.addEventListener("global-settings-updated",V),()=>window.removeEventListener("global-settings-updated",V)},[]);const[h,p]=k.useState(!1),[m,y]=k.useState(null),[j,_]=k.useState(""),[T,v]=k.useState("None"),[w,N]=k.useState(null),[P,L]=k.useState(null),R=k.useRef(null),b=k.useCallback((V,Y="success")=>{R.current&&clearTimeout(R.current),L({message:V,type:Y}),R.current=setTimeout(()=>L(null),3500)},[]),[g,z]=k.useState(()=>{try{const V=localStorage.getItem(Er+"_subcategories");return V?JSON.parse(V):Vh}catch{return Vh}}),[C,D]=k.useState(!1),[M,I]=k.useState(""),[xe,ve]=k.useState(""),[je,de]=k.useState("alerts"),[J,oe]=k.useState(""),[le,ke]=k.useState(null);k.useEffect(()=>{t.filter(Y=>["low","warning","high"].includes(we(Y))).length===0&&je==="alerts"&&de("ok")},[t]);const[U,se]=k.useState([]),[A,q]=k.useState(""),[$,re]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const Y=await $e.getSuppliers();Y!=null&&Y.suppliers&&se(Y.suppliers)}catch(Y){console.error("Error loading suppliers:",Y)}})()},[]);const S=k.useCallback((V,Y)=>{if(!V||!Y)return!1;const K=V.trim().toLowerCase(),ie=Y.trim().toLowerCase(),Te=K.split(/\s+/).filter(Je=>Je.length>0),Ee=ie.split(/\s+/).filter(Je=>Je.length>0);return K===ie&&Te.length===Ee.length},[]),O=k.useMemo(()=>{const V=A.trim().toLowerCase();return V.length<2?[]:U.filter(Y=>{var K,ie;return((K=Y.name)==null?void 0:K.toLowerCase().includes(V))||((ie=Y.company)==null?void 0:ie.toLowerCase().includes(V))}).slice(0,8)},[U,A]),[H,Z]=k.useState({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),me=k.useRef(!1);k.useEffect(()=>{if(localStorage.setItem(Er,JSON.stringify(t)),localStorage.setItem(Er+"_categories",JSON.stringify(n)),localStorage.setItem(Er+"_subcategories",JSON.stringify(g)),!me.current){me.current=!0;return}const V=setTimeout(()=>{window.dispatchEvent(new Event("inventory-updated"))},100);if(s){l("syncing");const Y=setTimeout(async()=>{try{const K=await $e.syncInventory(t,n);l(K?"synced":"error")}catch{l("error")}},1500);return()=>{clearTimeout(Y),clearTimeout(V)}}return()=>clearTimeout(V)},[t,n,g,s]);const pe=V=>(Number(V.packageQuantity)||0)*(Number(V.packageCount)||1),we=V=>{const Y=pe(V),K=Number(V.minStock)||0,ie=Number(V.maxStock)||0;return K===0&&ie===0?"noLimit":K>0&&Y<K?"low":K>0&&Y<=K*1.2?"warning":ie>0&&Y>ie?"high":ie>0&&Y>=ie*.6&&Y<=ie||K>0&&ie===0&&Y>K*1.2?"adequate":"ok"},Se=V=>(Number(V.packageCount)||1)*(Number(V.pricePerUnit)||0),ze=k.useMemo(()=>{const V=t.reduce((ie,Te)=>ie+Se(Te),0),Y=t.length,K=t.reduce((ie,Te)=>{const Ee=Se(Te);return ie[Te.category]=(ie[Te.category]||0)+Ee,ie},{});return{totalValue:V,itemCount:Y,byCategory:K,taxImpact:V*c,grandTotal:V*(1+c)}},[t,c]),De=V=>(Number(V)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),Xe=()=>{if(!H.name.trim())return;const V={id:Date.now(),name:H.name.trim(),packageQuantity:Number(H.packageQuantity)||0,packageCount:Number(H.packageCount)||1,unit:H.unit,pricePerUnit:Number(H.pricePerUnit)||0,category:H.category,subcategory:H.category==="Ingredientes"?H.subcategory:null,purchaseDate:H.purchaseDate,supplierId:H.supplierId,supplierName:H.supplierName,minStock:Number(H.minStock)||0,maxStock:Number(H.maxStock)||0,createdAt:new Date().toISOString()};e(Y=>[...Y,V]),Z({name:"",packageQuantity:"",packageCount:"1",unit:"kg",pricePerUnit:"",category:"Ingredientes",subcategory:"Outros Ingredientes",purchaseDate:new Date().toISOString().split("T")[0],supplierId:null,supplierName:"",minStock:"",maxStock:""}),q(""),p(!1)},Pe=(V,Y,K)=>{e(ie=>ie.map(Te=>Te.id!==V?Te:{...Te,[Y]:["name","unit","category","subcategory","purchaseDate"].includes(Y)?K:Number(K)||0}))},Qe=V=>{N({title:"Excluir Item",message:"Este item ser removido permanentemente do estoque.",type:"danger",onConfirm:()=>{e(Y=>Y.filter(K=>K.id!==V)),y(null),N(null)},onCancel:()=>N(null)})},Ht=k.useMemo(()=>{let V=t;if(j.trim()){const Y=j.toLowerCase().trim();V=V.filter(K=>K.name.toLowerCase().includes(Y)||K.subcategory&&K.subcategory.toLowerCase().includes(Y))}return T&&(V=V.filter(Y=>Y.subcategory===T)),V},[t,j,T]),Ct=k.useMemo(()=>n.reduce((V,Y)=>{const K=Ht.filter(ie=>ie.category===Y);return K.length>0&&(V[Y]=K),V},{}),[Ht,n]),F=$n.useRef(null),ne=()=>{try{const V=["ID","Item","Categoria","Qtd Pacote","Unidade","N Pacotes","Total Qtd","Preo/Pacote","Valor Total"],Y=t.map(Je=>{const pn=(Number(Je.packageQuantity)||0)*(Number(Je.packageCount)||1),Nl=(Number(Je.packageCount)||1)*(Number(Je.pricePerUnit)||0);return[Je.id,`"${Je.name.replace(/"/g,'""')}"`,`"${Je.category}"`,Je.packageQuantity,Je.unit,Je.packageCount,pn,Number(Je.pricePerUnit).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),Nl.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})]}),K="\uFEFF"+[V.join(";"),...Y.map(Je=>Je.join(";"))].join(`
`),ie=new Blob([K],{type:"text/csv;charset=utf-8;"}),Te=URL.createObjectURL(ie),Ee=document.createElement("a");Ee.href=Te,Ee.download=`padoca_estoque_${new Date().toISOString().split("T")[0]}.csv`,Ee.click(),b("Relatrio de Estoque exportado!","success")}catch(V){console.error(V),b("Erro ao exportar CSV","error")}},ue=V=>{var ie;const Y=(ie=V.target.files)==null?void 0:ie[0];if(!Y)return;const K=new FileReader;K.onload=Te=>{try{const Ee=JSON.parse(String(Te.target.result||"{}"));if(Ee.items&&Array.isArray(Ee.items))e(Ee.items),Ee.categories&&r(Ee.categories),b("Dados de Estoque restaurados!","success");else throw new Error("Formato invlido")}catch{b("Arquivo de backup invlido","error")}},K.readAsText(Y),V.target.value=""},fe=()=>{N({title:"Limpar Estoque",message:"Ateno: Isso apagar TODO o estoque permanentemente. Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{e([]),localStorage.setItem(Er,"[]"),N(null)},onCancel:()=>N(null)})};return i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Estoque"}),i.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${o==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":o==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[i.jsx("div",{className:`w-1 h-1 rounded-full ${o==="syncing"?"bg-amber-500":o==="error"?"bg-red-500":"bg-emerald-500"}`}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:o==="syncing"?"Cloud Syncing":o==="error"?"Sync Error":"Cloud Active"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto inteligente de insumos e provises"})]}),i.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Insumo"]})]}),i.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-8",children:[i.jsx("div",{className:"md:col-span-2 relative group",children:i.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-12",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Inventory Matrix"}),i.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: High Integrity"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Matrix"})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Total Stock Asset Value"}),i.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:De(ze.grandTotal)})]})]}),i.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Net Valuation"}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:De(ze.totalValue)})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsxs("span",{className:"text-[9px] font-bold text-emerald-500 dark:text-emerald-400 uppercase tracking-widest",children:["Tax Impact (",(c*100).toFixed(0),"%)"]}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-emerald-600 dark:text-emerald-400 tracking-tight tabular-nums",children:De(ze.taxImpact)})]})]})]})}),i.jsx("div",{className:"md:col-span-2 grid grid-cols-2 lg:grid-cols-2 gap-3 md:gap-4",children:n.map((V,Y)=>{const K={Ingredientes:{bg:"bg-indigo-500/80",text:"text-indigo-500",shadow:"shadow-[0_0_8px_rgba(99,102,241,0.4)]",pulse:"bg-indigo-500"},Embalagens:{bg:"bg-orange-500/80",text:"text-orange-500",shadow:"shadow-[0_0_8px_rgba(249,115,22,0.4)]",pulse:"bg-orange-500"},Utenslios:{bg:"bg-emerald-500/80",text:"text-emerald-500",shadow:"shadow-[0_0_8px_rgba(16,185,129,0.4)]",pulse:"bg-emerald-500"},Outros:{bg:"bg-zinc-500/80",text:"text-zinc-500",shadow:"shadow-[0_0_8px_rgba(113,113,122,0.4)]",pulse:"bg-zinc-500"}},ie=K[V]||K.Outros,Te=ze.byCategory[V]||0,Ee=Te*(1+c),Je=(Te/ze.totalValue*100||0).toFixed(0);return i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-3xl p-5 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${ie.pulse} ${ie.shadow}`}),i.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:V})]}),i.jsx("div",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:De(Ee)}),i.jsxs("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:["(",De(Te)," + ",(c*100).toFixed(0),"% tax)"]})]}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1 px-0.5",children:[i.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Allocation"}),i.jsxs("span",{className:`text-[8px] font-bold ${ie.text}`,children:[Je,"%"]})]}),i.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${ie.bg} transition-all duration-1000`,style:{width:`${Je}%`}})})]})]},V)})})]}),i.jsx(_e,{children:h&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[99999] flex items-end md:items-start justify-center p-0 md:p-4 md:pt-40",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>p(!1)}),i.jsxs(B.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:30,stiffness:350},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-md rounded-t-[2rem] md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[90vh] md:max-h-[80vh]",style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[i.jsx(lc,{}),i.jsx("div",{className:"md:hidden flex justify-center pt-3 pb-1",children:i.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),i.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-100 dark:border-zinc-800",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Novo Item"}),i.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Adicionar ao estoque"})]}),i.jsx("button",{onClick:()=>p(!1),className:"w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Nome do Item"}),i.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-semibold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 focus:border-indigo-500/50 transition-all placeholder:text-zinc-400",placeholder:"Ex: Farinha de Trigo",value:H.name,onChange:V=>Z(Y=>({...Y,name:V.target.value}))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Qtd/Pacote"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"flex-1 px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"25",value:H.packageQuantity,onChange:V=>Z(Y=>({...Y,packageQuantity:V.target.value}))}),i.jsxs("select",{className:"w-20 px-2 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:H.unit,onChange:V=>Z(Y=>({...Y,unit:V.target.value})),children:[i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"un",children:"un"}),i.jsx("option",{value:"cx",children:"cx"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"N Pacotes"}),i.jsx("input",{type:"number",min:"1",inputMode:"numeric",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",placeholder:"1",value:H.packageCount,onChange:V=>Z(Y=>({...Y,packageCount:V.target.value}))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-2",children:"Preo por Pacote"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-emerald-500 font-bold text-lg",children:"$"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-12 pr-4 py-4 rounded-2xl bg-emerald-50 dark:bg-emerald-500/10 border border-emerald-200 dark:border-emerald-500/20 text-zinc-900 dark:text-white text-xl font-bold text-right focus:outline-none focus:ring-2 focus:ring-emerald-500/30 transition-all",placeholder:"0,00",value:H.pricePerUnit,onChange:V=>Z(Y=>({...Y,pricePerUnit:V.target.value}))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:H.category!=="Ingredientes"?"col-span-2":"",children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Categoria"}),i.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:H.category,onChange:V=>Z(Y=>({...Y,category:V.target.value,subcategory:V.target.value==="Ingredientes"?"Outros Ingredientes":null})),children:n.map(V=>i.jsx("option",{value:V,children:V},V))})]}),H.category==="Ingredientes"&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Subcategoria"}),i.jsx("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-bold focus:outline-none focus:ring-2 focus:ring-indigo-500/30 transition-all",value:H.subcategory,onChange:V=>Z(Y=>({...Y,subcategory:V.target.value})),children:g.map(V=>i.jsx("option",{value:V,children:V},V))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-violet-500 uppercase tracking-widest mb-2",children:"Fornecedor"}),i.jsx("div",{className:"relative",children:H.supplierId?i.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 rounded-2xl bg-violet-50 dark:bg-violet-500/10 border border-violet-200 dark:border-violet-500/20",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white font-bold shadow-lg",children:(W=(ce=H.supplierName)==null?void 0:ce.charAt(0))==null?void 0:W.toUpperCase()}),i.jsx("span",{className:"flex-1 font-bold text-violet-700 dark:text-violet-300",children:H.supplierName}),i.jsx("button",{onClick:()=>{Z(V=>({...V,supplierId:null,supplierName:""})),q("")},className:"w-10 h-10 rounded-xl flex items-center justify-center text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}):i.jsxs(i.Fragment,{children:[i.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/30 transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:A,onChange:V=>{const Y=V.target.value;q(Y),re(!0);const K=U.find(ie=>S(Y,ie.name));K&&(Z(ie=>({...ie,supplierId:K.id,supplierName:K.name})),q(""),re(!1))},onFocus:()=>re(!0)}),$&&O.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-2xl border border-zinc-200 dark:border-zinc-700 shadow-2xl max-h-40 overflow-y-auto z-50",children:O.map(V=>{var Y,K;return i.jsxs("button",{onClick:()=>{Z(ie=>({...ie,supplierId:V.id,supplierName:V.name})),q(""),re(!1)},className:"w-full px-4 py-3 text-left flex items-center gap-3 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors",children:[i.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xs font-bold",children:(K=(Y=V.name)==null?void 0:Y.charAt(0))==null?void 0:K.toUpperCase()}),i.jsx("span",{className:"font-bold text-zinc-900 dark:text-white",children:V.name})]},V.id)})})]})})]}),i.jsxs("div",{className:"p-4 rounded-2xl bg-amber-50 dark:bg-amber-500/5 border border-amber-200/50 dark:border-amber-500/10",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-widest",children:"Limites de Estoque"}),i.jsxs("select",{className:"px-3 py-1.5 rounded-lg bg-amber-100 dark:bg-amber-500/20 text-amber-700 dark:text-amber-300 text-xs font-bold uppercase tracking-wider border-none focus:outline-none focus:ring-2 focus:ring-amber-500/30 cursor-pointer appearance-none pr-6 bg-[url('data:image/svg+xml;charset=UTF-8,%3csvg%20xmlns%3d%22http%3a%2f%2fwww.w3.org%2f2000%2fsvg%22%20viewBox%3d%220%200%2020%2020%22%20fill%3d%22%23d97706%22%3e%3cpath%20fill-rule%3d%22evenodd%22%20d%3d%22M5.293%207.293a1%201%200%20011.414%200L10%2010.586l3.293-3.293a1%201%200%20111.414%201.414l-4%204a1%201%200%2001-1.414%200l-4-4a1%201%200%20010-1.414z%22%20clip-rule%3d%22evenodd%22%2f%3e%3c%2fsvg%3e')] bg-no-repeat bg-[right_0.3rem_center] bg-[length:1rem]",value:H.unit,onChange:V=>Z(Y=>({...Y,unit:V.target.value})),children:[i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"un",children:"un"}),i.jsx("option",{value:"cx",children:"cx"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mnimo"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:H.minStock,onChange:V=>Z(Y=>({...Y,minStock:V.target.value}))}),i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:H.unit})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-1",children:"Mximo"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-3 py-3 pr-12 rounded-xl bg-white dark:bg-zinc-800 border border-amber-200 dark:border-amber-500/20 text-zinc-900 dark:text-white text-lg font-bold text-center focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:H.maxStock,onChange:V=>Z(Y=>({...Y,maxStock:V.target.value}))}),i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-amber-500/60 text-sm font-bold",children:H.unit})]})]})]}),i.jsx("p",{className:"text-[10px] text-amber-600/60 mt-2 text-center",children:"Deixe em 0 para desativar alertas"})]}),H.packageQuantity&&H.packageCount&&i.jsx("div",{className:"p-4 rounded-2xl bg-gradient-to-br from-zinc-100 to-zinc-50 dark:from-zinc-800 dark:to-zinc-900 border border-zinc-200 dark:border-zinc-700",children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Total"}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:[Number(H.packageQuantity)*Number(H.packageCount)," ",H.unit]}),H.pricePerUnit&&i.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400",children:De(Number(H.packageCount)*Number(H.pricePerUnit))})]})]})})]}),i.jsxs("div",{className:"px-6 py-4 border-t border-zinc-100 dark:border-zinc-800 bg-zinc-50/50 dark:bg-zinc-900/50 flex gap-3",children:[i.jsx("button",{onClick:()=>p(!1),className:"flex-1 py-4 rounded-2xl font-bold text-sm text-zinc-600 dark:text-zinc-400 bg-zinc-200 dark:bg-zinc-800 hover:bg-zinc-300 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),i.jsx("button",{onClick:Xe,disabled:!H.name.trim(),className:"flex-[2] py-4 rounded-2xl font-bold text-sm text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]})}),i.jsx("section",{className:"relative z-10 mb-6",children:i.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),i.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar produto por nome ou subcategoria...",value:j,onChange:V=>_(V.target.value)}),j&&i.jsx("button",{onClick:()=>_(""),className:"absolute right-4 top-1/2 -translate-y-1/2 p-1 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[i.jsx("button",{onClick:()=>v(null),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${T===null?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:"Todos"}),g.map(V=>i.jsx("button",{onClick:()=>v(T===V?null:V),className:`px-3 py-1.5 rounded-full text-[10px] font-bold uppercase tracking-wider transition-all ${T===V?"bg-indigo-500 text-white shadow-lg shadow-indigo-500/20":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 hover:bg-zinc-200 dark:hover:bg-zinc-700"}`,children:V},V))]}),(j||T)&&i.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-800",children:[i.jsxs("span",{className:"text-xs text-zinc-500",children:[Ht.length," ",Ht.length===1?"resultado":"resultados"]}),i.jsx("button",{onClick:()=>{_(""),v(null)},className:"text-xs font-medium text-indigo-500 hover:text-indigo-600 transition-colors",children:"Limpar filtros"})]})]})}),Object.keys(Ct).length>0&&i.jsx("div",{className:"space-y-8",children:Object.entries(Ct).map(([V,Y])=>i.jsxs("div",{className:"rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[i.jsxs("div",{className:"px-8 py-6 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02] flex items-center justify-between",children:[i.jsx("h3",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:V}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xs font-bold text-zinc-900 dark:text-zinc-100",children:De((ze.byCategory[V]||0)*(1+c))}),i.jsx("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:i.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[Y.length," ",Y.length===1?"item":"itens"]})})]})]}),i.jsxs("div",{className:"hidden md:block",children:[i.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-4 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/30 dark:bg-white/[0.01]",children:[i.jsx("div",{className:"col-span-3 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Item"}),i.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Configurao"}),i.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Qtd"}),i.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Total Estocado"}),i.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Preo Unitrio"}),i.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Valor Total"})]}),i.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:Y.map(K=>i.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:m===K.id?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-span-2",children:i.jsx("input",{type:"text",className:"w-full px-3 py-2 -ml-3 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:K.name,onChange:ie=>Pe(K.id,"name",ie.target.value)})}),i.jsxs("div",{className:"col-span-2 flex items-center gap-2",children:[i.jsx("input",{type:"number",step:"0.01",className:"w-16 px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:K.packageQuantity,onChange:ie=>Pe(K.id,"packageQuantity",ie.target.value)}),i.jsxs("select",{className:"w-14 px-1 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium",value:K.unit,onChange:ie=>Pe(K.id,"unit",ie.target.value),children:[i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"un",children:"un"}),i.jsx("option",{value:"cx",children:"cx"})]})]}),i.jsx("div",{className:"col-span-1",children:i.jsx("input",{type:"number",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-center text-sm font-medium",value:K.packageCount,onChange:ie=>Pe(K.id,"packageCount",ie.target.value)})}),K.category==="Ingredientes"&&i.jsx("div",{className:"col-span-2",children:i.jsx("select",{className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-sm font-medium text-zinc-700 dark:text-zinc-300",value:K.subcategory||"",onChange:ie=>Pe(K.id,"subcategory",ie.target.value),children:g.map(ie=>i.jsx("option",{value:ie,children:ie},ie))})}),K.category!=="Ingredientes"&&i.jsx("div",{className:"col-span-2 text-right",children:i.jsxs("span",{className:"text-sm font-medium text-zinc-400 px-3",children:[pe(K)," ",K.unit]})}),i.jsx("div",{className:"col-span-2",children:i.jsx("input",{type:"number",step:"0.01",className:"w-full px-2 py-2 rounded-lg bg-zinc-100 dark:bg-zinc-800 border-none text-right text-sm font-medium",value:K.pricePerUnit,onChange:ie=>Pe(K.id,"pricePerUnit",ie.target.value)})}),i.jsxs("div",{className:"col-span-3 flex items-center justify-end gap-2",children:[i.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-full text-emerald-600 hover:bg-emerald-50 dark:hover:bg-emerald-500/20 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),i.jsx("button",{onClick:()=>Qe(K.id),className:"p-2 rounded-full text-red-500 hover:bg-red-50 dark:hover:bg-red-500/20 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"col-span-3 flex items-center gap-2",children:[we(K)==="low"&&i.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-rose-500 shadow-[0_0_6px_rgba(244,63,94,0.5)]",title:"Estoque baixo"}),we(K)==="warning"&&i.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-amber-500 shadow-[0_0_6px_rgba(245,158,11,0.4)]",title:"Prximo do mnimo"}),we(K)==="high"&&i.jsx("span",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500 shadow-[0_0_6px_rgba(59,130,246,0.4)]",title:"Acima do mximo"}),i.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tracking-tight",children:K.name})]}),i.jsx("div",{className:"col-span-2 text-center",children:i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5 text-xs font-medium text-zinc-600 dark:text-zinc-400 tabular-nums",children:[K.packageQuantity," ",K.unit]})}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsxs("span",{className:"inline-flex items-center justify-center px-2 py-1 rounded-full bg-zinc-100 dark:bg-zinc-800 text-xs font-semibold text-zinc-700 dark:text-zinc-300",children:[K.packageCount,""]})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:[pe(K)," ",K.unit]})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400",children:De(K.pricePerUnit)})}),i.jsxs("div",{className:"col-span-2 flex items-center justify-end gap-2",children:[i.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white",children:De(Se(K)*(1+c))}),i.jsx("button",{onClick:()=>y(K.id),className:"p-2 rounded-lg text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})]})]})},K.id))})]}),i.jsx("div",{className:"md:hidden space-y-3 p-4 bg-zinc-50/50 dark:bg-white/[0.01]",children:Y.map(K=>{const ie=we(K),Te=ie==="low"?"border-l-4 border-l-rose-500":ie==="warning"?"border-l-4 border-l-amber-500":ie==="high"?"border-l-4 border-l-blue-500":"";return i.jsx("div",{className:`bg-white dark:bg-zinc-900 rounded-2xl p-5 border transition-all ${Te} ${m===K.id?"border-indigo-500/30 shadow-lg shadow-indigo-500/5":"border-zinc-200/60 dark:border-white/5 shadow-sm"}`,children:m===K.id?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando Item"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>y(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),i.jsx("button",{onClick:()=>Qe(K.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Nome"}),i.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-800 dark:text-zinc-100 font-semibold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all placeholder:text-zinc-300",value:K.name,onChange:Ee=>Pe(K.id,"name",Ee.target.value)})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Qtd"}),i.jsx("div",{className:"flex gap-2",children:i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.packageQuantity,onChange:Ee=>Pe(K.id,"packageQuantity",Ee.target.value)})})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Unidade"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-bold text-center appearance-none text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.unit,onChange:Ee=>Pe(K.id,"unit",Ee.target.value),children:[i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"un",children:"un"}),i.jsx("option",{value:"cx",children:"cx"})]}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"N Pcts"}),i.jsx("input",{type:"number",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-center font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.packageCount,onChange:Ee=>Pe(K.id,"packageCount",Ee.target.value)})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Preo/Un"}),i.jsxs("div",{className:"relative group",children:[i.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-400 group-focus-within:text-indigo-400 transition-colors text-xs font-bold",children:"R$"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full pl-8 pr-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-right font-bold text-lg text-zinc-900 dark:text-white focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:K.pricePerUnit,onChange:Ee=>Pe(K.id,"pricePerUnit",Ee.target.value)})]})]})]}),K.category==="Ingredientes"&&i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 block ml-1",children:"Subcategoria"}),i.jsx("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 font-semibold text-zinc-700 dark:text-zinc-300 focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all appearance-none",value:K.subcategory||"",onChange:Ee=>Pe(K.id,"subcategory",Ee.target.value),children:g.map(Ee=>i.jsx("option",{value:Ee,children:Ee},Ee))})]})]}):i.jsxs("div",{onClick:()=>y(K.id),className:"group cursor-pointer",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] tracking-tight mb-1 group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:K.name}),i.jsxs("div",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[pe(K)," ",K.unit," em estoque"]})]}),i.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-zinc-900 dark:bg-white text-[10px] font-semibold text-white dark:text-zinc-900 shadow-sm ring-1 ring-inset ring-white/10 dark:ring-black/10",children:[K.packageCount," pcts"]})]}),i.jsxs("div",{className:"flex items-end justify-between pt-4 border-t border-dashed border-zinc-100 dark:border-white/5",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-zinc-300 dark:text-zinc-600 mb-0.5",children:"Unitrio"}),i.jsx("span",{className:"text-sm font-semibold text-zinc-600 dark:text-zinc-300 tabular-nums",children:De(K.pricePerUnit)})]}),i.jsxs("div",{className:"flex flex-col items-end",children:[i.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em] text-indigo-400 dark:text-indigo-400/80 mb-0.5",children:"Total"}),i.jsx("div",{className:"flex items-baseline gap-1",children:i.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tracking-tight tabular-nums",children:De(Se(K)*(1+c))})})]})]})]})},K.id)})}),i.jsxs("div",{className:"px-8 py-4 bg-zinc-50/50 dark:bg-white/[0.02] border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[i.jsxs("span",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:["Total ",V]}),i.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tracking-tight",children:De((ze.byCategory[V]||0)*(1+c))})]})]},V))}),Object.keys(Ct).length===0&&T!=="None"&&i.jsxs("div",{className:"text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[i.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Vazio"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Voc ainda no tem itens cadastrados no estoque."}),i.jsx("button",{onClick:()=>p(!0),className:"button primary",children:"Adicionar Primeiro Item"})]})]}),i.jsx("section",{className:"relative z-10 mt-8 mb-8",children:i.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,ease:[.25,.46,.45,.94]},className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-3xl p-6 md:p-8 border border-zinc-200/60 dark:border-white/10 shadow-2xl shadow-zinc-900/5 dark:shadow-black/20",children:[i.jsx("div",{className:"flex items-center justify-between mb-8",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-semibold text-zinc-900 dark:text-white tracking-tight",children:"Nveis"}),i.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-1 font-medium",children:"Monitoramento de estoque"})]})}),i.jsx("div",{className:"relative mb-6",children:i.jsxs("div",{className:"relative flex bg-zinc-100/90 dark:bg-zinc-800/90 backdrop-blur-sm p-1 rounded-[10px] overflow-x-auto scrollbar-hide md:overflow-visible",children:[i.jsx(B.div,{className:"absolute top-1 bottom-1 bg-white dark:bg-zinc-700 rounded-lg shadow-sm",initial:!1,animate:{width:`calc(${100/4}% - 2px)`,x:`calc(${["alerts","ok","noLimits","all"].indexOf(je)*100}% + 1px)`},transition:{type:"spring",stiffness:400,damping:30}}),[{id:"alerts",label:"Crtico"},{id:"ok",label:"Normal"},{id:"noLimits",label:"S/ Limite"},{id:"all",label:"Todos"}].map(V=>i.jsx("button",{onClick:()=>de(V.id),className:`
                                        relative flex-1 min-w-[60px] py-2 px-1.5 text-center z-10 transition-colors duration-200
                                        ${je===V.id?"text-zinc-900 dark:text-white":"text-zinc-500 dark:text-zinc-400"}
                                    `,children:i.jsx("span",{className:"text-[13px] font-semibold tracking-[-0.01em]",children:V.label})},V.id))]})}),i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-400",children:i.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),i.jsx("input",{type:"text",placeholder:"Buscar...",value:J,onChange:V=>oe(V.target.value),className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border-0 text-zinc-900 dark:text-white text-sm font-medium placeholder:text-zinc-400 focus:outline-none focus:ring-2 focus:ring-zinc-900/10 dark:focus:ring-white/20 transition-shadow"})]}),i.jsxs("div",{className:"space-y-3 max-h-[50vh] overflow-y-auto overscroll-contain pr-1 -mr-1",children:[t.filter(V=>{const Y=we(V);return je==="noLimits"?Y==="noLimit":je==="alerts"?["low","warning","high"].includes(Y):je==="ok"?Y==="ok"||Y==="adequate":!0}).filter(V=>J.trim()?V.name.toLowerCase().includes(J.toLowerCase()):!0).map(V=>{const Y=we(V),K=pe(V),ie=Number(V.minStock)||0,Te=Number(V.maxStock)||0;let Ee=0;Te>0?Ee=Math.min(K/Te*100,100):ie>0&&(Ee=Math.min(K/(ie*2)*100,100));const Je={low:{bg:"bg-rose-50 dark:bg-rose-500/5",accent:"bg-rose-500",text:"text-rose-600 dark:text-rose-400"},warning:{bg:"bg-amber-50 dark:bg-amber-500/5",accent:"bg-amber-500",text:"text-amber-600 dark:text-amber-400"},high:{bg:"bg-violet-50 dark:bg-violet-500/5",accent:"bg-violet-500",text:"text-violet-600 dark:text-violet-400"},ok:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-emerald-500",text:"text-emerald-600 dark:text-emerald-400"},adequate:{bg:"bg-sky-50 dark:bg-sky-500/5",accent:"bg-sky-500",text:"text-sky-600 dark:text-sky-400"},noLimit:{bg:"bg-zinc-50 dark:bg-zinc-800/30",accent:"bg-zinc-300 dark:bg-zinc-600",text:"text-zinc-500 dark:text-zinc-400"}},pn=Je[Y]||Je.noLimit;return i.jsx("div",{onClick:()=>ke(V),className:`group p-4 rounded-2xl ${pn.bg} cursor-pointer transition-all duration-200 hover:shadow-lg active:scale-[0.98]`,children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`flex-shrink-0 w-11 h-11 rounded-xl ${pn.accent} flex items-center justify-center shadow-lg`,children:i.jsx("span",{className:"text-white text-sm font-bold tabular-nums",children:K})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-semibold text-zinc-900 dark:text-white truncate",children:V.name}),i.jsxs("p",{className:`text-xs font-medium mt-0.5 ${pn.text}`,children:[K," ",V.unit," ",ie>0&&` min ${ie}`," ",Te>0&&` max ${Te}`]}),(ie>0||Te>0)&&i.jsx("div",{className:"mt-2 h-1 bg-zinc-200 dark:bg-zinc-700 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full ${pn.accent} rounded-full transition-all duration-500`,style:{width:`${Ee}%`}})})]}),i.jsx("svg",{className:"w-5 h-5 text-zinc-300 group-hover:text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})},V.id)}),t.length===0&&i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),i.jsx("p",{className:"text-zinc-500 font-medium",children:"Nenhum item"})]})]}),i.jsxs("div",{className:"flex items-center justify-between pt-6 mt-6 border-t border-zinc-100 dark:border-zinc-800",children:[i.jsx("button",{onClick:()=>D(!0),className:"text-sm font-medium text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"Categorias"}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:ne,className:"text-sm font-medium text-zinc-400 hover:text-zinc-600 transition-colors",children:"Exportar"}),i.jsx("button",{onClick:fe,className:"text-sm font-medium text-rose-500 hover:text-rose-600 transition-colors",children:"Limpar"})]}),i.jsx("input",{ref:F,type:"file",accept:"application/json",className:"hidden",onChange:ue})]})]})}),le&&lt.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[20000] flex items-center justify-center p-4 overflow-y-auto",style:{paddingTop:"80px",paddingBottom:"40px"},children:[i.jsx(lc,{}),i.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>ke(null)}),i.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 pb-4 border-b border-zinc-100 dark:border-zinc-800",children:[i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Configurar Limites"}),i.jsx("button",{onClick:()=>ke(null),className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:`inline-flex w-16 h-16 rounded-2xl items-center justify-center text-2xl font-bold text-white mb-4 ${we(le)==="low"?"bg-gradient-to-br from-rose-500 to-rose-600":we(le)==="warning"?"bg-gradient-to-br from-amber-500 to-amber-600":we(le)==="high"?"bg-gradient-to-br from-blue-500 to-blue-600":"bg-gradient-to-br from-emerald-500 to-emerald-600"}`,children:((Ne=(X=le.name)==null?void 0:X.charAt(0))==null?void 0:Ne.toUpperCase())||"?"}),i.jsx("h4",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:le.name}),i.jsxs("p",{className:"text-sm text-zinc-500 mt-1",children:["Estoque atual: ",i.jsxs("span",{className:"font-bold text-zinc-900 dark:text-white",children:[pe(le)," ",le.unit]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mnimo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-amber-50 dark:bg-amber-500/10 border border-amber-200 dark:border-amber-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-amber-500/30 transition-all",placeholder:"0",value:le.minStock||"",onChange:V=>{Pe(le.id,"minStock",V.target.value),ke(Y=>({...Y,minStock:Number(V.target.value)||0}))}}),i.jsx("p",{className:"text-[10px] text-amber-500 text-center mt-1",children:le.unit})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Estoque Mximo"}),i.jsx("input",{type:"number",step:"0.01",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-blue-50 dark:bg-blue-500/10 border border-blue-200 dark:border-blue-500/30 text-zinc-900 dark:text-white text-center text-xl font-bold focus:outline-none focus:ring-2 focus:ring-blue-500/30 transition-all",placeholder:"0",value:le.maxStock||"",onChange:V=>{Pe(le.id,"maxStock",V.target.value),ke(Y=>({...Y,maxStock:Number(V.target.value)||0}))}}),i.jsx("p",{className:"text-[10px] text-blue-500 text-center mt-1",children:le.unit})]})]}),i.jsx("button",{onClick:()=>ke(null),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-sm font-bold uppercase tracking-wider shadow-xl hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Salvar Limites"})]})]})]}),document.body),C&&i.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[i.jsx(lc,{}),i.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>D(!1)}),i.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-8 md:p-8 shadow-2xl max-h-[80vh] overflow-y-auto custom-scrollbar",children:[i.jsx("div",{className:"md:hidden w-full flex justify-center mb-6",children:i.jsx("div",{className:"w-12 h-1.5 rounded-full bg-zinc-200 dark:bg-zinc-700/50"})}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Gerenciar Categorias"}),i.jsx("button",{onClick:()=>D(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors touch-manipulation",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest",children:"Categorias Principais"}),i.jsx("div",{className:"space-y-2",children:n.map((V,Y)=>i.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-indigo-50/50 dark:bg-indigo-900/20 border border-indigo-100 dark:border-indigo-800/30",children:[i.jsx("span",{className:"font-medium text-indigo-700 dark:text-indigo-300",children:V}),i.jsx("button",{onClick:()=>{N({title:"Excluir Categoria",message:`Excluir categoria "${V}"? Itens desta categoria sero movidos para "Outros".`,type:"danger",onConfirm:()=>{r(K=>K.filter(ie=>ie!==V)),e(K=>K.map(ie=>ie.category===V?{...ie,category:"Outros"}:ie)),N(null),b("Categoria removida","success")},onCancel:()=>N(null)})},className:"w-11 h-11 flex items-center justify-center rounded-xl text-indigo-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all touch-manipulation",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Y))})]}),i.jsxs("div",{className:"pt-4 border-t border-indigo-100 dark:border-indigo-800/30",children:[i.jsx("h4",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Categoria"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-indigo-50 dark:bg-indigo-900/30 border border-indigo-200 dark:border-indigo-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all placeholder:text-indigo-400",placeholder:"Nome da categoria",value:M,onChange:V=>I(V.target.value),onKeyDown:V=>{V.key==="Enter"&&M.trim()&&(n.includes(M.trim())||(r(Y=>[...Y,M.trim()]),I("")))}}),i.jsx("button",{onClick:()=>{M.trim()&&!n.includes(M.trim())&&(r(V=>[...V,M.trim()]),I(""))},disabled:!M.trim(),className:"px-5 py-3 bg-indigo-500 text-white rounded-xl font-bold text-sm hover:bg-indigo-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),i.jsx("button",{onClick:()=>{N({title:"Restaurar Categorias",message:"Deseja restaurar as categorias padro? Categorias personalizadas sero mantidas se houverem itens nelas, mas a lista principal ser resetada.",type:"default",onConfirm:()=>{r(Lh),N(null),b("Categorias restauradas","success")},onCancel:()=>N(null)})},className:"w-full py-2 text-indigo-500 dark:text-indigo-400 rounded-xl text-[9px] font-bold uppercase tracking-widest hover:text-indigo-700 dark:hover:text-indigo-300 transition-all",children:"Restaurar Categorias Padro"})]}),i.jsxs("div",{className:"space-y-4 pt-6 border-t border-zinc-100 dark:border-zinc-700",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Subcategorias de Ingredientes"}),i.jsx("div",{className:"space-y-2",children:g.map((V,Y)=>i.jsxs("div",{className:"flex items-center justify-between py-3 px-4 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-100 dark:border-zinc-700",children:[i.jsx("span",{className:"font-medium text-zinc-700 dark:text-zinc-300",children:V}),i.jsx("button",{onClick:()=>{N({title:"Excluir Subcategoria",message:`Deseja excluir a subcategoria "${V}"?`,type:"danger",onConfirm:()=>{z(K=>K.filter(ie=>ie!==V)),N(null),b("Subcategoria removida","success")},onCancel:()=>N(null)})},className:"p-1.5 rounded-lg text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]},Y))})]}),i.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700",children:[i.jsx("h4",{className:"text-[10px] font-bold text-emerald-500 uppercase tracking-widest mb-3",children:"Adicionar Nova Subcategoria"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",className:"flex-1 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition-all placeholder:text-zinc-400",placeholder:"Nome da subcategoria",value:xe,onChange:V=>ve(V.target.value),onKeyDown:V=>{V.key==="Enter"&&xe.trim()&&(g.includes(xe.trim())||(z(Y=>[...Y,xe.trim()]),ve("")))}}),i.jsx("button",{onClick:()=>{xe.trim()&&!g.includes(xe.trim())&&(z(V=>[...V,xe.trim()]),ve(""))},disabled:!xe.trim(),className:"px-5 py-3 bg-emerald-500 text-white rounded-xl font-bold text-sm hover:bg-emerald-600 active:scale-[0.98] transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})})})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx("button",{onClick:()=>{N({title:"Restaurar Subcategorias",message:"Restaurar subcategorias padro? Isso remover todas as subcategorias personalizadas.",type:"danger",onConfirm:()=>{z(Vh),N(null),b("Subcategorias restauradas","success")},onCancel:()=>N(null)})},className:"w-full py-3 text-zinc-500 dark:text-zinc-400 rounded-xl text-[10px] font-bold uppercase tracking-widest hover:text-zinc-700 dark:hover:text-zinc-300 transition-all",children:"Restaurar Padres"})})]})]})]}),i.jsx(_e,{children:w&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[i.jsx(lc,{}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:w.onCancel}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${w.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:w.title}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:w.message}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:w.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:w.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${w.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),i.jsx(_e,{children:P&&lt.createPortal(i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${P.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":P.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${P.type==="error"?"bg-white animate-pulse":P.type==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:P.message})]}),document.body)})]})}function CN(){const[t,e]=k.useState([]),n=()=>{try{const r=localStorage.getItem(Er);if(r){const s=JSON.parse(r);Array.isArray(s)?e(s):e([])}else e([])}catch(r){console.error("Failed to load inventory items directly:",r),e([])}};return k.useEffect(()=>{n();const r=a=>{a.key===Er&&n()},s=()=>{n()};return window.addEventListener("storage",r),window.addEventListener("inventory-updated",s),()=>{window.removeEventListener("storage",r),window.removeEventListener("inventory-updated",s)}},[]),t}function lc(){return mn(!0),null}const Gb="fichaTecnica_pizzas",Pc={g:1,kg:1e3,ml:1,L:1e3,un:1,cx:1},Oh=t=>{if(!t)return 0;const e=Number(t.packageQuantity)||0,n=Number(t.packageCount)||1,r=Number(t.pricePerUnit)||0,s=e*n,a=n*r;if(s<=0)return 0;const o=a/s,l=Pc[t.unit]||1;return o/l};function Fh(){return mn(!0),null}function fD({newPizzaName:t,setNewPizzaName:e,setIsCreatingPizza:n,handleCreatePizza:r}){return mn(!0),lt.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-start justify-center",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:()=>{n(!1),e("")}}),i.jsxs(B.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},transition:{type:"spring",stiffness:300,damping:30,mass:.8},className:"relative w-full md:max-w-md bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-2xl overflow-hidden mt-16 md:mt-20 mx-4 md:mx-0 rounded-2xl",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[i.jsxs("div",{className:"flex items-center justify-between px-5 pt-4 pb-2",children:[i.jsx("div",{className:"w-12"}),i.jsx("h3",{className:"text-[17px] font-semibold text-zinc-900 dark:text-white",children:"Nova Pizza"}),i.jsx("button",{onClick:()=>{n(!1),e("")},className:"w-12 h-12 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-4"}),i.jsxs("div",{className:"px-6 py-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-14 h-14 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex items-center justify-center shrink-0",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7 text-zinc-400 dark:text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("div",{children:i.jsx("p",{className:"text-[15px] text-zinc-500 dark:text-zinc-400",children:"D um nome para sua nova receita"})})]}),i.jsx("div",{className:"mb-6",children:i.jsx("input",{type:"text",className:"w-full h-14 px-5 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[17px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Ex: Margherita",value:t,onChange:s=>e(s.target.value),autoFocus:!0,onKeyDown:s=>s.key==="Enter"&&r()})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{n(!1),e("")},className:"flex-1 h-14 rounded-2xl font-semibold text-[17px] text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),i.jsx("button",{onClick:r,disabled:!t.trim(),className:"flex-[1.5] h-14 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-[17px] hover:bg-zinc-800 dark:hover:bg-zinc-100 active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed shadow-lg shadow-zinc-900/20 dark:shadow-white/10 touch-manipulation",children:"Criar"})]})]}),i.jsx("div",{style:{paddingBottom:"env(safe-area-inset-bottom, 0px)"}})]})]}),document.body)}const Kb={id:Date.now(),name:"Pizza Margherita",createdAt:new Date().toISOString(),ingredients:[]};function gD(){const[t,e]=k.useState(()=>{try{const A=localStorage.getItem(Gb);return A?JSON.parse(A):[Kb]}catch{return[Kb]}}),[n,r]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const q=await $e.getPizzas();q&&q.length>0&&e(q.map($=>({...$,ingredients:Array.isArray($.ingredients)?$.ingredients:[]})))}catch{console.warn("Ficha cloud load failed")}finally{r(!0)}})()},[]);const[s,a]=k.useState(null),[o,l]=k.useState(null),[c,u]=k.useState(!1),[h,p]=k.useState(!1),[m,y]=k.useState(""),[j,_]=k.useState({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),[T,v]=k.useState(null),[w,N]=k.useState(null),[P,L]=k.useState(null),[R,b]=k.useState(null),g=k.useRef(null);k.useCallback((A,q="success")=>{g.current&&clearTimeout(g.current),b({message:A,type:q}),g.current=setTimeout(()=>b(null),3500)},[]);const z=CN();k.useEffect(()=>{localStorage.setItem(Gb,JSON.stringify(t)),n&&$e.syncPizzas(t)},[t,n]);const C=k.useMemo(()=>t.find(A=>A.id===s)||null,[t,s]),D=(A=[])=>{if(!Array.isArray(A))return{totalCost:0,costPerPizza:0};const q=A.reduce(($,re)=>$+U(re),0);return{totalCost:q,costPerPizza:q}},M=A=>(Number(A)||0).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}).replace(/^/,"$ "),I=A=>{const q=Number(A)||0;return q<.01&&q>0?q.toLocaleString("pt-BR",{minimumFractionDigits:4,maximumFractionDigits:4}).replace(/^/,"$ "):q.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:4}).replace(/^/,"$ ")},xe=()=>{if(!m.trim())return;const A={id:Date.now(),name:m.trim(),createdAt:new Date().toISOString(),ingredients:[]};e(q=>[...q,A]),y(""),p(!1),a(A.id)},ve=A=>{const q=t.find($=>$.id===A);N({title:"Excluir Pizza",message:`A pizza "${(q==null?void 0:q.name)||""}" ser removida permanentemente.`,type:"danger",onConfirm:()=>{e($=>$.filter(re=>re.id!==A)),s===A&&a(null),N(null)},onCancel:()=>N(null)})},je=A=>{const q=t.find($=>$.id===A);q&&L({title:"Renomear Pizza",placeholder:"Nome da pizza",defaultValue:q.name,onConfirm:$=>{$&&$!==q.name&&e(re=>re.map(S=>S.id===A?{...S,name:$.trim()}:S)),L(null)},onCancel:()=>L(null)})},de=A=>{if(_(q=>({...q,name:A})),v(null),!!Array.isArray(z)&&A&&A.trim().length>0){const q=A.toLowerCase().trim(),$=z.find(re=>!re||!re.name?!1:re.name.toLowerCase()===q);if($){v($);const re=Oh($),S=Pc[j.unit]||1,O=re*S;_(H=>({...H,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:$.id}))}}},J=A=>{_(q=>{const $={...q,unit:A};if(T){const re=Oh(T),S=Pc[A]||1,O=re*S;$.pricePerUnit=O.toFixed(6),$.isSyncedFromInventory=!0}return $})},oe=(A=!1)=>{if(!C||!j.name.trim()||!j.quantity)return;const q={id:Date.now(),name:j.name.trim(),quantity:Number(j.quantity)||0,unit:j.unit,pricePerUnit:Number(j.pricePerUnit)||0,inventoryItemId:j.inventoryItemId};e($=>$.map(re=>re.id===s?{...re,ingredients:[...re.ingredients||[],q]}:re)),_({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),v(null),A?setTimeout(()=>{var $;($=document.getElementById("cat-ing-name-input"))==null||$.focus()},50):u(!1)},le=(A,q,$)=>{C&&e(re=>re.map(S=>S.id!==s?S:{...S,ingredients:(S.ingredients||[]).map(O=>O.id!==A?O:{...O,[q]:q==="name"||q==="unit"?$:Number($)||0})}))},ke=A=>{C&&(e(q=>q.map($=>$.id!==s?$:{...$,ingredients:($.ingredients||[]).filter(re=>re.id!==A)})),l(null))},U=A=>(Number(A.quantity)||0)*(Number(A.pricePerUnit)||0),se=C?D(C.ingredients):{totalCost:0,costPerPizza:0};return i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Ficha Tcnica"}),i.jsxs("div",{className:"mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80",children:[i.jsx("div",{className:"w-1 h-1 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:"Cloud Active"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto premium de receitas e custos"})]}),i.jsxs("button",{onClick:()=>p(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Nova Pizza"]})]}),i.jsx(_e,{children:h&&i.jsx(fD,{newPizzaName:m,setNewPizzaName:y,setIsCreatingPizza:p,handleCreatePizza:xe})}),!s&&i.jsxs("section",{className:"relative z-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[t.map(A=>{const q=D(A.ingredients);return i.jsxs("div",{onClick:()=>a(A.id),className:"group relative bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 hover:border-zinc-300 dark:hover:border-white/20 transition-all cursor-pointer active:scale-[0.98] shadow-xl hover:shadow-2xl overflow-hidden",children:[i.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[60px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-700"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl md:text-2xl font-bold text-zinc-900 dark:text-white tracking-tight",children:A.name}),i.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:[A.ingredients.length," ingrediente",A.ingredients.length!==1?"s":""]})]}),i.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:$=>{$.stopPropagation(),je(A.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),i.jsx("button",{onClick:$=>{$.stopPropagation(),ve(A.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("span",{className:"text-[9px] font-bold text-indigo-500 uppercase tracking-widest",children:"Custo Total"}),i.jsx("div",{className:"text-3xl md:text-4xl font-semibold text-zinc-900 dark:text-white tracking-tight tabular-nums mt-1",children:M(q.totalCost)})]}),i.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center text-xs text-zinc-400 dark:text-zinc-500 font-medium",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),"Ver detalhes"]}),i.jsx("div",{className:"px-2.5 py-1 rounded-full bg-zinc-100 dark:bg-white/5 border border-zinc-200/50 dark:border-white/5",children:i.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400",children:[A.ingredients.length," itens"]})})]})]})]},A.id)}),t.length===0&&i.jsxs("div",{className:"col-span-full text-center py-20 rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden relative",children:[i.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-20 h-20 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-6 shadow-inner",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma Pizza Cadastrada"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 text-sm font-medium",children:"Comece criando sua primeira receita"}),i.jsx("button",{onClick:()=>p(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-xl",children:"Criar Primeira Pizza"})]})]})]}),C&&i.jsxs("div",{className:"relative z-10 space-y-6 md:space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:()=>a(null),className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white tracking-tight",children:C.name}),i.jsxs("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mt-0.5 font-medium",children:[C.ingredients.length," ingrediente",C.ingredients.length!==1?"s":""," cadastrado",C.ingredients.length!==1?"s":""]})]})]}),i.jsx("div",{className:"relative group",children:i.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-12",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Recipe Cost Matrix"}),i.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Pricing"})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Custo Total da Receita"}),i.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:M(se.totalCost)})]})]}),i.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Ingredients"}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:C.ingredients.length}),i.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"itens"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Cost per Unit"}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:M(se.costPerPizza)}),i.jsx("span",{className:"text-xs font-medium text-indigo-500/60",children:"/pizza"})]})]})]})]})}),!c&&i.jsxs("button",{onClick:()=>u(!0),className:"w-full px-8 py-5 bg-white dark:bg-zinc-950 text-zinc-600 dark:text-zinc-400 rounded-[2rem] font-bold text-xs uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 border-2 border-dashed border-zinc-200 dark:border-zinc-700 transition-all active:scale-[0.99] flex items-center justify-center gap-3 group shadow-sm",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Ingrediente"]}),c&&i.jsxs("div",{className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-0 md:p-4",children:[i.jsx(Fh,{}),i.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm transition-opacity",onClick:()=>{u(!1),_({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),v(null)}}),i.jsxs("div",{className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 rounded-2xl md:rounded-[2rem] p-6 pb-32 md:p-8 shadow-2xl animate-slide-up max-h-[85vh] overflow-y-auto custom-scrollbar mx-4 md:mx-0",style:{marginTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)"},children:[i.jsx("div",{className:"md:hidden w-full flex justify-center mb-5",children:i.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Novo Ingrediente"}),i.jsx("button",{onClick:()=>{u(!1),_({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),v(null)},className:"p-2 -mr-2 rounded-full text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),i.jsxs("div",{className:"relative mb-5",children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome do Ingrediente"}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),i.jsx("input",{id:"cat-ing-name-input",type:"text",onKeyDown:A=>{var q;A.key==="Enter"&&(A.preventDefault(),(q=document.getElementById("cat-ing-qty-input"))==null||q.focus())},className:`w-full pl-12 pr-4 py-4 rounded-2xl text-base font-semibold transition-all ${T?"bg-emerald-50/50 dark:bg-emerald-900/10 border border-emerald-500/30 text-emerald-900 dark:text-emerald-100 shadow-[0_0_20px_rgba(16,185,129,0.1)]":"bg-zinc-50/50 dark:bg-black/20 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white shadow-inner focus:shadow-lg focus:bg-white dark:focus:bg-black/40"} focus:outline-none focus:ring-1 focus:ring-zinc-900/10 dark:focus:ring-white/10 placeholder:text-zinc-400`,placeholder:"Buscar no estoque...",value:j.name,onChange:A=>{const q=A.target.value;_($=>({...$,name:q})),T&&q!==T.name&&(v(null),_($=>({...$,pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}))),de(q)},autoFocus:!0}),T&&i.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-emerald-500",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})]}),j.name.length>0&&!T&&i.jsx("div",{className:"mt-2 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-100 dark:border-zinc-800 overflow-hidden max-h-[50vh] overflow-y-auto custom-scrollbar animate-fade-in pb-2",children:(()=>{const A=z.filter(q=>q.name.toLowerCase().includes(j.name.toLowerCase())).slice(0,6);return A.length===0&&j.name.length>1?i.jsxs("div",{className:"p-5 text-center",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 mb-3",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("p",{className:"text-sm font-medium text-zinc-600 dark:text-zinc-400",children:"Nenhum item encontrado"}),i.jsxs("p",{className:"text-xs text-zinc-400 dark:text-zinc-500 mt-1",children:['Adicione "',j.name,'" ao Estoque primeiro']})]}):A.map((q,$)=>i.jsxs("button",{onClick:()=>{v(q);const re=Oh(q),S=Pc[j.unit]||1,O=re*S;_(H=>({...H,name:q.name,pricePerUnit:O.toFixed(6),isSyncedFromInventory:!0,inventoryItemId:q.id}))},className:`w-full text-left px-5 py-4 flex items-center justify-between hover:bg-zinc-100 dark:hover:bg-zinc-700/50 transition-colors group ${$!==A.length-1?"border-b border-zinc-200/50 dark:border-zinc-700/50":""}`,children:[i.jsxs("div",{children:[i.jsx("span",{className:"font-semibold text-zinc-900 dark:text-white",children:q.name}),i.jsxs("span",{className:"text-xs text-zinc-400 dark:text-zinc-500 ml-2",children:[q.packageQuantity*q.packageCount," ",q.unit]})]}),i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},q.id))})()})]}),T&&i.jsx("div",{className:"mb-5 p-4 rounded-2xl bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-100 dark:border-emerald-800/50",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-emerald-100 dark:bg-emerald-800/50 flex items-center justify-center",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-bold text-emerald-800 dark:text-emerald-300 truncate",children:T.name}),i.jsxs("p",{className:"text-xs text-emerald-600 dark:text-emerald-400",children:["Estoque: ",T.packageQuantity*T.packageCount," ",T.unit,"  ",M(T.packageCount*T.pricePerUnit)]})]})]})}),!T&&i.jsxs("div",{className:"mb-5",children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),i.jsxs("select",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all appearance-none text-center",value:j.unit,onChange:A=>J(A.target.value),children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"un",children:"un"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Quantidade"}),i.jsx("input",{id:"cat-ing-qty-input",type:"number",onKeyDown:A=>{A.key==="Enter"&&(A.preventDefault(),oe(!0))},step:"any",inputMode:"decimal",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white text-right text-lg font-bold focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/20 transition-all",placeholder:"0",value:j.quantity,onChange:A=>_(q=>({...q,quantity:A.target.value}))})]}),T&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Unidade"}),i.jsx("div",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-100 dark:bg-zinc-800 border border-zinc-100 dark:border-zinc-700 text-zinc-400 dark:text-zinc-500 text-lg font-semibold text-center",children:j.unit})]})]}),T&&j.quantity&&i.jsxs("div",{className:"mb-6 p-5 rounded-2xl bg-zinc-900 dark:bg-white",children:[i.jsx("div",{className:"text-[10px] font-bold text-white/50 dark:text-zinc-900/50 uppercase tracking-widest mb-2",children:"Custo Calculado"}),i.jsxs("div",{className:"flex items-end justify-between",children:[i.jsxs("div",{className:"text-sm text-white/70 dark:text-zinc-600",children:[j.quantity," ",j.unit,"  ",I(j.pricePerUnit),"/",j.unit]}),i.jsx("div",{className:"text-3xl font-bold text-white dark:text-zinc-900 tabular-nums",children:M(Number(j.quantity)*Number(j.pricePerUnit))})]})]}),i.jsxs("div",{className:"flex gap-3 safe-area-bottom",children:[i.jsx("button",{onClick:()=>{u(!1),_({name:"",quantity:"",unit:"g",pricePerUnit:"",isSyncedFromInventory:!1,inventoryItemId:null}),v(null)},className:"flex-1 px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98]",children:"Cancelar"}),i.jsx("button",{onClick:oe,disabled:!j.name||!j.quantity,className:"flex-[2] px-6 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-white bg-zinc-900 dark:bg-white dark:text-zinc-900 shadow-lg shadow-zinc-900/20 hover:shadow-xl active:scale-[0.98] transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none",children:"Adicionar"})]})]})]}),C.ingredients.length>0&&i.jsxs("div",{className:"hidden md:block rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[i.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 border-b border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-white/[0.02]",children:[i.jsx("div",{className:"col-span-4 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest",children:"Ingrediente"}),i.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Qtd"}),i.jsx("div",{className:"col-span-1 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-center",children:"Un"}),i.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"UND"}),i.jsx("div",{className:"col-span-2 text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest text-right",children:"Custo"}),i.jsx("div",{className:"col-span-1"})]}),i.jsx("div",{className:"divide-y divide-zinc-100/50 dark:divide-white/5",children:C.ingredients.map(A=>i.jsx("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 items-center hover:bg-zinc-50/80 dark:hover:bg-white/[0.02] transition-colors duration-300 group",children:o===A.id?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-span-4",children:i.jsx("input",{id:`edit-ing-name-${A.id}`,autoFocus:!0,onKeyDown:q=>{var $;q.key==="Enter"&&(q.preventDefault(),($=document.getElementById(`edit-ing-qty-${A.id}`))==null||$.focus())},type:"text",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm font-medium focus:ring-2 focus:ring-indigo-500/20",value:A.name,onChange:q=>le(A.id,"name",q.target.value),onBlur:()=>{!A.name.trim()&&(!A.quantity||A.quantity===0)&&ke(A.id)}})}),i.jsx("div",{className:"col-span-2",children:i.jsx("input",{id:`edit-ing-qty-${A.id}`,onKeyDown:q=>{var $;q.key==="Enter"&&(q.preventDefault(),($=document.getElementById(`edit-ing-price-${A.id}`))==null||$.focus())},type:"number",step:"any",inputMode:"decimal",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:A.quantity,onChange:q=>le(A.id,"quantity",q.target.value),onBlur:()=>{!A.name.trim()&&(!A.quantity||A.quantity===0)&&ke(A.id)}})}),i.jsx("div",{className:"col-span-1",children:i.jsxs("select",{className:"w-full px-2 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-center font-medium focus:ring-2 focus:ring-indigo-500/20",value:A.unit,onChange:q=>le(A.id,"unit",q.target.value),children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"un",children:"un"})]})}),i.jsx("div",{className:"col-span-2",children:i.jsx("input",{id:`edit-ing-price-${A.id}`,onKeyDown:q=>{q.key==="Enter"&&(q.preventDefault(),l(null))},type:"number",step:"1",inputMode:"numeric",className:"w-full px-3 py-2 rounded-xl bg-zinc-100 dark:bg-zinc-900 border-none text-zinc-900 dark:text-white text-sm text-right font-medium focus:ring-2 focus:ring-indigo-500/20",value:A.pricePerUnit,onChange:q=>le(A.id,"pricePerUnit",q.target.value)})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:M(U(A))})}),i.jsxs("div",{className:"col-span-1 flex justify-end gap-1",children:[i.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 hover:bg-emerald-50 dark:hover:bg-emerald-900/30 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),i.jsx("button",{onClick:()=>ke(A.id),className:"p-2 rounded-xl text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"col-span-4",children:i.jsx("span",{className:"text-sm font-medium text-zinc-900 dark:text-white",children:A.name})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:A.quantity})}),i.jsx("div",{className:"col-span-1 text-center",children:i.jsx("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-500 bg-zinc-100 dark:bg-white/5 px-2.5 py-1 rounded-full",children:A.unit})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-sm text-zinc-600 dark:text-zinc-400 tabular-nums",children:Math.round(Number(A.pricePerUnit)||0)})}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white tabular-nums",children:M(U(A))})}),i.jsx("div",{className:"col-span-1 flex justify-end",children:i.jsx("button",{onClick:()=>l(A.id),className:"p-2 rounded-xl text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all opacity-0 group-hover:opacity-100",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]})},A.id))}),i.jsxs("div",{className:"grid grid-cols-12 gap-6 px-8 py-5 bg-zinc-900 dark:bg-white",children:[i.jsx("div",{className:"col-span-9 text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest text-right self-center",children:"Total da Receita"}),i.jsx("div",{className:"col-span-2 text-right",children:i.jsx("span",{className:"text-xl font-bold text-white dark:text-zinc-900 tabular-nums",children:M(se.totalCost)})}),i.jsx("div",{className:"col-span-1"})]})]}),C.ingredients.length>0&&i.jsxs("div",{className:"md:hidden space-y-4",children:[C.ingredients.map(A=>i.jsx("div",{className:`relative backdrop-blur-xl rounded-[1.5rem] p-5 border transition-all duration-500 ${o===A.id?"bg-white/90 dark:bg-zinc-900/90 border-indigo-500/20 shadow-[0_8px_30px_rgb(99,102,241,0.06)] scale-[1.01]":"bg-white/60 dark:bg-zinc-900/40 border-white/40 dark:border-white/5 shadow-[0_4px_20px_rgb(0,0,0,0.02)] hover:bg-white/80 dark:hover:bg-zinc-900/60"}`,children:o===A.id?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shadow-[0_0_8px_rgba(99,102,241,0.5)]"}),i.jsx("span",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-[0.2em]",children:"Editando"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>l(null),className:"p-2 rounded-xl text-emerald-600 dark:text-emerald-400 bg-emerald-50/50 dark:bg-emerald-500/10 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M5 13l4 4L19 7"})})}),i.jsx("button",{onClick:()=>ke(A.id),className:"p-2 rounded-xl text-red-500 bg-red-50/50 dark:bg-red-500/10 hover:bg-red-100 dark:hover:bg-red-500/20 transition-all active:scale-95",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Nome"}),i.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-700 dark:text-zinc-200 font-medium focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm placeholder:text-zinc-300",value:A.name,onChange:q=>le(A.id,"name",q.target.value),onBlur:()=>{!A.name.trim()&&(!A.quantity||A.quantity===0)&&ke(A.id)}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Qtd"}),i.jsx("input",{type:"number",step:"any",inputMode:"decimal",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:A.quantity,onChange:q=>le(A.id,"quantity",q.target.value),onBlur:()=>{!A.name.trim()&&(!A.quantity||A.quantity===0)&&ke(A.id)}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Unidade"}),i.jsxs("div",{className:"relative",children:[i.jsxs("select",{className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-600 dark:text-zinc-300 font-semibold text-center appearance-none focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all text-sm",value:A.unit,onChange:q=>le(A.id,"unit",q.target.value),children:[i.jsx("option",{value:"g",children:"g"}),i.jsx("option",{value:"kg",children:"kg"}),i.jsx("option",{value:"ml",children:"ml"}),i.jsx("option",{value:"L",children:"L"}),i.jsx("option",{value:"un",children:"un"})]}),i.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none opacity-40",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",viewBox:"0 0 20 20",fill:"currentColor",children:i.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[9px] font-bold text-zinc-400/80 dark:text-zinc-500 uppercase tracking-[0.2em] mb-1.5 ml-1",children:"Preo/Unidade"}),i.jsx("div",{className:"relative group",children:i.jsx("input",{type:"number",step:"1",inputMode:"numeric",className:"w-full px-4 py-3 rounded-xl bg-zinc-50/50 dark:bg-black/20 border border-zinc-100 dark:border-white/5 text-zinc-900 dark:text-white font-semibold text-lg text-right focus:outline-none focus:bg-white dark:focus:bg-black/40 focus:ring-1 focus:ring-indigo-500/30 transition-all",value:A.pricePerUnit,onChange:q=>le(A.id,"pricePerUnit",q.target.value)})})]})]}):i.jsxs("div",{onClick:()=>l(A.id),className:"group cursor-pointer",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-zinc-800 dark:text-zinc-100 text-[15px] mb-1 tracking-tight group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors",children:A.name}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded-md bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/5 text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums uppercase tracking-wide",children:[A.quantity," ",A.unit]}),i.jsxs("span",{className:"text-[10px] text-zinc-400/80 font-medium",children:["@ ",Math.round(Number(A.pricePerUnit)||0),"/",A.unit]})]})]}),i.jsx("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:i.jsx("button",{onClick:q=>{q.stopPropagation(),l(A.id)},className:"p-2 rounded-xl text-zinc-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-500/10 transition-all",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})})})]}),i.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-dashed border-zinc-100 dark:border-white/5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-300 dark:text-zinc-600 uppercase tracking-[0.25em]",children:"Custo"}),i.jsx("span",{className:"text-lg font-bold text-zinc-800 dark:text-zinc-200 tabular-nums tracking-tight",children:M(U(A))})]})]})},A.id)),i.jsx("div",{className:"bg-zinc-900 dark:bg-white rounded-[2rem] p-5 shadow-xl",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-[10px] font-bold text-white/60 dark:text-zinc-500 uppercase tracking-widest",children:"Total da Receita"}),i.jsx("span",{className:"text-2xl font-bold text-white dark:text-zinc-900 tabular-nums",children:M(se.totalCost)})]})})]}),C.ingredients.length===0&&!c&&i.jsxs("div",{className:"text-center py-16 rounded-[2.5rem] bg-white dark:bg-zinc-950 border-2 border-dashed border-zinc-200 dark:border-zinc-700 shadow-xl overflow-hidden relative",children:[i.jsx("div",{className:"absolute inset-0 bg-zinc-50/50 dark:bg-white/[0.01]"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-900 rounded-full flex items-center justify-center mb-5 shadow-inner",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum Ingrediente"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6 text-sm font-medium",children:"Comece adicionando ingredientes  receita"}),i.jsx("button",{onClick:()=>u(!0),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all shadow-lg",children:"Adicionar Primeiro Ingrediente"})]})]})]}),i.jsx(_e,{children:w&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[i.jsx(Fh,{}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:w.onCancel}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${w.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.type==="danger"?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:w.title}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:w.message}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:w.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:w.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${w.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),i.jsx(_e,{children:P&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[i.jsx(Fh,{}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:P.onCancel}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[i.jsx("div",{className:"w-14 h-14 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center mb-6 mx-auto text-zinc-600 dark:text-zinc-400",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:P.title}),i.jsx("input",{autoFocus:!0,defaultValue:P.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:P.placeholder,onKeyDown:A=>{A.key==="Enter"&&P.onConfirm(A.target.value)}}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:P.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:A=>{const q=A.target.closest(".relative").querySelector("input");P.onConfirm(q.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),i.jsx(_e,{children:R&&lt.createPortal(i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:R.message})]}),document.body)})]})}function Nr({label:t,value:e,onChange:n,unit:r="",type:s="number",placeholder:a="0",pattern:o,inputMode:l}){const c=Number(e)||0,u=r==="g"&&Math.abs(c)>=1e3,h=u?"kg":r,p=()=>u?Math.round(c/1e3).toString():Math.round(c).toString(),[m,y]=k.useState(""),[j,_]=k.useState(!1);k.useEffect(()=>{j||y(e==null?"":p())},[e,j,u]);const T=N=>{const P=N.target.value;y(P);const L=parseFloat(P)||0;n==null||n(L)},v=()=>_(!0),w=()=>{_(!1),e!=null&&y(p())};return i.jsxs("label",{className:"block",children:[i.jsx("div",{className:"label mb-1",children:t}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{className:"input text-right pr-8",type:s,inputMode:l||(s==="number"?"decimal":"text"),pattern:o,value:m,onChange:T,onFocus:v,onBlur:w,placeholder:a}),h&&i.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:h})]})]})}function ta({label:t,value:e,onChange:n,mode:r="pct",flourWeight:s=1e3,name:a,step:o=.1,decimals:l=1,maxPct:c=null}){const u=Math.max(s||0,1),h=b=>u*(Number(b)||0)/100,p=b=>(Number(b)||0)/u*100,m=h(e),y=r==="grams"&&Math.abs(m)>=1e3,j=r==="grams"?y?"kg":"g":"%",_=()=>{const b=Number(e)||0;if(r==="grams"){const g=h(b);return y?g/1e3:g<10?g:Math.round(g)}return b},[T,v]=k.useState(()=>{if(e===""||e===null||e===void 0)return"";const b=_();return y?b.toFixed(2):b.toString()}),[w,N]=k.useState(!1);k.useEffect(()=>{if(!w)if(e===""||e===null||e===void 0)v("");else{const b=_();if(r==="grams"){const g=h(Number(e)||0);v(y?b.toFixed(2):g<10?g.toFixed(2):Math.round(g).toString())}else v(Number(b).toFixed(l))}},[e,r,s,w,y]);const P=b=>{const g=b.target.value;if(v(g),g===""){n==null||n("");return}let z=parseFloat(g);if(!Number.isNaN(z)){z=Math.max(0,z),r==="pct"&&c!==null&&z>c&&(z=c,v(z.toString()));let C=z;r==="grams"&&y&&(C=z*1e3);const D=r==="grams"?p(C):z;n==null||n(D)}},L=()=>{N(!0)},R=()=>{if(N(!1),T===""||T===null){v("");return}const b=parseFloat(T);if(!Number.isNaN(b))if(r==="grams"){const g=h(Number(e)||0);v(y||g<10?b.toFixed(2):Math.round(b).toString())}else v(b.toFixed(l))};return i.jsxs("label",{className:"block",children:[i.jsx("div",{className:"label mb-1",children:t}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",name:a,step:r==="grams"?1:o,value:T,onChange:P,onFocus:L,onBlur:R,placeholder:"0"}),i.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:j})]})]})}function xD({value:t,onChange:e,data:n,onDataChange:r,inputMode:s="pct",flourWeight:a=1e3}){const o=["None","ADY","IDY","CY"];function l(c,u,h){r==null||r({...n,[c]:{...n[c],[u]:h}})}return i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"label",children:"Tipos de Fermentos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(c=>i.jsxs("label",{className:"button "+(t===c?"primary":""),children:[i.jsx("input",{type:"radio",className:"sr-only",name:"yeastType",value:c,checked:t===c,onChange:()=>e==null?void 0:e(c)}),c]},c))}),t==="ADY"&&i.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:i.jsx(ta,{label:"Active Dry Yeast",value:n.ADY.yeastPct,onChange:c=>l("ADY","yeastPct",c),mode:s,flourWeight:a,name:"ADY-yeast",decimals:3})}),t==="IDY"&&i.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:i.jsx(ta,{label:"Instant Dry Yeast",value:n.IDY.yeastPct,onChange:c=>l("IDY","yeastPct",c),mode:s,flourWeight:a,name:"IDY-yeast",decimals:3})}),t==="CY"&&i.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-5",children:i.jsx(ta,{label:"Compressed Yeast",value:n.CY.yeastPct,onChange:c=>l("CY","yeastPct",c),mode:s,flourWeight:a,name:"CY-yeast",decimals:3})}),t==="None"&&i.jsx("p",{className:"text-sm opacity-70",children:"Sem Fermento. Prosseguir apenas com o Pr-Fermento."})]})}function yD({value:t,onChange:e,data:n,onDataChange:r,inputMode:s="pct",flourWeight:a=1e3}){const o=["None","Poolish","Biga","Levain"];function l(m,y,j){r==null||r({...n,[m]:{...n[m],[y]:Number.isNaN(j)?"":j}})}const c=s==="grams"?"g":"%",u=m=>a*(Number(m==null?void 0:m.pct)||0)/100,h=(m,y=0,j="")=>{let _=Number(m);if(!Number.isFinite(_))return"";let T=j,v=y;j==="g"&&Math.abs(_)>=1e3&&(_=_/1e3,T="kg",v=2);const w=_.toLocaleString("pt-BR",{minimumFractionDigits:v,maximumFractionDigits:v});return T?`${w} ${T}`:w},p=m=>{const y=n[m];if(!y)return null;const j=u(y),_=j*(Number(y.hydration)||0)/100;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-5",children:[i.jsx(ta,{label:`Farinha Pref. (${c})`,value:y.pct,onChange:T=>l(m,"pct",T),mode:s,flourWeight:a,name:`${m}-pct`}),i.jsx(ta,{label:`gua (${c})`,value:y.hydration,onChange:T=>l(m,"hydration",Math.min(200,Math.max(0,T))),mode:s,flourWeight:j>0?j:a,name:`${m}-hydration`}),typeof y.yeastPct<"u"&&i.jsx(ta,{label:`Fermento (${c})`,value:y.yeastPct,onChange:T=>l(m,"yeastPct",T),mode:s,flourWeight:j>0?j:a,name:`${m}-yeast`,decimals:2}),typeof y.inoculationPct<"u"&&i.jsxs("label",{className:"block",children:[i.jsx("div",{className:"label mb-1",children:"Inoculao (%)"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"decimal",value:y.inoculationPct,onChange:T=>l(m,"inoculationPct",parseFloat(T.target.value)),step:1}),i.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"%"})]})]}),i.jsxs("label",{className:"block",children:[i.jsx("div",{className:"label mb-1",children:"Tempo"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.time_h,onChange:T=>l(m,"time_h",parseFloat(T.target.value))}),i.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"h"})]})]}),i.jsxs("label",{className:"block",children:[i.jsx("div",{className:"label mb-1",children:"Temp."}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{className:"input text-right pr-8",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:y.temp_C,onChange:T=>l(m,"temp_C",parseFloat(T.target.value))}),i.jsx("span",{className:"pointer-events-none absolute inset-y-0 right-3 grid place-items-center text-sm text-gray-500 dark:text-gray-400 font-medium",children:"C"})]})]})]}),s==="grams"&&i.jsxs("div",{className:"rounded-lg bg-gray-100 dark:bg-zinc-800 p-3",children:[i.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400 font-medium mb-2",children:"Resumo do Pr-fermento:"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Farinha:"}),i.jsx("span",{className:"ml-2 font-semibold",children:h(j,0,"g")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"gua:"}),i.jsx("span",{className:"ml-2 font-semibold",children:h(_,0,"g")})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Total:"}),i.jsx("span",{className:"ml-2 font-semibold",children:h(j+_,0,"g")})]})]})]})]})};return i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"label",children:"Tipo de Fermentao"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.map(m=>i.jsxs("label",{className:"button "+(t===m?"primary":""),children:[i.jsx("input",{type:"radio",className:"sr-only",name:"prefermentType",value:m,checked:t===m,onChange:()=>e==null?void 0:e(m)}),m]},m))}),t==="Poolish"&&p("poolish"),t==="Biga"&&p("biga"),t==="Levain"&&p("levain"),t==="None"&&i.jsx("p",{className:"text-sm opacity-70",children:"Sem pr-fermento. Prosseguir com fermentao direta."})]})}function vD(){try{const t=localStorage.getItem("padoca_recipes_v1")||"{}";return JSON.parse(t)}catch{return{}}}function Za(t){localStorage.setItem("padoca_recipes_v1",JSON.stringify(t))}function bD({inputMode:t,setInputMode:e}){const[n,r]=k.useState({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:300,yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},yeastSelection:"IDY",prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}}),[s,a]=k.useState({}),o=k.useRef(null),[l,c]=k.useState("synced"),[u,h]=k.useState(null),[p,m]=k.useState(null),[y,j]=k.useState(null),_=k.useRef(null),T=k.useCallback((S,O="success")=>{_.current&&clearTimeout(_.current),j({message:S,type:O}),_.current=setTimeout(()=>j(null),3500)},[]),[v,w]=k.useState({flour:1736,water:1215,sugar:0,salt:43,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeast:2});k.useEffect(()=>{(async()=>{const O=vD();a(O);try{const H=await $e.getAllRecipes();if(Object.keys(H).length>0){const Z={...O,...H};a(Z),Za(Z)}}catch{console.warn("Cloud load failed, using local cache.")}})()},[]);function N(S,O){r(H=>({...H,[S]:typeof O=="number"&&Number.isNaN(O)?"":O}))}function P(S){r(O=>({...O,preferment:S}))}function L(S){r(O=>({...O,yeastType:S}))}function R(S,O){t==="grams"?w(H=>({...H,[S]:Number(O)||0})):N(S,O)}function b(S){w(O=>({...O,flour:Number(S)||0}))}const g=k.useMemo(()=>{var Z;const S=me=>Number(me)||0,O=((Z=n.yeastType)==null?void 0:Z[n.yeastSelection])||{},H=S(O.yeastPct);return 100+S(n.water)+S(n.sugar)+S(n.salt)+S(n.oliveOil)+S(n.oil)+S(n.milk)+S(n.butter)+S(n.diastatic)+H},[n.water,n.sugar,n.salt,n.oliveOil,n.oil,n.milk,n.butter,n.diastatic,n.yeastType,n.yeastSelection]),z=k.useMemo(()=>{const S=Number(n.doughBalls)||0,O=Number(n.ballWeight)||0;return S*O},[n.doughBalls,n.ballWeight]),C=k.useMemo(()=>{const S=Number(z)||0,O=Number(g)||100;return O<=0?0:S*100/O},[z,g]),D=k.useMemo(()=>{var me;const S=C,O=pe=>S*(Number(pe)||0)/100,H=((me=n.yeastType)==null?void 0:me[n.yeastSelection])||{},Z=Number(H.yeastPct)||0;return{flour:S,water:O(n.water),sugar:O(n.sugar),salt:O(n.salt),oliveOil:O(n.oliveOil),oil:O(n.oil),milk:O(n.milk),butter:O(n.butter),diastatic:O(n.diastatic),yeast:S*Z/100,total:S+O(n.water)+O(n.sugar)+O(n.salt)+O(n.oliveOil)+O(n.oil)+O(n.milk)+O(n.butter)+O(n.diastatic)+S*Z/100}},[C,n]),M=k.useMemo(()=>{if(t==="grams"){const S=(Number(v.flour)||0)+(Number(v.water)||0)+(Number(v.sugar)||0)+(Number(v.salt)||0)+(Number(v.oliveOil)||0)+(Number(v.oil)||0)+(Number(v.milk)||0)+(Number(v.butter)||0)+(Number(v.diastatic)||0)+(Number(v.yeast)||0);return{flour:v.flour,water:v.water,sugar:v.sugar,salt:v.salt,oliveOil:v.oliveOil,oil:v.oil,milk:v.milk,butter:v.butter,diastatic:v.diastatic,yeast:v.yeast,total:S}}return D},[t,v,D]),I=k.useMemo(()=>{const S=Number(M.flour)||0;if(S<=0)return 0;const O=Number(M.water)||0,H=Number(M.milk)||0;return(O+H)/S*100},[M.flour,M.water,M.milk]),xe=String(n.prefermentType||"").toLowerCase(),ve=n.preferment&&n.preferment[xe]?n.preferment[xe]:null,je=ve?C*(Number(ve.pct)||0)/100:0,de=je*(Number(ve==null?void 0:ve.hydration)||0)/100,J=je+de;function oe(){m({title:"Salvar Receita",placeholder:"Nome da receita",defaultValue:"",onConfirm:S=>{if(!S)return;const O={...s,[S]:n};a(O),Za(O),$e.saveRecipe(S,n).then(H=>{H&&c("synced")}),m(null)},onCancel:()=>m(null)})}function le(S){const O=s[S];O&&r(O)}function ke(S){h({title:"Excluir Receita",message:`A receita "${S}" ser excluda permanentemente.`,type:"danger",onConfirm:()=>{const O={...s};delete O[S],a(O),Za(O),$e.deleteRecipe(S),h(null)},onCancel:()=>h(null)})}function U(S){m({title:"Renomear Receita",placeholder:"Novo nome",defaultValue:S,onConfirm:O=>{if(!O||O===S)return;const H={...s};H[O]=H[S];const Z=H[S];delete H[S],a(H),Za(H),$e.deleteRecipe(S),$e.saveRecipe(O,Z),m(null)},onCancel:()=>m(null)})}function se(){const S=JSON.stringify({inputs:n,recipes:s},null,2),O=new Blob([S],{type:"application/json"}),H=URL.createObjectURL(O),Z=document.createElement("a");Z.href=H,Z.download="padoca_pizza_recipes.json",Z.click(),URL.revokeObjectURL(H)}function A(S){var Z;const O=(Z=S.target.files)==null?void 0:Z[0];if(!O)return;const H=new FileReader;H.onload=me=>{try{const pe=JSON.parse(String(me.target.result||"{}"));pe.inputs&&r(pe.inputs),pe.recipes&&(a(pe.recipes),Za(pe.recipes)),T("Importao concluda!","success")}catch{T("Arquivo invlido.","error")}},H.readAsText(O),S.target.value=""}function q(){r({flour:100,water:70,sugar:0,salt:2.5,oliveOil:0,oil:0,milk:0,butter:0,diastatic:0,yeastSelection:"IDY",yeastType:{ADY:{yeastPct:.04},IDY:{yeastPct:.12},CY:{yeastPct:.05}},RT_h:6,RT_C:21,CT_h:48,CT_C:4,doughBalls:10,ballWeight:350,prefermentType:"None",preferment:{poolish:{pct:30,hydration:70,yeastPct:.05,time_h:12,temp_C:22},biga:{pct:30,hydration:50,yeastPct:.05,time_h:16,temp_C:18},levain:{pct:20,hydration:100,inoculationPct:20,time_h:12,temp_C:24}}})}function $(S,O=0,H=""){let Z=Number(S);if(!Number.isFinite(Z))return"";let me=H,pe=O;H==="g"&&Math.abs(Z)>=1e3&&(Z=Z/1e3,me="kg",pe=2);const we=Z.toLocaleString("pt-BR",{minimumFractionDigits:pe,maximumFractionDigits:pe});return me?`${we} ${me}`:we}function re(S){return(Number(S)||0)>.001}return i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),i.jsx("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produo"}),i.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[i.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Active"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Calculadora de massa premium"})]})}),i.jsx("div",{className:"relative group",children:i.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-indigo-500/[0.03] dark:bg-indigo-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-12",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-indigo-300/60 uppercase tracking-widest cursor-text hover:text-indigo-600 dark:hover:text-indigo-400 transition-colors",children:"Production Matrix"}),i.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Calculated"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Calc"})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-[9px] font-bold text-indigo-500/60 uppercase tracking-widest ml-1",children:"Massa Preparada"}),i.jsx("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:$(M.total,0,"g")})]})]}),i.jsxs("div",{className:"relative grid grid-cols-2 sm:grid-cols-4 gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Quantidade"}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.doughBalls}),i.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"un"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Peso/Unidade"}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:n.ballWeight}),i.jsx("span",{className:"text-xs font-medium text-zinc-400",children:"g"})]})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-widest",children:"Peso Esperado"}),i.jsx("div",{className:"flex items-baseline gap-1",children:i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-indigo-600 dark:text-indigo-400 tracking-tight tabular-nums",children:$(z,0,"g")})})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Diferena"}),i.jsx("div",{className:"flex items-baseline gap-1",children:i.jsx("span",{className:`text-2xl md:text-3xl font-semibold tracking-tight tabular-nums ${Math.abs((Number(M.total)||0)-(Number(z)||0))<10?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"}`,children:$((Number(M.total)||0)-(Number(z)||0),1,"g")})})]})]})]})}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Porcionamento"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Dough Balls"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",step:"1",value:n.doughBalls,onChange:S=>{const O=parseFloat(S.target.value);N("doughBalls",Math.round(O))}})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Ball Weight (g)"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"decimal",value:n.ballWeight,onChange:S=>{const O=parseFloat(S.target.value);if(t==="grams"){const Z=C*g/100;let me=O>0?Math.round(Z/O):1;me<1&&(me=1);const pe=Math.round(Z/me);r(we=>({...we,ballWeight:pe,doughBalls:me}))}else N("ballWeight",Math.round(O))}})]})]})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Fermentao"}),i.jsx(yD,{value:n.prefermentType,onChange:S=>N("prefermentType",S),data:n.preferment,onDataChange:P,inputMode:t,flourWeight:C})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Ingredientes"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-4",children:[t==="grams"&&i.jsx(Nr,{label:"Farinha Total",value:v.flour,onChange:b,unit:"g"}),i.jsx(Nr,{label:"gua",value:t==="grams"?v.water:n.water,onChange:S=>R("water",S),unit:t==="grams"?"g":"%"}),i.jsx(Nr,{label:"Sal",value:t==="grams"?v.salt:n.salt,onChange:S=>R("salt",S),unit:t==="grams"?"g":"%"}),i.jsx(Nr,{label:"Azeite",value:t==="grams"?v.oliveOil:n.oliveOil,onChange:S=>R("oliveOil",S),unit:t==="grams"?"g":"%"}),i.jsx(Nr,{label:"Acar",value:t==="grams"?v.sugar:n.sugar,onChange:S=>R("sugar",S),unit:t==="grams"?"g":"%"}),i.jsx(Nr,{label:"leo",value:t==="grams"?v.oil:n.oil,onChange:S=>R("oil",S),unit:t==="grams"?"g":"%"}),i.jsx(Nr,{label:"Leite",value:t==="grams"?v.milk:n.milk,onChange:S=>R("milk",S),unit:t==="grams"?"g":"%"}),i.jsx(Nr,{label:"Manteiga",value:t==="grams"?v.butter:n.butter,onChange:S=>R("butter",S),unit:t==="grams"?"g":"%"}),i.jsx(Nr,{label:"Malte",value:t==="grams"?v.diastatic:n.diastatic,onChange:S=>R("diastatic",S),unit:t==="grams"?"g":"%"})]})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Agente Biolgico"}),i.jsx(xD,{value:n.yeastSelection,onChange:S=>N("yeastSelection",S),data:n.yeastType,onDataChange:L,inputMode:t,flourWeight:C})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Maturao"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_h,onChange:S=>N("RT_h",parseFloat(S.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.RT_C,onChange:S=>N("RT_C",parseFloat(S.target.value))})]})]})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Cold Fermentation"}),i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Tempo (h)"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_h,onChange:S=>N("CT_h",parseFloat(S.target.value))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Temperatura (C)"}),i.jsx("input",{className:"w-full px-4 py-3.5 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-zinc-700 text-zinc-900 dark:text-white text-right font-medium focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white focus:border-transparent transition-all",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:n.CT_C,onChange:S=>N("CT_C",parseFloat(S.target.value))})]})]})]}),n.prefermentType!=="None"&&ve&&i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:n.prefermentType}),i.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-[11px] text-zinc-500 dark:text-zinc-400 font-medium mb-1",children:"% Farinha"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums",children:$(ve.pct,1,"%")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha (g)"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(je,0,"g")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua (g)"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(de,0,"g")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Massa Total (g)"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(J,0,"g")})]})]}),(typeof ve.yeastPct<"u"||typeof ve.inoculationPct<"u"||typeof ve.time_h<"u"||typeof ve.temp_C<"u")&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[typeof ve.yeastPct<"u"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento (g)"}),i.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(je*(Number(ve.yeastPct)||0)/100,2,"g")})]}),typeof ve.inoculationPct<"u"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"% Farinha (Inoc.)"}),i.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(ve.inoculationPct,1,"%")})]}),typeof ve.time_h<"u"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Tempo (h)"}),i.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(ve.time_h,0,"h")})]}),typeof ve.temp_C<"u"&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Temperatura (C)"}),i.jsx("div",{className:"text-sm font-semibold text-zinc-900 dark:text-zinc-100",children:$(ve.temp_C,0,"C")})]})]})]})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Massa Final"}),i.jsxs("div",{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 p-5 border border-zinc-100 dark:border-zinc-700/50",children:[i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-4",children:[re(M.flour)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Farinha"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.flour-je,0,"g")})]}),re(M.water)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"gua"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.water-de,0,"g")})]}),n.prefermentType!=="None"&&ve&&i.jsxs("div",{children:[i.jsxs("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:["Pr-fermento (",n.prefermentType,")"]}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(J,0,"g")})]}),re(M.salt)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Sal"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.salt,1,"g")})]}),re(M.sugar)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Acar"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.sugar,1,"g")})]}),re(M.oliveOil)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Azeite"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.oliveOil,1,"g")})]}),re(M.oil)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"leo"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.oil,1,"g")})]}),re(M.milk)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Leite"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.milk,1,"g")})]}),re(M.butter)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Manteiga"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.butter,1,"g")})]}),re(M.diastatic)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Malte"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.diastatic,1,"g")})]}),re(M.yeast)&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Fermento"}),i.jsx("div",{className:"text-lg font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.yeast,2,"g")})]})]}),i.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-zinc-700 grid grid-cols-2 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Total da Massa"}),i.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:$(M.total,0,"g")})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-zinc-600 dark:text-zinc-400 font-medium mb-1",children:"Hidratao"}),i.jsx("div",{className:"text-xl font-semibold text-zinc-900 dark:text-zinc-100",children:$(I,1,"%")})]})]})]})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-indigo-500 uppercase tracking-widest mb-6",children:"Controle de Sistema"}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[i.jsx("button",{onClick:oe,className:"px-6 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all col-span-2 sm:col-span-1 shadow-lg",children:"Salvar"}),i.jsx("button",{onClick:()=>{var S;return(S=o.current)==null?void 0:S.click()},className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Importar"}),i.jsx("button",{onClick:se,className:"px-6 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Exportar"}),i.jsx("button",{onClick:q,className:"px-6 py-4 bg-red-50 dark:bg-red-500/10 text-red-500 dark:text-red-400 rounded-2xl font-bold text-xs uppercase tracking-widest hover:bg-red-100 dark:hover:bg-red-500/20 active:scale-[0.98] transition-all border border-red-100 dark:border-red-500/20",children:"Limpar"})]}),i.jsx("input",{ref:o,type:"file",accept:"application/json",className:"hidden",onChange:A})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] p-6 md:p-8 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Receitas Salvas"}),Object.keys(s).length===0?i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"w-16 h-16 mx-auto bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mb-4",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})}),i.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum protocolo registrado."})]}):i.jsx("ul",{className:"space-y-3",children:Object.entries(s).map(([S])=>i.jsxs("li",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 p-5 md:p-4 bg-zinc-50 dark:bg-white/5 rounded-2xl border border-transparent hover:border-zinc-100 dark:hover:border-white/10 transition-all",children:[i.jsx("div",{className:"font-bold text-zinc-800 dark:text-zinc-100 tracking-tight",children:S}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>le(S),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:scale-[1.02] active:scale-[0.98] transition-all",children:"Carregar"}),i.jsx("button",{onClick:()=>U(S),className:"flex-1 sm:flex-none px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-xl font-bold text-[10px] uppercase tracking-widest hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-[0.98] transition-all",children:"Renomear"}),i.jsx("button",{onClick:()=>ke(S),className:"flex-none p-2.5 text-zinc-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 rounded-xl transition-colors",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},S))})]}),i.jsx(_e,{children:u&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[i.jsx(Qb,{}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:u.onCancel}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${u.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:u.type==="danger"?i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}):i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:u.title}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-8 leading-relaxed text-center font-medium",children:u.message}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:u.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:u.onConfirm,className:`flex-1 py-3.5 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all ${u.type==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}),i.jsx(_e,{children:p&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[i.jsx(Qb,{}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:p.onCancel}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 text-center tracking-tight",children:p.title}),i.jsx("input",{autoFocus:!0,defaultValue:p.defaultValue,className:"w-full px-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-black/20 border border-zinc-200 dark:border-white/10 text-zinc-900 dark:text-white mb-8 focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white text-center font-medium placeholder:text-zinc-400",placeholder:p.placeholder,onKeyDown:S=>{S.key==="Enter"&&p.onConfirm(S.target.value)}}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:p.onCancel,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:S=>{const O=S.target.closest(".relative").querySelector("input");p.onConfirm(O.value)},className:"flex-1 py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg active:scale-95 transition-all",children:"Salvar"})]})]})]})}),i.jsx(_e,{children:y&&lt.createPortal(i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${y.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":y.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${y.type==="error"?"bg-white animate-pulse":y.type==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:y.message})]}),document.body)})]})}function Qb(){return mn(!0),null}const wD=10*1024*1024,kD=15e3,jD=(t,e=1200,n=.8)=>new Promise((r,s)=>{if(!t||typeof t!="string"){s(new Error("Invalid image data provided"));return}if(t.length*3/4>wD){s(new Error("Imagem muito grande. Use uma foto menor que 10MB."));return}const o=setTimeout(()=>{s(new Error("Tempo esgotado ao processar imagem. Tente novamente."))},kD),l=new Image;l.onload=()=>{clearTimeout(o);try{const c=document.createElement("canvas");let u=l.width,h=l.height;u>e&&(h=e/u*h,u=e),c.width=u,c.height=h;const p=c.getContext("2d");if(!p){s(new Error("Falha ao criar contexto de imagem."));return}p.drawImage(l,0,0,u,h);const m=c.toDataURL("image/jpeg",n);if(!m||m==="data:,"){s(new Error("Falha ao comprimir imagem."));return}r(m)}catch(c){s(new Error("Erro ao processar imagem: "+c.message))}},l.onerror=()=>{clearTimeout(o),s(new Error("Falha ao carregar imagem. Verifique se o arquivo  vlido."))},l.src=t});var Em=function(t,e){return Em=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},Em(t,e)};function ND(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Em(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Rt=function(){return Rt=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Rt.apply(this,arguments)};var Yb=!1,qi,Sm,Tm,Rc,Dc,EN,Mc,Im,Am,Pm,SN,Rm,Dm,TN,IN;function fn(){if(!Yb){Yb=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),n=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(Rm=/\b(iPhone|iP[ao]d)/.exec(t),Dm=/\b(iP[ao]d)/.exec(t),Pm=/Android/i.exec(t),TN=/FBAN\/\w+;/i.exec(t),IN=/Mobile/i.exec(t),SN=!!/Win64/.exec(t),e){qi=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,qi&&document&&document.documentMode&&(qi=document.documentMode);var r=/(?:Trident\/(\d+.\d+))/.exec(t);EN=r?parseFloat(r[1])+4:qi,Sm=e[2]?parseFloat(e[2]):NaN,Tm=e[3]?parseFloat(e[3]):NaN,Rc=e[4]?parseFloat(e[4]):NaN,Rc?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),Dc=e&&e[1]?parseFloat(e[1]):NaN):Dc=NaN}else qi=Sm=Tm=Dc=Rc=NaN;if(n){if(n[1]){var s=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);Mc=s?parseFloat(s[1].replace("_",".")):!0}else Mc=!1;Im=!!n[2],Am=!!n[3]}else Mc=Im=Am=!1}}var Mm={ie:function(){return fn()||qi},ieCompatibilityMode:function(){return fn()||EN>qi},ie64:function(){return Mm.ie()&&SN},firefox:function(){return fn()||Sm},opera:function(){return fn()||Tm},webkit:function(){return fn()||Rc},safari:function(){return Mm.webkit()},chrome:function(){return fn()||Dc},windows:function(){return fn()||Im},osx:function(){return fn()||Mc},linux:function(){return fn()||Am},iphone:function(){return fn()||Rm},mobile:function(){return fn()||Rm||Dm||Pm||IN},nativeApp:function(){return fn()||TN},android:function(){return fn()||Pm},ipad:function(){return fn()||Dm}},zD=Mm,_D=!!(typeof window<"u"&&window.document&&window.document.createElement),CD={canUseDOM:_D},ED=CD,AN=ED,PN;AN.canUseDOM&&(PN=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function SD(t,e){if(!AN.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,r=n in document;if(!r){var s=document.createElement("div");s.setAttribute(n,"return;"),r=typeof s[n]=="function"}return!r&&PN&&t==="wheel"&&(r=document.implementation.hasFeature("Events.wheel","3.0")),r}var TD=SD,ID=zD,AD=TD,Xb=10,Jb=40,Zb=800;function RN(t){var e=0,n=0,r=0,s=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*Xb,s=n*Xb,"deltaY"in t&&(s=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||s)&&t.deltaMode&&(t.deltaMode==1?(r*=Jb,s*=Jb):(r*=Zb,s*=Zb)),r&&!e&&(e=r<1?-1:1),s&&!n&&(n=s<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:s}}RN.getEventType=function(){return ID.firefox()?"DOMMouseScroll":AD("wheel")?"wheel":"mousewheel"};var PD=RN,RD=PD;const DD=u1(RD);function MD(t,e,n,r,s,a){a===void 0&&(a=0);var o=ga(t,e,a),l=o.width,c=o.height,u=Math.min(l,n),h=Math.min(c,r);return u>h*s?{width:h*s,height:h}:{width:u,height:u/s}}function LD(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function eo(t,e,n,r,s){s===void 0&&(s=0);var a=ga(e.width,e.height,s),o=a.width,l=a.height;return{x:e1(t.x,o,n.width,r),y:e1(t.y,l,n.height,r)}}function e1(t,e,n,r){var s=e*r/2-n/2;return vu(t,-s,s)}function t1(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function n1(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function VD(t,e,n,r,s,a,o){a===void 0&&(a=0),o===void 0&&(o=!0);var l=o?OD:FD,c=ga(e.width,e.height,a),u=ga(e.naturalWidth,e.naturalHeight,a),h={x:l(100,((c.width-n.width/s)/2-t.x/s)/c.width*100),y:l(100,((c.height-n.height/s)/2-t.y/s)/c.height*100),width:l(100,n.width/c.width*100/s),height:l(100,n.height/c.height*100/s)},p=Math.round(l(u.width,h.width*u.width/100)),m=Math.round(l(u.height,h.height*u.height/100)),y=u.width>=u.height*r,j=y?{width:Math.round(m*r),height:m}:{width:p,height:Math.round(p/r)},_=Rt(Rt({},j),{x:Math.round(l(u.width-j.width,h.x*u.width/100)),y:Math.round(l(u.height-j.height,h.y*u.height/100))});return{croppedAreaPercentages:h,croppedAreaPixels:_}}function OD(t,e){return Math.min(t,Math.max(0,e))}function FD(t,e){return e}function BD(t,e,n,r,s,a){var o=ga(e.width,e.height,n),l=vu(r.width/o.width*(100/t.width),s,a),c={x:l*o.width/2-r.width/2-o.width*l*(t.x/100),y:l*o.height/2-r.height/2-o.height*l*(t.y/100)};return{crop:c,zoom:l}}function UD(t,e,n){var r=LD(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function $D(t,e,n,r,s,a){n===void 0&&(n=0);var o=ga(e.naturalWidth,e.naturalHeight,n),l=vu(UD(t,e,r),s,a),c=r.height>r.width?r.height/t.height:r.width/t.width,u={x:((o.width-t.width)/2-t.x)*c,y:((o.height-t.height)/2-t.y)*c};return{crop:u,zoom:l}}function r1(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function qD(t){return t*Math.PI/180}function ga(t,e,n){var r=qD(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function vu(t,e,n){return Math.min(Math.max(t,e),n)}function cc(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var WD=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,HD=1,GD=3,KD=1,QD=function(t){ND(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=k.createRef(),n.imageRef=k.createRef(),n.videoRef=k.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(s){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var s=BD(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),a=s.crop,o=s.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(o)}else if(n.props.initialCroppedAreaPixels){var l=$D(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),a=l.crop,o=l.zoom;n.props.onCropChange(a),n.props.onZoomChange&&n.props.onZoomChange(o)}},n.computeSizes=function(){var r,s,a,o,l,c,u=n.imageRef.current||n.videoRef.current;if(u&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var h=n.containerRect.width/n.containerRect.height,p=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((s=n.videoRef.current)===null||s===void 0?void 0:s.videoWidth)||0,m=((a=n.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((o=n.videoRef.current)===null||o===void 0?void 0:o.videoHeight)||0,y=u.offsetWidth<p||u.offsetHeight<m,j=p/m,_=void 0;if(y)switch(n.state.mediaObjectFit){default:case"contain":_=h>j?{width:n.containerRect.height*j,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/j};break;case"horizontal-cover":_={width:n.containerRect.width,height:n.containerRect.width/j};break;case"vertical-cover":_={width:n.containerRect.height*j,height:n.containerRect.height};break}else _={width:u.offsetWidth,height:u.offsetHeight};n.mediaSize=Rt(Rt({},_),{naturalWidth:p,naturalHeight:m}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var T=n.props.cropSize?n.props.cropSize:MD(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((l=n.state.cropSize)===null||l===void 0?void 0:l.height)!==T.height||((c=n.state.cropSize)===null||c===void 0?void 0:c.width)!==T.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(T),n.setState({cropSize:T},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(T),T}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var s=e.getMousePoint(r),a=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(a,s,{shouldUpdatePosition:!0}),n.props.onRotationChange){var o=n.gestureRotationStart+r.rotation;n.props.onRotationChange(o)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var s,a,o=r.x,l=r.y;n.dragStartPosition={x:o,y:l},n.dragStartCrop=Rt({},n.props.crop),(a=(s=n.props).onInteractionStart)===null||a===void 0||a.call(s)},n.onDrag=function(r){var s=r.x,a=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(s===void 0||a===void 0)){var o=s-n.dragStartPosition.x,l=a-n.dragStartPosition.y,c={x:n.dragStartCrop.x+o,y:n.dragStartCrop.y+l},u=n.props.restrictPosition?eo(c,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):c;n.props.onCropChange(u)}}))},n.onDragStopped=function(){var r,s;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(s=(r=n.props).onInteractionEnd)===null||s===void 0||s.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var s=e.getMousePoint(r),a=DD(r).pixelY,o=n.props.zoom-a*n.props.zoomSpeed/200;n.setNewZoom(o,s,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var l,c;return(c=(l=n.props).onInteractionStart)===null||c===void 0?void 0:c.call(l)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var l,c;return(c=(l=n.props).onInteractionEnd)===null||c===void 0?void 0:c.call(l)})},250)}},n.getPointOnContainer=function(r,s){var a=r.x,o=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(a-s.x),y:n.containerRect.height/2-(o-s.y)}},n.getPointOnMedia=function(r){var s=r.x,a=r.y,o=n.props,l=o.crop,c=o.zoom;return{x:(s+l.x)/c,y:(a+l.y)/c}},n.setNewZoom=function(r,s,a){var o=a===void 0?{}:a,l=o.shouldUpdatePosition,c=l===void 0?!0:l;if(!(!n.state.cropSize||!n.props.onZoomChange)){var u=vu(r,n.props.minZoom,n.props.maxZoom);if(c){var h=n.getPointOnContainer(s,n.containerPosition),p=n.getPointOnMedia(h),m={x:p.x*u-h.x,y:p.y*u-h.y},y=n.props.restrictPosition?eo(m,n.mediaSize,n.state.cropSize,u,n.props.rotation):m;n.props.onCropChange(y)}n.props.onZoomChange(u)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?eo(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return VD(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var s=r.croppedAreaPercentages,a=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(s,a),n.props.onCropAreaChange&&n.props.onCropAreaChange(s,a)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var s=r.croppedAreaPercentages,a=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(s,a)}},n.recomputeCropPosition=function(){var r,s;if(n.state.cropSize){var a=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((s=n.previousCropSize)===null||s===void 0)&&s.height)){var o=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(o){var l=n.state.cropSize.width/n.previousCropSize.width,c=n.state.cropSize.height/n.previousCropSize.height;a={x:n.props.crop.x*l,y:n.props.crop.y*c}}}var u=n.props.restrictPosition?eo(a,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):a;n.previousCropSize=n.state.cropSize,n.props.onCropChange(u),n.emitCropData()}},n.onKeyDown=function(r){var s,a,o=n.props,l=o.crop,c=o.onCropChange,u=o.keyboardStep,h=o.zoom,p=o.rotation,m=u;if(n.state.cropSize){r.shiftKey&&(m*=.2);var y=Rt({},l);switch(r.key){case"ArrowUp":y.y-=m,r.preventDefault();break;case"ArrowDown":y.y+=m,r.preventDefault();break;case"ArrowLeft":y.x-=m,r.preventDefault();break;case"ArrowRight":y.x+=m,r.preventDefault();break;default:return}n.props.restrictPosition&&(y=eo(y,n.mediaSize,n.state.cropSize,h,p)),r.repeat||(a=(s=n.props).onInteractionStart)===null||a===void 0||a.call(s),c(y)}},n.onKeyUp=function(r){var s,a;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(a=(s=n.props).onInteractionEnd)===null||a===void 0||a.call(s)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=WD,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,s,a,o,l,c,u,h,p;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((s=this.props.cropSize)===null||s===void 0?void 0:s.height)||((a=n.cropSize)===null||a===void 0?void 0:a.width)!==((o=this.props.cropSize)===null||o===void 0?void 0:o.width)?this.computeSizes():(((l=n.crop)===null||l===void 0?void 0:l.x)!==((c=this.props.crop)===null||c===void 0?void 0:c.x)||((u=n.crop)===null||u===void 0?void 0:u.y)!==((h=this.props.crop)===null||h===void 0?void 0:h.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((p=this.videoRef.current)===null||p===void 0||p.load());var m=this.getObjectFit();m!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:m},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,s=n.aspect;return r?r.width/r.height:s},e.prototype.getObjectFit=function(){var n,r,s,a;if(this.props.objectFit==="cover"){var o=this.imageRef.current||this.videoRef.current;if(o&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var l=this.containerRect.width/this.containerRect.height,c=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,u=((s=this.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((a=this.videoRef.current)===null||a===void 0?void 0:a.videoHeight)||0,h=c/u;return h<l?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=t1(r,s),this.lastPinchRotation=n1(r,s),this.onDragStart(r1(r,s))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var s=e.getTouchPoint(n.touches[0]),a=e.getTouchPoint(n.touches[1]),o=r1(s,a);this.onDrag(o),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var l=t1(s,a),c=r.props.zoom*(l/r.lastPinchDistance);r.setNewZoom(c,o,{shouldUpdatePosition:!1}),r.lastPinchDistance=l;var u=n1(s,a),h=r.props.rotation+(u-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(h),r.lastPinchRotation=u})}},e.prototype.render=function(){var n=this,r,s=this.props,a=s.image,o=s.video,l=s.mediaProps,c=s.cropperProps,u=s.transform,h=s.crop,p=h.x,m=h.y,y=s.rotation,j=s.zoom,_=s.cropShape,T=s.showGrid,v=s.roundCropAreaPixels,w=s.style,N=w.containerStyle,P=w.cropAreaStyle,L=w.mediaStyle,R=s.classes,b=R.containerClassName,g=R.cropAreaClassName,z=R.mediaClassName,C=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return k.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(M){return n.containerRef=M},"data-testid":"container",style:N,className:cc("reactEasyCrop_Container",b)},a?k.createElement("img",Rt({alt:"",className:cc("reactEasyCrop_Image",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",z)},l,{src:a,ref:this.imageRef,style:Rt(Rt({},L),{transform:u||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(y,"deg) scale(").concat(j,")")}),onLoad:this.onMediaLoad})):o&&k.createElement("video",Rt({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:cc("reactEasyCrop_Video",C==="contain"&&"reactEasyCrop_Contain",C==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",C==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",z)},l,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:Rt(Rt({},L),{transform:u||"translate(".concat(p,"px, ").concat(m,"px) rotate(").concat(y,"deg) scale(").concat(j,")")}),controls:!1}),(Array.isArray(o)?o:[{src:o}]).map(function(D){return k.createElement("source",Rt({key:D.src},D))})),this.state.cropSize&&k.createElement("div",Rt({ref:this.cropperRef,style:Rt(Rt({},P),{width:v?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:v?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:cc("reactEasyCrop_CropArea",_==="round"&&"reactEasyCrop_CropAreaRound",T&&"reactEasyCrop_CropAreaGrid",g)},c)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:GD,minZoom:HD,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:KD},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e}(k.Component);const YD=t=>new Promise((e,n)=>{const r=new Image;r.addEventListener("load",()=>e(r)),r.addEventListener("error",s=>n(s)),r.setAttribute("crossOrigin","anonymous"),r.src=t});function DN(t){return t*Math.PI/180}function XD(t,e,n){const r=DN(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}async function JD(t,e,n=0,r={horizontal:!1,vertical:!1}){const s=await YD(t),a=document.createElement("canvas"),o=a.getContext("2d");if(!o)return null;const l=DN(n),{width:c,height:u}=XD(s.width,s.height,n);a.width=c,a.height=u,o.translate(c/2,u/2),o.rotate(l),o.scale(r.horizontal?-1:1,r.vertical?-1:1),o.translate(-s.width/2,-s.height/2),o.drawImage(s,0,0);const h=o.getImageData(e.x,e.y,e.width,e.height);return a.width=e.width,a.height=e.height,o.putImageData(h,0,0),a.toDataURL("image/jpeg",.9)}const ZD=()=>{const[t,e]=k.useState(null),n=k.useRef(null),r=k.useCallback((o,l="error")=>{n.current&&clearTimeout(n.current),e({message:o,type:l}),n.current=setTimeout(()=>e(null),3500)},[]),s=k.useMemo(()=>({error:o=>r(o,"error"),success:o=>r(o,"success"),info:o=>r(o,"info")}),[r]),a=t?lt.createPortal(i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${t.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":t.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${t.type==="error"?"bg-white animate-pulse":t.type==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t.message})]}),document.body):null;return{toast:s,ToastUI:a}},yt={Camera:()=>i.jsxs("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),Close:t=>i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),Plus:()=>i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),Back:t=>i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 19l-7-7 7-7"})}),Trash:t=>i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...t,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),Clock:()=>i.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Bars:()=>i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),Book:()=>i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),Check:()=>i.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})},eM=({src:t,onClose:e})=>(mn(!0),lt.createPortal(i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e,className:"fixed inset-0 z-[10000] bg-black/80 backdrop-blur-3xl flex items-center justify-center p-4",children:[i.jsx("button",{onClick:e,className:"absolute top-8 right-8 z-50 p-4 rounded-full bg-white/5 text-white/50 hover:bg-white/10 hover:text-white transition-all backdrop-blur-md border border-white/5 hover:border-white/20 active:scale-95 group",children:i.jsx(yt.Close,{className:"w-5 h-5 group-hover:rotate-90 transition-transform duration-500"})}),i.jsx(B.img,{src:t,className:"max-w-full max-h-full object-contain shadow-2xl rounded-2xl",draggable:!1,onClick:n=>n.stopPropagation(),transition:{type:"spring",stiffness:250,damping:35}})]}),document.body)),tM=({imageSrc:t,onCancel:e,onCropComplete:n})=>{const[r,s]=k.useState({x:0,y:0}),[a,o]=k.useState(1),[l,c]=k.useState(null),[u,h]=k.useState(!1);mn(!0);const p=(y,j)=>{c(j)},m=async()=>{try{const y=await JD(t,l);n(y)}catch(y){console.error(y)}};return lt.createPortal(i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black flex flex-col",children:[i.jsxs("div",{className:"absolute top-0 left-0 right-0 z-[20001] px-6 py-12 flex justify-between items-center bg-gradient-to-b from-black/80 via-black/40 to-transparent pointer-events-none",children:[i.jsx("button",{onClick:e,className:"pointer-events-auto px-5 py-2.5 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-xl border border-white/10 text-white text-sm font-semibold transition-all active:scale-95",children:"Cancelar"}),i.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest opacity-80 mt-1",children:"Redimensionar"}),i.jsx("button",{onClick:m,className:"pointer-events-auto px-6 py-2.5 rounded-full bg-white text-black text-sm font-bold transition-all hover:bg-zinc-100 active:scale-95 shadow-[0_4px_24px_rgba(255,255,255,0.2)]",children:"OK"})]}),i.jsx("div",{className:"relative flex-1 bg-black",children:i.jsx(QD,{image:t,crop:r,zoom:a,aspect:4/5,onCropChange:s,onZoomChange:o,onCropComplete:p,showGrid:u,onInteractionStart:()=>h(!0),onInteractionEnd:()=>h(!1),classes:{containerClassName:"bg-black",mediaClassName:"object-contain",cropAreaClassName:"border border-white/40 shadow-[0_0_0_1000px_rgba(0,0,0,0.7)]"}})}),i.jsxs("div",{className:"absolute bottom-0 left-0 right-0 z-[20001] px-8 py-16 flex flex-col items-center bg-gradient-to-t from-black/90 via-black/50 to-transparent pointer-events-none",children:[i.jsxs("div",{className:"w-full max-w-xs flex items-center gap-6 pointer-events-auto",children:[i.jsx("button",{onClick:()=>o(Math.max(1,a-.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:i.jsx(yt.Camera,{className:"w-4 h-4"})}),i.jsx("input",{type:"range",value:a,min:1,max:3,step:.01,onChange:y=>o(parseFloat(y.target.value)),className:"range-slider accent-white"}),i.jsx("button",{onClick:()=>o(Math.min(3,a+.1)),className:"p-1 text-white/50 hover:text-white transition-colors",children:i.jsx(yt.Plus,{className:"w-4 h-4"})})]}),i.jsx("div",{className:"mt-8 flex gap-1 items-center opacity-30 select-none",children:[1,1.5,2,2.5,3].map(y=>i.jsx("div",{className:`w-1 h-3 rounded-full transition-all duration-300 ${a>=y?"bg-white h-5 opacity-100":"bg-white/40"}`},y))})]}),i.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-white/20 rounded-full z-[20002]"})]}),document.body)},nM=({id:t,children:e})=>{const n=hf();return i.jsx(tu,{value:t,dragListener:!1,dragControls:n,className:"relative bg-white dark:bg-black",children:e(n)})},rM=({categories:t,onClose:e,onUpdate:n,onRenameCategory:r})=>{const[s,a]=k.useState(""),[o,l]=k.useState(null),[c,u]=k.useState(""),[h,p]=k.useState(null),[m,y]=k.useState(null),[j,_]=k.useState(!1),T=k.useRef(null);mn(!0);const v=["#FF3B30","#FF9500","#FFCC00","#34C759","#00C7BE","#007AFF","#5856D6","#AF52DE","#FF2D55","#8E8E93"],w=g=>typeof g=="string"?{name:g,color:"#007AFF"}:{name:g.name||"Sem nome",color:g.color||"#007AFF"},N=()=>{const g=s.trim();!g||t.some(C=>on(C)===g)||(n([...t,{name:g,color:"#007AFF"}]),a(""))},P=g=>{const z=c.trim(),C=on(g);if(!z||z===C){l(null);return}if(t.some(M=>on(M)===z)){l(null);return}r(C,z),n(t.map(M=>{const I=w(M);return I.name===C?{...I,name:z}:I})),l(null)},L=(g,z)=>{const C=on(g);n(t.map(D=>{const M=w(D);return M.name===C?{...M,color:z}:M})),y(null)},R=g=>{const z=on(g);n(t.filter(C=>on(C)!==z)),r(z,"Outros"),p(null)},b=(g,z)=>{_(!1),(z.offset.y>100||z.velocity.y>500)&&e()};return lt.createPortal(i.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-stretch md:items-center justify-center",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-xl",onClick:e}),i.jsxs(B.div,{ref:T,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},transition:{type:"spring",stiffness:300,damping:30,mass:.8},drag:window.innerWidth>=768?"y":!1,dragConstraints:{top:0,bottom:0},dragElastic:{top:0,bottom:.7},onDragStart:()=>_(!0),onDragEnd:b,className:"relative w-full h-full md:h-auto md:max-w-md md:max-h-[80vh] bg-white dark:bg-zinc-900 md:bg-white/95 md:dark:bg-zinc-900/95 md:backdrop-blur-2xl md:rounded-[24px] shadow-[0_-10px_60px_rgba(0,0,0,0.25)] dark:shadow-[0_-10px_60px_rgba(0,0,0,0.5)] overflow-hidden flex flex-col",style:{paddingTop:"max(calc(env(safe-area-inset-top, 0px) + 60px), 60px)",paddingBottom:"env(safe-area-inset-bottom, 0px)"},children:[i.jsx("div",{className:"flex justify-center pt-3 pb-2 shrink-0 cursor-grab active:cursor-grabbing md:hidden touch-manipulation",children:i.jsx(B.div,{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600",animate:{scale:j?1.1:1,backgroundColor:j?"#007AFF":void 0},transition:{duration:.15}})}),i.jsxs("div",{className:"flex items-center justify-between px-6 pt-4 md:pt-6 pb-4 shrink-0",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-[22px] font-bold text-zinc-900 dark:text-white tracking-tight leading-tight",children:"Categorias"}),i.jsx("p",{className:"text-[13px] font-medium text-zinc-500 dark:text-zinc-400 mt-0.5",children:"Organize suas receitas"})]}),i.jsx("button",{onClick:e,className:"w-12 h-12 -mr-2 flex items-center justify-center rounded-full text-zinc-400 hover:text-zinc-600 dark:text-zinc-500 dark:hover:text-zinc-300 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all active:scale-90 touch-manipulation",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"px-6 pb-5 shrink-0",children:i.jsxs("div",{className:"flex gap-3",children:[i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{type:"text",value:s,onChange:g=>a(g.target.value),onKeyDown:g=>g.key==="Enter"&&N(),className:"w-full h-12 px-4 rounded-xl bg-zinc-100 dark:bg-zinc-800 border-0 text-[16px] text-zinc-900 dark:text-white font-medium focus:ring-2 focus:ring-blue-500 focus:bg-white dark:focus:bg-zinc-700 transition-all placeholder:text-zinc-400 dark:placeholder:text-zinc-500",placeholder:"Nova categoria..."})}),i.jsx("button",{onClick:N,disabled:!s.trim(),className:"w-12 h-12 flex items-center justify-center bg-blue-500 text-white rounded-xl font-bold hover:bg-blue-600 active:scale-95 transition-all disabled:opacity-40 disabled:cursor-not-allowed disabled:active:scale-100 touch-manipulation shadow-lg shadow-blue-500/25",children:i.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]})}),i.jsx("div",{className:"h-px bg-zinc-200 dark:bg-zinc-700/50 mx-6"}),i.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain px-4 py-4",children:t.length===0?i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-16 h-16 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),i.jsx("p",{className:"text-[15px] font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhuma categoria ainda"})]}):i.jsx("div",{className:"space-y-2",children:t.map((g,z)=>{const{name:C,color:D}=w(g),M=C+z;return i.jsxs("div",{className:"group relative",children:[i.jsxs("div",{className:"flex items-center gap-3 py-3 px-3 rounded-2xl bg-zinc-50 dark:bg-zinc-800/50 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[i.jsx("button",{onClick:()=>y(m===M?null:M),className:"w-12 h-12 rounded-xl flex items-center justify-center touch-manipulation hover:bg-white dark:hover:bg-zinc-700 transition-colors active:scale-95",children:i.jsx("div",{className:"w-7 h-7 rounded-full shadow-sm transition-transform hover:scale-110",style:{backgroundColor:D}})}),i.jsx("div",{className:"flex-1 min-w-0",children:o===M?i.jsx("input",{autoFocus:!0,value:c,onChange:I=>u(I.target.value),onBlur:()=>P(g),onKeyDown:I=>{I.key==="Enter"&&P(g),I.key==="Escape"&&l(null)},className:"w-full h-10 px-3 -ml-3 bg-white dark:bg-zinc-700 rounded-lg outline-none text-[16px] font-semibold text-zinc-900 dark:text-white ring-2 ring-blue-500"}):i.jsx("button",{onClick:()=>{l(M),u(C)},className:"text-left w-full py-2 text-[16px] font-semibold text-zinc-900 dark:text-white truncate touch-manipulation",children:C})}),i.jsx("button",{onClick:()=>p(g),className:"w-12 h-12 flex items-center justify-center rounded-xl text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/20 transition-all active:scale-95 touch-manipulation",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),i.jsx(_e,{children:m===M&&i.jsxs(i.Fragment,{children:[i.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{type:"spring",stiffness:400,damping:30},className:"md:hidden fixed inset-x-0 bottom-0 z-[80] bg-white dark:bg-zinc-800 rounded-t-3xl shadow-[0_-20px_60px_rgba(0,0,0,0.3)] p-6",style:{paddingBottom:"max(env(safe-area-inset-bottom, 24px), 24px)"},children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"w-9 h-[5px] rounded-full bg-zinc-300 dark:bg-zinc-600"})}),i.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white text-center mb-5",children:"Escolha uma Cor"}),i.jsx("div",{className:"grid grid-cols-5 gap-4 mb-6",children:v.map(I=>i.jsx("button",{onClick:()=>L(g,I),className:`aspect-square rounded-full transition-all active:scale-90 touch-manipulation ${D===I?"ring-[3px] ring-offset-4 ring-offset-white dark:ring-offset-zinc-800 ring-blue-500 scale-110":"hover:scale-105"}`,style:{backgroundColor:I}},I))}),i.jsx("button",{onClick:()=>y(null),className:"w-full h-14 bg-zinc-100 dark:bg-zinc-700 rounded-2xl text-[17px] font-semibold text-zinc-900 dark:text-white active:bg-zinc-200 dark:active:bg-zinc-600 transition-colors touch-manipulation",children:"Fechar"})]}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"md:hidden fixed inset-0 z-[75] bg-black/40",onClick:()=>y(null)}),i.jsx(B.div,{initial:{opacity:0,scale:.95,y:-8},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-8},transition:{duration:.15},className:"hidden md:block absolute left-3 top-full mt-2 z-[80] bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl p-4 border border-zinc-200 dark:border-zinc-700",children:i.jsx("div",{className:"grid grid-cols-5 gap-2",children:v.map(I=>i.jsx("button",{onClick:()=>L(g,I),className:`w-8 h-8 rounded-full transition-all hover:scale-110 active:scale-95 ${D===I?"ring-2 ring-offset-2 ring-blue-500 dark:ring-offset-zinc-800":""}`,style:{backgroundColor:I}},I))})})]})})]},M)})})}),i.jsx(_e,{children:h&&i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-6",children:i.jsxs(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{type:"spring",stiffness:400,damping:30},className:"w-full max-w-[280px] bg-white/95 dark:bg-zinc-800/95 backdrop-blur-xl rounded-[20px] overflow-hidden shadow-2xl",children:[i.jsxs("div",{className:"p-6 text-center",children:[i.jsx("div",{className:"w-14 h-14 bg-rose-100 dark:bg-rose-900/40 rounded-full flex items-center justify-center text-rose-500 mx-auto mb-4",children:i.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),i.jsx("h4",{className:"text-[17px] font-bold text-zinc-900 dark:text-white mb-2",children:"Excluir Categoria?"}),i.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 leading-relaxed",children:['"',on(h),'" ser removida. Receitas sero movidas para "Outros".']})]}),i.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:i.jsx("button",{onClick:()=>p(null),className:"w-full h-12 text-[17px] font-normal text-blue-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors touch-manipulation",children:"Cancelar"})}),i.jsx("div",{className:"border-t border-zinc-200 dark:border-zinc-700",children:i.jsx("button",{onClick:()=>R(h),className:"w-full h-12 text-[17px] font-semibold text-rose-500 hover:bg-zinc-50 dark:hover:bg-zinc-700/50 transition-colors active:bg-rose-50 dark:active:bg-rose-900/20 touch-manipulation",children:"Excluir"})})]})})})]})]}),document.body)},iM=$n.memo(({item:t,onUpdate:e,onDelete:n,onNext:r,isEditing:s})=>{const a=hf(),[o,l]=k.useState(!1);return i.jsx(tu,{value:t,dragListener:s,dragControls:a,className:`group relative mb-2 transition-all duration-300 ease-out ${s?"":"cursor-pointer"}`,onClick:()=>!s&&l(!o),children:i.jsxs("div",{className:`flex items-center gap-2 md:gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${s?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":o?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[s&&i.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150",onPointerDown:c=>a.start(c),children:i.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[i.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),i.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),i.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),!s&&i.jsx("div",{className:`w-5 h-5 rounded-full border-2 flex items-center justify-center transition-colors ${o?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-700"}`,children:o&&i.jsx(yt.Check,{className:"w-3 h-3 text-white"})}),s?i.jsx("input",{id:`ing-name-${t.id}`,type:"text",value:t.name,onChange:c=>e({...t,name:c.target.value}),onKeyDown:c=>{if(c.key==="Enter"){c.preventDefault();const u=document.getElementById(`ing-qty-${t.id}`);u&&u.focus()}},className:"flex-1 bg-transparent outline-none font-medium text-[15px] leading-[1.4] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 transition-colors duration-150 min-w-0",placeholder:"Ingrediente",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}}):i.jsx("span",{className:`flex-1 font-medium text-[15px] leading-[1.4] tracking-tight text-zinc-800 dark:text-zinc-200 ${o?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.name}),i.jsxs("div",{className:"flex items-center gap-1.5 md:gap-2",children:[s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"relative w-12 md:w-24 transition-all duration-300",children:i.jsx("input",{id:`ing-qty-${t.id}`,type:"text",inputMode:"decimal",value:t.quantity,onChange:c=>{const u=c.target.value;(u===""||/^[0-9.,]*$/.test(u))&&e({...t,quantity:u})},onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),r==null||r())},className:"w-full text-right bg-transparent outline-none font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums",placeholder:"0",onBlur:()=>{!t.name.trim()&&!t.quantity.trim()&&n()}})}),i.jsx("select",{value:t.unit,onChange:c=>e({...t,unit:c.target.value}),className:"bg-transparent text-[10px] md:text-[11px] font-semibold uppercase tracking-wider text-zinc-400 dark:text-zinc-600 outline-none cursor-pointer hover:text-zinc-600 dark:hover:text-zinc-400 transition-colors duration-150 appearance-none",children:["g","kg","ml","L","un","col"].map(c=>i.jsx("option",{value:c,children:c},c))})]}):i.jsxs("div",{className:`font-semibold text-[15px] text-zinc-900 dark:text-white tabular-nums flex items-baseline gap-1 ${o?"opacity-50":""}`,children:[i.jsx("span",{children:t.quantity}),i.jsx("span",{className:"text-[10px] uppercase tracking-wider text-zinc-500",children:t.unit})]}),s&&i.jsx("button",{onClick:n,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 touch-manipulation",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})})}),sM=$n.memo(({item:t,index:e,onUpdate:n,onDelete:r,onNext:s,isEditing:a})=>{const o=hf(),[l,c]=k.useState(!1);return i.jsx(tu,{value:t,dragListener:a,dragControls:o,className:`group relative mb-2 transition-all duration-300 ease-out ${a?"":"cursor-pointer"}`,onClick:()=>!a&&c(!l),children:i.jsxs("div",{className:`flex gap-3 py-3 px-1 rounded-xl transition-all duration-200 ease-[cubic-bezier(0.4,0,0.2,1)] ${a?"hover:bg-zinc-50/50 dark:hover:bg-zinc-900/30":l?"opacity-50":"hover:bg-zinc-50 dark:hover:bg-zinc-900/10"}`,children:[a&&i.jsx("div",{className:"cursor-grab active:cursor-grabbing text-zinc-300 dark:text-zinc-700 hover:text-zinc-400 dark:hover:text-zinc-600 transition-colors duration-150 mt-1",onPointerDown:u=>o.start(u),children:i.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 16 16",children:[i.jsx("circle",{cx:"4",cy:"4",r:"1.5"}),i.jsx("circle",{cx:"4",cy:"12",r:"1.5"}),i.jsx("circle",{cx:"12",cy:"4",r:"1.5"}),i.jsx("circle",{cx:"12",cy:"12",r:"1.5"})]})}),i.jsx("div",{className:"pt-1 w-5 shrink-0 flex justify-center",children:!a&&l?i.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500 flex items-center justify-center",children:i.jsx(yt.Check,{className:"w-3 h-3 text-white"})}):i.jsx("span",{className:`text-[11px] font-black pt-0.5 select-none font-mono tabular-nums ${l?"text-zinc-300":"text-zinc-300 dark:text-zinc-700"}`,children:String(e+1).padStart(2,"0")})}),a?i.jsx("textarea",{id:`instr-text-${t.id}`,value:t.text,onChange:u=>n({...t,text:u.target.value}),onKeyDown:u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),s==null||s())},className:"flex-1 bg-transparent outline-none resize-none text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 placeholder:text-zinc-300 dark:placeholder:text-zinc-700 min-w-0 transition-colors duration-150",placeholder:"Descreva este passo...",rows:1,onInput:u=>{u.target.style.height="auto",u.target.style.height=u.target.scrollHeight+"px"},onBlur:()=>{t.text.trim()||r()}}):i.jsx("p",{className:`flex-1 text-[15px] font-medium leading-[1.6] tracking-[-0.011em] text-zinc-800 dark:text-zinc-200 whitespace-pre-wrap ${l?"line-through text-zinc-400 dark:text-zinc-500":""}`,children:t.text}),a&&i.jsx("button",{onClick:r,className:"p-3 text-zinc-300 dark:text-zinc-700 hover:text-rose-500 dark:hover:text-rose-400 transition-colors duration-150 opacity-100 md:opacity-0 md:group-hover:opacity-100 mt-0.5 touch-manipulation",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})}),on=t=>typeof t=="string"?t:t&&typeof t=="object"&&t.name?t.name:"Outros",i1=(t,e)=>{const n=t.find(r=>on(r)===e);return n&&typeof n=="object"&&n.color?n.color:"#007AFF"};function aM(){const{toast:t,ToastUI:e}=ZD(),[n,r]=k.useState([]),[s,a]=k.useState(["Tradicionais","Especiais","Veganas","Doces"]),[o,l]=k.useState(null),[c,u]=k.useState(!1),[h,p]=k.useState("Todas"),[m,y]=k.useState(!0),[j,_]=k.useState(null),[T,v]=k.useState(null),[w,N]=k.useState(null),[P,L]=k.useState(!1),[R,b]=k.useState(!1),[g,z]=k.useState(!1),[C,D]=k.useState(!1),[M,I]=k.useState(null),xe=k.useRef(null);k.useRef(null);const ve=k.useRef({}),je=k.useRef({});k.useEffect(()=>{let A=!0;return(async()=>{try{const $=await $e.getRecipesV3();if(!A)return;Array.isArray($)&&$.length>0?r($.map(re=>{let S=Array.isArray(re.sections)?re.sections:[];return S.length===0&&(Array.isArray(re.ingredientSections)||Array.isArray(re.instructionSections))&&(S=[...Array.isArray(re.ingredientSections)?re.ingredientSections.map(O=>({...O,type:"ingredients"})):[],...Array.isArray(re.instructionSections)?re.instructionSections.map(O=>({...O,type:"instructions"})):[]]),S.length>0&&(S=S.map(O=>({...O,items:Array.isArray(O.items)?O.items.filter(H=>{var Z,me,pe;return O.type==="ingredients"?((Z=H.name)==null?void 0:Z.trim())||((me=H.quantity)==null?void 0:me.trim()):(pe=H.text)==null?void 0:pe.trim()}):[]}))),{id:String(re.id),name:re.name||"Sem nome",category:re.category||"Outros",prepTime:re.prepTime??0,cookTime:re.cookTime??0,temperature:re.temperature??180,image:re.image||null,sections:S,createdAt:re.createdAt||new Date().toISOString(),updatedAt:re.updatedAt||new Date().toISOString()}})):r([])}catch{A&&r([])}try{const $=await $e.getRecipeCategories();A&&$&&Array.isArray($)&&a($)}catch{}A&&(y(!1),_(null))})(),()=>{A=!1}},[]),k.useEffect(()=>{if(m)return;const A=setTimeout(()=>{$e.syncRecipeCategories(s)},1e3);return()=>clearTimeout(A)},[s,m]);const de=(A,q)=>{const $=String(A);b(!0),z(!1),r(re=>re.map(S=>String(S.id)===$?{...S,...q,updatedAt:new Date().toISOString()}:S)),ve.current[$]={...ve.current[$]||{},...q,updatedAt:new Date().toISOString()},je.current[$]&&clearTimeout(je.current[$]),je.current[$]=setTimeout(async()=>{const re=ve.current[$];if(!re){b(!1);return}delete ve.current[$],delete je.current[$];try{await $e.syncRecipeV3($,re,!0)||z(!0)}catch{z(!0)}finally{Object.keys(ve.current).length===0&&b(!1)}},1200)},J=A=>{const q=A.target.files[0];if(!q)return;if(!o){t.error("Nenhuma receita selecionada.");return}const $=new FileReader;$.onload=()=>{I($.result)},$.readAsDataURL(q),A.target.value=null},oe=async A=>{try{D(!0),I(null);const q=await jD(A);de(o,{image:q}),t.success("Imagem atualizada!")}catch(q){console.error(q),t.error("Erro ao processar imagem.")}finally{D(!1)}},le=async A=>{const q=String(A);N(null),r($=>$.filter(re=>String(re.id)!==q)),String(o)===q&&l(null);try{if(!await $e.deleteRecipeV3(q))throw new Error("Firebase returned false")}catch{t.error("Erro ao excluir receita.")}},ke=k.useMemo(()=>n.filter(A=>h==="Todas"||A.category===h),[n,h]),U=k.useMemo(()=>n.find(A=>String(A.id)===String(o)),[n,o]),se=k.useCallback(()=>{if(U&&U.sections){const A=U.sections.map(q=>q.type==="ingredients"?{...q,items:(q.items||[]).filter($=>$.name.trim()||$.quantity.trim())}:q.type==="instructions"?{...q,items:(q.items||[]).filter($=>$.text.trim())}:q);de(o,{sections:A})}u(!1)},[U,o,de]);return m?i.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-zinc-200 border-t-zinc-900 dark:border-zinc-700 dark:border-t-white rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-sm font-medium text-zinc-500 dark:text-zinc-400",children:"Carregando receitas..."})]})}):j?i.jsx("div",{className:"h-screen flex items-center justify-center bg-zinc-50 dark:bg-black px-6",children:i.jsxs("div",{className:"text-center max-w-sm",children:[i.jsx("div",{className:"w-16 h-16 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("svg",{className:"w-8 h-8 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-2",children:"Erro de Conexo"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:j}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm uppercase tracking-wide hover:scale-105 active:scale-95 transition-transform",children:"Tentar Novamente"})]})}):i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),i.jsx(_e,{children:!o&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"relative z-10",children:[i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Receitas"}),i.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-colors ${g?"bg-rose-500/5 border-rose-500/10 text-rose-500/80":R?"bg-amber-500/5 border-amber-500/10 text-amber-500/80":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[i.jsx("div",{className:`w-1 h-1 rounded-full ${g?"bg-rose-500":R?"bg-amber-500 animate-pulse":"bg-emerald-500"}`}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:g?"Erro de Sync":R?"Sincronizando":"Cloud Active"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Bblia culinria & fichas de produo"})]}),i.jsxs("button",{onClick:()=>{const A=String(Date.now()),q={id:A,name:"Nova Criao",category:"Tradicionais",prepTime:30,cookTime:15,image:null,sections:[{id:Date.now(),type:"ingredients",title:"BASE",items:[]},{id:Date.now()+1,type:"instructions",title:"PASSOS",items:[]}],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r([q,...n]),l(A),u(!0),$e.syncRecipeV3(A,q)},className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[i.jsx(yt.Plus,{}),"Criar Nova Receita"]})]}),i.jsx("div",{className:"sticky top-4 z-30 mb-8 py-4 overflow-x-auto scrollbar-hidden bg-zinc-50/80 dark:bg-black/80 backdrop-blur-xl supports-[backdrop-filter]:bg-zinc-50/50",children:i.jsxs("div",{className:"flex items-center gap-2 w-max",children:[["Todas",...s].map(A=>i.jsx("button",{onClick:()=>p(on(A)),className:`px-5 py-2.5 rounded-full text-xs font-bold uppercase tracking-wide transition-all ${h===on(A)?"bg-indigo-500 text-white shadow-md shadow-indigo-500/20":"bg-white dark:bg-zinc-900 text-zinc-500 hover:text-zinc-900 dark:hover:text-white border border-zinc-200/50 dark:border-zinc-800"}`,children:on(A)},on(A))),i.jsx("button",{onClick:()=>L(!0),className:"w-10 h-10 flex items-center justify-center rounded-full border border-zinc-200/50 dark:border-zinc-800 text-zinc-400 hover:text-indigo-500 hover:border-indigo-500/50 transition-all bg-white dark:bg-zinc-900 shadow-sm active:scale-90",title:"Gerenciar Biblioteca",children:i.jsxs("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[ke.map(A=>i.jsxs(B.div,{onClick:()=>{l(A.id),u(!1)},className:"group relative z-20 bg-white dark:bg-zinc-950 rounded-[2rem] p-4 border border-zinc-200/50 dark:border-white/10 md:hover:border-zinc-300 md:dark:hover:border-white/20 transition-all cursor-pointer shadow-xl md:hover:shadow-2xl md:hover:-translate-y-1 active:scale-[0.98] overflow-hidden",children:[i.jsxs("div",{className:"relative aspect-[4/5] rounded-[1.5rem] overflow-hidden bg-zinc-100 dark:bg-zinc-900 mb-6 shadow-inner",children:[A.image?i.jsx(B.img,{src:A.image,className:"w-full h-full object-cover transition-transform duration-700 md:group-hover:scale-105"}):i.jsxs("div",{className:"w-full h-full relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-zinc-50 via-zinc-100 to-zinc-200 dark:from-zinc-900 dark:via-zinc-950 dark:to-black"}),i.jsx("div",{className:"absolute top-[-20%] left-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-500/8 via-transparent to-transparent opacity-60"}),i.jsx("div",{className:"absolute bottom-[-20%] right-[-20%] w-[80%] h-[80%] bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-fuchsia-500/8 via-transparent to-transparent opacity-60"}),i.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center opacity-40 md:group-hover:opacity-80 transition-opacity",children:i.jsx("div",{className:"w-12 h-12 rounded-full bg-white/40 dark:bg-white/5 backdrop-blur-md border border-white/20 flex items-center justify-center mb-2 shadow-lg md:group-hover:scale-110 transition-transform duration-500",children:i.jsx(yt.Camera,{})})})]}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 md:group-hover:opacity-100 transition-opacity"}),i.jsx("button",{onClick:q=>{q.stopPropagation(),N({title:"Excluir Receita",message:`Tem certeza que deseja excluir "${A.name}"? Esta ao  irreversvel.`,type:"danger",onConfirm:()=>{le(A.id)},onCancel:()=>N(null)})},className:"absolute top-3 right-3 p-2.5 rounded-full bg-black/30 hover:bg-rose-500/90 backdrop-blur-md text-white/90 hover:text-white opacity-0 md:group-hover:opacity-100 transition-all duration-300 transform scale-90 hover:scale-100 hover:shadow-lg z-[100] border border-white/10 active:scale-95 touch-manipulation cursor-pointer",children:i.jsx(yt.Trash,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"px-2 pb-4",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("span",{className:"inline-block px-2.5 py-1 text-[10px] font-medium tracking-wide rounded-lg",style:{backgroundColor:`${i1(s,A.category)}15`,color:i1(s,A.category)},children:A.category}),i.jsxs("div",{className:"flex items-center gap-3 text-xs font-bold text-zinc-400",children:[i.jsxs("div",{className:"flex items-center gap-1.5",children:[i.jsx(yt.Clock,{}),A.prepTime+A.cookTime,"m"]}),A.temperature>0&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-px h-3 bg-zinc-200 dark:bg-zinc-700"}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),A.temperature,""]})]})]})]}),i.jsx("h3",{className:"text-2xl font-bold leading-tight text-zinc-900 dark:text-white md:group-hover:text-indigo-600 md:dark:group-hover:text-indigo-400 transition-colors mb-1",children:A.name}),i.jsxs("p",{className:"text-xs font-medium text-zinc-400",children:[(A.sections||[]).filter(q=>q.type==="ingredients").reduce((q,$)=>{var re;return q+(((re=$.items)==null?void 0:re.length)||0)},0)," ingredientes"]})]})]},A.id)),ke.length===0&&i.jsxs("div",{className:"col-span-full py-32 text-center rounded-[3rem] border border-zinc-200/50 dark:border-white/5 bg-white/30 dark:bg-white/[0.02] backdrop-blur-sm relative overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-indigo-500/[0.02] to-transparent"}),i.jsxs("div",{className:"relative z-10",children:[i.jsxs("div",{className:"w-24 h-24 mx-auto mb-8 relative",children:[i.jsx("div",{className:"absolute inset-0 bg-indigo-500/20 blur-2xl rounded-full animate-pulse"}),i.jsx("div",{className:"relative w-full h-full bg-white dark:bg-zinc-900 rounded-full border border-zinc-100 dark:border-zinc-800 flex items-center justify-center shadow-2xl",children:i.jsx(yt.Book,{})})]}),i.jsx("h3",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Expandir a Coleo"}),i.jsxs("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium max-w-xs mx-auto leading-relaxed",children:["Nenhuma receita encontrada em ",i.jsx("span",{className:"text-zinc-900 dark:text-zinc-200 font-bold",children:h}),". Que tal criar algo novo?"]})]})]})]})]})}),typeof document<"u"&&lt.createPortal(i.jsx(_e,{children:o&&U&&i.jsx(B.div,{initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.98},transition:{type:"spring",damping:30,stiffness:300,mass:.8},className:"fixed inset-0 z-[9999] bg-white dark:bg-black overflow-y-auto",ref:xe,children:U?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"sticky top-0 left-0 right-0 z-[101] bg-white/80 dark:bg-black/80 backdrop-blur-xl border-b border-zinc-100 dark:border-zinc-900 flex justify-between items-center px-4 md:px-6 h-16 transition-all",children:[i.jsx("div",{className:"flex-1 flex justify-start",children:i.jsx("button",{onClick:()=>{const A=(U.sections||[]).map(q=>({...q,items:q.items.filter($=>{var re,S,O;return q.type==="ingredients"?((re=$.name)==null?void 0:re.trim())||((S=$.quantity)==null?void 0:S.trim()):(O=$.text)==null?void 0:O.trim()})}));de(o,{sections:A}),l(null)},className:"p-3 rounded-2xl text-zinc-600 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all bg-white dark:bg-zinc-950 border border-zinc-200/50 dark:border-white/10 shadow-sm group",children:i.jsx(yt.Back,{className:"w-5 h-5 transition-transform group-hover:-translate-x-0.5"})})}),i.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${g?"text-rose-500":R?"text-zinc-400":"text-zinc-300"}`,children:g?"Falha":R?"Sincronizando...":"Salvo"}),i.jsxs("div",{className:"flex-1 flex justify-end gap-2",children:[i.jsx("button",{onClick:()=>c?se():u(!0),className:`px-4 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all border ${c?"bg-indigo-500 text-white border-indigo-500 shadow-indigo-500/30 shadow-lg":"bg-white dark:bg-zinc-900 text-zinc-600 dark:text-zinc-400 border-zinc-200 dark:border-zinc-800 hover:border-indigo-500 hover:text-indigo-500"}`,children:c?"Concludo":"Editar"}),i.jsx("button",{onClick:()=>{N({title:"Excluir Receita",message:"Tem certeza que deseja excluir esta receita permanentemente? Esta ao no pode ser desfeita.",type:"danger",onConfirm:()=>{le(o)},onCancel:()=>N(null)})},className:"p-3 rounded-2xl text-zinc-400 hover:text-rose-600 hover:bg-rose-500/10 active:scale-95 transition-all group",children:i.jsx(yt.Trash,{className:"w-5 h-5 transition-transform group-hover:scale-110"})})]})]}),i.jsx("div",{className:"max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-12 pb-40",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-8 md:gap-12 lg:gap-20",children:[i.jsxs("div",{className:"md:col-span-5 space-y-6 md:space-y-10 md:sticky md:top-24 h-fit",children:[i.jsx("div",{className:"relative aspect-video md:aspect-[4/5] rounded-[2rem] bg-zinc-50 dark:bg-zinc-900 overflow-hidden shadow-sm border border-zinc-100 dark:border-zinc-800 group",children:U.image?i.jsxs(i.Fragment,{children:[i.jsx(B.img,{src:U.image,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-105",onClick:()=>v(U.image)}),i.jsxs("label",{className:"absolute top-4 right-4 p-3 rounded-full bg-black/30 backdrop-blur-md text-white/90 hover:bg-black/50 hover:text-white transition-all cursor-pointer opacity-100 md:opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95 shadow-lg border border-white/10",children:[i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:J,disabled:C}),C?i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):i.jsx(yt.Camera,{className:"w-5 h-5"})]})]}):i.jsxs("label",{className:"w-full h-full flex flex-col items-center justify-center cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-zinc-300 hover:text-zinc-500",children:[i.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:J}),i.jsx(yt.Camera,{}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest mt-3",children:"Adicionar Capa"})]})}),i.jsx("div",{className:"grid grid-cols-3 gap-3 md:gap-4",children:[{label:"Preparo",val:"prepTime",unit:"min"},{label:"Cozimento",val:"cookTime",unit:"min"},{label:"Temperatura",val:"temperature",unit:"C"}].map(A=>i.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900/50 rounded-2xl p-3 md:p-4 border border-zinc-100 dark:border-zinc-800 flex flex-col items-center justify-center",children:[i.jsx("span",{className:"text-[9px] md:text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-1 md:mb-2",children:A.label}),i.jsxs("div",{className:"flex items-baseline gap-1",children:[i.jsx("input",{value:U[A.val],onChange:q=>de(o,{[A.val]:q.target.value}),className:"w-full bg-transparent font-bold text-lg md:text-xl text-center text-zinc-900 dark:text-white outline-none p-0 border-none focus:ring-0 tabular-nums",placeholder:"0"}),A.unit&&i.jsx("span",{className:"text-[9px] md:text-[10px] text-zinc-500 font-bold",children:A.unit})]})]},A.label))})]}),i.jsxs("div",{className:"md:col-span-7 space-y-8 md:space-y-12",children:[i.jsxs("div",{className:"space-y-4 md:space-y-6",children:[i.jsx("div",{className:"flex items-center gap-4",children:i.jsx("select",{value:U.category,onChange:A=>de(o,{category:A.target.value}),className:"appearance-none bg-zinc-100 dark:bg-zinc-800 px-4 py-2 rounded-full text-zinc-600 dark:text-zinc-300 font-bold text-[11px] uppercase tracking-wider outline-none cursor-pointer hover:bg-zinc-200 transition-colors",children:s.map(A=>i.jsx("option",{value:on(A),children:on(A)},on(A)))})}),i.jsx("textarea",{value:U.name,onChange:A=>de(o,{name:A.target.value}),className:"w-full bg-transparent text-3xl md:text-6xl font-black text-zinc-900 dark:text-white outline-none resize-none placeholder:text-zinc-200 dark:placeholder:text-zinc-800 leading-[1.1] tracking-tight",placeholder:"Nome da Receita",rows:1,onInput:A=>{A.target.style.height="auto",A.target.style.height=A.target.scrollHeight+"px"}})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pb-6",children:[i.jsxs("button",{disabled:!c,onClick:()=>de(o,{sections:[...U.sections||[],{id:Date.now(),type:"ingredients",title:"INGREDIENTES",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"IN"}),"+ Ingredientes"]}),i.jsxs("button",{disabled:!c,onClick:()=>de(o,{sections:[...U.sections||[],{id:Date.now(),type:"instructions",title:"PREPARO",items:[]}]}),className:`py-4 rounded-2xl border border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 text-zinc-600 dark:text-zinc-300 font-bold text-xs uppercase tracking-widest shadow-sm transition-all flex items-center justify-center gap-2 group ${c?"hover:bg-white dark:hover:bg-zinc-800 hover:shadow-md cursor-pointer":"opacity-50 cursor-not-allowed grayscale"}`,children:[i.jsx("div",{className:"w-6 h-6 rounded-full bg-amber-50 dark:bg-amber-900/30 text-amber-500 flex items-center justify-center group-hover:scale-110 transition-transform",children:"PR"}),"+ Preparo"]})]}),i.jsx(eu,{axis:"y",values:U.sections||[],onReorder:A=>de(o,{sections:A}),className:"space-y-6",children:(U.sections||[]).map(A=>i.jsx(nM,{id:A,children:q=>i.jsx(lM,{section:A,onUpdate:$=>de(o,{sections:U.sections.map(re=>re.id===A.id?$:re)}),onDelete:()=>de(o,{sections:U.sections.filter($=>$.id!==A.id)}),dragControls:q,isEditing:c})},A.id))}),i.jsx("div",{className:"pt-12 pb-8 border-t border-zinc-100 dark:border-zinc-800",children:i.jsx("button",{onClick:()=>N({title:"Excluir Receita",message:"Tem certeza? Esta ao  irreversvel.",type:"danger",onConfirm:async()=>{le(o)},onCancel:()=>N(null)}),className:"w-full py-4 rounded-2xl bg-rose-50 dark:bg-rose-900/10 text-rose-500 font-bold text-sm uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-900/20 transition-colors",children:"Excluir Receita"})})]})]})})]}):null})}),document.body),P&&i.jsx(rM,{categories:s,onClose:()=>L(!1),onUpdate:a,onRenameCategory:(A,q)=>{n.filter($=>$.category===A).forEach($=>{de($.id,{category:q})})}},"recipe-cat-modal"),i.jsx(_e,{children:T&&i.jsx(eM,{src:T,onClose:()=>v(null)})}),typeof document<"u"&&lt.createPortal(i.jsx(_e,{mode:"wait",children:w&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:w.onCancel}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative w-full max-w-sm bg-white dark:bg-zinc-900 rounded-3xl p-6 shadow-2xl border border-zinc-200 dark:border-zinc-800 overflow-hidden",children:[i.jsx(oM,{}),i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center mb-4 ${w.type==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:i.jsx(yt.Trash,{})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:w.title}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-6 leading-relaxed",children:w.message}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:w.onCancel,className:"flex-1 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:w.onConfirm,className:`flex-1 py-3 text-white rounded-xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-105 active:scale-95 transition-all ${w.type==="danger"?"bg-rose-500 shadow-rose-500/20":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]},"confirm-modal-portal")}),document.body),i.jsx(_e,{children:M&&i.jsx(tM,{imageSrc:M,onCancel:()=>I(null),onCropComplete:oe})}),e]})}function oM(){return mn(!0),null}function lM({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:s}){return t.type==="ingredients"?i.jsx(cM,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:s}):t.type==="instructions"?i.jsx(dM,{section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:s}):null}function cM({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:s}){const a=$n.useRef(null),o=$n.useCallback(()=>{const l=`ing-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,c={id:l,name:"",quantity:"",unit:"g"};e({...t,items:[...t.items||[],c]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const u=document.getElementById(`ing-name-${l}`);u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),u.focus())})})},[t,e]);return i.jsxs("div",{ref:a,className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:l=>r.start(l),children:i.jsx(yt.Bars,{className:"w-5 h-5"})}),i.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-50 dark:bg-indigo-900/30 text-indigo-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"IN"}),s?i.jsx("input",{value:t.title,onChange:l=>e({...t,title:l.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):i.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),s&&i.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:i.jsx(yt.Trash,{})})]}),i.jsx("div",{className:"divide-y divide-zinc-50 dark:divide-zinc-900/50",children:i.jsx(eu,{axis:"y",values:t.items,onReorder:l=>s&&e({...t,items:l}),children:t.items.map(l=>i.jsx(iM,{item:l,onUpdate:c=>e({...t,items:t.items.map(u=>u.id===l.id?c:u)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==l.id)}),onNext:()=>{l.name.trim()&&o()},isEditing:s},l.id))})}),s&&i.jsxs("button",{type:"button",onClick:o,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[i.jsx(yt.Plus,{})," Adicionar Ingrediente"]})]})}function dM({section:t,onUpdate:e,onDelete:n,dragControls:r,isEditing:s}){const a=$n.useCallback(()=>{const o=`instr-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,l={id:o,text:""};e({...t,items:[...t.items||[],l]}),requestAnimationFrame(()=>{requestAnimationFrame(()=>{const c=document.getElementById(`instr-text-${o}`);c&&(c.scrollIntoView({behavior:"smooth",block:"center"}),c.focus())})})},[t,e]);return i.jsxs("div",{className:"relative group/section bg-white dark:bg-black rounded-3xl p-4 md:p-6 border border-zinc-100 dark:border-zinc-800 shadow-sm transition-all hover:shadow-md",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6 pl-1",children:[i.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[i.jsx("div",{className:"cursor-grab p-2 -ml-2 text-zinc-300 hover:text-zinc-600 dark:text-zinc-600 dark:hover:text-zinc-400 transition-colors opacity-100 md:opacity-0 md:group-hover/section:opacity-100",onPointerDown:o=>r.start(o),children:i.jsx(yt.Bars,{className:"w-5 h-5"})}),i.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-50 dark:bg-emerald-900/30 text-emerald-500 flex items-center justify-center text-[10px] font-bold shrink-0",children:"MP"}),s?i.jsx("input",{value:t.title,onChange:o=>e({...t,title:o.target.value}),className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider bg-transparent outline-none hover:text-indigo-500 transition-colors flex-1 placeholder:text-zinc-300",placeholder:"NOME DA SEO"}):i.jsx("span",{className:"font-bold text-sm text-zinc-900 dark:text-white uppercase tracking-wider flex-1",children:t.title})]}),s&&i.jsx("button",{onClick:n,className:"opacity-100 md:opacity-0 md:group-hover/section:opacity-100 text-zinc-300 hover:text-rose-500 transition-all p-2 rounded-full hover:bg-rose-50 dark:hover:bg-rose-900/20",children:i.jsx(yt.Trash,{})})]}),i.jsx(eu,{axis:"y",values:t.items,onReorder:o=>s&&e({...t,items:o}),className:"space-y-3",children:t.items.map((o,l)=>i.jsx(sM,{item:o,index:l,onUpdate:c=>e({...t,items:t.items.map(u=>u.id===o.id?c:u)}),onDelete:()=>e({...t,items:t.items.filter(c=>c.id!==o.id)}),onNext:()=>{o.text.trim()&&a()},isEditing:s},o.id))}),s&&i.jsxs("button",{type:"button",onClick:a,className:"mt-6 w-full py-4 rounded-xl border border-dashed border-zinc-200 dark:border-zinc-800 text-xs font-bold uppercase tracking-wider text-zinc-400 hover:border-zinc-300 hover:text-zinc-600 dark:hover:text-zinc-300 transition-all flex items-center justify-center gap-2 hover:bg-zinc-50 dark:hover:bg-zinc-900/30 active:scale-[0.98] touch-manipulation cursor-pointer select-none",children:[i.jsx(yt.Plus,{})," Adicionar Passo"]})]})}const s1="padoca_kanban_pro_max",to={layout:{type:"spring",stiffness:500,damping:40,mass:1},enter:{type:"spring",stiffness:450,damping:35,mass:.8},placeholder:{type:"spring",stiffness:600,damping:45,mass:.7},ghost:{type:"spring",stiffness:500,damping:40,mass:1},shift:{type:"spring",stiffness:450,damping:35,mass:1},modal:{type:"spring",stiffness:400,damping:30,mass:1}},uM=[{id:"emerald",name:"Concludo",color:"#10b981"},{id:"amber",name:"Ateno",color:"#f59e0b"},{id:"rose",name:"Urgente",color:"#f43f5e"},{id:"indigo",name:"Em Progresso",color:"#6366f1"},{id:"sky",name:"Ideia",color:"#0ea5e9"},{id:"violet",name:"Reviso",color:"#8b5cf6"}],a1={columns:[{id:"c1",title:"A Fazer",cards:[]},{id:"c2",title:"Em Progresso",cards:[]},{id:"c3",title:"Concludo",cards:[]}]},sg=[{width:"w-[85vw] md:w-[320px]",label:"Foco",cardPadding:"p-5"},{width:"w-[45vw] md:w-[280px]",label:"Viso",cardPadding:"p-4"},{width:"w-[30vw] md:w-[220px]",label:"Quadro",cardPadding:"p-3"}];function hM(){var re;const[t,e]=k.useState(()=>{try{const S=localStorage.getItem(s1);return S?JSON.parse(S):a1}catch{return a1}}),[n,r]=k.useState(null),[s,a]=k.useState(!1),[o,l]=k.useState(""),[c,u]=k.useState(0),[h,p]=k.useState(null),[m,y]=k.useState(""),[j,_]=k.useState(null),[T,v]=k.useState(""),[w,N]=k.useState(null),[P,L]=k.useState(!1),[R,b]=k.useState(null),g=k.useRef(null);k.useCallback((S,O="success")=>{g.current&&clearTimeout(g.current),b({message:S,type:O}),g.current=setTimeout(()=>b(null),3500)},[]);const[z,C]=k.useState({active:null,target:null,isDragging:!1}),D=md(0),M=md(0),I=k.useRef(null),xe=4,ve=k.useRef(null),je=k.useRef(null),de=k.useRef({colId:null,index:null}),J=k.useCallback((S="light")=>{navigator.vibrate&&navigator.vibrate(S==="light"?8:S==="medium"?15:25)},[]),oe=k.useCallback((S,O,H)=>{const me=document.elementsFromPoint(S,O).find(ze=>ze.hasAttribute("data-column-id"));if(!me)return null;const pe=me.getAttribute("data-column-id"),we=me.querySelector("[data-cards-container]");if(!we)return{colId:pe,index:0};const Se=Array.from(we.querySelectorAll("[data-card-id]")).filter(ze=>ze.getAttribute("data-card-id")!==H);if(Se.length===0)return{colId:pe,index:0};for(let ze=0;ze<Se.length;ze++){const De=Se[ze].getBoundingClientRect(),Xe=De.top+De.height/2;if(O<Xe)return{colId:pe,index:ze}}return{colId:pe,index:Se.length}},[]);k.useEffect(()=>{const S=H=>{const Z=I.current;if(Z&&!z.isDragging){const me=H.clientX-Z.startX,pe=H.clientY-Z.startY;if(Math.sqrt(me*me+pe*pe)>xe){const{card:Se,colId:ze,rect:De,offsetX:Xe,offsetY:Pe,cardIndex:Qe}=Z;D.set(De.left),M.set(De.top),C({active:{id:Se.id,sourceColId:ze,sourceIndex:Qe,data:Se,rect:De,offsetX:Xe,offsetY:Pe},target:{colId:ze,index:Qe},isDragging:!0}),J("medium")}return}if(z.isDragging&&z.active){H.preventDefault();const me=H.clientX-z.active.offsetX,pe=H.clientY-z.active.offsetY;if(D.set(me),M.set(pe),je.current)return;je.current=requestAnimationFrame(()=>{const we=oe(H.clientX,H.clientY,z.active.id);if(je.current=null,we){const Se=de.current;(Se.colId!==we.colId||Se.index!==we.index)&&(de.current=we,J("light"),C(ze=>({...ze,target:we})))}})}},O=H=>{if(je.current&&(cancelAnimationFrame(je.current),je.current=null),z.isDragging&&z.active){const{active:Z,target:me}=z;document.body.style.cursor="";const pe=me==null?void 0:me.colId,we=me==null?void 0:me.index;pe&&(Z.sourceColId!==pe||Z.sourceIndex!==we)&&(e(ze=>{const De=ze.columns.map(Ct=>({...Ct,cards:[...Ct.cards]})),Xe=De.find(Ct=>Ct.id===Z.sourceColId),Pe=De.find(Ct=>Ct.id===pe);if(!Xe||!Pe)return ze;const Qe=Xe.cards.findIndex(Ct=>Ct.id===Z.id);if(Qe===-1)return ze;const[Ht]=Xe.cards.splice(Qe,1);return Pe.cards.splice(we,0,Ht),{...ze,columns:De}}),J("medium")),C({active:null,target:null,isDragging:!1}),de.current={colId:null,index:null}}else if(I.current){const{card:Z,colId:me}=I.current;r({...Z,columnId:me})}I.current=null};return window.addEventListener("pointermove",S,{passive:!1}),window.addEventListener("pointerup",O),window.addEventListener("pointercancel",O),()=>{window.removeEventListener("pointermove",S),window.removeEventListener("pointerup",O),window.removeEventListener("pointercancel",O),je.current&&cancelAnimationFrame(je.current)}},[z,oe,J,D,M]);const le=k.useCallback((S,O,H)=>{var pe;if(S.target.closest("button, input, textarea, [data-no-drag]")||S.button&&S.button!==0)return;const Z=S.currentTarget,me=Z.getBoundingClientRect();I.current={card:O,colId:H,element:Z,rect:me,startX:S.clientX,startY:S.clientY,offsetX:S.clientX-me.left,offsetY:S.clientY-me.top,cardIndex:((pe=t.columns.find(we=>we.id===H))==null?void 0:pe.cards.findIndex(we=>we.id===O.id))??0}},[t.columns]);k.useEffect(()=>{(async()=>{var O;try{const H=await((O=$e.getKanban)==null?void 0:O.call($e));H!=null&&H.columns&&e(H)}catch{}finally{L(!0)}})()},[]),k.useEffect(()=>{if(localStorage.setItem(s1,JSON.stringify(t)),P){const S=setTimeout(()=>{var O;try{(O=$e.syncKanban)==null||O.call($e,t)}catch{}},2e3);return()=>clearTimeout(S)}},[t,P]);const ke=k.useCallback(S=>{if(!m.trim())return;const O={id:`card - ${Date.now()} -${Math.random().toString(36).substr(2,9)} `,title:m.trim(),labels:[],checklists:[],description:"",createdAt:new Date().toISOString()};e(H=>({...H,columns:H.columns.map(Z=>Z.id===S?{...Z,cards:[...Z.cards,O]}:Z)})),y(""),p(null),J("light")},[m,J]),U=k.useCallback(S=>{e(O=>({...O,columns:O.columns.map(H=>H.id===S.columnId?{...H,cards:H.cards.map(Z=>Z.id===S.id?S:Z)}:H)}))},[]),se=k.useCallback((S,O)=>{N({title:"Excluir Carto",message:"Esta ao no pode ser desfeita. Deseja continuar?",type:"danger",onConfirm:()=>{e(H=>({...H,columns:H.columns.map(Z=>Z.id===S?{...Z,cards:Z.cards.filter(me=>me.id!==O)}:Z)})),r(null),N(null),J("medium")},onCancel:()=>N(null)})},[J]),A=k.useCallback(()=>{o.trim()&&(e(S=>({...S,columns:[...S.columns,{id:`col - ${Date.now()} `,title:o.trim(),cards:[]}]})),l(""),a(!1),J("light"))},[o,J]),q=k.useCallback(S=>{if(!T.trim()){_(null);return}e(O=>({...O,columns:O.columns.map(H=>H.id===S?{...H,title:T.trim()}:H)})),_(null)},[T]),$=k.useCallback(S=>{N({title:"Excluir Lista",message:"Todos os cartes desta lista sero removidos. Continuar?",type:"danger",onConfirm:()=>{e(O=>({...O,columns:O.columns.filter(H=>H.id!==S)})),N(null),J("medium")},onCancel:()=>N(null)})},[J]);return i.jsxs("div",{className:"h-[calc(100vh-80px)] md:h-screen flex flex-col pt-6 font-sans bg-zinc-50 dark:bg-black select-none overflow-hidden",children:[i.jsx("header",{className:"relative z-10 flex-shrink-0 px-6 md:px-8 pb-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-end gap-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1.5",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-zinc-900 dark:text-white tracking-tight",children:"Kanban"}),i.jsxs("div",{className:`flex items-center gap-1.5 px-3 py-1 rounded-full border transition-all duration-500 ${P?"bg-emerald-500/5 border-emerald-500/20 text-emerald-600 dark:text-emerald-400":"bg-amber-500/5 border-amber-500/20 text-amber-600 dark:text-amber-400"}`,children:[i.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${P?"bg-emerald-500":"bg-amber-500 animate-pulse"}`}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:P?"Cloud Active":"Syncing"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm font-medium",children:"Gesto visual de tarefas e projetos"})]}),i.jsxs("button",{onClick:()=>a(!0),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-xl shadow-zinc-900/10 dark:shadow-white/5 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 flex items-center justify-center gap-3 group",children:[i.jsx("svg",{className:"w-5 h-5 transition-transform duration-300 group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),"Nova Lista"]})]})}),i.jsxs("div",{ref:ve,className:"relative z-10 flex-1 overflow-x-auto flex gap-4 md:gap-6 px-6 md:px-8 pb-8 snap-x snap-mandatory",style:{WebkitOverflowScrolling:"touch"},children:[i.jsx(_e,{mode:"popLayout",children:t.columns.map(S=>i.jsx(mM,{col:S,dragState:z,spring:to,zoomLevel:c,renamingColId:j,setRenamingColId:_,renameTitle:T,setRenameTitle:v,renameColumn:q,deleteColumn:$,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:y,addCard:ke,handleCardPointerDown:le},S.id))}),i.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>a(!0),className:"flex-shrink-0 w-16 h-16 rounded-2xl bg-white dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 shadow-lg hover:shadow-xl flex items-center justify-center text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-all",children:i.jsx("svg",{className:"w-7 h-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),i.jsx("div",{className:"md:hidden fixed bottom-8 left-1/2 -translate-x-1/2 z-40",children:i.jsx(B.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,...to.enter},className:"flex items-center bg-white/95 dark:bg-zinc-900/95 backdrop-blur-2xl rounded-2xl p-1.5 shadow-2xl border border-zinc-200/50 dark:border-white/10",children:sg.map((S,O)=>i.jsxs("button",{onClick:()=>{u(O),J("light")},className:`relative px-5 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wider transition-all duration-200 ${c===O?"text-white dark:text-zinc-900":"text-zinc-400 dark:text-zinc-500"}`,children:[c===O&&i.jsx(B.div,{layoutId:"zoomIndicator",className:"absolute inset-0 bg-zinc-900 dark:bg-white rounded-xl",transition:{type:"spring",stiffness:500,damping:35}}),i.jsx("span",{className:"relative z-10",children:S.label})]},O))})}),i.jsx(fM,{dragState:z,ghostX:D,ghostY:M,spring:to}),i.jsx(_e,{children:n&&i.jsx(xM,{card:n,onClose:()=>r(null),onUpdate:U,onDelete:()=>se(n.columnId,n.id),setConfirmModal:N})}),i.jsx(_e,{children:w&&i.jsx(gM,{...w})}),lt.createPortal(i.jsx(_e,{children:s&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{a(!1),l("")}}),i.jsxs(B.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:to.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-6 tracking-tight",children:"Nova Lista"}),i.jsx("input",{autoFocus:!0,value:o,onChange:S=>l(S.target.value),onKeyDown:S=>{S.key==="Enter"&&A(),S.key==="Escape"&&(a(!1),l(""))},placeholder:"Nome da lista...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-6"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{a(!1),l("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),i.jsx("button",{onClick:A,disabled:!o.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Criar Lista"})]})]})]})}),document.body),lt.createPortal(i.jsx(_e,{children:h&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>{p(null),y("")}}),i.jsxs(B.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:to.modal,className:"relative w-full max-w-md bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2 tracking-tight",children:"Novo Carto"}),i.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:(re=t.columns.find(S=>S.id===h))==null?void 0:re.title}),i.jsx("textarea",{autoFocus:!0,value:m,onChange:S=>y(S.target.value),onKeyDown:S=>{S.key==="Enter"&&!S.shiftKey&&(S.preventDefault(),ke(h)),S.key==="Escape"&&(p(null),y(""))},placeholder:"Ttulo do carto...",className:"w-full bg-zinc-50 dark:bg-zinc-800 px-4 py-4 rounded-2xl text-zinc-900 dark:text-white font-medium outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none mb-6",rows:3}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>{p(null),y("")},className:"flex-1 py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-400 rounded-2xl text-xs font-bold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors active:scale-[0.98]",children:"Cancelar"}),i.jsx("button",{onClick:()=>ke(h),disabled:!m.trim(),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-wider shadow-lg hover:scale-[1.02] active:scale-[0.98] transition-all disabled:opacity-50",children:"Adicionar"})]})]})]})}),document.body),i.jsx(_e,{children:R&&lt.createPortal(i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${R.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":R.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="error"?"bg-white animate-pulse":R.type==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:R.message})]}),document.body)})]})}const mM=$n.memo(({col:t,dragState:e,spring:n,zoomLevel:r,renamingColId:s,setRenamingColId:a,renameTitle:o,setRenameTitle:l,renameColumn:c,deleteColumn:u,addingCardToCol:h,setAddingCardToCol:p,newCardTitle:m,setNewCardTitle:y,addCard:j,handleCardPointerDown:_})=>{var v,w;const T=((v=e.target)==null?void 0:v.colId)===t.id;return i.jsxs(B.div,{layout:!0,layoutId:`col-${t.id}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:n.layout,"data-column-id":t.id,className:`flex-shrink-0 flex flex-col snap-center ${sg[r].width} max-h-full rounded-[2rem] md:rounded-[2.5rem] bg-white dark:bg-zinc-950 border border-zinc-200/60 dark:border-white/[0.06] shadow-xl shadow-black/[0.03] dark:shadow-black/20 transition-all duration-300 ${T?"bg-zinc-100/50 dark:bg-white/[0.02]":"hover:shadow-2xl"}`,children:[i.jsxs("div",{className:"flex items-center justify-between p-5 md:p-6 border-b border-zinc-100 dark:border-white/5 group",children:[i.jsx("div",{className:"flex-1 min-w-0 mr-3",children:s===t.id?i.jsx("input",{autoFocus:!0,className:"w-full text-[10px] font-bold uppercase tracking-widest text-zinc-900 dark:text-white bg-transparent outline-none border-b-2 border-zinc-500",value:o,onChange:N=>l(N.target.value),onBlur:()=>c(t.id),onKeyDown:N=>{N.key==="Enter"&&c(t.id),N.key==="Escape"&&a(null)}}):i.jsx("h3",{onClick:()=>{a(t.id),l(t.title)},className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 dark:text-zinc-400 cursor-pointer hover:text-zinc-900 dark:hover:text-white transition-colors truncate",children:t.title})}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"px-2.5 py-0.5 bg-zinc-100 dark:bg-white/5 rounded-full text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums",children:t.cards.length}),i.jsx("button",{onClick:()=>u(t.id),className:"p-1.5 rounded-lg text-zinc-300 dark:text-zinc-600 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all opacity-0 group-hover:opacity-100",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),i.jsxs("div",{"data-cards-container":!0,className:"flex-1 overflow-y-auto px-3 md:px-4 py-3 space-y-3 custom-scrollbar",children:[i.jsx(_e,{mode:"popLayout",children:t.cards.map((N,P)=>i.jsx(pM,{card:N,colId:t.id,dragState:e,spring:n,zoomLevel:r,handleCardPointerDown:_},N.id))}),i.jsx(_e,{mode:"sync",children:e.isDragging&&T&&e.active&&(()=>{const N=t.cards.filter(P=>P.id!==e.active.id);return e.target.index>=N.length})()&&i.jsx(B.div,{layoutId:"kanban-gap",initial:{opacity:0,height:0},animate:{opacity:1,height:((w=e.active.rect)==null?void 0:w.height)||80},exit:{opacity:0,height:0},transition:n.placeholder,className:"pointer-events-none"},"kanban-gap")}),i.jsx("button",{onClick:()=>{p(t.id),y("")},className:"w-full min-h-[48px] py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-800 rounded-2xl text-zinc-400 dark:text-zinc-500 text-xs font-bold uppercase tracking-widest hover:bg-zinc-50 dark:hover:bg-zinc-900 hover:border-zinc-400 dark:hover:border-zinc-600 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-[0.98] touch-manipulation",children:"+ Carto"})]})]})}),pM=$n.memo(({card:t,colId:e,dragState:n,spring:r,zoomLevel:s,handleCardPointerDown:a})=>{var c,u,h,p;const o=((c=n.active)==null?void 0:c.id)===t.id,l=((u=n.target)==null?void 0:u.colId)===e;return n.isDragging&&l&&n.active,i.jsx($n.Fragment,{children:!o&&i.jsxs(B.div,{layout:!0,layoutId:t.id,initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},whileHover:{y:-2},transition:r.shift,"data-card-id":t.id,onPointerDown:m=>a(m,t,e),className:`relative bg-white dark:bg-zinc-900 border border-zinc-200/60 dark:border-white/[0.06] rounded-2xl ${sg[s].cardPadding} shadow-sm hover:shadow-xl dark:shadow-black/10 cursor-grab active:cursor-grabbing touch-none select-none hover:border-zinc-300 dark:hover:border-white/10 group/card`,style:{touchAction:"none"},children:[((h=t.labels)==null?void 0:h.length)>0&&i.jsx("div",{className:"flex flex-wrap gap-1.5 mb-3",children:t.labels.map((m,y)=>i.jsx("div",{className:`rounded-full ${s>=2?"h-2 w-2":"h-1.5 w-10"}`,style:{backgroundColor:m.color}},y))}),i.jsx("h4",{className:`font-semibold text-zinc-800 dark:text-zinc-100 leading-relaxed ${s>=2?"text-[11px] line-clamp-2":"text-sm"}`,children:t.title}),s<2&&((p=t.checklists)==null?void 0:p.length)>0&&i.jsxs("div",{className:"flex items-center gap-2 mt-3 text-zinc-400 dark:text-zinc-500",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),i.jsxs("span",{className:"text-[10px] font-bold tabular-nums",children:[t.checklists.reduce((m,y)=>m+y.items.filter(j=>j.done).length,0),"/",t.checklists.reduce((m,y)=>m+y.items.length,0)]})]})]})})}),fM=$n.memo(({dragState:t,ghostX:e,ghostY:n,spring:r})=>{var s;return i.jsx(_e,{children:t.isDragging&&t.active&&i.jsx(B.div,{layoutId:t.active.id,initial:{scale:1,opacity:1},animate:{scale:1,opacity:1},exit:{scale:1,opacity:1},transition:r.ghost,style:{x:e,y:n,position:"fixed",top:0,left:0,width:t.active.rect.width,zIndex:1e4,pointerEvents:"none",willChange:"transform",cursor:"grabbing"},className:"rounded-2xl",children:i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-2xl border border-white/40 dark:border-white/10 p-5 overflow-hidden relative shadow-[0_20px_50px_rgba(0,0,0,0.2)]",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-black/5 pointer-events-none"}),i.jsx("div",{className:"absolute -inset-[100%] bg-gradient-to-tr from-transparent via-white/5 to-transparent rotate-45 pointer-events-none"}),((s=t.active.data.labels)==null?void 0:s.length)>0&&i.jsx("div",{className:"flex gap-1.5 mb-3 relative z-10",children:t.active.data.labels.map((a,o)=>i.jsx("div",{className:"h-2 w-12 rounded-full shadow-sm",style:{backgroundColor:a.color}},o))}),i.jsx("h4",{className:"text-sm font-semibold text-zinc-900 dark:text-white leading-relaxed relative z-10",children:t.active.data.title})]})})})});function gM({title:t,message:e,type:n="info",onConfirm:r,onCancel:s}){return mn(!0),i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-6",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:s}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10 overflow-hidden",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:s,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function xM({card:t,onClose:e,onUpdate:n,onDelete:r,setConfirmModal:s}){var N;mn(!0);const[a,o]=k.useState(t),[l,c]=k.useState(!1),[u,h]=k.useState(""),p=k.useRef(!0),m=k.useRef(null);k.useEffect(()=>{if(p.current){p.current=!1;return}return m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{n(a)},800),()=>{m.current&&clearTimeout(m.current)}},[a]);const y=P=>{var R;const L=(R=a.labels)==null?void 0:R.find(b=>b.id===P.id);o(b=>({...b,labels:L?b.labels.filter(g=>g.id!==P.id):[...b.labels||[],P]}))},j=()=>{u.trim()&&(o(P=>({...P,checklists:[...P.checklists||[],{id:Date.now(),title:u.trim(),items:[]}]})),h(""),c(!1))},_=P=>{s({title:"Excluir Checklist",message:"Esta checklist ser removida permanentemente.",type:"danger",onConfirm:()=>{o(L=>({...L,checklists:L.checklists.filter(R=>R.id!==P)})),s(null)},onCancel:()=>s(null)})},T=(P,L)=>{o(R=>({...R,checklists:R.checklists.map(b=>b.id===P?{...b,items:b.items.map(g=>g.id===L?{...g,done:!g.done}:g)}:b)}))},v=(P,L)=>{L.trim()&&o(R=>({...R,checklists:R.checklists.map(b=>b.id===P?{...b,items:[...b.items,{id:Date.now(),text:L.trim(),done:!1}]}:b)}))},w=(P,L)=>{o(R=>({...R,checklists:R.checklists.map(b=>b.id===P?{...b,items:b.items.filter(g=>g.id!==L)}:b)}))};return lt.createPortal(i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-md"}),i.jsxs(B.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",stiffness:400,damping:35},className:"relative w-full md:max-w-2xl bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-3xl shadow-2xl max-h-[90vh] md:max-h-[85vh] flex flex-col overflow-hidden border-t md:border border-zinc-200/50 dark:border-white/10",onClick:P=>P.stopPropagation(),children:[i.jsxs("div",{className:"shrink-0 p-5 md:p-6 border-b border-zinc-100 dark:border-white/5",children:[i.jsx("div",{className:"w-10 h-1 bg-zinc-300 dark:bg-zinc-700 rounded-full mx-auto mb-4 md:hidden"}),i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("div",{className:"flex gap-2 flex-wrap",children:uM.map(P=>{var L;return i.jsx("button",{onClick:()=>y(P),className:`w-7 h-7 rounded-full transition-all ring-2 ring-offset-2 dark:ring-offset-zinc-900 ${(L=a.labels)!=null&&L.find(R=>R.id===P.id)?"ring-zinc-900 dark:ring-white scale-110":"ring-transparent opacity-40 hover:opacity-100 hover:scale-110"}`,style:{backgroundColor:P.color}},P.id)})}),i.jsx("button",{onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white flex items-center justify-center transition-all hover:bg-zinc-200 dark:hover:bg-zinc-700 active:scale-95",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("input",{className:"w-full text-xl md:text-2xl font-bold bg-transparent outline-none text-zinc-900 dark:text-white placeholder:text-zinc-300",value:a.title,onChange:P=>o(L=>({...L,title:P.target.value})),placeholder:"Ttulo do carto"})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto p-5 md:p-6 space-y-6 custom-scrollbar",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Descrio"}),i.jsx("textarea",{className:"w-full bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl px-4 py-4 text-sm outline-none border border-zinc-200/50 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 resize-none min-h-[100px]",placeholder:"Adicione uma descrio...",value:a.description||"",onChange:P=>o(L=>({...L,description:P.target.value}))})]}),(N=a.checklists)==null?void 0:N.map(P=>i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:P.title}),i.jsx("button",{onClick:()=>_(P.id),className:"text-[10px] font-bold text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 px-3 py-1.5 rounded-lg transition-colors uppercase tracking-wider",children:"Excluir"})]}),i.jsx(eu,{axis:"y",values:P.items,onReorder:L=>{o(R=>({...R,checklists:R.checklists.map(b=>b.id===P.id?{...b,items:L}:b)}))},className:"space-y-2",children:P.items.map(L=>i.jsxs(tu,{value:L,className:"flex items-center gap-3 p-3 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-grab active:cursor-grabbing group shadow-sm",children:[i.jsx("div",{className:"text-zinc-300 dark:text-zinc-600 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab",children:""}),i.jsx("button",{onClick:()=>T(P.id,L.id),className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${L.done?"bg-emerald-500 border-emerald-500":"border-zinc-300 dark:border-zinc-600 hover:border-emerald-400"}`,children:L.done&&i.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),i.jsx("span",{className:`flex-1 text-sm ${L.done?"line-through text-zinc-400":"text-zinc-700 dark:text-zinc-200"}`,children:L.text}),i.jsx("button",{onClick:()=>w(P.id,L.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-rose-500 transition-colors opacity-0 group-hover:opacity-100",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},L.id))}),i.jsx("input",{className:"w-full mt-2 px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm outline-none border border-zinc-100 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 placeholder:text-zinc-400",placeholder:"+ Adicionar item...",onKeyDown:L=>{L.key==="Enter"&&L.target.value.trim()&&(v(P.id,L.target.value),L.target.value="")}})]},P.id)),l?i.jsxs(B.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},className:"p-4 bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl border border-zinc-200/50 dark:border-zinc-700",children:[i.jsx("input",{autoFocus:!0,value:u,onChange:P=>h(P.target.value),onKeyDown:P=>{P.key==="Enter"&&j(),P.key==="Escape"&&c(!1)},placeholder:"Nome da checklist...",className:"w-full bg-white dark:bg-zinc-900 rounded-xl px-4 py-3 text-sm outline-none border border-zinc-200 dark:border-zinc-700 focus:ring-2 focus:ring-zinc-500/50 mb-3"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:j,className:"flex-1 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Criar"}),i.jsx("button",{onClick:()=>c(!1),className:"flex-1 bg-zinc-100 dark:bg-zinc-700 text-zinc-500 py-3 rounded-xl text-xs font-bold uppercase tracking-wider",children:"Cancelar"})]})]}):i.jsx("button",{onClick:()=>c(!0),className:"w-full py-4 border-2 border-dashed border-zinc-200 dark:border-zinc-700 rounded-2xl text-zinc-400 text-xs font-bold uppercase tracking-widest hover:border-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"+ Nova Checklist"})]}),i.jsx("div",{className:"shrink-0 p-5 md:p-6 border-t border-zinc-100 dark:border-white/5 bg-zinc-50/50 dark:bg-zinc-900/50",children:i.jsx("button",{onClick:r,className:"w-full py-4 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl text-xs font-bold uppercase tracking-widest hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-colors border border-rose-100 dark:border-rose-500/20 active:scale-[0.98]",children:"Excluir Carto"})})]})]}),document.body)}const o1="padoca_suppliers";function Bh(){return mn(!0),null}function yM({message:t,type:e,onClose:n}){return k.useEffect(()=>{const r=setTimeout(n,3e3);return()=>clearTimeout(r)},[n]),i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${e==="error"?"bg-rose-500/90 border-rose-400/20 text-white":e==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${e==="error"?"bg-white animate-pulse":e==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:t})]})}function vM({title:t,message:e,type:n="info",onConfirm:r,onCancel:s}){return mn(!0),i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-start md:items-center justify-center p-4 pt-24 md:pt-20",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:s}),i.jsxs(B.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},transition:{type:"spring",stiffness:400,damping:30},className:"relative bg-white dark:bg-zinc-900 rounded-3xl p-8 shadow-2xl max-w-sm w-full border border-zinc-200/50 dark:border-white/10",children:[i.jsx("div",{className:`w-14 h-14 rounded-full flex items-center justify-center mb-6 mx-auto ${n==="danger"?"bg-rose-100 text-rose-600 dark:bg-rose-900/30 dark:text-rose-400":"bg-zinc-100 text-zinc-600"}`,children:n==="danger"?i.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}):i.jsx("svg",{className:"h-7 w-7",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-3 text-center tracking-tight",children:t}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-400 mb-8 leading-relaxed text-center font-medium",children:e}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:s,className:"flex-1 py-3.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl font-bold text-xs uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-colors",children:"Cancelar"}),i.jsx("button",{onClick:r,className:`flex-1 py-3.5 rounded-xl font-bold text-xs uppercase tracking-wider text-white shadow-lg active:scale-95 transition-all ${n==="danger"?"bg-rose-500 hover:bg-rose-600 shadow-rose-500/25":"bg-zinc-900 dark:bg-white dark:text-zinc-900"}`,children:"Confirmar"})]})]})]})}function bM(){var F,ne,ue,fe,ce;const[t,e]=k.useState(()=>{try{const W=localStorage.getItem(o1);return W?JSON.parse(W):[]}catch{return[]}}),[n,r]=k.useState(!1),[s,a]=k.useState(null),[o,l]=k.useState(null),[c,u]=k.useState(""),[h,p]=k.useState(null),[m,y]=k.useState(null),[j,_]=k.useState("synced"),[T,v]=k.useState(!1),[w,N]=k.useState("suppliers"),P=k.useRef(null),[L,R]=k.useState(null),[b,g]=k.useState({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),z=[{id:"cotacao",label:"Cotao",icon:""},{id:"catalogo",label:"Catlogo",icon:""},{id:"contrato",label:"Contrato",icon:""},{id:"tecnico",label:"Tcnico",icon:""},{id:"outros",label:"Outros",icon:""}],[C,D]=k.useState(!1),[M,I]=k.useState(null),[xe,ve]=k.useState(null),[je,de]=k.useState("cotacao"),J=k.useRef(null),[oe,le]=k.useState([]),[ke,U]=k.useState("");k.useEffect(()=>{(async()=>{try{const X=await $e.getInventory();X!=null&&X.items&&le(X.items)}catch(X){console.error("Error loading inventory:",X)}})()},[]),k.useEffect(()=>{(async()=>{try{const X=await $e.getSuppliers();X!=null&&X.suppliers&&e(X.suppliers)}catch(X){console.error("Error loading suppliers:",X)}finally{v(!0)}})()},[]),k.useEffect(()=>{if(localStorage.setItem(o1,JSON.stringify(t)),T){_("syncing");const W=setTimeout(async()=>{try{const X=await $e.syncSuppliers(t);_(X?"synced":"error")}catch{_("error")}},1500);return()=>clearTimeout(W)}},[t,T]);const se=k.useCallback((W,X="success")=>{y({message:W,type:X})},[]),A=k.useMemo(()=>{if(!c.trim())return t;const W=c.toLowerCase();return t.filter(X=>{var Ne,V,Y;return((Ne=X.name)==null?void 0:Ne.toLowerCase().includes(W))||((V=X.company)==null?void 0:V.toLowerCase().includes(W))||((Y=X.email)==null?void 0:Y.toLowerCase().includes(W))})},[t,c]),q=k.useMemo(()=>{if(!ke.trim())return oe.slice(0,10);const W=ke.toLowerCase();return oe.filter(X=>{var Ne;return(Ne=X.name)==null?void 0:Ne.toLowerCase().includes(W)}).slice(0,10)},[oe,ke]),$=()=>{g({name:"",company:"",email:"",phone:"",whatsapp:"",address:"",notes:"",linkedItems:[],documents:[]}),a(null),r(!0)},re=W=>{g({name:W.name||"",company:W.company||"",email:W.email||"",phone:W.phone||"",whatsapp:W.whatsapp||"",address:W.address||"",notes:W.notes||"",linkedItems:W.linkedItems||[],documents:W.documents||[]}),a(W),l(null),r(!0)},S=()=>{if(!b.name.trim()){se("Nome  obrigatrio","error");return}if(s)e(W=>W.map(X=>X.id===s.id?{...X,...b,updatedAt:new Date().toISOString()}:X)),se("Fornecedor atualizado!");else{const W={id:Date.now().toString(),...b,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};e(X=>[W,...X]),se("Fornecedor adicionado!")}r(!1),a(null)},O=W=>{p({title:"Excluir Fornecedor",message:`Deseja excluir "${W.name}"? Esta ao no pode ser desfeita.`,type:"danger",onConfirm:()=>{e(X=>X.filter(Ne=>Ne.id!==W.id)),l(null),p(null),se("Fornecedor excludo")},onCancel:()=>p(null)})},H=W=>{b.linkedItems.find(X=>X.itemId===W.id)||(g(X=>({...X,linkedItems:[...X.linkedItems,{itemId:W.id,itemName:W.name}]})),U(""))},Z=W=>{g(X=>({...X,linkedItems:X.linkedItems.filter(Ne=>Ne.itemId!==W)}))},me=W=>{if(W===0)return"0 B";const X=1024,Ne=["B","KB","MB","GB"],V=Math.floor(Math.log(W)/Math.log(X));return parseFloat((W/Math.pow(X,V)).toFixed(1))+" "+Ne[V]},pe=W=>W.startsWith("image/")?"":W==="application/pdf"?"":W.includes("spreadsheet")||W.includes("excel")?"":W.includes("document")||W.includes("word")?"":"",we=k.useCallback(W=>{const Ne=["image/jpeg","image/png","image/webp","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"];Array.from(W).forEach(V=>{if(V.size>5242880){se(`${V.name} excede 5MB`,"error");return}if(!Ne.includes(V.type)&&!V.type.startsWith("image/")){se("Formato no suportado","error");return}I(V.name);const Y=new FileReader;Y.onload=K=>{const ie={id:Date.now().toString()+Math.random().toString(36).substr(2,9),name:V.name,type:V.type,size:V.size,dataUrl:K.target.result,uploadedAt:new Date().toISOString(),category:je};g(Te=>({...Te,documents:[...Te.documents,ie]})),I(null),se("Documento anexado!")},Y.onerror=()=>{I(null),se("Erro ao ler arquivo","error")},Y.readAsDataURL(V)})},[je,se]),Se=k.useCallback(W=>{W.preventDefault(),W.stopPropagation(),D(!0)},[]),ze=k.useCallback(W=>{W.preventDefault(),W.stopPropagation(),D(!1)},[]),De=k.useCallback(W=>{W.preventDefault(),W.stopPropagation(),D(!1);const X=W.dataTransfer.files;X.length>0&&we(X)},[we]),Xe=W=>{g(X=>({...X,documents:X.documents.filter(Ne=>Ne.id!==W)})),se("Documento removido")},Pe=W=>{const X=document.createElement("a");X.href=W.dataUrl,X.download=W.name,document.body.appendChild(X),X.click(),document.body.removeChild(X)},Qe=W=>{window.open(`tel:${W}`,"_self")},Ht=W=>{window.open(`mailto:${W}`,"_self")},Ct=W=>{const X=W.replace(/\D/g,"");window.open(`https://wa.me/${X}`,"_blank")};return i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-violet-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-violet-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Fornecedores"}),i.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${j==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":j==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[i.jsx("div",{className:`w-1 h-1 rounded-full ${j==="syncing"?"bg-amber-500":j==="error"?"bg-red-500":"bg-emerald-500"}`}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:j==="syncing"?"Syncing":j==="error"?"Error":"Cloud Active"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Gesto de fornecedores e contatos"})]}),i.jsxs("button",{onClick:$,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[i.jsx("svg",{className:"h-5 w-5 transition-transform group-hover:rotate-90",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v16m8-8H4"})}),"Adicionar Fornecedor"]})]}),i.jsx("section",{className:"relative z-10",children:i.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800/50 p-1 rounded-xl inline-flex",children:[i.jsx("button",{onClick:()=>N("suppliers"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${w==="suppliers"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Fornecedores"}),i.jsx("button",{onClick:()=>N("quotes"),className:`px-6 py-2.5 rounded-lg text-sm font-semibold transition-all touch-manipulation ${w==="quotes"?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-300"}`,children:"Oramentos"})]})}),w==="suppliers"&&i.jsx("section",{className:"relative z-10",children:i.jsx("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-5 border border-zinc-200/50 dark:border-white/10 shadow-lg",children:i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400",children:i.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),i.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3.5 rounded-xl bg-zinc-50 dark:bg-zinc-900/50 border border-zinc-200/50 dark:border-white/5 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-zinc-900 dark:focus:ring-white transition-all placeholder:text-zinc-400",placeholder:"Buscar fornecedor...",value:c,onChange:W=>u(W.target.value)})]})})}),w==="suppliers"&&i.jsx("section",{className:"relative z-10",children:A.length===0?i.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-zinc-100 dark:bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("svg",{className:"w-10 h-10 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhum fornecedor"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione seu primeiro fornecedor para comear"}),i.jsx("button",{onClick:$,className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Adicionar Fornecedor"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:A.map(W=>{var X,Ne,V;return i.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},onClick:()=>l(W),className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all cursor-pointer group",children:[i.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-violet-500/25",children:((Ne=(X=W.name)==null?void 0:X.charAt(0))==null?void 0:Ne.toUpperCase())||"?"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:W.name}),W.company&&i.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:W.company})]})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[W.phone&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[i.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{className:"truncate",children:W.phone})]}),W.email&&i.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-600 dark:text-zinc-400",children:[i.jsx("svg",{className:"w-4 h-4 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{className:"truncate",children:W.email})]})]}),((V=W.linkedItems)==null?void 0:V.length)>0&&i.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[i.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),i.jsxs("span",{className:"text-xs font-bold text-violet-600 dark:text-violet-400",children:[W.linkedItems.length," ",W.linkedItems.length===1?"item":"itens"]})]})]},W.id)})})}),w==="quotes"&&(()=>{const W=t.filter(X=>(X.documents||[]).some(Ne=>Ne.category==="cotacao"));return i.jsxs("section",{className:"relative z-10",children:[i.jsx("input",{ref:P,type:"file",accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:X=>{var Ne;if((Ne=X.target.files)!=null&&Ne.length&&L){const V=X.target.files[0];if(V.size>5*1024*1024){se("Arquivo muito grande (mx 5MB)","error");return}const Y=new FileReader;Y.onload=K=>{const ie={id:`doc_${Date.now()}`,name:V.name,type:V.type,size:V.size,dataUrl:K.target.result,uploadedAt:new Date().toISOString(),category:"cotacao"};e(Te=>Te.map(Ee=>Ee.id===L?{...Ee,documents:[...Ee.documents||[],ie]}:Ee)),se("Cotao adicionada"),R(null)},Y.readAsDataURL(V)}X.target.value=""}}),W.length===0?i.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2.5rem] p-12 border border-zinc-200/50 dark:border-white/10 text-center shadow-lg",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-amber-100 to-orange-100 dark:from-amber-500/10 dark:to-orange-500/10 rounded-3xl flex items-center justify-center mx-auto mb-6",children:i.jsx("svg",{className:"w-10 h-10 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Nenhuma cotao"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-6",children:"Adicione cotaes aos seus fornecedores"}),i.jsx("button",{onClick:()=>N("suppliers"),className:"px-6 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl font-bold text-sm hover:scale-105 active:scale-95 transition-all",children:"Ver Fornecedores"})]}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:W.map(X=>{var V,Y;const Ne=(X.documents||[]).filter(K=>K.category==="cotacao");return i.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-4},className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-lg hover:shadow-2xl transition-all",children:[i.jsxs("div",{className:"flex items-start gap-4 mb-5",children:[i.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-amber-500/25",children:((Y=(V=X.name)==null?void 0:V.charAt(0))==null?void 0:Y.toUpperCase())||"?"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white truncate",children:X.name}),X.company&&i.jsx("p",{className:"text-sm text-zinc-500 dark:text-zinc-400 truncate",children:X.company})]}),i.jsx("button",{onClick:()=>{var K;R(X.id),(K=P.current)==null||K.click()},className:"w-10 h-10 rounded-xl bg-amber-50 dark:bg-amber-500/10 flex items-center justify-center text-amber-500 hover:bg-amber-100 dark:hover:bg-amber-500/20 transition-colors touch-manipulation",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})})})]}),i.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-amber-50 dark:bg-amber-500/10 rounded-xl border border-amber-100 dark:border-amber-500/20 mb-4",children:[i.jsx("svg",{className:"w-4 h-4 text-amber-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),i.jsxs("span",{className:"text-xs font-bold text-amber-600 dark:text-amber-400",children:[Ne.length," ",Ne.length===1?"cotao":"cotaes"]})]}),i.jsx("div",{className:"space-y-2",children:Ne.map(K=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl group hover:bg-zinc-100 dark:hover:bg-zinc-800/50 transition-colors",children:[K.type.startsWith("image/")?i.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 shadow-sm",style:{backgroundImage:`url(${K.dataUrl})`}}):i.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center shrink-0 ${K.type==="application/pdf"?"bg-red-100 dark:bg-red-500/20":"bg-blue-100 dark:bg-blue-500/20"}`,children:K.type==="application/pdf"?i.jsx("svg",{className:"w-5 h-5 text-red-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4z"})}):i.jsx("svg",{className:"w-5 h-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate",children:K.name}),i.jsxs("p",{className:"text-xs text-zinc-500 dark:text-zinc-400",children:[me(K.size),"  ",new Date(K.uploadedAt).toLocaleDateString("pt-BR")]})]}),i.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[i.jsx("button",{onClick:()=>Pe(K),className:"w-8 h-8 flex items-center justify-center rounded-lg text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-500/10 transition-colors touch-manipulation",title:"Baixar",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),i.jsx("button",{onClick:()=>{e(ie=>ie.map(Te=>Te.id===X.id?{...Te,documents:Te.documents.filter(Ee=>Ee.id!==K.id)}:Te)),se("Cotao removida")},className:"w-8 h-8 flex items-center justify-center rounded-lg text-red-500 hover:bg-red-50 dark:hover:bg-red-500/10 transition-colors touch-manipulation",title:"Remover",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},K.id))})]},X.id)})})]})})(),lt.createPortal(i.jsx(_e,{children:n&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[i.jsx(Bh,{}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>r(!1)}),i.jsxs(B.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col",style:{maxHeight:"calc(100vh - 100px)"},children:[i.jsxs("div",{className:"sticky top-0 bg-white dark:bg-zinc-900 px-6 py-5 border-b border-zinc-100 dark:border-white/5 flex items-center justify-between z-10 shrink-0",children:[i.jsx("h3",{className:"text-xl font-bold text-zinc-900 dark:text-white tracking-tight",children:s?"Editar Fornecedor":"Novo Fornecedor"}),i.jsx("button",{onClick:()=>r(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"p-6 space-y-5 overflow-y-auto flex-1",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Informaes"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Nome *"}),i.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome do fornecedor",value:b.name,onChange:W=>g(X=>({...X,name:W.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Empresa"}),i.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Nome da empresa",value:b.company,onChange:W=>g(X=>({...X,company:W.target.value}))})]})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[i.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Contato"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Telefone"}),i.jsx("input",{type:"tel",inputMode:"tel",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"(00) 00000-0000",value:b.phone,onChange:W=>g(X=>({...X,phone:W.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Email"}),i.jsx("input",{type:"email",inputMode:"email",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"email@exemplo.com",value:b.email,onChange:W=>g(X=>({...X,email:W.target.value}))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Endereo"}),i.jsx("input",{type:"text",className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Endereo completo",value:b.address,onChange:W=>g(X=>({...X,address:W.target.value}))})]})]}),i.jsxs("div",{className:"space-y-4 pt-4 border-t border-zinc-100 dark:border-white/5",children:[i.jsx("h4",{className:"text-[10px] font-bold text-violet-500 uppercase tracking-widest",children:"Itens Vinculados"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"text",className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all",placeholder:"Buscar item do estoque...",value:ke,onChange:W=>U(W.target.value)}),ke&&q.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-zinc-800 rounded-xl border border-zinc-200 dark:border-zinc-700 shadow-xl max-h-40 overflow-y-auto z-20",children:q.map(W=>i.jsxs("button",{onClick:()=>H(W),className:"w-full px-4 py-3 text-left text-sm font-medium text-zinc-700 dark:text-zinc-300 hover:bg-zinc-50 dark:hover:bg-zinc-700 transition-colors flex items-center justify-between",children:[i.jsx("span",{children:W.name}),i.jsx("svg",{className:"w-4 h-4 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})]},W.id))})]}),b.linkedItems.length>0&&i.jsx("div",{className:"space-y-2",children:b.linkedItems.map(W=>i.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-100 dark:border-violet-500/20",children:[i.jsx("span",{className:"text-sm font-medium text-violet-700 dark:text-violet-300",children:W.itemName}),i.jsx("button",{onClick:()=>Z(W.itemId),className:"w-8 h-8 flex items-center justify-center rounded-lg text-violet-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},W.itemId))})]}),i.jsxs("div",{className:"pt-5 border-t border-zinc-100 dark:border-white/5",children:[i.jsx("input",{ref:J,type:"file",multiple:!0,accept:"image/*,.pdf,.doc,.docx,.xls,.xlsx",className:"hidden",onChange:W=>we(W.target.files)}),((F=b.documents)==null?void 0:F.length)>0&&i.jsx("div",{className:"mb-4 space-y-3",children:b.documents.map(W=>{const X=W.type.startsWith("image/");return i.jsxs("div",{className:"flex items-center gap-3",children:[X?i.jsx("div",{className:"w-10 h-10 rounded-lg bg-cover bg-center shrink-0 cursor-pointer",style:{backgroundImage:`url(${W.dataUrl})`},onClick:()=>ve(W)}):i.jsx("div",{className:"w-10 h-10 rounded-lg bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center shrink-0 text-zinc-400",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm text-zinc-900 dark:text-white truncate",children:W.name}),i.jsx("p",{className:"text-xs text-zinc-400",children:me(W.size)})]}),i.jsx("button",{type:"button",onClick:()=>Xe(W.id),className:"w-8 h-8 flex items-center justify-center text-zinc-300 hover:text-red-500 transition-colors touch-manipulation",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]},W.id)})}),i.jsxs("button",{type:"button",onDragOver:Se,onDragLeave:ze,onDrop:De,onClick:()=>{var W;return(W=J.current)==null?void 0:W.click()},disabled:!!M,className:"flex items-center gap-2 text-blue-500 hover:text-blue-600 transition-colors touch-manipulation",children:[M?i.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"}):i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.375 12.739l-7.693 7.693a4.5 4.5 0 01-6.364-6.364l10.94-10.94A3 3 0 1119.5 7.372L8.552 18.32m.009-.01l-.01.01m5.699-9.941l-7.81 7.81a1.5 1.5 0 002.112 2.13"})}),i.jsx("span",{className:"text-sm font-medium",children:M?"Enviando...":"Anexar arquivo"})]})]}),i.jsxs("div",{className:"pt-4 border-t border-zinc-100 dark:border-white/5",children:[i.jsx("label",{className:"block text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-wider mb-2",children:"Observaes"}),i.jsx("textarea",{className:"w-full px-4 py-4 rounded-2xl bg-zinc-50 dark:bg-zinc-800 border border-zinc-200/50 dark:border-zinc-700 text-zinc-900 dark:text-white font-medium focus:outline-none focus:ring-2 focus:ring-violet-500/50 transition-all resize-none",rows:3,placeholder:"Notas adicionais...",value:b.notes,onChange:W=>g(X=>({...X,notes:W.target.value}))})]})]}),i.jsxs("div",{className:"bg-white dark:bg-zinc-900 px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3 shrink-0",children:[i.jsx("button",{onClick:()=>r(!1),className:"flex-1 py-4 rounded-2xl font-bold text-xs uppercase tracking-wider text-zinc-600 dark:text-zinc-400 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-[0.98] touch-manipulation",children:"Cancelar"}),i.jsx("button",{onClick:S,className:"flex-[2] py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg shadow-zinc-900/10 hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:s?"Salvar":"Adicionar"})]})]})]})}),document.body),lt.createPortal(i.jsx(_e,{children:o&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-start justify-center overflow-y-auto p-4",style:{paddingTop:"80px",paddingBottom:"40px"},children:[i.jsx(Bh,{}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>l(null)}),i.jsxs(B.div,{initial:{opacity:0,y:30,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:30,scale:.98},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-lg mx-4 my-6 bg-white dark:bg-zinc-900 rounded-3xl shadow-2xl flex flex-col overflow-hidden",style:{maxHeight:"calc(100vh - 100px)"},children:[i.jsxs("div",{className:"relative px-6 py-8 text-center border-b border-zinc-100 dark:border-white/5",children:[i.jsx("button",{onClick:()=>l(null),className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-white transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-white text-3xl font-bold shadow-xl shadow-violet-500/30 mx-auto mb-4",children:((ue=(ne=o.name)==null?void 0:ne.charAt(0))==null?void 0:ue.toUpperCase())||"?"}),i.jsx("h2",{className:"text-2xl font-bold text-zinc-900 dark:text-white mb-1",children:o.name}),o.company&&i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400",children:o.company})]}),i.jsx("div",{className:"px-6 py-4 border-b border-zinc-100 dark:border-white/5",children:i.jsxs("div",{className:"flex gap-3",children:[o.phone&&i.jsxs("button",{onClick:()=>Qe(o.phone),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[i.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),i.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Ligar"})]}),o.email&&i.jsxs("button",{onClick:()=>Ht(o.email),className:"flex-1 py-4 px-4 bg-zinc-100 dark:bg-zinc-800 rounded-2xl flex flex-col items-center gap-2 hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all active:scale-95 touch-manipulation",children:[i.jsx("svg",{className:"w-6 h-6 text-violet-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),i.jsx("span",{className:"text-[10px] font-bold text-zinc-600 dark:text-zinc-400 uppercase tracking-wider",children:"Email"})]}),o.whatsapp&&i.jsxs("button",{onClick:()=>Ct(o.whatsapp),className:"flex-1 py-4 px-4 bg-emerald-50 dark:bg-emerald-500/10 rounded-2xl flex flex-col items-center gap-2 hover:bg-emerald-100 dark:hover:bg-emerald-500/20 transition-all active:scale-95 touch-manipulation",children:[i.jsx("svg",{className:"w-6 h-6 text-emerald-500",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),i.jsx("span",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider",children:"WhatsApp"})]})]})}),i.jsxs("div",{className:"px-6 py-5 space-y-4",children:[o.address&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Endereo"}),i.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:o.address})]}),((fe=o.linkedItems)==null?void 0:fe.length)>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Itens Fornecidos"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:o.linkedItems.map(W=>i.jsx("span",{className:"px-3 py-1.5 bg-violet-50 dark:bg-violet-500/10 text-violet-600 dark:text-violet-400 rounded-lg text-xs font-bold",children:W.itemName},W.itemId))})]}),((ce=o.documents)==null?void 0:ce.length)>0&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Documentos"}),i.jsx("div",{className:"space-y-2",children:o.documents.map(W=>{const X=z.find(Ne=>Ne.id===W.category);return i.jsxs("div",{onClick:()=>Pe(W),className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl border border-zinc-100 dark:border-zinc-700 cursor-pointer hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-all touch-manipulation active:scale-[0.98]",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-900/30 dark:to-indigo-900/30 flex items-center justify-center text-xl shrink-0",children:pe(W.type)}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h5",{className:"text-sm font-medium text-zinc-900 dark:text-white truncate mb-0.5",children:W.name}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-[10px] text-zinc-400",children:me(W.size)}),X&&i.jsxs("span",{className:"text-[10px] font-bold text-violet-500",children:[X.icon," ",X.label]})]})]}),i.jsx("svg",{className:"w-5 h-5 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})]},W.id)})})]}),o.notes&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Observaes"}),i.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:o.notes})]})]}),i.jsxs("div",{className:"px-6 py-5 border-t border-zinc-100 dark:border-white/5 flex gap-3",children:[i.jsx("button",{onClick:()=>re(o),className:"flex-1 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-xs uppercase tracking-wider shadow-lg hover:shadow-xl active:scale-[0.98] transition-all touch-manipulation",children:"Editar"}),i.jsx("button",{onClick:()=>O(o),className:"py-4 px-6 bg-rose-50 dark:bg-rose-500/10 text-rose-600 dark:text-rose-400 rounded-2xl font-bold text-xs uppercase tracking-wider hover:bg-rose-100 dark:hover:bg-rose-500/20 transition-all active:scale-[0.98] touch-manipulation",children:"Excluir"})]})]})]})}),document.body),i.jsx(_e,{children:h&&i.jsx(vM,{...h})}),lt.createPortal(i.jsx(_e,{children:xe&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] flex items-center justify-center bg-black/95 backdrop-blur-3xl",onClick:()=>ve(null),children:[i.jsx(Bh,{}),i.jsxs(B.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},className:"absolute top-0 left-0 right-0 h-16 flex items-center justify-between px-6 bg-gradient-to-b from-black/50 to-transparent z-20",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/10 flex items-center justify-center",children:xe.type.startsWith("image/")?i.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}):i.jsx("svg",{className:"w-5 h-5 text-red-400",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4z"})})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-semibold text-white truncate max-w-[200px] md:max-w-none",children:xe.name}),i.jsx("p",{className:"text-xs text-white/50",children:me(xe.size)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:W=>{W.stopPropagation(),Pe(xe)},className:"px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-white text-sm font-semibold flex items-center gap-2 transition-all touch-manipulation",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),i.jsx("span",{className:"hidden md:inline",children:"Download"})]}),i.jsx("button",{onClick:()=>ve(null),className:"w-10 h-10 rounded-xl bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-all touch-manipulation",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]}),i.jsx(B.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative max-w-5xl max-h-[85vh] w-full mx-4 flex items-center justify-center",onClick:W=>W.stopPropagation(),children:xe.type.startsWith("image/")?i.jsx("img",{src:xe.dataUrl,alt:xe.name,className:"max-w-full max-h-[85vh] object-contain rounded-2xl shadow-2xl ring-1 ring-white/10"}):xe.type==="application/pdf"?i.jsx("div",{className:"w-full h-[85vh] bg-white rounded-2xl shadow-2xl overflow-hidden",children:i.jsx("iframe",{src:xe.dataUrl,title:xe.name,className:"w-full h-full"})}):i.jsxs("div",{className:"bg-zinc-900 rounded-3xl p-12 text-center max-w-md",children:[i.jsx("div",{className:"w-20 h-20 rounded-2xl bg-white/10 flex items-center justify-center mx-auto mb-6",children:i.jsx("svg",{className:"w-10 h-10 text-white/60",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})})}),i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:xe.name}),i.jsx("p",{className:"text-sm text-white/50 mb-6",children:"Este tipo de arquivo no pode ser visualizado diretamente."}),i.jsx("button",{onClick:W=>{W.stopPropagation(),Pe(xe)},className:"px-8 py-4 bg-white text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wider hover:scale-105 active:scale-95 transition-all",children:"Baixar Arquivo"})]})}),i.jsx(B.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.3},className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-xs text-white/30",children:"Pressione ESC ou clique fora para fechar"})]})}),document.body),i.jsx(_e,{children:m&&i.jsx(yM,{...m,onClose:()=>y(null)})})]})}const MN={success:[10],warning:[15,50,15],error:[30,100,30],selection:[5],impactLight:[8],impactMedium:[15],impactHeavy:[25],scrub:[3],scanSuccess:[10,30,10,30,10],approval:[10,50,20,50,10],notification:[15,100,15,100,30]};function bu(){return"vibrate"in navigator}function wM(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function Id(t="selection"){if(!bu())return!1;const e=MN[t];if(!e)return console.warn(`Unknown haptic type: ${t}`),!1;try{return navigator.vibrate(e),!0}catch(n){return console.warn("Haptic feedback failed:",n),!1}}function kM(t){if(!bu())return!1;try{return navigator.vibrate(t),!0}catch{return!1}}function jM(){bu()&&navigator.vibrate(0)}let l1=0;const NM=50;function zM(){const t=Date.now();return t-l1<NM?!1:(l1=t,Id("scrub"))}async function _M(t={}){const{reason:e="Confirme sua identidade",timeout:n=6e4}=t;if(!window.PublicKeyCredential)throw new Error("Autenticao biomtrica no suportada neste navegador");if(!await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable())throw new Error("Nenhum autenticador biomtrico disponvel");const s=new Uint8Array(32);crypto.getRandomValues(s);const a={challenge:s,rp:{name:"Padoca App",id:window.location.hostname},user:{id:new Uint8Array(16),name:"padoca-user",displayName:"Usurio Padoca"},pubKeyCredParams:[{alg:-7,type:"public-key"},{alg:-257,type:"public-key"}],authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"},timeout:n};try{if(await navigator.credentials.create({publicKey:a}))return Id("approval"),{success:!0,timestamp:new Date().toISOString()};throw new Error("Autenticao cancelada")}catch(o){throw Id("error"),o.name==="NotAllowedError"?new Error("Autenticao negada pelo usurio"):o.name==="SecurityError"?new Error("Contexto de segurana invlido"):o}}async function CM(){if(!window.PublicKeyCredential)return!1;try{return await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable()}catch{return!1}}const Ze={isSupported:bu,isIOS:wM,trigger:Id,triggerCustom:kM,cancel:jM,scrub:zM,authenticate:_M,canUseBiometric:CM,patterns:MN},Lm=t=>t?new Date(t).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}):"-",EM=t=>t?new Date(t).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}):"";function SM({entry:t,isActive:e,onClick:n,position:r}){const s=o=>{switch(o){case"ENTRY":return"bg-emerald-500";case"EXIT":return"bg-rose-500";case"ADJUSTMENT":return"bg-amber-500";case"CREATE":return"bg-violet-500";case"DELETE":return"bg-zinc-500";default:return"bg-indigo-500"}},a=o=>{switch(o){case"ENTRY":return"";case"EXIT":return"";case"ADJUSTMENT":return"";case"CREATE":return"+";case"DELETE":return"";default:return""}};return i.jsxs(B.button,{onClick:()=>{Ze.trigger("selection"),n()},className:`absolute z-10 flex flex-col items-center transition-all duration-300 ${e?"scale-125":"scale-100 opacity-70 hover:opacity-100"}`,style:{left:`${r}%`},whileHover:{scale:e?1.25:1.1},whileTap:{scale:.95},children:[i.jsx("div",{className:`w-4 h-4 rounded-full ${s(t.action)} shadow-lg flex items-center justify-center`,children:i.jsx("span",{className:"text-[8px] text-white font-bold",children:a(t.action)})}),e&&i.jsx(B.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},className:"mt-2 px-2 py-1 bg-white dark:bg-zinc-800 rounded-lg shadow-lg text-[9px] font-bold text-zinc-700 dark:text-zinc-200 whitespace-nowrap",children:Lm(t.timestamp)})]})}function TM({previousState:t,currentState:e,action:n}){const r=(o,l)=>{if(!o||!l)return null;const c=l-o;return c===0?null:{value:c,isPositive:c>0,percentage:o!==0?(c/o*100).toFixed(1):""}},s=r(t==null?void 0:t.stock,e==null?void 0:e.stock),a=r(t==null?void 0:t.price,e==null?void 0:e.price);return i.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 shadow-xl",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n==="ENTRY"?"bg-emerald-500/20 text-emerald-600":n==="EXIT"?"bg-rose-500/20 text-rose-600":"bg-violet-500/20 text-violet-600"}`,children:i.jsx("span",{className:"text-xl font-bold",children:n==="ENTRY"?"":n==="EXIT"?"":""})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Estado do Estoque"}),i.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:(e==null?void 0:e.productName)||"Produto"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-zinc-50 dark:bg-white/5 rounded-xl p-4",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Quantidade"}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsx("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white tabular-nums",children:(e==null?void 0:e.stock)??0}),s&&i.jsxs("span",{className:`text-sm font-bold tabular-nums ${s.isPositive?"text-emerald-500":"text-rose-500"}`,children:[s.isPositive?"+":"",s.value]})]}),t&&i.jsxs("p",{className:"text-[10px] text-zinc-400 mt-1",children:["Anterior: ",t.stock??0]})]}),i.jsxs("div",{className:"bg-zinc-50 dark:bg-white/5 rounded-xl p-4",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Preo Unit."}),i.jsxs("div",{className:"flex items-end gap-2",children:[i.jsxs("span",{className:"text-2xl font-bold text-zinc-900 dark:text-white tabular-nums",children:["R$ ",((e==null?void 0:e.price)??0).toFixed(2)]}),a&&i.jsxs("span",{className:`text-sm font-bold tabular-nums ${a.isPositive?"text-rose-500":"text-emerald-500"}`,children:[a.isPositive?"+":"",a.percentage,"%"]})]}),t&&i.jsxs("p",{className:"text-[10px] text-zinc-400 mt-1",children:["Anterior: R$ ",(t.price??0).toFixed(2)]})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-white/5 flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Responsvel"}),i.jsx("p",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:(e==null?void 0:e.userName)||"Sistema"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Timestamp"}),i.jsx("p",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-300",children:EM(e==null?void 0:e.timestamp)})]})]})]})}function IM({entries:t=[],onSelectEntry:e}){var m,y;const[n,r]=k.useState(t.length-1),s=k.useRef(null),a=k.useRef(!1),o=k.useMemo(()=>[...t].sort((j,_)=>new Date(j.timestamp)-new Date(_.timestamp)),[t]),l=o[n],c=k.useCallback(j=>o.length<=1?50:j/(o.length-1)*100,[o.length]),u=k.useCallback(j=>{if(!s.current)return;const _=s.current.getBoundingClientRect(),T=j.type.includes("touch")?j.touches[0].clientX-_.left:j.clientX-_.left,v=Math.max(0,Math.min(100,T/_.width*100));let w=0,N=1/0;o.forEach((P,L)=>{const R=c(L),b=Math.abs(R-v);b<N&&(N=b,w=L)}),w!==n&&(Ze.scrub(),r(w),e==null||e(o[w]))},[o,n,c,e]),h=()=>{a.current=!0,Ze.trigger("impactLight")},p=()=>{a.current=!1,Ze.trigger("impactMedium")};return t.length===0?i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-8 border border-zinc-200/50 dark:border-white/5 text-center",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Histrico Vazio"}),i.jsx("p",{className:"text-sm text-zinc-500",children:"Nenhuma movimentao registrada ainda"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Time Travel"}),i.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Histrico de Auditoria"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-500 animate-pulse"}),i.jsxs("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest",children:[o.length," registros"]})]})]}),i.jsxs("div",{ref:s,className:"relative h-20 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-3xl rounded-2xl border border-zinc-200/50 dark:border-white/5 cursor-grab active:cursor-grabbing",onMouseDown:h,onMouseUp:p,onMouseLeave:p,onMouseMove:j=>a.current&&u(j),onClick:u,onTouchStart:h,onTouchEnd:p,onTouchMove:u,children:[i.jsx("div",{className:"absolute top-1/2 left-4 right-4 h-1 bg-zinc-200 dark:bg-white/10 rounded-full -translate-y-1/2",children:i.jsx(B.div,{className:"h-full bg-gradient-to-r from-violet-500 to-indigo-500 rounded-full",style:{width:`${c(n)}%`},transition:{type:"spring",damping:20,stiffness:300}})}),i.jsx("div",{className:"absolute top-1/2 left-4 right-4 -translate-y-1/2",children:o.map((j,_)=>i.jsx(SM,{entry:j,isActive:_===n,position:c(_),onClick:()=>{r(_),e==null||e(j)}},j.id||_))}),i.jsxs("div",{className:"absolute bottom-2 left-4 right-4 flex justify-between",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400",children:Lm((m=o[0])==null?void 0:m.timestamp)}),i.jsx("span",{className:"text-[9px] font-bold text-zinc-400",children:Lm((y=o[o.length-1])==null?void 0:y.timestamp)})]})]}),i.jsx(_e,{mode:"wait",children:l&&i.jsx(TM,{previousState:o[n-1],currentState:l,action:l.action},n)}),i.jsxs("div",{className:"flex justify-center gap-3",children:[i.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{n>0&&(Ze.trigger("selection"),r(n-1))},disabled:n===0,className:"w-12 h-12 rounded-xl bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-600 dark:text-zinc-300 disabled:opacity-30 transition-all",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),i.jsx("div",{className:"flex-1 flex items-center justify-center",children:i.jsxs("span",{className:"text-sm font-bold text-zinc-900 dark:text-white tabular-nums",children:[n+1," / ",o.length]})}),i.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{n<o.length-1&&(Ze.trigger("selection"),r(n+1))},disabled:n===o.length-1,className:"w-12 h-12 rounded-xl bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-600 dark:text-zinc-300 disabled:opacity-30 transition-all",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]})]})}const AM=t=>(Number(t)||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),Jt={CRITICAL:{label:"Crtico",color:"rose",days:3,icon:""},WARNING:{label:"Ateno",color:"amber",days:7,icon:""},NORMAL:{label:"Normal",color:"emerald",days:14,icon:""},EXCESS:{label:"Excesso",color:"violet",days:999,icon:""}};function PM(t=[],e=30){const n=Date.now()-e*24*60*60*1e3,r=t.filter(o=>{const l=new Date(o.date||o.createdAt).getTime();return o.type==="exit"&&l>=n}),a=r.reduce((o,l)=>o+(Number(l.quantity)||0),0)/e;return{dailyRate:a,weeklyRate:a*7,monthlyRate:a*30,totalExits:r.length}}function RM(t,e){if(e<=0)return{daysUntil:1/0,date:null};const n=Math.floor(t/e),r=new Date;return r.setDate(r.getDate()+n),{daysUntil:n,date:r}}function DM(t,e=0,n=0){return n>e*3?Jt.EXCESS:t<=Jt.CRITICAL.days?Jt.CRITICAL:t<=Jt.WARNING.days?Jt.WARNING:Jt.NORMAL}function MM({prediction:t,onRestock:e,onDismiss:n}){const r=t.urgency;k.useState(!1)[0];const s={rose:"bg-rose-500/10 border-rose-500/20 text-rose-600 dark:text-rose-400",amber:"bg-amber-500/10 border-amber-500/20 text-amber-600 dark:text-amber-400",emerald:"bg-emerald-500/10 border-emerald-500/20 text-emerald-600 dark:text-emerald-400",violet:"bg-violet-500/10 border-violet-500/20 text-violet-600 dark:text-violet-400"},a={rose:"shadow-rose-500/20"};return i.jsxs(B.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,scale:.95},className:`bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[1.5rem] p-5 border border-zinc-200/50 dark:border-white/5 shadow-lg ${t.urgency.color==="rose"?a.rose:""}`,children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl ${s[r.color]} flex items-center justify-center text-lg`,children:r.icon}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-base font-bold text-zinc-900 dark:text-white truncate max-w-[180px]",children:t.productName}),i.jsx("p",{className:"text-[10px] font-medium text-zinc-400",children:t.category})]})]}),i.jsx("div",{className:`px-3 py-1.5 rounded-full border ${s[r.color]} text-[10px] font-bold uppercase tracking-wider`,children:r.label})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{className:"bg-zinc-50 dark:bg-white/5 rounded-xl p-3 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Estoque"}),i.jsx("p",{className:"text-xl font-bold text-zinc-900 dark:text-white tabular-nums",children:t.currentStock})]}),i.jsxs("div",{className:"bg-zinc-50 dark:bg-white/5 rounded-xl p-3 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Consumo/dia"}),i.jsx("p",{className:"text-xl font-bold text-zinc-900 dark:text-white tabular-nums",children:t.dailyRate.toFixed(1)})]}),i.jsxs("div",{className:`rounded-xl p-3 text-center ${s[r.color]}`,children:[i.jsx("p",{className:"text-[8px] font-bold uppercase tracking-widest mb-1",children:"Dias p/ Fim"}),i.jsx("p",{className:"text-xl font-bold tabular-nums",children:t.daysUntil===1/0?"":t.daysUntil})]})]}),t.trendData&&t.trendData.length>1&&i.jsxs("div",{className:"mb-4",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Tendncia 30d"}),i.jsx("div",{className:"h-12 flex items-end gap-0.5",children:t.trendData.map((o,l)=>{const c=Math.max(...t.trendData),u=c>0?o/c*100:0;return i.jsx("div",{className:`flex-1 rounded-t transition-all ${l===t.trendData.length-1?`bg-${r.color}-500`:"bg-zinc-200 dark:bg-zinc-700"}`,style:{height:`${Math.max(4,u)}%`}},l)})})]}),i.jsxs("div",{className:"bg-zinc-50 dark:bg-white/5 rounded-xl p-4 mb-4",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Recomendao"}),i.jsx("p",{className:"text-sm text-zinc-700 dark:text-zinc-300",children:t.daysUntil===1/0?"Estoque estvel. Sem consumo recente detectado.":t.daysUntil<=3?` Ao urgente! Estoque acaba em ${t.daysUntil} dias. Recomendado: +${t.suggestedRestock} unidades.`:t.daysUntil<=7?` Agende reposio. Estoque para ${t.daysUntil} dias. Sugesto: +${t.suggestedRestock} unidades.`:` Estoque confortvel para ${t.daysUntil} dias.`})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Ze.trigger("success"),e==null||e(t)},className:"flex-1 py-3 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-[11px] font-bold uppercase tracking-widest",children:"Criar Pedido"}),i.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{Ze.trigger("selection"),n==null||n(t.productId)},className:"px-4 py-3 bg-zinc-100 dark:bg-zinc-800 text-zinc-500 rounded-xl text-[11px] font-bold uppercase tracking-widest",children:"Ignorar"})]})]})}function LM({stats:t}){return i.jsxs("div",{className:"bg-white dark:bg-zinc-950 rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest",children:"Insights Preditivos"}),i.jsx("p",{className:"text-xl font-bold text-zinc-900 dark:text-white mt-1",children:"Anlise de Estoque"})]}),i.jsx("div",{className:"px-4 py-1.5 bg-violet-100 dark:bg-violet-500/20 rounded-full",children:i.jsxs("span",{className:"text-[10px] font-bold text-violet-600 dark:text-violet-400 uppercase",children:[t.totalAnalyzed," produtos"]})})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[i.jsxs("div",{className:"text-center p-3 bg-rose-50 dark:bg-rose-500/10 rounded-xl border border-rose-200/50 dark:border-rose-500/20",children:[i.jsx("p",{className:"text-[8px] font-bold text-rose-600 dark:text-rose-400 uppercase mb-1",children:"Crticos"}),i.jsx("p",{className:"text-2xl font-bold text-rose-600 dark:text-rose-400 tabular-nums",children:t.critical})]}),i.jsxs("div",{className:"text-center p-3 bg-amber-50 dark:bg-amber-500/10 rounded-xl border border-amber-200/50 dark:border-amber-500/20",children:[i.jsx("p",{className:"text-[8px] font-bold text-amber-600 dark:text-amber-400 uppercase mb-1",children:"Ateno"}),i.jsx("p",{className:"text-2xl font-bold text-amber-600 dark:text-amber-400 tabular-nums",children:t.warning})]}),i.jsxs("div",{className:"text-center p-3 bg-emerald-50 dark:bg-emerald-500/10 rounded-xl border border-emerald-200/50 dark:border-emerald-500/20",children:[i.jsx("p",{className:"text-[8px] font-bold text-emerald-600 dark:text-emerald-400 uppercase mb-1",children:"Normal"}),i.jsx("p",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:t.normal})]}),i.jsxs("div",{className:"text-center p-3 bg-violet-50 dark:bg-violet-500/10 rounded-xl border border-violet-200/50 dark:border-violet-500/20",children:[i.jsx("p",{className:"text-[8px] font-bold text-violet-600 dark:text-violet-400 uppercase mb-1",children:"Excesso"}),i.jsx("p",{className:"text-2xl font-bold text-violet-600 dark:text-violet-400 tabular-nums",children:t.excess})]})]}),t.totalRestockValue>0&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-100 dark:border-white/5 flex justify-between items-center",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Investimento Sugerido"}),i.jsx("span",{className:"text-lg font-bold text-zinc-900 dark:text-white tabular-nums",children:AM(t.totalRestockValue)})]})]})}function VM({products:t=[],movements:e=[],onCreateOrder:n,onDismiss:r}){const[s,a]=k.useState("all"),[o,l]=k.useState(new Set),c=k.useMemo(()=>t.filter(m=>!o.has(m.id)).map(m=>{const y=e.filter(N=>N.productId===m.id),j=PM(y,30),_=RM(m.currentStock||0,j.dailyRate),T=DM(_.daysUntil,m.minStock,m.currentStock),v=Math.ceil(j.dailyRate*14),w=Array(30).fill(0);return y.filter(N=>N.type==="exit").forEach(N=>{const P=Math.floor((Date.now()-new Date(N.date||N.createdAt).getTime())/864e5);P>=0&&P<30&&(w[29-P]+=Number(N.quantity)||0)}),{productId:m.id,productName:m.name,category:m.category,currentStock:m.currentStock||0,minStock:m.minStock||0,currentPrice:m.currentPrice||0,dailyRate:j.dailyRate,weeklyRate:j.weeklyRate,monthlyRate:j.monthlyRate,daysUntil:_.daysUntil,stockoutDate:_.date,urgency:T,suggestedRestock:v,restockValue:v*(m.currentPrice||0),trendData:w,confidence:j.totalExits>5?"Alta":j.totalExits>2?"Mdia":"Baixa"}}).sort((m,y)=>m.daysUntil-y.daysUntil),[t,e,o]),u=k.useMemo(()=>s==="all"?c.filter(m=>m.urgency!==Jt.EXCESS):s==="critical"?c.filter(m=>m.urgency===Jt.CRITICAL):s==="warning"?c.filter(m=>m.urgency===Jt.WARNING):s==="excess"?c.filter(m=>m.urgency===Jt.EXCESS):c,[c,s]),h=k.useMemo(()=>({totalAnalyzed:t.length,critical:c.filter(m=>m.urgency===Jt.CRITICAL).length,warning:c.filter(m=>m.urgency===Jt.WARNING).length,normal:c.filter(m=>m.urgency===Jt.NORMAL).length,excess:c.filter(m=>m.urgency===Jt.EXCESS).length,totalRestockValue:c.filter(m=>m.urgency===Jt.CRITICAL||m.urgency===Jt.WARNING).reduce((m,y)=>m+y.restockValue,0)}),[c,t.length]),p=m=>{l(y=>new Set([...y,m])),r==null||r(m)};return i.jsxs("div",{className:"space-y-6",children:[i.jsx(LM,{stats:h}),i.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide -mx-4 px-4 pb-1",children:[{id:"all",label:"Prioridade"},{id:"critical",label:"Crticos",count:h.critical},{id:"warning",label:"Ateno",count:h.warning},{id:"excess",label:"Excesso",count:h.excess}].map(m=>i.jsxs("button",{onClick:()=>{Ze.trigger("selection"),a(m.id)},className:`flex-shrink-0 px-5 py-3 min-h-[48px] rounded-full text-sm font-bold tracking-wide transition-all flex items-center gap-2 ${s===m.id?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 shadow-lg":"bg-white/80 dark:bg-zinc-800/50 backdrop-blur-xl text-zinc-600 dark:text-zinc-400 border border-zinc-200/50 dark:border-white/5"}`,children:[m.label,m.count!==void 0&&m.count>0&&i.jsx("span",{className:`w-5 h-5 rounded-full text-[10px] flex items-center justify-center ${s===m.id?"bg-white/20":"bg-zinc-200 dark:bg-zinc-700"}`,children:m.count})]},m.id))}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(_e,{mode:"popLayout",children:u.map(m=>i.jsx(MM,{prediction:m,onRestock:n,onDismiss:p},m.productId))}),u.length===0&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12 bg-white/60 dark:bg-zinc-900/40 backdrop-blur-3xl rounded-[2rem] border border-zinc-200/50 dark:border-white/5",children:[i.jsx("span",{className:"text-4xl mb-4 block",children:""}),i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:s==="critical"?"Nenhum item crtico":s==="warning"?"Nenhum item em ateno":"Estoque em dia!"}),i.jsx("p",{className:"text-sm text-zinc-500",children:"Todos os produtos esto com nveis adequados"})]})]})]})}const zn={IDLE:"idle",SCANNING:"scanning",FOUND:"found",NOT_FOUND:"not_found",ERROR:"error"};function OM({scanState:t}){const e="absolute w-6 h-6 border-white";return i.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:i.jsxs("div",{className:"relative w-64 h-64",children:[i.jsx("div",{className:`${e} top-0 left-0 border-t-4 border-l-4 rounded-tl-lg`}),i.jsx("div",{className:`${e} top-0 right-0 border-t-4 border-r-4 rounded-tr-lg`}),i.jsx("div",{className:`${e} bottom-0 left-0 border-b-4 border-l-4 rounded-bl-lg`}),i.jsx("div",{className:`${e} bottom-0 right-0 border-b-4 border-r-4 rounded-br-lg`}),t===zn.SCANNING&&i.jsx(B.div,{className:"absolute left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-violet-500 to-transparent",initial:{top:"0%"},animate:{top:"100%"},transition:{duration:2,repeat:1/0,ease:"linear"}}),i.jsx("div",{className:"absolute -bottom-16 left-0 right-0 flex justify-center",children:i.jsxs("div",{className:`px-4 py-2 rounded-full backdrop-blur-xl flex items-center gap-2 ${t===zn.FOUND?"bg-emerald-500/80":t===zn.NOT_FOUND?"bg-amber-500/80":t===zn.ERROR?"bg-rose-500/80":"bg-white/20"}`,children:[t===zn.SCANNING&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-white animate-pulse"}),i.jsx("span",{className:"text-xs font-bold text-white uppercase tracking-wider",children:"Escaneando..."})]}),t===zn.FOUND&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-sm",children:""}),i.jsx("span",{className:"text-xs font-bold text-white uppercase tracking-wider",children:"Produto Encontrado"})]}),t===zn.NOT_FOUND&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"text-sm",children:"?"}),i.jsx("span",{className:"text-xs font-bold text-white uppercase tracking-wider",children:"No Encontrado"})]}),t===zn.IDLE&&i.jsx("span",{className:"text-xs font-medium text-white/80",children:"Posicione o cdigo de barras"})]})})]})})}function FM({product:t,onAdjust:e,onClose:n}){const[r,s]=k.useState(0),[a,o]=k.useState("add"),l=()=>{Ze.trigger("success"),e==null||e({productId:t.id,type:a,quantity:Number(r)})};return i.jsxs(B.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},exit:{opacity:0,y:100},transition:{type:"spring",damping:25,stiffness:300},className:"absolute bottom-0 left-0 right-0 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-3xl rounded-t-[2rem] p-6 border-t border-zinc-200/50 dark:border-white/10 shadow-2xl",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),i.jsxs("div",{className:"flex items-start gap-4 mb-6",children:[i.jsx("div",{className:"w-16 h-16 rounded-2xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:t.name}),i.jsx("p",{className:"text-sm text-zinc-500",children:t.category}),i.jsxs("div",{className:"flex gap-4 mt-2",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Estoque Sistema"}),i.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white tabular-nums",children:t.currentStock})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Preo"}),i.jsxs("p",{className:"text-lg font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:["R$ ",(t.currentPrice||0).toFixed(2)]})]})]})]}),i.jsx(B.button,{whileTap:{scale:.95},onClick:n,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:i.jsx("svg",{className:"w-5 h-5 text-zinc-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl p-4 mb-4",children:[i.jsx("p",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Ajuste Rpido"}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx("button",{onClick:()=>o("add"),className:`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${a==="add"?"bg-emerald-500 text-white":"bg-white dark:bg-zinc-700 text-zinc-600 dark:text-zinc-300"}`,children:" Adicionar"}),i.jsx("button",{onClick:()=>o("remove"),className:`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${a==="remove"?"bg-rose-500 text-white":"bg-white dark:bg-zinc-700 text-zinc-600 dark:text-zinc-300"}`,children:" Remover"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(B.button,{whileTap:{scale:.9},onClick:()=>{Ze.trigger("impactLight"),s(Math.max(0,r-1))},className:"w-14 h-14 rounded-xl bg-white dark:bg-zinc-700 flex items-center justify-center text-xl font-bold text-zinc-600 dark:text-zinc-300 shadow-sm",children:""}),i.jsx("input",{type:"number",value:r,onChange:c=>s(Math.max(0,Number(c.target.value)||0)),className:"flex-1 h-14 text-center text-2xl font-bold text-zinc-900 dark:text-white bg-white dark:bg-zinc-700 rounded-xl border-0 outline-none tabular-nums"}),i.jsx(B.button,{whileTap:{scale:.9},onClick:()=>{Ze.trigger("impactLight"),s(r+1)},className:"w-14 h-14 rounded-xl bg-white dark:bg-zinc-700 flex items-center justify-center text-xl font-bold text-zinc-600 dark:text-zinc-300 shadow-sm",children:"+"})]}),r>0&&i.jsx("div",{className:"mt-3 text-center",children:i.jsxs("span",{className:"text-sm text-zinc-500",children:["Novo estoque: "," ",i.jsx("span",{className:"font-bold text-zinc-900 dark:text-white",children:a==="add"?t.currentStock+r:Math.max(0,t.currentStock-r)})]})})]}),i.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:l,disabled:r===0,className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-sm font-bold uppercase tracking-widest disabled:opacity-30 transition-all",children:"Confirmar Ajuste"})]})}function BM({products:t=[],onAdjust:e,onClose:n}){const r=k.useRef(null),[s,a]=k.useState(null),[o,l]=k.useState(zn.IDLE),[c,u]=k.useState(null),[h,p]=k.useState(null),m=k.useCallback(async()=>{try{const w=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});r.current&&(r.current.srcObject=w,await r.current.play()),Ze.trigger("success"),a(!0),l(zn.SCANNING)}catch(w){console.error("Camera error:",w),Ze.trigger("error"),a(!1),p(w.name==="NotAllowedError"?"Permisso de cmera negada":"Erro ao acessar cmera")}},[]),y=k.useCallback(()=>{var w;(w=r.current)!=null&&w.srcObject&&(r.current.srcObject.getTracks().forEach(P=>P.stop()),r.current.srcObject=null)},[]);k.useEffect(()=>()=>y(),[y]);const j=k.useCallback(()=>{if(t.length===0)return;Ze.trigger("scanSuccess"),l(zn.FOUND);const w=t[Math.floor(Math.random()*t.length)];u(w)},[t]),_=w=>{e==null||e(w),Ze.trigger("approval"),u(null),l(zn.SCANNING)},T=()=>{u(null),l(zn.SCANNING)},v=()=>{y(),n==null||n()};return lt.createPortal(i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[20000] bg-black",children:[i.jsx("video",{ref:r,className:"absolute inset-0 w-full h-full object-cover",playsInline:!0,muted:!0}),i.jsx(OM,{scanState:o}),i.jsxs("div",{className:"absolute top-0 left-0 right-0 p-4 pt-12 flex justify-between items-start",children:[i.jsx(B.button,{whileTap:{scale:.95},onClick:v,className:"w-11 h-11 rounded-full bg-black/30 backdrop-blur-xl flex items-center justify-center",children:i.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),i.jsx("div",{className:"px-4 py-2 rounded-full bg-black/30 backdrop-blur-xl",children:i.jsx("span",{className:"text-xs font-bold text-white uppercase tracking-wider",children:"Scanner AR"})}),i.jsx(B.button,{whileTap:{scale:.95},className:"w-11 h-11 rounded-full bg-black/30 backdrop-blur-xl flex items-center justify-center",children:i.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),i.jsxs(_e,{children:[s===null&&i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-xl flex items-center justify-center p-8",children:i.jsxs("div",{className:"text-center max-w-sm",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-violet-500/20 flex items-center justify-center",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Acesso  Cmera"}),i.jsx("p",{className:"text-sm text-white/60 mb-8",children:"Permita o acesso  cmera para escanear cdigos de barras e verificar o estoque"}),i.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:m,className:"w-full py-4 bg-violet-500 text-white rounded-2xl text-sm font-bold uppercase tracking-widest",children:"Permitir Cmera"}),i.jsx("button",{onClick:v,className:"mt-4 text-sm text-white/40 font-medium",children:"Cancelar"})]})}),s===!1&&i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/80 backdrop-blur-xl flex items-center justify-center p-8",children:i.jsxs("div",{className:"text-center max-w-sm",children:[i.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-full bg-rose-500/20 flex items-center justify-center",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Cmera Indisponvel"}),i.jsx("p",{className:"text-sm text-white/60 mb-8",children:h}),i.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:v,className:"w-full py-4 bg-zinc-800 text-white rounded-2xl text-sm font-bold uppercase tracking-widest",children:"Fechar"})]})})]}),s&&!c&&i.jsx(B.button,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileTap:{scale:.95},onClick:j,className:"absolute bottom-8 left-1/2 -translate-x-1/2 px-6 py-4 bg-violet-500 text-white rounded-2xl text-sm font-bold uppercase tracking-widest shadow-2xl",children:" Simular Scan"}),i.jsx(_e,{children:c&&i.jsx(FM,{product:c,onAdjust:_,onClose:T})})]}),document.body)}const xa={Hortifruti:{bg:"bg-emerald-500",text:"text-emerald-500",light:"bg-emerald-500/20"},Padaria:{bg:"bg-amber-500",text:"text-amber-500",light:"bg-amber-500/20"},Laticnios:{bg:"bg-sky-500",text:"text-sky-500",light:"bg-sky-500/20"},Carnes:{bg:"bg-rose-500",text:"text-rose-500",light:"bg-rose-500/20"},Bebidas:{bg:"bg-violet-500",text:"text-violet-500",light:"bg-violet-500/20"},Limpeza:{bg:"bg-cyan-500",text:"text-cyan-500",light:"bg-cyan-500/20"},Outros:{bg:"bg-zinc-500",text:"text-zinc-500",light:"bg-zinc-500/20"}};function ag(t){return t>=10?"hot":t>=5?"warm":t>=2?"normal":t>=.5?"cool":"cold"}const LN={hot:{opacity:1,color:"rgba(239, 68, 68, 0.8)",glow:"shadow-red-500/50"},warm:{opacity:.8,color:"rgba(249, 115, 22, 0.7)",glow:"shadow-orange-500/40"},normal:{opacity:.6,color:"rgba(34, 197, 94, 0.6)",glow:""},cool:{opacity:.4,color:"rgba(99, 102, 241, 0.5)",glow:""},cold:{opacity:.2,color:"rgba(161, 161, 170, 0.3)",glow:""}};function UM({product:t,position:e,onClick:n,isSelected:r}){const s=ag(t.turnoverRate||0),a=LN[s],o=xa[t.category]||xa.Outros;return i.jsxs(B.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:r?1.2:1},exit:{opacity:0,scale:0},whileHover:{scale:1.15,zIndex:100},whileTap:{scale:.95},onClick:()=>{Ze.trigger("selection"),n==null||n(t)},className:`absolute cursor-pointer transition-all duration-200 ${a.glow}`,style:{left:`${e.x}%`,top:`${e.y}%`,transform:"translate(-50%, -50%)"},children:[s==="hot"&&i.jsx(B.div,{className:"absolute inset-0 rounded-full bg-red-500/30",animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0}}),i.jsx("div",{className:`relative w-8 h-8 rounded-lg shadow-lg flex items-center justify-center text-white text-[10px] font-bold ${o.bg}`,style:{opacity:a.opacity,boxShadow:`0 4px 12px ${a.color}`},children:t.currentStock}),i.jsx(_e,{children:r&&i.jsx(B.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute top-full mt-2 left-1/2 -translate-x-1/2 px-2 py-1 bg-white dark:bg-zinc-800 rounded-lg shadow-lg whitespace-nowrap z-50",children:i.jsx("p",{className:"text-[10px] font-bold text-zinc-900 dark:text-white truncate max-w-[100px]",children:t.name})})})]})}function $M({category:t,bounds:e,productCount:n}){const r=xa[t]||xa.Outros;return i.jsx("div",{className:`absolute rounded-2xl border-2 border-dashed ${r.light} ${r.text} flex items-center justify-center transition-all`,style:{left:`${e.x}%`,top:`${e.y}%`,width:`${e.width}%`,height:`${e.height}%`,borderColor:"currentColor",opacity:.3},children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[9px] font-bold uppercase tracking-widest",children:t}),i.jsxs("p",{className:"text-[8px] opacity-60",children:[n," items"]})]})})}function qM(){const t=[{label:"Alta Rotao",level:"hot",color:"bg-red-500"},{label:"Ativo",level:"warm",color:"bg-orange-500"},{label:"Normal",level:"normal",color:"bg-emerald-500"},{label:"Lento",level:"cool",color:"bg-indigo-500"},{label:"Parado",level:"cold",color:"bg-zinc-400"}];return i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-2xl p-4 border border-zinc-200/50 dark:border-white/5",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-3",children:"Giro de Estoque"}),i.jsx("div",{className:"space-y-2",children:t.map(({label:e,level:n,color:r})=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:`w-3 h-3 rounded ${r}`,style:{opacity:LN[n].opacity}}),i.jsx("span",{className:"text-[10px] text-zinc-600 dark:text-zinc-400",children:e})]},n))})]})}function WM({product:t,onClose:e}){if(!t)return null;const n=ag(t.turnoverRate||0),r=xa[t.category]||xa.Outros;return i.jsxs(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"absolute right-4 top-4 w-64 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-3xl rounded-2xl p-4 border border-zinc-200/50 dark:border-white/10 shadow-xl",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl ${r.bg} flex items-center justify-center text-white font-bold`,children:t.currentStock}),i.jsx("button",{onClick:e,className:"w-8 h-8 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-400 hover:text-zinc-600",children:""})]}),i.jsx("h4",{className:"text-base font-bold text-zinc-900 dark:text-white mb-1 truncate",children:t.name}),i.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:t.category}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[i.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-xl p-3 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase mb-1",children:"Rotao/dia"}),i.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white tabular-nums",children:(t.turnoverRate||0).toFixed(1)})]}),i.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-xl p-3 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase mb-1",children:"Valor"}),i.jsxs("p",{className:"text-lg font-bold text-emerald-600 tabular-nums",children:["R$ ",((t.currentStock||0)*(t.currentPrice||0)).toFixed(0)]})]})]}),i.jsx("div",{className:`px-3 py-2 rounded-xl text-center ${n==="hot"?"bg-red-100 dark:bg-red-500/20 text-red-600":n==="warm"?"bg-orange-100 dark:bg-orange-500/20 text-orange-600":n==="cold"?"bg-zinc-100 dark:bg-zinc-800 text-zinc-500":"bg-emerald-100 dark:bg-emerald-500/20 text-emerald-600"}`,children:i.jsx("span",{className:"text-xs font-bold uppercase",children:n==="hot"?" Alta Rotao":n==="warm"?" Ativo":n==="cold"?" Parado":" Normal"})})]})}function HM({products:t=[],movements:e=[]}){const[n,r]=k.useState(null),[s,a]=k.useState(1),o=k.useMemo(()=>{const h=Date.now()-2592e6;return t.map((p,m)=>{const j=e.filter(T=>T.productId===p.id&&T.type==="exit"&&new Date(T.date||T.createdAt).getTime()>=h).reduce((T,v)=>T+(Number(v.quantity)||0),0),_=j/30;return{...p,turnoverRate:_,totalExits30d:j}})},[t,e]),{categoryZones:l,productPositions:c}=k.useMemo(()=>{const h={};o.forEach(w=>{const N=w.category||"Outros";h[N]||(h[N]=[]),h[N].push(w)});const p=Object.keys(h),m=Math.ceil(Math.sqrt(p.length)),y=Math.ceil(p.length/m),j=100/m,_=100/y,T={},v=new Map;return p.forEach((w,N)=>{const P=N%m,L=Math.floor(N/m);T[w]={x:P*j+2,y:L*_+2,width:j-4,height:_-4};const R=h[w],b=Math.ceil(Math.sqrt(R.length));R.forEach((g,z)=>{const C=z%b,D=Math.floor(z/b),M=Math.ceil(R.length/b),I=T[w].x+10+C/b*(T[w].width-20),xe=T[w].y+15+D/M*(T[w].height-30);v.set(g.id,{x:I,y:xe})})}),{categoryZones:T,productPositions:v}},[o]),u=k.useMemo(()=>{let h=0,p=0,m=0,y=0,j=0;return o.forEach(_=>{const T=ag(_.turnoverRate);T==="hot"?h++:T==="warm"?p++:T==="normal"?m++:T==="cool"?y++:j++}),{hot:h,warm:p,normal:m,cool:y,cold:j,total:o.length}},[o]);return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Digital Twin"}),i.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Mapa de Estoque"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>a(Math.max(.5,s-.25)),className:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-600 dark:text-zinc-300",children:""}),i.jsx("button",{onClick:()=>a(Math.min(2,s+.25)),className:"w-10 h-10 rounded-xl bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-600 dark:text-zinc-300",children:"+"})]})]}),i.jsx("div",{className:"grid grid-cols-5 gap-2",children:[{label:"Alta",count:u.hot,color:"text-red-500"},{label:"Ativo",count:u.warm,color:"text-orange-500"},{label:"Normal",count:u.normal,color:"text-emerald-500"},{label:"Lento",count:u.cool,color:"text-indigo-500"},{label:"Parado",count:u.cold,color:"text-zinc-400"}].map(h=>i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:`text-xl font-bold tabular-nums ${h.color}`,children:h.count}),i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase",children:h.label})]},h.label))}),i.jsxs("div",{className:"relative bg-white/60 dark:bg-zinc-900/40 backdrop-blur-3xl rounded-[2rem] border border-zinc-200/50 dark:border-white/5 overflow-hidden shadow-xl",style:{paddingBottom:"60%"},children:[i.jsxs("div",{className:"absolute inset-4 transition-transform duration-300",style:{transform:`scale(${s})`},children:[Object.entries(l).map(([h,p])=>i.jsx($M,{category:h,bounds:p,productCount:o.filter(m=>(m.category||"Outros")===h).length},h)),o.map(h=>{const p=c.get(h.id);return p?i.jsx(UM,{product:h,position:p,isSelected:(n==null?void 0:n.id)===h.id,onClick:r},h.id):null})]}),i.jsx("div",{className:"absolute left-4 bottom-4",children:i.jsx(qM,{})}),i.jsx(_e,{children:n&&i.jsx(WM,{product:n,onClose:()=>r(null)})})]})]})}const Ad=t=>(Number(t)||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"});function GM(t,e,n=14){const r=Date.now()-2592e6;return t.map(s=>{const l=e.filter(m=>m.productId===s.id&&m.type==="exit"&&new Date(m.date||m.createdAt).getTime()>=r).reduce((m,y)=>m+(Number(y.quantity)||0),0)/30,c=Math.ceil(l*n)+(s.minStock||0),u=s.currentStock||0,h=Math.max(0,c-u),p=l>0?Math.floor(u/l):1/0;return{...s,dailyRate:l,targetStock:c,neededQuantity:h,daysUntilStockout:p,estimatedCost:h*(s.currentPrice||0),urgency:p<=3?"critical":p<=7?"warning":"normal"}}).filter(s=>s.neededQuantity>0)}function KM(t){const e={};return t.forEach(n=>{const r=n.supplier||"Sem Fornecedor";e[r]||(e[r]={name:r,products:[],totalCost:0,totalItems:0,hasCritical:!1,hasWarning:!1}),e[r].products.push(n),e[r].totalCost+=n.estimatedCost,e[r].totalItems+=n.neededQuantity,n.urgency==="critical"&&(e[r].hasCritical=!0),n.urgency==="warning"&&(e[r].hasWarning=!0)}),Object.values(e).sort((n,r)=>n.hasCritical!==r.hasCritical?n.hasCritical?-1:1:n.hasWarning!==r.hasWarning?n.hasWarning?-1:1:r.totalCost-n.totalCost)}function QM({supplier:t,isSelected:e,onSelect:n,onQuantityChange:r}){const[s,a]=k.useState(!1);return i.jsxs(B.div,{layout:!0,className:`bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[1.5rem] border transition-all ${e?"border-violet-500/50 shadow-lg shadow-violet-500/10":"border-zinc-200/50 dark:border-white/5"}`,children:[i.jsxs("div",{className:"p-5 cursor-pointer",onClick:()=>{Ze.trigger("selection"),a(!s)},children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(B.button,{whileTap:{scale:.9},onClick:o=>{o.stopPropagation(),Ze.trigger("impactMedium"),n(!e)},className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${e?"bg-violet-500 border-violet-500 text-white":"border-zinc-300 dark:border-zinc-600"}`,children:e&&""}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-base font-bold text-zinc-900 dark:text-white",children:t.name}),i.jsxs("p",{className:"text-xs text-zinc-500",children:[t.products.length," produtos"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[t.hasCritical&&i.jsx("span",{className:"px-2 py-1 bg-rose-100 dark:bg-rose-500/20 text-rose-600 text-[9px] font-bold uppercase rounded-full",children:"Urgente"}),t.hasWarning&&!t.hasCritical&&i.jsx("span",{className:"px-2 py-1 bg-amber-100 dark:bg-amber-500/20 text-amber-600 text-[9px] font-bold uppercase rounded-full",children:"Ateno"})]})]}),i.jsxs("div",{className:"flex justify-between items-end",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Total Estimado"}),i.jsx("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white tabular-nums",children:Ad(t.totalCost)})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Itens"}),i.jsx("p",{className:"text-lg font-bold text-violet-600 dark:text-violet-400 tabular-nums",children:t.totalItems})]})]})]}),i.jsx(_e,{children:s&&i.jsx(B.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:i.jsx("div",{className:"px-5 pb-5 space-y-2",children:t.products.map(o=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${o.urgency==="critical"?"bg-rose-500":o.urgency==="warning"?"bg-amber-500":"bg-emerald-500"}`}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-zinc-800 dark:text-white truncate",children:o.name}),i.jsxs("p",{className:"text-[10px] text-zinc-400",children:["Estoque: ",o.currentStock,"  Meta: ",o.targetStock]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("input",{type:"number",value:o.neededQuantity,onChange:l=>r(o.id,Number(l.target.value)),className:"w-16 h-9 text-center text-sm font-bold text-zinc-900 dark:text-white bg-white dark:bg-zinc-700 rounded-lg border-0 outline-none tabular-nums",onClick:l=>l.stopPropagation()}),i.jsx("span",{className:"text-xs text-zinc-500 w-12",children:Ad(o.neededQuantity*(o.currentPrice||0))})]})]},o.id))})})})]})}function YM({selectedSuppliers:t,totalCost:e,totalItems:n,onCreateOrders:r}){const[s,a]=k.useState(!1),o=async()=>{try{a(!0),Ze.trigger("impactMedium"),await r(t),Ze.trigger("approval")}catch{Ze.trigger("error")}finally{a(!1)}};return t.length===0?null:i.jsxs(B.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-20 md:bottom-8 left-4 right-4 md:left-auto md:right-8 md:w-96 bg-white/95 dark:bg-zinc-900/95 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/10 shadow-2xl z-50",children:[i.jsxs("div",{className:"flex justify-between items-start mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest",children:"Resumo do Pedido"}),i.jsx("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white tabular-nums mt-1",children:Ad(e)})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Fornecedores"}),i.jsx("p",{className:"text-lg font-bold text-violet-600 tabular-nums",children:t.length})]})]}),i.jsxs("div",{className:"flex gap-3 mb-4",children:[i.jsxs("div",{className:"flex-1 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl p-3 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase",children:"Produtos"}),i.jsx("p",{className:"text-lg font-bold text-zinc-800 dark:text-white tabular-nums",children:t.reduce((l,c)=>l+c.products.length,0)})]}),i.jsxs("div",{className:"flex-1 bg-zinc-50 dark:bg-zinc-800/50 rounded-xl p-3 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase",children:"Unidades"}),i.jsx("p",{className:"text-lg font-bold text-zinc-800 dark:text-white tabular-nums",children:n})]})]}),i.jsx(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:o,disabled:s,className:"w-full py-4 bg-gradient-to-r from-violet-500 to-indigo-600 text-white rounded-2xl text-sm font-bold uppercase tracking-widest shadow-lg shadow-violet-500/30 disabled:opacity-50",children:s?i.jsxs("span",{className:"flex items-center justify-center gap-2",children:[i.jsx(B.span,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:""}),"Criando..."]}):" Criar Pedidos"})]})}function XM({products:t=[],movements:e=[],onCreateOrders:n}){const[r,s]=k.useState(new Set),[a,o]=k.useState({}),[l,c]=k.useState(14),u=k.useMemo(()=>GM(t,e,l),[t,e,l]),h=k.useMemo(()=>u.map(v=>({...v,neededQuantity:a[v.id]??v.neededQuantity,estimatedCost:(a[v.id]??v.neededQuantity)*(v.currentPrice||0)})),[u,a]),p=k.useMemo(()=>KM(h),[h]),m=k.useMemo(()=>p.filter(v=>r.has(v.name)),[p,r]),y=k.useMemo(()=>({cost:m.reduce((v,w)=>v+w.totalCost,0),items:m.reduce((v,w)=>v+w.totalItems,0)}),[m]),j=k.useCallback((v,w)=>{s(N=>{const P=new Set(N);return w?P.add(v):P.delete(v),P})},[]),_=k.useCallback((v,w)=>{o(N=>({...N,[v]:Math.max(0,w)}))},[]),T=()=>{Ze.trigger("success"),s(new Set(p.map(v=>v.name)))};return u.length===0?i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-8 border border-zinc-200/50 dark:border-white/5 text-center",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-100 dark:bg-emerald-500/20 flex items-center justify-center",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:"Estoque Adequado"}),i.jsx("p",{className:"text-sm text-zinc-500",children:"Nenhum produto precisa de reposio no momento"})]}):i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"Smart Sourcing"}),i.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Pedidos Inteligentes"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"p-1 bg-zinc-100 dark:bg-zinc-800/50 rounded-xl flex gap-1",children:[7,14,30].map(v=>i.jsxs("button",{onClick:()=>{Ze.trigger("selection"),c(v)},className:`px-4 py-2 rounded-lg text-[10px] font-bold uppercase tracking-wide transition-all ${l===v?"bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500"}`,children:[v,"d"]},v))}),i.jsx("button",{onClick:T,className:"px-4 py-2 bg-violet-100 dark:bg-violet-500/20 text-violet-600 dark:text-violet-400 rounded-xl text-[10px] font-bold uppercase tracking-wide",children:"Selecionar Todos"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-2xl p-4 border border-zinc-200/50 dark:border-white/5 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase mb-1",children:"Fornecedores"}),i.jsx("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white tabular-nums",children:p.length})]}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-2xl p-4 border border-zinc-200/50 dark:border-white/5 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase mb-1",children:"Produtos"}),i.jsx("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white tabular-nums",children:u.length})]}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-2xl p-4 border border-zinc-200/50 dark:border-white/5 text-center",children:[i.jsx("p",{className:"text-[8px] font-bold text-violet-500 uppercase mb-1",children:"Total"}),i.jsx("p",{className:"text-xl font-bold text-violet-600 dark:text-violet-400 tabular-nums",children:Ad(h.reduce((v,w)=>v+w.estimatedCost,0))})]})]}),i.jsx("div",{className:"space-y-3 pb-32",children:p.map(v=>i.jsx(QM,{supplier:v,isSelected:r.has(v.name),onSelect:w=>j(v.name,w),onQuantityChange:_},v.name))}),i.jsx(_e,{children:m.length>0&&i.jsx(YM,{selectedSuppliers:m,totalCost:y.cost,totalItems:y.items,onCreateOrders:n})})]})}const Pn=t=>(Number(t)||0).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),Vm=t=>t?new Date(t).toLocaleDateString("pt-BR"):"-",VN=t=>{if(!t)return"-";const e=new Date(t);return e.toLocaleDateString("pt-BR")+" "+e.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})},og=t=>{if(!t)return"";const e=new Date,n=new Date(t),r=e-n,s=Math.floor(r/(1e3*60*60*24));return s===0?"hoje":s===1?"ontem":s<7?`h ${s} dias`:s<30?`h ${Math.floor(s/7)} semanas`:`h ${Math.floor(s/30)} meses`};function ON({data:t,color:e="#8b5cf6",height:n=40,showGradient:r=!0}){if(!t||t.length<2)return null;const s=120,a=4,o=t.map(_=>Number(_.price)||0),l=Math.min(...o),u=Math.max(...o)-l||1,h=o.map((_,T)=>{const v=a+T/(o.length-1)*(s-2*a),w=n-a-(_-l)/u*(n-2*a);return`${v},${w}`}).join(" "),p=`sparkline-gradient-${Math.random().toString(36).substr(2,9)}`,m=`${a},${n-a} ${h} ${s-a},${n-a}`,y=o[o.length-1]>o[0]?"up":o[o.length-1]<o[0]?"down":"stable",j=y==="up"?"#ef4444":y==="down"?"#22c55e":e;return i.jsxs("svg",{width:s,height:n,className:"overflow-visible",children:[r&&i.jsx("defs",{children:i.jsxs("linearGradient",{id:p,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[i.jsx("stop",{offset:"0%",stopColor:j,stopOpacity:"0.3"}),i.jsx("stop",{offset:"100%",stopColor:j,stopOpacity:"0"})]})}),r&&i.jsx("polygon",{points:m,fill:`url(#${p})`}),i.jsx("polyline",{points:h,fill:"none",stroke:j,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),i.jsx("circle",{cx:s-a,cy:n-a-(o[o.length-1]-l)/u*(n-2*a),r:"3",fill:j})]})}const JM=(t,e)=>{const n=[];if(t.priceHistory&&t.priceHistory.length>=2){const r=t.priceHistory.map(c=>Number(c.price)||0),s=r.reduce((c,u)=>c+u,0)/r.length,a=t.currentPrice,o=r[r.length-1],l=r.length>=2?r[r.length-2]:o;if(a>s*1.2&&s>0&&n.push({type:"price_spike",severity:"warning",message:`Preo ${((a/s-1)*100).toFixed(0)}% acima da mdia`,icon:""}),a<s*.8&&s>0&&n.push({type:"price_drop",severity:"info",message:`Preo ${((1-a/s)*100).toFixed(0)}% abaixo da mdia`,icon:""}),l>0&&Math.abs(o-l)/l>.15){const c=((o-l)/l*100).toFixed(0);n.push({type:"price_change",severity:"info",message:`Variao de ${c>0?"+":""}${c}% na ltima compra`,icon:c>0?"":""})}}if(t.minStock>0&&t.currentStock<t.minStock&&n.push({type:"low_stock",severity:"danger",message:`Estoque ${t.currentStock}/${t.minStock} ${t.unit}`,icon:""}),t.maxStock>0&&t.currentStock>t.maxStock&&n.push({type:"high_stock",severity:"warning",message:`Estoque acima do mximo (${t.maxStock} ${t.unit})`,icon:""}),t.lastMovementDate){const r=Math.floor((Date.now()-new Date(t.lastMovementDate))/864e5);r>60&&n.push({type:"inactive",severity:"info",message:`Sem movimentao h ${r} dias`,icon:""})}else t.createdAt&&Math.floor((Date.now()-new Date(t.createdAt))/864e5)>30&&t.totalMovements===0&&n.push({type:"no_movement",severity:"info",message:"Produto sem nenhuma movimentao",icon:""});return n},Uh=[{id:"general",label:"Geral",color:"zinc",icon:""},{id:"quality",label:"Qualidade",color:"amber",icon:""},{id:"delivery",label:"Entrega",color:"blue",icon:""},{id:"price",label:"Preo",color:"emerald",icon:""}];function ZM(){const t=CN(),[e,n]=k.useState([]),[r,s]=k.useState({}),[a,o]=k.useState(!1),[l,c]=k.useState("synced"),[u,h]=k.useState(""),[p,m]=k.useState("all"),[y,j]=k.useState("all"),[_,T]=k.useState("recent"),[v,w]=k.useState(null),[N,P]=k.useState(!1),[L,R]=k.useState({start:"",end:""}),[b,g]=k.useState("month"),[z,C]=k.useState("products"),[D,M]=k.useState(!1);k.useEffect(()=>{(async()=>{try{const[se,A]=await Promise.all([$e.getProductMovements(),$e.getProductAuditData()]);se&&n(se),A!=null&&A.notes&&s(A.notes)}catch(se){console.error("Error loading data:",se)}finally{o(!0)}})()},[]),k.useEffect(()=>{if(!a)return;c("syncing");const U=setTimeout(async()=>{const se=await $e.syncProductMovements(e);c(se?"synced":"error")},1500);return()=>clearTimeout(U)},[e,a]),k.useEffect(()=>{if(!a)return;const U=setTimeout(async()=>{await $e.syncProductAuditData({notes:r})},1500);return()=>clearTimeout(U)},[r,a]);const I=k.useMemo(()=>Array.isArray(t)?t.map(U=>{const se=e.filter(O=>O.productId===U.id),A=se.filter(O=>O.type==="entry"),q=se.filter(O=>O.type==="exit"),$=se.sort((O,H)=>new Date(H.createdAt)-new Date(O.createdAt))[0],re=se.filter(O=>O.price!=null).map(O=>({date:O.createdAt,price:O.price})),S={id:U.id,name:U.name,category:U.category||"Outros",subcategory:U.subcategory||"",supplier:U.supplierName||"",supplierId:U.supplierId,unit:U.unit||"un",currentStock:(Number(U.packageQuantity)||0)*(Number(U.packageCount)||1),currentPrice:U.pricePerUnit||0,minStock:U.minStock||0,maxStock:U.maxStock||0,createdAt:U.createdAt,movements:se,entriesCount:A.length,exitsCount:q.length,totalMovements:se.length,lastMovementDate:$==null?void 0:$.createdAt,priceHistory:re,totalEntriesQty:A.reduce((O,H)=>O+(Number(H.quantity)||0),0),totalExitsQty:q.reduce((O,H)=>O+(Number(H.quantity)||0),0),notes:r[U.id]||[]};return S.anomalies=JM(S),S}):[],[t,e,r]),xe=k.useMemo(()=>{const U={},se=new Date,A=new Date(se-30*24*60*60*1e3);I.forEach($=>{if($.supplier){U[$.supplier]||(U[$.supplier]={name:$.supplier,totalValue:0,productCount:0,movementCount:0,recentMovements:0,lastDelivery:null}),U[$.supplier].totalValue+=$.currentStock*$.currentPrice,U[$.supplier].productCount+=1,U[$.supplier].movementCount+=$.totalMovements;const re=$.movements.filter(O=>new Date(O.createdAt)>=A);U[$.supplier].recentMovements+=re.length;const S=$.movements.filter(O=>O.type==="entry").sort((O,H)=>new Date(H.createdAt)-new Date(O.createdAt))[0];S&&(!U[$.supplier].lastDelivery||new Date(S.createdAt)>new Date(U[$.supplier].lastDelivery))&&(U[$.supplier].lastDelivery=S.createdAt)}});const q=Math.max(...Object.values(U).map($=>$.recentMovements),1);return Object.values(U).forEach($=>{$.frequencyScore=Math.round($.recentMovements/q*100),$.avgOrderValue=$.movementCount>0?$.totalValue/$.movementCount:0}),Object.values(U).sort(($,re)=>re.totalValue-$.totalValue).slice(0,5)},[I]),ve=k.useMemo(()=>[...new Set(I.map(U=>U.category).filter(Boolean))].sort(),[I]),je=k.useMemo(()=>{let U=[...I];if(p!=="all"&&(U=U.filter(se=>se.category===p)),u.trim()){const se=u.toLowerCase();U=U.filter(A=>{var q,$;return((q=A.name)==null?void 0:q.toLowerCase().includes(se))||(($=A.supplier)==null?void 0:$.toLowerCase().includes(se))})}if(y!=="all"){const se=y==="7d"?7:y==="30d"?30:90,A=new Date(Date.now()-se*24*60*60*1e3);U=U.filter(q=>q.movements.some($=>new Date($.createdAt)>=A)||new Date(q.createdAt)>=A)}return U.sort((se,A)=>{switch(_){case"name":return(se.name||"").localeCompare(A.name||"");case"value":return A.currentStock*A.currentPrice-se.currentStock*se.currentPrice;case"movements":return A.totalMovements-se.totalMovements;default:return new Date(A.lastMovementDate||A.createdAt||0)-new Date(se.lastMovementDate||se.createdAt||0)}}),U},[I,p,u,y,_]),de=k.useMemo(()=>{const U=new Date,se=(Se,ze=0)=>{const De=new Date(U),Xe=new Date(U);return Se==="week"?(De.setDate(U.getDate()-7*(ze+1)),Xe.setDate(U.getDate()-7*ze)):Se==="month"?(De.setMonth(U.getMonth()-ze-1),Xe.setMonth(U.getMonth()-ze)):(De.setMonth(U.getMonth()-3*(ze+1)),Xe.setMonth(U.getMonth()-3*ze)),{start:De,end:Xe}},A=se(b,0),q=se(b,1),$=(Se,ze)=>{const De=new Date(Se.createdAt);return De>=ze.start&&De<=ze.end},re=e.filter(Se=>$(Se,A)),S=e.filter(Se=>$(Se,q)),O=I.reduce((Se,ze)=>{var De;return Se+(((De=ze.anomalies)==null?void 0:De.length)||0)},0),H=re.filter(Se=>Se.type==="entry").length,Z=re.filter(Se=>Se.type==="exit").length,me=S.filter(Se=>Se.type==="entry").length,pe=S.filter(Se=>Se.type==="exit").length,we=(Se,ze)=>ze===0?Se>0?100:0:((Se-ze)/ze*100).toFixed(0);return{totalProducts:I.length,totalValue:I.reduce((Se,ze)=>Se+ze.currentStock*ze.currentPrice,0),entriesCurrent:H,exitsCurrent:Z,entriesPrevious:me,exitsPrevious:pe,entriesTrend:we(H,me),exitsTrend:we(Z,pe),totalMovements:e.length,anomalyCount:O,periodLabel:b==="week"?"esta semana":b==="month"?"este ms":"este trimestre",previousLabel:b==="week"?"semana anterior":b==="month"?"ms anterior":"trimestre anterior"}},[I,e,b]),J=k.useCallback((U,se)=>{n(A=>[...A,{...se,productId:U,id:Date.now(),createdAt:new Date().toISOString()}])},[]),oe=k.useCallback((U,se)=>{s(A=>({...A,[U]:[...A[U]||[],{...se,id:Date.now(),createdAt:new Date().toISOString()}]}))},[]),le=k.useCallback((U,se)=>{s(A=>({...A,[U]:(A[U]||[]).filter(q=>q.id!==se)}))},[]),ke=k.useCallback(()=>{const U=[["Produto","Categoria","Fornecedor","Data","Tipo","Quantidade","Preo","Motivo"]],se=L.start?new Date(L.start):null,A=L.end?new Date(L.end+"T23:59:59"):null;I.forEach(H=>{H.movements.forEach(Z=>{const me=new Date(Z.createdAt);se&&me<se||A&&me>A||U.push([H.name,H.category,H.supplier,VN(Z.createdAt),Z.type==="entry"?"Entrada":"Sada",`${Z.quantity} ${H.unit}`,Z.price?Pn(Z.price):"",Z.reason||""])})});const q=se&&A?`_${L.start}_${L.end}`:se?`_desde_${L.start}`:A?`_ate_${L.end}`:"",$="\uFEFF"+U.map(H=>H.map(Z=>`"${String(Z).replace(/"/g,'""')}"`).join(";")).join(`
`),re=new Blob([$],{type:"text/csv;charset=utf-8;"}),S=URL.createObjectURL(re),O=document.createElement("a");O.href=S,O.download=`auditoria_produtos${q}_${new Date().toISOString().split("T")[0]}.csv`,O.click(),P(!1)},[I,L]);return i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-32 md:pb-16 relative font-sans selection:bg-violet-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-violet-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-6 mb-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[i.jsx("h1",{className:"text-3xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Produtos"}),i.jsxs("div",{className:`mt-2 px-2.5 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 ${l==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":l==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[i.jsx("div",{className:`w-1 h-1 rounded-full ${l==="syncing"?"bg-amber-500":l==="error"?"bg-red-500":"bg-emerald-500"}`}),i.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest leading-none",children:l==="syncing"?"Syncing":l==="error"?"Error":"Cloud Active"})]}),de.anomalyCount>0&&i.jsx("div",{className:"mt-2 px-2.5 py-0.5 rounded-full bg-amber-500/10 border border-amber-500/20 text-amber-600 dark:text-amber-400 flex items-center gap-1.5 animate-pulse",children:i.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:[" ",de.anomalyCount," alertas"]})})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Histrico de Auditoria & Anlise de Estoque"})]}),i.jsxs("button",{onClick:()=>P(!N),className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar Relatrio"]})]}),i.jsx(_e,{children:N&&i.jsxs(B.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{type:"spring",damping:25,stiffness:300},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>P(!1)}),i.jsxs(B.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white/95 dark:bg-zinc-900/95 backdrop-blur-3xl rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/10 w-full max-w-sm p-6",onClick:U=>U.stopPropagation(),children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-4",children:"Perodo do Relatrio"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase block mb-1.5",children:"Data Incio"}),i.jsx("input",{type:"date",value:L.start,onChange:U=>R(se=>({...se,start:U.target.value})),className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm text-zinc-900 dark:text-white border border-zinc-200 dark:border-white/5 outline-none focus:ring-2 focus:ring-violet-500/30 transition-all"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-[9px] font-bold text-zinc-400 uppercase block mb-1.5",children:"Data Fim"}),i.jsx("input",{type:"date",value:L.end,onChange:U=>R(se=>({...se,end:U.target.value})),className:"w-full px-4 py-3 rounded-xl bg-zinc-50 dark:bg-zinc-800/50 text-sm text-zinc-900 dark:text-white border border-zinc-200 dark:border-white/5 outline-none focus:ring-2 focus:ring-violet-500/30 transition-all"})]})]}),i.jsx("div",{className:"p-1 bg-zinc-100 dark:bg-black/40 rounded-xl flex gap-1 mb-4 shadow-inner",children:[{label:"7d",days:7},{label:"30d",days:30},{label:"90d",days:90},{label:"Tudo",days:0}].map(U=>i.jsx("button",{onClick:()=>{const se=new Date().toISOString().split("T")[0],A=U.days>0?new Date(Date.now()-U.days*24*60*60*1e3).toISOString().split("T")[0]:"";R({start:A,end:U.days>0?se:""})},className:"flex-1 py-2.5 rounded-lg text-[10px] font-bold uppercase tracking-widest text-zinc-500 hover:bg-white dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-white hover:shadow-sm transition-all",children:U.label},U.label))}),i.jsxs("div",{className:"border-t border-zinc-100 dark:border-white/5 pt-4 space-y-2",children:[i.jsxs("button",{onClick:()=>{ke(),P(!1)},className:"w-full px-4 py-4 text-left text-sm font-semibold text-zinc-700 dark:text-zinc-200 hover:bg-zinc-50 dark:hover:bg-white/5 rounded-2xl flex items-center gap-4 transition-all group",children:[i.jsx("div",{className:"w-11 h-11 bg-violet-100 dark:bg-violet-500/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:i.jsx("span",{className:"text-lg",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:"Exportar CSV"}),i.jsx("p",{className:"text-[10px] text-zinc-400 font-medium",children:"Movimentaes completas"})]})]}),i.jsxs("button",{onClick:()=>{ke(),P(!1)},className:"w-full px-4 py-4 text-left text-sm font-semibold text-zinc-700 dark:text-zinc-200 hover:bg-zinc-50 dark:hover:bg-white/5 rounded-2xl flex items-center gap-4 transition-all group",children:[i.jsx("div",{className:"w-11 h-11 bg-indigo-100 dark:bg-indigo-500/20 rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform",children:i.jsx("span",{className:"text-lg",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:"Resumo por Produto"}),i.jsx("p",{className:"text-[10px] text-zinc-400 font-medium",children:"Snapshot atual do estoque"})]})]})]}),i.jsx("button",{onClick:()=>P(!1),className:"w-full py-3 mt-4 text-[10px] font-bold text-zinc-400 uppercase tracking-widest hover:text-zinc-600 transition-colors",children:"Cancelar"})]})]})}),i.jsx("section",{className:"relative z-10 mb-6",children:i.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-hide -mx-4 px-4 pb-2",children:[[{id:"products",label:"Produtos",icon:""},{id:"timeline",label:"Time Travel",icon:""},{id:"insights",label:"Previses",icon:""},{id:"map",label:"Digital Twin",icon:""},{id:"sourcing",label:"Pedidos",icon:""}].map(U=>i.jsxs(B.button,{whileTap:{scale:.95},onClick:()=>{Ze.trigger("selection"),C(U.id)},className:`flex-shrink-0 flex items-center gap-2 px-5 py-3 min-h-[48px] rounded-2xl text-sm font-bold tracking-wide transition-all ${z===U.id?"bg-gradient-to-r from-violet-500 to-indigo-600 text-white shadow-lg shadow-violet-500/30":"bg-white/80 dark:bg-zinc-800/50 backdrop-blur-xl text-zinc-600 dark:text-zinc-400 border border-zinc-200/50 dark:border-white/5"}`,children:[i.jsx("span",{children:U.icon}),U.label]},U.id)),i.jsxs(B.button,{whileTap:{scale:.95},onClick:()=>{Ze.trigger("impactMedium"),M(!0)},className:"flex-shrink-0 flex items-center gap-2 px-5 py-3 min-h-[48px] rounded-2xl text-sm font-bold bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 shadow-xl",children:[i.jsx("span",{children:""}),"Scanner AR"]})]})}),i.jsx(_e,{children:D&&i.jsx(BM,{products:I,onAdjust:U=>{console.log("Adjustment:",U),M(!1)},onClose:()=>M(!1)})}),z==="products"&&i.jsxs(i.Fragment,{children:[i.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4 mb-6",children:[i.jsx("div",{className:"md:col-span-4 flex justify-start mb-2",children:i.jsx("div",{className:"p-1 bg-zinc-100/80 dark:bg-black/40 backdrop-blur-md rounded-xl flex gap-1 shadow-inner",children:["week","month","quarter"].map(U=>i.jsx("button",{onClick:()=>g(U),className:`px-5 py-2.5 rounded-lg text-[10px] font-bold uppercase tracking-widest transition-all ${b===U?"bg-white dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:U==="week"?"Semana":U==="month"?"Ms":"Trimestre"},U))})}),i.jsx("div",{className:"md:col-span-2 relative group",children:i.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-violet-500/[0.03] dark:bg-violet-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-10 md:mb-12",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-violet-300/60 uppercase tracking-widest mb-1",children:"Valor Total em Estoque"}),i.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide",children:"Status: Sincronizado"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500"}),i.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Data"})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-[9px] font-bold text-violet-500/60 uppercase tracking-widest ml-1",children:"Capital Total"}),i.jsx("div",{className:"text-4xl md:text-6xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none tabular-nums",children:Pn(de.totalValue)})]})]}),i.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-16 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Total Produtos"}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:de.totalProducts})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-violet-500 dark:text-violet-400 uppercase tracking-widest",children:"Movimentaes"}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-violet-600 dark:text-violet-400 tracking-tight tabular-nums",children:de.totalMovements})]}),de.anomalyCount>0&&i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-amber-500 uppercase tracking-widest",children:"Alertas Ativos"}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-amber-600 dark:text-amber-400 tracking-tight tabular-nums",children:de.anomalyCount})]})]})]})}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 shadow-[0_0_8px_rgba(16,185,129,0.4)]"}),i.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Entradas"})]}),i.jsxs("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:["+",de.entriesCurrent]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[i.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:de.periodLabel}),de.entriesTrend!=="0"&&i.jsxs("span",{className:`text-[8px] font-bold ${Number(de.entriesTrend)>0?"text-emerald-500":"text-rose-500"}`,children:[Number(de.entriesTrend)>0?"":""," ",Math.abs(Number(de.entriesTrend)),"%"]})]}),i.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-emerald-500/80 transition-all duration-1000 rounded-full",style:{width:`${Math.min(100,de.entriesCurrent/(de.entriesPrevious||1)*50)}%`}})}),de.entriesPrevious>0&&i.jsxs("p",{className:"text-[10px] text-zinc-400 mt-2",children:[de.previousLabel,": ",de.entriesPrevious]})]})]}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}),i.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Sadas"})]}),i.jsxs("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:["-",de.exitsCurrent]})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[i.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:de.periodLabel}),de.exitsTrend!=="0"&&i.jsxs("span",{className:`text-[8px] font-bold ${Number(de.exitsTrend)>0?"text-rose-500":"text-emerald-500"}`,children:[Number(de.exitsTrend)>0?"":""," ",Math.abs(Number(de.exitsTrend)),"%"]})]}),i.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-rose-500/80 transition-all duration-1000 rounded-full",style:{width:`${Math.min(100,de.exitsCurrent/(de.exitsPrevious||1)*50)}%`}})}),de.exitsPrevious>0&&i.jsxs("p",{className:"text-[10px] text-zinc-400 mt-2",children:[de.previousLabel,": ",de.exitsPrevious]})]})]})]}),xe.length>0&&i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[i.jsxs("div",{className:"p-6 md:p-10 pb-4 md:pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 md:gap-0",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Supplier Protocol"}),i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none",children:"Anlise de Fornecedores"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-500"}),i.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"ltimos 30d"})]})]}),i.jsx("div",{className:"px-6 md:px-10 pb-6 md:pb-10",children:i.jsx("div",{className:"space-y-3",children:xe.map((U,se)=>{var $;const A=(($=xe[0])==null?void 0:$.totalValue)||1,q=(U.totalValue/A*100).toFixed(0);return i.jsxs("div",{className:"group bg-zinc-50 dark:bg-white/[0.02] rounded-2xl p-5 border border-zinc-100 dark:border-white/5 hover:bg-zinc-100 dark:hover:bg-white/[0.04] transition-all",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-violet-500 to-indigo-600 flex items-center justify-center text-sm font-bold text-white shadow-lg group-hover:scale-110 transition-transform",children:se+1}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("span",{className:"text-base font-semibold text-zinc-800 dark:text-white truncate block",children:U.name}),i.jsxs("span",{className:"text-[10px] text-zinc-400 font-medium",children:[U.productCount," produtos  ",U.movementCount," movimentaes"]})]}),i.jsx("span",{className:"text-xl font-bold text-zinc-900 dark:text-white tabular-nums tracking-tight",children:Pn(U.totalValue)})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-zinc-900/50 rounded-xl border border-zinc-100 dark:border-white/5",children:[i.jsx("p",{className:"text-[8px] font-bold text-violet-500 dark:text-violet-400 uppercase tracking-widest mb-1",children:"Frequncia"}),i.jsxs("p",{className:"text-lg font-bold text-zinc-900 dark:text-white tabular-nums",children:[U.frequencyScore,"%"]})]}),i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-zinc-900/50 rounded-xl border border-zinc-100 dark:border-white/5",children:[i.jsx("p",{className:"text-[8px] font-bold text-emerald-500 uppercase tracking-widest mb-1",children:"Entregas"}),i.jsx("p",{className:"text-lg font-bold text-zinc-900 dark:text-white tabular-nums",children:U.recentMovements})]}),i.jsxs("div",{className:"text-center p-3 bg-white dark:bg-zinc-900/50 rounded-xl border border-zinc-100 dark:border-white/5",children:[i.jsx("p",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest mb-1",children:"ltima"}),i.jsx("p",{className:"text-sm font-bold text-zinc-600 dark:text-zinc-300",children:U.lastDelivery?og(U.lastDelivery):"-"})]})]}),i.jsx("div",{className:"mt-4 h-1 bg-zinc-200 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-violet-500 to-indigo-500 rounded-full transition-all duration-1000",style:{width:`${q}%`}})})]},U.name)})})})]}),i.jsxs("section",{className:"relative z-10 space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("svg",{className:"absolute left-5 top-1/2 -translate-y-1/2 w-5 h-5 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),i.jsx("input",{type:"text",value:u,onChange:U=>h(U.target.value),placeholder:"Buscar produto, fornecedor...",className:"w-full pl-14 pr-6 py-5 bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-2xl text-base text-zinc-900 dark:text-white placeholder:text-zinc-400 outline-none border border-zinc-200/50 dark:border-white/5 focus:ring-2 focus:ring-violet-500/20 transition-all shadow-sm"})]}),i.jsxs("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide -mx-4 px-4 pb-1",children:[i.jsx("button",{onClick:()=>m("all"),className:`flex-shrink-0 px-5 py-3 min-h-[48px] rounded-full text-sm font-bold tracking-wide transition-all ${p==="all"?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 shadow-lg":"bg-white/80 dark:bg-zinc-800/50 backdrop-blur-xl text-zinc-600 dark:text-zinc-400 border border-zinc-200/50 dark:border-white/5"}`,children:"Todos"}),ve.map(U=>i.jsx("button",{onClick:()=>m(U),className:`flex-shrink-0 px-5 py-3 min-h-[48px] rounded-full text-sm font-bold tracking-wide transition-all whitespace-nowrap ${p===U?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 shadow-lg":"bg-white/80 dark:bg-zinc-800/50 backdrop-blur-xl text-zinc-600 dark:text-zinc-400 border border-zinc-200/50 dark:border-white/5"}`,children:U},U))]}),i.jsxs("div",{className:"flex gap-3 flex-wrap",children:[i.jsxs("select",{value:y,onChange:U=>j(U.target.value),className:"px-5 py-3 min-h-[48px] rounded-xl bg-white/80 dark:bg-zinc-800/60 backdrop-blur-xl text-sm font-bold text-zinc-700 dark:text-zinc-300 border border-zinc-200/50 dark:border-white/5 outline-none focus:ring-2 focus:ring-violet-500/20 transition-all",children:[i.jsx("option",{value:"all",children:"Todo perodo"}),i.jsx("option",{value:"7d",children:"ltimos 7 dias"}),i.jsx("option",{value:"30d",children:"ltimos 30 dias"}),i.jsx("option",{value:"90d",children:"ltimos 90 dias"})]}),i.jsxs("select",{value:_,onChange:U=>T(U.target.value),className:"px-5 py-3 min-h-[48px] rounded-xl bg-white/80 dark:bg-zinc-800/60 backdrop-blur-xl text-sm font-bold text-zinc-700 dark:text-zinc-300 border border-zinc-200/50 dark:border-white/5 outline-none focus:ring-2 focus:ring-violet-500/20 transition-all",children:[i.jsx("option",{value:"recent",children:"Mais recentes"}),i.jsx("option",{value:"name",children:"Nome A-Z"}),i.jsx("option",{value:"value",children:"Maior valor"}),i.jsx("option",{value:"movements",children:"Mais movimentaes"})]})]})]}),i.jsxs("section",{className:"relative z-10 space-y-3",children:[i.jsx(_e,{mode:"popLayout",children:je.map((U,se)=>i.jsx(e8,{product:U,index:se,onClick:()=>w(U)},U.id))}),je.length===0&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-16",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center",children:i.jsx("svg",{className:"w-8 h-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),i.jsx("h3",{className:"text-lg font-medium text-zinc-900 dark:text-white mb-1",children:u?"Nenhum resultado":"Sem produtos"})]})]}),i.jsx(_e,{children:v&&i.jsx(t8,{product:v,onClose:()=>w(null),onAddMovement:J,onAddNote:oe,onDeleteNote:le})})]}),z==="timeline"&&i.jsx(IM,{entries:e.map((U,se)=>{var A;return{id:U.id||`mov-${se}`,timestamp:U.createdAt,action:U.type==="entry"?"ENTRY":"EXIT",productName:((A=I.find(q=>q.id===U.productId))==null?void 0:A.name)||"Produto",stock:U.quantity,price:U.price,userName:U.userName||"Sistema"}}),onSelectEntry:U=>console.log("Selected:",U)}),z==="insights"&&i.jsx(VM,{products:I,movements:e,onCreateOrder:U=>{console.log("Create order for:",U),Ze.trigger("success")},onDismiss:U=>console.log("Dismissed:",U)}),z==="map"&&i.jsx(HM,{products:I,movements:e}),z==="sourcing"&&i.jsx(XM,{products:I,movements:e,onCreateOrders:async U=>{console.log("Creating orders for:",U),Ze.trigger("approval")}})]})}function e8({product:t,index:e,onClick:n}){var o;const r=t.currentStock*t.currentPrice,s=((o=t.anomalies)==null?void 0:o.length)>0,a=k.useMemo(()=>{if(!t.priceHistory||t.priceHistory.length<2)return null;const l=t.priceHistory.map(p=>Number(p.price)||0),c=l[l.length-1],u=l[l.length-2];return u?(c-u)/u*100:null},[t.priceHistory]);return i.jsxs(B.div,{layout:!0,initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,delay:e*.03,ease:[.25,.46,.45,.94]},onClick:n,whileHover:{scale:1.01,y:-2},whileTap:{scale:.98},className:`group relative bg-white/80 dark:bg-zinc-900/80 backdrop-blur-xl rounded-3xl p-5 cursor-pointer border transition-all duration-300 ${s?"border-amber-300/60 dark:border-amber-500/30 shadow-amber-500/5":"border-zinc-200/60 dark:border-white/5"} hover:shadow-2xl hover:shadow-violet-500/5 dark:hover:shadow-violet-500/10`,children:[i.jsx("div",{className:"absolute inset-0 rounded-3xl bg-gradient-to-br from-violet-500/0 to-indigo-500/0 group-hover:from-violet-500/[0.02] group-hover:to-indigo-500/[0.02] transition-all duration-500"}),s&&i.jsx("div",{className:"absolute top-4 right-4 flex gap-1.5",children:t.anomalies.slice(0,3).map((l,c)=>i.jsx(B.span,{initial:{scale:0},animate:{scale:1},transition:{delay:.2+c*.1},className:"text-base drop-shadow-sm",title:l.message,children:l.icon},c))}),i.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2.5 mb-2",children:[i.jsx("h3",{className:"text-[17px] font-semibold text-zinc-900 dark:text-white truncate leading-tight tracking-tight",children:t.name}),t.totalMovements>0&&i.jsxs("span",{className:"flex-shrink-0 px-2.5 py-1 rounded-full bg-violet-100/80 dark:bg-violet-500/20 text-[10px] font-bold text-violet-600 dark:text-violet-400 uppercase tracking-wide",children:[t.totalMovements," mov"]})]}),i.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 mb-3 font-medium",children:[t.category,t.supplier&&i.jsx("span",{className:"text-zinc-300 dark:text-zinc-600",children:"  "}),t.supplier&&i.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:t.supplier})]}),i.jsxs("div",{className:"flex items-center gap-4 text-[11px] text-zinc-400 dark:text-zinc-500 font-medium uppercase tracking-wide",children:[i.jsxs("span",{children:["Cadastro: ",Vm(t.createdAt)]}),t.lastMovementDate&&i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"w-1 h-1 rounded-full bg-zinc-300 dark:bg-zinc-600"}),i.jsxs("span",{children:["ltima: ",og(t.lastMovementDate)]})]})]})]}),i.jsxs("div",{className:"text-right flex-shrink-0 min-w-[100px]",children:[i.jsxs("p",{className:"text-xl font-bold text-zinc-900 dark:text-white tabular-nums tracking-tight",children:[t.currentStock,i.jsx("span",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500 ml-1",children:t.unit})]}),i.jsx("p",{className:"text-[15px] font-semibold text-emerald-600 dark:text-emerald-400 tabular-nums mt-0.5",children:Pn(r)}),a!==null&&Math.abs(a)>=1&&i.jsxs("div",{className:`inline-flex items-center gap-1 mt-2 px-2.5 py-1 rounded-full text-[10px] font-bold tabular-nums ${a>0?"bg-rose-100/80 dark:bg-rose-500/15 text-rose-600 dark:text-rose-400":"bg-emerald-100/80 dark:bg-emerald-500/15 text-emerald-600 dark:text-emerald-400"}`,children:[a>0?"":""," ",Math.abs(a).toFixed(1),"%"]}),t.priceHistory.length>=2&&i.jsx("div",{className:"mt-3 opacity-80 group-hover:opacity-100 transition-opacity",children:i.jsx(ON,{data:t.priceHistory,height:32})})]})]}),i.jsx("div",{className:"absolute bottom-0 left-4 right-4 h-[2px] bg-gradient-to-r from-transparent via-violet-500/0 to-transparent group-hover:via-violet-500/30 transition-all duration-500"})]})}function t8({product:t,onClose:e,onAddMovement:n,onAddNote:r,onDeleteNote:s}){var w,N,P,L;mn(!0);const[a,o]=k.useState("resumo"),[l,c]=k.useState(!1),[u,h]=k.useState({type:"entry",quantity:"",price:"",reason:""}),[p,m]=k.useState({text:"",category:"general"}),y=[{id:"resumo",label:"Resumo",icon:""},{id:"movimentacoes",label:"Movimentos",icon:""},{id:"precos",label:"Preos",icon:""},{id:"notas",label:"Notas",icon:""}],j=()=>{u.quantity&&(n(t.id,{type:u.type,quantity:Number(u.quantity),price:u.price?Number(u.price):null,reason:u.reason||null}),h({type:"entry",quantity:"",price:"",reason:""}),c(!1))},_=()=>{p.text.trim()&&(r(t.id,{text:p.text.trim(),category:p.category}),m({text:"",category:"general"}))},T=t.currentStock*t.currentPrice,v=k.useMemo(()=>{if(!t.priceHistory||t.priceHistory.length<1)return null;const R=t.priceHistory.map(C=>Number(C.price)||0).filter(C=>C>0);if(R.length===0)return null;const b=R.reduce((C,D)=>C+D,0)/R.length,g=Math.min(...R),z=Math.max(...R);return{avg:b,min:g,max:z,count:R.length}},[t.priceHistory]);return lt.createPortal(i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[10000] flex items-end md:items-center justify-center",onClick:e,children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50 backdrop-blur-md"}),i.jsxs(B.div,{initial:{y:"100%",opacity:.5},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:32,stiffness:400},className:"relative w-full md:max-w-lg bg-white dark:bg-zinc-900 md:rounded-3xl rounded-t-[28px] overflow-hidden shadow-2xl",style:{maxHeight:"92vh"},onClick:R=>R.stopPropagation(),children:[i.jsx("div",{className:"flex justify-center pt-3 pb-1 md:hidden",children:i.jsx("div",{className:"w-10 h-1 rounded-full bg-zinc-300 dark:bg-zinc-700"})}),i.jsxs("div",{className:"px-6 pb-4 pt-2 md:pt-6 border-b border-zinc-100 dark:border-zinc-800",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("h2",{className:"text-[22px] font-bold text-zinc-900 dark:text-white tracking-tight truncate",children:t.name}),(w=t.anomalies)==null?void 0:w.slice(0,3).map((R,b)=>i.jsx(B.span,{initial:{scale:0},animate:{scale:1},transition:{delay:.1*b},className:"text-base",title:R.message,children:R.icon},b))]}),i.jsxs("p",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 font-medium",children:[t.category,t.subcategory&&i.jsx("span",{className:"text-zinc-300 dark:text-zinc-600",children:"  "}),t.subcategory&&i.jsx("span",{children:t.subcategory}),t.supplier&&i.jsx("span",{className:"text-zinc-300 dark:text-zinc-600",children:"  "}),t.supplier&&i.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:t.supplier})]})]}),i.jsx(B.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e,className:"w-10 h-10 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 transition-colors",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"flex gap-1 mt-5 p-1 bg-zinc-100/80 dark:bg-zinc-800/80 backdrop-blur rounded-2xl",children:y.map(R=>{var b;return i.jsxs(B.button,{onClick:()=>o(R.id),className:`relative flex-1 px-2 py-2.5 rounded-xl text-[11px] font-bold uppercase tracking-wide transition-colors ${a===R.id?"text-zinc-900 dark:text-white":"text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[a===R.id&&i.jsx(B.div,{layoutId:"activeTab",className:"absolute inset-0 bg-white dark:bg-zinc-700 rounded-xl shadow-sm",transition:{type:"spring",bounce:.15,duration:.4}}),i.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-1",children:[R.label,R.id==="notas"&&((b=t.notes)==null?void 0:b.length)>0&&i.jsx("span",{className:"w-4 h-4 rounded-full bg-violet-500 text-white text-[9px] flex items-center justify-center",children:t.notes.length})]})]},R.id)})})]}),i.jsx("div",{className:"px-6 py-5 overflow-y-auto",style:{maxHeight:"calc(92vh - 220px)"},children:i.jsxs(_e,{mode:"wait",children:[a==="resumo"&&i.jsxs(B.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2},className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05},className:"bg-gradient-to-br from-zinc-50 to-zinc-100/50 dark:from-zinc-800 dark:to-zinc-800/50 rounded-2xl p-4 text-center",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-wider mb-1.5",children:"Estoque"}),i.jsx("p",{className:"text-2xl font-bold text-zinc-900 dark:text-white tabular-nums tracking-tight",children:t.currentStock}),i.jsx("p",{className:"text-[10px] text-zinc-400 font-medium mt-0.5",children:t.unit})]}),i.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-zinc-50 to-zinc-100/50 dark:from-zinc-800 dark:to-zinc-800/50 rounded-2xl p-4 text-center",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-wider mb-1.5",children:"Preo Unit."}),i.jsx("p",{className:"text-xl font-bold text-zinc-900 dark:text-white tabular-nums tracking-tight",children:Pn(t.currentPrice)})]}),i.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 dark:from-emerald-500/15 dark:to-emerald-500/5 rounded-2xl p-4 text-center",children:[i.jsx("p",{className:"text-[9px] font-bold text-emerald-600 dark:text-emerald-400 uppercase tracking-wider mb-1.5",children:"Valor Total"}),i.jsx("p",{className:"text-xl font-bold text-emerald-700 dark:text-emerald-300 tabular-nums tracking-tight",children:Pn(T)})]})]}),v&&i.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-violet-50/50 dark:bg-violet-500/5 rounded-2xl p-4 border border-violet-100 dark:border-violet-500/10",children:[i.jsxs("h4",{className:"text-[10px] font-bold text-violet-600 dark:text-violet-400 uppercase tracking-wider mb-3",children:[" Estatsticas de Preo (",v.count," registros)"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Mnimo"}),i.jsx("p",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:Pn(v.min)})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Mdia"}),i.jsx("p",{className:"text-sm font-bold text-violet-600 dark:text-violet-400 tabular-nums",children:Pn(v.avg)})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-[9px] font-bold text-zinc-400 uppercase",children:"Mximo"}),i.jsx("p",{className:"text-sm font-bold text-rose-600 dark:text-rose-400 tabular-nums",children:Pn(v.max)})]})]})]}),((N=t.anomalies)==null?void 0:N.length)>0&&i.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},className:"bg-gradient-to-br from-amber-50 to-orange-50 dark:from-amber-500/10 dark:to-orange-500/5 rounded-2xl p-4 border border-amber-200/60 dark:border-amber-500/20",children:[i.jsxs("h4",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 uppercase tracking-wider mb-3 flex items-center gap-2",children:[i.jsx("span",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center",children:""}),"Alertas Detectados"]}),i.jsx("div",{className:"space-y-2",children:t.anomalies.map((R,b)=>i.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-700 dark:text-amber-300 bg-white/50 dark:bg-zinc-900/30 rounded-xl px-3 py-2",children:[i.jsx("span",{children:R.icon}),i.jsx("span",{className:"font-medium",children:R.message})]},b))})]}),i.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-zinc-50/50 dark:bg-zinc-800/30 rounded-2xl p-4 space-y-0",children:[t.supplier&&i.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-zinc-200/50 dark:border-zinc-700/50",children:[i.jsx("span",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 font-medium",children:"Fornecedor"}),i.jsx("span",{className:"text-[13px] font-semibold text-zinc-900 dark:text-white",children:t.supplier})]}),i.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-zinc-200/50 dark:border-zinc-700/50",children:[i.jsx("span",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 font-medium",children:"Cadastrado em"}),i.jsx("span",{className:"text-[13px] font-semibold text-zinc-900 dark:text-white",children:Vm(t.createdAt)})]}),i.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-zinc-200/50 dark:border-zinc-700/50",children:[i.jsx("span",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 font-medium",children:"Total de Movimentaes"}),i.jsx("span",{className:"text-[13px] font-semibold text-zinc-900 dark:text-white tabular-nums",children:t.totalMovements})]}),t.minStock>0&&i.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-zinc-200/50 dark:border-zinc-700/50",children:[i.jsx("span",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 font-medium",children:"Estoque Mnimo"}),i.jsxs("span",{className:"text-[13px] font-semibold text-zinc-900 dark:text-white",children:[t.minStock," ",t.unit]})]}),t.maxStock>0&&i.jsxs("div",{className:"flex justify-between items-center py-3",children:[i.jsx("span",{className:"text-[13px] text-zinc-500 dark:text-zinc-400 font-medium",children:"Estoque Mximo"}),i.jsxs("span",{className:"text-[13px] font-semibold text-zinc-900 dark:text-white",children:[t.maxStock," ",t.unit]})]})]})]},"resumo"),a==="movimentacoes"&&i.jsxs(B.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2},className:"space-y-4",children:[l?i.jsxs(B.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-zinc-50 dark:bg-zinc-800/50 rounded-2xl p-5 space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>h(R=>({...R,type:"entry"})),className:`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${u.type==="entry"?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20":"bg-white dark:bg-zinc-700 text-zinc-600 dark:text-zinc-300"}`,children:" Entrada"}),i.jsx("button",{onClick:()=>h(R=>({...R,type:"exit"})),className:`flex-1 py-3 rounded-xl text-sm font-bold transition-all ${u.type==="exit"?"bg-rose-500 text-white shadow-lg shadow-rose-500/20":"bg-white dark:bg-zinc-700 text-zinc-600 dark:text-zinc-300"}`,children:" Sada"})]}),i.jsx("input",{type:"number",placeholder:`Quantidade (${t.unit})`,value:u.quantity,onChange:R=>h(b=>({...b,quantity:R.target.value})),className:"w-full px-4 py-3.5 rounded-xl bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white font-medium border-0 focus:ring-2 focus:ring-violet-500/20"}),u.type==="entry"&&i.jsx("input",{type:"number",placeholder:"Preo pago (opcional)",value:u.price,onChange:R=>h(b=>({...b,price:R.target.value})),className:"w-full px-4 py-3.5 rounded-xl bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white border-0 focus:ring-2 focus:ring-violet-500/20"}),i.jsx("input",{type:"text",placeholder:"Motivo (opcional)",value:u.reason,onChange:R=>h(b=>({...b,reason:R.target.value})),className:"w-full px-4 py-3.5 rounded-xl bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white border-0 focus:ring-2 focus:ring-violet-500/20"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:()=>c(!1),className:"flex-1 py-3.5 rounded-xl bg-zinc-200 dark:bg-zinc-600 text-zinc-700 dark:text-zinc-200 font-bold",children:"Cancelar"}),i.jsx("button",{onClick:j,className:"flex-1 py-3.5 rounded-xl bg-violet-600 text-white font-bold shadow-lg shadow-violet-500/20",children:"Registrar"})]})]}):i.jsx(B.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>c(!0),className:"w-full py-4 rounded-2xl border-2 border-dashed border-zinc-200 dark:border-zinc-700 text-sm font-semibold text-zinc-500 hover:border-violet-400 hover:text-violet-600 transition-all",children:"+ Registrar Movimentao"}),t.movements.length===0?i.jsx("p",{className:"text-center text-sm text-zinc-400 py-12",children:"Nenhuma movimentao registrada"}):i.jsx("div",{className:"space-y-2",children:[...t.movements].sort((R,b)=>new Date(b.createdAt)-new Date(R.createdAt)).map((R,b)=>i.jsxs(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.03},className:"flex items-center gap-3 p-3 bg-zinc-50/50 dark:bg-zinc-800/30 rounded-xl",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${R.type==="entry"?"bg-emerald-100 dark:bg-emerald-500/20":"bg-rose-100 dark:bg-rose-500/20"}`,children:i.jsx("span",{className:`text-lg font-bold ${R.type==="entry"?"text-emerald-600":"text-rose-600"}`,children:R.type==="entry"?"":""})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("p",{className:"text-[13px] font-semibold text-zinc-900 dark:text-white",children:[R.type==="entry"?"Entrada":"Sada",i.jsxs("span",{className:`ml-2 font-bold ${R.type==="entry"?"text-emerald-600":"text-rose-600"}`,children:[R.type==="exit"?"-":"+",R.quantity," ",t.unit]})]}),i.jsxs("p",{className:"text-[11px] text-zinc-400",children:[VN(R.createdAt),R.reason&&`  ${R.reason}`]})]}),R.price&&i.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:Pn(R.price)})]},R.id))})]},"movimentacoes"),a==="precos"&&i.jsxs(B.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2},className:"space-y-5",children:[i.jsxs("div",{className:"bg-gradient-to-br from-violet-50 to-indigo-50 dark:from-violet-500/10 dark:to-indigo-500/5 rounded-2xl p-5 text-center",children:[i.jsx("p",{className:"text-[10px] font-bold text-violet-600 dark:text-violet-400 uppercase tracking-wider mb-2",children:"Preo Atual"}),i.jsx("p",{className:"text-4xl font-bold text-violet-700 dark:text-violet-300 tabular-nums tracking-tight",children:Pn(t.currentPrice)})]}),t.priceHistory.length>=2&&i.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl p-5 border border-zinc-200/50 dark:border-zinc-700/50",children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider mb-4",children:" Tendncia de Preos"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(ON,{data:t.priceHistory,height:80})})]}),t.priceHistory.length===0?i.jsx("p",{className:"text-center text-sm text-zinc-400 py-8",children:"Nenhum histrico de preos"}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:"Histrico de Preos"}),i.jsx("div",{className:"bg-zinc-50/50 dark:bg-zinc-800/30 rounded-2xl overflow-hidden",children:t.priceHistory.slice().reverse().map((R,b)=>i.jsxs("div",{className:"flex justify-between items-center py-3 px-4 border-b border-zinc-200/50 dark:border-zinc-700/50 last:border-0",children:[i.jsx("span",{className:"text-[13px] text-zinc-500 font-medium",children:Vm(R.date)}),i.jsx("span",{className:"text-[13px] font-bold text-zinc-900 dark:text-white tabular-nums",children:Pn(R.price)})]},b))})]})]},"precos"),a==="notas"&&i.jsxs(B.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:10},transition:{duration:.2},className:"space-y-5",children:[i.jsxs("div",{className:"bg-zinc-50/50 dark:bg-zinc-800/30 rounded-2xl p-5 space-y-4",children:[i.jsx("textarea",{value:p.text,onChange:R=>m(b=>({...b,text:R.target.value})),placeholder:"Adicionar observao...",rows:3,className:"w-full px-4 py-3.5 rounded-xl bg-white dark:bg-zinc-700 text-zinc-900 dark:text-white resize-none border-0 focus:ring-2 focus:ring-violet-500/20 text-[14px]"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:Uh.map(R=>i.jsxs(B.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>m(b=>({...b,category:R.id})),className:`px-4 py-2 rounded-xl text-[12px] font-bold transition-all ${p.category===R.id?"bg-violet-500 text-white shadow-lg shadow-violet-500/20":"bg-white dark:bg-zinc-700 text-zinc-600 dark:text-zinc-300"}`,children:[R.icon," ",R.label]},R.id))}),i.jsx(B.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:_,disabled:!p.text.trim(),className:"w-full py-3.5 rounded-xl bg-violet-600 text-white font-bold shadow-lg shadow-violet-500/20 disabled:opacity-50 disabled:shadow-none",children:"Adicionar Nota"})]}),((P=t.notes)==null?void 0:P.length)===0?i.jsx("p",{className:"text-center text-sm text-zinc-400 py-12",children:"Nenhuma nota adicionada"}):i.jsx("div",{className:"space-y-3",children:(L=t.notes)==null?void 0:L.slice().reverse().map((R,b)=>{const g=Uh.find(z=>z.id===R.category)||Uh[0];return i.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.03},className:"bg-white dark:bg-zinc-800/50 rounded-2xl p-4 border border-zinc-200/50 dark:border-zinc-700/50",children:i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-base",children:g.icon}),i.jsx("span",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-wider",children:g.label}),i.jsxs("span",{className:"text-[10px] text-zinc-400",children:[" ",og(R.createdAt)]})]}),i.jsx("p",{className:"text-[14px] text-zinc-700 dark:text-zinc-200 leading-relaxed",children:R.text})]}),i.jsx(B.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>s(t.id,R.id),className:"w-9 h-9 rounded-xl flex items-center justify-center text-zinc-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-500/10 transition-all",children:i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},R.id)})})]},"notas")]})}),i.jsx("div",{className:"px-6 py-4 border-t border-zinc-100 dark:border-zinc-800",style:{paddingBottom:"max(16px, env(safe-area-inset-bottom))"},children:i.jsx(B.button,{whileHover:{scale:1.01},whileTap:{scale:.98},onClick:e,className:"w-full py-4 bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white rounded-2xl text-[15px] font-semibold hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all",children:"Fechar"})})]})]}),document.body)}const n8="288245433770-mnrej3g3kud0ai1qn670cd4c6vm00ui5.apps.googleusercontent.com",r8="https://www.googleapis.com/auth/gmail.readonly https://www.googleapis.com/auth/gmail.send",i8="service_g2io60e",s8="template_at3fl3s",a8="0CObV7BKHDHwHMDxs",dc="padocainc@gmail.com",o8="Padoca Pizza",l8=3e4;class c8{constructor(){this.accessToken=null,this.tokenClient=null,this.isInitialized=!1,this.userEmail=null,this.gsiLoaded=!1,this.gapiLoaded=!1}async loadGSI(){return this.gsiLoaded?!0:new Promise((e,n)=>{var s;if((s=window.google)!=null&&s.accounts){this.gsiLoaded=!0,e(!0);return}const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.async=!0,r.defer=!0,r.onload=()=>{this.gsiLoaded=!0,console.log(" Google Identity Services loaded"),e(!0)},r.onerror=()=>n(new Error("Failed to load GSI")),document.head.appendChild(r)})}async loadGAPI(){return this.gapiLoaded?!0:new Promise((e,n)=>{var s;if((s=window.gapi)!=null&&s.client){this.gapiLoaded=!0,e(!0);return}const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.async=!0,r.defer=!0,r.onload=()=>{window.gapi.load("client",async()=>{await window.gapi.client.init({}),this.gapiLoaded=!0,console.log(" GAPI client loaded"),e(!0)})},r.onerror=()=>n(new Error("Failed to load GAPI")),document.head.appendChild(r)})}async init(){if(this.isInitialized&&this.accessToken)return!0;try{await Promise.all([this.loadGSI(),this.loadGAPI()]);const e=localStorage.getItem("gmail_access_token"),n=localStorage.getItem("gmail_token_expiry");return e&&n&&Date.now()<parseInt(n)?(this.accessToken=e,this.userEmail=localStorage.getItem("gmail_user_email")||dc,window.gapi.client.setToken({access_token:e}),this.isInitialized=!0,console.log(" Gmail API initialized with stored token"),!0):(this.tokenClient=window.google.accounts.oauth2.initTokenClient({client_id:n8,scope:r8,callback:r=>{r.access_token&&(this.accessToken=r.access_token,localStorage.setItem("gmail_access_token",r.access_token),localStorage.setItem("gmail_token_expiry",String(Date.now()+36e5)),window.gapi.client.setToken({access_token:r.access_token}),console.log(" New Gmail token obtained"))}}),this.isInitialized=!0,console.log(" Gmail API service initialized"),!0)}catch(e){return console.error(" Gmail API init failed:",e),!1}}async ensureInitialized(){return this.isInitialized?!0:await this.init()}authorize(){return this.tokenClient?new Promise((e,n)=>{try{if(this.tokenClient.callback=async r=>{if(r.error){console.error("OAuth error:",r.error),n(new Error(r.error));return}if(r.access_token){this.accessToken=r.access_token,localStorage.setItem("gmail_access_token",r.access_token),localStorage.setItem("gmail_token_expiry",String(Date.now()+36e5)),window.gapi.client.setToken({access_token:r.access_token}),console.log(" Gmail OAuth token obtained!");const s=await this.getUserProfile();s&&(this.userEmail=s.emailAddress,localStorage.setItem("gmail_user_email",s.emailAddress),console.log(" Gmail connected:",s.emailAddress)),e({email:this.userEmail,connected:!0})}},this.accessToken)try{window.google.accounts.oauth2.revoke(this.accessToken)}catch{}console.log(" Requesting Gmail access token..."),this.tokenClient.requestAccessToken({prompt:"consent"})}catch(r){console.error("OAuth exception:",r),n(r)}}):(console.error(" Gmail not initialized. Call ensureInitialized() first."),Promise.reject(new Error("Gmail no inicializado. Recarregue a pgina.")))}isConnected(){return!!this.accessToken}getConnectedEmail(){return this.userEmail||dc}async getUserProfile(){if(!this.accessToken)return null;try{const e=await fetch("https://gmail.googleapis.com/gmail/v1/users/me/profile",{headers:{Authorization:`Bearer ${this.accessToken}`}});return e.ok?await e.json():null}catch(e){return console.error("Error getting profile:",e),null}}disconnect(){var e,n,r;this.accessToken&&((r=(n=(e=window.google)==null?void 0:e.accounts)==null?void 0:n.oauth2)==null||r.revoke(this.accessToken)),this.accessToken=null,this.userEmail=null,localStorage.removeItem("gmail_access_token"),localStorage.removeItem("gmail_token_expiry"),localStorage.removeItem("gmail_user_email")}async sendEmail({to:e,subject:n,body:r,supplierName:s}){if(console.log(" Enviando email para:",e),!e||!e.includes("@"))throw new Error("Email do destinatrio invlido");window.emailjs||await new Promise((u,h)=>{const p=document.createElement("script");p.src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js",p.onload=()=>{window.emailjs.init(a8),u()},p.onerror=h,document.head.appendChild(p)});const a=r.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'"),o=window.emailjs.send(i8,s8,{to_email:e,to_name:s||e.split("@")[0],from_name:o8,from_email:dc,subject:n,message:a,reply_to:dc}),l=new Promise((u,h)=>{setTimeout(()=>h(new Error("Timeout ao enviar email")),l8)}),c=await Promise.race([o,l]);return console.log(" Email enviado com sucesso!"),{success:!0,method:"emailjs",status:c.status}}async checkReplies(e,n){var r,s,a,o,l;if(!this.accessToken)return console.log(" Gmail no conectado, no  possvel verificar respostas"),[];try{const c=e.map(j=>`from:${j}`).join(" OR "),u=n.toISOString().split("T")[0].replace(/-/g,"/"),h=`(${c}) after:${u}`;console.log(" Buscando respostas:",h);const p=await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages?q=${encodeURIComponent(h)}&maxResults=20`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(!p.ok)return p.status===401&&this.disconnect(),console.error("Gmail search failed:",p.status),[];const m=await p.json();if(!m.messages||m.messages.length===0)return console.log(" Nenhuma resposta encontrada"),[];console.log(` ${m.messages.length} mensagens encontradas`);const y=[];for(const j of m.messages.slice(0,10)){const _=await fetch(`https://gmail.googleapis.com/gmail/v1/users/me/messages/${j.id}?format=metadata&metadataHeaders=From&metadataHeaders=Subject&metadataHeaders=Date`,{headers:{Authorization:`Bearer ${this.accessToken}`}});if(_.ok){const T=await _.json(),v=((r=T.payload)==null?void 0:r.headers)||[],w=((s=v.find(b=>b.name.toLowerCase()==="from"))==null?void 0:s.value)||"",N=((a=v.find(b=>b.name.toLowerCase()==="subject"))==null?void 0:a.value)||"",P=((o=v.find(b=>b.name.toLowerCase()==="date"))==null?void 0:o.value)||"",R=((l=(w.match(/<(.+?)>/)||[null,w])[1])==null?void 0:l.toLowerCase())||w.toLowerCase();e.some(b=>R.includes(b.toLowerCase().split("@")[0]))&&y.push({id:j.id,supplierEmail:R,from:w,subject:N,date:new Date(P),snippet:T.snippet||""})}}return console.log(` ${y.length} respostas de fornecedores encontradas`),y}catch(c){return console.error(" Erro ao verificar respostas:",c),[]}}async getUnreadCount(){if(!this.accessToken)return 0;try{const e=await fetch("https://gmail.googleapis.com/gmail/v1/users/me/labels/UNREAD",{headers:{Authorization:`Bearer ${this.accessToken}`}});return e.ok&&(await e.json()).messagesUnread||0}catch{return 0}}async connect(){return await this.authorize()}}const zr=new c8,FN="America/Edmonton",BN="en-CA",_r=(t,e={})=>{if(!t)return"";const n={timeZone:FN,year:"numeric",month:"short",day:"2-digit",...e};try{return new Date(t).toLocaleDateString(BN,n)}catch{return""}},d8=t=>{if(!t)return"";try{const e=new Date,n=new Date(t),r=e-n,s=Math.floor(r/6e4),a=Math.floor(r/36e5),o=Math.floor(r/864e5);return s<1?"agora":s<60?`${s} min atrs`:a<24?`${a}h atrs`:o<7?`${o} dias atrs`:_r(t)}catch{return""}},u8=t=>{if(!t)return"";try{return new Date(t).toLocaleTimeString(BN,{timeZone:FN,hour:"2-digit",minute:"2-digit"})}catch{return""}},c1="padoca_inventory_v2",d1="padoca_suppliers";function h8(){return mn(!0),null}function m8(){var Qe,Ht,Ct;const[t,e]=k.useState([]),[n,r]=k.useState([]),[s,a]=k.useState("synced"),[o,l]=k.useState(!1),[c,u]=k.useState(!1),[h,p]=k.useState(""),[m,y]=k.useState(!1),[j,_]=k.useState([]),[T,v]=k.useState("pending"),[w,N]=k.useState(!1),[P,L]=k.useState(null),[R,b]=k.useState({to:"",subject:"",body:""}),[g,z]=k.useState([]),[C,D]=k.useState(!1),[M,I]=k.useState(null),[xe,ve]=k.useState({quotedValue:"",expectedDelivery:""}),[je,de]=k.useState(null),J=k.useRef(null),oe=k.useCallback((F,ne="success")=>{J.current&&clearTimeout(J.current),de({message:F,type:ne}),J.current=setTimeout(()=>de(null),3500)},[]);k.useEffect(()=>{(async()=>{a("syncing");try{try{const ne=await $e.getInventory();if(ne!=null&&ne.items&&Array.isArray(ne.items))e(ne.items);else{const ue=localStorage.getItem(c1);if(ue){const fe=JSON.parse(ue);e(Array.isArray(fe)?fe:[])}}}catch(ne){console.warn("Inventory load failed:",ne);const ue=localStorage.getItem(c1);if(ue){const fe=JSON.parse(ue);e(Array.isArray(fe)?fe:[])}}try{const ne=await $e.getSuppliers();if(ne!=null&&ne.suppliers&&Array.isArray(ne.suppliers))r(ne.suppliers);else{const ue=localStorage.getItem(d1);if(ue){const fe=JSON.parse(ue),ce=(fe==null?void 0:fe.suppliers)||fe;r(Array.isArray(ce)?ce:[])}}}catch(ne){console.warn("Suppliers load failed:",ne);const ue=localStorage.getItem(d1);if(ue){const fe=JSON.parse(ue),ce=(fe==null?void 0:fe.suppliers)||fe;r(Array.isArray(ce)?ce:[])}}a("synced")}catch(ne){console.error("Error loading data:",ne),a("error")}finally{l(!0)}})();try{const ne=localStorage.getItem("padoca_sent_emails");if(ne){const ue=JSON.parse(ne);if(Array.isArray(ue)){const fe=ue.map(ce=>{if(ce.items&&ce.items.length>0)return ce;if(ce.body){const W=/[\-]\s*([^:]+):\s*(\d+(?:\.\d+)?)\s*(kg|g|un|L|ml|p|cx|pac)?/gi,X=[];let Ne;for(;(Ne=W.exec(ce.body))!==null;)X.push({id:`legacy-${Date.now()}-${X.length}`,name:Ne[1].trim(),quantityToOrder:parseFloat(Ne[2]),unit:Ne[3]||"",currentStock:0,maxStock:0});if(X.length>0)return{...ce,items:X}}return ce.itemNames&&ce.itemNames.length>0?{...ce,items:ce.itemNames.map((W,X)=>({id:`legacy-name-${X}`,name:W,quantityToOrder:0,unit:"",currentStock:0,maxStock:0}))}:ce});z(fe),localStorage.setItem("padoca_sent_emails",JSON.stringify(fe))}}}catch(ne){console.warn("Sent emails load failed:",ne)}},[]),k.useEffect(()=>{(async()=>{try{if(await zr.ensureInitialized(),zr.isConnected()){u(!0),p(zr.getConnectedEmail()||"padocainc@gmail.com"),console.log(" Gmail API AUTO-CONNECTED:",zr.getConnectedEmail());const ue=await zr.getUserProfile();ue?console.log(" Gmail token validated, email:",ue.emailAddress):(console.warn(" Token expired, will need to reconnect"),zr.disconnect(),u(!1))}else{const ue=localStorage.getItem("gmail_access_token"),fe=localStorage.getItem("gmail_token_expiry");ue&&fe&&Date.now()<parseInt(fe)?(console.log(" Found stored Gmail token, reconnecting..."),u(!0),p(localStorage.getItem("gmail_user_email")||"padocainc@gmail.com")):(console.log(' Gmail API not connected - click "Conectar Gmail" to authorize'),u(!1),p("padocainc@gmail.com"))}}catch(ne){console.warn("Gmail init failed:",ne),u(!1),p("padocainc@gmail.com")}})()},[]);const le=k.useRef(g);le.current=g,k.useEffect(()=>{if(!c)return;let F=!0;const ne=async()=>{if(!F)return;const ce=le.current;if(ce.length!==0)try{const W=ce.filter(ie=>ie.status==="sent");if(W.length===0)return;const Ne=[...new Set(W.map(ie=>ie.to).filter(Boolean))],V=W.reduce((ie,Te)=>new Date(Te.sentAt)<new Date(ie.sentAt)?Te:ie),Y=new Date(V.sentAt),K=await zr.checkReplies(Ne,Y);if(!F)return;if(K.length>0){_(K);const ie=ce.map(Te=>K.some(Je=>{var pn;return Je.supplierEmail.toLowerCase()===((pn=Te.to)==null?void 0:pn.toLowerCase())})&&Te.status==="sent"?{...Te,status:"replied"}:Te);JSON.stringify(ie)!==JSON.stringify(ce)&&(z(ie),localStorage.setItem("padoca_sent_emails",JSON.stringify(ie)),oe(" Nova resposta recebida!","success"))}}catch(W){console.warn("Error checking replies:",W)}},ue=setTimeout(ne,2e3),fe=setInterval(ne,3e4);return()=>{F=!1,clearTimeout(ue),clearInterval(fe)}},[c,oe]);const ke=k.useRef(g);ke.current=g,k.useEffect(()=>{if(t.length===0)return;const F=ke.current;if(F.length===0||F.filter(ce=>ce.status==="confirmed").length===0)return;let ue=!1;const fe=F.map(ce=>{var X;return ce.status!=="confirmed"||!((X=ce.itemIds)!=null&&X.length)?ce:ce.itemIds.every(Ne=>{const V=t.find(ie=>ie.id===Ne);if(!V)return!0;const Y=(Number(V.packageQuantity)||0)*(Number(V.packageCount)||1),K=Number(V.minStock)||0;return Y>=K})?(ue=!0,{...ce,status:"delivered",deliveredAt:new Date().toISOString()}):ce});ue&&(z(fe),localStorage.setItem("padoca_sent_emails",JSON.stringify(fe)),oe(" Pedido entregue - estoque atualizado!","success"))},[t,oe]);const U=F=>(Number(F.packageQuantity)||0)*(Number(F.packageCount)||1),se=F=>{const ne=U(F),ue=Number(F.minStock)||0;return ue===0?"ok":ne<ue?"critical":ne<=ue*1.2?"warning":"ok"},A=k.useMemo(()=>{const F=new Set(g.filter(fe=>fe.status==="sent"||fe.status==="replied").map(fe=>fe.supplierId).filter(Boolean)),ne=t.filter(fe=>{const ce=se(fe);return ce==="critical"||ce==="warning"}).map(fe=>({...fe,status:se(fe),totalQty:U(fe)})),ue={};return ne.forEach(fe=>{const ce=n.find(X=>{var Ne;return(Ne=X.linkedItems)==null?void 0:Ne.some(V=>V.itemId===fe.id)}),W=(ce==null?void 0:ce.id)||"unlinked";F.has(ce==null?void 0:ce.id)||(ue[W]||(ue[W]={supplier:ce,items:[]}),ue[W].items.push(fe))}),Object.values(ue).filter(fe=>fe.supplier)},[t,n,g]),q=k.useMemo(()=>{const F=t.length,ne=t.filter(W=>se(W)==="critical").length,ue=t.filter(W=>se(W)==="warning").length,fe=A.length,ce=F>0?Math.max(0,Math.round(100-ne*20-ue*5)):100;return{total:F,critical:ne,warning:ue,suppliersWithAlerts:fe,healthScore:ce}},[t,A]),$=k.useCallback((F,ne)=>{const ue=new Date().toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}),fe=ne.map(ce=>{const W=ce.totalQty||0,X=ce.maxStock||0,Ne=Math.max(0,X-W);return` ${ce.name}: ${Ne.toFixed(0)}${ce.unit||"kg"}`}).join(`
`);return{to:F.email||"",subject:`Solicitao de Cotao - Padoca Pizza - ${new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"}).replace(/\//g,"-")}`,body:`Ol ${F.name},

Espero que esteja bem!

Estamos precisando repor alguns itens do nosso estoque e gostaramos de solicitar uma cotao:

${fe}

Poderia nos enviar os preos atualizados e prazo de entrega?

Obrigado!
Equipe Padoca Pizza


${ue}`}},[]),[re,S]=k.useState([]),O=(F,ne)=>{const ue=$(F,ne);L(F),S(ne),b(ue),N(!0)},[H,Z]=k.useState(!1),[me,pe]=k.useState(!1),[we,Se]=k.useState(null),ze=async()=>{if(!R.to){oe("Email do fornecedor no cadastrado","error");return}if(g.find(ne=>ne.supplierId===(P==null?void 0:P.id)&&(ne.status==="sent"||ne.status==="confirmed"))){oe("J existe uma cotao pendente para este fornecedor","error"),N(!1);return}Z(!0);try{console.log(" Opening email composer..."),await zr.sendEmail({to:R.to,subject:R.subject,body:R.body,supplierName:P==null?void 0:P.name}),console.log(" Email service completed!");const ne=re.map(ce=>{const W=ce.totalQty||0,X=ce.maxStock||0,Ne=Math.max(0,X-W);return{id:ce.id,name:ce.name,currentStock:W,maxStock:X,quantityToOrder:Ne,unit:ce.unit||"",supplierId:ce.supplierId}}),ue={id:Date.now().toString(),...R,supplierName:P==null?void 0:P.name,supplierId:P==null?void 0:P.id,items:ne,itemNames:re.map(ce=>ce.name),totalItems:re.length,sentAt:new Date().toISOString(),status:"sent",sentViaGmail:c},fe=[ue,...g];z(fe),localStorage.setItem("padoca_sent_emails",JSON.stringify(fe)),Z(!1),N(!1),oe(" Email enviado! Gmail aberto para finalizar.","success"),console.log(" Showing success modal..."),Se(ue),pe(!0),v("awaiting"),L(null),S([]),b({to:"",subject:"",body:""})}catch(ne){console.error(" Send email failed:",ne),Z(!1),oe("Erro ao enviar email: "+ne.message,"error")}},De=()=>{const F=`Para: ${R.to}
Assunto: ${R.subject}

${R.body}`;navigator.clipboard.writeText(F),oe("Email copiado para rea de transferncia!")},Xe=F=>{const ne=Number(F)||0;return new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:2}).format(ne)},Pe=q.healthScore>=80?"emerald":q.healthScore>=60?"amber":"rose";return i.jsxs("div",{className:"space-y-6 md:space-y-8 animate-fade-in pb-16 relative font-sans selection:bg-indigo-500/20",children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none opacity-40",children:[i.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-indigo-500/5 blur-[120px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-500/5 blur-[120px] rounded-full"})]}),i.jsxs("div",{className:"relative z-10 flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-6 mb-2",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2 md:gap-3 mb-1",children:[i.jsx("h1",{className:"text-2xl md:text-5xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Inteligncia"}),i.jsxs("div",{className:`px-2 py-0.5 rounded-full border flex items-center gap-1.5 transition-all duration-500 shrink-0 ${s==="syncing"?"bg-amber-500/5 border-amber-500/10 text-amber-500 animate-pulse":s==="error"?"bg-red-500/5 border-red-500/10 text-red-500":"bg-emerald-500/5 border-emerald-500/10 text-emerald-500/80"}`,children:[i.jsx("div",{className:`w-1 h-1 rounded-full ${s==="syncing"?"bg-amber-500":s==="error"?"bg-red-500":"bg-emerald-500"}`}),i.jsx("span",{className:"text-[9px] md:text-[10px] font-bold uppercase tracking-widest leading-none whitespace-nowrap",children:s==="syncing"?"Sync":s==="error"?"Error":"Active"})]})]}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm md:text-base font-medium",children:"Automao e insights em tempo real"})]}),i.jsxs("div",{className:"flex flex-col md:flex-row gap-3 w-full md:w-auto",children:[c?i.jsxs("div",{className:"flex items-center gap-3 px-4 py-2.5 bg-emerald-50 dark:bg-emerald-900/20 rounded-2xl border border-emerald-200/50 dark:border-emerald-500/20",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),i.jsx("svg",{className:"w-4 h-4 text-emerald-600 dark:text-emerald-400",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"})})]}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-[10px] font-bold text-emerald-600 dark:text-emerald-400",children:"Gmail Conectado"}),i.jsx("span",{className:"text-[9px] text-emerald-500/70",children:h})]})]}):i.jsxs("button",{onClick:()=>{oe("Abrindo autorizao do Gmail...","info"),zr.authorize().then(F=>{F.connected&&(u(!0),p(F.email),oe(" Gmail conectado! Respostas sero detectadas automaticamente.","success"))}).catch(F=>{oe("Erro ao conectar: "+F.message,"error")})},className:"flex items-center gap-3 px-4 py-2.5 bg-amber-50 dark:bg-amber-900/20 rounded-2xl border border-amber-200/50 dark:border-amber-500/20 hover:bg-amber-100 dark:hover:bg-amber-900/30 transition-all cursor-pointer group",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),i.jsx("svg",{className:"w-4 h-4 text-amber-600 dark:text-amber-400",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M24 5.457v13.909c0 .904-.732 1.636-1.636 1.636h-3.819V11.73L12 16.64l-6.545-4.91v9.273H1.636A1.636 1.636 0 0 1 0 19.366V5.457c0-2.023 2.309-3.178 3.927-1.964L5.455 4.64 12 9.548l6.545-4.91 1.528-1.145C21.69 2.28 24 3.434 24 5.457z"})})]}),i.jsxs("div",{className:"flex flex-col items-start",children:[i.jsx("span",{className:"text-[10px] font-bold text-amber-600 dark:text-amber-400 group-hover:underline",children:"Conectar Gmail"}),i.jsx("span",{className:"text-[9px] text-amber-500/70",children:"Para detectar respostas"})]})]}),i.jsxs("button",{onClick:()=>A.length>0&&O(A[0].supplier,A[0].items),disabled:A.length===0,className:"w-full md:w-auto px-8 py-4 md:py-3.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs md:text-sm font-bold uppercase tracking-widest shadow-2xl hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 group disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transition-transform group-hover:rotate-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Notificar Fornecedores"]})]})]}),i.jsxs("section",{className:"relative z-10 grid grid-cols-1 md:grid-cols-4 gap-3 md:gap-4",children:[i.jsx("div",{className:"md:col-span-2 relative group",children:i.jsxs("div",{className:"relative h-full bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[2.5rem] p-6 md:p-10 border border-zinc-200/50 dark:border-white/10 shadow-xl overflow-hidden flex flex-col justify-between transition-all duration-500 hover:shadow-2xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-80 h-80 bg-emerald-500/[0.03] dark:bg-emerald-500/[0.07] blur-[100px] rounded-full -translate-y-1/2 translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex justify-between items-start mb-12",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-[10px] font-bold text-zinc-400 dark:text-emerald-300/60 uppercase tracking-widest cursor-text hover:text-emerald-600 dark:hover:text-emerald-400 transition-colors",children:"Intelligence Matrix"}),i.jsx("p",{className:"text-zinc-400 dark:text-white/30 text-[9px] font-medium tracking-wide mt-1",children:"Protocol Status: Active Monitoring"})]}),i.jsxs("div",{className:"px-4 py-1.5 bg-zinc-50 dark:bg-white/5 backdrop-blur-md rounded-full border border-zinc-200/50 dark:border-white/10 flex items-center gap-2 shadow-sm",children:[i.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${Pe==="emerald"?"bg-emerald-500":Pe==="amber"?"bg-amber-500":"bg-rose-500"}`}),i.jsx("span",{className:"text-[8px] font-bold text-zinc-500 dark:text-white/60 uppercase tracking-widest leading-none",children:"Live Analysis"})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsx("span",{className:"text-[9px] font-bold text-emerald-500/60 uppercase tracking-widest ml-1",children:"Health Score"}),i.jsxs("div",{className:"text-4xl md:text-7xl font-semibold text-zinc-900 dark:text-white tracking-tighter leading-tight md:leading-none flex flex-wrap items-baseline gap-2 md:gap-3",children:[i.jsx("span",{className:Pe==="emerald"?"text-emerald-500":Pe==="amber"?"text-amber-500":"text-rose-500",children:q.healthScore}),i.jsx("span",{className:"text-2xl md:text-4xl text-zinc-300 dark:text-zinc-600",children:"/ 100"})]})]})]}),i.jsxs("div",{className:"relative flex flex-col sm:flex-row gap-6 md:gap-12 mt-12 md:mt-20 pt-8 md:pt-10 border-t border-zinc-100 dark:border-white/5",children:[i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-zinc-400 dark:text-white/30 uppercase tracking-widest",children:"Itens Monitorados"}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-zinc-800 dark:text-white/90 tracking-tight tabular-nums",children:q.total})]}),i.jsxs("div",{className:"flex flex-col gap-1.5",children:[i.jsx("span",{className:"text-[9px] font-bold text-rose-500 dark:text-rose-400 uppercase tracking-widest",children:"Alertas Ativos"}),i.jsx("span",{className:"text-2xl md:text-3xl font-semibold text-rose-600 dark:text-rose-400 tracking-tight tabular-nums",children:q.critical+q.warning})]})]})]})}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-500 shadow-[0_0_8px_rgba(244,63,94,0.4)]"}),i.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Crtico"})]}),i.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:q.critical}),i.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens abaixo do mnimo"})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[i.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Urgncia"}),i.jsx("span",{className:"text-[8px] font-bold text-rose-500",children:"Alta"})]}),i.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-rose-500/80 transition-all duration-1000",style:{width:q.total>0?`${q.critical/q.total*100}%`:"0%"}})})]})]}),i.jsxs("div",{className:"bg-white/80 dark:bg-zinc-900/60 backdrop-blur-3xl rounded-[2rem] p-6 border border-zinc-200/50 dark:border-white/5 flex flex-col justify-between group shadow-sm hover:shadow-md transition-all",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[i.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-500 shadow-[0_0_8px_rgba(245,158,11,0.4)]"}),i.jsx("h3",{className:"text-[9px] font-bold text-zinc-400 uppercase tracking-widest mb-0",children:"Ateno"})]}),i.jsx("div",{className:"text-3xl font-semibold text-zinc-900 dark:text-zinc-100 tabular-nums tracking-tight",children:q.warning}),i.jsx("div",{className:"text-[9px] font-medium text-zinc-400 tabular-nums",children:"itens prximos do limite"})]}),i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-1.5 px-0.5",children:[i.jsx("span",{className:"text-[8px] font-bold text-zinc-400 uppercase tracking-widest",children:"Monitorar"}),i.jsx("span",{className:"text-[8px] font-bold text-amber-500",children:"Mdia"})]}),i.jsx("div",{className:"w-full h-1 bg-zinc-100 dark:bg-white/5 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-amber-500/80 transition-all duration-1000",style:{width:q.total>0?`${q.warning/q.total*100}%`:"0%"}})})]})]})]}),i.jsxs("section",{className:"relative z-10 bg-white dark:bg-zinc-950 rounded-[2rem] md:rounded-[3rem] border border-zinc-200/50 dark:border-white/10 overflow-hidden shadow-xl",children:[i.jsxs("div",{className:"p-6 md:p-10 pb-0",children:[i.jsx("h2",{className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Automation Protocol"}),i.jsx("h3",{className:"text-xl md:text-2xl font-semibold text-zinc-900 dark:text-white tracking-tight leading-none mb-6",children:"Gesto de Cotaes"}),i.jsx("div",{className:"flex p-1.5 bg-zinc-100/80 dark:bg-zinc-800/60 rounded-2xl border border-zinc-200/30 dark:border-white/5 overflow-x-auto scrollbar-hide -mx-2 md:mx-0 backdrop-blur-sm",children:[{key:"pending",label:"Pendente",count:A.length,color:"zinc",icon:""},{key:"awaiting",label:"Aguardando",count:g.filter(F=>F.status==="sent"||F.status==="quoted").length,color:"zinc",icon:""},{key:"ordered",label:"Ordens",count:g.filter(F=>F.status==="confirmed").length,color:"zinc",icon:""},{key:"received",label:"Recebido",count:g.filter(F=>F.status==="delivered").length,color:"zinc",icon:""},{key:"history",label:"Histrico",count:g.length,color:"zinc",icon:""}].map(F=>i.jsxs("button",{onClick:()=>v(F.key),className:`relative flex-shrink-0 flex-1 min-w-[70px] flex items-center justify-center gap-1 py-2.5 md:py-3 px-2.5 md:px-4 rounded-xl text-[9px] md:text-[10px] font-semibold uppercase tracking-wide transition-all duration-300 whitespace-nowrap ${T===F.key?"text-zinc-900 dark:text-white":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-600 dark:hover:text-zinc-400"}`,children:[T===F.key&&i.jsx(B.div,{layoutId:"protocol-tab-indicator",className:"absolute inset-0 bg-white dark:bg-zinc-700/80 rounded-xl shadow-sm",transition:{type:"spring",stiffness:500,damping:35}}),i.jsx("span",{className:"relative z-10",children:F.label}),F.count>0&&i.jsx("span",{className:`relative z-10 min-w-[18px] h-[18px] px-1 flex items-center justify-center rounded-full text-[8px] font-bold ${T===F.key?"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900":"bg-zinc-200/80 dark:bg-zinc-700/80 text-zinc-500 dark:text-zinc-400"}`,children:F.count})]},F.key))})]}),i.jsx("div",{className:"p-6 md:p-10 pt-6",children:i.jsxs(_e,{mode:"wait",children:[T==="pending"&&i.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:A.length===0?i.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800/50 flex items-center justify-center",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Estoque em dia"}),i.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600",children:"Nenhuma cotao pendente"})]}):i.jsx("div",{className:"space-y-3",children:A.map(({supplier:F,items:ne})=>{var ue,fe;return i.jsxs(B.div,{className:"rounded-2xl bg-zinc-50/80 dark:bg-zinc-800/30 border border-zinc-200/50 dark:border-white/5 overflow-hidden hover:border-zinc-300 dark:hover:border-white/10 transition-all",whileHover:{scale:1.002},children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5 cursor-pointer",onClick:()=>O(F,ne),children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-zinc-900 dark:bg-white flex items-center justify-center text-white dark:text-zinc-900 text-base font-semibold shrink-0",children:(fe=(ue=F.name)==null?void 0:ue.charAt(0))==null?void 0:fe.toUpperCase()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:F.name}),i.jsxs("p",{className:"text-[10px] text-zinc-500 dark:text-zinc-400",children:[ne.length," ",ne.length===1?"item":"itens"," abaixo do mnimo"]})]})]}),i.jsxs("button",{className:"w-full md:w-auto px-5 py-2.5 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:opacity-90 transition-all flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Solicitar Cotao"]})]}),i.jsxs("div",{className:"border-t border-zinc-200/50 dark:border-white/5 bg-white/50 dark:bg-zinc-900/20",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-3 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider",children:[i.jsx("span",{children:"Item"}),i.jsx("span",{className:"text-center",children:"Estoque Atual"}),i.jsx("span",{className:"text-right",children:"Quantidade a Pedir"})]}),ne.map(ce=>{const W=ce.totalQty||0,X=ce.maxStock||0,Ne=Math.max(0,X-W);return i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 py-3 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0 hover:bg-zinc-50 dark:hover:bg-white/[0.02] transition-colors",children:[i.jsx("span",{className:"col-span-2 md:col-span-1 text-sm font-medium text-zinc-700 dark:text-zinc-200",children:ce.name}),i.jsxs("span",{className:"text-xs text-zinc-400 md:text-center tabular-nums",children:[i.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Atual:"}),W.toFixed(0),ce.unit||""]}),i.jsxs("span",{className:"text-sm font-semibold text-zinc-900 dark:text-white md:text-right tabular-nums",children:[i.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Pedir:"}),"+",Ne.toFixed(0),ce.unit||""]})]},ce.id)})]})]},F.id)})})},"pending"),T==="awaiting"&&i.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:g.filter(F=>F.status==="sent"||F.status==="quoted").length===0?i.jsxs(B.div,{className:"py-16 md:py-24 text-center flex flex-col items-center gap-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5,ease:[.4,0,.2,1]},children:[i.jsxs(B.div,{className:"relative",animate:{scale:[1,1.05,1]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:[i.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-amber-100 to-orange-50 dark:from-amber-500/20 dark:to-orange-500/10 flex items-center justify-center shadow-lg shadow-amber-500/10",children:i.jsx("svg",{className:"w-10 h-10 text-amber-500 dark:text-amber-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})})}),i.jsx("div",{className:"absolute inset-0 rounded-3xl border-2 border-amber-200/30 dark:border-amber-500/10 animate-ping",style:{animationDuration:"3s"}})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-zinc-700 dark:text-zinc-200",children:"Nenhuma cotao em andamento"}),i.jsx("p",{className:"text-sm text-zinc-400 dark:text-zinc-500 max-w-xs mx-auto",children:"Envie uma nova cotao para fornecedores atravs da aba Pendente"})]}),i.jsxs("button",{onClick:()=>v("pending"),className:"mt-2 px-6 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-2xl text-sm font-semibold shadow-lg shadow-amber-500/25 hover:shadow-xl hover:shadow-amber-500/30 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),"Nova Cotao"]})]}):i.jsxs("div",{className:"space-y-6",children:[g.filter(F=>F.status==="sent").length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-400 animate-pulse"}),i.jsx("span",{className:"text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:"Aguardando Resposta"}),i.jsx("span",{className:"px-1.5 py-0.5 bg-amber-100 dark:bg-amber-500/20 rounded text-[9px] font-bold text-amber-600 dark:text-amber-400",children:g.filter(F=>F.status==="sent").length})]}),i.jsx("div",{className:"space-y-3",children:g.filter(F=>F.status==="sent").map(F=>{var ne,ue,fe,ce;return i.jsxs(B.div,{className:"rounded-2xl bg-amber-50/30 dark:bg-amber-500/5 border border-amber-100 dark:border-amber-500/10 overflow-hidden",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[i.jsxs("div",{className:"p-4 md:p-5 flex flex-col md:flex-row md:items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[i.jsx("div",{className:"w-11 h-11 rounded-xl bg-amber-500 flex items-center justify-center text-white text-base font-semibold shrink-0 shadow-lg shadow-amber-500/20",children:((ue=(ne=F.supplierName)==null?void 0:ne.charAt(0))==null?void 0:ue.toUpperCase())||"?"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100",children:F.supplierName}),i.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[i.jsx("span",{className:"text-[10px] text-amber-600 dark:text-amber-400 font-medium",children:((fe=F.items)==null?void 0:fe.length)>0?`${F.items.length} itens solicitados`:((ce=F.itemNames)==null?void 0:ce.length)>0?`${F.itemNames.length} itens`:"Cotao enviada"}),i.jsx("span",{className:"text-[10px] text-zinc-300",children:""}),i.jsx("span",{className:"text-[10px] text-zinc-400",children:d8(F.sentAt)})]})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{I(F),ve({quotedValue:"",expectedDelivery:""}),D(!0)},className:"px-4 py-2.5 bg-amber-500 text-white rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-amber-600 transition-all shadow-md",children:"Registrar Cotao"}),i.jsx("button",{onClick:()=>O(n.find(W=>W.name===F.supplierName)||{name:F.supplierName,email:F.to},[]),className:"px-4 py-2.5 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all",children:"Reenviar"})]})]}),F.items&&F.items.length>0?i.jsxs("div",{className:"border-t border-amber-100 dark:border-amber-500/10 bg-white/50 dark:bg-zinc-900/30",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-4 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider border-b border-zinc-100 dark:border-white/5",children:[i.jsx("span",{children:"Item"}),i.jsx("span",{className:"text-center",children:"Estoque Atual"}),i.jsx("span",{className:"text-center",children:"Mximo"}),i.jsx("span",{className:"text-right",children:"Qtd. Solicitada"})]}),F.items.slice(0,5).map((W,X)=>i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 md:gap-4 py-2.5 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0",children:[i.jsx("span",{className:"col-span-2 md:col-span-1 text-sm font-medium text-zinc-700 dark:text-zinc-200",children:W.name}),i.jsxs("span",{className:"text-xs text-zinc-400 md:text-center tabular-nums",children:[i.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Atual:"}),W.currentStock,W.unit]}),i.jsxs("span",{className:"text-xs text-zinc-400 md:text-center tabular-nums",children:[i.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Mx:"}),W.maxStock,W.unit]}),i.jsxs("span",{className:"text-sm font-bold text-amber-600 dark:text-amber-400 md:text-right tabular-nums",children:[i.jsx("span",{className:"md:hidden text-[10px] text-zinc-300 mr-1",children:"Pedido:"}),"+",W.quantityToOrder,W.unit]})]},W.id||X)),F.items.length>5&&i.jsxs("div",{className:"px-5 py-2 text-[10px] text-zinc-400 text-center border-t border-zinc-100 dark:border-white/5",children:["+",F.items.length-5," mais itens"]})]}):F.itemNames&&F.itemNames.length>0?i.jsxs("div",{className:"border-t border-amber-100 dark:border-amber-500/10 bg-white/50 dark:bg-zinc-900/30 p-4",children:[i.jsxs("div",{className:"flex flex-wrap gap-2",children:[F.itemNames.slice(0,5).map((W,X)=>i.jsx("span",{className:"px-3 py-1.5 bg-amber-100/80 dark:bg-amber-500/20 rounded-lg text-xs font-medium text-amber-700 dark:text-amber-300",children:W},X)),F.itemNames.length>5&&i.jsxs("span",{className:"px-3 py-1.5 bg-zinc-100 dark:bg-zinc-800 rounded-lg text-xs text-zinc-500",children:["+",F.itemNames.length-5," mais"]})]}),i.jsx("p",{className:"text-[10px] text-zinc-400 mt-2 italic",children:"* Detalhes de quantidade no disponveis para cotaes antigas"})]}):null]},F.id)})})]}),g.filter(F=>F.status==="quoted").length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[i.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),i.jsx("span",{className:"text-[10px] font-semibold text-zinc-500 uppercase tracking-wider",children:"Cotao Recebida"})]}),i.jsx("div",{className:"space-y-2",children:g.filter(F=>F.status==="quoted").map(F=>{var ne,ue;return i.jsx(B.div,{className:"rounded-2xl bg-blue-50/50 dark:bg-blue-500/5 border border-blue-100 dark:border-blue-500/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500 flex items-center justify-center text-white text-sm font-semibold shrink-0",children:((ue=(ne=F.supplierName)==null?void 0:ne.charAt(0))==null?void 0:ue.toUpperCase())||"?"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:F.supplierName||F.to}),i.jsxs("p",{className:"text-[10px] text-blue-600 dark:text-blue-400",children:[F.quotedValue?i.jsxs(i.Fragment,{children:["Cotao: ",i.jsx("span",{className:"font-bold",children:Xe(F.quotedValue)})]}):"Aguardando aprovao",F.expectedDelivery&&i.jsxs("span",{className:"ml-2 text-zinc-400",children:[" Entrega: ",_r(F.expectedDelivery,{month:"short",day:"2-digit"})]})]})]})]}),F.quotedValue&&i.jsxs("div",{className:"hidden md:flex flex-col items-end gap-0.5 shrink-0 px-4",children:[i.jsx("span",{className:"text-lg font-bold text-blue-600 dark:text-blue-400 tabular-nums",children:Xe(F.quotedValue)}),F.expectedDelivery&&i.jsxs("span",{className:"text-[9px] text-zinc-400 uppercase tracking-wider",children:["Entrega: ",_r(F.expectedDelivery,{month:"short",day:"2-digit"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>{const fe=g.map(ce=>ce.id===F.id?{...ce,status:"confirmed",confirmedAt:new Date().toISOString()}:ce);z(fe),localStorage.setItem("padoca_sent_emails",JSON.stringify(fe)),oe(" Ordem de compra criada!","success")},className:"px-4 py-2 bg-blue-500 text-white rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-blue-600 transition-all flex items-center gap-1.5",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Aprovar"]}),i.jsx("button",{onClick:()=>{const fe=g.map(ce=>ce.id===F.id?{...ce,status:"sent",quotedValue:null,expectedDelivery:null}:ce);z(fe),localStorage.setItem("padoca_sent_emails",JSON.stringify(fe)),oe("Solicitando nova cotao...","info"),O(n.find(ce=>ce.name===F.supplierName)||{name:F.supplierName,email:F.to},[])},className:"px-4 py-2 bg-zinc-100 dark:bg-zinc-800 text-zinc-600 dark:text-zinc-300 rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-zinc-200 dark:hover:bg-zinc-700 transition-all",children:"Nova Cotao"})]})]})},F.id)})})]})]})},"awaiting"),T==="ordered"&&i.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:g.filter(F=>F.status==="confirmed").length===0?i.jsxs(B.div,{className:"py-16 md:py-24 text-center flex flex-col items-center gap-6",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[i.jsx(B.div,{className:"relative",animate:{y:[0,-4,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:i.jsx("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-indigo-100 to-purple-50 dark:from-indigo-500/20 dark:to-purple-500/10 flex items-center justify-center shadow-lg shadow-indigo-500/10",children:i.jsx("svg",{className:"w-10 h-10 text-indigo-500 dark:text-indigo-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})})})}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"text-lg font-semibold text-zinc-700 dark:text-zinc-200",children:"Nenhuma ordem de compra"}),i.jsx("p",{className:"text-sm text-zinc-400 dark:text-zinc-500 max-w-xs mx-auto",children:"Aprove cotaes recebidas para criar ordens de compra"})]}),i.jsxs("button",{onClick:()=>v("awaiting"),className:"mt-2 px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-500 text-white rounded-2xl text-sm font-semibold shadow-lg shadow-indigo-500/25 hover:shadow-xl hover:shadow-indigo-500/30 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ver Cotaes"]})]}):i.jsx("div",{className:"space-y-3",children:g.filter(F=>F.status==="confirmed").map(F=>i.jsxs(B.div,{className:"rounded-2xl bg-indigo-50/50 dark:bg-indigo-500/5 border border-indigo-100 dark:border-indigo-500/10 overflow-hidden",initial:{opacity:0,scale:.98},animate:{opacity:1,scale:1},children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-500 flex items-center justify-center text-white text-sm font-semibold shrink-0",children:i.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:F.supplierName||F.to}),i.jsxs("p",{className:"text-[10px] text-indigo-600 dark:text-indigo-400",children:["Ordem criada em ",_r(F.confirmedAt||F.sentAt,{month:"short",day:"2-digit"}),F.expectedDelivery&&i.jsxs("span",{className:"ml-2 text-zinc-400",children:[" Entrega prev.: ",_r(F.expectedDelivery,{month:"short",day:"2-digit"})]})]})]})]}),F.quotedValue&&i.jsx("div",{className:"hidden md:block px-4 py-2 bg-indigo-100 dark:bg-indigo-500/20 rounded-xl",children:i.jsx("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400 tabular-nums",children:Xe(F.quotedValue)})}),i.jsxs("button",{onClick:()=>{const ne=g.map(ue=>ue.id===F.id?{...ue,status:"delivered",deliveredAt:new Date().toISOString()}:ue);z(ne),localStorage.setItem("padoca_sent_emails",JSON.stringify(ne)),oe(" Produto recebido!","success")},className:"w-full md:w-auto px-5 py-2.5 bg-indigo-500 text-white rounded-xl text-[10px] font-semibold uppercase tracking-wider hover:bg-indigo-600 transition-all flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})}),"Confirmar Recebimento"]})]}),F.quotedValue&&i.jsxs("div",{className:"md:hidden px-5 pb-4 flex items-center justify-between",children:[i.jsx("span",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Valor:"}),i.jsx("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400 tabular-nums",children:Xe(F.quotedValue)})]}),F.items&&F.items.length>0&&i.jsxs("div",{className:"border-t border-indigo-100 dark:border-indigo-500/10 bg-white/50 dark:bg-zinc-900/30",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-3 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider border-b border-zinc-100 dark:border-white/5",children:[i.jsx("span",{children:"Item"}),i.jsx("span",{className:"text-center",children:"Quantidade Solicitada"}),i.jsx("span",{className:"text-right",children:"Unidade"})]}),F.items.slice(0,4).map((ne,ue)=>i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 md:gap-4 py-2.5 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0",children:[i.jsx("span",{className:"col-span-2 md:col-span-1 text-sm font-medium text-zinc-700 dark:text-zinc-200",children:ne.name}),i.jsxs("span",{className:"text-sm font-bold text-indigo-600 dark:text-indigo-400 md:text-center tabular-nums",children:[ne.quantityToOrder,ne.unit]}),i.jsx("span",{className:"text-xs text-zinc-400 md:text-right",children:ne.unit||""})]},ne.id||ue)),F.items.length>4&&i.jsxs("div",{className:"px-5 py-2 text-[10px] text-zinc-400 text-center",children:["+",F.items.length-4," mais itens"]})]})]},F.id))})},"ordered"),T==="received"&&i.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:g.filter(F=>F.status==="delivered").length===0?i.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800/50 flex items-center justify-center",children:i.jsx("svg",{className:"w-8 h-8 text-zinc-300 dark:text-zinc-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}),i.jsx("p",{className:"text-sm font-medium text-zinc-400 dark:text-zinc-500",children:"Nenhum recebimento"}),i.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600",children:'Confirme entregas na aba "Ordens"'})]}):i.jsx("div",{className:"space-y-2",children:g.filter(F=>F.status==="delivered").map(F=>i.jsxs(B.div,{className:"rounded-2xl bg-emerald-50/50 dark:bg-emerald-500/5 border border-emerald-100 dark:border-emerald-500/10 overflow-hidden",initial:{opacity:0},animate:{opacity:1},children:[i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 p-4 md:p-5",children:[i.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-0",children:[i.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-500 flex items-center justify-center shrink-0",children:i.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:F.supplierName||F.to}),i.jsxs("p",{className:"text-[10px] text-emerald-600 dark:text-emerald-400",children:["Recebido em ",_r(F.deliveredAt||F.sentAt,{month:"short",day:"2-digit"})]})]})]}),F.quotedValue&&i.jsx("div",{className:"hidden md:block px-4 py-2 bg-emerald-100 dark:bg-emerald-500/20 rounded-xl",children:i.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:Xe(F.quotedValue)})}),i.jsx("div",{className:"shrink-0",children:i.jsx("span",{className:"px-3 py-1.5 bg-emerald-500 text-white rounded-lg text-[9px] font-bold uppercase tracking-wider",children:" Recebido"})})]}),F.quotedValue&&i.jsxs("div",{className:"md:hidden px-5 pb-4 flex items-center justify-between border-t border-emerald-100 dark:border-emerald-500/10 pt-3",children:[i.jsx("span",{className:"text-[10px] text-zinc-400 uppercase tracking-wider",children:"Valor pago:"}),i.jsx("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:Xe(F.quotedValue)})]}),F.items&&F.items.length>0&&i.jsxs("div",{className:"border-t border-emerald-100 dark:border-emerald-500/10 bg-white/50 dark:bg-zinc-900/30",children:[i.jsxs("div",{className:"hidden md:grid grid-cols-2 gap-4 px-5 py-2 text-[9px] font-medium text-zinc-400 uppercase tracking-wider border-b border-zinc-100 dark:border-white/5",children:[i.jsx("span",{children:"Item Recebido"}),i.jsx("span",{className:"text-right",children:"Quantidade"})]}),F.items.slice(0,3).map((ne,ue)=>i.jsxs("div",{className:"flex items-center justify-between py-2.5 px-4 md:px-5 border-b border-zinc-100 dark:border-white/5 last:border-b-0",children:[i.jsxs("span",{className:"text-sm font-medium text-zinc-700 dark:text-zinc-200 flex items-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4 text-emerald-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),ne.name]}),i.jsxs("span",{className:"text-sm font-bold text-emerald-600 dark:text-emerald-400 tabular-nums",children:[ne.quantityToOrder,ne.unit]})]},ne.id||ue)),F.items.length>3&&i.jsxs("div",{className:"px-5 py-2 text-[10px] text-zinc-400 text-center",children:["+",F.items.length-3," mais itens"]})]})]},F.id))})},"received"),T==="history"&&i.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:g.length===0?i.jsxs("div",{className:"py-20 text-center flex flex-col items-center gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-full bg-zinc-100 dark:bg-zinc-800 flex items-center justify-center border border-zinc-200 dark:border-zinc-700",children:i.jsx("svg",{className:"w-8 h-8 text-zinc-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:1.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),i.jsx("p",{className:"text-sm font-semibold text-zinc-400 dark:text-zinc-500",children:"Nenhum registro"}),i.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-600 uppercase tracking-widest",children:"As movimentaes aparecero aqui"})]}):i.jsxs("div",{children:[i.jsxs("div",{className:"hidden md:grid grid-cols-12 gap-4 py-3 mb-2 text-[9px] font-bold text-zinc-400 uppercase tracking-widest border-b border-zinc-100 dark:border-white/5",children:[i.jsx("div",{className:"col-span-1",children:"Status"}),i.jsx("div",{className:"col-span-3",children:"Fornecedor"}),i.jsx("div",{className:"col-span-3",children:"Itens"}),i.jsx("div",{className:"col-span-2",children:"Enviado"}),i.jsx("div",{className:"col-span-2",children:"Atualizado"}),i.jsx("div",{className:"col-span-1 text-right",children:"Ao"})]}),i.jsx("div",{className:"space-y-2",children:g.slice(0,20).map(F=>{var fe,ce,W;const ne={sent:{color:"amber",icon:"",label:"Sem Resposta"},quoted:{color:"blue",icon:"",label:"Cotado"},confirmed:{color:"indigo",icon:"",label:"Em Ordem"},delivered:{color:"emerald",icon:"",label:"Recebido"}},ue=ne[F.status]||ne.sent;return i.jsxs(B.div,{className:"grid grid-cols-1 md:grid-cols-12 gap-3 md:gap-4 p-4 rounded-2xl bg-zinc-50/50 dark:bg-white/[0.02] border border-zinc-100/50 dark:border-white/5",initial:{opacity:0},animate:{opacity:1},children:[i.jsxs("div",{className:"md:col-span-1 flex items-center gap-2",children:[i.jsx("div",{className:`w-8 h-8 rounded-lg bg-${ue.color}-100 dark:bg-${ue.color}-500/10 flex items-center justify-center text-sm shrink-0`,children:ue.icon}),i.jsx("span",{className:`md:hidden text-[10px] font-semibold text-${ue.color}-600 dark:text-${ue.color}-400`,children:ue.label})]}),i.jsxs("div",{className:"md:col-span-3 flex items-center gap-3",children:[i.jsx("div",{className:"w-9 h-9 rounded-xl bg-zinc-900 dark:bg-white flex items-center justify-center text-white dark:text-zinc-900 text-sm font-semibold shrink-0",children:((ce=(fe=F.supplierName)==null?void 0:fe.charAt(0))==null?void 0:ce.toUpperCase())||"?"}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-sm font-semibold text-zinc-800 dark:text-zinc-100 truncate",children:F.supplierName||"Fornecedor"}),i.jsx("p",{className:"text-[10px] text-zinc-400 truncate",children:F.to})]})]}),i.jsxs("div",{className:"md:col-span-3 flex flex-col gap-1",children:[F.items&&F.items.length>0?i.jsxs(i.Fragment,{children:[F.items.slice(0,2).map((X,Ne)=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-[11px] font-medium text-zinc-600 dark:text-zinc-300 truncate max-w-[100px]",children:X.name}),i.jsxs("span",{className:"text-[10px] font-bold text-zinc-500 dark:text-zinc-400 tabular-nums ml-2",children:["+",X.quantityToOrder,X.unit]})]},X.id||Ne)),F.items.length>2&&i.jsxs("span",{className:"text-[9px] text-zinc-400",children:["+",F.items.length-2," mais"]})]}):(F.itemNames||[]).length>0?i.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[(F.itemNames||[]).slice(0,2).map((X,Ne)=>i.jsx("span",{className:"px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded-md text-[9px] font-medium text-zinc-600 dark:text-zinc-400 truncate max-w-[80px]",children:X},Ne)),(((W=F.itemNames)==null?void 0:W.length)||0)>2&&i.jsxs("span",{className:"text-[9px] text-zinc-400",children:["+",F.itemNames.length-2]})]}):i.jsx("span",{className:"text-[10px] text-zinc-300 dark:text-zinc-600",children:""}),F.quotedValue&&i.jsxs("span",{className:"text-[10px] font-bold text-blue-600 dark:text-blue-400 mt-0.5",children:["Total: ",Xe(F.quotedValue)]})]}),i.jsx("div",{className:"md:col-span-2 flex items-center",children:i.jsxs("div",{children:[i.jsx("p",{className:"text-[11px] font-medium text-zinc-600 dark:text-zinc-300",children:_r(F.sentAt,{day:"2-digit",month:"short"})}),i.jsx("p",{className:"text-[9px] text-zinc-400",children:u8(F.sentAt)})]})}),i.jsx("div",{className:"md:col-span-2 flex items-center",children:i.jsxs("div",{children:[i.jsx("p",{className:`text-[11px] font-medium text-${ue.color}-600 dark:text-${ue.color}-400`,children:ue.label}),i.jsx("p",{className:"text-[9px] text-zinc-400",children:F.deliveredAt?_r(F.deliveredAt,{day:"2-digit",month:"short"}):F.confirmedAt?_r(F.confirmedAt,{day:"2-digit",month:"short"}):""})]})}),i.jsxs("div",{className:"md:col-span-1 flex items-center justify-end",children:[F.status==="sent"&&i.jsx("button",{onClick:()=>{const X=g.map(Ne=>Ne.id===F.id?{...Ne,status:"confirmed"}:Ne);z(X),localStorage.setItem("padoca_sent_emails",JSON.stringify(X)),oe(" Confirmado!","success")},className:"p-2 hover:bg-emerald-50 dark:hover:bg-emerald-500/10 rounded-lg transition-colors group",title:"Confirmar recebimento",children:i.jsx("svg",{className:"w-4 h-4 text-zinc-400 group-hover:text-emerald-500 transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),F.status==="delivered"&&i.jsx("div",{className:"w-6 h-6 rounded-full bg-emerald-500 flex items-center justify-center",children:i.jsx("svg",{className:"w-3.5 h-3.5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]})]},F.id)})}),g.length>10&&i.jsx("div",{className:"mt-6 pt-4 border-t border-zinc-100 dark:border-white/5 text-center",children:i.jsxs("p",{className:"text-[10px] text-zinc-400",children:["Mostrando 10 de ",g.length," registros"]})})]})},"history")]})})]}),i.jsx(_e,{children:w&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-start md:items-center justify-center p-4 pt-20 md:pt-4",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/80 backdrop-blur-sm",onClick:()=>N(!1)}),i.jsxs(B.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-zinc-100 dark:bg-zinc-900 w-full max-w-lg rounded-2xl md:rounded-[2rem] shadow-2xl border border-zinc-200/50 dark:border-white/5 flex flex-col overflow-hidden max-h-[85vh]",children:[i.jsx(h8,{}),i.jsx("div",{className:"md:hidden w-full flex justify-center pt-4 pb-1 shrink-0",children:i.jsx("div",{className:"w-8 h-1 rounded-full bg-zinc-300 dark:bg-zinc-800"})}),i.jsxs("div",{className:"px-6 py-4 flex justify-between items-center shrink-0",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100 tracking-tight",children:"Compor Email"}),i.jsx("p",{className:"text-xs text-zinc-500",children:P==null?void 0:P.name})]}),i.jsx("button",{onClick:()=>N(!1),className:"w-11 h-11 flex items-center justify-center rounded-full bg-zinc-200 dark:bg-zinc-800 text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-all active:scale-90 touch-manipulation",children:i.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),i.jsx("div",{className:"overflow-y-auto custom-scrollbar flex-1 pb-10",children:i.jsxs("div",{className:"space-y-6 px-4 animate-fade-in",children:[i.jsxs("div",{className:"bg-white dark:bg-zinc-800/50 rounded-2xl border border-zinc-200 dark:border-white/5 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[i.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Para"}),i.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:R.to,onChange:F=>b(ne=>({...ne,to:F.target.value})),placeholder:"email@fornecedor.com"})]}),i.jsxs("div",{className:"flex items-center px-4 py-3 border-b border-zinc-100 dark:border-white/5",children:[i.jsx("label",{className:"w-20 text-[10px] font-bold text-zinc-400 uppercase tracking-widest shrink-0",children:"Assunto"}),i.jsx("input",{className:"flex-1 bg-transparent border-none py-1 text-sm font-semibold text-zinc-800 dark:text-white outline-none placeholder:text-zinc-300",value:R.subject,onChange:F=>b(ne=>({...ne,subject:F.target.value})),placeholder:"Assunto do email"})]}),i.jsxs("div",{className:"px-4 py-3",children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Mensagem"}),i.jsx("textarea",{className:"w-full bg-transparent border-none py-1 text-sm font-medium text-zinc-700 dark:text-zinc-300 outline-none resize-none leading-relaxed min-h-[200px]",value:R.body,onChange:F=>b(ne=>({...ne,body:F.target.value})),placeholder:"Contedo do email..."})]})]}),i.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[i.jsx("button",{onClick:ze,disabled:H||!R.to,className:`w-full py-4 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg transition-all flex items-center justify-center gap-2 ${H?"bg-emerald-500 text-white cursor-wait":"bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 active:scale-95"} disabled:opacity-50`,children:H?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Enviar Email"]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{onClick:De,className:"py-3 bg-zinc-50 dark:bg-white/5 border border-zinc-100 dark:border-white/10 text-zinc-600 dark:text-zinc-300 rounded-2xl text-[10px] font-bold uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-white/10 transition-all",children:"Copiar"}),i.jsx("button",{onClick:()=>N(!1),className:"py-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-2xl transition-all",children:"Cancelar"})]})]})]})})]})]})}),me&&we&&lt.createPortal(i.jsx(_e,{children:i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",onClick:()=>pe(!1),children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/30 dark:bg-black/60 backdrop-blur-sm"}),i.jsxs(B.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{type:"spring",damping:20,stiffness:300},className:"relative bg-white dark:bg-zinc-900 w-full max-w-sm rounded-3xl shadow-2xl border border-zinc-200/50 dark:border-white/10 overflow-hidden text-center p-8",onClick:F=>F.stopPropagation(),children:[i.jsx(B.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1,type:"spring",stiffness:500,damping:25},className:"w-20 h-20 mx-auto mb-6 rounded-full bg-emerald-500 flex items-center justify-center shadow-xl shadow-emerald-500/30",children:i.jsx("svg",{className:"w-10 h-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})}),i.jsx(B.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-xl font-bold text-zinc-900 dark:text-white mb-2",children:"Email Enviado!"}),i.jsxs(B.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-sm text-zinc-500 dark:text-zinc-400 mb-6",children:["Cotao enviada para",i.jsx("br",{}),i.jsx("span",{className:"font-semibold text-zinc-700 dark:text-zinc-300",children:we.supplierName||we.to})]}),i.jsx(B.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},className:"space-y-2",children:i.jsx("button",{onClick:()=>pe(!1),className:"w-full py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl text-xs font-bold uppercase tracking-widest shadow-lg active:scale-95 transition-all",children:"Continuar"})})]})]},"success-modal")}),document.body),i.jsx(_e,{children:C&&M&&lt.createPortal(i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[10000] flex items-center justify-center p-4",onClick:()=>D(!1),children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/40 dark:bg-black/70 backdrop-blur-sm"}),i.jsxs(B.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative bg-white dark:bg-zinc-900 w-full max-w-md rounded-3xl shadow-2xl border border-zinc-200/50 dark:border-white/10 overflow-hidden",onClick:F=>F.stopPropagation(),children:[i.jsx("div",{className:"p-6 pb-4 border-b border-zinc-100 dark:border-white/5",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl bg-blue-500 flex items-center justify-center text-white text-lg font-semibold shrink-0",children:((Ht=(Qe=M.supplierName)==null?void 0:Qe.charAt(0))==null?void 0:Ht.toUpperCase())||"?"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white",children:"Detalhes da Cotao"}),i.jsx("p",{className:"text-sm text-zinc-500",children:M.supplierName})]})]})}),i.jsxs("div",{className:"p-6 space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Valor Cotado (CAD)"}),i.jsxs("div",{className:"relative",children:[i.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-zinc-400 font-semibold",children:"$"}),i.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",value:xe.quotedValue,onChange:F=>ve(ne=>({...ne,quotedValue:F.target.value})),className:"w-full pl-8 pr-4 py-3.5 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-white/10 rounded-xl text-lg font-semibold text-zinc-900 dark:text-white placeholder:text-zinc-300 dark:placeholder:text-zinc-600 outline-none focus:ring-2 focus:ring-blue-500/30 transition-all"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Data de Entrega Prevista"}),i.jsx("input",{type:"date",value:xe.expectedDelivery,onChange:F=>ve(ne=>({...ne,expectedDelivery:F.target.value})),className:"w-full px-4 py-3.5 bg-zinc-50 dark:bg-zinc-800/50 border border-zinc-200 dark:border-white/10 rounded-xl text-base font-medium text-zinc-900 dark:text-white outline-none focus:ring-2 focus:ring-blue-500/30 transition-all"})]}),((Ct=M.itemNames)==null?void 0:Ct.length)>0&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-2",children:"Itens"}),i.jsx("div",{className:"flex flex-wrap gap-1.5",children:M.itemNames.map((F,ne)=>i.jsx("span",{className:"px-2 py-1 bg-zinc-100 dark:bg-zinc-800 rounded-lg text-[10px] font-medium text-zinc-600 dark:text-zinc-400",children:F},ne))})]})]}),i.jsxs("div",{className:"p-6 pt-0 space-y-2",children:[i.jsxs("button",{onClick:()=>{const F=g.map(ne=>ne.id===M.id?{...ne,status:"quoted",quotedAt:new Date().toISOString(),quotedValue:xe.quotedValue?parseFloat(xe.quotedValue):null,expectedDelivery:xe.expectedDelivery||null}:ne);z(F),localStorage.setItem("padoca_sent_emails",JSON.stringify(F)),D(!1),I(null),oe(xe.quotedValue?`Cotao de ${Xe(xe.quotedValue)} registrada!`:"Cotao recebida!","success")},className:"w-full py-4 bg-blue-500 text-white rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg hover:bg-blue-600 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:[i.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Confirmar Cotao"]}),i.jsx("button",{onClick:()=>{D(!1),I(null)},className:"w-full py-3 text-[10px] font-bold text-zinc-400 uppercase tracking-widest hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-2xl transition-all",children:"Cancelar"})]})]})]},"quote-modal"),document.body)}),i.jsx(_e,{children:je&&lt.createPortal(i.jsxs(B.div,{initial:{opacity:0,y:-20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-20,scale:.95},className:`fixed top-6 left-1/2 -translate-x-1/2 z-[20000] px-5 py-3 rounded-2xl shadow-2xl flex items-center gap-3 backdrop-blur-xl border ${je.type==="error"?"bg-rose-500/90 border-rose-400/20 text-white":je.type==="success"?"bg-emerald-500/90 border-emerald-400/20 text-white":"bg-zinc-900/90 border-white/10 text-white"}`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${je.type==="error"?"bg-white animate-pulse":je.type==="success"?"bg-white":"bg-indigo-400"}`}),i.jsx("span",{className:"text-sm font-semibold tracking-tight",children:je.message})]}),document.body)})]})}const $h=[{key:"ai",label:"IA",icon:k8},{key:"kanban",label:"Kanban",icon:p8},{key:"recipes",label:"Receitas",icon:f8},{key:"products",label:"Produtos",icon:w8},{key:"inventory",label:"Estoque",icon:g8},{key:"suppliers",label:"Fornecedores",icon:b8},{key:"costs",label:"Financeiro",icon:x8},{key:"ficha",label:"Ficha",icon:y8},{key:"calculator",label:"Produo",icon:v8}];function p8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2M9 7a2 2 0 012-2h2a2 2 0 012 2m0 10V7m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2"})})}function f8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})}function g8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}function x8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}function y8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}function v8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}function b8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}function w8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"})})}function k8({active:t}){return i.jsx("svg",{className:`w-4 h-4 transition-all ${t?"scale-110":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:t?2.5:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}const no={type:"spring",stiffness:500,damping:35,mass:.8},j8={initial:{opacity:0,y:8,scale:.99},enter:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-4,scale:.99}};function N8(){var u;const[t,e]=k.useState("pct"),[n,r]=k.useState(()=>localStorage.getItem("padoca_view")||"recipes"),[s,a]=k.useState(!1),[o,l]=k.useState(!1);k.useEffect(()=>{a(!0)},[]);const c=h=>{if(h===n){l(!1);return}r(h),l(!1),localStorage.setItem("padoca_view",h)};return(u=$h.find(h=>h.key===n))!=null&&u.label,i.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-zinc-50 via-white to-zinc-100 text-zinc-900 dark:from-black dark:via-zinc-950 dark:to-black dark:text-zinc-100 transition-colors duration-700 ${s?"opacity-100":"opacity-0"}`,children:[i.jsxs("div",{className:"fixed inset-0 pointer-events-none overflow-hidden select-none",children:[i.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[60%] h-[60%] bg-gradient-to-br from-indigo-500/[0.03] via-purple-500/[0.02] to-transparent blur-[100px] rounded-full"}),i.jsx("div",{className:"absolute bottom-[-20%] right-[-10%] w-[60%] h-[60%] bg-gradient-to-tl from-violet-500/[0.03] via-rose-500/[0.02] to-transparent blur-[100px] rounded-full"}),i.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMzAwIj48ZmlsdGVyIGlkPSJhIiB4PSIwIiB5PSIwIj48ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjc1IiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PGZlQ29sb3JNYXRyaXggdHlwZT0ic2F0dXJhdGUiIHZhbHVlcz0iMCIvPjwvZmlsdGVyPjxwYXRoIGZpbHRlcj0idXJsKCNhKSIgb3BhY2l0eT0iLjAzIiBkPSJNMCAwaDMwMHYzMDBIMHoiLz48L3N2Zz4=')] opacity-50 dark:opacity-30"})]}),i.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 sm:px-6 pb-8",children:[i.jsxs("header",{className:"sticky top-0 z-40 -mx-4 sm:-mx-6 px-4 sm:px-6 pt-3 pb-2 mb-2 md:relative md:pt-8 md:pb-4 md:mb-6",children:[i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"absolute inset-0 bg-white/70 dark:bg-black/70 backdrop-blur-2xl md:bg-transparent md:backdrop-blur-none border-b border-zinc-200/50 dark:border-white/5 md:border-none"}),i.jsxs("div",{className:"relative flex flex-col gap-0 md:gap-5",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1,...no},children:[i.jsx("h1",{className:"text-2xl md:text-4xl font-bold tracking-tight text-zinc-900 dark:text-white",children:"Padoca Pizza"}),i.jsx("p",{className:"text-[11px] text-zinc-400 dark:text-zinc-500 font-medium mt-1 tracking-wide uppercase hidden md:block",children:"Sistema de Produo & Gesto"})]}),i.jsx("button",{onClick:()=>l(!o),className:"relative w-11 h-11 flex items-center justify-center -mr-2 md:hidden","aria-label":"Menu",children:i.jsxs("div",{className:"relative w-[18px] h-[10px]",children:[i.jsx(B.span,{animate:o?{rotate:45,y:4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute top-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"}),i.jsx(B.span,{animate:o?{rotate:-45,y:-4}:{rotate:0,y:0},transition:{duration:.25,ease:[.25,.1,.25,1]},className:"absolute bottom-0 left-0 right-0 h-[1.5px] bg-zinc-800 dark:bg-zinc-200 origin-center"})]})}),i.jsx(B.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.2,...no},className:"hidden md:flex items-center gap-3",children:i.jsx(_e,{mode:"wait",children:n==="calculator"&&i.jsx(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:no,children:i.jsx(vv,{value:t,onChange:e})})})})]}),i.jsx(_e,{children:o&&i.jsxs(B.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"fixed inset-0 z-[9999] bg-white dark:bg-black md:hidden overflow-hidden",style:{top:0},children:[i.jsx("div",{className:"absolute top-4 right-4 z-10",children:i.jsx(B.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.1},onClick:()=>l(!1),className:"w-10 h-10 flex items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800","aria-label":"Close",children:i.jsx("svg",{className:"w-5 h-5 text-zinc-600 dark:text-zinc-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})}),i.jsxs("div",{className:"flex flex-col justify-center h-full px-6 pb-20 overflow-y-auto scrollbar-hide",children:[i.jsx(B.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"text-[10px] font-bold text-zinc-400 uppercase tracking-widest mb-6",children:"Navegao"}),i.jsx("div",{className:"space-y-1",children:$h.map(({key:h,label:p,icon:m},y)=>{const j=n===h;return i.jsxs(B.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:y*.04,duration:.25,ease:[.25,.46,.45,.94]},onClick:()=>c(h),className:`w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all ${j?"bg-indigo-50 dark:bg-white/10 text-indigo-600 dark:text-white":"text-zinc-600 dark:text-zinc-400 active:bg-zinc-100 dark:active:bg-white/5"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${j?"bg-indigo-500 text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400"}`,children:i.jsx(m,{active:j})}),i.jsx("span",{className:"text-[17px] font-semibold tracking-tight",children:p}),j&&i.jsx(B.div,{layoutId:"mobile-active-check",className:"ml-auto",children:i.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})})})]},h)})})]}),i.jsx(B.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.35},className:"absolute bottom-6 left-0 right-0 text-center",children:i.jsx("p",{className:"text-[10px] text-zinc-300 dark:text-zinc-700 uppercase tracking-widest font-medium",children:"Padoca Pizza  2024"})})]})}),i.jsxs("nav",{className:"relative hidden md:block",children:[i.jsx(B.nav,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15,...no},className:"inline-flex items-center p-1.5 bg-white/90 dark:bg-zinc-900/90 backdrop-blur-2xl rounded-2xl border border-zinc-200/50 dark:border-white/10 shadow-lg",children:$h.map(({key:h,label:p,icon:m})=>{const y=n===h;return i.jsxs("button",{onClick:()=>c(h),className:`relative px-4 py-2.5 rounded-xl transition-colors duration-200 ${y?"text-indigo-600 dark:text-white":"text-zinc-500 dark:text-zinc-400 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:[y&&i.jsx(B.div,{layoutId:"nav-active-desktop",className:"absolute inset-0 bg-indigo-50 dark:bg-white/10 rounded-xl",transition:{type:"spring",stiffness:400,damping:30}}),i.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[i.jsx(m,{active:y}),i.jsx("span",{className:"text-[11px] font-semibold uppercase tracking-wide",children:p})]})]},h)})}),i.jsx(_e,{mode:"wait",children:n==="calculator"&&i.jsx(B.div,{initial:{opacity:0,scale:.8,width:0},animate:{opacity:1,scale:1,width:"auto"},exit:{opacity:0,scale:.8,width:0},transition:no,className:"md:hidden flex-shrink-0 mt-3",children:i.jsx(vv,{value:t,onChange:e})})})]})]})]}),i.jsx(_e,{mode:"wait",children:i.jsx(B.main,{initial:"initial",animate:"enter",exit:"exit",variants:j8,transition:{duration:.25,ease:[.4,0,.2,1]},className:"relative z-10",children:n==="ai"?i.jsx(m8,{}):n==="kanban"?i.jsx(hM,{}):n==="recipes"?i.jsx(aM,{}):n==="products"?i.jsx(ZM,{}):n==="inventory"?i.jsx(pD,{}):n==="suppliers"?i.jsx(bM,{}):n==="costs"?i.jsx(hD,{}):n==="ficha"?i.jsx(gD,{}):i.jsx(bD,{inputMode:t,setInputMode:e})},n)})]})]})}class z8 extends $n.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught:",e,n)}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-zinc-50 dark:bg-black p-6",children:i.jsxs("div",{className:"max-w-md text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-rose-100 dark:bg-rose-900/30 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx("svg",{className:"w-10 h-10 text-rose-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),i.jsx("h1",{className:"text-3xl font-black text-zinc-900 dark:text-white mb-3 tracking-tight",children:"Algo deu errado"}),i.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 mb-8 leading-relaxed",children:"Desculpe, encontramos um erro inesperado. Tente recarregar a pgina."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-8 py-4 bg-zinc-900 dark:bg-white text-white dark:text-zinc-900 rounded-2xl font-bold text-sm uppercase tracking-wide shadow-xl hover:scale-105 active:scale-95 transition-transform",children:"Recarregar Pgina"}),!1]})}):this.props.children}}qh.createRoot(document.getElementById("root")).render(i.jsx($n.StrictMode,{children:i.jsx(z8,{children:i.jsx(N8,{})})}));
